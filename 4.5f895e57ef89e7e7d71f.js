(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{663:function(t,e,a){"use strict";
/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c,l,d,u,p,_,m,v,y,g,E,f=function(){function t(){i(this,t),this._listeners={}}return r(t,[{key:"addEventListener",value:function(t,e){var a=this._listeners;void 0===a[t]&&(a[t]=[]),-1===a[t].indexOf(e)&&a[t].push(e)}},{key:"hasEventListener",value:function(t,e){var a=this._listeners;return void 0!==a[t]&&-1!==a[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){var a=this._listeners[t];if(void 0!==a){var i=a.indexOf(e);-1!==i&&a.splice(i,1)}}},{key:"dispatchEvent",value:function(t){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var a=e.slice(0),i=0,o=a.length;i<o;i++)a[i].call(this,t)}}}]),t}(),O=/Mac/.test(navigator.platform),T=1e-5,w=2*Math.PI,A=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,DOLLY:3,ZOOM:4,TOUCH_ROTATE:5,TOUCH_TRUCK:6,TOUCH_DOLLY:7,TOUCH_ZOOM:8,TOUCH_DOLLY_TRUCK:9,TOUCH_ZOOM_TRUCK:10}),C=function(t){function e(t,a){var o,r,s,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i(this,e),r=this,(o=!(s=n(e).call(this))||"object"!=typeof s&&"function"!=typeof s?h(r):s)._camera=t,o._yAxisUpSpace=(new c.Quaternion).setFromUnitVectors(o._camera.up,l),o._yAxisUpSpaceInverse=o._yAxisUpSpace.clone().inverse(),o._state=A.NONE,o.enabled=!0,o._camera.isPerspectiveCamera&&(o.minDistance=0,o.maxDistance=1/0),o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.minZoom=.01,o.maxZoom=1/0,o._boundary=new c.Box3(new c.Vector3(-1/0,-1/0,-1/0),new c.Vector3(1/0,1/0,1/0)),o.boundaryFriction=0,o._boundaryEnclosesCamera=!1,o.dampingFactor=.05,o.draggingDampingFactor=.25,o.azimuthRotateSpeed=1,o.polarRotateSpeed=1,o.dollySpeed=1,o.truckSpeed=2,o.dollyToCursor=!1,o.verticalDragToForward=!1,o._domElement=a,o._viewport=null,o._target=new c.Vector3,o._targetEnd=o._target.clone(),o._spherical=(new c.Spherical).setFromVector3(o._camera.position.clone().applyQuaternion(o._yAxisUpSpace)),o._sphericalEnd=o._spherical.clone(),o._zoom=o._camera.zoom,o._zoomEnd=o._zoom,o.mouseButtons={left:A.ROTATE,middle:A.DOLLY,right:A.TRUCK,wheel:o._camera.isPerspectiveCamera?A.DOLLY:o._camera.isOrthographicCamera?A.ZOOM:A.NONE},o.touches={one:A.TOUCH_ROTATE,two:o._camera.isPerspectiveCamera?A.TOUCH_DOLLY_TRUCK:o._camera.isOrthographicCamera?A.TOUCH_ZOOM_TRUCK:A.TOUCH_NONE,three:A.TOUCH_TRUCK},o._target0=o._target.clone(),o._position0=o._camera.position.clone(),o._zoom0=o._zoom,o._dollyControlAmount=0,o._dollyControlCoord=new c.Vector2,o._hasUpdated=!0,o.update(0),!o._domElement||p.ignoreDOMEventListeners)o._removeAllEventListeners=function(){};else{var _,v=function(t){if(z.enabled){t.preventDefault();var e=z._state;switch(t.button){case c.MOUSE.LEFT:z._state=z.mouseButtons.left;break;case c.MOUSE.MIDDLE:z._state=z.mouseButtons.middle;break;case c.MOUSE.RIGHT:z._state=z.mouseButtons.right}e!==z._state&&f(t)}},y=function(t){if(z.enabled){t.preventDefault();var e=z._state;switch(t.touches.length){case 1:z._state=z.touches.one;break;case 2:z._state=z.touches.two;break;case 3:z._state=z.touches.three}e!==z._state&&f(t)}},g=function(t){if(z.enabled){t.preventDefault();var e,a,i=O?-1:-3,o=void 0!==t.wheelDelta?t.wheelDelta/120:1===t.deltaMode?t.deltaY/i:t.deltaY/(10*i);switch(z.dollyToCursor&&(_=z._getClientRect(m),e=(t.clientX-_.x)/_.z*2-1,a=(t.clientY-_.y)/_.w*-2+1),z.mouseButtons.wheel){case A.DOLLY:k(-o,e,a);break;case A.ZOOM:S(-o,e,a)}z.dispatchEvent({type:"control",originalEvent:t})}},E=function(t){z.enabled&&t.preventDefault()},f=function(t){if(z.enabled){if(t.preventDefault(),U(t,d),_=z._getClientRect(m),L.copy(d),x(t)&&t.touches.length>=2){var e=d.x-t.touches[1].clientX,a=d.y-t.touches[1].clientY,i=Math.sqrt(e*e+a*a);D.set(0,i);var o=.5*(t.touches[0].clientX+t.touches[1].clientX),r=.5*(t.touches[0].clientY+t.touches[1].clientY);L.set(o,r)}document.addEventListener("mousemove",T,{passive:!1}),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("mouseup",C),document.addEventListener("touchend",C),z.dispatchEvent({type:"controlstart",originalEvent:t})}},T=function(t){if(z.enabled){t.preventDefault(),U(t,d);var e=L.x-d.x,a=L.y-d.y;switch(L.copy(d),z._state){case A.ROTATE:case A.TOUCH_ROTATE:var i=w*z.azimuthRotateSpeed*e/_.z,o=w*z.polarRotateSpeed*a/_.w;z.rotate(i,o,!0);break;case A.DOLLY:case A.ZOOM:break;case A.TOUCH_DOLLY:case A.TOUCH_ZOOM:case A.TOUCH_DOLLY_TRUCK:case A.TOUCH_ZOOM_TRUCK:var r=d.x-t.touches[1].clientX,n=d.y-t.touches[1].clientY,s=Math.sqrt(r*r+n*n),h=D.y-s;D.set(0,s);var c=z.dollyToCursor?(L.x-_.x)/_.z*2-1:0,l=z.dollyToCursor?(L.y-_.y)/_.w*-2+1:0;switch(z._state){case A.TOUCH_DOLLY:case A.TOUCH_DOLLY_TRUCK:k(h/8,c,l);break;case A.TOUCH_ZOOM:case A.TOUCH_ZOOM_TRUCK:S(h/8,c,l)}z._state!==A.TOUCH_DOLLY_TRUCK&&z._state!==A.TOUCH_ZOOM_TRUCK||b(e,a);break;case A.TRUCK:case A.TOUCH_TRUCK:b(e,a)}z.dispatchEvent({type:"control",originalEvent:t})}},C=function t(e){z.enabled&&(z._state=A.NONE,document.removeEventListener("mousemove",T,{passive:!1}),document.removeEventListener("touchmove",T,{passive:!1}),document.removeEventListener("mouseup",t),document.removeEventListener("touchend",t),z.dispatchEvent({type:"controlend",originalEvent:e}))},b=function(t,e){if(z._camera.isPerspectiveCamera){var a=u.copy(z._camera.position).sub(z._target),i=z._camera.getEffectiveFOV()*c.Math.DEG2RAD,o=a.length()*Math.tan(i/2),r=z.truckSpeed*t*o/_.w,n=z.truckSpeed*e*o/_.w;z.verticalDragToForward?(z.truck(r,0,!0),z.forward(-n,!0)):z.truck(r,n,!0)}else if(z._camera.isOrthographicCamera){var s=t*(z._camera.right-z._camera.left)/z._camera.zoom/_.z,h=e*(z._camera.top-z._camera.bottom)/z._camera.zoom/_.w;z.truck(s,h,!0)}},k=function(t,e,a){var i=Math.pow(.95,-t*z.dollySpeed),o=z._sphericalEnd.radius*i,r=z._sphericalEnd.radius;z.dollyTo(o),z.dollyToCursor&&(z._dollyControlAmount+=z._sphericalEnd.radius-r,z._dollyControlCoord.set(e,a))},S=function(t){var e=Math.pow(.95,t*z.dollySpeed);z.zoomTo(z._zoom*e)},z=h(o),L=new c.Vector2,D=new c.Vector2;o._domElement.addEventListener("mousedown",v),o._domElement.addEventListener("touchstart",y),o._domElement.addEventListener("wheel",g),o._domElement.addEventListener("contextmenu",E),o._removeAllEventListeners=function(){z._domElement.removeEventListener("mousedown",v),z._domElement.removeEventListener("touchstart",y),z._domElement.removeEventListener("wheel",g),z._domElement.removeEventListener("contextmenu",E),document.removeEventListener("mousemove",T),document.removeEventListener("touchmove",T),document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C)}}return o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),r(e,null,[{key:"install",value:function(t){c=t.THREE,l=new c.Vector3(0,1,0),d=new c.Vector2,u=new c.Vector3,p=new c.Vector3,_=new c.Vector3,m=new c.Vector4,v=new c.Vector3,y=new c.Vector3,g=new c.Spherical,E=new c.Spherical}},{key:"ACTION",get:function(){return A}}]),r(e,[{key:"rotate",value:function(t,e,a){this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,a)}},{key:"rotateTo",value:function(t,e,a){var i=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,t)),o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,e));this._sphericalEnd.theta=i,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),a||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._hasUpdated=!0}},{key:"dolly",value:function(t,e){this.dollyTo(this._sphericalEnd.radius-t,e)}},{key:"dollyTo",value:function(t,e){this._camera.isOrthographicCamera?console.warn("dolly is not available for OrthographicCamera"):(this._sphericalEnd.radius=c.Math.clamp(t,this.minDistance,this.maxDistance),e||(this._spherical.radius=this._sphericalEnd.radius),this._hasUpdated=!0)}},{key:"zoom",value:function(t,e){this.zoomTo(this._zoomEnd+t,e)}},{key:"zoomTo",value:function(t,e){this._zoomEnd=c.Math.clamp(t,this.minZoom,this.maxZoom),e||(this._zoom=this._zoomEnd),this._hasUpdated=!0}},{key:"pan",value:function(t,e,a){console.log("`pan` has been renamed to `truck`"),this.truck(t,e,a)}},{key:"truck",value:function(t,e,a){this._camera.updateMatrix(),v.setFromMatrixColumn(this._camera.matrix,0),y.setFromMatrixColumn(this._camera.matrix,1),v.multiplyScalar(t),y.multiplyScalar(-e);var i=u.copy(v).add(y);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),a||this._target.copy(this._targetEnd),this._hasUpdated=!0}},{key:"forward",value:function(t,e){u.setFromMatrixColumn(this._camera.matrix,0),u.crossVectors(this._camera.up,u),u.multiplyScalar(t),this._encloseToBoundary(this._targetEnd,u,this.boundaryFriction),e||this._target.copy(this._targetEnd),this._hasUpdated=!0}},{key:"moveTo",value:function(t,e,a,i){this._targetEnd.set(t,e,a),i||this._target.copy(this._targetEnd),this._hasUpdated=!0}},{key:"fitTo",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._camera.isOrthographicCamera)console.warn("fitTo is not supported for OrthographicCamera");else{var i=a.paddingLeft||0,o=a.paddingRight||0,r=a.paddingBottom||0,n=a.paddingTop||0,s=t.isBox3?t.clone():(new c.Box3).setFromObject(t),h=s.getSize(u),l=h.x+i+o,d=h.y+n+r,p=h.z,_=this.getDistanceToFit(l,d,p);this.dollyTo(_,e);var m=s.getCenter(u),v=m.x-(.5*i-.5*o),y=m.y+(.5*n-.5*r),g=m.z;this.moveTo(v,y,g,e),this.normalizeRotations(),this.rotateTo(0,90*c.Math.DEG2RAD,e)}}},{key:"setLookAt",value:function(t,e,a,i,o,r,n){var s=u.set(t,e,a),h=p.set(i,o,r);this._targetEnd.copy(h),this._sphericalEnd.setFromVector3(s.sub(h).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),n||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0}},{key:"lerpLookAt",value:function(t,e,a,i,o,r,n,s,h,c,l,d,_,m){var v=u.set(t,e,a),y=p.set(i,o,r);g.setFromVector3(v.sub(y).applyQuaternion(this._yAxisUpSpace));var f=u.set(c,l,d);this._targetEnd.copy(y).lerp(f,_);var O=p.set(n,s,h);E.setFromVector3(O.sub(f).applyQuaternion(this._yAxisUpSpace));var T=E.theta-g.theta,w=E.phi-g.phi,A=E.radius-g.radius;this._sphericalEnd.set(g.radius+A*_,g.phi+w*_,g.theta+T*_),this.normalizeRotations(),m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0}},{key:"setPosition",value:function(t,e,a,i){this.setLookAt(t,e,a,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}},{key:"setTarget",value:function(t,e,a,i){var o=this.getPosition(u);this.setLookAt(o.x,o.y,o.z,t,e,a,i)}},{key:"setBoundary",value:function(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._hasUpdated=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._hasUpdated=!0}},{key:"setViewport",value:function(t,e,a,i){null!==t?(this._viewport=this._viewport||new c.Vector4,"number"==typeof t?this._viewport.set(t,e,a,i):this._viewport.copy(t)):this._viewport=null}},{key:"getDistanceToFit",value:function(t,e,a){var i=this._camera,o=t/e,r=i.getEffectiveFOV()*c.Math.DEG2RAD,n=i.aspect;return.5*(o<n?e:t/n)/Math.tan(.5*r)+.5*a}},{key:"getTarget",value:function(t){return(t&&t.isVector3?t:new c.Vector3).copy(this._targetEnd)}},{key:"getPosition",value:function(t){return(t&&t.isVector3?t:new c.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}},{key:"normalizeRotations",value:function(){this._sphericalEnd.theta=this._sphericalEnd.theta%w,this._spherical.theta+=w*Math.round((this._sphericalEnd.theta-this._spherical.theta)/w)}},{key:"reset",value:function(t){this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.zoomTo(this._zoom0,t)}},{key:"saveState",value:function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom}},{key:"updateCameraUp",value:function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,l),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).inverse()}},{key:"update",value:function(t){var e=this._state===A.NONE?this.dampingFactor:this.draggingDampingFactor,a=1-Math.exp(-e*t/.016),i=this._sphericalEnd.theta-this._spherical.theta,o=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,n=u.subVectors(this._targetEnd,this._target);if(b(i)&&b(o)&&b(r)&&b(n.x)&&b(n.y)&&b(n.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd)):(this._spherical.set(this._spherical.radius+r*a,this._spherical.phi+o*a,this._spherical.theta+i*a),this._target.add(n.multiplyScalar(a)),this._hasUpdated=!0),0!==this._dollyControlAmount){if(this._camera.isPerspectiveCamera){var s=u.copy(u.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse)).normalize().negate(),h=p.copy(s).cross(_.copy(this._camera.up)).normalize();0===h.lengthSq()&&(h.x=1);var l=_.crossVectors(h,s),d=this._sphericalEnd.radius*Math.tan(this._camera.getEffectiveFOV()*c.Math.DEG2RAD*.5),m=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,v=u.copy(this._targetEnd).add(h.multiplyScalar(this._dollyControlCoord.x*d*this._camera.aspect)).add(l.multiplyScalar(this._dollyControlCoord.y*d));this._targetEnd.lerp(v,m),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),u.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var y=this._zoomEnd-this._zoom;this._zoom+=y*a,this._camera.zoom!==this._zoom&&(b(y)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._hasUpdated=!0);var g=this._hasUpdated;return this._hasUpdated=!1,g&&this.dispatchEvent({type:"update"}),g}},{key:"toJSON",value:function(){return JSON.stringify({enabled:this.enabled,minDistance:this.minDistance,maxDistance:k(this.maxDistance),minPolarAngle:this.minPolarAngle,maxPolarAngle:k(this.maxPolarAngle),minAzimuthAngle:k(this.minAzimuthAngle),maxAzimuthAngle:k(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:this._camera.position.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray()})}},{key:"fromJSON",value:function(t,e){var a=JSON.parse(t),i=(new c.Vector3).fromArray(a.position);this.enabled=a.enabled,this.minDistance=a.minDistance,this.maxDistance=S(a.maxDistance),this.minPolarAngle=a.minPolarAngle,this.maxPolarAngle=S(a.maxPolarAngle),this.minAzimuthAngle=S(a.minAzimuthAngle),this.maxAzimuthAngle=S(a.maxAzimuthAngle),this.dampingFactor=a.dampingFactor,this.draggingDampingFactor=a.draggingDampingFactor,this.dollySpeed=a.dollySpeed,this.truckSpeed=a.truckSpeed,this.dollyToCursor=a.dollyToCursor,this.verticalDragToForward=a.verticalDragToForward,this._target0.fromArray(a.target0),this._position0.fromArray(a.position0),this._targetEnd.fromArray(a.target),this._sphericalEnd.setFromVector3(i.sub(this._target0).applyQuaternion(this._yAxisUpSpace)),e||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0}},{key:"dispose",value:function(){this._removeAllEventListeners()}},{key:"_encloseToBoundary",value:function(t,e,a){var i=e.lengthSq();if(0===i)return t;var o=p.copy(e).add(t),r=this._boundary.clampPoint(o,_).sub(o),n=r.lengthSq();if(0===n)return t.add(e);if(n===i)return t;if(0===a)return t.add(e).add(r);var s=1+a*n/e.dot(r);return t.add(p.copy(e).multiplyScalar(s)).add(r.multiplyScalar(1-a))}},{key:"_getClientRect",value:function(t){var e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.z=this._viewport.z,t.w=this._viewport.w):(t.z=e.width,t.w=e.height),t}},{key:"phiSpeed",set:function(t){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=t}},{key:"thetaSpeed",set:function(t){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=t}},{key:"boundaryEnclosesCamera",get:function(){return this._boundaryEnclosesCamera},set:function(t){this._boundaryEnclosesCamera=t,this._hasUpdated=!0}}]),e}(f);function U(t,e){if(e.set(0,0),x(t)){for(var a=0;a<t.touches.length;a++)e.x+=t.touches[a].clientX,e.y+=t.touches[a].clientY;return e.x/=t.touches.length,e.y/=t.touches.length,e}return e.set(t.clientX,t.clientY),e}function x(t){return"TouchEvent"in window&&t instanceof TouchEvent}function b(t){return Math.abs(t)<T}function k(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function S(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}e.a=C}}]);