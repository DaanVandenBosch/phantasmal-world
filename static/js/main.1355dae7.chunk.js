(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{245:function(e,t,n){e.exports=n(538)},250:function(e,t,n){},256:function(e,t,n){},329:function(e,t,n){},335:function(e,t,n){},337:function(e,t,n){},350:function(e,t,n){},351:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},526:function(e,t,n){},530:function(e,t,n){},531:function(e,t,n){},533:function(e,t,n){},534:function(e,t,n){},538:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),o=n.n(i),s=n(24),l=n.n(s),u=(n(250),n(133),n(55)),c=(n(253),n(110)),d=n(6),p=n(9),h=n(20),_=n(18),m=n(21),f=n(30),v=n(70),w=n(15),b=n(11),y=(n(46),n(3)),k=function(){function e(t,n){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(p.a)(e,[{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}}]),e}(),g=function(){function e(t,n,r){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=n,this.z=r}return Object(p.a)(e,[{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}}]),e}();function R(e){var t=Object.values(e),n=t.filter(function(e){return"number"===typeof e});return n.length?n:t}var O,j,S,x,D=function(){function e(t,n){Object(d.a)(this,e),this.keys=void 0,this.values=new Map,this.keys=R(t);var r=!0,a=!1,i=void 0;try{for(var o,s=this.keys[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.values.set(l,n(l))}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}return Object(p.a)(e,[{key:"get",value:function(e){return this.values.get(e)}}]),e}(),C=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.id=t,this.name=n,this.min_atp=r,this.max_atp=a,this.ata=i,this.max_grind=o,this.required_atp=s},E=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},L=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},B=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},M=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},F=(O=function(){function e(t){Object(d.a)(this,e),this.type=t,Object(w.a)(this,"attribute",j,this),Object(w.a)(this,"hit",S,this),Object(w.a)(this,"grind",x,this)}return Object(p.a)(e,[{key:"grind_atp",get:function(){return 2*this.grind}}]),e}(),j=Object(b.a)(O.prototype,"attribute",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=Object(b.a)(O.prototype,"hit",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=Object(b.a)(O.prototype,"grind",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(O.prototype,"grind_atp",[y.f],Object.getOwnPropertyDescriptor(O.prototype,"grind_atp"),O.prototype),O),I=function(){function e(t,n,r,a,i,o,s){if(Object(d.a)(this,e),this.id=void 0,this.code=void 0,this.name=void 0,this.simple_name=void 0,this.ultimate_name=void 0,this.episode=void 0,this.enemy=void 0,this.rare_type=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be an integer greater than or equal to 0, got ".concat(t,"."));if(!n)throw new Error("code is required.");if(!r)throw new Error("name is required.");if(!a)throw new Error("simple_name is required.");if(!i)throw new Error("ultimate_name is required.");if(null!=o&&1!==o&&2!==o&&4!==o)throw new Error("episode should be undefined, 1, 2 or 4, got ".concat(o,"."));if("boolean"!==typeof s)throw new Error("enemy is required.");if(this.id=t,this.code=n,this.simple_name=a,this.ultimate_name=i,this.name=r,this.episode=o,this.enemy=s,e.by_code_map.set(n,this),o){var l=e.by_ep_and_name[o];l&&(l.set(a,this),l.set(i,this))}}return Object(p.a)(e,null,[{key:"by_code",value:function(e){return this.by_code_map.get(e)}},{key:"by_name_and_episode",value:function(e,t){return fe(t),this.by_ep_and_name[t].get(e)}}]),e}();I.by_code_map=new Map,I.by_ep_and_name=[void 0,new Map,new Map,void 0,new Map],I.Unknown=void 0,I.FemaleFat=void 0,I.FemaleMacho=void 0,I.FemaleTall=void 0,I.MaleDwarf=void 0,I.MaleFat=void 0,I.MaleMacho=void 0,I.MaleOld=void 0,I.BlueSoldier=void 0,I.RedSoldier=void 0,I.Principal=void 0,I.Tekker=void 0,I.GuildLady=void 0,I.Scientist=void 0,I.Nurse=void 0,I.Irene=void 0,I.ItemShop=void 0,I.Nurse2=void 0,I.Hildebear=void 0,I.Hildeblue=void 0,I.RagRappy=void 0,I.AlRappy=void 0,I.Monest=void 0,I.Mothmant=void 0,I.SavageWolf=void 0,I.BarbarousWolf=void 0,I.Booma=void 0,I.Gobooma=void 0,I.Gigobooma=void 0,I.Dragon=void 0,I.GrassAssassin=void 0,I.PoisonLily=void 0,I.NarLily=void 0,I.NanoDragon=void 0,I.EvilShark=void 0,I.PalShark=void 0,I.GuilShark=void 0,I.PofuillySlime=void 0,I.PouillySlime=void 0,I.PanArms=void 0,I.Migium=void 0,I.Hidoom=void 0,I.DeRolLe=void 0,I.Dubchic=void 0,I.Gilchic=void 0,I.Garanz=void 0,I.SinowBeat=void 0,I.SinowGold=void 0,I.Canadine=void 0,I.Canane=void 0,I.Dubswitch=void 0,I.VolOpt=void 0,I.Delsaber=void 0,I.ChaosSorcerer=void 0,I.DarkGunner=void 0,I.DeathGunner=void 0,I.ChaosBringer=void 0,I.DarkBelra=void 0,I.Dimenian=void 0,I.LaDimenian=void 0,I.SoDimenian=void 0,I.Bulclaw=void 0,I.Bulk=void 0,I.Claw=void 0,I.DarkFalz=void 0,I.Hildebear2=void 0,I.Hildeblue2=void 0,I.RagRappy2=void 0,I.LoveRappy=void 0,I.StRappy=void 0,I.HalloRappy=void 0,I.EggRappy=void 0,I.Monest2=void 0,I.Mothmant2=void 0,I.PoisonLily2=void 0,I.NarLily2=void 0,I.GrassAssassin2=void 0,I.Dimenian2=void 0,I.LaDimenian2=void 0,I.SoDimenian2=void 0,I.DarkBelra2=void 0,I.BarbaRay=void 0,I.SavageWolf2=void 0,I.BarbarousWolf2=void 0,I.PanArms2=void 0,I.Migium2=void 0,I.Hidoom2=void 0,I.Dubchic2=void 0,I.Gilchic2=void 0,I.Garanz2=void 0,I.Dubswitch2=void 0,I.Delsaber2=void 0,I.ChaosSorcerer2=void 0,I.GolDragon=void 0,I.SinowBerill=void 0,I.SinowSpigell=void 0,I.Merillia=void 0,I.Meriltas=void 0,I.Mericarol=void 0,I.Mericus=void 0,I.Merikle=void 0,I.UlGibbon=void 0,I.ZolGibbon=void 0,I.Gibbles=void 0,I.Gee=void 0,I.GiGue=void 0,I.IllGill=void 0,I.DelLily=void 0,I.Epsilon=void 0,I.GalGryphon=void 0,I.Deldepth=void 0,I.Delbiter=void 0,I.Dolmolm=void 0,I.Dolmdarl=void 0,I.Morfos=void 0,I.Recobox=void 0,I.Recon=void 0,I.SinowZoa=void 0,I.SinowZele=void 0,I.OlgaFlow=void 0,I.SandRappy=void 0,I.DelRappy=void 0,I.Astark=void 0,I.SatelliteLizard=void 0,I.Yowie=void 0,I.MerissaA=void 0,I.MerissaAA=void 0,I.Girtablulu=void 0,I.Zu=void 0,I.Pazuzu=void 0,I.Boota=void 0,I.ZeBoota=void 0,I.BaBoota=void 0,I.Dorphon=void 0,I.DorphonEclair=void 0,I.Goran=void 0,I.PyroGoran=void 0,I.GoranDetonator=void 0,I.SaintMilion=void 0,I.Shambertin=void 0,I.Kondrieu=void 0,function(){var e=0;I.Unknown=new I(e++,"Unknown","Unknown","Unknown","Unknown",void 0,!1),I.FemaleFat=new I(e++,"FemaleFat","Female Fat","Female Fat","Female Fat",void 0,!1),I.FemaleMacho=new I(e++,"FemaleMacho","Female Macho","Female Macho","Female Macho",void 0,!1),I.FemaleTall=new I(e++,"FemaleTall","Female Tall","Female Tall","Female Tall",void 0,!1),I.MaleDwarf=new I(e++,"MaleDwarf","Male Dwarf","Male Dwarf","Male Dwarf",void 0,!1),I.MaleFat=new I(e++,"MaleFat","Male Fat","Male Fat","Male Fat",void 0,!1),I.MaleMacho=new I(e++,"MaleMacho","Male Macho","Male Macho","Male Macho",void 0,!1),I.MaleOld=new I(e++,"MaleOld","Male Old","Male Old","Male Old",void 0,!1),I.BlueSoldier=new I(e++,"BlueSoldier","Blue Soldier","Blue Soldier","Blue Soldier",void 0,!1),I.RedSoldier=new I(e++,"RedSoldier","Red Soldier","Red Soldier","Red Soldier",void 0,!1),I.Principal=new I(e++,"Principal","Principal","Principal","Principal",void 0,!1),I.Tekker=new I(e++,"Tekker","Tekker","Tekker","Tekker",void 0,!1),I.GuildLady=new I(e++,"GuildLady","Guild Lady","Guild Lady","Guild Lady",void 0,!1),I.Scientist=new I(e++,"Scientist","Scientist","Scientist","Scientist",void 0,!1),I.Nurse=new I(e++,"Nurse","Nurse","Nurse","Nurse",void 0,!1),I.Irene=new I(e++,"Irene","Irene","Irene","Irene",void 0,!1),I.ItemShop=new I(e++,"ItemShop","Item Shop","Item Shop","Item Shop",void 0,!1),I.Nurse2=new I(e++,"Nurse2","Nurse (Ep. II)","Nurse","Nurse",2,!1),I.Hildebear=new I(e++,"Hildebear","Hildebear","Hildebear","Hildelt",1,!0),I.Hildeblue=new I(e++,"Hildeblue","Hildeblue","Hildeblue","Hildetorr",1,!0),I.Hildebear.rare_type=I.Hildeblue,I.RagRappy=new I(e++,"RagRappy","Rag Rappy","Rag Rappy","El Rappy",1,!0),I.AlRappy=new I(e++,"AlRappy","Al Rappy","Al Rappy","Pal Rappy",1,!0),I.RagRappy.rare_type=I.AlRappy,I.Monest=new I(e++,"Monest","Monest","Monest","Mothvist",1,!0),I.Mothmant=new I(e++,"Mothmant","Mothmant","Mothmant","Mothvert",1,!0),I.SavageWolf=new I(e++,"SavageWolf","Savage Wolf","Savage Wolf","Gulgus",1,!0),I.BarbarousWolf=new I(e++,"BarbarousWolf","Barbarous Wolf","Barbarous Wolf","Gulgus-Gue",1,!0),I.Booma=new I(e++,"Booma","Booma","Booma","Bartle",1,!0),I.Gobooma=new I(e++,"Gobooma","Gobooma","Gobooma","Barble",1,!0),I.Gigobooma=new I(e++,"Gigobooma","Gigobooma","Gigobooma","Tollaw",1,!0),I.Dragon=new I(e++,"Dragon","Dragon","Dragon","Sil Dragon",1,!0),I.GrassAssassin=new I(e++,"GrassAssassin","Grass Assassin","Grass Assassin","Crimson Assassin",1,!0),I.PoisonLily=new I(e++,"PoisonLily","Poison Lily","Poison Lily","Ob Lily",1,!0),I.NarLily=new I(e++,"NarLily","Nar Lily","Nar Lily","Mil Lily",1,!0),I.PoisonLily.rare_type=I.NarLily,I.NanoDragon=new I(e++,"NanoDragon","Nano Dragon","Nano Dragon","Nano Dragon",1,!0),I.EvilShark=new I(e++,"EvilShark","Evil Shark","Evil Shark","Vulmer",1,!0),I.PalShark=new I(e++,"PalShark","Pal Shark","Pal Shark","Govulmer",1,!0),I.GuilShark=new I(e++,"GuilShark","Guil Shark","Guil Shark","Melqueek",1,!0),I.PofuillySlime=new I(e++,"PofuillySlime","Pofuilly Slime","Pofuilly Slime","Pofuilly Slime",1,!0),I.PouillySlime=new I(e++,"PouillySlime","Pouilly Slime","Pouilly Slime","Pouilly Slime",1,!0),I.PofuillySlime.rare_type=I.PouillySlime,I.PanArms=new I(e++,"PanArms","Pan Arms","Pan Arms","Pan Arms",1,!0),I.Migium=new I(e++,"Migium","Migium","Migium","Migium",1,!0),I.Hidoom=new I(e++,"Hidoom","Hidoom","Hidoom","Hidoom",1,!0),I.DeRolLe=new I(e++,"DeRolLe","De Rol Le","De Rol Le","Dal Ra Lie",1,!0),I.Dubchic=new I(e++,"Dubchic","Dubchic","Dubchic","Dubchich",1,!0),I.Gilchic=new I(e++,"Gilchic","Gilchic","Gilchic","Gilchich",1,!0),I.Garanz=new I(e++,"Garanz","Garanz","Garanz","Baranz",1,!0),I.SinowBeat=new I(e++,"SinowBeat","Sinow Beat","Sinow Beat","Sinow Blue",1,!0),I.SinowGold=new I(e++,"SinowGold","Sinow Gold","Sinow Gold","Sinow Red",1,!0),I.Canadine=new I(e++,"Canadine","Canadine","Canadine","Canabin",1,!0),I.Canane=new I(e++,"Canane","Canane","Canane","Canune",1,!0),I.Dubswitch=new I(e++,"Dubswitch","Dubswitch","Dubswitch","Dubswitch",1,!0),I.VolOpt=new I(e++,"VolOpt","Vol Opt","Vol Opt","Vol Opt ver.2",1,!0),I.Delsaber=new I(e++,"Delsaber","Delsaber","Delsaber","Delsaber",1,!0),I.ChaosSorcerer=new I(e++,"ChaosSorcerer","Chaos Sorcerer","Chaos Sorcerer","Gran Sorcerer",1,!0),I.DarkGunner=new I(e++,"DarkGunner","Dark Gunner","Dark Gunner","Dark Gunner",1,!0),I.DeathGunner=new I(e++,"DeathGunner","Death Gunner","Death Gunner","Death Gunner",1,!0),I.ChaosBringer=new I(e++,"ChaosBringer","Chaos Bringer","Chaos Bringer","Dark Bringer",1,!0),I.DarkBelra=new I(e++,"DarkBelra","Dark Belra","Dark Belra","Indi Belra",1,!0),I.Dimenian=new I(e++,"Dimenian","Dimenian","Dimenian","Arlan",1,!0),I.LaDimenian=new I(e++,"LaDimenian","La Dimenian","La Dimenian","Merlan",1,!0),I.SoDimenian=new I(e++,"SoDimenian","So Dimenian","So Dimenian","Del-D",1,!0),I.Bulclaw=new I(e++,"Bulclaw","Bulclaw","Bulclaw","Bulclaw",1,!0),I.Bulk=new I(e++,"Bulk","Bulk","Bulk","Bulk",1,!0),I.Claw=new I(e++,"Claw","Claw","Claw","Claw",1,!0),I.DarkFalz=new I(e++,"DarkFalz","Dark Falz","Dark Falz","Dark Falz",1,!0),I.Hildebear2=new I(e++,"Hildebear2","Hildebear (Ep. II)","Hildebear","Hildelt",2,!0),I.Hildeblue2=new I(e++,"Hildeblue2","Hildeblue (Ep. II)","Hildeblue","Hildetorr",2,!0),I.Hildebear2.rare_type=I.Hildeblue2,I.RagRappy2=new I(e++,"RagRappy2","Rag Rappy (Ep. II)","Rag Rappy","El Rappy",2,!0),I.LoveRappy=new I(e++,"LoveRappy","Love Rappy","Love Rappy","Love Rappy",2,!0),I.RagRappy2.rare_type=I.LoveRappy,I.StRappy=new I(e++,"StRappy","St. Rappy","St. Rappy","St. Rappy",2,!0),I.HalloRappy=new I(e++,"HalloRappy","Hallo Rappy","Hallo Rappy","Hallo Rappy",2,!0),I.EggRappy=new I(e++,"EggRappy","Egg Rappy","Egg Rappy","Egg Rappy",2,!0),I.Monest2=new I(e++,"Monest2","Monest (Ep. II)","Monest","Mothvist",2,!0),I.Mothmant2=new I(e++,"Mothmant2","Mothmant","Mothmant","Mothvert",2,!0),I.PoisonLily2=new I(e++,"PoisonLily2","Poison Lily (Ep. II)","Poison Lily","Ob Lily",2,!0),I.NarLily2=new I(e++,"NarLily2","Nar Lily (Ep. II)","Nar Lily","Mil Lily",2,!0),I.PoisonLily2.rare_type=I.NarLily2,I.GrassAssassin2=new I(e++,"GrassAssassin2","Grass Assassin (Ep. II)","Grass Assassin","Crimson Assassin",2,!0),I.Dimenian2=new I(e++,"Dimenian2","Dimenian (Ep. II)","Dimenian","Arlan",2,!0),I.LaDimenian2=new I(e++,"LaDimenian2","La Dimenian (Ep. II)","La Dimenian","Merlan",2,!0),I.SoDimenian2=new I(e++,"SoDimenian2","So Dimenian (Ep. II)","So Dimenian","Del-D",2,!0),I.DarkBelra2=new I(e++,"DarkBelra2","Dark Belra (Ep. II)","Dark Belra","Indi Belra",2,!0),I.BarbaRay=new I(e++,"BarbaRay","Barba Ray","Barba Ray","Barba Ray",2,!0),I.SavageWolf2=new I(e++,"SavageWolf2","Savage Wolf (Ep. II)","Savage Wolf","Gulgus",2,!0),I.BarbarousWolf2=new I(e++,"BarbarousWolf2","Barbarous Wolf (Ep. II)","Barbarous Wolf","Gulgus-Gue",2,!0),I.PanArms2=new I(e++,"PanArms2","Pan Arms (Ep. II)","Pan Arms","Pan Arms",2,!0),I.Migium2=new I(e++,"Migium2","Migium (Ep. II)","Migium","Migium",2,!0),I.Hidoom2=new I(e++,"Hidoom2","Hidoom (Ep. II)","Hidoom","Hidoom",2,!0),I.Dubchic2=new I(e++,"Dubchic2","Dubchic (Ep. II)","Dubchic","Dubchich",2,!0),I.Gilchic2=new I(e++,"Gilchic2","Gilchic (Ep. II)","Gilchic","Gilchich",2,!0),I.Garanz2=new I(e++,"Garanz2","Garanz (Ep. II)","Garanz","Baranz",2,!0),I.Dubswitch2=new I(e++,"Dubswitch2","Dubswitch (Ep. II)","Dubswitch","Dubswitch",2,!0),I.Delsaber2=new I(e++,"Delsaber2","Delsaber (Ep. II)","Delsaber","Delsaber",2,!0),I.ChaosSorcerer2=new I(e++,"ChaosSorcerer2","Chaos Sorcerer (Ep. II)","Chaos Sorcerer","Gran Sorcerer",2,!0),I.GolDragon=new I(e++,"GolDragon","Gol Dragon","Gol Dragon","Gol Dragon",2,!0),I.SinowBerill=new I(e++,"SinowBerill","Sinow Berill","Sinow Berill","Sinow Berill",2,!0),I.SinowSpigell=new I(e++,"SinowSpigell","Sinow Spigell","Sinow Spigell","Sinow Spigell",2,!0),I.Merillia=new I(e++,"Merillia","Merillia","Merillia","Merillia",2,!0),I.Meriltas=new I(e++,"Meriltas","Meriltas","Meriltas","Meriltas",2,!0),I.Mericarol=new I(e++,"Mericarol","Mericarol","Mericarol","Mericarol",2,!0),I.Mericus=new I(e++,"Mericus","Mericus","Mericus","Mericus",2,!0),I.Merikle=new I(e++,"Merikle","Merikle","Merikle","Merikle",2,!0),I.UlGibbon=new I(e++,"UlGibbon","Ul Gibbon","Ul Gibbon","Ul Gibbon",2,!0),I.ZolGibbon=new I(e++,"ZolGibbon","Zol Gibbon","Zol Gibbon","Zol Gibbon",2,!0),I.Gibbles=new I(e++,"Gibbles","Gibbles","Gibbles","Gibbles",2,!0),I.Gee=new I(e++,"Gee","Gee","Gee","Gee",2,!0),I.GiGue=new I(e++,"GiGue","Gi Gue","Gi Gue","Gi Gue",2,!0),I.IllGill=new I(e++,"IllGill","Ill Gill","Ill Gill","Ill Gill",2,!0),I.DelLily=new I(e++,"DelLily","Del Lily","Del Lily","Del Lily",2,!0),I.Epsilon=new I(e++,"Epsilon","Epsilon","Epsilon","Epsilon",2,!0),I.GalGryphon=new I(e++,"GalGryphon","Gal Gryphon","Gal Gryphon","Gal Gryphon",2,!0),I.Deldepth=new I(e++,"Deldepth","Deldepth","Deldepth","Deldepth",2,!0),I.Delbiter=new I(e++,"Delbiter","Delbiter","Delbiter","Delbiter",2,!0),I.Dolmolm=new I(e++,"Dolmolm","Dolmolm","Dolmolm","Dolmolm",2,!0),I.Dolmdarl=new I(e++,"Dolmdarl","Dolmdarl","Dolmdarl","Dolmdarl",2,!0),I.Morfos=new I(e++,"Morfos","Morfos","Morfos","Morfos",2,!0),I.Recobox=new I(e++,"Recobox","Recobox","Recobox","Recobox",2,!0),I.Recon=new I(e++,"Recon","Recon","Recon","Recon",2,!0),I.SinowZoa=new I(e++,"SinowZoa","Sinow Zoa","Sinow Zoa","Sinow Zoa",2,!0),I.SinowZele=new I(e++,"SinowZele","Sinow Zele","Sinow Zele","Sinow Zele",2,!0),I.OlgaFlow=new I(e++,"OlgaFlow","Olga Flow","Olga Flow","Olga Flow",2,!0),I.SandRappy=new I(e++,"SandRappy","Sand Rappy","Sand Rappy","Sand Rappy",4,!0),I.DelRappy=new I(e++,"DelRappy","Del Rappy","Del Rappy","Del Rappy",4,!0),I.SandRappy.rare_type=I.DelRappy,I.Astark=new I(e++,"Astark","Astark","Astark","Astark",4,!0),I.SatelliteLizard=new I(e++,"SatelliteLizard","Satellite Lizard","Satellite Lizard","Satellite Lizard",4,!0),I.Yowie=new I(e++,"Yowie","Yowie","Yowie","Yowie",4,!0),I.MerissaA=new I(e++,"MerissaA","Merissa A","Merissa A","Merissa A",4,!0),I.MerissaAA=new I(e++,"MerissaAA","Merissa AA","Merissa AA","Merissa AA",4,!0),I.MerissaA.rare_type=I.MerissaAA,I.Girtablulu=new I(e++,"Girtablulu","Girtablulu","Girtablulu","Girtablulu",4,!0),I.Zu=new I(e++,"Zu","Zu","Zu","Zu",4,!0),I.Pazuzu=new I(e++,"Pazuzu","Pazuzu","Pazuzu","Pazuzu",4,!0),I.Zu.rare_type=I.Pazuzu,I.Boota=new I(e++,"Boota","Boota","Boota","Boota",4,!0),I.ZeBoota=new I(e++,"ZeBoota","Ze Boota","Ze Boota","Ze Boota",4,!0),I.BaBoota=new I(e++,"BaBoota","Ba Boota","Ba Boota","Ba Boota",4,!0),I.Dorphon=new I(e++,"Dorphon","Dorphon","Dorphon","Dorphon",4,!0),I.DorphonEclair=new I(e++,"DorphonEclair","Dorphon Eclair","Dorphon Eclair","Dorphon Eclair",4,!0),I.Dorphon.rare_type=I.DorphonEclair,I.Goran=new I(e++,"Goran","Goran","Goran","Goran",4,!0),I.PyroGoran=new I(e++,"PyroGoran","Pyro Goran","Pyro Goran","Pyro Goran",4,!0),I.GoranDetonator=new I(e++,"GoranDetonator","Goran Detonator","Goran Detonator","Goran Detonator",4,!0),I.SaintMilion=new I(e++,"SaintMilion","Saint-Milion","Saint-Milion","Saint-Milion",4,!0),I.Shambertin=new I(e++,"Shambertin","Shambertin","Shambertin","Shambertin",4,!0),I.Kondrieu=new I(e++,"Kondrieu","Kondrieu","Kondrieu","Kondrieu",4,!0),I.SaintMilion.rare_type=I.Kondrieu,I.Shambertin.rare_type=I.Kondrieu}();var z,P,T,G,A,W,U,N,H,q,V,Z,Y,K,Q,X,J,$,ee,te,ne,re,ae,ie,oe,se,le=[I.Unknown,I.FemaleFat,I.FemaleMacho,I.FemaleTall,I.MaleDwarf,I.MaleFat,I.MaleMacho,I.MaleOld,I.BlueSoldier,I.RedSoldier,I.Principal,I.Tekker,I.GuildLady,I.Scientist,I.Nurse,I.Irene,I.ItemShop,I.Nurse2,I.Hildebear,I.Hildeblue,I.RagRappy,I.AlRappy,I.Monest,I.Mothmant,I.SavageWolf,I.BarbarousWolf,I.Booma,I.Gobooma,I.Gigobooma,I.Dragon,I.GrassAssassin,I.PoisonLily,I.NarLily,I.NanoDragon,I.EvilShark,I.PalShark,I.GuilShark,I.PofuillySlime,I.PouillySlime,I.PanArms,I.Migium,I.Hidoom,I.DeRolLe,I.Dubchic,I.Gilchic,I.Garanz,I.SinowBeat,I.SinowGold,I.Canadine,I.Canane,I.Dubswitch,I.VolOpt,I.Delsaber,I.ChaosSorcerer,I.DarkGunner,I.DeathGunner,I.ChaosBringer,I.DarkBelra,I.Dimenian,I.LaDimenian,I.SoDimenian,I.Bulclaw,I.Bulk,I.Claw,I.DarkFalz,I.Hildebear2,I.Hildeblue2,I.RagRappy2,I.LoveRappy,I.StRappy,I.HalloRappy,I.EggRappy,I.Monest2,I.Mothmant2,I.PoisonLily2,I.NarLily2,I.GrassAssassin2,I.Dimenian2,I.LaDimenian2,I.SoDimenian2,I.DarkBelra2,I.BarbaRay,I.SavageWolf2,I.BarbarousWolf2,I.PanArms2,I.Migium2,I.Hidoom2,I.Dubchic2,I.Gilchic2,I.Garanz2,I.Dubswitch2,I.Delsaber2,I.ChaosSorcerer2,I.GolDragon,I.SinowBerill,I.SinowSpigell,I.Merillia,I.Meriltas,I.Mericarol,I.Mericus,I.Merikle,I.UlGibbon,I.ZolGibbon,I.Gibbles,I.Gee,I.GiGue,I.IllGill,I.DelLily,I.Epsilon,I.GalGryphon,I.Deldepth,I.Delbiter,I.Dolmolm,I.Dolmdarl,I.Morfos,I.Recobox,I.Recon,I.SinowZoa,I.SinowZele,I.OlgaFlow,I.SandRappy,I.DelRappy,I.Astark,I.SatelliteLizard,I.Yowie,I.MerissaA,I.MerissaAA,I.Girtablulu,I.Zu,I.Pazuzu,I.Boota,I.ZeBoota,I.BaBoota,I.Dorphon,I.DorphonEclair,I.Goran,I.PyroGoran,I.GoranDetonator,I.SaintMilion,I.Shambertin,I.Kondrieu],ue=le.filter(function(e){return e.enemy}),ce=function(){function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.code=void 0,this.pso_id=void 0,this.name=void 0,!Number.isInteger(t)||t<1)throw new Error("Expected id to be an integer greater than or equal to 1, got ".concat(t,"."));if(!n)throw new Error("code is required.");if(null!=r&&(!Number.isInteger(r)||r<0))throw new Error("Expected pso_id to be null or an integer greater than or equal to 0, got ".concat(r,"."));if(!a)throw new Error("name is required.");this.id=t,this.code=n,this.pso_id=r,this.name=a}return Object(p.a)(e,null,[{key:"from_pso_id",value:function(t){switch(t){default:return e.Unknown;case 0:return e.PlayerSet;case 1:return e.Particle;case 2:return e.Teleporter;case 3:return e.Warp;case 4:return e.LightCollision;case 5:return e.Item;case 6:return e.EnvSound;case 7:return e.FogCollision;case 8:return e.EventCollision;case 9:return e.CharaCollision;case 10:return e.ElementalTrap;case 11:return e.StatusTrap;case 12:return e.HealTrap;case 13:return e.LargeElementalTrap;case 14:return e.ObjRoomID;case 15:return e.Sensor;case 16:return e.UnknownItem16;case 17:return e.Lensflare;case 18:return e.ScriptCollision;case 19:return e.HealRing;case 20:return e.MapCollision;case 21:return e.ScriptCollisionA;case 22:return e.ItemLight;case 23:return e.RadarCollision;case 24:return e.FogCollisionSW;case 25:return e.BossTeleporter;case 26:return e.ImageBoard;case 27:return e.QuestWarp;case 28:return e.Epilogue;case 29:return e.UnknownItem29;case 30:return e.UnknownItem30;case 31:return e.UnknownItem31;case 32:return e.BoxDetectObject;case 33:return e.SymbolChatObject;case 34:return e.TouchPlateObject;case 35:return e.TargetableObject;case 36:return e.EffectObject;case 37:return e.CountDownObject;case 38:return e.UnknownItem38;case 39:return e.UnknownItem39;case 40:return e.UnknownItem40;case 41:return e.UnknownItem41;case 64:return e.MenuActivation;case 65:return e.TelepipeLocation;case 66:return e.BGMCollision;case 67:return e.MainRagolTeleporter;case 68:return e.LobbyTeleporter;case 69:return e.PrincipalWarp;case 70:return e.ShopDoor;case 71:return e.HuntersGuildDoor;case 72:return e.TeleporterDoor;case 73:return e.MedicalCenterDoor;case 74:return e.Elevator;case 75:return e.EasterEgg;case 76:return e.ValentinesHeart;case 77:return e.ChristmasTree;case 78:return e.ChristmasWreath;case 79:return e.HalloweenPumpkin;case 80:return e.TwentyFirstCentury;case 81:return e.Sonic;case 82:return e.WelcomeBoard;case 83:return e.Firework;case 84:return e.LobbyScreenDoor;case 85:return e.MainRagolTeleporterBattleInNextArea;case 86:return e.LabTeleporterDoor;case 87:return e.Pioneer2InvisibleTouchplate;case 128:return e.ForestDoor;case 129:return e.ForestSwitch;case 130:return e.LaserFence;case 131:return e.LaserSquareFence;case 132:return e.ForestLaserFenceSwitch;case 133:return e.LightRays;case 134:return e.BlueButterfly;case 135:return e.Probe;case 136:return e.RandomTypeBox1;case 137:return e.ForestWeatherStation;case 138:return e.Battery;case 139:return e.ForestConsole;case 140:return e.BlackSlidingDoor;case 141:return e.RicoMessagePod;case 142:return e.EnergyBarrier;case 143:return e.ForestRisingBridge;case 144:return e.SwitchNoneDoor;case 145:return e.EnemyBoxGrey;case 146:return e.FixedTypeBox;case 147:return e.EnemyBoxBrown;case 149:return e.EmptyTypeBox;case 150:return e.LaserFenseEx;case 151:return e.LaserSquareFenceEx;case 192:return e.FloorPanel1;case 193:return e.Caves4ButtonDoor;case 194:return e.CavesNormalDoor;case 195:return e.CavesSmashingPillar;case 196:return e.CavesSign1;case 197:return e.CavesSign2;case 198:return e.CavesSign3;case 199:return e.HexagalTank;case 200:return e.BrownPlatform;case 201:return e.WarningLightObject;case 203:return e.Rainbow;case 204:return e.FloatingJelifish;case 205:return e.FloatingDragonfly;case 206:return e.CavesSwitchDoor;case 207:return e.RobotRechargeStation;case 208:return e.CavesCakeShop;case 209:return e.Caves1SmallRedRock;case 210:return e.Caves1MediumRedRock;case 211:return e.Caves1LargeRedRock;case 212:return e.Caves2SmallRock1;case 213:return e.Caves2MediumRock1;case 214:return e.Caves2LargeRock1;case 215:return e.Caves2SmallRock2;case 216:return e.Caves2MediumRock2;case 217:return e.Caves2LargeRock2;case 218:return e.Caves3SmallRock;case 219:return e.Caves3MediumRock;case 220:return e.Caves3LargeRock;case 222:return e.FloorPanel2;case 223:return e.DestructableRockCaves1;case 224:return e.DestructableRockCaves2;case 225:return e.DestructableRockCaves3;case 256:return e.MinesDoor;case 257:return e.FloorPanel3;case 258:return e.MinesSwitchDoor;case 259:return e.LargeCryoTube;case 260:return e.ComputerLikeCalus;case 261:return e.GreenScreenOpeningAndClosing;case 262:return e.FloatingRobot;case 263:return e.FloatingBlueLight;case 264:return e.SelfDestructingObject1;case 265:return e.SelfDestructingObject2;case 266:return e.SelfDestructingObject3;case 267:return e.SparkMachine;case 268:return e.MinesLargeFlashingCrate;case 304:return e.RuinsSeal;case 320:return e.RuinsTeleporter;case 321:return e.RuinsWarpSiteToSite;case 322:return e.RuinsSwitch;case 323:return e.FloorPanel4;case 324:return e.Ruins1Door;case 325:return e.Ruins3Door;case 326:return e.Ruins2Door;case 327:return e.Ruins11ButtonDoor;case 328:return e.Ruins21ButtonDoor;case 329:return e.Ruins31ButtonDoor;case 330:return e.Ruins4ButtonDoor;case 331:return e.Ruins2ButtonDoor;case 332:return e.RuinsSensor;case 333:return e.RuinsFenceSwitch;case 334:return e.RuinsLaserFence4x2;case 335:return e.RuinsLaserFence6x2;case 336:return e.RuinsLaserFence4x4;case 337:return e.RuinsLaserFence6x4;case 338:return e.RuinsPoisonBlob;case 339:return e.RuinsPilarTrap;case 340:return e.PopupTrapNoTech;case 341:return e.RuinsCrystal;case 342:return e.Monument;case 345:return e.RuinsRock1;case 346:return e.RuinsRock2;case 347:return e.RuinsRock3;case 348:return e.RuinsRock4;case 349:return e.RuinsRock5;case 350:return e.RuinsRock6;case 351:return e.RuinsRock7;case 352:return e.Poison;case 353:return e.FixedBoxTypeRuins;case 354:return e.RandomBoxTypeRuins;case 355:return e.EnemyTypeBoxYellow;case 356:return e.EnemyTypeBoxBlue;case 357:return e.EmptyTypeBoxBlue;case 358:return e.DestructableRock;case 359:return e.PopupTrapsTechs;case 368:return e.FlyingWhiteBird;case 369:return e.Tower;case 370:return e.FloatingRocks;case 371:return e.FloatingSoul;case 372:return e.Butterfly;case 384:return e.LobbyGameMenu;case 385:return e.LobbyWarpObject;case 386:return e.Lobby1EventObjectDefaultTree;case 387:return e.UnknownItem387;case 388:return e.UnknownItem388;case 389:return e.UnknownItem389;case 390:return e.LobbyEventObjectStaticPumpkin;case 391:return e.LobbyEventObject3ChristmasWindows;case 392:return e.LobbyEventObjectRedAndWhiteCurtain;case 393:return e.UnknownItem393;case 394:return e.UnknownItem394;case 395:return e.LobbyFishTank;case 396:return e.LobbyEventObjectButterflies;case 400:return e.UnknownItem400;case 401:return e.GreyWallLow;case 402:return e.SpaceshipDoor;case 403:return e.GreyWallHigh;case 416:return e.TempleNormalDoor;case 417:return e.BreakableWallWallButUnbreakable;case 418:return e.BrokenCilinderAndRubble;case 419:return e.ThreeBrokenWallPiecesOnFloor;case 420:return e.HighBrickCilinder;case 421:return e.LyingCilinder;case 422:return e.BrickConeWithFlatTop;case 423:return e.BreakableTempleWall;case 424:return e.TempleMapDetect;case 425:return e.SmallBrownBrickRisingBridge;case 426:return e.LongRisingBridgeWithPinkHighEdges;case 427:return e.FourSwitchTempleDoor;case 448:return e.FourButtonSpaceshipDoor;case 512:return e.ItemBoxCca;case 513:return e.TeleporterEp2;case 514:return e.CCADoor;case 515:return e.SpecialBoxCCA;case 516:return e.BigCCADoor;case 517:return e.BigCCADoorSwitch;case 518:return e.LittleRock;case 519:return e.Little3StoneWall;case 520:return e.Medium3StoneWall;case 521:return e.SpiderPlant;case 522:return e.CCAAreaTeleporter;case 523:return e.UnknownItem523;case 524:return e.WhiteBird;case 525:return e.OrangeBird;case 527:return e.Saw;case 528:return e.LaserDetect;case 529:return e.UnknownItem529;case 530:return e.UnknownItem530;case 531:return e.Seagull;case 544:return e.Fish;case 545:return e.SeabedDoorWithBlueEdges;case 546:return e.SeabedDoorAlwaysOpenNonTriggerable;case 547:return e.LittleCryotube;case 548:return e.WideGlassWallBreakable;case 549:return e.BlueFloatingRobot;case 550:return e.RedFloatingRobot;case 551:return e.Dolphin;case 552:return e.CaptureTrap;case 553:return e.VRLink;case 576:return e.UnknownItem576;case 640:return e.WarpInBarbaRayRoom;case 672:return e.UnknownItem672;case 688:return e.GeeNest;case 689:return e.LabComputerConsole;case 690:return e.LabComputerConsoleGreenScreen;case 691:return e.ChairYelllowPillow;case 692:return e.OrangeWallWithHoleInMiddle;case 693:return e.GreyWallWithHoleInMiddle;case 694:return e.LongTable;case 695:return e.GBAStation;case 696:return e.TalkLinkToSupport;case 697:return e.InstaWarp;case 698:return e.LabInvisibleObject;case 699:return e.LabGlassWindowDoor;case 700:return e.UnknownItem700;case 701:return e.LabCelingWarp;case 768:return e.Ep4LightSource;case 769:return e.Cacti;case 770:return e.BigBrownRock;case 771:return e.BreakableBrownRock;case 832:return e.UnknownItem832;case 833:return e.UnknownItem833;case 896:return e.PoisonPlant;case 897:return e.UnknownItem897;case 898:return e.UnknownItem898;case 899:return e.OozingDesertPlant;case 901:return e.UnknownItem901;case 902:return e.BigBlackRocks;case 903:return e.UnknownItem903;case 904:return e.UnknownItem904;case 905:return e.UnknownItem905;case 906:return e.UnknownItem906;case 907:return e.FallingRock;case 908:return e.DesertPlantHasCollision;case 909:return e.DesertFixedTypeBoxBreakableCrystals;case 910:return e.UnknownItem910;case 911:return e.BeeHive;case 912:return e.UnknownItem912;case 913:return e.Heat;case 960:return e.TopOfSaintMillionEgg;case 961:return e.UnknownItem961}}}]),e}();ce.Unknown=void 0,ce.PlayerSet=void 0,ce.Particle=void 0,ce.Teleporter=void 0,ce.Warp=void 0,ce.LightCollision=void 0,ce.Item=void 0,ce.EnvSound=void 0,ce.FogCollision=void 0,ce.EventCollision=void 0,ce.CharaCollision=void 0,ce.ElementalTrap=void 0,ce.StatusTrap=void 0,ce.HealTrap=void 0,ce.LargeElementalTrap=void 0,ce.ObjRoomID=void 0,ce.Sensor=void 0,ce.UnknownItem16=void 0,ce.Lensflare=void 0,ce.ScriptCollision=void 0,ce.HealRing=void 0,ce.MapCollision=void 0,ce.ScriptCollisionA=void 0,ce.ItemLight=void 0,ce.RadarCollision=void 0,ce.FogCollisionSW=void 0,ce.BossTeleporter=void 0,ce.ImageBoard=void 0,ce.QuestWarp=void 0,ce.Epilogue=void 0,ce.UnknownItem29=void 0,ce.UnknownItem30=void 0,ce.UnknownItem31=void 0,ce.BoxDetectObject=void 0,ce.SymbolChatObject=void 0,ce.TouchPlateObject=void 0,ce.TargetableObject=void 0,ce.EffectObject=void 0,ce.CountDownObject=void 0,ce.UnknownItem38=void 0,ce.UnknownItem39=void 0,ce.UnknownItem40=void 0,ce.UnknownItem41=void 0,ce.MenuActivation=void 0,ce.TelepipeLocation=void 0,ce.BGMCollision=void 0,ce.MainRagolTeleporter=void 0,ce.LobbyTeleporter=void 0,ce.PrincipalWarp=void 0,ce.ShopDoor=void 0,ce.HuntersGuildDoor=void 0,ce.TeleporterDoor=void 0,ce.MedicalCenterDoor=void 0,ce.Elevator=void 0,ce.EasterEgg=void 0,ce.ValentinesHeart=void 0,ce.ChristmasTree=void 0,ce.ChristmasWreath=void 0,ce.HalloweenPumpkin=void 0,ce.TwentyFirstCentury=void 0,ce.Sonic=void 0,ce.WelcomeBoard=void 0,ce.Firework=void 0,ce.LobbyScreenDoor=void 0,ce.MainRagolTeleporterBattleInNextArea=void 0,ce.LabTeleporterDoor=void 0,ce.Pioneer2InvisibleTouchplate=void 0,ce.ForestDoor=void 0,ce.ForestSwitch=void 0,ce.LaserFence=void 0,ce.LaserSquareFence=void 0,ce.ForestLaserFenceSwitch=void 0,ce.LightRays=void 0,ce.BlueButterfly=void 0,ce.Probe=void 0,ce.RandomTypeBox1=void 0,ce.ForestWeatherStation=void 0,ce.Battery=void 0,ce.ForestConsole=void 0,ce.BlackSlidingDoor=void 0,ce.RicoMessagePod=void 0,ce.EnergyBarrier=void 0,ce.ForestRisingBridge=void 0,ce.SwitchNoneDoor=void 0,ce.EnemyBoxGrey=void 0,ce.FixedTypeBox=void 0,ce.EnemyBoxBrown=void 0,ce.EmptyTypeBox=void 0,ce.LaserFenseEx=void 0,ce.LaserSquareFenceEx=void 0,ce.FloorPanel1=void 0,ce.Caves4ButtonDoor=void 0,ce.CavesNormalDoor=void 0,ce.CavesSmashingPillar=void 0,ce.CavesSign1=void 0,ce.CavesSign2=void 0,ce.CavesSign3=void 0,ce.HexagalTank=void 0,ce.BrownPlatform=void 0,ce.WarningLightObject=void 0,ce.Rainbow=void 0,ce.FloatingJelifish=void 0,ce.FloatingDragonfly=void 0,ce.CavesSwitchDoor=void 0,ce.RobotRechargeStation=void 0,ce.CavesCakeShop=void 0,ce.Caves1SmallRedRock=void 0,ce.Caves1MediumRedRock=void 0,ce.Caves1LargeRedRock=void 0,ce.Caves2SmallRock1=void 0,ce.Caves2MediumRock1=void 0,ce.Caves2LargeRock1=void 0,ce.Caves2SmallRock2=void 0,ce.Caves2MediumRock2=void 0,ce.Caves2LargeRock2=void 0,ce.Caves3SmallRock=void 0,ce.Caves3MediumRock=void 0,ce.Caves3LargeRock=void 0,ce.FloorPanel2=void 0,ce.DestructableRockCaves1=void 0,ce.DestructableRockCaves2=void 0,ce.DestructableRockCaves3=void 0,ce.MinesDoor=void 0,ce.FloorPanel3=void 0,ce.MinesSwitchDoor=void 0,ce.LargeCryoTube=void 0,ce.ComputerLikeCalus=void 0,ce.GreenScreenOpeningAndClosing=void 0,ce.FloatingRobot=void 0,ce.FloatingBlueLight=void 0,ce.SelfDestructingObject1=void 0,ce.SelfDestructingObject2=void 0,ce.SelfDestructingObject3=void 0,ce.SparkMachine=void 0,ce.MinesLargeFlashingCrate=void 0,ce.RuinsSeal=void 0,ce.RuinsTeleporter=void 0,ce.RuinsWarpSiteToSite=void 0,ce.RuinsSwitch=void 0,ce.FloorPanel4=void 0,ce.Ruins1Door=void 0,ce.Ruins3Door=void 0,ce.Ruins2Door=void 0,ce.Ruins11ButtonDoor=void 0,ce.Ruins21ButtonDoor=void 0,ce.Ruins31ButtonDoor=void 0,ce.Ruins4ButtonDoor=void 0,ce.Ruins2ButtonDoor=void 0,ce.RuinsSensor=void 0,ce.RuinsFenceSwitch=void 0,ce.RuinsLaserFence4x2=void 0,ce.RuinsLaserFence6x2=void 0,ce.RuinsLaserFence4x4=void 0,ce.RuinsLaserFence6x4=void 0,ce.RuinsPoisonBlob=void 0,ce.RuinsPilarTrap=void 0,ce.PopupTrapNoTech=void 0,ce.RuinsCrystal=void 0,ce.Monument=void 0,ce.RuinsRock1=void 0,ce.RuinsRock2=void 0,ce.RuinsRock3=void 0,ce.RuinsRock4=void 0,ce.RuinsRock5=void 0,ce.RuinsRock6=void 0,ce.RuinsRock7=void 0,ce.Poison=void 0,ce.FixedBoxTypeRuins=void 0,ce.RandomBoxTypeRuins=void 0,ce.EnemyTypeBoxYellow=void 0,ce.EnemyTypeBoxBlue=void 0,ce.EmptyTypeBoxBlue=void 0,ce.DestructableRock=void 0,ce.PopupTrapsTechs=void 0,ce.FlyingWhiteBird=void 0,ce.Tower=void 0,ce.FloatingRocks=void 0,ce.FloatingSoul=void 0,ce.Butterfly=void 0,ce.LobbyGameMenu=void 0,ce.LobbyWarpObject=void 0,ce.Lobby1EventObjectDefaultTree=void 0,ce.UnknownItem387=void 0,ce.UnknownItem388=void 0,ce.UnknownItem389=void 0,ce.LobbyEventObjectStaticPumpkin=void 0,ce.LobbyEventObject3ChristmasWindows=void 0,ce.LobbyEventObjectRedAndWhiteCurtain=void 0,ce.UnknownItem393=void 0,ce.UnknownItem394=void 0,ce.LobbyFishTank=void 0,ce.LobbyEventObjectButterflies=void 0,ce.UnknownItem400=void 0,ce.GreyWallLow=void 0,ce.SpaceshipDoor=void 0,ce.GreyWallHigh=void 0,ce.TempleNormalDoor=void 0,ce.BreakableWallWallButUnbreakable=void 0,ce.BrokenCilinderAndRubble=void 0,ce.ThreeBrokenWallPiecesOnFloor=void 0,ce.HighBrickCilinder=void 0,ce.LyingCilinder=void 0,ce.BrickConeWithFlatTop=void 0,ce.BreakableTempleWall=void 0,ce.TempleMapDetect=void 0,ce.SmallBrownBrickRisingBridge=void 0,ce.LongRisingBridgeWithPinkHighEdges=void 0,ce.FourSwitchTempleDoor=void 0,ce.FourButtonSpaceshipDoor=void 0,ce.ItemBoxCca=void 0,ce.TeleporterEp2=void 0,ce.CCADoor=void 0,ce.SpecialBoxCCA=void 0,ce.BigCCADoor=void 0,ce.BigCCADoorSwitch=void 0,ce.LittleRock=void 0,ce.Little3StoneWall=void 0,ce.Medium3StoneWall=void 0,ce.SpiderPlant=void 0,ce.CCAAreaTeleporter=void 0,ce.UnknownItem523=void 0,ce.WhiteBird=void 0,ce.OrangeBird=void 0,ce.Saw=void 0,ce.LaserDetect=void 0,ce.UnknownItem529=void 0,ce.UnknownItem530=void 0,ce.Seagull=void 0,ce.Fish=void 0,ce.SeabedDoorWithBlueEdges=void 0,ce.SeabedDoorAlwaysOpenNonTriggerable=void 0,ce.LittleCryotube=void 0,ce.WideGlassWallBreakable=void 0,ce.BlueFloatingRobot=void 0,ce.RedFloatingRobot=void 0,ce.Dolphin=void 0,ce.CaptureTrap=void 0,ce.VRLink=void 0,ce.UnknownItem576=void 0,ce.WarpInBarbaRayRoom=void 0,ce.UnknownItem672=void 0,ce.GeeNest=void 0,ce.LabComputerConsole=void 0,ce.LabComputerConsoleGreenScreen=void 0,ce.ChairYelllowPillow=void 0,ce.OrangeWallWithHoleInMiddle=void 0,ce.GreyWallWithHoleInMiddle=void 0,ce.LongTable=void 0,ce.GBAStation=void 0,ce.TalkLinkToSupport=void 0,ce.InstaWarp=void 0,ce.LabInvisibleObject=void 0,ce.LabGlassWindowDoor=void 0,ce.UnknownItem700=void 0,ce.LabCelingWarp=void 0,ce.Ep4LightSource=void 0,ce.Cacti=void 0,ce.BigBrownRock=void 0,ce.BreakableBrownRock=void 0,ce.UnknownItem832=void 0,ce.UnknownItem833=void 0,ce.PoisonPlant=void 0,ce.UnknownItem897=void 0,ce.UnknownItem898=void 0,ce.OozingDesertPlant=void 0,ce.UnknownItem901=void 0,ce.BigBlackRocks=void 0,ce.UnknownItem903=void 0,ce.UnknownItem904=void 0,ce.UnknownItem905=void 0,ce.UnknownItem906=void 0,ce.FallingRock=void 0,ce.DesertPlantHasCollision=void 0,ce.DesertFixedTypeBoxBreakableCrystals=void 0,ce.UnknownItem910=void 0,ce.BeeHive=void 0,ce.UnknownItem912=void 0,ce.Heat=void 0,ce.TopOfSaintMillionEgg=void 0,ce.UnknownItem961=void 0,function(){var e=1;ce.Unknown=new ce(e++,"Unknown",void 0,"Unknown"),ce.PlayerSet=new ce(e++,"PlayerSet",0,"Player Set"),ce.Particle=new ce(e++,"Particle",1,"Particle"),ce.Teleporter=new ce(e++,"Teleporter",2,"Teleporter"),ce.Warp=new ce(e++,"Warp",3,"Warp"),ce.LightCollision=new ce(e++,"LightCollision",4,"Light Collision"),ce.Item=new ce(e++,"Item",5,"Item"),ce.EnvSound=new ce(e++,"EnvSound",6,"Env Sound"),ce.FogCollision=new ce(e++,"FogCollision",7,"Fog Collision"),ce.EventCollision=new ce(e++,"EventCollision",8,"Event Collision"),ce.CharaCollision=new ce(e++,"CharaCollision",9,"Chara Collision"),ce.ElementalTrap=new ce(e++,"ElementalTrap",10,"Elemental Trap"),ce.StatusTrap=new ce(e++,"StatusTrap",11,"Status Trap"),ce.HealTrap=new ce(e++,"HealTrap",12,"Heal Trap"),ce.LargeElementalTrap=new ce(e++,"LargeElementalTrap",13,"Large Elemental Trap"),ce.ObjRoomID=new ce(e++,"ObjRoomID",14,"Obj Room ID"),ce.Sensor=new ce(e++,"Sensor",15,"Sensor"),ce.UnknownItem16=new ce(e++,"UnknownItem16",16,"Unknown Item (16)"),ce.Lensflare=new ce(e++,"Lensflare",17,"Lensflare"),ce.ScriptCollision=new ce(e++,"ScriptCollision",18,"Script Collision"),ce.HealRing=new ce(e++,"HealRing",19,"Heal Ring"),ce.MapCollision=new ce(e++,"MapCollision",20,"Map Collision"),ce.ScriptCollisionA=new ce(e++,"ScriptCollisionA",21,"Script Collision A"),ce.ItemLight=new ce(e++,"ItemLight",22,"Item Light"),ce.RadarCollision=new ce(e++,"RadarCollision",23,"Radar Collision"),ce.FogCollisionSW=new ce(e++,"FogCollisionSW",24,"Fog Collision SW"),ce.BossTeleporter=new ce(e++,"BossTeleporter",25,"Boss Teleporter"),ce.ImageBoard=new ce(e++,"ImageBoard",26,"Image Board"),ce.QuestWarp=new ce(e++,"QuestWarp",27,"Quest Warp"),ce.Epilogue=new ce(e++,"Epilogue",28,"Epilogue"),ce.UnknownItem29=new ce(e++,"UnknownItem29",29,"Unknown Item (29)"),ce.UnknownItem30=new ce(e++,"UnknownItem30",30,"Unknown Item (30)"),ce.UnknownItem31=new ce(e++,"UnknownItem31",31,"Unknown Item (31)"),ce.BoxDetectObject=new ce(e++,"BoxDetectObject",32,"Box Detect Object"),ce.SymbolChatObject=new ce(e++,"SymbolChatObject",33,"Symbol Chat Object"),ce.TouchPlateObject=new ce(e++,"TouchPlateObject",34,"Touch plate Object"),ce.TargetableObject=new ce(e++,"TargetableObject",35,"Targetable Object"),ce.EffectObject=new ce(e++,"EffectObject",36,"Effect object"),ce.CountDownObject=new ce(e++,"CountDownObject",37,"Count Down Object"),ce.UnknownItem38=new ce(e++,"UnknownItem38",38,"Unknown Item (38)"),ce.UnknownItem39=new ce(e++,"UnknownItem39",39,"Unknown Item (39)"),ce.UnknownItem40=new ce(e++,"UnknownItem40",40,"Unknown Item (40)"),ce.UnknownItem41=new ce(e++,"UnknownItem41",41,"Unknown Item (41)"),ce.MenuActivation=new ce(e++,"MenuActivation",64,"Menu activation"),ce.TelepipeLocation=new ce(e++,"TelepipeLocation",65,"Telepipe Location"),ce.BGMCollision=new ce(e++,"BGMCollision",66,"BGM Collision"),ce.MainRagolTeleporter=new ce(e++,"MainRagolTeleporter",67,"Main Ragol Teleporter"),ce.LobbyTeleporter=new ce(e++,"LobbyTeleporter",68,"Lobby Teleporter"),ce.PrincipalWarp=new ce(e++,"PrincipalWarp",69,"Principal warp"),ce.ShopDoor=new ce(e++,"ShopDoor",70,"Shop Door"),ce.HuntersGuildDoor=new ce(e++,"HuntersGuildDoor",71,"Hunter's Guild Door"),ce.TeleporterDoor=new ce(e++,"TeleporterDoor",72,"Teleporter Door"),ce.MedicalCenterDoor=new ce(e++,"MedicalCenterDoor",73,"Medical Center Door"),ce.Elevator=new ce(e++,"Elevator",74,"Elevator"),ce.EasterEgg=new ce(e++,"EasterEgg",75,"Easter Egg"),ce.ValentinesHeart=new ce(e++,"ValentinesHeart",76,"Valentines Heart"),ce.ChristmasTree=new ce(e++,"ChristmasTree",77,"Christmas Tree"),ce.ChristmasWreath=new ce(e++,"ChristmasWreath",78,"Christmas Wreath"),ce.HalloweenPumpkin=new ce(e++,"HalloweenPumpkin",79,"Halloween Pumpkin"),ce.TwentyFirstCentury=new ce(e++,"TwentyFirstCentury",80,"21st Century"),ce.Sonic=new ce(e++,"Sonic",81,"Sonic"),ce.WelcomeBoard=new ce(e++,"WelcomeBoard",82,"Welcome Board"),ce.Firework=new ce(e++,"Firework",83,"Firework"),ce.LobbyScreenDoor=new ce(e++,"LobbyScreenDoor",84,"Lobby Screen Door"),ce.MainRagolTeleporterBattleInNextArea=new ce(e++,"MainRagolTeleporterBattleInNextArea",85,"Main Ragol Teleporter (Battle in next area?)"),ce.LabTeleporterDoor=new ce(e++,"LabTeleporterDoor",86,"Lab Teleporter Door"),ce.Pioneer2InvisibleTouchplate=new ce(e++,"Pioneer2InvisibleTouchplate",87,"Pioneer 2 Invisible Touchplate"),ce.ForestDoor=new ce(e++,"ForestDoor",128,"Forest Door"),ce.ForestSwitch=new ce(e++,"ForestSwitch",129,"Forest Switch"),ce.LaserFence=new ce(e++,"LaserFence",130,"Laser Fence"),ce.LaserSquareFence=new ce(e++,"LaserSquareFence",131,"Laser Square Fence"),ce.ForestLaserFenceSwitch=new ce(e++,"ForestLaserFenceSwitch",132,"Forest Laser Fence Switch"),ce.LightRays=new ce(e++,"LightRays",133,"Light rays"),ce.BlueButterfly=new ce(e++,"BlueButterfly",134,"Blue Butterfly"),ce.Probe=new ce(e++,"Probe",135,"Probe"),ce.RandomTypeBox1=new ce(e++,"RandomTypeBox1",136,"Random Type Box 1"),ce.ForestWeatherStation=new ce(e++,"ForestWeatherStation",137,"Forest Weather Station"),ce.Battery=new ce(e++,"Battery",138,"Battery"),ce.ForestConsole=new ce(e++,"ForestConsole",139,"Forest Console"),ce.BlackSlidingDoor=new ce(e++,"BlackSlidingDoor",140,"Black Sliding Door"),ce.RicoMessagePod=new ce(e++,"RicoMessagePod",141,"Rico Message Pod"),ce.EnergyBarrier=new ce(e++,"EnergyBarrier",142,"Energy Barrier"),ce.ForestRisingBridge=new ce(e++,"ForestRisingBridge",143,"Forest Rising Bridge"),ce.SwitchNoneDoor=new ce(e++,"SwitchNoneDoor",144,"Switch (none door)"),ce.EnemyBoxGrey=new ce(e++,"EnemyBoxGrey",145,"Enemy Box (Grey)"),ce.FixedTypeBox=new ce(e++,"FixedTypeBox",146,"Fixed Type Box"),ce.EnemyBoxBrown=new ce(e++,"EnemyBoxBrown",147,"Enemy Box (Brown)"),ce.EmptyTypeBox=new ce(e++,"EmptyTypeBox",149,"Empty Type Box"),ce.LaserFenseEx=new ce(e++,"LaserFenseEx",150,"Laser Fense Ex"),ce.LaserSquareFenceEx=new ce(e++,"LaserSquareFenceEx",151,"Laser Square Fence Ex"),ce.FloorPanel1=new ce(e++,"FloorPanel1",192,"Floor Panel 1"),ce.Caves4ButtonDoor=new ce(e++,"Caves4ButtonDoor",193,"Caves 4 Button door"),ce.CavesNormalDoor=new ce(e++,"CavesNormalDoor",194,"Caves Normal door"),ce.CavesSmashingPillar=new ce(e++,"CavesSmashingPillar",195,"Caves Smashing Pillar"),ce.CavesSign1=new ce(e++,"CavesSign1",196,"Caves Sign 1"),ce.CavesSign2=new ce(e++,"CavesSign2",197,"Caves Sign 2"),ce.CavesSign3=new ce(e++,"CavesSign3",198,"Caves Sign 3"),ce.HexagalTank=new ce(e++,"HexagalTank",199,"Hexagal Tank"),ce.BrownPlatform=new ce(e++,"BrownPlatform",200,"Brown Platform"),ce.WarningLightObject=new ce(e++,"WarningLightObject",201,"Warning Light Object"),ce.Rainbow=new ce(e++,"Rainbow",203,"Rainbow"),ce.FloatingJelifish=new ce(e++,"FloatingJelifish",204,"Floating Jelifish"),ce.FloatingDragonfly=new ce(e++,"FloatingDragonfly",205,"Floating Dragonfly"),ce.CavesSwitchDoor=new ce(e++,"CavesSwitchDoor",206,"Caves Switch Door"),ce.RobotRechargeStation=new ce(e++,"RobotRechargeStation",207,"Robot Recharge Station"),ce.CavesCakeShop=new ce(e++,"CavesCakeShop",208,"Caves Cake Shop"),ce.Caves1SmallRedRock=new ce(e++,"Caves1SmallRedRock",209,"Caves 1 Small Red Rock"),ce.Caves1MediumRedRock=new ce(e++,"Caves1MediumRedRock",210,"Caves 1 Medium Red Rock"),ce.Caves1LargeRedRock=new ce(e++,"Caves1LargeRedRock",211,"Caves 1 Large Red Rock"),ce.Caves2SmallRock1=new ce(e++,"Caves2SmallRock1",212,"Caves 2 Small Rock 1"),ce.Caves2MediumRock1=new ce(e++,"Caves2MediumRock1",213,"Caves 2 Medium Rock 1"),ce.Caves2LargeRock1=new ce(e++,"Caves2LargeRock1",214,"Caves 2 Large Rock 1"),ce.Caves2SmallRock2=new ce(e++,"Caves2SmallRock2",215,"Caves 2 Small Rock 2"),ce.Caves2MediumRock2=new ce(e++,"Caves2MediumRock2",216,"Caves 2 Medium Rock 2"),ce.Caves2LargeRock2=new ce(e++,"Caves2LargeRock2",217,"Caves 2 Large Rock 2"),ce.Caves3SmallRock=new ce(e++,"Caves3SmallRock",218,"Caves 3 Small Rock"),ce.Caves3MediumRock=new ce(e++,"Caves3MediumRock",219,"Caves 3 Medium Rock"),ce.Caves3LargeRock=new ce(e++,"Caves3LargeRock",220,"Caves 3 Large Rock"),ce.FloorPanel2=new ce(e++,"FloorPanel2",222,"Floor Panel 2"),ce.DestructableRockCaves1=new ce(e++,"DestructableRockCaves1",223,"Destructable Rock (Caves 1)"),ce.DestructableRockCaves2=new ce(e++,"DestructableRockCaves2",224,"Destructable Rock (Caves 2)"),ce.DestructableRockCaves3=new ce(e++,"DestructableRockCaves3",225,"Destructable Rock (Caves 3)"),ce.MinesDoor=new ce(e++,"MinesDoor",256,"Mines Door"),ce.FloorPanel3=new ce(e++,"FloorPanel3",257,"Floor Panel 3"),ce.MinesSwitchDoor=new ce(e++,"MinesSwitchDoor",258,"Mines Switch Door"),ce.LargeCryoTube=new ce(e++,"LargeCryoTube",259,"Large Cryo-Tube"),ce.ComputerLikeCalus=new ce(e++,"ComputerLikeCalus",260,"Computer (like calus)"),ce.GreenScreenOpeningAndClosing=new ce(e++,"GreenScreenOpeningAndClosing",261,"Green Screen opening and closing"),ce.FloatingRobot=new ce(e++,"FloatingRobot",262,"Floating Robot"),ce.FloatingBlueLight=new ce(e++,"FloatingBlueLight",263,"Floating Blue Light"),ce.SelfDestructingObject1=new ce(e++,"SelfDestructingObject1",264,"Self Destructing Object 1"),ce.SelfDestructingObject2=new ce(e++,"SelfDestructingObject2",265,"Self Destructing Object 2"),ce.SelfDestructingObject3=new ce(e++,"SelfDestructingObject3",266,"Self Destructing Object 3"),ce.SparkMachine=new ce(e++,"SparkMachine",267,"Spark Machine"),ce.MinesLargeFlashingCrate=new ce(e++,"MinesLargeFlashingCrate",268,"Mines Large Flashing Crate"),ce.RuinsSeal=new ce(e++,"RuinsSeal",304,"Ruins Seal"),ce.RuinsTeleporter=new ce(e++,"RuinsTeleporter",320,"Ruins Teleporter"),ce.RuinsWarpSiteToSite=new ce(e++,"RuinsWarpSiteToSite",321,"Ruins Warp (Site to site)"),ce.RuinsSwitch=new ce(e++,"RuinsSwitch",322,"Ruins Switch"),ce.FloorPanel4=new ce(e++,"FloorPanel4",323,"Floor Panel 4"),ce.Ruins1Door=new ce(e++,"Ruins1Door",324,"Ruins 1 Door"),ce.Ruins3Door=new ce(e++,"Ruins3Door",325,"Ruins 3 Door"),ce.Ruins2Door=new ce(e++,"Ruins2Door",326,"Ruins 2 Door"),ce.Ruins11ButtonDoor=new ce(e++,"Ruins11ButtonDoor",327,"Ruins 1-1 Button Door"),ce.Ruins21ButtonDoor=new ce(e++,"Ruins21ButtonDoor",328,"Ruins 2-1 Button Door"),ce.Ruins31ButtonDoor=new ce(e++,"Ruins31ButtonDoor",329,"Ruins 3-1 Button Door"),ce.Ruins4ButtonDoor=new ce(e++,"Ruins4ButtonDoor",330,"Ruins 4-Button Door"),ce.Ruins2ButtonDoor=new ce(e++,"Ruins2ButtonDoor",331,"Ruins 2-Button Door"),ce.RuinsSensor=new ce(e++,"RuinsSensor",332,"Ruins Sensor"),ce.RuinsFenceSwitch=new ce(e++,"RuinsFenceSwitch",333,"Ruins Fence Switch"),ce.RuinsLaserFence4x2=new ce(e++,"RuinsLaserFence4x2",334,"Ruins Laser Fence 4x2"),ce.RuinsLaserFence6x2=new ce(e++,"RuinsLaserFence6x2",335,"Ruins Laser Fence 6x2"),ce.RuinsLaserFence4x4=new ce(e++,"RuinsLaserFence4x4",336,"Ruins Laser Fence 4x4"),ce.RuinsLaserFence6x4=new ce(e++,"RuinsLaserFence6x4",337,"Ruins Laser Fence 6x4"),ce.RuinsPoisonBlob=new ce(e++,"RuinsPoisonBlob",338,"Ruins poison Blob"),ce.RuinsPilarTrap=new ce(e++,"RuinsPilarTrap",339,"Ruins Pilar Trap"),ce.PopupTrapNoTech=new ce(e++,"PopupTrapNoTech",340,"Popup Trap (No Tech)"),ce.RuinsCrystal=new ce(e++,"RuinsCrystal",341,"Ruins Crystal"),ce.Monument=new ce(e++,"Monument",342,"Monument"),ce.RuinsRock1=new ce(e++,"RuinsRock1",345,"Ruins Rock 1"),ce.RuinsRock2=new ce(e++,"RuinsRock2",346,"Ruins Rock 2"),ce.RuinsRock3=new ce(e++,"RuinsRock3",347,"Ruins Rock 3"),ce.RuinsRock4=new ce(e++,"RuinsRock4",348,"Ruins Rock 4"),ce.RuinsRock5=new ce(e++,"RuinsRock5",349,"Ruins Rock 5"),ce.RuinsRock6=new ce(e++,"RuinsRock6",350,"Ruins Rock 6"),ce.RuinsRock7=new ce(e++,"RuinsRock7",351,"Ruins Rock 7"),ce.Poison=new ce(e++,"Poison",352,"Poison"),ce.FixedBoxTypeRuins=new ce(e++,"FixedBoxTypeRuins",353,"Fixed Box Type (Ruins)"),ce.RandomBoxTypeRuins=new ce(e++,"RandomBoxTypeRuins",354,"Random Box Type (Ruins)"),ce.EnemyTypeBoxYellow=new ce(e++,"EnemyTypeBoxYellow",355,"Enemy Type Box (Yellow)"),ce.EnemyTypeBoxBlue=new ce(e++,"EnemyTypeBoxBlue",356,"Enemy Type Box (Blue)"),ce.EmptyTypeBoxBlue=new ce(e++,"EmptyTypeBoxBlue",357,"Empty Type Box (Blue)"),ce.DestructableRock=new ce(e++,"DestructableRock",358,"Destructable Rock"),ce.PopupTrapsTechs=new ce(e++,"PopupTrapsTechs",359,"Popup Traps (techs)"),ce.FlyingWhiteBird=new ce(e++,"FlyingWhiteBird",368,"Flying White Bird"),ce.Tower=new ce(e++,"Tower",369,"Tower"),ce.FloatingRocks=new ce(e++,"FloatingRocks",370,"Floating Rocks"),ce.FloatingSoul=new ce(e++,"FloatingSoul",371,"Floating Soul"),ce.Butterfly=new ce(e++,"Butterfly",372,"Butterfly"),ce.LobbyGameMenu=new ce(e++,"LobbyGameMenu",384,"Lobby Game menu"),ce.LobbyWarpObject=new ce(e++,"LobbyWarpObject",385,"Lobby Warp Object"),ce.Lobby1EventObjectDefaultTree=new ce(e++,"Lobby1EventObjectDefaultTree",386,"Lobby 1 Event Object (Default Tree)"),ce.UnknownItem387=new ce(e++,"UnknownItem387",387,"Unknown Item (387)"),ce.UnknownItem388=new ce(e++,"UnknownItem388",388,"Unknown Item (388)"),ce.UnknownItem389=new ce(e++,"UnknownItem389",389,"Unknown Item (389)"),ce.LobbyEventObjectStaticPumpkin=new ce(e++,"LobbyEventObjectStaticPumpkin",390,"Lobby Event Object (Static Pumpkin)"),ce.LobbyEventObject3ChristmasWindows=new ce(e++,"LobbyEventObject3ChristmasWindows",391,"Lobby Event Object (3 Christmas Windows)"),ce.LobbyEventObjectRedAndWhiteCurtain=new ce(e++,"LobbyEventObjectRedAndWhiteCurtain",392,"Lobby Event Object (Red and White Curtain)"),ce.UnknownItem393=new ce(e++,"UnknownItem393",393,"Unknown Item (393)"),ce.UnknownItem394=new ce(e++,"UnknownItem394",394,"Unknown Item (394)"),ce.LobbyFishTank=new ce(e++,"LobbyFishTank",395,"Lobby Fish Tank"),ce.LobbyEventObjectButterflies=new ce(e++,"LobbyEventObjectButterflies",396,"Lobby Event Object (Butterflies)"),ce.UnknownItem400=new ce(e++,"UnknownItem400",400,"Unknown Item (400)"),ce.GreyWallLow=new ce(e++,"GreyWallLow",401,"grey wall low"),ce.SpaceshipDoor=new ce(e++,"SpaceshipDoor",402,"Spaceship Door"),ce.GreyWallHigh=new ce(e++,"GreyWallHigh",403,"grey wall high"),ce.TempleNormalDoor=new ce(e++,"TempleNormalDoor",416,"Temple Normal Door"),ce.BreakableWallWallButUnbreakable=new ce(e++,"BreakableWallWallButUnbreakable",417,'"breakable wall wall, but unbreakable"'),ce.BrokenCilinderAndRubble=new ce(e++,"BrokenCilinderAndRubble",418,"Broken cilinder and rubble"),ce.ThreeBrokenWallPiecesOnFloor=new ce(e++,"ThreeBrokenWallPiecesOnFloor",419,"3 broken wall pieces on floor"),ce.HighBrickCilinder=new ce(e++,"HighBrickCilinder",420,"high brick cilinder"),ce.LyingCilinder=new ce(e++,"LyingCilinder",421,"lying cilinder"),ce.BrickConeWithFlatTop=new ce(e++,"BrickConeWithFlatTop",422,"brick cone with flat top"),ce.BreakableTempleWall=new ce(e++,"BreakableTempleWall",423,"breakable temple wall"),ce.TempleMapDetect=new ce(e++,"TempleMapDetect",424,"Temple Map Detect"),ce.SmallBrownBrickRisingBridge=new ce(e++,"SmallBrownBrickRisingBridge",425,"small brown brick rising bridge"),ce.LongRisingBridgeWithPinkHighEdges=new ce(e++,"LongRisingBridgeWithPinkHighEdges",426,"long rising bridge (with pink high edges)"),ce.FourSwitchTempleDoor=new ce(e++,"FourSwitchTempleDoor",427,"4 switch temple door"),ce.FourButtonSpaceshipDoor=new ce(e++,"FourButtonSpaceshipDoor",448,"4 button spaceship door"),ce.ItemBoxCca=new ce(e++,"ItemBoxCca",512,"item box cca"),ce.TeleporterEp2=new ce(e++,"TeleporterEp2",513,"Teleporter (Ep 2)"),ce.CCADoor=new ce(e++,"CCADoor",514,"CCA Door"),ce.SpecialBoxCCA=new ce(e++,"SpecialBoxCCA",515,"Special Box CCA"),ce.BigCCADoor=new ce(e++,"BigCCADoor",516,"Big CCA Door"),ce.BigCCADoorSwitch=new ce(e++,"BigCCADoorSwitch",517,"Big CCA Door Switch"),ce.LittleRock=new ce(e++,"LittleRock",518,"Little Rock"),ce.Little3StoneWall=new ce(e++,"Little3StoneWall",519,"Little 3 Stone Wall"),ce.Medium3StoneWall=new ce(e++,"Medium3StoneWall",520,"Medium 3 stone wall"),ce.SpiderPlant=new ce(e++,"SpiderPlant",521,"Spider Plant"),ce.CCAAreaTeleporter=new ce(e++,"CCAAreaTeleporter",522,"CCA Area Teleporter"),ce.UnknownItem523=new ce(e++,"UnknownItem523",523,"Unknown Item (523)"),ce.WhiteBird=new ce(e++,"WhiteBird",524,"White Bird"),ce.OrangeBird=new ce(e++,"OrangeBird",525,"Orange Bird"),ce.Saw=new ce(e++,"Saw",527,"Saw"),ce.LaserDetect=new ce(e++,"LaserDetect",528,"Laser Detect"),ce.UnknownItem529=new ce(e++,"UnknownItem529",529,"Unknown Item (529)"),ce.UnknownItem530=new ce(e++,"UnknownItem530",530,"Unknown Item (530)"),ce.Seagull=new ce(e++,"Seagull",531,"Seagull"),ce.Fish=new ce(e++,"Fish",544,"Fish"),ce.SeabedDoorWithBlueEdges=new ce(e++,"SeabedDoorWithBlueEdges",545,"Seabed Door (with blue edges)"),ce.SeabedDoorAlwaysOpenNonTriggerable=new ce(e++,"SeabedDoorAlwaysOpenNonTriggerable",546,"Seabed door (always open, non-triggerable)"),ce.LittleCryotube=new ce(e++,"LittleCryotube",547,"Little Cryotube"),ce.WideGlassWallBreakable=new ce(e++,"WideGlassWallBreakable",548,"Wide Glass Wall (breakable)"),ce.BlueFloatingRobot=new ce(e++,"BlueFloatingRobot",549,"Blue floating robot"),ce.RedFloatingRobot=new ce(e++,"RedFloatingRobot",550,"Red floating robot"),ce.Dolphin=new ce(e++,"Dolphin",551,"Dolphin"),ce.CaptureTrap=new ce(e++,"CaptureTrap",552,"Capture Trap"),ce.VRLink=new ce(e++,"VRLink",553,"VR link"),ce.UnknownItem576=new ce(e++,"UnknownItem576",576,"Unknown Item (576)"),ce.WarpInBarbaRayRoom=new ce(e++,"WarpInBarbaRayRoom",640,"Warp in Barba Ray Room"),ce.UnknownItem672=new ce(e++,"UnknownItem672",672,"Unknown Item (672)"),ce.GeeNest=new ce(e++,"GeeNest",688,"Gee Nest"),ce.LabComputerConsole=new ce(e++,"LabComputerConsole",689,"Lab Computer Console"),ce.LabComputerConsoleGreenScreen=new ce(e++,"LabComputerConsoleGreenScreen",690,"Lab Computer Console (Green Screen)"),ce.ChairYelllowPillow=new ce(e++,"ChairYelllowPillow",691,"Chair, Yelllow Pillow"),ce.OrangeWallWithHoleInMiddle=new ce(e++,"OrangeWallWithHoleInMiddle",692,"orange wall with hole in middle"),ce.GreyWallWithHoleInMiddle=new ce(e++,"GreyWallWithHoleInMiddle",693,"grey wall with hole in middle"),ce.LongTable=new ce(e++,"LongTable",694,"long table"),ce.GBAStation=new ce(e++,"GBAStation",695,"GBA Station"),ce.TalkLinkToSupport=new ce(e++,"TalkLinkToSupport",696,"Talk (link to support)"),ce.InstaWarp=new ce(e++,"InstaWarp",697,"insta-warp"),ce.LabInvisibleObject=new ce(e++,"LabInvisibleObject",698,"Lab Invisible Object"),ce.LabGlassWindowDoor=new ce(e++,"LabGlassWindowDoor",699,"Lab Glass window Door"),ce.UnknownItem700=new ce(e++,"UnknownItem700",700,"Unknown Item (700)"),ce.LabCelingWarp=new ce(e++,"LabCelingWarp",701,"Lab Celing Warp"),ce.Ep4LightSource=new ce(e++,"Ep4LightSource",768,"Ep4 Light Source"),ce.Cacti=new ce(e++,"Cacti",769,"cacti"),ce.BigBrownRock=new ce(e++,"BigBrownRock",770,"Big Brown Rock"),ce.BreakableBrownRock=new ce(e++,"BreakableBrownRock",771,"Breakable Brown Rock"),ce.UnknownItem832=new ce(e++,"UnknownItem832",832,"Unknown Item (832)"),ce.UnknownItem833=new ce(e++,"UnknownItem833",833,"Unknown Item (833)"),ce.PoisonPlant=new ce(e++,"PoisonPlant",896,"Poison Plant"),ce.UnknownItem897=new ce(e++,"UnknownItem897",897,"Unknown Item (897)"),ce.UnknownItem898=new ce(e++,"UnknownItem898",898,"Unknown Item (898)"),ce.OozingDesertPlant=new ce(e++,"OozingDesertPlant",899,"Oozing Desert Plant"),ce.UnknownItem901=new ce(e++,"UnknownItem901",901,"Unknown Item (901)"),ce.BigBlackRocks=new ce(e++,"BigBlackRocks",902,"big black rocks"),ce.UnknownItem903=new ce(e++,"UnknownItem903",903,"Unknown Item (903)"),ce.UnknownItem904=new ce(e++,"UnknownItem904",904,"Unknown Item (904)"),ce.UnknownItem905=new ce(e++,"UnknownItem905",905,"Unknown Item (905)"),ce.UnknownItem906=new ce(e++,"UnknownItem906",906,"Unknown Item (906)"),ce.FallingRock=new ce(e++,"FallingRock",907,"Falling Rock"),ce.DesertPlantHasCollision=new ce(e++,"DesertPlantHasCollision",908,"Desert Plant (has collision)"),ce.DesertFixedTypeBoxBreakableCrystals=new ce(e++,"DesertFixedTypeBoxBreakableCrystals",909,"Desert Fixed Type Box (Breakable Crystals)"),ce.UnknownItem910=new ce(e++,"UnknownItem910",910,"Unknown Item (910)"),ce.BeeHive=new ce(e++,"BeeHive",911,"Bee Hive"),ce.UnknownItem912=new ce(e++,"UnknownItem912",912,"Unknown Item (912)"),ce.Heat=new ce(e++,"Heat",913,"Heat"),ce.TopOfSaintMillionEgg=new ce(e++,"TopOfSaintMillionEgg",960,"Top of saint million egg"),ce.UnknownItem961=new ce(e++,"UnknownItem961",961,"Unknown Item (961)")}();var de,pe=1/512,he=.1;!function(e){e.Ephinea="Ephinea"}(de||(de={}));var _e;R(de);!function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.IV=4]="IV"}(_e||(_e={}));var me;R(_e);function fe(e){if(!_e[e])throw new Error("Invalid episode ".concat(e,"."))}!function(e){e[e.Viridia=0]="Viridia",e[e.Greenill=1]="Greenill",e[e.Skyly=2]="Skyly",e[e.Bluefull=3]="Bluefull",e[e.Purplenum=4]="Purplenum",e[e.Pinkal=5]="Pinkal",e[e.Redria=6]="Redria",e[e.Oran=7]="Oran",e[e.Yellowboze=8]="Yellowboze",e[e.Whitill=9]="Whitill"}(me||(me={}));var ve,we=R(me);!function(e){e[e.Normal=0]="Normal",e[e.Hard=1]="Hard",e[e.VHard=2]="VHard",e[e.Ultimate=3]="Ultimate"}(ve||(ve={}));var be,ye,ke,ge,Re,Oe,je=R(ve),Se=function e(t,n,r){if(Object(d.a)(this,e),this.id=void 0,this.position=void 0,this.y_axis_rotation=void 0,this.sin_y_axis_rotation=void 0,this.cos_y_axis_rotation=void 0,!Number.isInteger(t)||t<-1)throw new Error("Expected id to be an integer greater than or equal to -1, got ".concat(t,"."));if(!n)throw new Error("position is required.");if("number"!==typeof r)throw new Error("y_axis_rotation is required.");this.id=t,this.position=n,this.y_axis_rotation=r,this.sin_y_axis_rotation=Math.sin(this.y_axis_rotation),this.cos_y_axis_rotation=Math.cos(this.y_axis_rotation)},xe=(z=function e(t,n,r,a,i,o,s,l,u,c){if(Object(d.a)(this,e),Object(w.a)(this,"id",P,this),Object(w.a)(this,"name",T,this),Object(w.a)(this,"short_description",G,this),Object(w.a)(this,"long_description",A,this),Object(w.a)(this,"episode",W,this),Object(w.a)(this,"area_variants",U,this),Object(w.a)(this,"objects",N,this),Object(w.a)(this,"npcs",H,this),this.dat_unknowns=void 0,this.bin_data=void 0,null!=t&&(!Number.isInteger(t)||t<0))throw new Error("id should be undefined or a non-negative integer.");if(fe(i),!s||!(s instanceof Array))throw new Error("objs is required.");if(!l||!(l instanceof Array))throw new Error("npcs is required.");this.id=t,this.name=n,this.short_description=r,this.long_description=a,this.episode=i,this.area_variants=o,this.objects=s,this.npcs=l,this.dat_unknowns=u,this.bin_data=c},P=Object(b.a)(z.prototype,"id",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(b.a)(z.prototype,"name",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(b.a)(z.prototype,"short_description",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(b.a)(z.prototype,"long_description",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(b.a)(z.prototype,"episode",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(b.a)(z.prototype,"area_variants",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(b.a)(z.prototype,"objects",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=Object(b.a)(z.prototype,"npcs",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z),De=(q=y.m.ref,V=y.m.ref,Z=y.m.ref,Y=function(){function e(t,n,r,a,i){if(Object(d.a)(this,e),this.type=void 0,Object(w.a)(this,"area_id",K,this),this._section_id=void 0,Object(w.a)(this,"section",Q,this),Object(w.a)(this,"position",X,this),Object(w.a)(this,"rotation",J,this),Object.getPrototypeOf(this)===Object.getPrototypeOf(e))throw new Error("Abstract class should not be instantiated directly.");if(!t)throw new Error("type is required.");if(!Number.isInteger(n)||n<0)throw new Error("Expected area_id to be a non-negative integer, got ".concat(n,"."));if(!Number.isInteger(r)||r<0)throw new Error("Expected section_id to be a non-negative integer, got ".concat(r,"."));if(!a)throw new Error("position is required.");if(!i)throw new Error("rotation is required.");this.type=t,this.area_id=n,this._section_id=r,this.position=a,this.rotation=i}return Object(p.a)(e,[{key:"section_id",get:function(){return this.section?this.section.id:this._section_id}},{key:"section_position",get:function(){var e=this.position,t=e.x,n=e.y,r=e.z;if(this.section){var a=t-this.section.position.x,i=n-this.section.position.y,o=r-this.section.position.z,s=-this.section.sin_y_axis_rotation,l=this.section.cos_y_axis_rotation;t=l*a+s*o,n=i,r=-s*a+l*o}return new g(t,n,r)},set:function(e){var t=e.x,n=e.y,r=e.z;if(this.section){var a=-this.section.sin_y_axis_rotation,i=this.section.cos_y_axis_rotation,o=a*t+i*r,s=i*t-a*r+this.section.position.x,l=n+this.section.position.y,u=o+this.section.position.z;this.position=new g(s,l,u)}}}]),Object(p.a)(e,[{key:"set_position_and_section",value:function(e,t){this.position=e,this.section=t}}]),e}(),K=Object(b.a)(Y.prototype,"area_id",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(Y.prototype,"section_id",[y.f],Object.getOwnPropertyDescriptor(Y.prototype,"section_id"),Y.prototype),Q=Object(b.a)(Y.prototype,"section",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(b.a)(Y.prototype,"position",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=Object(b.a)(Y.prototype,"rotation",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(Y.prototype,"section_position",[y.f],Object.getOwnPropertyDescriptor(Y.prototype,"section_position"),Y.prototype),Object(b.a)(Y.prototype,"set_position_and_section",[y.d],Object.getOwnPropertyDescriptor(Y.prototype,"set_position_and_section"),Y.prototype),Y),Ce=($=function(e){function t(e,n,r,a,i,o){var s;return Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,i,e,n,r,a)),Object(w.a)(s,"type",ee,Object(v.a)(s)),s.dat=void 0,s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(De),ee=Object(b.a)($.prototype,"type",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$),Ee=(te=function(e){function t(e,n,r,a,i,o){var s;if(Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,i,e,n,r,a)),Object(w.a)(s,"type",ne,Object(v.a)(s)),s.dat=void 0,!i)throw new Error("type is required.");return s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(De),ne=Object(b.a)(te.prototype,"type",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te),Le=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.order=void 0,this.area_variants=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."));if(!n)throw new Error("name is required.");if(!a)throw new Error("area_variants is required.");this.id=t,this.name=n,this.order=r,this.area_variants=a},Be=(re=y.m.shallow,ae=function e(t,n){if(Object(d.a)(this,e),this.id=t,this.area=n,Object(w.a)(this,"sections",ie,this),!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."))},ie=Object(b.a)(ae.prototype,"sections",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ae),Me=function e(t,n,r,a,i,o){Object(d.a)(this,e),this.difficulty=t,this.section_id=n,this.npc_type=r,this.item_type=a,this.anything_rate=i,this.rare_rate=o,this.rate=void 0,this.rate=i*o},Fe=(oe=function(){function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.episode=void 0,this.quest=void 0,this.enemy_counts=void 0,this.default_time=void 0,Object(w.a)(this,"user_time",se,this),!t)throw new Error("id is required.");if(a<=0)throw new Error("default_time must be greater than zero.");if(!n)throw new Error("name is required.");if(!r)throw new Error("quest is required.");this.id=t,this.name=n,this.episode=r.episode,this.quest=r,this.enemy_counts=r.enemy_counts,this.default_time=a}return Object(p.a)(e,[{key:"time",get:function(){return null!=this.user_time?this.user_time:this.default_time}}]),e}(),se=Object(b.a)(oe.prototype,"user_time",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(oe.prototype,"time",[y.f],Object.getOwnPropertyDescriptor(oe.prototype,"time"),oe.prototype),oe),Ie=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=t,this.name=n,this.episode=r,this.enemy_counts=a,!t)throw new Error("id is required.");if(!n)throw new Error("name is required.");if(!a)throw new Error("enemyCounts is required.")},ze=function e(t,n,r,a){Object(d.a)(this,e),this.name=t,this.head_style_count=n,this.hair_styles_count=r,this.hair_styles_with_accessory=a},Pe=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},Te=(n(256),n(112),n(51)),Ge=n(13),Ae=n.n(Ge),We=n(22),Ue=n(106);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Nominal=2]="Nominal",e[e.Error=3]="Error",e[e.Reloading=4]="Reloading"}(Oe||(Oe={}));var Ne,He,qe,Ve,Ze,Ye,Ke,Qe,Xe,Je,$e,et,tt,nt,rt,at,it=(be=function(){function e(t,n){Object(d.a)(this,e),Object(w.a)(this,"_value",ye,this),Object(w.a)(this,"_promise",ke,this),Object(w.a)(this,"_state",ge,this),this._load=void 0,Object(w.a)(this,"_error",Re,this),this._value=t,this._load=n}return Object(p.a)(e,[{key:"load",value:function(){return this.load_value()}},{key:"load_value",value:function(){var e=Object(We.a)(Ae.a.mark(function e(){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_loading){e.next=2;break}return e.abrupt("return",this._promise);case 2:if(this._state=Oe.Initializing,e.prev=3,!this._load){e.next=9;break}return this._promise=this._load(),e.next=8,this._promise;case 8:this._value=e.sent;case 9:return this._state=Oe.Nominal,this._error=void 0,e.abrupt("return",this._value);case 14:throw e.prev=14,e.t0=e.catch(3),this._state=Oe.Error,this._error=e.t0,e.t0;case 19:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"value",get:function(){var e=this;return this._state===Oe.Uninitialized&&Object(Ue.defer)(function(){return e.load_value()}),this._value},set:function(e){this._value=e}},{key:"promise",get:function(){return this._state===Oe.Uninitialized?this.load_value():this._promise}},{key:"state",get:function(){return this._state}},{key:"is_initialized",get:function(){return this._state!==Oe.Uninitialized}},{key:"is_loading",get:function(){switch(this._state){case Oe.Initializing:case Oe.Reloading:return!0;default:return!1}}},{key:"error",get:function(){return this._error}}]),e}(),ye=Object(b.a)(be.prototype,"_value",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=Object(b.a)(be.prototype,"_promise",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new Promise(function(t){return t(e._value)})}}),ge=Object(b.a)(be.prototype,"_state",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.Uninitialized}}),Re=Object(b.a)(be.prototype,"_error",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(be.prototype,"value",[y.f],Object.getOwnPropertyDescriptor(be.prototype,"value"),be.prototype),Object(b.a)(be.prototype,"state",[y.f],Object.getOwnPropertyDescriptor(be.prototype,"state"),be.prototype),Object(b.a)(be.prototype,"is_initialized",[y.f],Object.getOwnPropertyDescriptor(be.prototype,"is_initialized"),be.prototype),Object(b.a)(be.prototype,"is_loading",[y.f],Object.getOwnPropertyDescriptor(be.prototype,"is_loading"),be.prototype),Object(b.a)(be.prototype,"error",[y.f],Object.getOwnPropertyDescriptor(be.prototype,"error"),be.prototype),be),ot=new(Ne=function(){function e(){var t=this;Object(d.a)(this,e),Object(w.a)(this,"current_server",He,this),Object(w.a)(this,"current_tool",qe,this),this.key_event_handlers=new Map,this.on_global_keyup=function(e,n){t.key_event_handlers.set(e,n)},this.dispatch_global_keyup=function(e){var n=t.key_event_handlers.get(t.current_tool);n&&n(e)}}return Object(p.a)(e,[{key:"init_tool",value:function(){var e=window.location.search.slice(1).split("&").find(function(e){return e.startsWith("tool=")});return e?e.slice(5):"viewer"}}]),e}(),He=Object(b.a)(Ne.prototype,"current_server",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.Ephinea}}),qe=Object(b.a)(Ne.prototype,"current_tool",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.init_tool()}}),Ne),st=(Ve=function(e){function t(e){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).call(this,de,e))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"current",get:function(){return this.get(ot.current_server)}}]),t}(D),Object(b.a)(Ve.prototype,"current",[y.f],Object.getOwnPropertyDescriptor(Ve.prototype,"current"),Ve.prototype),Ve),lt=(Ze=function(){function e(){var t=this;Object(d.a)(this,e),this.id_to_item_type=[],Object(w.a)(this,"item_types",Ye,this),this.load=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r,a,i,o,s,l,u,c,d,p;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/itemTypes.").concat(de[n].toLowerCase(),".json"));case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,i=new Array,o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();case 12:if(o=(c=u.next()).done){e.next=34;break}d=c.value,p=void 0,e.t0=d.class,e.next="weapon"===e.t0?18:"armor"===e.t0?20:"shield"===e.t0?22:"unit"===e.t0?24:"tool"===e.t0?26:28;break;case 18:return p=new C(d.id,d.name,d.minAtp,d.maxAtp,d.ata,d.maxGrind,d.requiredAtp),e.abrupt("break",29);case 20:return p=new E(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 22:return p=new L(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 24:return p=new B(d.id,d.name),e.abrupt("break",29);case 26:return p=new M(d.id,d.name),e.abrupt("break",29);case 28:return e.abrupt("continue",31);case 29:t.id_to_item_type[p.id]=p,i.push(p);case 31:o=!0,e.next=12;break;case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(10),s=!0,l=e.t1;case 40:e.prev=40,e.prev=41,o||null==u.return||u.return();case 43:if(e.prev=43,!s){e.next=46;break}throw l;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.item_types=i,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[10,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"get_by_id",value:function(e){return this.id_to_item_type[e]}}]),e}(),Ye=Object(b.a)(Ze.prototype,"item_types",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ze),ut=new st(function(e){var t=new lt;return new it(t,function(){return t.load(e)})}),ct=(Ke=function(){function e(t,n){Object(d.a)(this,e),this.store=void 0,this.item=void 0,this.store=t,this.item=n}return Object(p.a)(e,[{key:"shifta_atp",get:function(){return this.item.type.min_atp===this.item.type.max_atp?0:this.item.type.max_atp*this.store.shifta_factor}},{key:"min_atp",get:function(){return this.item.type.min_atp+this.item.grind_atp}},{key:"max_atp",get:function(){return this.item.type.max_atp+this.item.grind_atp+this.shifta_atp}},{key:"final_min_atp",get:function(){return this.min_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"final_max_atp",get:function(){return this.max_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"min_normal_damage",get:function(){return(this.final_min_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"max_normal_damage",get:function(){return(this.final_max_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"avg_normal_damage",get:function(){return(this.min_normal_damage+this.max_normal_damage)/2}},{key:"min_heavy_damage",get:function(){return.3402*(this.final_min_atp-this.store.enemy_dfp)}},{key:"max_heavy_damage",get:function(){return.3402*(this.final_max_atp-this.store.enemy_dfp)}},{key:"avg_heavy_damage",get:function(){return(this.min_heavy_damage+this.max_heavy_damage)/2}}]),e}(),Object(b.a)(Ke.prototype,"shifta_atp",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"shifta_atp"),Ke.prototype),Object(b.a)(Ke.prototype,"min_atp",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"min_atp"),Ke.prototype),Object(b.a)(Ke.prototype,"max_atp",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"max_atp"),Ke.prototype),Object(b.a)(Ke.prototype,"final_min_atp",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"final_min_atp"),Ke.prototype),Object(b.a)(Ke.prototype,"final_max_atp",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"final_max_atp"),Ke.prototype),Object(b.a)(Ke.prototype,"min_normal_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"min_normal_damage"),Ke.prototype),Object(b.a)(Ke.prototype,"max_normal_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"max_normal_damage"),Ke.prototype),Object(b.a)(Ke.prototype,"avg_normal_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"avg_normal_damage"),Ke.prototype),Object(b.a)(Ke.prototype,"min_heavy_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"min_heavy_damage"),Ke.prototype),Object(b.a)(Ke.prototype,"max_heavy_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"max_heavy_damage"),Ke.prototype),Object(b.a)(Ke.prototype,"avg_heavy_damage",[y.f],Object.getOwnPropertyDescriptor(Ke.prototype,"avg_heavy_damage"),Ke.prototype),Ke),dt=new(Qe=function(){function e(){var t=this;Object(d.a)(this,e),Object(w.a)(this,"char_atp",Xe,this),Object(w.a)(this,"mag_pow",Je,this),Object(w.a)(this,"shifta_lvl",$e,this),Object(w.a)(this,"weapons",et,this),this.add_weapon=function(e){t.weapons.push(new ct(t,new F(e)))},Object(w.a)(this,"armor_type",tt,this),Object(w.a)(this,"shield_type",nt,this),Object(w.a)(this,"enemy_dfp",rt,this)}return Object(p.a)(e,[{key:"weapon_types",get:function(){return ut.current.value.item_types.filter(function(e){return e instanceof C})}},{key:"armor_types",get:function(){return ut.current.value.item_types.filter(function(e){return e instanceof E})}},{key:"shield_types",get:function(){return ut.current.value.item_types.filter(function(e){return e instanceof L})}},{key:"armor_atp",get:function(){return this.armor_type?this.armor_type.atp:0}},{key:"shield_atp",get:function(){return this.shield_type?this.shield_type.atp:0}},{key:"base_atp",get:function(){return this.char_atp+2*this.mag_pow}},{key:"shifta_factor",get:function(){return this.shifta_lvl?.013*(this.shifta_lvl-1)+.1:0}},{key:"base_shifta_atp",get:function(){return this.base_atp*this.shifta_factor}}]),e}(),Object(b.a)(Qe.prototype,"weapon_types",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"weapon_types"),Qe.prototype),Object(b.a)(Qe.prototype,"armor_types",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"armor_types"),Qe.prototype),Object(b.a)(Qe.prototype,"shield_types",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"shield_types"),Qe.prototype),Xe=Object(b.a)(Qe.prototype,"char_atp",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Je=Object(b.a)(Qe.prototype,"mag_pow",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(Qe.prototype,"armor_atp",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"armor_atp"),Qe.prototype),Object(b.a)(Qe.prototype,"shield_atp",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"shield_atp"),Qe.prototype),$e=Object(b.a)(Qe.prototype,"shifta_lvl",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(Qe.prototype,"base_atp",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"base_atp"),Qe.prototype),Object(b.a)(Qe.prototype,"shifta_factor",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"shifta_factor"),Qe.prototype),Object(b.a)(Qe.prototype,"base_shifta_atp",[y.f],Object.getOwnPropertyDescriptor(Qe.prototype,"base_shifta_atp"),Qe.prototype),et=Object(b.a)(Qe.prototype,"weapons",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.m.array()}}),tt=Object(b.a)(Qe.prototype,"armor_type",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=Object(b.a)(Qe.prototype,"shield_type",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=Object(b.a)(Qe.prototype,"enemy_dfp",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qe),pt=n(219),ht=n.n(pt),_t=(n(329),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(ht.a,Object.assign({className:"BigSelect"},this.props))}}]),t}(r.PureComponent)),mt=Object(f.a)(at=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).add_weapon=function(e){if(e){var t=ut.current.value.get_by_id(e.value);dt.add_weapon(t)}},n.armor_changed=function(e){if(e){var t=ut.current.value.get_by_id(e.value);dt.armor_type=t}else dt.armor_type=void 0},n.shield_changed=function(e){if(e){var t=ut.current.value.get_by_id(e.value);dt.shield_type=t}else dt.shield_type=void 0},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("section",null,a.a.createElement("div",null,"Weapons:"),a.a.createElement(_t,{placeholder:"Add a weapon",value:void 0,options:dt.weapon_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_weapon}),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Weapon"),a.a.createElement("td",null,"Min. ATP"),a.a.createElement("td",null,"Max. ATP"),a.a.createElement("td",null,"Grind"),a.a.createElement("td",null,"Grind ATP"),a.a.createElement("td",null,"Shifta ATP"),a.a.createElement("td",null,"Final Min. ATP"),a.a.createElement("td",null,"Final Max. ATP"),a.a.createElement("td",null,"Min. Normal Damage"),a.a.createElement("td",null,"Max. Normal Damage"),a.a.createElement("td",null,"Avg. Normal Damage"),a.a.createElement("td",null,"Min. Heavy Damage"),a.a.createElement("td",null,"Max. Heavy Damage"),a.a.createElement("td",null,"Avg. Heavy Damage"))),a.a.createElement("tbody",null,dt.weapons.map(function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.item.type.name),a.a.createElement("td",null,e.item.type.min_atp),a.a.createElement("td",null,e.item.type.max_atp),a.a.createElement("td",null,a.a.createElement(Te.a,{size:"small",value:e.item.grind,min:0,max:e.item.type.max_grind,step:1,onChange:function(t){return e.item.grind=t||0}})),a.a.createElement("td",null,e.item.grind_atp),a.a.createElement("td",null,e.shifta_atp.toFixed(1)),a.a.createElement("td",null,e.final_min_atp.toFixed(1)),a.a.createElement("td",null,e.final_max_atp.toFixed(1)),a.a.createElement("td",null,e.min_normal_damage.toFixed(1)),a.a.createElement("td",null,e.max_normal_damage.toFixed(1)),a.a.createElement("td",null,e.avg_normal_damage.toFixed(1)),a.a.createElement("td",null,e.min_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.max_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.avg_heavy_damage.toFixed(1)))}))),a.a.createElement("div",null,"Character ATP:"),a.a.createElement(Te.a,{value:dt.char_atp,min:0,step:1,onChange:function(e){return dt.char_atp=e||0}}),a.a.createElement("div",null,"MAG POW:"),a.a.createElement(Te.a,{value:dt.mag_pow,min:0,max:200,step:1,onChange:function(e){return dt.mag_pow=e||0}}),a.a.createElement("div",null,"Armor:"),a.a.createElement(_t,{placeholder:"Choose an armor",value:dt.armor_type&&dt.armor_type.id,options:dt.armor_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.armor_changed}),a.a.createElement("span",null,"Armor ATP: ",dt.armor_atp),a.a.createElement("div",null,"Shield:"),a.a.createElement(_t,{placeholder:"Choose a shield",value:dt.shield_type&&dt.shield_type.id,options:dt.shield_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.shield_changed}),a.a.createElement("span",null,"Shield ATP: ",dt.shield_atp),a.a.createElement("div",null,"Shifta level:"),a.a.createElement(Te.a,{value:dt.shifta_lvl,min:0,max:30,step:1,onChange:function(e){return dt.shifta_lvl=e||0}}),a.a.createElement("div",null,"Shifta factor:"),a.a.createElement("div",null,dt.shifta_factor.toFixed(3)),a.a.createElement("div",null,"Base shifta ATP:"),a.a.createElement("div",null,dt.base_shifta_atp.toFixed(2))))}}]),t}(r.Component))||at,ft=(n(333),n(240)),vt=(n(335),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={has_error:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.has_error?a.a.createElement("div",{className:"ErrorBoundary-error"},a.a.createElement("div",null,a.a.createElement(ft.a,{type:"error",message:"Something went wrong."}))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{has_error:!0}}}]),t}(r.Component));function wt(e){var t=function(t){return a.a.createElement(vt,null,a.a.createElement(e,t))};return t.displayName="".concat(e.displayName,"ErrorBoundary"),t}n(191);var bt,yt,kt,gt,Rt,Ot,jt,St,xt,Dt,Ct,Et,Lt,Bt,Mt,Ft=n(80),It=(n(337),n(338),n(239)),zt=n(54),Pt=n.n(zt),Tt=n(42),Gt=n(29),At=l.a.get("stores/HuntMethodStore"),Wt=new(bt=function(){function e(){var t=this;Object(d.a)(this,e),Object(w.a)(this,"methods",yt,this),this.storage_disposer=void 0,this.load_from_local_storage=function(e,n){try{var r=localStorage.getItem("HuntMethodStore.methodUserTimes.".concat(de[n]));if(r){var a=JSON.parse(r),i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;c.user_time=a[c.id]}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}t.storage_disposer&&t.storage_disposer(),t.storage_disposer=Object(y.e)(function(){return t.store_in_local_storage(e,n)})}catch(p){At.error(p)}},this.store_in_local_storage=function(e,t){try{var n={},r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;void 0!=l.user_time&&(n[l.id]=l.user_time)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}localStorage.setItem("HuntMethodStore.methodUserTimes.".concat(de[t]),JSON.stringify(n))}catch(c){At.error(c)}}}return Object(p.a)(e,[{key:"load_hunt_methods",value:function(){var e=Object(We.a)(Ae.a.mark(function e(t){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,f,v,w,b;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/quests.").concat(de[t].toLowerCase(),".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a=new Array,i=!0,o=!1,s=void 0,e.prev=10,l=r[Symbol.iterator]();case 12:if(i=(u=l.next()).done){e.next=25;break}for(c=u.value,d=0,p=new Map,h=0,_=Object.entries(c.enemyCounts);h<_.length;h++)m=_[h],f=Object(Gt.a)(m,2),v=f[0],w=f[1],(b=I.by_code(v))?(p.set(b,w),d+=w):At.error("No NpcType found for code ".concat(v,"."));e.t0=c.id,e.next=31===e.t0?20:34===e.t0?20:1305===e.t0?20:1306===e.t0?20:1307===e.t0?20:313===e.t0?20:314===e.t0?20:21;break;case 20:return e.abrupt("continue",22);case 21:a.push(new Fe("q".concat(c.id),c.name,new Ie(c.id,c.name,c.episode,p),/^\d-\d.*/.test(c.name)?.75:d>400?.75:.5));case 22:i=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(10),o=!0,s=e.t1;case 31:e.prev=31,e.prev=32,i||null==l.return||l.return();case 34:if(e.prev=34,!o){e.next=37;break}throw s;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return this.load_from_local_storage(a,t),e.abrupt("return",a);case 41:case"end":return e.stop()}},e,this,[[10,27,31,39],[32,,34,38]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),yt=Object(b.a)(bt.prototype,"methods",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new st(function(t){return new it([],function(){return e.load_hunt_methods(t)})})}}),bt),Ut=(n(350),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).sort_columns=new Array,n.column_width=function(e){var t=e.index;return n.props.columns[t].width},n.cell_renderer=function(e){var t,r,i,o=e.columnIndex,s=e.rowIndex,l=e.style,u=n.props.columns[o],c=["DataTable-cell"];if(o===n.props.columns.length-1&&c.push("last-in-row"),0===s){if(t=i=u.name,u.sortable){c.push("sortable");var d=n.sort_columns[0];d&&d.column===u&&(r=d.direction===Tt.d.ASC?a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 14l5-5 5 5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})):a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 10l5 5 5-5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))}}else if(u.class_name&&c.push(u.class_name),n.props.footer&&s===1+n.props.row_count)c.push("footer-cell"),t=null==u.footer_value?"":u.footer_value,i=null==u.footer_tooltip?"":u.footer_tooltip;else{var p=n.props.record({index:s-1});t=u.cell_renderer(p),u.tooltip&&(i=u.tooltip(p))}"string"!==typeof t&&c.push("custom");var h=0===s&&u.sortable?function(){return n.header_clicked(u)}:void 0;return a.a.createElement("div",{className:c.join(" "),key:"".concat(o,", ").concat(s),style:l,title:i,onClick:h},"string"===typeof t?a.a.createElement("span",{className:"DataTable-cell-text"},t):t,r)},n.header_clicked=function(e){var t=n.sort_columns.findIndex(function(t){return t.column===e}),r=-1===t?void 0:n.sort_columns.splice(t,1)[0],a=0===t&&r&&r.direction===Tt.d.ASC?Tt.d.DESC:Tt.d.ASC;n.sort_columns.unshift({column:e,direction:a}),n.sort_columns.splice(10),n.props.sort&&n.props.sort(n.sort_columns)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"DataTable",style:{width:this.props.width,height:this.props.height}},a.a.createElement(Tt.c,{width:this.props.width,height:this.props.height,rowHeight:26,rowCount:this.props.row_count+1+(this.props.footer?1:0),fixedRowCount:1,overscanRowCount:this.props.overscan_row_count,columnWidth:this.column_width,columnCount:this.props.columns.length,fixedColumnCount:this.props.fixed_column_count,overscanColumnCount:this.props.overscan_column_count,cellRenderer:this.cell_renderer,classNameTopLeftGrid:"DataTable-header",classNameTopRightGrid:"DataTable-header",updateTigger:this.props.update_trigger}))}}]),t}(r.Component)),Nt=(n(351),Object(f.a)((Rt=gt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return Wt.methods.current.value[t]},n.sort=function(e){var t=Wt.methods.current.value.slice();t.sort(function(t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=l.column,c=l.direction,d=0;if("name"===u.key)d=t.name.localeCompare(n.name);else if("episode"===u.key)d=t.episode-n.episode;else if("time"===u.key)d=t.time-n.time;else if(u.key){var p=I.by_code(u.key);p&&(d=(t.enemy_counts.get(p)||0)-(n.enemy_counts.get(p)||0))}if(0!==d)return c===Tt.d.ASC?d:-d}}catch(h){a=!0,i=h}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return 0}),Wt.methods.current.value=t},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,n=Wt.methods.current.value;return a.a.createElement("section",{className:"ho-MethodsComponent"},a.a.createElement(Tt.a,null,function(r){var i=r.width,o=r.height;return a.a.createElement(Ut,{width:i,height:o,row_count:n.length,columns:t.columns,fixed_column_count:3,record:e.record,sort:e.sort,update_trigger:Wt.methods.current.value})}))}}]),t}(r.Component),gt.columns=function(){var e=[{key:"name",name:"Method",width:250,cell_renderer:function(e){return e.name},sortable:!0},{key:"episode",name:"Ep.",width:34,cell_renderer:function(e){return _e[e.episode]},sortable:!0},{key:"time",name:"Time",width:50,cell_renderer:function(e){return a.a.createElement(Ht,{method:e})},class_name:"integrated",sortable:!0}],t=!0,n=!1,r=void 0;try{for(var i,o=function(){var t=i.value;e.push({key:t.code,name:t.name,width:75,cell_renderer:function(e){var n=e.enemy_counts.get(t);return null==n?"":n.toString()},class_name:"number",sortable:!0})},s=ue[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}(),kt=Rt))||kt),Ht=Object(f.a)(Ot=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).change=function(e){n.props.method.user_time=e.hour()+e.minute()/60},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.method.time,t=Math.floor(e),n=Math.round(60*(e-t));return a.a.createElement(It.a,{className:"ho-MethodsComponent-timepicker",value:Pt()({hour:t,minute:n}),format:"HH:mm",size:"small",allowClear:!1,suffixIcon:a.a.createElement("span",null),onChange:this.change})}}]),t}(a.a.Component))||Ot,qt=(n(355),n(225)),Vt=(n(86),n(31)),Zt=n(34),Yt=n(224),Kt=n.n(Yt),Qt=l.a.get("stores/ItemDropStore"),Xt=function(){function e(){Object(d.a)(this,e),this.table=new Array(je.length*we.length*le.length),this.item_type_to_drops=[]}return Object(p.a)(e,[{key:"get_drop",value:function(e,t,n){return this.table[e*we.length*le.length+t*le.length+n.id]}},{key:"set_drop",value:function(e,t,n,r){this.table[e*we.length*le.length+t*le.length+n.id]=r;var a=this.item_type_to_drops[r.item_type.id];a||(a=[],this.item_type_to_drops[r.item_type.id]=a),a.push(r)}},{key:"get_drops_for_item_type",value:function(e){return this.item_type_to_drops[e]||[]}}]),e}(),Jt=(jt=y.m.ref,St=function e(){Object(d.a)(this,e),Object(w.a)(this,"enemy_drops",xt,this)},xt=Object(b.a)(St.prototype,"enemy_drops",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Xt}}),St),$t=new st(function(e){var t=new Jt;return new it(t,function(){return function(e,t){return en.apply(this,arguments)}(t,e)})});function en(){return(en=Object(We.a)(Ae.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h,_,m,f;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.current.promise;case 2:return r=e.sent,e.next=5,fetch("".concat("","/enemyDrops.").concat(de[n].toLowerCase(),".json"));case 5:return a=e.sent,e.next=8,a.json();case 8:i=e.sent,o=new Xt,s=!0,l=!1,u=void 0,e.prev=13,c=i[Symbol.iterator]();case 15:if(s=(d=c.next()).done){e.next=34;break}if(p=d.value,h=I.by_code(p.enemy)){e.next=21;break}return Qt.warn("Couldn't determine NpcType of episode ".concat(p.episode," ").concat(p.enemy,".")),e.abrupt("continue",31);case 21:if(_=ve[p.difficulty],m=r.get_by_id(p.itemTypeId)){e.next=26;break}return Qt.warn("Couldn't find item kind ".concat(p.itemTypeId,".")),e.abrupt("continue",31);case 26:if(null!=(f=me[p.sectionId])){e.next=30;break}return Qt.warn("Couldn't find section ID ".concat(p.sectionId,".")),e.abrupt("continue",31);case 30:o.set_drop(_,f,h,new Me(_,f,h,m,p.dropRate,p.rareRate));case 31:s=!0,e.next=15;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(13),l=!0,u=e.t0;case 40:e.prev=40,e.prev=41,s||null==c.return||c.return();case 43:if(e.prev=43,!l){e.next=46;break}throw u;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.enemy_drops=o,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[13,36,40,48],[41,,43,47]])}))).apply(this,arguments)}var tn,nn,rn=l.a.get("stores/HuntOptimizerStore"),an=(Dt=function e(t,n){Object(d.a)(this,e),Object(w.a)(this,"item_type",Ct,this),Object(w.a)(this,"amount",Et,this),this.item_type=t,this.amount=n},Ct=Object(b.a)(Dt.prototype,"item_type",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=Object(b.a)(Dt.prototype,"amount",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt),on=function e(t,n){Object(d.a)(this,e),this.wanted_items=void 0,this.optimal_methods=void 0,this.wanted_items=t,this.optimal_methods=n},sn=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.difficulty=void 0,this.section_ids=void 0,this.method_name=void 0,this.method_episode=void 0,this.method_time=void 0,this.runs=void 0,this.total_time=void 0,this.item_counts=void 0,this.difficulty=t,this.section_ids=n,this.method_name=r,this.method_episode=a,this.method_time=i,this.runs=o,this.total_time=o*i,this.item_counts=s},ln=new(Lt=function(){function e(){var t=this;Object(d.a)(this,e),Object(w.a)(this,"wanted_items",Bt,this),Object(w.a)(this,"result",Mt,this),this.optimize=Object(We.a)(Ae.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,f,v,w,b,y,k,g,R,O,j,S,x,D,C,E,L,B,M,F,z,P,T,G,A,W,U,N,H,q,V,Z,Y,K,Q,X,J,$,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de,_e,me,fe,ve,be,ye,ke,ge,Re,Oe,Se,xe,De,Ce,Ee,Le,Be,Me,Fe,Ie,ze,Pe,Te,Ge,We,Ue,Ne,He,qe,Ve,Ze,Ye,Ke,Qe,Xe,Je,$e,et,tt,nt,rt,at;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wanted_items.length){e.next=3;break}return t.result=void 0,e.abrupt("return");case 3:return n=new Set(t.wanted_items.filter(function(e){return e.amount>0}).map(function(e){return e.item_type})),e.next=6,Wt.methods.current.promise;case 6:return r=e.sent,e.next=9,$t.current.promise;case 9:for(a=e.sent.enemy_drops,i={},o=!0,s=!1,l=void 0,e.prev=14,u=t.wanted_items[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,i[d.item_type.name]={min:d.amount};e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,o||null==u.return||u.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p={},h=new Map,_=!0,m=!1,f=void 0,e.prev=35,v=r[Symbol.iterator]();case 37:if(_=(w=v.next()).done){e.next=144;break}for(b=w.value,y=new Map,k=!0,g=!1,R=void 0,e.prev=43,O=b.enemy_counts.entries()[Symbol.iterator]();!(k=(j=O.next()).done);k=!0)S=j.value,x=Object(Gt.a)(S,2),D=x[0],C=x[1],E=y.get(D)||0,null==D.rare_type?y.set(D,E+C):(L=void 0,B=void 0,D.rare_type===I.Kondrieu?(L=1-he,B=he):(L=1-pe,B=pe),y.set(D,E+C*L),y.set(D.rare_type,(y.get(D.rare_type)||0)+C*B));e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),g=!0,R=e.t1;case 51:e.prev=51,e.prev=52,k||null==O.return||O.return();case 54:if(e.prev=54,!g){e.next=57;break}throw R;case 57:return e.finish(54);case 58:return e.finish(51);case 59:M=[y],(F=y.get(I.PanArms))&&((z=new Map(y)).delete(I.PanArms),z.set(I.Migium,F),z.set(I.Hidoom,F),M.push(z)),(P=y.get(I.PanArms2))&&((T=new Map(y)).delete(I.PanArms2),T.set(I.Migium2,P),T.set(I.Hidoom2,P),M.push(T)),G=0;case 65:if(!(G<M.length)){e.next=141;break}A=M[G],W=1===G,U=!0,N=!1,H=void 0,e.prev=71,q=je[Symbol.iterator]();case 73:if(U=(V=q.next()).done){e.next=124;break}Z=V.value,Y=!0,K=!1,Q=void 0,e.prev=78,X=we[Symbol.iterator]();case 80:if(Y=(J=X.next()).done){e.next=107;break}for($=J.value,ee={time:b.time},te=!1,ne=!0,re=!1,ae=void 0,e.prev=87,ie=A.entries()[Symbol.iterator]();!(ne=(oe=ie.next()).done);ne=!0)se=oe.value,le=Object(Gt.a)(se,2),ue=le[0],ce=le[1],(de=a.get_drop(Z,$,ue))&&n.has(de.item_type)&&(_e=ee[de.item_type.name]||0,ee[de.item_type.name]=_e+ce*de.rate,te=!0);e.next=95;break;case 91:e.prev=91,e.t2=e.catch(87),re=!0,ae=e.t2;case 95:e.prev=95,e.prev=96,ne||null==ie.return||ie.return();case 98:if(e.prev=98,!re){e.next=101;break}throw ae;case 101:return e.finish(98);case 102:return e.finish(95);case 103:te&&(me=t.full_method_name(Z,$,b,W),p[me]=ee,h.set(me,{method:b,difficulty:Z,section_id:$,split_pan_arms:W}));case 104:Y=!0,e.next=80;break;case 107:e.next=113;break;case 109:e.prev=109,e.t3=e.catch(78),K=!0,Q=e.t3;case 113:e.prev=113,e.prev=114,Y||null==X.return||X.return();case 116:if(e.prev=116,!K){e.next=119;break}throw Q;case 119:return e.finish(116);case 120:return e.finish(113);case 121:U=!0,e.next=73;break;case 124:e.next=130;break;case 126:e.prev=126,e.t4=e.catch(71),N=!0,H=e.t4;case 130:e.prev=130,e.prev=131,U||null==q.return||q.return();case 133:if(e.prev=133,!N){e.next=136;break}throw H;case 136:return e.finish(133);case 137:return e.finish(130);case 138:G++,e.next=65;break;case 141:_=!0,e.next=37;break;case 144:e.next=150;break;case 146:e.prev=146,e.t5=e.catch(35),m=!0,f=e.t5;case 150:e.prev=150,e.prev=151,_||null==v.return||v.return();case 153:if(e.prev=153,!m){e.next=156;break}throw f;case 156:return e.finish(153);case 157:return e.finish(150);case 158:if((fe=Kt.a.Solve({optimize:"time",opType:"min",constraints:i,variables:p})).feasible){e.next=162;break}return t.result=void 0,e.abrupt("return");case 162:ve=[],be=0,ye=Object.entries(fe);case 164:if(!(be<ye.length)){e.next=257;break}if(ke=ye[be],ge=Object(Gt.a)(ke,2),Re=ge[0],Oe=ge[1],!(Se=h.get(Re))){e.next=254;break}xe=Se.method,De=Se.difficulty,Ce=Se.section_id,Ee=Se.split_pan_arms,Le=Oe,Be=p[Re],Me=new Map,Fe=0,Ie=Object.entries(Be);case 176:if(!(Fe<Ie.length)){e.next=211;break}ze=Ie[Fe],Pe=Object(Gt.a)(ze,2),Te=Pe[0],Ge=Pe[1],We=!0,Ue=!1,Ne=void 0,e.prev=184,He=n[Symbol.iterator]();case 186:if(We=(qe=He.next()).done){e.next=194;break}if(Ve=qe.value,Te!==Ve.name){e.next=191;break}return Me.set(Ve,Le*Ge),e.abrupt("break",194);case 191:We=!0,e.next=186;break;case 194:e.next=200;break;case 196:e.prev=196,e.t6=e.catch(184),Ue=!0,Ne=e.t6;case 200:e.prev=200,e.prev=201,We||null==He.return||He.return();case 203:if(e.prev=203,!Ue){e.next=206;break}throw Ne;case 206:return e.finish(203);case 207:return e.finish(200);case 208:Fe++,e.next=176;break;case 211:Ze=[],Ye=!0,Ke=!1,Qe=void 0,e.prev=215,Xe=we[Symbol.iterator]();case 217:if(Ye=(Je=Xe.next()).done){e.next=239;break}if($e=Je.value,et=!0,$e===Ce){e.next=235;break}if(tt=p[t.full_method_name(De,$e,xe,Ee)]){e.next=226;break}et=!1,e.next=235;break;case 226:nt=0,rt=Object.keys(Be);case 227:if(!(nt<rt.length)){e.next=235;break}if(at=rt[nt],Be[at]===tt[at]){e.next=232;break}return et=!1,e.abrupt("break",235);case 232:nt++,e.next=227;break;case 235:et&&Ze.push($e);case 236:Ye=!0,e.next=217;break;case 239:e.next=245;break;case 241:e.prev=241,e.t7=e.catch(215),Ke=!0,Qe=e.t7;case 245:e.prev=245,e.prev=246,Ye||null==Xe.return||Xe.return();case 248:if(e.prev=248,!Ke){e.next=251;break}throw Qe;case 251:return e.finish(248);case 252:return e.finish(245);case 253:ve.push(new sn(De,Ze,xe.name+(Ee?" (Split Pan Arms)":""),xe.episode,xe.time,Le,Me));case 254:be++,e.next=164;break;case 257:t.result=new on(Object(Zt.a)(n),ve);case 258:case"end":return e.stop()}},e,null,[[14,18,22,30],[23,,25,29],[35,146,150,158],[43,47,51,59],[52,,54,58],[71,126,130,138],[78,109,113,121],[87,91,95,103],[96,,98,102],[114,,116,120],[131,,133,137],[151,,153,157],[184,196,200,208],[201,,203,207],[215,241,245,253],[246,,248,252]])})),this.initialize=Object(We.a)(Ae.a.mark(function e(){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.load_from_local_storage();case 3:Object(y.e)(t.store_in_local_storage),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),rn.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),this.load_from_local_storage=Object(We.a)(Ae.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("HuntOptimizerStore.wantedItems.".concat(de[ot.current_server])))){e.next=27;break}return e.next=4,ut.current.promise;case 4:for(r=e.sent,a=JSON.parse(n),i=[],o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,p=d.itemTypeId,h=d.itemKindId,_=d.amount,(m=void 0!=p?r.get_by_id(p):r.get_by_id(h))&&i.push(new an(m,_));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,l=e.t0;case 18:e.prev=18,e.prev=19,o||null==u.return||u.return();case 21:if(e.prev=21,!s){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:t.wanted_items.replace(i);case 27:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25]])})),this.store_in_local_storage=function(){try{localStorage.setItem("HuntOptimizerStore.wantedItems.".concat(de[ot.current_server]),JSON.stringify(t.wanted_items.map(function(e){var t=e.item_type,n=e.amount;return{itemTypeId:t.id,amount:n}})))}catch(e){rn.error(e)}},this.initialize()}return Object(p.a)(e,[{key:"huntable_item_types",get:function(){var e=$t.current.value;return ut.current.value.item_types.filter(function(t){return e.enemy_drops.get_drops_for_item_type(t.id).length})}}]),Object(p.a)(e,[{key:"full_method_name",value:function(e,t,n,r){var a="".concat(e,"\t").concat(t,"\t").concat(n.id);return r&&(a+="\tspa"),a}}]),e}(),Object(b.a)(Lt.prototype,"huntable_item_types",[y.f],Object.getOwnPropertyDescriptor(Lt.prototype,"huntable_item_types"),Lt.prototype),Bt=Object(b.a)(Lt.prototype,"wanted_items",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.m.array()}}),Mt=Object(b.a)(Lt.prototype,"result",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt),un=(n(371),Object(f.a)(tn=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).state={help_visible:!1},n.add_wanted=function(e){if(e&&!ln.wanted_items.find(function(t){return t.item_type.id===e.value})){var t=ut.current.value.get_by_id(e.value);ln.wanted_items.push(new an(t,1))}},n.remove_wanted=function(e){return function(){var t=ln.wanted_items.findIndex(function(t){return t===e});-1!==t&&ln.wanted_items.splice(t,1)}},n.table_remove_cell_renderer=function(e){var t=e.rowData;return a.a.createElement(Vt.a,{type:"link",icon:"delete",onClick:n.remove_wanted(t)})},n.no_rows_renderer=function(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-no-rows"},a.a.createElement("p",null,'Add some items with the above drop down and click "Optimize" to see the result on the right.'))},n.on_help_visible_change=function(e){n.setState({helpVisible:e})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return ln.wanted_items.slice(0,0),a.a.createElement("section",{className:"ho-WantedItemsComponent"},a.a.createElement("h3",null,"Wanted Items",a.a.createElement(qt.a,{content:a.a.createElement(cn,null),trigger:"click",visible:this.state.help_visible,onVisibleChange:this.on_help_visible_change},a.a.createElement(Vt.a,{icon:"info-circle",type:"link"}))),a.a.createElement("div",{className:"ho-WantedItemsComponent-top-bar"},a.a.createElement(_t,{placeholder:"Add an item",value:void 0,style:{width:200},options:ln.huntable_item_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_wanted}),a.a.createElement(Vt.a,{onClick:ln.optimize,style:{marginLeft:10}},"Optimize")),a.a.createElement("div",{className:"ho-WantedItemsComponent-table"},a.a.createElement(Tt.a,null,function(t){var n=t.width,r=t.height;return a.a.createElement(Tt.e,{width:n,height:r,headerHeight:30,rowHeight:30,rowCount:ln.wanted_items.length,rowGetter:function(e){var t=e.index;return ln.wanted_items[t]},noRowsRenderer:e.no_rows_renderer},a.a.createElement(Tt.b,{label:"Amount",dataKey:"amount",width:70,cellRenderer:function(e){var t=e.rowData;return a.a.createElement(dn,{wantedItem:t})}}),a.a.createElement(Tt.b,{label:"Item",dataKey:"item",width:150,flexGrow:1,cellDataGetter:function(e){return e.rowData.item_type.name}}),a.a.createElement(Tt.b,{dataKey:"remove",width:30,cellRenderer:e.table_remove_cell_renderer}))})))}}]),t}(r.Component))||tn);function cn(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-help"},a.a.createElement("p",null,'Add some items with the drop down and click "Optimize" to see the optimal combination of hunt methods on the right.'),a.a.createElement("p",null,'At the moment a method is simply a quest run-through. Partial quest run-throughs are coming. View the list of methods on the "Methods" tab. Each method takes a certain amount of time, which affects the optimization result. Make sure the times are correct for you.'),a.a.createElement("p",null,"Only enemy drops are considered. Box drops are coming."),a.a.createElement("p",null,"The optimal result is calculated using linear optimization. The optimizer takes rare enemies and the fact that pan arms can be split in two into account."))}var dn=Object(f.a)(nn=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).wanted_amount_changed=function(e){null!=e&&e>=0&&(n.props.wantedItem.amount=e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.wantedItem;return a.a.createElement(Te.a,{min:0,max:10,value:e.amount,onChange:this.wanted_amount_changed,size:"small",style:{width:"100%"}})}}]),t}(r.Component))||nn;function pn(e){var t=e.section_id,n=e.size,r=void 0===n?28:n,i=e.title;return a.a.createElement("div",{title:i,style:{display:"inline-block",width:r,height:r,backgroundImage:"url(".concat("","/images/sectionids/").concat(me[t],".png)"),backgroundSize:r}})}n(372);var hn,_n,mn=Object(f.a)((_n=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return ln.result.optimal_methods[t]},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;this.update_trigger;var t=ln.result;return a.a.createElement("section",{className:"ho-OptimizationResultComponent"},a.a.createElement("h3",null,"Optimization Result"),a.a.createElement("div",{className:"ho-OptimizationResultComponent-table"},a.a.createElement(Tt.a,null,function(n){var r=n.width,i=n.height;return a.a.createElement(Ut,{width:r,height:i,row_count:t?t.optimal_methods.length:0,columns:e.columns,fixed_column_count:4,record:e.record,footer:null!=t,update_trigger:e.update_trigger})})))}},{key:"columns",get:function(){var e=ln.result,t=e?e.optimal_methods:[],n=0,r=0,i=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n+=c.runs,r+=c.total_time}}catch(w){o=!0,s=w}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=[{name:"Difficulty",width:75,cell_renderer:function(e){return ve[e.difficulty]},footer_value:"Totals:"},{name:"Method",width:200,cell_renderer:function(e){return e.method_name},tooltip:function(e){return e.method_name}},{name:"Ep.",width:34,cell_renderer:function(e){return _e[e.method_episode]}},{name:"Section ID",width:80,cell_renderer:function(e){return a.a.createElement("div",{className:"ho-OptimizationResultComponent-sid-col"},e.section_ids.map(function(e){return a.a.createElement(pn,{section_id:e,key:e,size:20})}))},tooltip:function(e){return e.section_ids.map(function(e){return me[e]}).join(", ")}},{name:"Time/Run",width:80,cell_renderer:function(e){return function(e){var t=Math.floor(e),n=Math.round(60*(e-t));return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}(e.method_time)},class_name:"number"},{name:"Runs",width:60,cell_renderer:function(e){return e.runs.toFixed(1)},tooltip:function(e){return e.runs.toString()},footer_value:n.toFixed(1),footer_tooltip:n.toString(),class_name:"number"},{name:"Total Hours",width:90,cell_renderer:function(e){return e.total_time.toFixed(1)},tooltip:function(e){return e.total_time.toString()},footer_value:r.toFixed(1),footer_tooltip:r.toString(),class_name:"number"}];if(e){var p=!0,h=!1,_=void 0;try{for(var m,f=function(){var e=m.value,n=0,r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){n+=o.value.item_counts.get(e)||0}}catch(w){a=!0,i=w}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}d.push({name:e.name,width:80,cell_renderer:function(t){var n=t.item_counts.get(e);return n?n.toFixed(2):""},tooltip:function(t){var n=t.item_counts.get(e);return n?n.toString():""},class_name:"number",footer_value:n.toFixed(2),footer_tooltip:n.toString()})},v=e.wanted_items[Symbol.iterator]();!(p=(m=v.next()).done);p=!0)f()}catch(w){h=!0,_=w}finally{try{p||null==v.return||v.return()}finally{if(h)throw _}}}return d}},{key:"update_trigger",get:function(){return ln.result}}]),t}(r.Component),Object(b.a)(_n.prototype,"columns",[y.f],Object.getOwnPropertyDescriptor(_n.prototype,"columns"),_n.prototype),Object(b.a)(_n.prototype,"update_trigger",[y.f],Object.getOwnPropertyDescriptor(_n.prototype,"update_trigger"),_n.prototype),hn=_n))||hn;n(373);function fn(){return a.a.createElement("section",{className:"ho-OptimizerComponent"},a.a.createElement(un,null),a.a.createElement(mn,null))}var vn=Ft.a.TabPane;n(380);var wn,bn=n(237),yn=(n(382),n(166)),kn=(n(385),n(238)),gn=(n(387),n(16)),Rn=(n(161),n(92));!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(wn||(wn={}));var On=n(81),jn=new On.TextDecoder("ascii"),Sn=new On.TextDecoder("utf-16be"),xn=new On.TextDecoder("utf-16le"),Dn=new On.TextEncoder("ascii"),Cn=new On.TextEncoder("utf-16be"),En=new On.TextEncoder("utf-16le"),Ln=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;Object(d.a)(this,e),this._position=void 0,this.little_endian=void 0,this.buffer=void 0,this.dv=void 0,this.utf16_decoder=Sn,this.utf16_encoder=Cn,this.buffer=t,this.dv=new DataView(t,r,a),this.endianness=n,this._position=0}return Object(p.a)(e,[{key:"offset",get:function(){return this.dv.byteOffset}},{key:"size",get:function(){return this.dv.byteLength},set:function(e){this.dv=new DataView(this.buffer,this.offset,e)}},{key:"position",get:function(){return this._position}},{key:"endianness",get:function(){return this.little_endian?wn.Little:wn.Big},set:function(e){this.little_endian=e===wn.Little,this.utf16_decoder=this.little_endian?xn:Sn,this.utf16_encoder=this.little_endian?En:Cn}},{key:"bytes_left",get:function(){return this.size-this.position}}]),Object(p.a)(e,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=this.size-e,this}},{key:"u8",value:function(){return this.u8_at(this._position++)}},{key:"u8_at",value:function(e){return this.dv.getUint8(e)}},{key:"u16",value:function(){var e=this.u16_at(this.position);return this._position+=2,e}},{key:"u16_at",value:function(e){return this.dv.getUint16(e,this.little_endian)}},{key:"u32",value:function(){var e=this.u32_at(this.position);return this._position+=4,e}},{key:"u32_at",value:function(e){return this.dv.getUint32(e,this.little_endian)}},{key:"i8",value:function(){return this.i8_at(this._position++)}},{key:"i8_at",value:function(e){return this.dv.getInt8(e)}},{key:"i16",value:function(){var e=this.i16_at(this.position);return this._position+=2,e}},{key:"i16_at",value:function(e){return this.dv.getInt16(e,this.little_endian)}},{key:"i32",value:function(){var e=this.i32_at(this.position);return this._position+=4,e}},{key:"i32_at",value:function(e){return this.dv.getInt32(e,this.little_endian)}},{key:"f32",value:function(){var e=this.f32_at(this.position);return this._position+=4,e}},{key:"f32_at",value:function(e){return this.dv.getFloat32(e,this.little_endian)}},{key:"u8_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint8(this._position++));return t}},{key:"u16_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint16(this.position,this.little_endian)),this._position+=2;return t}},{key:"u32_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint32(this.position,this.little_endian)),this._position+=4;return t}},{key:"vec2_f32",value:function(){return new k(this.f32(),this.f32())}},{key:"vec3_f32",value:function(){return new g(this.f32(),this.f32(),this.f32())}},{key:"take",value:function(t){var n=this.offset+this.position,r=new e(this.buffer,this.endianness,n,t);return this._position+=t,r}},{key:"string_ascii",value:function(e,t,n){var r=t?this.index_of_u8(0,e)-this.position:e,a=new DataView(this.buffer,this.offset+this.position,r),i=jn.decode(a);return this._position+=n?e:Math.min(r+1,e),i}},{key:"string_utf16",value:function(e,t,n){var r=t?this.index_of_u16(0,e)-this.position:2*Math.floor(e/2),a=new DataView(this.buffer,this.offset+this.position,r),i=this.utf16_decoder.decode(a);return this._position+=n?e:Math.min(r+2,e),i}},{key:"array_buffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size-this.position,t=this.buffer.slice(this.offset+this.position,this.offset+this.position+e);return this._position+=e,t}},{key:"copy_to_uint8_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size-this.position;return e.set(new Uint8Array(this.buffer,this.offset+this.position,t)),this._position+=t,this}},{key:"index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this.dv.getUint8(r)===e)return r;return this.position+t}},{key:"index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this.dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}}]),e}();function Bn(e,t){e.seek_end(32);var n=e.u32(),r=e.u32();e.seek(8);var a=e.u32();return e.seek_start(n),{data_offset:a,index:t?function(e,t){var n=e.u16_array(t),r=[],a=0,i=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;a+=4*c,e.seek_start(a-4);var d=e.u32(),p=e.u32();r.push({offset:p,size:d})}}catch(h){o=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r}(e,r):[]}}function Mn(e){var t=Bn(e,!1).data_offset;e.seek_start(t);var n=e.u32();e.seek_start(n);for(var r={meshes:[]};e.bytes_left;){var a=e.position,i=e.u32();if(0===i)break;var o={vertices:[],triangles:[]};r.meshes.push(o),e.seek_start(i);var s=e.u32(),l=e.u32(),u=e.u32(),c=e.u32();e.seek_start(l);for(var d=0;d<s;d++){var p=e.f32(),h=e.f32(),_=e.f32();o.vertices.push(new g(p,h,_))}e.seek_start(c);for(var m=0;m<u;m++){var f=e.u16(),v=e.u16(),w=e.u16(),b=e.u16(),y=e.f32(),k=e.f32(),R=e.f32();e.seek(16),o.triangles.push({indices:[f,v,w],flags:b,normal:new g(y,k,R)})}e.seek_start(a+24)}return r}function Fn(e){for(var t=[];e.bytes_left;){var n=e.u32(),r=e.u32();if(r>e.bytes_left)break;t.push({type:n,data:e.take(r)})}return t}var In,zn=n(242),Pn=l.a.get("data_formats/parsing/ninja/njcm");function Tn(e,t){var n=e.u32(),r=e.u32(),a=e.vec3_f32(),i=e.f32(),o=[],s=[];if(n){e.seek_start(n);var l=!0,u=!1,c=void 0;try{for(var d,p=Gn(e,t,!0)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value;if(h.type===In.Vertex){var _=!0,m=!1,f=void 0;try{for(var v,w=h.vertices[Symbol.iterator]();!(_=(v=w.next()).done);_=!0){var b=v.value;o[b.index]={position:b.position,normal:b.normal,bone_weight:b.bone_weight,bone_weight_status:b.bone_weight_status,calc_continue:b.calc_continue}}}catch(B){m=!0,f=B}finally{try{_||null==w.return||w.return()}finally{if(m)throw f}}}}}catch(B){u=!0,c=B}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}if(r){var y;e.seek_start(r);var k=!0,g=!1,R=void 0;try{for(var O,j=Gn(e,t,!1)[Symbol.iterator]();!(k=(O=j.next()).done);k=!0){var S=O.value;if(S.type===In.Tiny)y=S.texture_id;else if(S.type===In.Strip){var x=!0,D=!1,C=void 0;try{for(var E,L=S.triangle_strips[Symbol.iterator]();!(x=(E=L.next()).done);x=!0){E.value.texture_id=y}}catch(B){D=!0,C=B}finally{try{x||null==L.return||L.return()}finally{if(D)throw C}}s.push.apply(s,Object(Zt.a)(S.triangle_strips))}}}catch(B){g=!0,R=B}finally{try{k||null==j.return||j.return()}finally{if(g)throw R}}}return{type:"njcm",vertices:o,meshes:s,collision_sphere_center:a,collision_sphere_radius:i}}function Gn(e,t,n){for(var r=[],a=!0;a;){var i=e.u8(),o=e.u8(),s=e.position,l=0;if(0===i)r.push({type:In.Null,type_id:i});else if(1<=i&&i<=3)r.push({type:In.Bits,type_id:i});else if(4===i){var u=o,c=e.position;r.push({type:In.CachePolygonList,type_id:i,cache_index:u,offset:c}),t[u]=c,a=!1}else if(5===i){var d=o,p=t[d];null!=p&&(e.seek_start(p),r.push.apply(r,Object(Zt.a)(Gn(e,t,n)))),r.push({type:In.DrawPolygonList,type_id:i,cache_index:d})}else if(8<=i&&i<=9){l=2;var h=e.u16();r.push({type:In.Tiny,type_id:i,flip_u:0!==(128&i),flip_v:0!==(64&i),clamp_u:0!==(32&i),clamp_v:0!==(16&i),mipmap_d_adjust:15&i,filter_mode:h>>>14,super_sample:0!==(64&h),texture_id:8191&h})}else 17<=i&&i<=31?(l=2+2*e.u16(),r.push({type:In.Material,type_id:i})):32<=i&&i<=50?(l=2+4*e.u16(),r.push({type:In.Vertex,type_id:i,vertices:An(e,i,o)})):56<=i&&i<=58?(l=2+2*e.u16(),r.push({type:In.Volume,type_id:i})):64<=i&&i<=75?(l=2+2*e.u16(),r.push({type:In.Strip,type_id:i,triangle_strips:Wn(e,i,o)})):255===i?(l=n?2:0,r.push({type:In.End,type_id:i}),a=!1):(l=2+2*e.u16(),r.push({type:In.Unknown,type_id:i}),Pn.warn("Unknown chunk type ".concat(i," at offset ").concat(s,".")));e.seek_start(s+l)}return r}function An(e,t,n){if(t<32||t>50)return Pn.warn("Unknown vertex chunk type ".concat(t,".")),[];for(var r=3&n,a=0!==(128&n),i=e.u16(),o=e.u16(),s=[],l=0;l<o;++l){var u={index:i+l,position:e.vec3_f32(),bone_weight:1,bone_weight_status:r,calc_continue:a};if(32===t)e.seek(4);else if(33===t)e.seek(4),u.normal=e.vec3_f32(),e.seek(4);else if(35<=t&&t<=40)37===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4);else if(41<=t&&t<=47)u.normal=e.vec3_f32(),t>=42&&(44===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4));else if(48<=t&&t<=50){var c=e.u32();u.normal=new g((c>>20&1023)/1023,(c>>10&1023)/1023,(1023&c)/1023),t>=49&&e.seek(4)}s.push(u)}return s}function Wn(e,t,n){var r={ignore_light:0!==(1&n),ignore_specular:0!==(2&n),ignore_ambient:0!==(4&n),use_alpha:0!==(8&n),double_side:0!==(16&n),flat_shading:0!==(32&n),environment_mapping:0!==(64&n)},a=e.u16(),i=a>>>14,o=16383&a,s=!1,l=!1,u=!1,c=!1;switch(t){case 64:break;case 65:case 66:s=!0;break;case 67:u=!0;break;case 68:case 69:s=!0,u=!0;break;case 70:l=!0;break;case 71:case 72:s=!0,l=!0;break;case 73:break;case 74:case 75:c=!0;break;default:throw new Error("Unexpected chunk type ID: ".concat(t,"."))}for(var d=[],p=0;p<o;++p){for(var h=e.i16(),_=h<1,m=Math.abs(h),f=[],v=0;v<m;++v){var w={index:e.u16()};f.push(w),s&&(w.tex_coords=new k(e.u16()/255,e.u16()/255)),l&&e.seek(4),u&&(w.normal=new g(e.u16()/255,e.u16()/255,e.u16()/255)),c&&e.seek(8),v>=2&&e.seek(2*i)}d.push(Object(zn.a)({},r,{clockwise_winding:_,has_tex_coords:s,has_normal:u,vertices:f}))}return d}!function(e){e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Bits=2]="Bits",e[e.CachePolygonList=3]="CachePolygonList",e[e.DrawPolygonList=4]="DrawPolygonList",e[e.Tiny=5]="Tiny",e[e.Material=6]="Material",e[e.Vertex=7]="Vertex",e[e.Volume=8]="Volume",e[e.Strip=9]="Strip",e[e.End=10]="End"}(In||(In={}));var Un=l.a.get("data_formats/parsing/ninja/xj");function Nn(e){var t,n;e.seek(4);var r,a=e.u32(),i=e.u32(),o=e.u32(),s=e.u32(),l=e.u32(),u=e.u32(),c={type:"xj",vertices:[],meshes:[],collision_sphere_position:e.vec3_f32(),collision_sphere_radius:e.f32()};i>=1&&(i>1&&Un.warn("Vertex info count of ".concat(i," was larger than expected.")),(r=c.vertices).push.apply(r,Object(Zt.a)(function(e,t){e.seek_start(t);var n=e.u16();e.seek(2);for(var r=e.u32(),a=e.u32(),i=e.u32(),o=[],s=0;s<i;++s){e.seek_start(r+s*a);var l=e.vec3_f32(),u=void 0,c=void 0;switch(n){case 3:u=e.vec3_f32(),c=e.vec2_f32();break;case 4:break;case 5:e.seek(4),c=e.vec2_f32();break;case 6:u=e.vec3_f32();break;case 7:u=e.vec3_f32(),c=e.vec2_f32();break;default:Un.warn("Unknown vertex type ".concat(n," with size ").concat(a,"."))}o.push({position:l,normal:u,uv:c})}return o}(e,a))));return(t=c.meshes).push.apply(t,Object(Zt.a)(Hn(e,o,s))),(n=c.meshes).push.apply(n,Object(Zt.a)(Hn(e,l,u))),c}function Hn(e,t,n){for(var r=[],a=0;a<n;++a){e.seek_start(t+20*a);var i=e.u32(),o=e.u32(),s=e.u32(),l=e.u32(),u=qn(e,i,o);e.seek_start(s);var c=e.u16_array(l);r.push({material_properties:u,indices:c})}return r}function qn(e,t,n){for(var r={},a=0;a<n;++a){switch(e.seek_start(t+16*a),e.u32()){case 2:r.alpha_src=e.u32(),r.alpha_dst=e.u32();break;case 3:r.texture_id=e.u32();break;case 5:r.diffuse_r=e.u8(),r.diffuse_g=e.u8(),r.diffuse_b=e.u8(),r.diffuse_a=e.u8()}}return r}var Vn=2*Math.PI/65535,Zn=1296255566;var Yn=function(){function e(t,n,r,a,i,o){Object(d.a)(this,e),this.evaluation_flags=void 0,this.model=void 0,this.position=void 0,this.rotation=void 0,this.scale=void 0,this.children=void 0,this.bone_cache=new Map,this._bone_count=-1,this.evaluation_flags=t,this.model=n,this.position=r,this.rotation=a,this.scale=i,this.children=o}return Object(p.a)(e,[{key:"bone_count",value:function(){if(-1===this._bone_count){var e=[0];this.get_bone_internal(this,1/0,e),this._bone_count=e[0]}return this._bone_count}},{key:"get_bone",value:function(e){var t=this.bone_cache.get(e);return void 0===t&&(t=this.get_bone_internal(this,e,[0]),this.bone_cache.set(e,t||null)),t||void 0}},{key:"get_bone_internal",value:function(e,t,n){if(!e.evaluation_flags.skip){var r=n[0]++;if(this.bone_cache.set(r,e),r===t)return e}if(!e.evaluation_flags.break_child_trace){var a=!0,i=!1,o=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=this.get_bone_internal(u,t,n);if(c)return c}}catch(d){i=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}}}}]),e}();function Kn(e){return Jn(e,Tn,[])}function Qn(e){return Jn(e,Nn,void 0)}function Xn(e){return $n(e,Nn,void 0)}function Jn(e,t,n){return Fn(e).filter(function(e){return e.type===Zn}).flatMap(function(e){return $n(e.data,t,n)})}function $n(e,t,n){var r,a,i,o=e.u32(),s=0!==(1&o),l=0!==(2&o),u=0!==(4&o),c=0!==(8&o),d=0!==(16&o),p=0!==(32&o),h=0!==(64&o),_=0!==(128&o),m=e.u32(),f=e.f32(),v=e.f32(),w=e.f32(),b=e.i32()*Vn,y=e.i32()*Vn,k=e.i32()*Vn,R=e.f32(),O=e.f32(),j=e.f32(),S=e.u32(),x=e.u32();return m&&(e.seek_start(m),r=t(e,n)),S?(e.seek_start(S),a=$n(e,t,n)):a=[],x?(e.seek_start(x),i=$n(e,t,n)):i=[],[new Yn({no_translate:s,no_rotate:l,no_scale:u,hidden:c,break_child_trace:d,zxy_rotation_order:p,skip:h,shape_skip:_},r,new g(f,v,w),new g(b,y,k),new g(R,O,j),a)].concat(Object(Zt.a)(i))}function er(e,t,n){for(var r=[],a=0;a<n;a++){e.seek_start(t+16*a);var i=e.u32();e.seek(8),4&e.u32()&&(i=e.seek_start(i).u32()),e.seek_start(i),r.push.apply(r,Object(Zt.a)(Xn(e)))}return r}var tr=n(5),nr=function(){function e(){Object(d.a)(this,e),this.positions=[],this.normals=[],this.uvs=[],this.indices=[],this.bones=[],this.bone_indices=[],this.bone_weights=[],this.groups=[],this.material_indices=new Set([-1])}return Object(p.a)(e,[{key:"get_position",value:function(e){return new tr.Vector3(this.positions[3*e],this.positions[3*e+1],this.positions[3*e+2])}},{key:"get_normal",value:function(e){return new tr.Vector3(this.normals[3*e],this.normals[3*e+1],this.normals[3*e+2])}},{key:"add_vertex",value:function(e,t,n){this.positions.push(e.x,e.y,e.z),this.normals.push(t.x,t.y,t.z),this.uvs.push(n.x,n.y)}},{key:"add_index",value:function(e){this.indices.push(e)}},{key:"add_bone",value:function(e){this.bones.push(e)}},{key:"add_bone_weight",value:function(e,t){this.bone_indices.push(e),this.bone_weights.push(t)}},{key:"add_group",value:function(e,t,n){var r=this.groups[this.groups.length-1],a=null==n?-1:n;r&&r.material_index===a?r.size+=t:(this.groups.push({offset:e,size:t,material_index:a}),this.material_indices.add(a))}},{key:"build",value:function(){var e=new tr.BufferGeometry,t=e.userData;t.created_by_geometry_builder=!0,e.addAttribute("position",new tr.Float32BufferAttribute(this.positions,3)),e.addAttribute("normal",new tr.Float32BufferAttribute(this.normals,3)),e.addAttribute("uv",new tr.Float32BufferAttribute(this.uvs,2)),e.setIndex(new tr.Uint16BufferAttribute(this.indices,1)),this.bone_indices.length&&this.bones.length?(e.addAttribute("skinIndex",new tr.Uint16BufferAttribute(this.bone_indices,4)),e.addAttribute("skinWeight",new tr.Float32BufferAttribute(this.bone_weights,4)),t.bones=this.bones):t.bones=[];var n=new Map,r=0,a=!0,i=!1,o=void 0;try{for(var s,l=Object(Zt.a)(this.material_indices).sort(function(e,t){return e-t})[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n.set(u,r++)}}catch(f){i=!0,o=f}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}var c=!0,d=!1,p=void 0;try{for(var h,_=this.groups[Symbol.iterator]();!(c=(h=_.next()).done);c=!0){var m=h.value;e.addGroup(m.offset,m.size,n.get(m.material_index))}}catch(f){d=!0,p=f}finally{try{c||null==_.return||_.return()}finally{if(d)throw p}}return t.normalized_material_indices=n,e.computeBoundingSphere(),e.computeBoundingBox(),e}},{key:"vertex_count",get:function(){return this.positions.length/3}},{key:"index_count",get:function(){return this.indices.length}}]),e}();function rr(e){return new tr.Vector3(e.x,e.y,e.z)}var ar=new tr.Vector3(0,1,0),ir=new tr.Vector2(0,0),or=new tr.Vector3(0,0,0),sr=new tr.Quaternion(0,0,0,1),lr=new tr.Vector3(1,1,1);function ur(e,t){new pr(t).to_geometry_builder(e)}function cr(e){return new pr(new nr).create_buffer_geometry(e)}var dr=function(){function e(){Object(d.a)(this,e),this.vertices_stack=[]}return Object(p.a)(e,[{key:"put",value:function(e){this.vertices_stack.push(e)}},{key:"get",value:function(e){for(var t=[],n=this.vertices_stack.length-1;n>=0;n--){var r=this.vertices_stack[n][e];r&&t.push(r)}return t}}]),e}(),pr=function(){function e(t){Object(d.a)(this,e),this.vertices=new dr,this.bone_id=0,this.builder=void 0,this.builder=t}return Object(p.a)(e,[{key:"to_geometry_builder",value:function(e){this.object_to_geometry(e,void 0,new tr.Matrix4)}},{key:"create_buffer_geometry",value:function(e){return this.to_geometry_builder(e),this.builder.build()}},{key:"object_to_geometry",value:function(e,t,n){var r,a=e.evaluation_flags,i=a.no_translate,o=a.no_rotate,s=a.no_scale,l=a.hidden,u=a.break_child_trace,c=a.zxy_rotation_order,d=a.skip,p=e.position,h=e.rotation,_=e.scale,m=new tr.Euler(h.x,h.y,h.z,c?"ZXY":"ZYX"),f=(new tr.Matrix4).compose(i?or:rr(p),o?sr:(new tr.Quaternion).setFromEuler(m),s?lr:rr(_)).premultiply(n);if(d?r=t:((r=new tr.Bone).name=this.bone_id.toString(),r.position.set(p.x,p.y,p.z),r.setRotationFromEuler(m),r.scale.set(_.x,_.y,_.z),this.builder.add_bone(r),t&&t.add(r)),e.model&&!l&&this.model_to_geometry(e.model,f),this.bone_id++,!u){var v=!0,w=!1,b=void 0;try{for(var y,k=e.children[Symbol.iterator]();!(v=(y=k.next()).done);v=!0){var g=y.value;this.object_to_geometry(g,r,f)}}catch(R){w=!0,b=R}finally{try{v||null==k.return||k.return()}finally{if(w)throw b}}}}},{key:"model_to_geometry",value:function(e,t){!function(e){return"njcm"===e.type}(e)?this.xj_model_to_geometry(e,t):this.njcm_model_to_geometry(e,t)}},{key:"njcm_model_to_geometry",value:function(e,t){var n=this,r=(new tr.Matrix3).getNormalMatrix(t),a=e.vertices.map(function(e){var a=rr(e.position),i=e.normal?rr(e.normal):new tr.Vector3(0,1,0);return a.applyMatrix4(t),i.applyMatrix3(r),{bone_id:n.bone_id,position:a,normal:i,bone_weight:e.bone_weight,bone_weight_status:e.bone_weight_status,calc_continue:e.calc_continue}});this.vertices.put(a);var i=!0,o=!1,s=void 0;try{for(var l,u=e.meshes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){for(var c=l.value,d=this.builder.index_count,p=0;p<c.vertices.length;++p){var h=c.vertices[p],_=this.vertices.get(h.index);if(_.length){var m=_[0],f=m.normal||h.normal||ar,v=this.builder.vertex_count;this.builder.add_vertex(m.position,f,c.has_tex_coords?h.tex_coords:ir),p>=2&&(p%2===(c.clockwise_winding?1:0)?(this.builder.add_index(v-2),this.builder.add_index(v-1),this.builder.add_index(v)):(this.builder.add_index(v-2),this.builder.add_index(v),this.builder.add_index(v-1)));for(var w=[[0,0],[0,0],[0,0],[0,0]],b=_.length-1;b>=0;b--){var y=_[b];w[y.bone_weight_status]=[y.bone_id,y.bone_weight]}for(var k=0,g=w;k<g.length;k++){var R=g[k],O=Object(Gt.a)(R,2),j=O[0],S=O[1];this.builder.add_bone_weight(j,S)}}}this.builder.add_group(d,this.builder.index_count-d,c.texture_id)}}catch(x){o=!0,s=x}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}},{key:"xj_model_to_geometry",value:function(e,t){var n,r=this.builder.vertex_count,a=(new tr.Matrix3).getNormalMatrix(t),i=!0,o=!1,s=void 0;try{for(var l,u=e.vertices[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=c.position,p=c.normal,h=c.uv,_=rr(d).applyMatrix4(t),m=(p?rr(p):new tr.Vector3(0,1,0)).applyMatrix3(a),f=h||ir;this.builder.add_vertex(_,m,f)}}catch(z){o=!0,s=z}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var v=!0,w=!1,b=void 0;try{for(var y,k=e.meshes[Symbol.iterator]();!(v=(y=k.next()).done);v=!0){for(var g=y.value,R=this.builder.index_count,O=!1,j=2;j<g.indices.length;++j){var S=r+g.indices[j-2],x=r+g.indices[j-1],D=r+g.indices[j],C=this.builder.get_position(S),E=this.builder.get_position(x),L=this.builder.get_position(D),B=this.builder.get_normal(S),M=this.builder.get_normal(x),F=this.builder.get_normal(D),I=E.clone().sub(C).cross(L.clone().sub(C));O&&I.negate(),(I.dot(B)<0?1:0)+(I.dot(M)<0?1:0)+(I.dot(F)<0?1:0)>=2&&(O=!O),O?(this.builder.add_index(x),this.builder.add_index(S),this.builder.add_index(D)):(this.builder.add_index(S),this.builder.add_index(x),this.builder.add_index(D)),O=!O}null!=g.material_properties.texture_id&&(n=g.material_properties.texture_id),this.builder.add_group(R,this.builder.index_count-R,n)}}catch(z){w=!0,b=z}finally{try{v||null==k.return||k.return()}finally{if(w)throw b}}}}]),e}(),hr=[new tr.MeshBasicMaterial({color:8437968,transparent:!0,opacity:.25,visible:!1}),new tr.MeshLambertMaterial({color:10526880,side:tr.DoubleSide}),new tr.MeshLambertMaterial({color:5288048,side:tr.DoubleSide}),new tr.MeshLambertMaterial({color:6307968,side:tr.DoubleSide})],_r=[new tr.MeshBasicMaterial({color:9490656,wireframe:!0,transparent:!0,opacity:.3,visible:!1}),new tr.MeshBasicMaterial({color:13684944,wireframe:!0}),new tr.MeshBasicMaterial({color:8446112,wireframe:!0}),new tr.MeshBasicMaterial({color:9466032,wireframe:!0})];function mr(e){var t=new tr.Group,n=!0,r=!1,a=void 0;try{for(var i,o=e.meshes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=new tr.Geometry,u=!0,c=!1,d=void 0;try{for(var p,h=s.vertices[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value,m=_.x,f=_.y,v=_.z;l.vertices.push(new tr.Vector3(m,f,v))}}catch(E){c=!0,d=E}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}var w=!0,b=!1,y=void 0;try{for(var k,g=s.triangles[Symbol.iterator]();!(w=(k=g.next()).done);w=!0){var R=k.value,O=R.indices,j=R.flags,S=R.normal,x=64&j?3:16&j?2:1&j?1:0;l.faces.push(new tr.Face3(O[0],O[1],O[2],new tr.Vector3(S.x,S.y,S.z),void 0,x))}}catch(E){b=!0,y=E}finally{try{w||null==g.return||g.return()}finally{if(b)throw y}}l.computeBoundingBox(),l.computeBoundingSphere();var D=new tr.Mesh(l,hr);D.renderOrder=1,t.add(D);var C=new tr.Mesh(l,_r);C.renderOrder=2,t.add(C)}}catch(E){r=!0,a=E}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t}function fr(e){return vr.apply(this,arguments)}function vr(){return(vr=Object(We.a)(Ae.a.mark(function e(t){var n;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,fetch(""+t);case 3:return n=e.sent,e.abrupt("return",n.arrayBuffer());case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var wr=function(){function e(){Object(d.a)(this,e),this.map=new Map}return Object(p.a)(e,[{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"get_or_set",value:function(e,t){var n=this.map.get(e);return void 0===n&&(n=t(),this.map.set(e,n)),n}}]),e}(),br=new wr,yr=new wr;function kr(){return(kr=Object(We.a)(Ae.a.mark(function e(t,n,r){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br.get_or_set("".concat(t,"-").concat(n,"-").concat(r),function(){return Sr(t,n,r)}).sections);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gr(e,t,n){return Rr.apply(this,arguments)}function Rr(){return(Rr=Object(We.a)(Ae.a.mark(function e(t,n,r){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",br.get_or_set("".concat(t,"-").concat(n,"-").concat(r),function(){return Sr(t,n,r)}).geometry);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Or(e,t,n){return jr.apply(this,arguments)}function jr(){return(jr=Object(We.a)(Ae.a.mark(function e(t,n,r){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yr.get_or_set("".concat(t,"-").concat(n,"-").concat(r),function(){return Dr(t,n,r,"collision").then(function(e){return mr(Mn(new Ln(e,wn.Little)))})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Sr(e,t,n){var r=Dr(e,t,n,"render").then(function(e){return function(e){var t=[],n=new tr.Group,r=0,a=!0,i=!1,o=void 0;try{for(var s,l=e.sections[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=new nr,d=!0,p=!1,h=void 0;try{for(var _,m=u.objects[Symbol.iterator]();!(d=(_=m.next()).done);d=!0)ur(_.value,c)}catch(w){p=!0,h=w}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var f=new tr.Mesh(c.build(),new tr.MeshBasicMaterial({color:(new tr.Color).setHSL(r++%7/7,1,.5),transparent:!0,opacity:.25,side:tr.DoubleSide}));if(n.add(f),f.position.set(u.position.x,u.position.y,u.position.z),f.rotation.set(u.rotation.x,u.rotation.y,u.rotation.z),u.id>=0){var v=new Se(u.id,u.position,u.rotation.y);t.push(v),f.userData.section=v}}}catch(w){i=!0,o=w}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return[t,n]}(function(e){var t=[];e.seek_end(16);var n=Bn(e,!1).data_offset;e.seek_start(n),e.seek(8);var r=e.u32();e.seek(4);for(var a=e.u32(),i=0;i<r;i++){e.seek_start(a+52*i);var o=e.i32(),s=e.vec3_f32(),l=new g(e.u32()*Vn,e.u32()*Vn,e.u32()*Vn);e.seek(4);var u=e.u32();e.seek(4);var c=e.u32(),d=er(e,u,c);t.push({id:o,position:s,rotation:l,objects:d})}return{sections:t}}(new Ln(e,wn.Little)))});return{geometry:r.then(function(e){return Object(Gt.a)(e,2)[1]}),sections:r.then(function(e){return Object(Gt.a)(e,1)[0]})}}var xr=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]];function Dr(e,t,n,r){return Cr.apply(this,arguments)}function Cr(){return(Cr=Object(We.a)(Ae.a.mark(function e(t,n,r,a){var i,o;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Er(t,n,r),o="render"===a?"n.rel":"c.rel",e.abrupt("return",fr(i+o));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Er(e,t,n){var r=xr[e-1];if(0<=t&&t<r.length){var a=Object(Gt.a)(r[t],2),i=a[0],o=a[1];if(0<=n&&n<o){var s;if(1===o)s="";else for(s=String(n);s.length<2;)s="0"+s;return"/maps/map_".concat(i).concat(s)}throw new Error("Unknown variant ".concat(n," of area ").concat(t," in episode ").concat(e,"."))}throw new Error("Unknown episode ".concat(e," area ").concat(t,"."))}function Lr(e,t,n,r){var a,i=new Le(e,t,n,[]),o=Array(r).fill(null).map(function(e,t){return new Be(t,i)});return(a=i.area_variants).splice.apply(a,[0,0].concat(Object(Zt.a)(o))),i}var Br=new function e(){var t=this;Object(d.a)(this,e),this.areas=[],this.get_area=function(e,n){var r=t.areas[e].find(function(e){return e.id===n});if(!r)throw new Error("Area id ".concat(n," for episode ").concat(e," is invalid."));return r},this.get_variant=function(e,n,r){var a=t.get_area(e,n).area_variants[r];if(!a)throw new Error("Area variant id ".concat(r," for area ").concat(n," of episode ").concat(e," is invalid."));return a},this.get_area_sections=function(e,t,n){return function(e,t,n){return kr.apply(this,arguments)}(e,t,n)};var n=0;this.areas[_e.I]=[Lr(0,"Pioneer II",n++,1),Lr(1,"Forest 1",n++,1),Lr(2,"Forest 2",n++,1),Lr(11,"Under the Dome",n++,1),Lr(3,"Cave 1",n++,6),Lr(4,"Cave 2",n++,5),Lr(5,"Cave 3",n++,6),Lr(12,"Underground Channel",n++,1),Lr(6,"Mine 1",n++,6),Lr(7,"Mine 2",n++,6),Lr(13,"Monitor Room",n++,1),Lr(8,"Ruins 1",n++,5),Lr(9,"Ruins 2",n++,5),Lr(10,"Ruins 3",n++,5),Lr(14,"Dark Falz",n++,1),Lr(15,"BA Ruins",n++,3),Lr(16,"BA Spaceship",n++,3),Lr(17,"Lobby",n++,15)],n=0,this.areas[_e.II]=[Lr(0,"Lab",n++,1),Lr(1,"VR Temple Alpha",n++,3),Lr(2,"VR Temple Beta",n++,3),Lr(14,"VR Temple Final",n++,1),Lr(3,"VR Spaceship Alpha",n++,3),Lr(4,"VR Spaceship Beta",n++,3),Lr(15,"VR Spaceship Final",n++,1),Lr(5,"Central Control Area",n++,1),Lr(6,"Jungle Area East",n++,1),Lr(7,"Jungle Area North",n++,1),Lr(8,"Mountain Area",n++,3),Lr(9,"Seaside Area",n++,1),Lr(12,"Cliffs of Gal Da Val",n++,1),Lr(10,"Seabed Upper Levels",n++,3),Lr(11,"Seabed Lower Levels",n++,3),Lr(13,"Test Subject Disposal Area",n++,1),Lr(16,"Seaside Area at Night",n++,1),Lr(17,"Control Tower",n++,5)],n=0,this.areas[_e.IV]=[Lr(0,"Pioneer II (Ep. IV)",n++,1),Lr(1,"Crater Route 1",n++,1),Lr(2,"Crater Route 2",n++,1),Lr(3,"Crater Route 3",n++,1),Lr(4,"Crater Route 4",n++,1),Lr(5,"Crater Interior",n++,1),Lr(6,"Subterranean Desert 1",n++,3),Lr(7,"Subterranean Desert 2",n++,3),Lr(8,"Subterranean Desert 3",n++,3),Lr(9,"Meteor Impact Site",n++,1)]},Mr=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;if(Object(d.a)(this,e),this._offset=void 0,this._size=void 0,this._position=void 0,this.little_endian=void 0,this.buffer=void 0,this.utf16_decoder=Sn,this.utf16_encoder=Cn,r<0||r>t.size)throw new Error("Offset ".concat(r," is out of bounds."));if(a<0||r+a>t.size)throw new Error("Size ".concat(a," is out of bounds."));this.buffer=t,this.endianness=n,this._offset=r,this._size=a,this._position=0}return Object(p.a)(e,[{key:"offset",get:function(){return this._offset}},{key:"size",get:function(){return this._size}},{key:"position",get:function(){return this._position}},{key:"endianness",get:function(){return this.little_endian?wn.Little:wn.Big},set:function(e){this.little_endian=e===wn.Little,this.utf16_decoder=this.little_endian?xn:Sn,this.utf16_encoder=this.little_endian?En:Cn}},{key:"bytes_left",get:function(){return this.size-this.position}},{key:"dv",get:function(){return this.buffer.view}}]),Object(p.a)(e,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=this.size-e,this}},{key:"u8",value:function(){return this.u8_at(this._position++)}},{key:"u8_at",value:function(e){return this.check_offset(e,1),this.dv.getUint8(this.offset+e)}},{key:"u16",value:function(){var e=this.u16_at(this.position);return this._position+=2,e}},{key:"u16_at",value:function(e){return this.check_offset(e,2),this.dv.getUint16(this.offset+e,this.little_endian)}},{key:"u32",value:function(){var e=this.u32_at(this.position);return this._position+=4,e}},{key:"u32_at",value:function(e){return this.check_offset(e,4),this.dv.getUint32(this.offset+e,this.little_endian)}},{key:"i8",value:function(){return this.i8_at(this._position++)}},{key:"i8_at",value:function(e){return this.check_offset(e,1),this.dv.getInt8(this.offset+e)}},{key:"i16",value:function(){var e=this.i16_at(this.position);return this._position+=2,e}},{key:"i16_at",value:function(e){return this.check_offset(e,2),this.dv.getInt16(this.offset+e,this.little_endian)}},{key:"i32",value:function(){var e=this.i32_at(this.position);return this._position+=4,e}},{key:"i32_at",value:function(e){return this.check_offset(e,4),this.dv.getInt32(this.offset+e,this.little_endian)}},{key:"f32",value:function(){var e=this.f32_at(this.position);return this._position+=4,e}},{key:"f32_at",value:function(e){return this.check_offset(e,4),this.dv.getFloat32(this.offset+e,this.little_endian)}},{key:"u8_array",value:function(e){this.check_size("n",e,e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint8(this.offset+this._position++));return t}},{key:"u16_array",value:function(e){this.check_size("n",e,2*e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint16(this.offset+this.position,this.little_endian)),this._position+=2;return t}},{key:"u32_array",value:function(e){this.check_size("n",e,4*e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint32(this.offset+this.position,this.little_endian)),this._position+=4;return t}},{key:"vec2_f32",value:function(){return new k(this.f32(),this.f32())}},{key:"vec3_f32",value:function(){return new g(this.f32(),this.f32(),this.f32())}},{key:"take",value:function(t){this.check_size("size",t,t);var n=this.offset+this.position,r=new e(this.buffer,this.endianness,n,t);return this._position+=t,r}},{key:"string_ascii",value:function(e,t,n){this.check_size("max_byte_length",e,e);var r=t?this.index_of_u8(0,e)-this.position:e,a=this.buffer.sub_view(this.offset+this.position,r),i=jn.decode(a);return this._position+=n?e:Math.min(r+1,e),i}},{key:"string_utf16",value:function(e,t,n){this.check_size("max_byte_length",e,e);var r=t?this.index_of_u16(0,e)-this.position:2*Math.floor(e/2),a=this.buffer.sub_view(this.offset+this.position,r),i=this.utf16_decoder.decode(a);return this._position+=n?e:Math.min(r+2,e),i}},{key:"array_buffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size-this.position;this.check_size("size",e,e);var t=this.buffer.backing_buffer.slice(this.offset+this.position,this.offset+this.position+e);return this._position+=e,t}},{key:"copy_to_uint8_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size-this.position;return this.check_size("size",t,t),e.set(new Uint8Array(this.buffer.backing_buffer,this.offset+this.position,t)),this._position+=t,this}},{key:"check_size",value:function(e,t,n){if(n<0||n>this.size-this.position)throw new Error("".concat(e," ").concat(t," is out of bounds."))}},{key:"check_offset",value:function(e,t){if(e<0||e+t>this.size)throw new Error("Offset ".concat(e," is out of bounds."))}},{key:"index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this.dv.getUint8(r)===e)return r;return this.position+t}},{key:"index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this.dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}}]),e}(),Fr=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"write_u8",value:function(e){return this.ensure_size(1),this.dv.setUint8(this._position++,e),this}},{key:"write_u16",value:function(e){return this.ensure_size(2),this.dv.setUint16(this.position,e,this.little_endian),this._position+=2,this}},{key:"write_u32",value:function(e){return this.ensure_size(4),this.dv.setUint32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_i32",value:function(e){return this.ensure_size(4),this.dv.setInt32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_f32",value:function(e){return this.ensure_size(4),this.dv.setFloat32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_u8_array",value:function(e){return this.ensure_size(e.length),new Uint8Array(this.buffer.backing_buffer,this.offset+this.position).set(new Uint8Array(e)),this._position+=e.length,this}},{key:"write_cursor",value:function(e){var t=e.size-e.position;return this.ensure_size(t),e.copy_to_uint8_array(new Uint8Array(this.buffer.backing_buffer,this.offset+this.position,t),t),this._position+=t,this}},{key:"write_string_ascii",value:function(e,t){this.ensure_size(t);var n=0,r=!0,a=!1,i=void 0;try{for(var o,s=Dn.encode(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n<t&&(this.write_u8(l),++n)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(;n<t;)this.write_u8(0),++n;return this}},{key:"ensure_size",value:function(e){var t=this.position+e-this._size;t>0&&(this._size+=t,this.buffer.size<this.offset+this._size&&(this.buffer.size=this.offset+this._size))}},{key:"size",get:function(){return this._size},set:function(e){e>this._size?this.ensure_size(e-this._size):this._size=e}}]),t}(Mr),Ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192;Object(d.a)(this,e),this._size=0,this._buffer=void 0,this._data_view=void 0,this._buffer=new ArrayBuffer(t),this._data_view=new DataView(this._buffer)}return Object(p.a)(e,[{key:"size",get:function(){return this._size},set:function(e){if(e<0)throw new Error("Size should be non-negative.");this.ensure_capacity(e),this._size=e}},{key:"capacity",get:function(){return this._buffer.byteLength}},{key:"backing_buffer",get:function(){return this._buffer}},{key:"view",get:function(){return this._data_view}}]),Object(p.a)(e,[{key:"sub_view",value:function(e,t){return new DataView(this._buffer,e,t)}},{key:"ensure_capacity",value:function(e){if(e>this.capacity){var t=this.capacity||e;do{t*=2}while(t<e);var n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(this._buffer,0,this.size)),this._buffer=n,this._data_view=new DataView(this._buffer)}}}]),e}();function zr(e){var t=new Ar(e),n=new Wr;if(t.src.size<=3)for(;t.src.bytes_left;)t.set_bit(1),t.copy_literal();else{for(n.put(n.hash(t.src),0),t.src.seek(1),n.put(n.hash(t.src),1),t.src.seek(-1),t.set_bit(1),t.copy_literal(),t.set_bit(1),t.copy_literal();t.src.bytes_left>1;){var r=t.find_longest_match(n,!1),a=Object(Gt.a)(r,2),i=a[0],o=a[1];if(o>0){t.src.seek(1);var s=t.find_longest_match(n,!0),l=Object(Gt.a)(s,2),u=l[0],c=l[1];if(t.src.seek(-1),c>o){var d=!0;if(o>=2&&o<=5&&u<i&&i>=-256&&u<-256&&c-o<3&&(d=!1),d){t.set_bit(1),t.copy_literal();continue}}if(o>=2&&o<=5&&i>=-256){t.set_bit(0),t.set_bit(0),t.set_bit(o-2&2),t.set_bit(o-2&1),t.write_literal(255&i),t.add_intermediates(n,o);continue}if(o>=3&&o<=9){t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3|o-2&7),t.write_literal(i>>5),t.add_intermediates(n,o);continue}if(o>9){o>256&&(o=256),t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3),t.write_literal(i>>5),t.write_literal(o-1),t.add_intermediates(n,o);continue}}t.set_bit(1),t.copy_literal()}t.src.bytes_left&&(t.set_bit(1),t.copy_literal())}return t.write_eof(),t.dst.seek_start(0)}var Pr=8192,Tr=Pr-1,Gr=256,Ar=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.flag_offset=void 0,this.src=t,this.dst=new Fr(new Ir(t.size),t.endianness),this.flags=0,this.flag_bits_left=0,this.flag_offset=0}return Object(p.a)(e,[{key:"set_bit",value:function(e){if(!this.flag_bits_left--){var t=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(t).write_u8(0),this.flag_offset=t,this.flag_bits_left=7}this.flags>>>=1,e&&(this.flags|=128)}},{key:"copy_literal",value:function(){this.dst.write_u8(this.src.u8())}},{key:"write_literal",value:function(e){this.dst.write_u8(e)}},{key:"write_final_flags",value:function(){this.flags>>>=this.flag_bits_left;var e=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e)}},{key:"write_eof",value:function(){this.set_bit(0),this.set_bit(1),this.write_final_flags(),this.write_literal(0),this.write_literal(0)}},{key:"match_length",value:function(e){for(var t=0,n=this.src.position,r=this.src.size;n<r&&this.src.u8_at(n)===this.src.u8_at(e);)++t,++n,++e;return t}},{key:"find_longest_match",value:function(e,t){if(!this.src.bytes_left)return[0,0];var n=e.hash(this.src),r=e.get(n);if(null===r)return t||e.put(n,this.src.position),[0,0];if(this.src.position-r>Pr)return e.hash_to_offset[n]=null,t||e.put(n,this.src.position),[0,0];for(var a=0,i=0;null!=r;){var o=this.match_length(r);(o>a||o>=256)&&(a=o,i=r);var s=e.prev(r);null!==s&&this.src.position-s>Pr&&(e.set_prev(r,null),s=null),r=s}return t||e.put(n,this.src.position),[a>0?i-this.src.position:0,a]}},{key:"add_intermediates",value:function(e,t){this.src.seek(1);for(var n=1;n<t;++n){var r=e.hash(this.src);e.put(r,this.src.position),this.src.seek(1)}}}]),e}(),Wr=function(){function e(){Object(d.a)(this,e),this.hash_to_offset=new Array(Gr).fill(null),this.masked_offset_to_prev=new Array(Pr).fill(null)}return Object(p.a)(e,[{key:"hash",value:function(e){var t=e.u8();return e.bytes_left&&(t^=e.u8(),e.seek(-1)),e.seek(-1),t}},{key:"get",value:function(e){return this.hash_to_offset[e]}},{key:"put",value:function(e,t){this.set_prev(t,this.hash_to_offset[e]),this.hash_to_offset[e]=t}},{key:"prev",value:function(e){return this.masked_offset_to_prev[e&Tr]}},{key:"set_prev",value:function(e,t){this.masked_offset_to_prev[e&Tr]=t}}]),e}(),Ur=l.a.get("data_formats/compression/prs/decompress");function Nr(e){for(var t=new Hr(e);;)if(1===t.read_flag_bit())t.copy_u8();else{var n=void 0,r=void 0;if(0===t.read_flag_bit())n=t.read_flag_bit()<<1,n|=t.read_flag_bit(),n+=2,r=t.read_u8()-256;else{if(0===(r=t.read_u16()))break;n=7&r,r>>>=3,0===n?(n=t.read_u8(),n+=1):n+=2,r-=8192}t.offset_copy(r,n)}return t.dst.seek_start(0)}var Hr=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.src=t,this.dst=new Fr(new Ir(Math.floor(1.5*t.size)),t.endianness),this.flags=0,this.flag_bits_left=0}return Object(p.a)(e,[{key:"read_flag_bit",value:function(){0===this.flag_bits_left&&(this.flags=this.read_u8(),this.flag_bits_left=8);var e=1&this.flags;return this.flags>>>=1,this.flag_bits_left-=1,e}},{key:"copy_u8",value:function(){this.dst.write_u8(this.read_u8())}},{key:"read_u8",value:function(){return this.src.u8()}},{key:"read_u16",value:function(){return this.src.u16()}},{key:"offset_copy",value:function(e,t){(e<-8192||e>0)&&Ur.error("offset was ".concat(e,", should be between -8192 and 0.")),(t<1||t>256)&&Ur.error("length was ".concat(t,", should be between 1 and 256."));var n=Math.min(-e,t);this.dst.seek(e);var r=this.dst.take(n);this.dst.seek(-e-n);for(var a=0;a<Math.floor(t/n);++a)this.dst.write_cursor(r),r.seek_start(0);this.dst.write_cursor(r.take(t%n))}}]),e}(),qr=l.a.get("data_formats/parsing/quest/bin");function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.u32(),r=e.u32(),a=e.u32();e.seek(4);var i=e.u32(),o=e.u32(),s=e.string_utf16(64,!0,!0),l=e.string_utf16(256,!0,!0),u=e.string_utf16(576,!0,!0);a!==e.size&&qr.warn("Value ".concat(a," in bin size field does not match actual size ").concat(e.size,"."));var c=Math.floor((e.size-r)/4);e.seek_start(r);for(var d=[],p=0;p<c;++p)d.push(e.i32());return{quest_id:i,language:o,quest_name:s,short_description:l,long_description:u,function_offsets:d,instructions:function(e,t){var n=[];try{for(;e.bytes_left;){var r=e.u8(),a=void 0,i=void 0,o=void 0;switch(r){case 248:a=e.u8(),i=2,o=Kr;break;case 249:a=e.u8(),i=2,o=Qr;break;default:a=r,i=1,o=Yr}var s=Object(Gt.a)(o[a],3),l=s[1],u=s[2];if(null==u){var c=r;248!==r&&249!==r||(c=c<<8|a),qr.warn("Parameters unknown for opcode 0x".concat(c.toString(16).toUpperCase(),", assuming 0.")),n.push({opcode:a,mnemonic:l,args:[],size:i})}else try{var d=Zr(e,u);n.push({opcode:a,mnemonic:l,args:d.args,size:i+d.size})}catch(p){n.push({opcode:a,mnemonic:l,args:[],size:i})}}}catch(p){if(!t)throw p;qr.error("Couldn't fully parse object code.",p)}return n}(e.seek_start(n).take(r-n),t),data:e.seek_start(0).array_buffer()}}function Zr(e,t){var n,r=e.position,a=[];e:for(var i=0;i<t.length;++i)switch(t.charAt(i)){case"p":break;case"a":break e;case"B":a.push(e.u8());break;case"W":a.push(e.u16());break;case"L":a.push(e.u32());break;case"I":a.push(e.i32());break;case"f":case"F":a.push(e.f32());break;case"R":case"r":e.seek(1);break;case"b":a.push(e.u8());break;case"w":a.push(e.u16());break;case"l":a.push(e.u32());break;case"i":a.push(e.i32());break;case"j":case"J":n=2*e.u8(),e.seek(n);break;case"t":case"T":n=e.u8(),e.seek(n);break;case"s":case"S":for(;e.u16(););break;default:throw new Error("Unknown mask part ".concat(t.charAt(i),"."))}return{args:a,size:e.position-r}}var Yr=[[0,"nop",""],[1,"ret",""],[2,"sync",""],[3,"exit","aL"],[4,"thread","W"],[5,"va_start",""],[6,"va_end",""],[7,"va_call","W"],[8,"let","RR"],[9,"leti","RI"],[10,"unknown",null],[11,"unknown",null],[12,"unknown",null],[13,"unknown",null],[14,"unknown",null],[15,"unknown",null],[16,"set","R"],[17,"clear","R"],[18,"rev","R"],[19,"gset","w"],[20,"gclear","w"],[21,"grev","w"],[22,"glet","w"],[23,"gget","wR"],[24,"add","RR"],[25,"addi","RI"],[26,"sub","RR"],[27,"subi","RI"],[28,"mul","RR"],[29,"muli","RI"],[30,"div","RR"],[31,"divi","RI"],[32,"and","RR"],[33,"andi","RI"],[34,"or","RR"],[35,"ori","RI"],[36,"xor","RR"],[37,"xori","RI"],[38,"mod","RR"],[39,"modi","RI"],[40,"jmp","W"],[41,"call","W"],[42,"jmp_on","Wt"],[43,"jmp_off","Wt"],[44,"jmp_=","RRW"],[45,"jmpi_=","RIW"],[46,"jmp_!=","RRW"],[47,"jmpi_!=","RIW"],[48,"ujmp_>","RRW"],[49,"ujmpi_>","RLW"],[50,"jmp_>","RRW"],[51,"jmpi_>","RIW"],[52,"ujmp_<","RRW"],[53,"ujmpi_<","RLW"],[54,"jmp_<","RRW"],[55,"jmpi_<","RIW"],[56,"ujmp_>=","RRW"],[57,"ujmpi_>=","RLW"],[58,"jmp_>=","RRW"],[59,"jmpi_>=","RIW"],[60,"ujmp_<=","RRW"],[61,"ujmpi_<=","RLW"],[62,"jmp_<=","RRW"],[63,"jmpi_<=","RIW"],[64,"switch_jmp","Rj"],[65,"switch_call","Rj"],[66,"stack_push","R"],[67,"stack_pop","R"],[68,"stack_pushm","RL"],[69,"stack_popm","RL"],[70,"unknown",null],[71,"unknown",null],[72,"arg_pushr","pR"],[73,"arg_pushl","pI"],[74,"arg_pushb","pB"],[75,"arg_pushw","pW"],[76,"unknown",null],[77,"unknown",null],[78,"arg_pushs","ps"],[79,"unknown4F","RR"],[80,"message","aLs"],[81,"list","aRs"],[82,"fadein",""],[83,"fadeout",""],[84,"se","aL"],[85,"bgm","aL"],[86,"unknown",null],[87,"unknown",null],[88,"enable","aL"],[89,"disable","aL"],[90,"window_msg","as"],[91,"add_msg","as"],[92,"mesend",""],[93,"gettime","R"],[94,"winend",""],[95,"unknown",null],[96,"npc_crt_V3","R"],[97,"npc_stop","aR"],[98,"npc_play","aL"],[99,"npc_kill","aR"],[100,"npc_nont",""],[101,"npc_talk",""],[102,"npc_crp_V3","R"],[103,"unknown",null],[104,"create_pipe","aL"],[105,"p_hpstat_V3","aRL"],[106,"p_dead_V3","aRL"],[107,"p_disablewarp",""],[108,"p_enablewarp",""],[109,"p_move_V3","R"],[110,"p_look","aL"],[111,"unknown",null],[112,"p_action_disable",""],[113,"p_action_enable",""],[114,"disable_movement1","aR"],[115,"enable_movement1","aR"],[116,"p_noncol",""],[117,"p_col",""],[118,"p_setpos","aRR"],[119,"p_return_guild",""],[120,"p_talk_guild","aL"],[121,"npc_talk_pl_V3","R"],[122,"npc_talk_kill","aL"],[123,"npc_crtpk_V3","R"],[124,"npc_crppk_V3","R"],[125,"npc_crptalk_v3","R"],[126,"p_look_at_V1","aLL"],[127,"npc_crp_id_V3","R"],[128,"cam_quake",""],[129,"cam_adj",""],[130,"cam_zmin",""],[131,"cam_zmout",""],[132,"cam_pan_V3","R"],[133,"game_lev_super",""],[134,"game_lev_reset",""],[135,"pos_pipe_V3","R"],[136,"if_zone_clear","RR"],[137,"chk_ene_num","R"],[138,"unhide_obj","R"],[139,"unhide_ene","R"],[140,"at_coords_call","R"],[141,"at_coords_talk","R"],[142,"col_npcin","R"],[143,"col_npcinr","R"],[144,"switch_on","aL"],[145,"switch_off","aL"],[146,"playbgm_epi","aL"],[147,"set_mainwarp","aL"],[148,"set_obj_param","RR"],[149,"set_floor_handler","aLW"],[150,"clr_floor_handler","aL"],[151,"col_plinaw","R"],[152,"hud_hide",""],[153,"hud_show",""],[154,"cine_enable",""],[155,"cine_disable",""],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"set_qt_failure","W"],[162,"set_qt_success","W"],[163,"clr_qt_failure",""],[164,"clr_qt_success",""],[165,"set_qt_cancel","W"],[166,"clr_qt_cancel",""],[167,"unknown",null],[168,"pl_walk_V3","R"],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"pl_add_meseta","aLL"],[177,"thread_stg","W"],[178,"del_obj_param","R"],[179,"item_create","RR"],[180,"item_create2","RR"],[181,"item_delete","RR"],[182,"item_delete2","RR"],[183,"item_check","RR"],[184,"setevt","aL"],[185,"get_difflvl","R"],[186,"set_qt_exit","W"],[187,"clr_qt_exit",""],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"particle_V3","R"],[193,"npc_text","aLs"],[194,"npc_chkwarp",""],[195,"pl_pkoff",""],[196,"map_designate","R"],[197,"masterkey_on",""],[198,"masterkey_off",""],[199,"window_time",""],[200,"winend_time",""],[201,"winset_time","R"],[202,"getmtime","R"],[203,"set_quest_board_handler","aLWs"],[204,"clear_quest_board_handler","aL"],[205,"particle_id_V3","R"],[206,"npc_crptalk_id_V3","R"],[207,"npc_lang_clean",""],[208,"pl_pkon",""],[209,"pl_chk_item2","RR"],[210,"enable_mainmenu",""],[211,"disable_mainmenu",""],[212,"start_battlebgm",""],[213,"end_battlebgm",""],[214,"disp_msg_qb","as"],[215,"close_msg_qb",""],[216,"set_eventflag_v3","aLL"],[217,"sync_leti",null],[218,"set_returnhunter",""],[219,"set_returncity",""],[220,"load_pvr",""],[221,"load_midi",""],[222,"unknown",null],[223,"npc_param_V3","aRL"],[224,"pad_dragon",""],[225,"clear_mainwarp","aL"],[226,"pcam_param_V3","R"],[227,"start_setevt_v3","aRL"],[228,"warp_on",""],[229,"warp_off",""],[230,"get_slotnumber","R"],[231,"get_servernumber","R"],[232,"set_eventflag2","aLR"],[233,"res","RR"],[234,"unknownEA","RL"],[235,"enable_bgmctrl","aL"],[236,"sw_send","R"],[237,"create_bgmctrl",""],[238,"pl_add_meseta2","aL"],[239,"sync_register","aRL"],[240,"send_regwork",null],[241,"leti_fixed_camera_V3","R"],[242,"default_camera_pos1",""],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknownF8","R"],[249,"unknown",null],[250,"get_gc_number","R"],[251,"unknownFB","W"],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknownFF",""]],Kr=[[0,"unknown",null],[1,"set_chat_callback?","aRs"],[2,"unknown",null],[3,"unknown",null],[4,"unknown",null],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"get_difficulty_level2","R"],[9,"get_number_of_player1","R"],[10,"get_coord_of_player","RR"],[11,"unknownF80B",""],[12,"unknownF80C",""],[13,"map_designate_ex","R"],[14,"unknownF80E","aL"],[15,"unknownF80F","aL"],[16,"ba_initial_floor","aL"],[17,"set_ba_rules",""],[18,"unknownF812","aL"],[19,"unknownF813","aL"],[20,"unknownF814","aL"],[21,"unknownF815","aL"],[22,"unknownF816","aL"],[23,"unknownF817","aL"],[24,"unknownF818","aL"],[25,"unknownF819","aL"],[26,"unknownF81A","aL"],[27,"unknownF81B","aL"],[28,"ba_disp_msg","as"],[29,"death_lvl_up","aL"],[30,"death_tech_lvl_up","aL"],[31,"unknown",null],[32,"cmode_stage","aL"],[33,"unknown",null],[34,"unknown",null],[35,"unknownF823","aL"],[36,"unknownF824","aL"],[37,"exp_multiplication","R"],[38,"exp_division?","R"],[39,"get_user_is_dead?","R"],[40,"go_floor","RR"],[41,"unknown",null],[42,"unknown",null],[43,"unlock_door2","aLL"],[44,"lock_door2","aLL"],[45,"if_switch_not_pressed","R"],[46,"if_switch_pressed","R"],[47,"unknownF82F","aLL"],[48,"control_dragon","R"],[49,"release_dragon",""],[50,"unknown",null],[51,"unknown",null],[52,"unknown",null],[53,"unknown",null],[54,"unknown",null],[55,"unknown",null],[56,"shrink","R"],[57,"unshrink","R"],[58,"unknown",null],[59,"unknown",null],[60,"display_clock2?","R"],[61,"unknownF83D","aL"],[62,"delete_area_title?","aL"],[63,"unknown",null],[64,"load_npc_data",""],[65,"get_npc_data","W"],[66,"unknown",null],[67,"unknown",null],[68,"unknown",null],[69,"unknown",null],[70,"unknown",null],[71,"unknown",null],[72,"give_damage_score","R"],[73,"take_damage_score","R"],[74,"unk_score_F84A","R"],[75,"unk_score_F84B","R"],[76,"kill_score","R"],[77,"death_score","R"],[78,"unk_score_F84E","R"],[79,"enemy_death_score","R"],[80,"meseta_score","R"],[81,"unknownF851","R"],[82,"unknownF852","aL"],[83,"reverse_warps",""],[84,"unreverse_warps",""],[85,"set_ult_map",""],[86,"unset_ult_map",""],[87,"set_area_title","as"],[88,"unknownF858",""],[89,"unknown",null],[90,"equip_item","R"],[91,"unequip_item","aLL"],[92,"unknown",null],[93,"unknown",null],[94,"unknownF85E","aL"],[95,"unknownF85F","aL"],[96,"unknownF860",""],[97,"unknownF861","aL"],[98,"unknown",null],[99,"unknown",null],[100,"cmode_rank","aLs"],[101,"award_item_name?",""],[102,"award_item_select?",""],[103,"award_item_give_to?","R"],[104,"unknownF868","RR"],[105,"unknownF869","RR"],[106,"item_create_cmode","RR"],[107,"unknownF86B","R"],[108,"award_item_ok?","R"],[109,"unknownF86D",""],[110,"unknownF86E",""],[111,"ba_set_lives","aL"],[112,"ba_set_tech_lvl","aL"],[113,"ba_set_lvl","aL"],[114,"ba_set_time_limit","aL"],[115,"boss_is_dead?","R"],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"enable_techs","R"],[120,"disable_techs","R"],[121,"get_gender","RR"],[122,"get_chara_class","RR"],[123,"take_slot_meseta","RR"],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"read_guildcard_flag","RR"],[128,"unknownF880","R"],[129,"get_pl_name?","R"],[130,"unknown",null],[131,"unknownF883","RR"],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"ba_close_msg",""],[137,"unknown",null],[138,"get_player_status","RR"],[139,"send_mail","aRs"],[140,"online_check","R"],[141,"chl_set_timerecord?","R"],[142,"chl_get_timerecord?","R"],[143,"unknownF88F","R"],[144,"unknownF890",""],[145,"load_enemy_data","aL"],[146,"get_physical_data","W"],[147,"get_attack_data","W"],[148,"get_resist_data","W"],[149,"get_movement_data","W"],[150,"unknown",null],[151,"unknown",null],[152,"shift_left","RR"],[153,"shift_right","RR"],[154,"get_random","RR"],[155,"reset_map",""],[156,"disp_chl_retry_menu","R"],[157,"chl_reverser?",""],[158,"unknownF89E","aL"],[159,"unknownF89F","R"],[160,"unknownF8A0",""],[161,"unknownF8A1",""],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknownF8A8","aL"],[169,"unknownF8A9","R"],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"get_number_of_player2","R"],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknownF8B8",""],[185,"chl_recovery?",""],[186,"unknown",null],[187,"unknown",null],[188,"set_episode","L"],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"file_dl_req","aLs"],[193,"get_dl_status","R"],[194,"gba_unknown4?",""],[195,"get_gba_state?","R"],[196,"unknownF8C4","R"],[197,"unknownF8C5","R"],[198,"QEXIT",""],[199,"use_animation","RR"],[200,"stop_animation","R"],[201,"run_to_coord","RR"],[202,"set_slot_invincible","RR"],[203,"unknownF8CB","R"],[204,"set_slot_poison","R"],[205,"set_slot_paralyze","R"],[206,"set_slot_shock","R"],[207,"set_slot_freeze","R"],[208,"set_slot_slow","R"],[209,"set_slot_confuse","R"],[210,"set_slot_shifta","R"],[211,"set_slot_deband","R"],[212,"set_slot_jellen","R"],[213,"set_slot_zalure","R"],[214,"fleti_fixed_camera","aR"],[215,"fleti_locked_camera","aLR"],[216,"default_camera_pos2",""],[217,"set_motion_blur",""],[218,"set_screen_b&w",""],[219,"unknownF8DB","aLLLLRW"],[220,"NPC_action_string","RRW"],[221,"get_pad_cond","RR"],[222,"get_button_cond","RR"],[223,"freeze_enemies",""],[224,"unfreeze_enemies",""],[225,"freeze_everything",""],[226,"unfreeze_everything",""],[227,"restore_hp","R"],[228,"restore_tp","R"],[229,"close_chat_bubble","R"],[230,"unknownF8E6","RR"],[231,"unknownF8E7","RR"],[232,"unknownF8E8","RR"],[233,"unknownF8E9","RR"],[234,"unknownF8EA","RR"],[235,"unknownF8EB","RR"],[236,"unknownF8EC","RR"],[237,"animation_check","RR"],[238,"call_image_data","aLW"],[239,"unknownF8EF",""],[240,"turn_off_bgm_p2",""],[241,"turn_on_bgm_p2",""],[242,"load_unk_data","aLLLLRW"],[243,"particle2","aRLf"],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Qr=[[0,"unknown",null],[1,"dec2float","RR"],[2,"float2dec","RR"],[3,"flet","RR"],[4,"fleti","RF"],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"fadd","RR"],[9,"faddi","RF"],[10,"fsub","RR"],[11,"fsubi","RF"],[12,"fmul","RR"],[13,"fmuli","RF"],[14,"fdiv","RR"],[15,"fdivi","RF"],[16,"get_unknown_count?","aLR"],[17,"get_stackable_item_count","RR"],[18,"freeze_and_hide_equip",""],[19,"thaw_and_show_equip",""],[20,"set_paletteX_callback","aRW"],[21,"activate_paletteX","aR"],[22,"enable_paletteX","aR"],[23,"restore_paletteX","aL"],[24,"disable_paletteX","aL"],[25,"get_paletteX_activated","aLR"],[26,"get_unknown_paletteX_status?","aLR"],[27,"disable_movement2","aR"],[28,"enable_movement2","aR"],[29,"get_time_played","R"],[30,"get_guildcard_total","R"],[31,"get_slot_meseta","R"],[32,"get_player_level","aLR"],[33,"get_Section_ID","aLR"],[34,"get_player_hp","aRR"],[35,"get_floor_number","aRR"],[36,"get_coord_player_detect","RR"],[37,"read_global_flag","abR"],[38,"write_global_flag","abR"],[39,"unknownF927","RR"],[40,"floor_player_detect","R"],[41,"read_disk_file?","as"],[42,"open_pack_select",""],[43,"item_select","R"],[44,"get_item_id","R"],[45,"color_change","aRRRRR"],[46,"send_statistic?","aLLLLLLLL"],[47,"unknownF92F","aLL"],[48,"chat_box","aLLLLLs"],[49,"chat_bubble","aLs"],[50,"unknown",null],[51,"unknownF933","R"],[52,"scroll_text","aLLLLLfRs"],[53,"gba_unknown1",""],[54,"gba_unknown2",""],[55,"gba_unknown3",""],[56,"add_damage_to?","aLL"],[57,"item_delete2","aL"],[58,"get_item_info","aLR"],[59,"item_packing1","aL"],[60,"item_packing2","aLL"],[61,"get_lang_setting?","aR"],[62,"prepare_statistic?","aLWW"],[63,"keyword_detect",""],[64,"Keyword","aRLs"],[65,"get_guildcard_num","aLR"],[66,"unknown",null],[67,"unknown",null],[68,"get_wrap_status","aLR"],[69,"initial_floor","aL"],[70,"sin","aRL"],[71,"cos","aRL"],[72,"unknown",null],[73,"unknown",null],[74,"boss_is_dead2?","R"],[75,"unknownF94B","R"],[76,"unknownF94C","R"],[77,"is_there_cardbattle","R"],[78,"unknown",null],[79,"unknown",null],[80,"BB_p2_menu","aL"],[81,"BB_Map_Designate","BWBB"],[82,"BB_get_number_in_pack","R"],[83,"BB_swap_item","aLLLLLLWW"],[84,"BB_check_wrap","aRR"],[85,"BB_exchange_PD_item","aRRRWW"],[86,"BB_exchange_PD_srank","aRRRRRWW"],[87,"BB_exchange_PD_special","aRRRRRLWW"],[88,"BB_exchange_PD_percent","aRRRRRLWW"],[89,"unknownF959","aL"],[90,"unknown",null],[91,"unknown",null],[92,"BB_exchange_SLT","aLRWW"],[93,"BB_exchange_PC",""],[94,"BB_box_create_BP","aLff"],[95,"BB_exchange_PT","aRRLWW"],[96,"unknownF960","aL"],[97,"unknownF961",""],[98,"unknown",null],[99,"unknown",null],[100,"unknown",null],[101,"unknown",null],[102,"unknown",null],[103,"unknown",null],[104,"unknown",null],[105,"unknown",null],[106,"unknown",null],[107,"unknown",null],[108,"unknown",null],[109,"unknown",null],[110,"unknown",null],[111,"unknown",null],[112,"unknown",null],[113,"unknown",null],[114,"unknown",null],[115,"unknown",null],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"unknown",null],[120,"unknown",null],[121,"unknown",null],[122,"unknown",null],[123,"unknown",null],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"unknown",null],[128,"unknown",null],[129,"unknown",null],[130,"unknown",null],[131,"unknown",null],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"unknown",null],[137,"unknown",null],[138,"unknown",null],[139,"unknown",null],[140,"unknown",null],[141,"unknown",null],[142,"unknown",null],[143,"unknown",null],[144,"unknown",null],[145,"unknown",null],[146,"unknown",null],[147,"unknown",null],[148,"unknown",null],[149,"unknown",null],[150,"unknown",null],[151,"unknown",null],[152,"unknown",null],[153,"unknown",null],[154,"unknown",null],[155,"unknown",null],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"unknown",null],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknown",null],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknown",null],[185,"unknown",null],[186,"unknown",null],[187,"unknown",null],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"unknown",null],[193,"unknown",null],[194,"unknown",null],[195,"unknown",null],[196,"unknown",null],[197,"unknown",null],[198,"unknown",null],[199,"unknown",null],[200,"unknown",null],[201,"unknown",null],[202,"unknown",null],[203,"unknown",null],[204,"unknown",null],[205,"unknown",null],[206,"unknown",null],[207,"unknown",null],[208,"unknown",null],[209,"unknown",null],[210,"unknown",null],[211,"unknown",null],[212,"unknown",null],[213,"unknown",null],[214,"unknown",null],[215,"unknown",null],[216,"unknown",null],[217,"unknown",null],[218,"unknown",null],[219,"unknown",null],[220,"unknown",null],[221,"unknown",null],[222,"unknown",null],[223,"unknown",null],[224,"unknown",null],[225,"unknown",null],[226,"unknown",null],[227,"unknown",null],[228,"unknown",null],[229,"unknown",null],[230,"unknown",null],[231,"unknown",null],[232,"unknown",null],[233,"unknown",null],[234,"unknown",null],[235,"unknown",null],[236,"unknown",null],[237,"unknown",null],[238,"unknown",null],[239,"unknown",null],[240,"unknown",null],[241,"unknown",null],[242,"unknown",null],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Xr=l.a.get("data_formats/parsing/quest/dat"),Jr=68,$r=72;var ea=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"write_u8",value:function(e){return this.dv.setUint8(this._position++,e),this}},{key:"write_u16",value:function(e){return this.dv.setUint16(this.position,e,this.little_endian),this._position+=2,this}},{key:"write_u32",value:function(e){return this.dv.setUint32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_i32",value:function(e){return this.dv.setInt32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_f32",value:function(e){return this.dv.setFloat32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_u8_array",value:function(e){return new Uint8Array(this.buffer,this.offset+this.position).set(new Uint8Array(e)),this._position+=e.length,this}},{key:"write_cursor",value:function(e){var t=e.size-e.position;return e.copy_to_uint8_array(new Uint8Array(this.buffer,this.offset+this.position,t),t),this._position+=t,this}},{key:"write_string_ascii",value:function(e,t){var n=0,r=!0,a=!1,i=void 0;try{for(var o,s=Dn.encode(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n<t&&(this.write_u8(l),++n)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(;n<t;)this.write_u8(0),++n;return this}}]),t}(Ln),ta=l.a.get("data_formats/parsing/quest/qst");function na(e){var t="PC",n=e.u8();e.seek(1);var r=e.u8();if(68===n?t="Dreamcast/GameCube":88===n?68===r&&(t="Blue Burst"):166===n&&(t="Dreamcast download"),"Blue Burst"===t){e.seek_start(0);var a=function(e){for(var t=[],n=0;n<2;++n){e.seek(4);var r=e.u16();e.seek(38);var a=e.string_ascii(16,!0,!0),i=e.u32(),o=e.string_ascii(24,!0,!0);t.push({quest_id:r,file_name:a,file_name_2:o,size:i})}return t}(e),i=function(e,t){var n=new Map;for(;e.bytes_left>=1056;){var r=e.position,a=e.seek(4).u8(),i=e.seek(3).string_ascii(16,!0,!0),o=n.get(i);if(!o){var s=t.get(i);n.set(i,o={name:i,expected_size:s,cursor:new Fr(new Ir(s||10240),wn.Little),chunk_nos:new Set})}o.chunk_nos.has(a)?ta.warn("File chunk number ".concat(a," of file ").concat(i," was already encountered, overwriting previous chunk.")):o.chunk_nos.add(a);var l=e.seek(1024).u32();e.seek(-1028),l>1024&&(ta.warn("Data segment size of ".concat(l," is larger than expected maximum size, reading just 1024 bytes.")),l=1024);var u=e.take(l),c=1024*a;if(o.cursor.size=Math.max(c+l,o.cursor.size),o.cursor.seek_start(c).write_cursor(u),e.seek(1032-u.size),e.position!==r+1056)throw new Error("Read ".concat(e.position-r," file chunk message bytes instead of expected 1056."))}e.bytes_left&&ta.warn("".concat(e.bytes_left," Bytes left in file."));var d=!0,p=!1,h=void 0;try{for(var _,m=n.values()[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var f=_.value;f.cursor.seek_start(0),f.chunk_nos=new Set(Array.from(f.chunk_nos.values()).sort(function(e,t){return e-t})),null!=f.expected_size&&f.cursor.size!==f.expected_size&&ta.warn("File ".concat(f.name," has an actual size of ").concat(f.cursor.size," instead of the expected size ").concat(f.expected_size,"."));for(var v=Math.max(f.cursor.size,f.expected_size||0),w=0;w<Math.ceil(v/1024);++w)f.chunk_nos.has(w)||ta.warn("File ".concat(f.name," is missing chunk ").concat(w,"."))}}catch(S){p=!0,h=S}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var b=[],y=!0,k=!1,g=void 0;try{for(var R,O=n.values()[Symbol.iterator]();!(y=(R=O.next()).done);y=!0){var j=R.value;b.push({name:j.name,data:j.cursor.seek_start(0).array_buffer()})}}catch(S){k=!0,g=S}finally{try{y||null==O.return||O.return()}finally{if(k)throw g}}return b}(e,new Map(a.map(function(e){return[e.file_name,e.size]}))),o=!0,s=!1,l=void 0;try{for(var u,c=function(){var e=u.value,t=a.find(function(t){return t.file_name===e.name});t&&(e.id=t.quest_id,e.name_2=t.file_name_2)},d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c()}catch(p){s=!0,l=p}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return{version:t,files:i}}ta.error("Can't parse ".concat(t," QST files."))}function ra(e){var t=e.files,n=t.map(function(e){return 88+1056*Math.ceil(e.data.byteLength/1024)}).reduce(function(e,t){return e+t}),r=new ArrayBuffer(n),a=new ea(r,wn.Little);if(function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(s.name.length>16)throw Error("File ".concat(s.name," has a name longer than 16 characters."));e.write_u16(88),e.write_u16(68),e.write_u16(s.id||0);for(var l=0;l<38;++l)e.write_u8(0);e.write_string_ascii(s.name,16),e.write_u32(s.data.byteLength);var u=void 0;if(null==s.name_2){var c=s.name.lastIndexOf(".");u=-1===c?s.name+"_j":s.name.slice(0,c)+"_j"+s.name.slice(c)}else u=s.name_2;if(u.length>24)throw Error("File ".concat(s.name," has a file_name_2 length (").concat(u,") longer than 24 characters."));e.write_string_ascii(u,24)}}catch(d){r=!0,a=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}(a,t),function(e,t){var n=t.map(function(e){return{no:0,data:new Ln(e.data,wn.Little),name:e.name}});for(;n.length;)for(var r=0;r<n.length;)aa(e,n[r].data,n[r].no++,n[r].name)?++r:n.splice(r,1)}(a,t),a.size!==n)throw new Error("Expected a final file size of ".concat(n,", but got ").concat(a.size,"."));return r}function aa(e,t,n,r){e.write_u8_array([28,4,19,0]),e.write_u8(n),e.write_u8_array([0,0,0]),e.write_string_ascii(r,16);var a=Math.min(1024,t.bytes_left);e.write_cursor(t.take(a));for(var i=a;i<1024;++i)e.write_u8(0);return e.write_u32(a),e.write_u32(0),t.bytes_left>0}var ia,oa,sa,la,ua=l.a.get("data_formats/parsing/quest");function ca(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=na(e);if(n){var r,a,i=!0,o=!1,s=void 0;try{for(var l,u=n.files[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=c.name.trim().toLowerCase();d.endsWith(".dat")?r=c:d.endsWith(".bin")&&(a=c)}}catch(v){o=!0,s=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}if(r){if(a){var p=function(e){for(var t=[],n=[],r=[];e.bytes_left;){var a=e.u32(),i=e.u32(),o=e.u32(),s=e.u32();if(0===a)break;if(s!==i-16)throw Error("Malformed DAT file. Expected an entities size of ".concat(i-16,", got ").concat(s,"."));if(1===a){for(var l=Math.floor(s/Jr),u=e.position,c=0;c<l;++c){var d=e.u16(),p=e.u8_array(10),h=e.u16(),_=e.u8_array(2),m=e.f32(),f=e.f32(),v=e.f32(),w=e.i32()/65535*2*Math.PI,b=e.i32()/65535*2*Math.PI,y=e.i32()/65535*2*Math.PI,k=e.u8_array(28);t.push({type_id:d,section_id:h,position:new g(m,f,v),rotation:new g(w,b,y),area_id:o,unknown:[p,_,k]})}var R=e.position-u;R!==s&&(Xr.warn("Read ".concat(R," bytes instead of expected ").concat(s," for entity type ").concat(a," (Object).")),e.seek(s-R))}else if(2===a){for(var O=Math.floor(s/$r),j=e.position,S=0;S<O;++S){var x=e.u16(),D=e.u8_array(10),C=e.u16(),E=e.u8_array(6),L=e.f32(),B=e.f32(),M=e.f32(),F=e.i32()/65535*2*Math.PI,I=e.i32()/65535*2*Math.PI,z=e.i32()/65535*2*Math.PI,P=e.u8_array(4),T=e.f32(),G=e.u8_array(12),A=e.u32(),W=e.u8_array(4);n.push({type_id:x,section_id:C,position:new g(L,B,M),rotation:new g(F,I,z),skin:A,area_id:o,flags:T,unknown:[D,E,P,G,W]})}var U=e.position-j;U!==s&&(Xr.warn("Read ".concat(U," bytes instead of expected ").concat(s," for entity type ").concat(a," (NPC).")),e.seek(s-U))}else r.push({entity_type:a,total_size:i,area_id:o,entities_size:s,data:e.u8_array(s)})}return{objs:t,npcs:n,unknowns:r}}(Nr(new Ln(r.data,wn.Little))),h=Vr(Nr(new Ln(a.data,wn.Little)),t),_=1,m=[];if(h.function_offsets.length){var f=function(e,t){var n=0,r=!1,a=[],i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(n===t&&(r=!0),r&&(a.push(c),1===c.opcode))break;n+=c.size}}catch(v){o=!0,s=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r?a:void 0}(h.instructions,h.function_offsets[0]);f?m=function(e,t,n,r){var a=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=e.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;a.set(c.area_id,0)}}catch(v){o=!0,s=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,h=void 0;try{for(var _,m=e.objs[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var f=_.value;a.set(f.area_id,0)}}catch(v){p=!0,h=v}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var w=n.filter(function(e){return"BB_Map_Designate"===e.mnemonic}),b=!0,y=!1,k=void 0;try{for(var g,R=w[Symbol.iterator]();!(b=(g=R.next()).done);b=!0){var O=g.value,j=O.args[0],S=O.args[2];a.set(j,S)}}catch(v){y=!0,k=v}finally{try{b||null==R.return||R.return()}finally{if(y)throw k}}var x=new Array,D=!0,C=!1,E=void 0;try{for(var L,B=a.entries()[Symbol.iterator]();!(D=(L=B.next()).done);D=!0){var M=L.value,F=Object(Gt.a)(M,2),I=F[0],z=F[1];try{x.push(Br.get_variant(t,I,z))}catch(P){if(!r)throw P;ua.error("Unknown area variant.",P)}}}catch(v){C=!0,E=v}finally{try{D||null==B.return||B.return()}finally{if(C)throw E}}return x.sort(function(e,t){return e.area.order-t.area.order||e.id-t.id})}(p,_=function(e){var t=e.find(function(e){return"set_episode"===e.mnemonic});if(!t)return ua.debug("Function 0 has no set_episode instruction."),1;switch(t.args[0]){default:case 0:return 1;case 1:return 2;case 2:return 4}}(f),f,t):ua.warn("Function 0 offset ".concat(h.function_offsets[0]," is invalid."))}else ua.warn("File contains no functions.");return new xe(r.id,h.quest_name,h.short_description,h.long_description,_,m,p.objs.map(function(e){var t=e.position,n=t.x,r=t.y,a=t.z,i=e.rotation;return new Ce(e.area_id,e.section_id,new g(n,r,a),new g(i.x,i.y,i.z),ce.from_pso_id(e.type_id),e)}),function(e,t){return t.map(function(t){var n=t.position,r=n.x,a=n.y,i=n.z,o=t.rotation;return new Ee(t.area_id,t.section_id,new g(r,a,i),new g(o.x,o.y,o.z),function(e,t){var n=t.type_id,r=t.flags,a=t.skin,i=t.area_id,o=Math.abs(r-1)>1e-5;switch("".concat(n,", ").concat(a%3,", ").concat(e)){case"".concat(68,", 0, 1"):return I.Booma;case"".concat(68,", 1, 1"):return I.Gobooma;case"".concat(68,", 2, 1"):return I.Gigobooma;case"".concat(99,", 0, 1"):return I.EvilShark;case"".concat(99,", 1, 1"):return I.PalShark;case"".concat(99,", 2, 1"):return I.GuilShark;case"".concat(166,", 0, 1"):return I.Dimenian;case"".concat(166,", 0, 2"):return I.Dimenian2;case"".concat(166,", 1, 1"):return I.LaDimenian;case"".concat(166,", 1, 2"):return I.LaDimenian2;case"".concat(166,", 2, 1"):return I.SoDimenian;case"".concat(166,", 2, 2"):return I.SoDimenian2;case"".concat(214,", 0, 2"):return I.Mericarol;case"".concat(214,", 1, 2"):return I.Mericus;case"".concat(214,", 2, 2"):return I.Merikle;case"".concat(277,", 0, 4"):return I.Boota;case"".concat(277,", 1, 4"):return I.ZeBoota;case"".concat(277,", 2, 4"):return I.BaBoota;case"".concat(279,", 0, 4"):return I.Goran;case"".concat(279,", 1, 4"):return I.PyroGoran;case"".concat(279,", 2, 4"):return I.GoranDetonator}switch("".concat(n,", ").concat(a%2,", ").concat(e)){case"".concat(64,", 0, 1"):return I.Hildebear;case"".concat(64,", 0, 2"):return I.Hildebear2;case"".concat(64,", 1, 1"):return I.Hildeblue;case"".concat(64,", 1, 2"):return I.Hildeblue2;case"".concat(65,", 0, 1"):return I.RagRappy;case"".concat(65,", 0, 2"):return I.RagRappy2;case"".concat(65,", 0, 4"):return I.SandRappy;case"".concat(65,", 1, 1"):return I.AlRappy;case"".concat(65,", 1, 2"):return I.LoveRappy;case"".concat(65,", 1, 4"):return I.DelRappy;case"".concat(128,", 0, 1"):return I.Dubchic;case"".concat(128,", 0, 2"):return I.Dubchic2;case"".concat(128,", 1, 1"):return I.Gilchic;case"".concat(128,", 1, 2"):return I.Gilchic2;case"".concat(212,", 0, 2"):return I.SinowBerill;case"".concat(212,", 1, 2"):return I.SinowSpigell;case"".concat(213,", 0, 2"):return I.Merillia;case"".concat(213,", 1, 2"):return I.Meriltas;case"".concat(215,", 0, 2"):return I.UlGibbon;case"".concat(215,", 1, 2"):return I.ZolGibbon;case"".concat(221,", 0, 2"):return I.Dolmolm;case"".concat(221,", 1, 2"):return I.Dolmdarl;case"".concat(224,", 0, 2"):return i>15?I.Epsilon:I.SinowZoa;case"".concat(224,", 1, 2"):return i>15?I.Epsilon:I.SinowZele;case"".concat(274,", 0, 4"):return I.MerissaA;case"".concat(274,", 1, 4"):return I.MerissaAA;case"".concat(276,", 0, 4"):return I.Zu;case"".concat(276,", 1, 4"):return I.Pazuzu;case"".concat(278,", 0, 4"):return I.Dorphon;case"".concat(278,", 1, 4"):return I.DorphonEclair;case"".concat(281,", 0, 4"):return o?I.SaintMilion:I.Kondrieu;case"".concat(281,", 1, 4"):return o?I.Shambertin:I.Kondrieu}switch("".concat(n,", ").concat(e)){case"".concat(66,", 1"):return I.Monest;case"".concat(66,", 2"):return I.Monest2;case"".concat(67,", 1"):return o?I.SavageWolf:I.BarbarousWolf;case"".concat(67,", 2"):return o?I.SavageWolf2:I.BarbarousWolf2;case"".concat(96,", 1"):return I.GrassAssassin;case"".concat(96,", 2"):return I.GrassAssassin2;case"".concat(97,", 1"):return i>15?I.DelLily:o?I.PoisonLily:I.NarLily;case"".concat(97,", 2"):return i>15?I.DelLily:o?I.PoisonLily2:I.NarLily2;case"".concat(98,", 1"):return I.NanoDragon;case"".concat(100,", 1"):return o?I.PofuillySlime:I.PouillySlime;case"".concat(101,", 1"):return I.PanArms;case"".concat(101,", 2"):return I.PanArms2;case"".concat(129,", 1"):return I.Garanz;case"".concat(129,", 2"):return I.Garanz2;case"".concat(130,", 1"):return o?I.SinowBeat:I.SinowGold;case"".concat(131,", 1"):return I.Canadine;case"".concat(132,", 1"):return I.Canane;case"".concat(133,", 1"):return I.Dubswitch;case"".concat(133,", 2"):return I.Dubswitch2;case"".concat(160,", 1"):return I.Delsaber;case"".concat(160,", 2"):return I.Delsaber2;case"".concat(161,", 1"):return I.ChaosSorcerer;case"".concat(161,", 2"):return I.ChaosSorcerer2;case"".concat(162,", 1"):return I.DarkGunner;case"".concat(164,", 1"):return I.ChaosBringer;case"".concat(165,", 1"):return I.DarkBelra;case"".concat(165,", 2"):return I.DarkBelra2;case"".concat(167,", 1"):return I.Bulclaw;case"".concat(168,", 1"):return I.Claw;case"".concat(192,", 1"):return I.Dragon;case"".concat(192,", 2"):return I.GalGryphon;case"".concat(193,", 1"):return I.DeRolLe;case"".concat(197,", 1"):return I.VolOpt;case"".concat(200,", 1"):return I.DarkFalz;case"".concat(202,", 2"):return I.OlgaFlow;case"".concat(203,", 2"):return I.BarbaRay;case"".concat(204,", 2"):return I.GolDragon;case"".concat(216,", 2"):return I.Gibbles;case"".concat(217,", 2"):return I.Gee;case"".concat(218,", 2"):return I.GiGue;case"".concat(219,", 2"):return I.Deldepth;case"".concat(220,", 2"):return I.Delbiter;case"".concat(222,", 2"):return I.Morfos;case"".concat(223,", 2"):return I.Recobox;case"".concat(225,", 2"):return I.IllGill;case"".concat(272,", 4"):return I.Astark;case"".concat(273,", 4"):return o?I.SatelliteLizard:I.Yowie;case"".concat(275,", 4"):return I.Girtablulu}switch(n){case 4:return I.FemaleFat;case 5:return I.FemaleMacho;case 7:return I.FemaleTall;case 10:return I.MaleDwarf;case 11:return I.MaleFat;case 12:return I.MaleMacho;case 13:return I.MaleOld;case 25:return I.BlueSoldier;case 26:return I.RedSoldier;case 27:return I.Principal;case 28:return I.Tekker;case 29:return I.GuildLady;case 30:return I.Scientist;case 31:return I.Nurse;case 32:return I.Irene;case 241:return I.ItemShop;case 254:return I.Nurse2}return I.Unknown}(e,t),t)})}(_,p.npcs),p.unknowns,h.data)}ua.error("File contains no BIN file.")}else ua.error("File contains no DAT file.")}}function da(e,t){var n,r,a=function(e){var t=e.objs,n=e.npcs,r=e.unknowns,a=new Ir(t.length*(16+Jr)+n.length*(16+$r)+r.reduce(function(e,t){return e+t.total_size},0)),i=new Fr(a,wn.Little),o=Object(Ue.groupBy)(t,function(e){return e.area_id}),s=Object.keys(o).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),l=!0,u=!1,c=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,_=o[h],m=_.length*Jr;i.write_u32(1),i.write_u32(m+16),i.write_u32(h),i.write_u32(m);var f=!0,v=!1,w=void 0;try{for(var b,y=_[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var k=b.value;i.write_u16(k.type_id),i.write_u8_array(k.unknown[0]),i.write_u16(k.section_id),i.write_u8_array(k.unknown[1]),i.write_f32(k.position.x),i.write_f32(k.position.y),i.write_f32(k.position.z),i.write_i32(Math.round(k.rotation.x/(2*Math.PI)*65535)),i.write_i32(Math.round(k.rotation.y/(2*Math.PI)*65535)),i.write_i32(Math.round(k.rotation.z/(2*Math.PI)*65535)),i.write_u8_array(k.unknown[2])}}catch(H){v=!0,w=H}finally{try{f||null==y.return||y.return()}finally{if(v)throw w}}}}catch(H){u=!0,c=H}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}var g=Object(Ue.groupBy)(n,function(e){return e.area_id}),R=Object.keys(g).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),O=!0,j=!1,S=void 0;try{for(var x,D=R[Symbol.iterator]();!(O=(x=D.next()).done);O=!0){var C=x.value,E=g[C],L=E.length*$r;i.write_u32(2),i.write_u32(L+16),i.write_u32(C),i.write_u32(L);var B=!0,M=!1,F=void 0;try{for(var I,z=E[Symbol.iterator]();!(B=(I=z.next()).done);B=!0){var P=I.value;i.write_u16(P.type_id),i.write_u8_array(P.unknown[0]),i.write_u16(P.section_id),i.write_u8_array(P.unknown[1]),i.write_f32(P.position.x),i.write_f32(P.position.y),i.write_f32(P.position.z),i.write_i32(Math.round(P.rotation.x/(2*Math.PI)*65535)),i.write_i32(Math.round(P.rotation.y/(2*Math.PI)*65535)),i.write_i32(Math.round(P.rotation.z/(2*Math.PI)*65535)),i.write_u8_array(P.unknown[2]),i.write_f32(P.flags),i.write_u8_array(P.unknown[3]),i.write_u32(P.skin),i.write_u8_array(P.unknown[4])}}catch(H){M=!0,F=H}finally{try{B||null==z.return||z.return()}finally{if(M)throw F}}}}catch(H){j=!0,S=H}finally{try{O||null==D.return||D.return()}finally{if(j)throw S}}var T=!0,G=!1,A=void 0;try{for(var W,U=r[Symbol.iterator]();!(T=(W=U.next()).done);T=!0){var N=W.value;i.write_u32(N.entity_type),i.write_u32(N.total_size),i.write_u32(N.area_id),i.write_u32(N.entities_size),i.write_u8_array(N.data)}}catch(H){G=!0,A=H}finally{try{T||null==U.return||U.return()}finally{if(G)throw A}}return i.write_u32(0),i.write_u32(0),i.write_u32(0),i.write_u32(0),a}({objs:(r=e.objects,r.map(function(e){return{type_id:e.type.pso_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,area_id:e.area_id,unknown:e.dat.unknown}})),npcs:(n=e.npcs,n.map(function(e){var t=function(e){switch(e){default:throw new Error("Unexpected type ".concat(e.code,"."));case I.Unknown:return;case I.FemaleFat:return{type_id:4,skin:0,regular:!0};case I.FemaleMacho:return{type_id:5,skin:0,regular:!0};case I.FemaleTall:return{type_id:7,skin:0,regular:!0};case I.MaleDwarf:return{type_id:10,skin:0,regular:!0};case I.MaleFat:return{type_id:11,skin:0,regular:!0};case I.MaleMacho:return{type_id:12,skin:0,regular:!0};case I.MaleOld:return{type_id:13,skin:0,regular:!0};case I.BlueSoldier:return{type_id:25,skin:0,regular:!0};case I.RedSoldier:return{type_id:26,skin:0,regular:!0};case I.Principal:return{type_id:27,skin:0,regular:!0};case I.Tekker:return{type_id:28,skin:0,regular:!0};case I.GuildLady:return{type_id:29,skin:0,regular:!0};case I.Scientist:return{type_id:30,skin:0,regular:!0};case I.Nurse:return{type_id:31,skin:0,regular:!0};case I.Irene:return{type_id:32,skin:0,regular:!0};case I.ItemShop:return{type_id:241,skin:0,regular:!0};case I.Nurse2:return{type_id:254,skin:0,regular:!0};case I.Hildebear:return{type_id:64,skin:0,regular:!0};case I.Hildeblue:return{type_id:64,skin:1,regular:!0};case I.RagRappy:return{type_id:65,skin:0,regular:!0};case I.AlRappy:return{type_id:65,skin:1,regular:!0};case I.Monest:return{type_id:66,skin:0,regular:!0};case I.SavageWolf:return{type_id:67,skin:0,regular:!0};case I.BarbarousWolf:return{type_id:67,skin:0,regular:!1};case I.Booma:return{type_id:68,skin:0,regular:!0};case I.Gobooma:return{type_id:68,skin:1,regular:!0};case I.Gigobooma:return{type_id:68,skin:2,regular:!0};case I.Dragon:return{type_id:192,skin:0,regular:!0};case I.GrassAssassin:return{type_id:96,skin:0,regular:!0};case I.PoisonLily:return{type_id:97,skin:0,regular:!0};case I.NarLily:return{type_id:97,skin:1,regular:!0};case I.NanoDragon:return{type_id:98,skin:0,regular:!0};case I.EvilShark:return{type_id:99,skin:0,regular:!0};case I.PalShark:return{type_id:99,skin:1,regular:!0};case I.GuilShark:return{type_id:99,skin:2,regular:!0};case I.PofuillySlime:return{type_id:100,skin:0,regular:!0};case I.PouillySlime:return{type_id:100,skin:0,regular:!1};case I.PanArms:return{type_id:101,skin:0,regular:!0};case I.DeRolLe:return{type_id:193,skin:0,regular:!0};case I.Dubchic:return{type_id:128,skin:0,regular:!0};case I.Gilchic:return{type_id:128,skin:1,regular:!0};case I.Garanz:return{type_id:129,skin:0,regular:!0};case I.SinowBeat:return{type_id:130,skin:0,regular:!0};case I.SinowGold:return{type_id:130,skin:0,regular:!1};case I.Canadine:return{type_id:131,skin:0,regular:!0};case I.Canane:return{type_id:132,skin:0,regular:!0};case I.Dubswitch:return{type_id:133,skin:0,regular:!0};case I.VolOpt:return{type_id:197,skin:0,regular:!0};case I.Delsaber:return{type_id:160,skin:0,regular:!0};case I.ChaosSorcerer:return{type_id:161,skin:0,regular:!0};case I.DarkGunner:return{type_id:162,skin:0,regular:!0};case I.ChaosBringer:return{type_id:164,skin:0,regular:!0};case I.DarkBelra:return{type_id:165,skin:0,regular:!0};case I.Dimenian:return{type_id:166,skin:0,regular:!0};case I.LaDimenian:return{type_id:166,skin:1,regular:!0};case I.SoDimenian:return{type_id:166,skin:2,regular:!0};case I.Bulclaw:return{type_id:167,skin:0,regular:!0};case I.Claw:return{type_id:168,skin:0,regular:!0};case I.DarkFalz:return{type_id:200,skin:0,regular:!0};case I.Hildebear2:return{type_id:64,skin:0,regular:!0};case I.Hildeblue2:return{type_id:64,skin:1,regular:!0};case I.RagRappy2:return{type_id:65,skin:0,regular:!0};case I.LoveRappy:return{type_id:65,skin:1,regular:!0};case I.Monest2:return{type_id:66,skin:0,regular:!0};case I.PoisonLily2:return{type_id:97,skin:0,regular:!0};case I.NarLily2:return{type_id:97,skin:1,regular:!0};case I.GrassAssassin2:return{type_id:96,skin:0,regular:!0};case I.Dimenian2:return{type_id:166,skin:0,regular:!0};case I.LaDimenian2:return{type_id:166,skin:1,regular:!0};case I.SoDimenian2:return{type_id:166,skin:2,regular:!0};case I.DarkBelra2:return{type_id:165,skin:0,regular:!0};case I.BarbaRay:return{type_id:203,skin:0,regular:!0};case I.SavageWolf2:return{type_id:67,skin:0,regular:!0};case I.BarbarousWolf2:return{type_id:67,skin:0,regular:!1};case I.PanArms2:return{type_id:101,skin:0,regular:!0};case I.Dubchic2:return{type_id:128,skin:0,regular:!0};case I.Gilchic2:return{type_id:128,skin:1,regular:!0};case I.Garanz2:return{type_id:129,skin:0,regular:!0};case I.Dubswitch2:return{type_id:133,skin:0,regular:!0};case I.Delsaber2:return{type_id:160,skin:0,regular:!0};case I.ChaosSorcerer2:return{type_id:161,skin:0,regular:!0};case I.GolDragon:return{type_id:204,skin:0,regular:!0};case I.SinowBerill:return{type_id:212,skin:0,regular:!0};case I.SinowSpigell:return{type_id:212,skin:1,regular:!0};case I.Merillia:return{type_id:213,skin:0,regular:!0};case I.Meriltas:return{type_id:213,skin:1,regular:!0};case I.Mericarol:return{type_id:214,skin:0,regular:!0};case I.Mericus:return{type_id:214,skin:1,regular:!0};case I.Merikle:return{type_id:214,skin:2,regular:!0};case I.UlGibbon:return{type_id:215,skin:0,regular:!0};case I.ZolGibbon:return{type_id:215,skin:1,regular:!0};case I.Gibbles:return{type_id:216,skin:0,regular:!0};case I.Gee:return{type_id:217,skin:0,regular:!0};case I.GiGue:return{type_id:218,skin:0,regular:!0};case I.GalGryphon:return{type_id:192,skin:0,regular:!0};case I.Deldepth:return{type_id:219,skin:0,regular:!0};case I.Delbiter:return{type_id:220,skin:0,regular:!0};case I.Dolmolm:return{type_id:221,skin:0,regular:!0};case I.Dolmdarl:return{type_id:221,skin:1,regular:!0};case I.Morfos:return{type_id:222,skin:0,regular:!0};case I.Recobox:return{type_id:223,skin:0,regular:!0};case I.Epsilon:case I.SinowZoa:return{type_id:224,skin:0,regular:!0};case I.SinowZele:return{type_id:224,skin:1,regular:!0};case I.IllGill:return{type_id:225,skin:0,regular:!0};case I.DelLily:return{type_id:97,skin:0,regular:!0};case I.OlgaFlow:return{type_id:202,skin:0,regular:!0};case I.SandRappy:return{type_id:65,skin:0,regular:!0};case I.DelRappy:return{type_id:65,skin:1,regular:!0};case I.Astark:return{type_id:272,skin:0,regular:!0};case I.SatelliteLizard:return{type_id:273,skin:0,regular:!0};case I.Yowie:return{type_id:273,skin:0,regular:!1};case I.MerissaA:return{type_id:274,skin:0,regular:!0};case I.MerissaAA:return{type_id:274,skin:1,regular:!0};case I.Girtablulu:return{type_id:275,skin:0,regular:!0};case I.Zu:return{type_id:276,skin:0,regular:!0};case I.Pazuzu:return{type_id:276,skin:1,regular:!0};case I.Boota:return{type_id:277,skin:0,regular:!0};case I.ZeBoota:return{type_id:277,skin:1,regular:!0};case I.BaBoota:return{type_id:277,skin:2,regular:!0};case I.Dorphon:return{type_id:278,skin:0,regular:!0};case I.DorphonEclair:return{type_id:278,skin:1,regular:!0};case I.Goran:return{type_id:279,skin:0,regular:!0};case I.PyroGoran:return{type_id:279,skin:1,regular:!0};case I.GoranDetonator:return{type_id:279,skin:2,regular:!0};case I.SaintMilion:return{type_id:281,skin:0,regular:!0};case I.Shambertin:return{type_id:281,skin:1,regular:!0};case I.Kondrieu:return{type_id:281,skin:0,regular:!1}}}(e.type),n=e.dat.flags;return t&&(n=-8388609&e.dat.flags|(t.regular?0:8388608)),{type_id:t?t.type_id:e.dat.type_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,flags:n,skin:t?t.skin:e.dat.skin,area_id:e.area_id,unknown:e.dat.unknown}})),unknowns:e.dat_unknowns}),i={data:e.bin_data}.data,o=t.lastIndexOf("."),s=-1===o?t:t.slice(0,o);return ra({files:[{name:s+".dat",id:e.id,data:zr(new Mr(a,wn.Little)).array_buffer()},{name:s+".bin",id:e.id,data:zr(new Ln(i,wn.Little)).array_buffer()}]})}function pa(e){return ha.apply(this,arguments)}function ha(){return(ha=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.addEventListener("loadend",function(){r.result instanceof ArrayBuffer?e(r.result):n(new Error("Couldn't read file."))}),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _a,ma,fa,va,wa,ba,ya,ka,ga=function e(t,n,r){Object(d.a)(this,e),this.description=t,this.undo=n,this.redo=r},Ra=(ia=y.m.ref,oa=function(){function e(){Object(d.a)(this,e),Object(w.a)(this,"stack",sa,this),Object(w.a)(this,"index",la,this)}return Object(p.a)(e,[{key:"push_action",value:function(e,t,n){this.push(new ga(e,t,n))}},{key:"push",value:function(e){this.stack.splice(this.index,this.stack.length-this.index,e),this.index++}},{key:"undo",value:function(){return!!this.can_undo&&(this.stack[--this.index].undo(),!0)}},{key:"redo",value:function(){return!!this.can_redo&&(this.stack[this.index++].redo(),!0)}},{key:"clear",value:function(){this.stack=[],this.index=0}},{key:"can_undo",get:function(){return this.index>0}},{key:"can_redo",get:function(){return this.index<this.stack.length}},{key:"first_undo",get:function(){return this.stack[this.index-1]}},{key:"first_redo",get:function(){return this.stack[this.index]}}]),e}(),sa=Object(b.a)(oa.prototype,"stack",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),la=Object(b.a)(oa.prototype,"index",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(oa.prototype,"can_undo",[y.f],Object.getOwnPropertyDescriptor(oa.prototype,"can_undo"),oa.prototype),Object(b.a)(oa.prototype,"can_redo",[y.f],Object.getOwnPropertyDescriptor(oa.prototype,"can_redo"),oa.prototype),Object(b.a)(oa.prototype,"first_undo",[y.f],Object.getOwnPropertyDescriptor(oa.prototype,"first_undo"),oa.prototype),Object(b.a)(oa.prototype,"first_redo",[y.f],Object.getOwnPropertyDescriptor(oa.prototype,"first_redo"),oa.prototype),oa),Oa=l.a.get("stores/QuestEditorStore"),ja=new(_a=function e(){var t=this;Object(d.a)(this,e),this.undo_stack=new Ra,Object(w.a)(this,"current_quest",ma,this),Object(w.a)(this,"current_area",fa,this),Object(w.a)(this,"selected_entity",va,this),Object(w.a)(this,"set_quest",wa,this),Object(w.a)(this,"set_selected_entity",ba,this),Object(w.a)(this,"set_current_area_id",ya,this),this.load_file=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r,a,i,o,s,l,u,c;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pa(n);case 3:if(r=e.sent,a=ca(new Ln(r,wn.Little)),t.set_quest(a),!a){e.next=34;break}i=!0,o=!1,s=void 0,e.prev=10,l=Ae.a.mark(function e(){var n,r,i,o,s,l,u,d,p,h,_,m,f,v;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.value,e.next=3,Br.get_area_sections(a.episode,n.area.id,n.id);case 3:for(r=e.sent,n.sections=r,i=!0,o=!1,s=void 0,e.prev=8,l=a.objects.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){d=u.value;try{t.set_section_on_visible_quest_entity(d,r)}catch(w){Oa.error(w)}}e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),o=!0,s=e.t0;case 16:e.prev=16,e.prev=17,i||null==l.return||l.return();case 19:if(e.prev=19,!o){e.next=22;break}throw s;case 22:return e.finish(19);case 23:return e.finish(16);case 24:for(p=!0,h=!1,_=void 0,e.prev=27,m=a.npcs.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){v=f.value;try{t.set_section_on_visible_quest_entity(v,r)}catch(w){Oa.error(w)}}e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),h=!0,_=e.t1;case 35:e.prev=35,e.prev=36,p||null==m.return||m.return();case 38:if(e.prev=38,!h){e.next=41;break}throw _;case 41:return e.finish(38);case 42:return e.finish(35);case 43:case"end":return e.stop()}},e,null,[[8,12,16,24],[17,,19,23],[27,31,35,43],[36,,38,42]])}),u=a.area_variants[Symbol.iterator]();case 13:if(i=(c=u.next()).done){e.next=18;break}return e.delegateYield(l(),"t0",15);case 15:i=!0,e.next=13;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(10),o=!0,s=e.t1;case 24:e.prev=24,e.prev=25,i||null==u.return||u.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:e.next=35;break;case 34:Oa.error("Couldn't parse quest file.");case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(0),Oa.error("Couldn't read file.",e.t2);case 40:case"end":return e.stop()}},e,null,[[0,37],[10,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}(),this.set_section_on_visible_quest_entity=function(){var e=Object(We.a)(Ae.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.position,a=r.x,i=r.y,o=r.z,(s=n.find(function(e){return e.id===t.section_id}))?(l=s.position,u=l.x,c=l.y,d=l.z,p=s.cos_y_axis_rotation*a+s.sin_y_axis_rotation*o,h=-s.sin_y_axis_rotation*a+s.cos_y_axis_rotation*o,a=p+u,i+=c,o=h+d):Oa.warn("Section ".concat(t.section_id," not found.")),Object(y.n)(function(){t.section=s,t.position=new g(a,i,o)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.save_current_quest_to_file=function(e){if(t.current_quest){var n=da(t.current_quest,e);e.endsWith(".qst")||(e+=".qst");var r=document.createElement("a");r.href=URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),r.download=e,document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}},ma=Object(b.a)(_a.prototype,"current_quest",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa=Object(b.a)(_a.prototype,"current_area",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va=Object(b.a)(_a.prototype,"selected_entity",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=Object(b.a)(_a.prototype,"set_quest",[y.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.undo_stack.clear(),e.selected_entity=void 0,e.current_quest=t,t&&t.area_variants.length?e.current_area=t.area_variants[0].area:e.current_area=void 0}}}),ba=Object(b.a)(_a.prototype,"set_selected_entity",[y.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t&&e.set_current_area_id(t.area_id),e.selected_entity=t}}}),ya=Object(b.a)(_a.prototype,"set_current_area_id",[y.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(e.selected_entity=void 0,null==t)e.current_area=void 0;else if(e.current_quest){var n=e.current_quest.area_variants.find(function(e){return e.area.id===t});e.current_area=n&&n.area}}}}),_a),Sa=(n(393),Object(f.a)(ka=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.entity;if(e){var t=e.section?e.section.id:e.section_id,n=null;return e instanceof Ce?n=a.a.createElement("tr",null,a.a.createElement("td",null,"Object: "),a.a.createElement("td",{colSpan:2},e.type.name)):e instanceof Ee&&(n=a.a.createElement("tr",null,a.a.createElement("td",null,"NPC: "),a.a.createElement("td",null,e.type.name))),a.a.createElement("div",{className:"EntityInfoComponent-container"},a.a.createElement("table",{className:"EntityInfoComponent-table"},a.a.createElement("tbody",null,n,a.a.createElement("tr",null,a.a.createElement("td",null,"Section: "),a.a.createElement("td",null,t)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"World position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(xa,{entity:e,position_type:"position",coord:"x"}),a.a.createElement(xa,{entity:e,position_type:"position",coord:"y"}),a.a.createElement(xa,{entity:e,position_type:"position",coord:"z"}))))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"Section position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(xa,{entity:e,position_type:"section_position",coord:"x"}),a.a.createElement(xa,{entity:e,position_type:"section_position",coord:"y"}),a.a.createElement(xa,{entity:e,position_type:"section_position",coord:"z"}))))))))}return a.a.createElement("div",{className:"EntityInfoComponent-container"})}}]),t}(r.Component))||ka),xa=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("tr",null,a.a.createElement("td",null,this.props.coord.toUpperCase(),": "),a.a.createElement("td",null,a.a.createElement(Da,this.props)))}}]),t}(r.PureComponent),Da=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).disposer=void 0,n.state={value:0},n.changed=function(e){if(null!=e){var t=n.props.entity,r=n.props.position_type,a=t[r].clone();a[n.props.coord]=e,t[r]=a}},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.start_observing()}},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer()}},{key:"componentDidUpdate",value:function(e){this.props.entity!==e.entity&&this.start_observing()}},{key:"render",value:function(){return a.a.createElement(Te.a,{value:this.state.value,size:"small",precision:3,className:"EntityInfoComponent-coord",onChange:this.changed})}},{key:"start_observing",value:function(){var e=this;this.disposer&&this.disposer(),this.disposer=Object(y.e)(function(){e.setState({value:e.props.entity[e.props.position_type][e.props.coord]})},{name:"".concat(this.props.entity.type.code,".").concat(this.props.position_type,".").concat(this.props.coord," changed"),delay:50})}}]),t}(r.Component);n(394),n(395);function Ca(e){var t=e.quest;if(t){var n=4===t.episode?"IV":2===t.episode?"II":"I",r=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=t.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=r.get(c.type)||0;r.set(c.type,d+1)}}catch(_){o=!0,s=_}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var p=8*(r.get(I.Canane)||0),h=Object(Zt.a)(r).sort(function(e,t){return e[0].id-t[0].id}).map(function(e){var t=Object(Gt.a)(e,2),n=t[0],r=t[1],i=n===I.Canadine?p:0;return a.a.createElement("tr",{key:n.id},a.a.createElement("td",null,n.name,":"),a.a.createElement("td",null,r+i))});return a.a.createElement("div",{className:"qe-QuestInfoComponent"},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name:"),a.a.createElement("td",null,t.name)),a.a.createElement("tr",null,a.a.createElement("th",null,"Episode:"),a.a.createElement("td",null,n)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.short_description))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.long_description))))),a.a.createElement("div",{className:"qe-QuestInfoComponent-npc-counts-container"},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:2},"NPC Counts"))),a.a.createElement("tbody",null,h))))}return a.a.createElement("div",{className:"qe-QuestInfoComponent"})}n(396);var Ea,La=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).modifyDom=function(e){e&&(n.props.renderer.set_size(e.clientWidth,e.clientHeight),e.appendChild(n.props.renderer.dom_element))},n.onResize=function(){var e=n.props.renderer.dom_element.parentNode;n.props.renderer.set_size(e.clientWidth,e.clientHeight)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e="RendererComponent";return this.props.className&&(e+=" "+this.props.className),a.a.createElement("div",{className:e,ref:this.modifyDom})}},{key:"componentWillReceiveProps",value:function(e){this.props.renderer.debug=!!e.debug}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.props.on_will_unmount&&this.props.on_will_unmount()}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(r.Component),Ba=n(78),Ma=new tr.MeshLambertMaterial({color:65280,side:tr.DoubleSide}),Fa=new tr.MeshLambertMaterial({color:16711935,side:tr.DoubleSide}),Ia=new tr.MeshLambertMaterial({skinning:!0,color:16711935,side:tr.DoubleSide});function za(e,t){return Pa(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fa,tr.Mesh)}function Pa(e,t,n,r){var a,i=e.userData,o=i.created_by_geometry_builder,s=i.normalized_material_indices,l=i.bones;if(Array.isArray(t))if(o){a=[Ma];var u=!0,c=!1,d=void 0;try{for(var p,h=s.entries()[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value,m=Object(Gt.a)(_,2),f=m[0],v=m[1];v>0&&(a[v]=t[f]||n)}}catch(b){c=!0,d=b}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}else a=t;else a=t||n;var w=new r(e,a);return o&&l.length&&w instanceof tr.SkinnedMesh&&(w.add(l[0]),w.bind(new tr.Skeleton(l))),w}!function(e){e[e.Normal=0]="Normal",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected"}(Ea||(Ea={}));var Ta=[];Ta[Ea.Normal]=16776960,Ta[Ea.Hovered]=16768831,Ta[Ea.Selected]=16755200;var Ga=[];function Aa(e,t,n){return Ua(e,t,n,Ta[Ea.Normal],e.type.name)}function Wa(e,t,n){return Ua(e,t,n,Ga[Ea.Normal],e.type.code)}function Ua(e,t,n,r,a){var i=new tr.MeshLambertMaterial({color:r,side:tr.DoubleSide}),o=za(t,n.length?n.map(function(e){return new tr.MeshLambertMaterial({map:e,side:tr.DoubleSide,alphaTest:.5})}):i,i);o.name=a,o.userData.entity=e;var s=e.position,l=s.x,u=s.y,c=s.z;o.position.set(l,u,c);var d=e.rotation;return o.rotation.set(d.x,d.y,d.z),o}Ga[Ea.Normal]=16711680,Ga[Ea.Hovered]=16727903,Ga[Ea.Selected]=16711764;var Na=new tr.Vector3(0,-1,0),Ha=function(){function e(t){var n=this;Object(d.a)(this,e),this.renderer=t,this.raycaster=new tr.Raycaster,this.selected=void 0,this.hovered=void 0,this.pick=void 0,this.last_pointer_position=new tr.Vector2(0,0),this.moved_since_last_mouse_down=!1,this.try_highlight_selected=function(){var e=ja.selected_entity,t=n.renderer.get_entity_mesh(e);t&&n.select({entity:e,mesh:t})},this.on_mouse_down=function(e){n.process_event(e),n.stop_transforming();var t=n.pick_entity(n.renderer.pointer_pos_to_device_coords(e));t?(n.renderer.controls.enabled=!1,n.pick=t,n.select(t)):(n.renderer.controls.enabled=!0,n.pick=void 0),n.renderer.schedule_render()},this.on_mouse_up=function(e){n.process_event(e),n.moved_since_last_mouse_down||n.pick||n.deselect(),n.stop_transforming(),n.renderer.controls.enabled=!0,n.renderer.schedule_render()},this.on_mouse_move=function(e){n.process_event(e);var t=n.renderer.pointer_pos_to_device_coords(e);if(n.selected&&n.pick)n.moved_since_last_mouse_down&&(1===e.buttons&&(e.shiftKey?n.translate_vertically(n.selected,n.pick,t):n.translate_horizontally(n.selected,n.pick,t)),n.renderer.schedule_render());else{var r=n.pick_entity(t);n.mark_hovered(r)&&n.renderer.schedule_render()}},this.stop_transforming=function(){if(n.moved_since_last_mouse_down&&n.selected&&n.pick){var e=n.selected.entity,t=n.pick.initial_position,r=e.position,a=e.type.name;ja.undo_stack.push_action("Move ".concat(a),function(){e.position=t,ja.set_selected_entity(e)},function(){e.position=r,ja.set_selected_entity(e)})}n.pick=void 0},Object(y.e)(function(){var e=ja.selected_entity;n.selected&&n.selected.entity===e||(n.stop_transforming(),e?n.try_highlight_selected():n.deselect())})}return Object(p.a)(e,[{key:"process_event",value:function(e){"mousedown"===e.type?this.moved_since_last_mouse_down=!1:e.offsetX===this.last_pointer_position.x&&e.offsetY===this.last_pointer_position.y||(this.moved_since_last_mouse_down=!0),this.last_pointer_position.set(e.offsetX,e.offsetY)}},{key:"mark_hovered",value:function(e){var t=!1;return this.selected&&Va(e,this.selected)||(Va(e,this.hovered)||(this.hovered&&(qa(this.hovered,Ea.Normal),this.hovered=void 0),e&&qa(e,Ea.Hovered),t=!0),this.hovered=e),t}},{key:"select",value:function(e){Va(e,this.hovered)&&(this.hovered=void 0),Va(e,this.selected)?this.selected=e:(this.selected&&qa(this.selected,Ea.Normal),qa(e,Ea.Selected),this.selected=e,ja.set_selected_entity(e.entity))}},{key:"deselect",value:function(){this.selected&&qa(this.selected,Ea.Normal),this.selected=void 0,ja.set_selected_entity(void 0)}},{key:"translate_vertically",value:function(e,t,n){this.raycaster.setFromCamera(n,this.renderer.camera);var r=this.raycaster.ray,a=this.renderer.camera.getWorldDirection(new tr.Vector3).negate(),i=(new tr.Plane).setFromNormalAndCoplanarPoint(new tr.Vector3(a.x,0,a.z).normalize(),e.mesh.position.sub(t.grab_offset)),o=new tr.Vector3;if(r.intersectPlane(i,o)){var s=o.y+t.grab_offset.y,l=s-e.entity.position.y;t.drag_y+=l,t.drag_adjust.y-=l,e.entity.position=new g(e.entity.position.x,s,e.entity.position.z)}}},{key:"translate_horizontally",value:function(e,t,n){var r=this.pick_terrain(n,t),a=r.intersection,i=r.section;if(a)e.entity.set_position_and_section(new g(a.point.x,a.point.y+t.drag_y,a.point.z),i);else{this.raycaster.setFromCamera(n,this.renderer.camera);var o=this.raycaster.ray,s=new tr.Plane(new tr.Vector3(0,1,0),-e.entity.position.y+t.grab_offset.y),l=new tr.Vector3;o.intersectPlane(s,l)&&(e.entity.position=new g(l.x+t.grab_offset.x,e.entity.position.y,l.z+t.grab_offset.z))}}},{key:"pick_entity",value:function(e){this.raycaster.setFromCamera(e,this.renderer.camera);var t=this.raycaster.intersectObjects(this.renderer.entity_models.children),n=Object(Gt.a)(t,1)[0];if(n){var r=n.object.userData.entity,a=n.object.position.clone().sub(n.point),i=a.clone(),o=0;this.raycaster.set(n.object.position,Na);var s=this.raycaster.intersectObjects(this.renderer.collision_geometry.children,!0),l=Object(Gt.a)(s,1)[0];return l&&(i.y-=l.distance,o+=l.distance),{mesh:n.object,entity:r,initial_position:r.position,grab_offset:a,drag_adjust:i,drag_y:o}}}},{key:"pick_terrain",value:function(e,t){this.raycaster.setFromCamera(e,this.renderer.camera),this.raycaster.ray.origin.add(t.drag_adjust);var n=this.raycaster.intersectObjects(this.renderer.collision_geometry.children,!0),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(l.face.normal.y>.75)return{intersection:l,section:l.object.userData.section}}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return{}}}]),e}();function qa(e,t){var n=e.entity,r=e.mesh,a=n instanceof Ee?Ga[t]:Ta[t];if(r)if(Array.isArray(r.material)){var i=!0,o=!1,s=void 0;try{for(var l,u=r.material[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;t===Ea.Normal&&c.map?c.color.set(16777215):c.color.set(a)}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}else r.material.color.set(a)}function Va(e,t){return e&&t?e.entity===t.entity:e===t}var Za=l.a.get("data_formats/parsing/ninja/texture"),Ya=1213027928,Ka=1414682200;function Qa(e){var t=Fn(e),n=t.find(function(e){return e.type===Ya}),r=n&&function(e){return{texture_count:e.u16()}}(n.data),a=t.filter(function(e){return e.type===Ka}).map(function(e){return function(e){var t=e.u32(),n=e.u32(),r=e.u32(),a=e.u16(),i=e.u16(),o=e.u32();e.seek(36);var s=e.array_buffer(o);return{id:r,format:[t,n],width:a,height:i,size:o,data:s}}(e.data)});return r?r.texture_count!==a.length&&Za.warn("Found ".concat(a.length," textures instead of ").concat(r.texture_count," as defined in the header.")):Za.warn("No header found."),{textures:a}}function Xa(e){return e.textures.map(Ja)}function Ja(e){var t,n;switch(e.format[1]){case 6:t=tr.RGBA_S3TC_DXT1_Format,n=e.width*e.height/2;break;case 7:t=tr.RGBA_S3TC_DXT3_Format,n=e.width*e.height;break;default:throw new Error("Format ".concat(e.format.join(", ")," not supported."))}var r=new tr.CompressedTexture([{data:new Uint8Array(e.data,0,n),width:e.width,height:e.height}],e.width,e.height,t);return r.minFilter=tr.LinearFilter,r.wrapS=tr.MirroredRepeatWrapping,r.wrapT=tr.MirroredRepeatWrapping,r.needsUpdate=!0,r}var $a=l.a.get("loading/entities"),ei=new tr.CylinderBufferGeometry(3,3,20);ei.translate(0,10,0);var ti=new Promise(function(e){return e(ei)}),ni=[],ri=new Promise(function(e){return e(ni)}),ai=new wr;ai.set(I.Unknown,ti);var ii=new wr;ii.set(I.Unknown,ri);for(var oi,si=new wr,li=new wr,ui=0,ci=[ce.Unknown,ce.PlayerSet,ce.FogCollision,ce.EventCollision,ce.ObjRoomID,ce.ScriptCollision,ce.ItemLight,ce.FogCollisionSW,ce.MenuActivation,ce.BoxDetectObject,ce.SymbolChatObject,ce.TouchPlateObject,ce.TargetableObject,ce.EffectObject,ce.CountDownObject,ce.TelepipeLocation,ce.Pioneer2InvisibleTouchplate,ce.TempleMapDetect,ce.LabInvisibleObject];ui<ci.length;ui++){var di=ci[ui];si.set(di,ti),li.set(di,ri)}function pi(e){return hi.apply(this,arguments)}function hi(){return(hi=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai.get_or_set(t,Object(We.a)(Ae.a.mark(function e(){var n,r,a,i,o;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yi(t,oi.Geometry);case 3:if(n=e.sent,r=n.url,a=n.data,i=new Ln(a,wn.Little),!(o=r.endsWith(".nj")?Kn(i):Qn(i)).length){e.next=12;break}return e.abrupt("return",cr(o[0]));case 12:return $a.warn("Couldn't parse ".concat(r," for ").concat(t.code,".")),e.abrupt("return",ei);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),$a.warn("Couldn't load geometry file for ".concat(t.code,"."),e.t0),e.abrupt("return",ei);case 20:case"end":return e.stop()}},e,null,[[0,16]])}))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _i(e){return mi.apply(this,arguments)}function mi(){return(mi=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ii.get_or_set(t,Object(We.a)(Ae.a.mark(function e(){var n,r,a,i;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yi(t,oi.Texture);case 3:return n=e.sent,r=n.data,a=new Ln(r,wn.Little),i=Qa(a),e.abrupt("return",Xa(i));case 10:return e.prev=10,e.t0=e.catch(0),$a.warn("Couldn't load texture file for ".concat(t.code,"."),e.t0),e.abrupt("return",ni);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fi(e){return vi.apply(this,arguments)}function vi(){return(vi=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",si.get_or_set(t,Object(We.a)(Ae.a.mark(function e(){var n,r,a,i,o;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gi(t,oi.Geometry);case 3:if(n=e.sent,r=n.url,a=n.data,i=new Ln(a,wn.Little),!(o=r.endsWith(".nj")?Kn(i):Qn(i)).length){e.next=12;break}return e.abrupt("return",cr(o[0]));case 12:return $a.warn("Couldn't parse ".concat(r," for ").concat(t.name,".")),e.abrupt("return",ei);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),$a.warn("Couldn't load geometry file for ".concat(t.name,"."),e.t0),e.abrupt("return",ei);case 20:case"end":return e.stop()}},e,null,[[0,16]])}))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wi(e){return bi.apply(this,arguments)}function bi(){return(bi=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",li.get_or_set(t,Object(We.a)(Ae.a.mark(function e(){var n,r,a,i;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gi(t,oi.Texture);case 3:return n=e.sent,r=n.data,a=new Ln(r,wn.Little),i=Qa(a),e.abrupt("return",Xa(i));case 10:return e.prev=10,e.t0=e.catch(0),$a.warn("Couldn't load texture file for ".concat(t.name,"."),e.t0),e.abrupt("return",ni);case 14:case"end":return e.stop()}},e,null,[[0,10]])}))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=Object(We.a)(Ae.a.mark(function e(t,n){var r,a;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oi(t,n),e.next=3,fr(r);case 3:return a=e.sent,e.abrupt("return",{url:r,data:a});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gi(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=Object(We.a)(Ae.a.mark(function e(t,n){var r,a;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ji(t,n),e.next=3,fr(r);case 3:return a=e.sent,e.abrupt("return",{url:r,data:a});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oi(e,t){switch(e){case I.Dubswitch:return"/npcs/".concat(e.code,".").concat(t===oi.Geometry?"xj":"xvm");case I.Hildebear2:return Oi(I.Hildebear,t);case I.Hildeblue2:return Oi(I.Hildeblue,t);case I.RagRappy2:return Oi(I.RagRappy,t);case I.Monest2:return Oi(I.Monest,t);case I.PoisonLily2:return Oi(I.PoisonLily,t);case I.NarLily2:return Oi(I.NarLily,t);case I.GrassAssassin2:return Oi(I.GrassAssassin,t);case I.Dimenian2:return Oi(I.Dimenian,t);case I.LaDimenian2:return Oi(I.LaDimenian,t);case I.SoDimenian2:return Oi(I.SoDimenian,t);case I.DarkBelra2:return Oi(I.DarkBelra,t);case I.SavageWolf2:return Oi(I.SavageWolf,t);case I.BarbarousWolf2:return Oi(I.BarbarousWolf,t);case I.PanArms2:return Oi(I.PanArms,t);case I.Dubchic2:return Oi(I.Dubchic,t);case I.Gilchic2:return Oi(I.Gilchic,t);case I.Garanz2:return Oi(I.Garanz,t);case I.Dubswitch2:return Oi(I.Dubswitch,t);case I.Delsaber2:return Oi(I.Delsaber,t);case I.ChaosSorcerer2:return Oi(I.ChaosSorcerer,t);default:return"/npcs/".concat(e.code,".").concat(t===oi.Geometry?"nj":"xvm")}}function ji(e,t){if(t!==oi.Geometry)return"/objects/".concat(e.pso_id,".xvm");switch(e){case ce.EasterEgg:case ce.ChristmasTree:case ce.ChristmasWreath:case ce.TwentyFirstCentury:case ce.Sonic:case ce.WelcomeBoard:case ce.FloatingJelifish:case ce.RuinsSeal:case ce.Dolphin:case ce.Cacti:case ce.BigBrownRock:case ce.PoisonPlant:case ce.BigBlackRocks:case ce.FallingRock:case ce.DesertFixedTypeBoxBreakableCrystals:case ce.BeeHive:return"/objects/".concat(e.pso_id,".nj");default:return"/objects/".concat(e.pso_id,".xj")}}!function(e){e[e.Geometry=0]="Geometry",e[e.Texture=1]="Texture"}(oi||(oi={}));var Si,xi=l.a.get("rendering/QuestModelManager"),Di=new tr.Vector3(0,800,700),Ci=new tr.Vector3(0,0,0),Ei=new tr.Object3D,Li=function(){function e(t){Object(d.a)(this,e),this.renderer=t,this.quest=void 0,this.area=void 0,this.entity_reaction_disposers=[]}return Object(p.a)(e,[{key:"load_models",value:function(){var e=Object(We.a)(Ae.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h,_,m,f,v,w,b,y,k,g,R,O,j,S;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.quest!==t||this.area!==n){e.next=2;break}return e.abrupt("return");case 2:if(this.quest=t,this.area=n,this.dispose_entity_reactions(),!t||!n){e.next=104;break}return e.prev=6,r=t.episode,a=n.id,i=t.area_variants.find(function(e){return e.area.id===a}),o=i&&i.id||0,e.next=13,Or(r,a,o);case 13:return s=e.sent,e.next=16,gr(r,a,o);case 16:if(l=e.sent,this.add_sections_to_collision_geometry(s,l),this.quest===t&&this.area===n){e.next=20;break}return e.abrupt("return");case 20:this.renderer.collision_geometry=s,this.renderer.render_geometry=l,this.renderer.reset_camera(Di,Ci),this.renderer.reset_entity_models(),u=!0,c=!1,d=void 0,e.prev=27,p=t.npcs[Symbol.iterator]();case 29:if(u=(h=p.next()).done){e.next=45;break}if((_=h.value).area_id!==n.id){e.next=42;break}return e.next=34,pi(_.type);case 34:return m=e.sent,e.next=37,_i(_.type);case 37:if(f=e.sent,this.quest===t&&this.area===n){e.next=40;break}return e.abrupt("return");case 40:v=Wa(_,m,f),this.update_entity_geometry(_,v);case 42:u=!0,e.next=29;break;case 45:e.next=51;break;case 47:e.prev=47,e.t0=e.catch(27),c=!0,d=e.t0;case 51:e.prev=51,e.prev=52,u||null==p.return||p.return();case 54:if(e.prev=54,!c){e.next=57;break}throw d;case 57:return e.finish(54);case 58:return e.finish(51);case 59:w=!0,b=!1,y=void 0,e.prev=62,k=t.objects[Symbol.iterator]();case 64:if(w=(g=k.next()).done){e.next=80;break}if((R=g.value).area_id!==n.id){e.next=77;break}return e.next=69,fi(R.type);case 69:return O=e.sent,e.next=72,wi(R.type);case 72:if(j=e.sent,this.quest===t&&this.area===n){e.next=75;break}return e.abrupt("return");case 75:S=Aa(R,O,j),this.update_entity_geometry(R,S);case 77:w=!0,e.next=64;break;case 80:e.next=86;break;case 82:e.prev=82,e.t1=e.catch(62),b=!0,y=e.t1;case 86:e.prev=86,e.prev=87,w||null==k.return||k.return();case 89:if(e.prev=89,!b){e.next=92;break}throw y;case 92:return e.finish(89);case 93:return e.finish(86);case 94:e.next=102;break;case 96:e.prev=96,e.t2=e.catch(6),xi.error("Couldn't load models for quest ".concat(t.id,", ").concat(n.name,"."),e.t2),this.renderer.collision_geometry=Ei,this.renderer.render_geometry=Ei,this.renderer.reset_entity_models();case 102:e.next=107;break;case 104:this.renderer.collision_geometry=Ei,this.renderer.render_geometry=Ei,this.renderer.reset_entity_models();case 107:case"end":return e.stop()}},e,this,[[6,96],[27,47,51,59],[52,,54,58],[62,82,86,94],[87,,89,93]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"add_sections_to_collision_geometry",value:function(e,t){var n=new tr.Raycaster,r=new tr.Vector3,a=new tr.Vector3(0,-1,0),i=new tr.Vector3(0,1,0),o=!0,s=!1,l=void 0;try{for(var u,c=e.children[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d.geometry.boundingBox.getCenter(r),n.set(r,a);var p=n.intersectObject(t,!0).find(function(e){return null!=e.object.userData.section});n.set(r,i);var h=n.intersectObject(t,!0).find(function(e){return null!=e.object.userData.section}),_=void 0;if(_=p&&h?p.distance<=h.distance?p:h:p||h){var m=d.userData,f=_.object.userData;m.section=f.section}}}catch(v){s=!0,l=v}finally{try{o||null==c.return||c.return()}finally{if(s)throw l}}}},{key:"update_entity_geometry",value:function(e,t){var n=this;this.renderer.add_entity_model(t),this.entity_reaction_disposers.push(Object(y.e)(function(){var r=e.position,a=r.x,i=r.y,o=r.z;t.position.set(a,i,o);var s=e.rotation;t.rotation.set(s.x,s.y,s.z),n.renderer.schedule_render()}))}},{key:"dispose_entity_reactions",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.entity_reaction_disposers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}]),e}(),Bi=n(228),Mi=n.n(Bi)()(tr),Fi=function(){function e(t){var n=this;Object(d.a)(this,e),this._debug=!1,this.camera=void 0,this.controls=void 0,this.scene=new tr.Scene,this.light_holder=new tr.Group,this.renderer=new tr.WebGLRenderer({antialias:!0}),this.render_scheduled=!1,this.light=new tr.HemisphereLight(16777215,5263440,1.2),this.schedule_render=function(){n.render_scheduled||(n.render_scheduled=!0,requestAnimationFrame(n.call_render))},this.call_render=function(){n.render_scheduled=!1,n.render()},this.camera=t,this.controls=new Mi(t,this.dom_element),this.controls.mouseButtons.ORBIT=tr.MOUSE.RIGHT,this.controls.mouseButtons.PAN=tr.MOUSE.LEFT,this.controls.addEventListener("change",this.schedule_render),this.scene.background=new tr.Color(1383457),this.light_holder.add(this.light),this.scene.add(this.light_holder),this.renderer.setPixelRatio(window.devicePixelRatio)}return Object(p.a)(e,[{key:"debug",get:function(){return this._debug},set:function(e){this._debug=e}}]),Object(p.a)(e,[{key:"set_size",value:function(e,t){this.renderer.setSize(e,t),this.schedule_render()}},{key:"pointer_pos_to_device_coords",value:function(e){var t=this.renderer.getSize(new tr.Vector2);return t.width=e.offsetX/t.width*2-1,t.height=e.offsetY/t.height*-2+1,t}},{key:"reset_camera",value:function(e,t){this.controls.reset(),this.camera.position.copy(e),this.camera.lookAt(t)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"dom_element",get:function(){return this.renderer.domElement}}]),e}();var Ii,zi,Pi,Ti,Gi=function(e){function t(){var e;Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new tr.PerspectiveCamera(60,1,10,1e4))))._collision_geometry=new tr.Object3D,e._render_geometry=new tr.Object3D,e._entity_models=new tr.Object3D,e.entity_to_mesh=new Map,e.entity_controls=void 0;var n=new Li(Object(v.a)(e));return Object(y.e)(function(){n.load_models(ja.current_quest,ja.current_area)}),e.entity_controls=new Ha(Object(v.a)(e)),e.dom_element.addEventListener("mousedown",e.entity_controls.on_mouse_down),e.dom_element.addEventListener("mouseup",e.entity_controls.on_mouse_up),e.dom_element.addEventListener("mousemove",e.entity_controls.on_mouse_move),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"debug",get:function(){return this._debug},set:function(e){this._debug!==e&&(this._debug=e,this._render_geometry.visible=e,this.schedule_render())}},{key:"collision_geometry",get:function(){return this._collision_geometry},set:function(e){this.scene.remove(this.collision_geometry),this._collision_geometry=e,this.scene.add(e)}},{key:"render_geometry",get:function(){return this._render_geometry},set:function(e){this.scene.remove(this._render_geometry),this._render_geometry=e,e.visible=this.debug,this.scene.add(e)}},{key:"entity_models",get:function(){return this._entity_models}}]),Object(p.a)(t,[{key:"set_size",value:function(e,n){this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),Object(Ba.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"reset_entity_models",value:function(){this.scene.remove(this._entity_models),this._entity_models=new tr.Group,this.scene.add(this._entity_models),this.entity_to_mesh.clear()}},{key:"add_entity_model",value:function(e){var t=e.userData.entity;this._entity_models.add(e),this.entity_to_mesh.set(t,e),t===ja.selected_entity&&this.entity_controls.try_highlight_selected()}},{key:"get_entity_mesh",value:function(e){return this.entity_to_mesh.get(e)}}]),t}(Fi),Ai=Object(f.a)(Ii=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={debug:!1,save_dialog_open:!1,save_dialog_filename:"Untitled"},n.save_as_clicked=function(e){var t=e?e.endsWith(".qst")?e.slice(0,-4):e:n.state.save_dialog_filename;n.setState({save_dialog_open:!0,save_dialog_filename:t})},n.save_dialog_filename_changed=function(e){n.setState({save_dialog_filename:e})},n.save_dialog_affirmed=function(){ja.save_current_quest_to_file(n.state.save_dialog_filename),n.setState({save_dialog_open:!1})},n.save_dialog_cancelled=function(){n.setState({save_dialog_open:!1})},n.keyup=function(e){e.ctrlKey&&"z"===e.key&&!e.altKey?ja.undo_stack.undo():e.ctrlKey&&"Z"===e.key&&!e.altKey?ja.undo_stack.redo():e.ctrlKey&&e.altKey&&"d"===e.key&&n.setState(function(e){return{debug:!e.debug}})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){ot.on_global_keyup("quest_editor",this.keyup)}},{key:"render",value:function(){var e=ja.current_quest;return a.a.createElement("div",{className:"qe-QuestEditorComponent"},a.a.createElement(Wi,{on_save_as_clicked:this.save_as_clicked}),a.a.createElement("div",{className:"qe-QuestEditorComponent-main"},a.a.createElement(Ca,{quest:e}),a.a.createElement(La,{renderer:(Si||(Si=new Gi),Si),debug:this.state.debug}),a.a.createElement(Sa,{entity:ja.selected_entity})),a.a.createElement(Ui,{is_open:this.state.save_dialog_open,filename:this.state.save_dialog_filename,on_filename_change:this.save_dialog_filename_changed,on_ok:this.save_dialog_affirmed,on_cancel:this.save_dialog_cancelled}))}}]),t}(r.Component))||Ii,Wi=Object(f.a)(zi=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.set_filename=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),ja.load_file(e.file.originFileObj))},n.save_as=function(){n.props.on_save_as_clicked(n.state.filename)},n.undo=function(){ja.undo_stack.undo()},n.redo=function(){ja.undo_stack.redo()},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=ja.undo_stack,t=ja.current_quest,n=t?Array.from(t.area_variants).map(function(e){return e.area}):[],r=ja.current_area,i=r&&r.id;return a.a.createElement("div",{className:"qe-QuestEditorComponent-toolbar"},a.a.createElement(Rn.a,{accept:".qst",showUploadList:!1,onChange:this.set_filename,customRequest:function(){return!1}},a.a.createElement(Vt.a,{icon:"file"},this.state.filename||"Open file...")),a.a.createElement(u.a,{onChange:ja.set_current_area_id,value:i,style:{width:200},disabled:!t},n.map(function(e){return a.a.createElement(u.a.Option,{key:e.id,value:e.id},e.name)})),a.a.createElement(Vt.a,{icon:"save",onClick:this.save_as,disabled:!t},"Save as..."),a.a.createElement(Vt.a,{icon:"undo",onClick:this.undo,title:"Undo"+(e.first_undo?' "'.concat(e.first_undo.description,'"'):""),disabled:!e.can_undo}),a.a.createElement(Vt.a,{icon:"redo",onClick:this.redo,title:"Redo"+(e.first_redo?' "'.concat(e.first_redo.description,'"'):""),disabled:!ja.undo_stack.can_redo}))}}]),t}(r.Component))||zi,Ui=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).name_changed=function(e){n.props.on_filename_change(e.currentTarget.value)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(bn.a,{title:a.a.createElement(a.a.Fragment,null,a.a.createElement(gn.a,{type:"save"})," Save as..."),visible:this.props.is_open,onOk:this.props.on_ok,onCancel:this.props.on_cancel},a.a.createElement(yn.a,{layout:"vertical"},a.a.createElement(yn.a.Item,{label:"Name"},a.a.createElement(kn.a,{autoFocus:!0,maxLength:12,value:this.props.filename,onChange:this.name_changed}))))}}]),t}(a.a.Component),Ni=(n(524),n(235)),Hi=1296321870;function qi(e,t){return e.u32()===Hi?function(e,t){var n=e.u32();return Vi(e.take(n),t)}(e,t):(e.seek_start(0),function(e,t){e.seek_end(16);var n=e.u32();e.seek_start(n);var r=e.u32();return e.seek_start(r),function(e,t){e.seek(4);var n=e.u32();return e.seek_start(n),Vi(e,t)}(e,t)}(e,t))}function Vi(e,t){for(var n=e.u32(),r=e.u32(),a=e.u16(),i=e.u16(),o=(192&i)>>6,s=15&i,l=[],u=0;u<t;u++){e.seek_start(n),n=n+=8*s;var c={tracks:[]};l.push(c);for(var d=[],p=[],h=0;h<s;h++)d.push(e.u32());for(var _=0;_<s;_++){var m=e.u32();p.push(m)}if(1&a){e.seek_start(d.shift());var f=p.shift();f&&c.tracks.push({type:Ti.Position,keyframes:Zi(e,f)})}if(2&a){e.seek_start(d.shift());var v=p.shift();v&&c.tracks.push({type:Ti.Rotation,keyframes:Yi(e,v,r)})}if(4&a){e.seek_start(d.shift());var w=p.shift();w&&c.tracks.push({type:Ti.Scale,keyframes:Zi(e,w)})}}return{motion_data:l,frame_count:r,type:a,interpolation:o,element_count:s}}function Zi(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new g(e.f32(),e.f32(),e.f32())});return n}function Yi(e,t,n){for(var r=[],a=e.position,i=0;i<t;++i)r.push({frame:e.u16(),value:new g(e.u16()*Vn,e.u16()*Vn,e.u16()*Vn)});for(var o=-1,s=0,l=r;s<l.length;s++){var u=l[s].frame;if(u<o||u>=n)return e.seek_start(a),Ki(e,t);o=u}return r}function Ki(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new g(e.i32()*Vn,e.i32()*Vn,e.i32()*Vn)});return n}function Qi(e,t,n){return Xi.apply(this,arguments)}function Xi(){return(Xi=Object(We.a)(Ae.a.mark(function e(t,n,r){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(eo(t,n,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ji(e){return $i.apply(this,arguments)}function $i(){return($i=Object(We.a)(Ae.a.mark(function e(t){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr("/player/animation/animation_".concat(t.toString().padStart(3,"0"),".njm"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eo(e,t,n){return"/player/".concat(e).concat(t).concat(null==n?"":n,".nj")}!function(e){e[e.Linear=0]="Linear",e[e.Spline=1]="Spline",e[e.UserFunction=2]="UserFunction"}(Pi||(Pi={})),function(e){e[e.Position=0]="Position",e[e.Rotation=1]="Rotation",e[e.Scale=2]="Scale"}(Ti||(Ti={}));var to,no,ro,ao,io,oo,so,lo,uo,co,po,ho,_o,mo,fo,vo,wo=30;function bo(e,t){var n=t.interpolation===Pi.Spline?tr.InterpolateSmooth:tr.InterpolateLinear,r=[];return t.motion_data.forEach(function(t,a){var i=e.get_bone(a);i&&t.tracks.forEach(function(e){var t=e.type,o=e.keyframes,s=[],l=[],u=!0,c=!1,d=void 0;try{for(var p,h=o[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value;if(s.push(_.frame/wo),t===Ti.Rotation){var m=i.evaluation_flags.zxy_rotation_order?"ZXY":"ZYX",f=(new tr.Quaternion).setFromEuler(new tr.Euler(_.value.x,_.value.y,_.value.z,m));l.push(f.x,f.y,f.z,f.w)}else l.push(_.value.x,_.value.y,_.value.z)}}catch(w){c=!0,d=w}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}if(t===Ti.Rotation)r.push(new tr.QuaternionKeyframeTrack(".bones[".concat(a,"].quaternion"),s,l,n));else{var v=t===Ti.Position?".bones[".concat(a,"].position"):".bones[".concat(a,"].scale");r.push(new tr.VectorKeyframeTrack(v,s,l,n))}})}),new tr.AnimationClip("Animation",(t.frame_count-1)/wo,r).optimize()}var yo,ko,go=l.a.get("stores/ModelViewerStore"),Ro=new Map,Oo=new Map,jo=new(to=y.m.ref,no=y.m.ref,ro=y.m.ref,ao=y.m.ref,io=y.m.ref,oo=function(){function e(){var t=this;Object(d.a)(this,e),this.models=[new ze("HUmar",1,10,new Set([6])),new ze("HUnewearl",1,10,new Set),new ze("HUcast",5,0,new Set),new ze("HUcaseal",5,0,new Set),new ze("RAmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new ze("RAmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new ze("RAcast",5,0,new Set),new ze("RAcaseal",5,0,new Set),new ze("FOmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new ze("FOmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new ze("FOnewm",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new ze("FOnewearl",1,10,new Set([0,1,2,3,4,5,6,7,8,9]))],this.animations=new Array(572).fill(void 0).map(function(e,t){return new Pe(t,"Animation ".concat(t+1))}),this.clock=new tr.Clock,Object(w.a)(this,"current_player_model",so,this),Object(w.a)(this,"current_model",lo,this),Object(w.a)(this,"current_bone_count",uo,this),Object(w.a)(this,"current_obj3d",co,this),Object(w.a)(this,"animation",po,this),Object(w.a)(this,"animation_playing",ho,this),Object(w.a)(this,"animation_frame_rate",_o,this),Object(w.a)(this,"animation_frame",mo,this),Object(w.a)(this,"animation_frame_count",fo,this),this.has_skeleton=!1,Object(w.a)(this,"show_skeleton",vo,this),this.set_animation_frame_rate=Object(y.d)("set_animation_frame_rate",function(e){t.animation&&(t.animation.mixer.timeScale=e/wo,t.animation_frame_rate=e)}),this.set_animation_frame=Object(y.d)("set_animation_frame",function(e){if(t.animation){var n=t.animation_frame_count;e>n&&(e=1),e<1&&(e=n),t.animation.action.time=(e-1)/wo,t.animation_frame=e}}),this.load_model=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_player_ninja_object(n);case 2:r=e.sent,t.set_model(r,!0,n),t.current_bone_count=64;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_animation=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_nj_motion(n);case 2:r=e.sent,t.current_model&&t.set_animation(bo(t.current_model,r),n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_file=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r,a,i,o,s,l;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pa(n);case 3:r=e.sent,a=new Ln(r,wn.Little),n.name.endsWith(".nj")?(i=Kn(a)[0],t.set_model(i,!0)):n.name.endsWith(".xj")?(o=Qn(a)[0],t.set_model(o,!1)):n.name.endsWith(".njm")?t.current_model&&(s=qi(a,t.current_bone_count),t.set_animation(bo(t.current_model,s))):n.name.endsWith(".xvm")?t.current_model&&(l=Qa(a),t.set_textures(Xa(l))):go.error('Unknown file extension in filename "'.concat(n.name,'".')),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),go.error("Couldn't read file.",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),this.pause_animation=Object(y.d)("pause_animation",function(){t.animation&&(t.animation.action.paused=!0,t.animation_playing=!1,t.clock.stop())}),this.toggle_animation_playing=Object(y.d)("toggle_animation_playing",function(){t.animation&&(t.animation.action.paused=!t.animation.action.paused,t.animation_playing=!t.animation.action.paused,t.animation_playing?t.clock.start():t.clock.stop())}),this.update_animation_frame=Object(y.d)("update_animation_frame",function(){if(t.animation&&t.animation_playing){var e=t.animation.action.time;t.animation_frame=Math.round(e*wo)+1}}),this.set_animation=Object(y.d)("set_animation",function(e,n){var r;t.current_obj3d&&t.current_obj3d instanceof tr.SkinnedMesh&&(t.animation?(t.animation.mixer.stopAllAction(),r=t.animation.mixer):r=new tr.AnimationMixer(t.current_obj3d),t.animation={player_animation:n,mixer:r,clip:e,action:r.clipAction(e)},t.clock.start(),t.animation.action.play(),t.animation_playing=!0,t.animation_frame_count=Math.round(wo*e.duration)+1)}),this.set_model=Object(y.d)("set_model",function(e,n,r){t.current_obj3d&&t.animation&&(t.animation.mixer.stopAllAction(),t.animation.mixer.uncacheRoot(t.current_obj3d),t.animation=void 0),t.current_player_model=r,t.current_model=e,t.current_bone_count=e.bone_count(),t.has_skeleton=n,t.set_obj3d()}),this.set_textures=Object(y.d)("set_textures",function(e){t.set_obj3d(e)}),this.set_obj3d=function(e){if(t.current_model){var n,r=e&&e.map(function(e){return new tr.MeshLambertMaterial({skinning:t.has_skeleton,map:e,side:tr.DoubleSide,alphaTest:.5})}),a=(n=t.has_skeleton?function(e,t){return Pa(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia,tr.SkinnedMesh)}(cr(t.current_model),r):za(cr(t.current_model),r)).geometry.boundingBox,i=a.max.y-a.min.y;n.translateY(-i/2-a.min.y),t.current_obj3d=n}}}return Object(p.a)(e,[{key:"add_to_bone",value:function(e,t,n){var r=e.get_bone(n);r&&(r.evaluation_flags.hidden=!1,r.evaluation_flags.break_child_trace=!1,r.children.push(t))}},{key:"get_player_ninja_object",value:function(){var e=Object(We.a)(Ae.a.mark(function e(t){var n;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Ro.get(t.name))){e.next=5;break}return e.abrupt("return",n);case 5:return n=this.get_all_assets(t),Ro.set(t.name,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_all_assets",value:function(){var e=Object(We.a)(Ae.a.mark(function e(t){var n,r,a,i,o,s,l,u;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qi(t.name,"Body");case 2:if(n=e.sent,r=Kn(new Ln(n,wn.Little))[0]){e.next=6;break}throw new Error("Couldn't parse body for player class ".concat(t.name,"."));case 6:return e.next=8,Qi(t.name,"Head",0);case 8:if(a=e.sent,(i=Kn(new Ln(a,wn.Little))[0])&&this.add_to_bone(r,i,59),!(t.hair_styles_count>0)){e.next=23;break}return e.next=14,Qi(t.name,"Hair",0);case 14:if(o=e.sent,(s=Kn(new Ln(o,wn.Little))[0])&&this.add_to_bone(r,s,59),!t.hair_styles_with_accessory.has(0)){e.next=23;break}return e.next=20,Qi(t.name,"Accessory",0);case 20:l=e.sent,(u=Kn(new Ln(l,wn.Little))[0])&&this.add_to_bone(r,u,59);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_nj_motion",value:function(){var e=Object(We.a)(Ae.a.mark(function e(t){var n,r=this;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Oo.get(t.id))){e.next=5;break}return e.abrupt("return",n);case 5:return n=Ji(t.id).then(function(e){return qi(new Ln(e,wn.Little),r.current_bone_count)}),Oo.set(t.id,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),so=Object(b.a)(oo.prototype,"current_player_model",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lo=Object(b.a)(oo.prototype,"current_model",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=Object(b.a)(oo.prototype,"current_bone_count",[ro],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),co=Object(b.a)(oo.prototype,"current_obj3d",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=Object(b.a)(oo.prototype,"animation",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ho=Object(b.a)(oo.prototype,"animation_playing",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_o=Object(b.a)(oo.prototype,"animation_frame_rate",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wo}}),mo=Object(b.a)(oo.prototype,"animation_frame",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fo=Object(b.a)(oo.prototype,"animation_frame_count",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vo=Object(b.a)(oo.prototype,"show_skeleton",[y.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oo),So=(n(526),Object(f.a)(yo=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-m-AnimationSelectionComponent"},a.a.createElement("ul",null,jo.animations.map(function(e){var t=jo.animation&&jo.animation.player_animation&&jo.animation.player_animation.id===e.id;return a.a.createElement("li",{key:e.id,className:t?"selected":void 0,onClick:function(){return jo.load_animation(e)}},e.name)})))}}]),t}(r.Component))||yo),xo=(n(539),n(132)),Do=(n(530),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-m-ModelSelectionComponent"},a.a.createElement(xo.a,{itemLayout:"horizontal",dataSource:jo.models,size:"small",renderItem:function(e){var t=jo.current_player_model===e;return a.a.createElement(xo.a.Item,{onClick:function(){return jo.load_model(e)}},a.a.createElement(xo.a.Item.Meta,{title:a.a.createElement("span",{className:"v-m-ModelSelectionComponent-model"+(t?" selected":"")},e.name)}))}}))}}]),t}(r.Component));n(531);var Co,Eo,Lo,Bo,Mo,Fo,Io=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new tr.PerspectiveCamera(75,1,1,200)))).model=void 0,e.skeleton_helper=void 0,Object(y.e)(function(){e.set_model(jo.current_obj3d);var t=jo.show_skeleton;e.skeleton_helper&&(e.skeleton_helper.visible=t,e.schedule_render()),jo.animation&&e.schedule_render(),jo.animation_playing||(jo.animation_frame,e.schedule_render())}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_size",value:function(e,n){this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),Object(Ba.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"render",value:function(){jo.animation&&(jo.animation.mixer.update(jo.clock.getDelta()),jo.update_animation_frame()),this.light_holder.quaternion.copy(this.camera.quaternion),Object(Ba.a)(Object(_.a)(t.prototype),"render",this).call(this),jo.animation&&!jo.animation.action.paused&&this.schedule_render()}},{key:"set_model",value:function(e){this.model!==e&&(this.model&&(this.scene.remove(this.model),this.scene.remove(this.skeleton_helper),this.skeleton_helper=void 0),e&&(this.scene.add(e),this.skeleton_helper=new tr.SkeletonHelper(e),this.skeleton_helper.visible=jo.show_skeleton,this.skeleton_helper.material.linewidth=3,this.scene.add(this.skeleton_helper),this.reset_camera(new tr.Vector3(0,10,20),new tr.Vector3(0,0,0))),this.model=e,this.schedule_render())}}]),t}(Fi),zo=Object(f.a)(Co=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){jo.current_model||jo.load_model(jo.models[5])}},{key:"render",value:function(){return a.a.createElement("div",{className:"v-m-ModelViewerComponent"},a.a.createElement(Po,null),a.a.createElement("div",{className:"v-m-ModelViewerComponent-main"},a.a.createElement(Do,null),a.a.createElement(So,null),a.a.createElement(La,{renderer:(ko||(ko=new Io),ko),on_will_unmount:jo.pause_animation})))}}]),t}(r.Component))||Co,Po=Object(f.a)(Eo=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.load_file=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),jo.load_file(e.file.originFileObj))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"v-m-ModelViewerComponent-toolbar"},a.a.createElement(Rn.a,{accept:".nj, .njm, .xj, .xvm",showUploadList:!1,onChange:this.load_file,customRequest:function(){return!1}},a.a.createElement(Vt.a,{icon:"file"},this.state.filename||"Open file...")),jo.animation&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Vt.a,{icon:jo.animation_playing?"pause":"caret-right",onClick:jo.toggle_animation_playing},jo.animation_playing?"Pause animation":"Play animation"),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame rate:"),a.a.createElement(Te.a,{value:jo.animation_frame_rate,onChange:function(e){return jo.set_animation_frame_rate(e||0)},min:1,step:1})),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame:"),a.a.createElement(Te.a,{value:jo.animation_frame,onChange:function(e){return jo.set_animation_frame(e||0)},step:1}),a.a.createElement("span",null,"/ ",jo.animation_frame_count))),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Show skeleton:"),a.a.createElement(Ni.a,{checked:jo.show_skeleton,onChange:function(e){return jo.show_skeleton=e}})))}}]),t}(r.Component))||Eo,To=l.a.get("stores/TextureViewerStore"),Go=new(Lo=y.m.ref,Bo=function e(){var t=this;Object(d.a)(this,e),Object(w.a)(this,"current_xvm",Mo,this),this.load_file=function(){var e=Object(We.a)(Ae.a.mark(function e(n){var r;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pa(n);case 3:r=e.sent,t.current_xvm=Qa(new Ln(r,wn.Little)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),To.error("Couldn't read file.",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Mo=Object(b.a)(Bo.prototype,"current_xvm",[Lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo),Ao=l.a.get("rendering/TextureRenderer");var Wo,Uo,No=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new tr.OrthographicCamera(-400,400,300,-300,1,10)))).quad_meshes=[],e.render_textures=function(t){var n=10*(t.textures.length-1),r=0,a=!0,i=!1,o=void 0;try{for(var s,l=t.textures[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n+=u.width,r=Math.max(r,u.height)}}catch(y){i=!0,o=y}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}var c=-Math.floor(n/2),d=-Math.floor(r/2),p=!0,h=!1,_=void 0;try{for(var m,f=t.textures[Symbol.iterator]();!(p=(m=f.next()).done);p=!0){var v=m.value,w=void 0;try{w=Ja(v)}catch(k){Ao.warn("Couldn't convert XVM texture.",k)}var b=new tr.Mesh(e.create_quad(c,d+Math.floor((r-v.height)/2),v.width,v.height),w?new tr.MeshBasicMaterial({map:w,transparent:!0}):new tr.MeshBasicMaterial({color:16711935}));e.quad_meshes.push(b),e.scene.add(b),c+=10+v.width}}catch(y){h=!0,_=y}finally{try{p||null==f.return||f.return()}finally{if(h)throw _}}},e.controls.enableRotate=!1,Object(y.e)(function(){var t;(t=e.scene).remove.apply(t,Object(Zt.a)(e.quad_meshes));var n=Go.current_xvm;n&&e.render_textures(n),e.reset_camera(new tr.Vector3(0,0,5),new tr.Vector3),e.schedule_render()}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_size",value:function(e,n){this.camera.left=-Math.floor(e/2),this.camera.right=Math.ceil(e/2),this.camera.top=Math.floor(n/2),this.camera.bottom=-Math.ceil(n/2),this.camera.updateProjectionMatrix(),Object(Ba.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"create_quad",value:function(e,t,n,r){var a=new tr.PlaneGeometry(n,r,1,1);return a.faceVertexUvs=[[[new tr.Vector2(0,0),new tr.Vector2(0,1),new tr.Vector2(1,0)],[new tr.Vector2(0,1),new tr.Vector2(1,1),new tr.Vector2(1,0)]]],a.translate(e+n/2,t+r/2,-5),a}}]),t}(Fi),Ho=(n(533),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-t-TextureViewerComponent"},a.a.createElement(qo,null),a.a.createElement(La,{renderer:(Fo||(Fo=new No),Fo),className:"v-t-TextureViewerComponent-renderer"}))}}]),t}(r.Component)),qo=Object(f.a)(Wo=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.load_file=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),Go.load_file(e.file.originFileObj))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"v-t-TextureViewerComponent-toolbar"},a.a.createElement(Rn.a,{accept:".xvm",showUploadList:!1,onChange:this.load_file,customRequest:function(){return!1}},a.a.createElement(Vt.a,{icon:"file"},this.state.filename||"Open file...")))}}]),t}(r.Component))||Wo,Vo=(n(534),wt(function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-ViewerComponent"},a.a.createElement(Ft.a,{type:"card"},a.a.createElement(Ft.a.TabPane,{tab:"Models",key:"models"},a.a.createElement(zo,null)),a.a.createElement(Ft.a.TabPane,{tab:"Textures",key:"textures"},a.a.createElement(Ho,null))))}}]),t}(r.Component))),Zo=wt(Ai),Yo=wt(function(){return a.a.createElement("section",{className:"ho-HuntOptimizerComponent"},a.a.createElement(Ft.a,{type:"card"},a.a.createElement(vn,{tab:"Optimize",key:"optimize"},a.a.createElement(fn,null)),a.a.createElement(vn,{tab:"Methods",key:"methods"},a.a.createElement(Nt,null))))}),Ko=wt(mt),Qo=Object(f.a)(Uo=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).menu_clicked=function(e){ot.current_tool=e.key},n.keyup=function(e){ot.dispatch_global_keyup(e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.keyup)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.keyup)}},{key:"render",value:function(){var e;switch(ot.current_tool){case"viewer":e=a.a.createElement(Vo,null);break;case"quest_editor":e=a.a.createElement(Zo,null);break;case"hunt_optimizer":e=a.a.createElement(Yo,null);break;case"dps_calc":e=a.a.createElement(Ko,null)}return a.a.createElement("div",{className:"ApplicationComponent"},a.a.createElement("div",{className:"ApplicationComponent-navbar"},a.a.createElement("h1",{className:"ApplicationComponent-heading"},"Phantasmal World"),a.a.createElement(c.b,{className:"ApplicationComponent-heading-menu",onClick:this.menu_clicked,selectedKeys:[ot.current_tool],mode:"horizontal"},a.a.createElement(c.b.Item,{key:"viewer"},"Viewer",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"quest_editor"},"Quest Editor",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"hunt_optimizer"},"Hunt Optimizer")),a.a.createElement("div",{className:"ApplicationComponent-server-select"},a.a.createElement("span",null,"Server:"),a.a.createElement(u.a,{defaultValue:de.Ephinea,style:{width:120}},a.a.createElement(u.a.Option,{value:de.Ephinea},de.Ephinea)))),a.a.createElement("div",{className:"ApplicationComponent-main"},e))}}]),t}(r.Component))||Uo;n(535),n(536),n(537);l.a.useDefaults({defaultLevel:l.a[Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_LOG_LEVEL||"OFF"]}),o.a.render(a.a.createElement(Qo,null),document.getElementById("phantasmal-world-root"))}},[[245,1,2]]]);
//# sourceMappingURL=main.1355dae7.chunk.js.map