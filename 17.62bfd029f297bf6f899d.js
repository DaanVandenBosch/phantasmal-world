(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{463:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"g",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"j",(function(){return h})),i.d(e,"h",(function(){return o})),i.d(e,"i",(function(){return c})),i.d(e,"d",(function(){return d})),i.d(e,"a",(function(){return u})),i.d(e,"e",(function(){return b})),i.d(e,"f",(function(){return _}));var a=i(40);class n{constructor(t,e){this.x=t,this.y=e}get u(){return this.x}get v(){return this.y}}function s(t,e){return new n(t.x-e.x,t.y-e.y)}class r{constructor(t,e,i){this.x=t,this.y=e,this.z=i}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){const t=1/this.magnitude();this.x*=t,this.y*=t,this.z*=t}}function h(t,e){return new r(t.x-e.x,t.y-e.y,t.z-e.z)}function o(t,e){return new r(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}function c(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}class l{constructor(t){this.data=t,Object(a.d)(9===t.length,"data should be of length 9.")}static of(t,e,i,a,n,s,r,h,o){return new l(new Float32Array([t,a,r,e,n,h,i,s,o]))}static identity(){return l.of(1,0,0,0,1,0,0,0,1)}get(t,e){return this.data[t+3*e]}set(t,e,i){this.data[t+3*e]=i}clone(){return new l(new Float32Array(this.data))}transpose(){let t;const e=this.data;t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t}inverse(){const t=this.clone();return t.invert(),t}invert(){const t=this.data[0],e=this.data[1],i=this.data[2],a=this.data[3],n=this.data[4],s=this.data[5],r=this.data[6],h=this.data[7],o=this.data[8],c=o*n-s*h,l=s*r-o*a,d=h*a-n*r,u=t*c+e*l+i*d;if(0===u)return this.data[0]=1,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=1,this.data[5]=0,this.data[6]=0,this.data[7]=0,void(this.data[8]=1);const b=1/u;this.data[0]=c*b,this.data[1]=(i*h-o*e)*b,this.data[2]=(s*e-i*n)*b,this.data[3]=l*b,this.data[4]=(o*t-i*r)*b,this.data[5]=(i*a-s*t)*b,this.data[6]=d*b,this.data[7]=(e*r-h*t)*b,this.data[8]=(n*t-e*a)*b}}function d(t,e,i){const a=t.get(0,0)*e.x+t.get(0,1)*e.y+t.get(0,2)*e.z,n=t.get(1,0)*e.x+t.get(1,1)*e.y+t.get(1,2)*e.z,s=t.get(2,0)*e.x+t.get(2,1)*e.y+t.get(2,2)*e.z;i.x=a,i.y=n,i.z=s}class u{constructor(t){this.data=t,Object(a.d)(16===t.length,"data should be of length 16.")}static of(t,e,i,a,n,s,r,h,o,c,l,d,b,f,_,w){return new u(new Float32Array([t,n,o,b,e,s,c,f,i,r,l,_,a,h,d,w]))}static identity(){return u.of(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}static translation(t,e,i){return u.of(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1)}static scale(t,e,i){return u.of(t,0,0,1,0,e,0,1,0,0,i,1,0,0,0,1)}static compose(t,e,i){const a=e.w,n=e.x,s=e.y,r=e.z,h=n+n,o=s+s,c=r+r,l=n*h,d=n*o,b=n*c,f=s*o,_=s*c,w=r*c,p=a*h,y=a*o,v=a*c,g=i.x,m=i.y,x=i.z;return u.of((1-(f+w))*g,(d-v)*m,(b+y)*x,t.x,(d+v)*g,(1-(l+w))*m,(_-p)*x,t.y,(b-y)*g,(_+p)*m,(1-(l+f))*x,t.z,0,0,0,1)}get(t,e){return this.data[t+4*e]}set(t,e,i){this.data[t+4*e]=i}set_all(t,e,i,a,n,s,r,h,o,c,l,d,u,b,f,_){this.data[0]=t,this.data[1]=n,this.data[2]=o,this.data[3]=u,this.data[4]=e,this.data[5]=s,this.data[6]=c,this.data[7]=b,this.data[8]=i,this.data[9]=r,this.data[10]=l,this.data[11]=f,this.data[12]=a,this.data[13]=h,this.data[14]=d,this.data[15]=_}transpose(){let t;const e=this.data;t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t}clone(){return new u(new Float32Array(this.data))}normal_mat3(){const t=l.of(this.data[0],this.data[4],this.data[8],this.data[1],this.data[5],this.data[9],this.data[2],this.data[6],this.data[10]);return t.invert(),t.transpose(),t}}function b(t,e){const i=new u(new Float32Array(16));return f(i.data,t,e),i}function f(t,e,i){for(let a=0;a<4;a++)for(let n=0;n<4;n++)for(let s=0;s<4;s++)t[a+4*n]+=e.data[a+4*s]*i.data[s+4*n]}function _(t,e,i){const a=t.get(0,0)*e.x+t.get(0,1)*e.y+t.get(0,2)*e.z+t.get(0,3),n=t.get(1,0)*e.x+t.get(1,1)*e.y+t.get(1,2)*e.z+t.get(1,3),s=t.get(2,0)*e.x+t.get(2,1)*e.y+t.get(2,2)*e.z+t.get(2,3);i.x=a,i.y=n,i.z=s}},532:function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return h})),i.d(e,"a",(function(){return o}));const a=180/Math.PI,n=Math.PI/180;function s(t){return t*a}function r(t){return t*n}function h(t,e){return(t%e+e)%e}function o(t,e,i){return Math.max(e,Math.min(t,i))}},555:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var a=i(146),n=i(142),s=(i(593),i(2));const r=28;class h extends n.a{constructor(t,e){super(e),this.gui_store=t,this.tabs=[],this.bar_element=Object(s.h)({className:"core_TabContainer_Bar"}),this.panes_element=Object(s.h)({className:"core_TabContainer_Panes"}),this.element=Object(s.h)({className:"core_TabContainer"}),this.bar_mousedown=t=>{if(t.target instanceof HTMLElement){const e=t.target.dataset.key;e&&this.activate_key(e)}},this.bar_element.onmousedown=this.bar_mousedown;for(const t of e.tabs){const e=Object(s.s)({className:"core_TabContainer_Tab",data:{key:t.key}},t.title);this.bar_element.append(e);const i=this.disposable(new a.a(t.create_view)),n=Object.assign(Object.assign({},t),{tab_element:e,lazy_view:i});this.tabs.push(n),this.panes_element.append(i.element)}this.element.append(this.bar_element,this.panes_element),this.finalize_construction()}get children(){return this.tabs.flatMap(t=>t.lazy_view.children)}resize(t,e){super.resize(t,e),this.bar_element.style.width=`${t}px`,this.bar_element.style.height=`${r}px`;const i=e-r;this.panes_element.style.width=`${t}px`,this.panes_element.style.height=`${i}px`;for(const e of this.tabs)e.lazy_view.resize(t,i);return this}activate(){if(this.active_tab)this.activate_tab(this.active_tab);else{let t;for(const e of this.tabs)null!=e.path&&this.gui_store.path.val.startsWith(e.path)&&(t=e);t?this.activate_tab(t):this.tabs.length&&this.activate_tab(this.tabs[0])}}activate_key(t){for(const e of this.tabs)if(e.key===t){this.activate_tab(e);break}}activate_tab(t){this.active_tab!==t&&(this.active_tab&&(this.active_tab.tab_element.classList.remove("active"),this.active_tab.lazy_view.visible.val=!1,this.active_tab.lazy_view.deactivate()),this.active_tab=t,t.tab_element.classList.add("active"),t.lazy_view.visible.val=!0),null!=t.path&&(this.gui_store.set_path_prefix(t.path),t.lazy_view.activate())}}},593:function(t,e,i){},594:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r}));var a,n=i(463),s=i(532);!function(t){t[t.Orthographic=0]="Orthographic",t[t.Perspective=1]="Perspective"}(a||(a={}));class r{constructor(t,e,i){this.viewport_width=t,this.viewport_height=e,this.projection=i,this.fov=Object(s.b)(75),this.target=new n.c(0,0,0),this.radius=0,this.azimuth=0,this.polar=Math.PI/2,this._zoom=1,this.view_matrix=n.a.identity(),this.projection_matrix=n.a.identity(),this.set_viewport(t,e)}get effective_fov(){return 2*Math.atan(Math.tan(.5*this.fov)/this._zoom)}set_viewport(t,e){switch(this.viewport_width=t,this.viewport_height=e,this.projection){case a.Orthographic:{const i=t,a=e,n=0,s=100;this.projection_matrix.set_all(2/i,0,0,0,0,2/a,0,0,0,0,2/(n-s),0,0,0,0,1)}break;case a.Perspective:{const i=t/e,a=.1,n=2e3,s=a*Math.tan(.5*this.fov)/this._zoom,r=2*s,h=2*i*s;this.projection_matrix.set_all(2*a/h,0,0,0,0,2*a/r,0,0,0,0,(a+n)/(a-n),2*a*n/(a-n),0,0,-1,0)}}}pan(t,e,i){let n;switch(this.projection){case a.Orthographic:n=1;break;case a.Perspective:n=3*this.radius*Math.tan(.5*this.effective_fov)/this.viewport_width}return t*=n,e*=n,this.target.x+=t,this.target.y+=e,this.radius+=i,this.update_matrix(),this}rotate(t,e){this.azimuth+=t;const i=Math.PI/1800;return this.polar=Object(s.a)(this.polar+e,i,Math.PI-i),this.update_matrix(),this}zoom(t){return this._zoom*=t,this.target.x*=t,this.target.y*=t,this.target.z*=t,this.update_matrix(),this}reset(){return this.target.x=0,this.target.y=0,this.target.z=0,this._zoom=1,this.update_matrix(),this}update_matrix(){const t=this.radius*Math.sin(this.polar),e=new n.c(this.target.x+t*Math.sin(this.azimuth),this.target.y+this.radius*Math.cos(this.polar),this.target.z+t*Math.cos(this.azimuth)),i=Object(n.j)(e,this.target);i.normalize();const a=Object(n.h)(new n.c(0,1,0),i);a.normalize();const s=Object(n.h)(i,a),r=this._zoom;this.view_matrix.set_all(a.x*r,a.y,a.z,-Object(n.i)(a,e),s.x,s.y*r,s.z,-Object(n.i)(s,e),i.x,i.y,i.z*r,-Object(n.i)(i,e),0,0,0,1)}}},909:function(t,e,i){"use strict";i.r(e),i.d(e,"initialize_viewer",(function(){return c}));var a=i(555),n=i(82);class s extends n.a{constructor(t,e,i){super(),this.tab_container=this.add(new a.a(t,{class:"viewer_ViewerView",tabs:[{title:"Models",key:"model",path:"/models",create_view:e},{title:"Textures",key:"texture",path:"/textures",create_view:i}]})),this.finalize_construction()}get element(){return this.tab_container.element}resize(t,e){this.tab_container.resize(t,e)}}var r=i(15),h=i(594),o=function(t,e,i,a){return new(i||(i=Promise))((function(n,s){function r(t){try{o(a.next(t))}catch(t){s(t)}}function h(t){try{o(a.throw(t))}catch(t){s(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,h)}o((a=a.apply(t,e||[])).next())}))};function c(t,e,a,n){const c=new r.a;return{view:new s(a,()=>o(this,void 0,void 0,(function*(){const{ModelController:s}=yield i.e(89).then(i.bind(null,831)),{ModelView:r}=yield i.e(19).then(i.bind(null,910)),{CharacterClassAssetLoader:o}=yield Promise.all([i.e(0),i.e(18)]).then(i.bind(null,832)),{ModelToolBarView:l}=yield Promise.all([i.e(0),i.e(11)]).then(i.bind(null,833)),{ModelStore:d}=yield Promise.all([i.e(0),i.e(24)]).then(i.bind(null,911)),{ModelToolBarController:u}=yield Promise.all([i.e(0),i.e(15)]).then(i.bind(null,834)),{CharacterClassOptionsView:b}=yield i.e(23).then(i.bind(null,835)),{CharacterClassOptionsController:f}=yield i.e(88).then(i.bind(null,836)),_=c.add(new o(t)),w=c.add(new d(a,_,e)),p=new s(w),y=new u(w),v=new f(w);let g;if(a.feature_active("webgpu")){const{WebgpuRenderer:e}=yield i.e(3).then(i.bind(null,905)),{ModelGfxRenderer:a}=yield i.e(1).then(i.bind(null,906));g=new a(w,new e(h.b.Perspective,t))}else if(a.feature_active("webgl")){const{WebglRenderer:t}=yield i.e(2).then(i.bind(null,903)),{ModelGfxRenderer:e}=yield i.e(1).then(i.bind(null,906));g=new e(w,new t(h.b.Perspective))}else{const{ModelRenderer:t}=yield Promise.all([i.e(4),i.e(0),i.e(16)]).then(i.bind(null,837));g=new t(w,n())}return new r(p,new l(y),new b(v),g)})),()=>o(this,void 0,void 0,(function*(){const{TextureController:e}=yield i.e(12).then(i.bind(null,838)),{TextureView:n}=yield i.e(13).then(i.bind(null,839)),{TextureRenderer:s}=yield i.e(20).then(i.bind(null,840)),r=c.add(new e);let o;if(a.feature_active("webgpu")){const{WebgpuRenderer:e}=yield i.e(3).then(i.bind(null,905));o=new s(r,new e(h.b.Orthographic,t))}else{const{WebglRenderer:t}=yield i.e(2).then(i.bind(null,903));o=new s(r,new t(h.b.Orthographic))}return new n(r,o)}))),dispose(){c.dispose()}}}}}]);