(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{490:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i(42),o=(i(539),i(139)),n=i(2);class r extends s.a{constructor(e,...t){super(e instanceof s.a?void 0:e),this.element=Object(n.h)({className:"core_ToolBar"}),this.height=33,this.element.style.height=this.height+"px",this.children=e instanceof s.a?[e,...t]:t;for(const e of this.children)if(this.disposable(e),e instanceof o.a&&e.label){const t=Object(n.h)({className:"core_ToolBar_group"});"left"===e.preferred_label_position||"top"===e.preferred_label_position?t.append(e.label.element,e.element):t.append(e.element,e.label.element),this.element.append(t)}else this.element.append(e.element);this.finalize_construction(r)}set_enabled(e){super.set_enabled(e);for(const t of this.children)t.enabled.val=e}}},493:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(139),o=i(18),n=(i(494),i(33)),r=i(2);class a extends s.a{constructor(e,t,i,s,o){super(o),this.element=Object(r.s)({className:t+" core_Input"}),this._value=new n.a(this,e,this.set_value),this.value=this._value,this.input_element=Object(r.m)({className:s+" core_Input_inner"}),this.input_element.type=i,this.input_element.addEventListener("change",()=>{this._value.set_val(this.get_value(),{silent:!1})}),this.input_element.addEventListener("keydown",e=>{"Enter"===e.key&&this._value.set_val(this.get_value(),{silent:!1})}),o&&o.readonly&&this.set_attr("readOnly",!0),this.element.append(this.input_element)}set_enabled(e){super.set_enabled(e),this.input_element.disabled=!e}set_attr(e,t,i){if(null==t)return;const s=this.input_element,n=i||(e=>e);Object(o.a)(t)?(s[e]=n(t.val),this.disposable(t.observe(({value:t})=>s[e]=n(t)))):s[e]=n(t)}}},494:function(e,t,i){},503:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i(493);i(527);class o extends s.a{constructor(e=0,t){if(super(e,"core_NumberInput","number","core_NumberInput_inner",t),this.preferred_label_position="left",t){const{min:e,max:i,step:s,width:o}=t;this.set_attr("min",e,String),this.set_attr("max",i,String),this.input_element.step="any",this.set_attr("step",s,String),null!=o&&(this.element.style.width=o+"px")}t&&null!=t.round_to&&t.round_to>=0?this.rounding_factor=Math.pow(10,t.round_to):this.rounding_factor=1,this.set_value(e),this.finalize_construction(o)}get_value(){return parseFloat(this.input_element.value)}set_value(e){this.input_element.valueAsNumber=Math.round(this.rounding_factor*e)/this.rounding_factor}}},525:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i(142),o=i(2),n=(i(542),i(18)),r=i(33),a=i(14);class d extends s.a{constructor(e){var t;super(e),this.x=0,this.y=0,this.prev_mouse_x=0,this.prev_mouse_y=0,this._title=new r.a(this,"",this.set_title),this._description=new r.a(this,"",this.set_description),this._content=new r.a(this,"",this.set_content),this._ondismiss=Object(a.a)(),this.children=[],this.title=this._title,this.description=this._description,this.content=this._content,this.ondismiss=this._ondismiss,this.mousedown=e=>{this.prev_mouse_x=e.clientX,this.prev_mouse_y=e.clientY,window.addEventListener("mousemove",this.window_mousemove),window.addEventListener("mouseup",this.window_mouseup)},this.window_mousemove=e=>{e.preventDefault(),this.set_position(this.x+e.clientX-this.prev_mouse_x,this.y+e.clientY-this.prev_mouse_y),this.prev_mouse_x=e.clientX,this.prev_mouse_y=e.clientY},this.window_mouseup=e=>{e.preventDefault(),window.removeEventListener("mousemove",this.window_mousemove),window.removeEventListener("mouseup",this.window_mouseup)},this.element=Object(o.q)({className:"core_Dialog",tabIndex:0},this.header_element=Object(o.i)(),this.description_element=Object(o.h)({className:"core_Dialog_description"}),this.content_element=Object(o.h)({className:"core_Dialog_body"}),Object(o.h)({className:"core_Dialog_footer"},...null!==(t=null==e?void 0:e.footer)&&void 0!==t?t:[])),this.element.style.width="500px",this.element.style.maxHeight="500px",this.element.addEventListener("keydown",e=>this.keydown(e)),e&&("string"==typeof e.title?this.title.val=e.title:e.title&&this.title.bind_to(e.title),"string"==typeof e.description?this.description.val=e.description:e.description&&this.description.bind_to(e.description),Object(n.a)(e.content)?this.content.bind_to(e.content):null!=e.content&&(this.content.val=e.content)),this.set_position((window.innerWidth-500)/2,(window.innerHeight-500)/2),this.header_element.addEventListener("mousedown",this.mousedown),this.overlay_element=Object(o.h)({className:"core_Dialog_modal_overlay",tabIndex:-1}),this.overlay_element.addEventListener("focus",()=>this.focus()),this.finalize_construction(d)}dispose(){super.dispose(),this.overlay_element.remove()}focus(){(this.first_focusable_child(this.element)||this.element).focus()}first_focusable_child(e){for(const t of e.children)if(t instanceof HTMLElement){if(t.tabIndex>=0)return t;{const e=this.first_focusable_child(t);if(e)return e}}}set_position(e,t){this.x=e,this.y=t,this.element.style.transform=`translate(${Math.floor(e)}px, ${Math.floor(t)}px)`}set_visible(e){e?(document.body.append(this.overlay_element),document.body.append(this.element),this.focus()):(this.overlay_element.remove(),this.element.remove())}set_title(e){this.header_element.textContent=e}set_description(e){""===e?(this.description_element.hidden=!0,this.description_element.textContent=""):(this.description_element.hidden=!1,this.description_element.textContent=e)}set_content(e){this.content_element.textContent="",this.content_element.append(e)}keydown(e){"Escape"===e.key&&this._ondismiss.emit({value:e})}}},527:function(e,t,i){},529:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(142),o=i(2);class n extends s.a{constructor(e){super(),this.renderer=e,this.element=Object(o.h)({className:"core_RendererWidget"}),this.children=[],this.element.append(e.canvas_element),this.disposable(e),this.finalize_construction(n)}activate(){this.renderer.start_rendering(),super.activate()}deactivate(){super.deactivate(),this.renderer.stop_rendering()}resize(e,t){return super.resize(e,t),this.renderer.set_size(e,t),this}}},539:function(e,t,i){},541:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(14),o=i(138),n=i(501),r=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};class a extends o.a{constructor(e){super(e),this._files=Object(s.e)([]),this.files=this._files,this.element.classList.add("core_FileButton"),this.disposables(this.onclick.observe(()=>r(this,void 0,void 0,(function*(){this._files.val=yield Object(n.a)(e)})))),this.finalize_construction(a)}}},542:function(e,t,i){},543:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i(525),o=i(138),n=i(18),r=i(2),a=i(14);class d extends s.a{constructor(e){const t=new o.a({text:"Dismiss"});super(Object.assign({footer:[t.element]},e));const i=Object(n.a)(e.result)?e.result:Object(a.e)(e.result);this.problems_message=Object(n.a)(e.problems_message)?e.problems_message:Object(a.e)(e.problems_message),this.error_message=Object(n.a)(e.error_message)?e.error_message:Object(a.e)(e.error_message),this.disposables(t,t.onclick.observe(e=>this._ondismiss.emit(e)),i.observe(({value:e})=>this.result_changed(e),{call_now:!0})),this.finalize_construction(d)}result_changed(e){e?(this.content.val=function(e){const t=Object(r.h)();t.style.overflow="auto",t.style.userSelect="text",t.style.height="100%",t.style.maxHeight="400px";const i=Object(r.B)(...e.problems.map(e=>Object(r.o)(e.ui_message)));return i.style.cursor="text",t.append(i),t}(e),e.success?e.problems.length&&(this.title.val="Problems",this.description.val=this.problems_message.val):(this.title.val="Error",this.description.val=this.error_message.val)):this.content.val=""}}},578:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i(139),o=i(33),n=i(2);class r extends s.a{constructor(e=!1,t){super(t),this.element=Object(n.m)({className:"core_CheckBox"}),this.preferred_label_position="right",this._checked=new o.a(this,e,this.set_checked),this.checked=this._checked,this.set_checked(e),this.element.type="checkbox",this.element.onchange=()=>this._checked.set_val(this.element.checked,{silent:!1}),this.finalize_construction(r)}set_enabled(e){super.set_enabled(e),this.element.disabled=!e}set_checked(e){this.element.checked=e}}},580:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(32),o=i(24),n=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const r=o.a.get("core/persistence/Persister");class a{persist_for_server(e,t,i){this.persist(this.server_key(e,t),i)}persist(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){r.error(`Couldn't persist ${e}.`,t)}}load_for_server(e,t){return n(this,void 0,void 0,(function*(){return this.load(this.server_key(e,t))}))}load(e){return n(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(e);return t&&JSON.parse(t)}catch(t){return void r.error(`Couldn't load ${e}.`,t)}}))}server_key(e,t){let i=t+".";switch(e){case s.g.Ephinea:i+="Ephinea";break;default:throw new Error(`Server ${s.g[e]} not supported.`)}return i}}},702:function(e,t,i){},703:function(e,t,i){},704:function(e,t,i){},706:function(e,t,i){},707:function(e,t,i){},782:function(e,t,i){},783:function(e,t,i){},784:function(e,t,i){},785:function(e,t,i){},786:function(e,t,i){},787:function(e,t,i){},788:function(e,t,i){},789:function(e,t,i){},790:function(e,t,i){},791:function(e,t,i){},792:function(e,t,i){e.exports=function(){return new Worker(i.p+"a7cc23d43a0a5edf4257.worker.js")}},793:function(e,t,i){},898:function(e,t,i){"use strict";i.r(t),i.d(t,"initialize_quest_editor",(function(){return Na}));var s=i(700),o=i.n(s),n=i(137),r=i(503),a=i(15),d=i(493);class c extends d.a{constructor(e="",t){if(super(e,"core_TextInput","text","core_TextInput_inner",t),this.preferred_label_position="left",t){const{max_length:e}=t;this.set_attr("maxLength",e)}this.set_value(e),this.finalize_construction(c)}get_value(){return this.input_element.value}set_value(e){this.input_element.value=e}}var l=i(139),u=(i(702),i(33)),_=i(2);class v extends l.a{constructor(e="",t){super(t),this.element=Object(_.h)({className:"core_TextArea"}),this.preferred_label_position="left",this.text_element=Object(_.w)({className:"core_TextArea_inner"}),this._value=new u.a(this,"",this.set_value),t&&(null!=t.max_length&&(this.text_element.maxLength=t.max_length),null!=t.font_family&&(this.text_element.style.fontFamily=t.font_family),null!=t.rows&&(this.text_element.rows=t.rows),null!=t.cols&&(this.text_element.cols=t.cols)),this.value=this._value,this.set_value(e),this.text_element.onchange=()=>this._value.set_val(this.text_element.value,{silent:!1}),this.element.append(this.text_element),this.finalize_construction(v)}set_value(e){this.text_element.value=e}set_enabled(e){super.set_enabled(e),this.text_element.disabled=!e}}i(703);var h=i(145),p=(i(704),i(83));class b extends p.a{constructor(e){super(),this.element=Object(_.h)({className:"quest_editor_UnavailableView"}),this.label=this.disposable(new h.a(e,{enabled:!1})),this.element.append(this.label.element),this.finalize_construction(b)}}var g=i(82);class f extends g.a{constructor(e){super(),this.element=Object(_.h)({className:"quest_editor_QuestInfoView",tabIndex:-1}),this.table_element=Object(_.t)(),this.id_input=this.add(new r.a(0,{min:0,step:1})),this.name_input=this.add(new c("",{max_length:32})),this.short_description_input=this.add(new v("",{max_length:128,font_family:'"Courier New", monospace',cols:25,rows:5})),this.long_description_input=this.add(new v("",{max_length:288,font_family:'"Courier New", monospace',cols:25,rows:10})),this.unavailable_view=this.add(new b("No quest loaded.")),this.quest_disposer=this.disposable(new a.a);const t=e.current_quest;this.table_element.append(Object(_.A)(Object(_.y)("Episode:"),this.episode_element=Object(_.v)()),Object(_.A)(Object(_.y)("ID:"),Object(_.v)(this.id_input.element)),Object(_.A)(Object(_.y)("Name:"),Object(_.v)(this.name_input.element)),Object(_.A)(Object(_.y)({colSpan:2},"Short description:")),Object(_.A)(Object(_.v)({colSpan:2},this.short_description_input.element)),Object(_.A)(Object(_.y)({colSpan:2},"Long description:")),Object(_.A)(Object(_.v)({colSpan:2},this.long_description_input.element))),this.element.append(this.table_element,this.unavailable_view.element),this.element.addEventListener("focus",e.focused,!0),this.disposables(this.unavailable_view.visible.bind_to(e.unavailable),Object(_.c)(this.table_element,"hidden",e.unavailable),t.observe(({value:t})=>{this.quest_disposer.dispose_all(),this.episode_element.textContent=t?n.b[t.episode]:"",t&&this.quest_disposer.add_all(this.id_input.value.bind_to(t.id),this.id_input.value.observe(({value:t})=>e.set_id(t)),this.name_input.value.bind_to(t.name),this.name_input.value.observe(({value:t})=>e.set_name(t)),this.short_description_input.value.bind_to(t.short_description),this.short_description_input.value.observe(({value:t})=>e.set_short_description(t)),this.long_description_input.value.bind_to(t.long_description),this.long_description_input.value.observe(({value:t})=>e.set_long_description(t)),this.enabled.bind_to(e.enabled))})),this.finalize_construction(f)}set_enabled(e){super.set_enabled(e),this.id_input.enabled.val=e,this.name_input.enabled.val=e,this.short_description_input.enabled.val=e,this.long_description_input.enabled.val=e}}i(705),i(706),i(707);class m extends g.a{constructor(e){super(),this.element=Object(_.h)({className:"quest_editor_NpcCountsView"}),this.table_element=Object(_.t)(),this.unavailable_view=this.add(new b("No quest loaded.")),this.element.append(this.table_element,this.unavailable_view.element),this.disposables(Object(_.c)(this.table_element,"hidden",e.unavailable),this.unavailable_view.visible.bind_to(e.unavailable),e.npc_counts.observe(({value:e})=>this.update_view(e),{call_now:!0})),this.finalize_construction(m)}update_view(e){const t=document.createDocumentFragment();for(const{name:i,count:s}of e)t.append(Object(_.A)(Object(_.y)(i+":"),Object(_.v)(String(s))));this.table_element.innerHTML="",this.table_element.append(t)}}var k,w=i(549),I=i(136),y=i(660),R=i(141),S=i(144);!function(e){e[e.Unknown=1e3]="Unknown",e[e.PlayerSet=1001]="PlayerSet",e[e.Particle=1002]="Particle",e[e.Teleporter=1003]="Teleporter",e[e.Warp=1004]="Warp",e[e.LightCollision=1005]="LightCollision",e[e.Item=1006]="Item",e[e.EnvSound=1007]="EnvSound",e[e.FogCollision=1008]="FogCollision",e[e.EventCollision=1009]="EventCollision",e[e.CharaCollision=1010]="CharaCollision",e[e.ElementalTrap=1011]="ElementalTrap",e[e.StatusTrap=1012]="StatusTrap",e[e.HealTrap=1013]="HealTrap",e[e.LargeElementalTrap=1014]="LargeElementalTrap",e[e.ObjRoomID=1015]="ObjRoomID",e[e.Sensor=1016]="Sensor",e[e.UnknownItem16=1017]="UnknownItem16",e[e.LensFlare=1018]="LensFlare",e[e.ScriptCollision=1019]="ScriptCollision",e[e.HealRing=1020]="HealRing",e[e.MapCollision=1021]="MapCollision",e[e.ScriptCollisionA=1022]="ScriptCollisionA",e[e.ItemLight=1023]="ItemLight",e[e.RadarCollision=1024]="RadarCollision",e[e.FogCollisionSW=1025]="FogCollisionSW",e[e.BossTeleporter=1026]="BossTeleporter",e[e.ImageBoard=1027]="ImageBoard",e[e.QuestWarp=1028]="QuestWarp",e[e.Epilogue=1029]="Epilogue",e[e.UnknownItem29=1030]="UnknownItem29",e[e.UnknownItem30=1031]="UnknownItem30",e[e.UnknownItem31=1032]="UnknownItem31",e[e.BoxDetectObject=1033]="BoxDetectObject",e[e.SymbolChatObject=1034]="SymbolChatObject",e[e.TouchPlateObject=1035]="TouchPlateObject",e[e.TargetableObject=1036]="TargetableObject",e[e.EffectObject=1037]="EffectObject",e[e.CountDownObject=1038]="CountDownObject",e[e.UnknownItem38=1039]="UnknownItem38",e[e.UnknownItem39=1040]="UnknownItem39",e[e.UnknownItem40=1041]="UnknownItem40",e[e.UnknownItem41=1042]="UnknownItem41",e[e.MenuActivation=1043]="MenuActivation",e[e.TelepipeLocation=1044]="TelepipeLocation",e[e.BGMCollision=1045]="BGMCollision",e[e.MainRagolTeleporter=1046]="MainRagolTeleporter",e[e.LobbyTeleporter=1047]="LobbyTeleporter",e[e.PrincipalWarp=1048]="PrincipalWarp",e[e.ShopDoor=1049]="ShopDoor",e[e.HuntersGuildDoor=1050]="HuntersGuildDoor",e[e.TeleporterDoor=1051]="TeleporterDoor",e[e.MedicalCenterDoor=1052]="MedicalCenterDoor",e[e.Elevator=1053]="Elevator",e[e.EasterEgg=1054]="EasterEgg",e[e.ValentinesHeart=1055]="ValentinesHeart",e[e.ChristmasTree=1056]="ChristmasTree",e[e.ChristmasWreath=1057]="ChristmasWreath",e[e.HalloweenPumpkin=1058]="HalloweenPumpkin",e[e.TwentyFirstCentury=1059]="TwentyFirstCentury",e[e.Sonic=1060]="Sonic",e[e.WelcomeBoard=1061]="WelcomeBoard",e[e.Firework=1062]="Firework",e[e.LobbyScreenDoor=1063]="LobbyScreenDoor",e[e.MainRagolTeleporterBattleInNextArea=1064]="MainRagolTeleporterBattleInNextArea",e[e.LabTeleporterDoor=1065]="LabTeleporterDoor",e[e.Pioneer2InvisibleTouchplate=1066]="Pioneer2InvisibleTouchplate",e[e.ForestDoor=1067]="ForestDoor",e[e.ForestSwitch=1068]="ForestSwitch",e[e.LaserFence=1069]="LaserFence",e[e.LaserSquareFence=1070]="LaserSquareFence",e[e.ForestLaserFenceSwitch=1071]="ForestLaserFenceSwitch",e[e.LightRays=1072]="LightRays",e[e.BlueButterfly=1073]="BlueButterfly",e[e.Probe=1074]="Probe",e[e.RandomTypeBox1=1075]="RandomTypeBox1",e[e.ForestWeatherStation=1076]="ForestWeatherStation",e[e.Battery=1077]="Battery",e[e.ForestConsole=1078]="ForestConsole",e[e.BlackSlidingDoor=1079]="BlackSlidingDoor",e[e.RicoMessagePod=1080]="RicoMessagePod",e[e.EnergyBarrier=1081]="EnergyBarrier",e[e.ForestRisingBridge=1082]="ForestRisingBridge",e[e.SwitchNoneDoor=1083]="SwitchNoneDoor",e[e.EnemyBoxGrey=1084]="EnemyBoxGrey",e[e.FixedTypeBox=1085]="FixedTypeBox",e[e.EnemyBoxBrown=1086]="EnemyBoxBrown",e[e.EmptyTypeBox=1087]="EmptyTypeBox",e[e.LaserFenceEx=1088]="LaserFenceEx",e[e.LaserSquareFenceEx=1089]="LaserSquareFenceEx",e[e.FloorPanel1=1090]="FloorPanel1",e[e.Caves4ButtonDoor=1091]="Caves4ButtonDoor",e[e.CavesNormalDoor=1092]="CavesNormalDoor",e[e.CavesSmashingPillar=1093]="CavesSmashingPillar",e[e.CavesSign1=1094]="CavesSign1",e[e.CavesSign2=1095]="CavesSign2",e[e.CavesSign3=1096]="CavesSign3",e[e.HexagonalTank=1097]="HexagonalTank",e[e.BrownPlatform=1098]="BrownPlatform",e[e.WarningLightObject=1099]="WarningLightObject",e[e.Rainbow=1100]="Rainbow",e[e.FloatingJellyfish=1101]="FloatingJellyfish",e[e.FloatingDragonfly=1102]="FloatingDragonfly",e[e.CavesSwitchDoor=1103]="CavesSwitchDoor",e[e.RobotRechargeStation=1104]="RobotRechargeStation",e[e.CavesCakeShop=1105]="CavesCakeShop",e[e.Caves1SmallRedRock=1106]="Caves1SmallRedRock",e[e.Caves1MediumRedRock=1107]="Caves1MediumRedRock",e[e.Caves1LargeRedRock=1108]="Caves1LargeRedRock",e[e.Caves2SmallRock1=1109]="Caves2SmallRock1",e[e.Caves2MediumRock1=1110]="Caves2MediumRock1",e[e.Caves2LargeRock1=1111]="Caves2LargeRock1",e[e.Caves2SmallRock2=1112]="Caves2SmallRock2",e[e.Caves2MediumRock2=1113]="Caves2MediumRock2",e[e.Caves2LargeRock2=1114]="Caves2LargeRock2",e[e.Caves3SmallRock=1115]="Caves3SmallRock",e[e.Caves3MediumRock=1116]="Caves3MediumRock",e[e.Caves3LargeRock=1117]="Caves3LargeRock",e[e.FloorPanel2=1118]="FloorPanel2",e[e.DestructableRockCaves1=1119]="DestructableRockCaves1",e[e.DestructableRockCaves2=1120]="DestructableRockCaves2",e[e.DestructableRockCaves3=1121]="DestructableRockCaves3",e[e.MinesDoor=1122]="MinesDoor",e[e.FloorPanel3=1123]="FloorPanel3",e[e.MinesSwitchDoor=1124]="MinesSwitchDoor",e[e.LargeCryoTube=1125]="LargeCryoTube",e[e.ComputerLikeCalus=1126]="ComputerLikeCalus",e[e.GreenScreenOpeningAndClosing=1127]="GreenScreenOpeningAndClosing",e[e.FloatingRobot=1128]="FloatingRobot",e[e.FloatingBlueLight=1129]="FloatingBlueLight",e[e.SelfDestructingObject1=1130]="SelfDestructingObject1",e[e.SelfDestructingObject2=1131]="SelfDestructingObject2",e[e.SelfDestructingObject3=1132]="SelfDestructingObject3",e[e.SparkMachine=1133]="SparkMachine",e[e.MinesLargeFlashingCrate=1134]="MinesLargeFlashingCrate",e[e.RuinsSeal=1135]="RuinsSeal",e[e.RuinsTeleporter=1136]="RuinsTeleporter",e[e.RuinsWarpSiteToSite=1137]="RuinsWarpSiteToSite",e[e.RuinsSwitch=1138]="RuinsSwitch",e[e.FloorPanel4=1139]="FloorPanel4",e[e.Ruins1Door=1140]="Ruins1Door",e[e.Ruins3Door=1141]="Ruins3Door",e[e.Ruins2Door=1142]="Ruins2Door",e[e.Ruins11ButtonDoor=1143]="Ruins11ButtonDoor",e[e.Ruins21ButtonDoor=1144]="Ruins21ButtonDoor",e[e.Ruins31ButtonDoor=1145]="Ruins31ButtonDoor",e[e.Ruins4ButtonDoor=1146]="Ruins4ButtonDoor",e[e.Ruins2ButtonDoor=1147]="Ruins2ButtonDoor",e[e.RuinsSensor=1148]="RuinsSensor",e[e.RuinsFenceSwitch=1149]="RuinsFenceSwitch",e[e.RuinsLaserFence4x2=1150]="RuinsLaserFence4x2",e[e.RuinsLaserFence6x2=1151]="RuinsLaserFence6x2",e[e.RuinsLaserFence4x4=1152]="RuinsLaserFence4x4",e[e.RuinsLaserFence6x4=1153]="RuinsLaserFence6x4",e[e.RuinsPoisonBlob=1154]="RuinsPoisonBlob",e[e.RuinsPillarTrap=1155]="RuinsPillarTrap",e[e.PopupTrapNoTech=1156]="PopupTrapNoTech",e[e.RuinsCrystal=1157]="RuinsCrystal",e[e.Monument=1158]="Monument",e[e.RuinsRock1=1159]="RuinsRock1",e[e.RuinsRock2=1160]="RuinsRock2",e[e.RuinsRock3=1161]="RuinsRock3",e[e.RuinsRock4=1162]="RuinsRock4",e[e.RuinsRock5=1163]="RuinsRock5",e[e.RuinsRock6=1164]="RuinsRock6",e[e.RuinsRock7=1165]="RuinsRock7",e[e.Poison=1166]="Poison",e[e.FixedBoxTypeRuins=1167]="FixedBoxTypeRuins",e[e.RandomBoxTypeRuins=1168]="RandomBoxTypeRuins",e[e.EnemyTypeBoxYellow=1169]="EnemyTypeBoxYellow",e[e.EnemyTypeBoxBlue=1170]="EnemyTypeBoxBlue",e[e.EmptyTypeBoxBlue=1171]="EmptyTypeBoxBlue",e[e.DestructableRock=1172]="DestructableRock",e[e.PopupTrapsTechs=1173]="PopupTrapsTechs",e[e.FlyingWhiteBird=1174]="FlyingWhiteBird",e[e.Tower=1175]="Tower",e[e.FloatingRocks=1176]="FloatingRocks",e[e.FloatingSoul=1177]="FloatingSoul",e[e.Butterfly=1178]="Butterfly",e[e.LobbyGameMenu=1179]="LobbyGameMenu",e[e.LobbyWarpObject=1180]="LobbyWarpObject",e[e.Lobby1EventObjectDefaultTree=1181]="Lobby1EventObjectDefaultTree",e[e.UnknownItem387=1182]="UnknownItem387",e[e.UnknownItem388=1183]="UnknownItem388",e[e.UnknownItem389=1184]="UnknownItem389",e[e.LobbyEventObjectStaticPumpkin=1185]="LobbyEventObjectStaticPumpkin",e[e.LobbyEventObject3ChristmasWindows=1186]="LobbyEventObject3ChristmasWindows",e[e.LobbyEventObjectRedAndWhiteCurtain=1187]="LobbyEventObjectRedAndWhiteCurtain",e[e.UnknownItem393=1188]="UnknownItem393",e[e.UnknownItem394=1189]="UnknownItem394",e[e.LobbyFishTank=1190]="LobbyFishTank",e[e.LobbyEventObjectButterflies=1191]="LobbyEventObjectButterflies",e[e.UnknownItem400=1192]="UnknownItem400",e[e.GreyWallLow=1193]="GreyWallLow",e[e.SpaceshipDoor=1194]="SpaceshipDoor",e[e.GreyWallHigh=1195]="GreyWallHigh",e[e.TempleNormalDoor=1196]="TempleNormalDoor",e[e.BreakableWallWallButUnbreakable=1197]="BreakableWallWallButUnbreakable",e[e.BrokenCylinderAndRubble=1198]="BrokenCylinderAndRubble",e[e.ThreeBrokenWallPiecesOnFloor=1199]="ThreeBrokenWallPiecesOnFloor",e[e.HighBrickCylinder=1200]="HighBrickCylinder",e[e.LyingCylinder=1201]="LyingCylinder",e[e.BrickConeWithFlatTop=1202]="BrickConeWithFlatTop",e[e.BreakableTempleWall=1203]="BreakableTempleWall",e[e.TempleMapDetect=1204]="TempleMapDetect",e[e.SmallBrownBrickRisingBridge=1205]="SmallBrownBrickRisingBridge",e[e.LongRisingBridgeWithPinkHighEdges=1206]="LongRisingBridgeWithPinkHighEdges",e[e.FourSwitchTempleDoor=1207]="FourSwitchTempleDoor",e[e.FourButtonSpaceshipDoor=1208]="FourButtonSpaceshipDoor",e[e.ItemBoxCca=1209]="ItemBoxCca",e[e.TeleporterEp2=1210]="TeleporterEp2",e[e.CcaDoor=1211]="CcaDoor",e[e.SpecialBoxCca=1212]="SpecialBoxCca",e[e.BigCcaDoor=1213]="BigCcaDoor",e[e.BigCcaDoorSwitch=1214]="BigCcaDoorSwitch",e[e.LittleRock=1215]="LittleRock",e[e.Little3StoneWall=1216]="Little3StoneWall",e[e.Medium3StoneWall=1217]="Medium3StoneWall",e[e.SpiderPlant=1218]="SpiderPlant",e[e.CcaAreaTeleporter=1219]="CcaAreaTeleporter",e[e.UnknownItem523=1220]="UnknownItem523",e[e.WhiteBird=1221]="WhiteBird",e[e.OrangeBird=1222]="OrangeBird",e[e.Saw=1223]="Saw",e[e.LaserDetect=1224]="LaserDetect",e[e.UnknownItem529=1225]="UnknownItem529",e[e.UnknownItem530=1226]="UnknownItem530",e[e.Seagull=1227]="Seagull",e[e.Fish=1228]="Fish",e[e.SeabedDoorWithBlueEdges=1229]="SeabedDoorWithBlueEdges",e[e.SeabedDoorAlwaysOpenNonTriggerable=1230]="SeabedDoorAlwaysOpenNonTriggerable",e[e.LittleCryotube=1231]="LittleCryotube",e[e.WideGlassWallBreakable=1232]="WideGlassWallBreakable",e[e.BlueFloatingRobot=1233]="BlueFloatingRobot",e[e.RedFloatingRobot=1234]="RedFloatingRobot",e[e.Dolphin=1235]="Dolphin",e[e.CaptureTrap=1236]="CaptureTrap",e[e.VRLink=1237]="VRLink",e[e.UnknownItem576=1238]="UnknownItem576",e[e.WarpInBarbaRayRoom=1239]="WarpInBarbaRayRoom",e[e.UnknownItem672=1240]="UnknownItem672",e[e.GeeNest=1241]="GeeNest",e[e.LabComputerConsole=1242]="LabComputerConsole",e[e.LabComputerConsoleGreenScreen=1243]="LabComputerConsoleGreenScreen",e[e.ChairYellowPillow=1244]="ChairYellowPillow",e[e.OrangeWallWithHoleInMiddle=1245]="OrangeWallWithHoleInMiddle",e[e.GreyWallWithHoleInMiddle=1246]="GreyWallWithHoleInMiddle",e[e.LongTable=1247]="LongTable",e[e.GBAStation=1248]="GBAStation",e[e.TalkLinkToSupport=1249]="TalkLinkToSupport",e[e.InstaWarp=1250]="InstaWarp",e[e.LabInvisibleObject=1251]="LabInvisibleObject",e[e.LabGlassWindowDoor=1252]="LabGlassWindowDoor",e[e.UnknownItem700=1253]="UnknownItem700",e[e.LabCeilingWarp=1254]="LabCeilingWarp",e[e.Ep4LightSource=1255]="Ep4LightSource",e[e.Cactus=1256]="Cactus",e[e.BigBrownRock=1257]="BigBrownRock",e[e.BreakableBrownRock=1258]="BreakableBrownRock",e[e.UnknownItem832=1259]="UnknownItem832",e[e.UnknownItem833=1260]="UnknownItem833",e[e.PoisonPlant=1261]="PoisonPlant",e[e.UnknownItem897=1262]="UnknownItem897",e[e.UnknownItem898=1263]="UnknownItem898",e[e.OozingDesertPlant=1264]="OozingDesertPlant",e[e.UnknownItem901=1265]="UnknownItem901",e[e.BigBlackRocks=1266]="BigBlackRocks",e[e.UnknownItem903=1267]="UnknownItem903",e[e.UnknownItem904=1268]="UnknownItem904",e[e.UnknownItem905=1269]="UnknownItem905",e[e.UnknownItem906=1270]="UnknownItem906",e[e.FallingRock=1271]="FallingRock",e[e.DesertPlantHasCollision=1272]="DesertPlantHasCollision",e[e.DesertFixedTypeBoxBreakableCrystals=1273]="DesertFixedTypeBoxBreakableCrystals",e[e.UnknownItem910=1274]="UnknownItem910",e[e.BeeHive=1275]="BeeHive",e[e.UnknownItem912=1276]="UnknownItem912",e[e.Heat=1277]="Heat",e[e.TopOfSaintMillionEgg=1278]="TopOfSaintMillionEgg",e[e.UnknownItem961=1279]="UnknownItem961"}(k||(k={}));const j=[];function T(e){return C[e]}const C=[];function F(e,t,i,s,o){j.push(e);const n=[];for(const[e,t]of s)n[e]=t;C[e]=Object.freeze({name:i,area_ids:n,type_id:t,properties:o.map(([e,t,i])=>({name:e,offset:t,type:S.a[i]}))})}F(k.Unknown,void 0,"Unknown",[],[]),F(k.PlayerSet,0,"Player Set",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9,0]]],[["Slot ID",40,"F32"],["Return flag",52,"I32"]]),F(k.Particle,1,"Particle",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.Teleporter,2,"Teleporter",[[n.b.I,[0,1,2,3,4,5,6,7,11,12,13,14]],[n.b.II,[0,1,2,3,4,12,13,14,15]],[n.b.IV,[1,2,3,4,5,6,7,8,9,0]]],[["Area ID",40,"F32"],["Color blue",44,"F32"],["Color red",48,"F32"],["Floor ID",52,"I32"],["Display no.",56,"I32"],["No display no.",60,"I32"]]),F(k.Warp,3,"Warp",[[n.b.I,[0,1,2,3,4,5,6,7,11,12,13,14,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9,0]]],[["Destination x",40,"F32"],["Destination y",44,"F32"],["Destination z",48,"F32"],["Dst. rotation y",52,"Angle"]]),F(k.LightCollision,4,"Light Collision",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,15,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.Item,5,"Item",[],[]),F(k.EnvSound,6,"Env Sound",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,13]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Radius",48,"F32"],["SE",52,"I32"],["Volume",56,"I32"]]),F(k.FogCollision,7,"Fog Collision",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Radius",40,"F32"],["Fog index no.",52,"I32"]]),F(k.EventCollision,8,"Event Collision",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9,0]]],[["Radius",40,"F32"],["Event ID",52,"U32"]]),F(k.CharaCollision,9,"Chara Collision",[[n.b.I,[0,1,2,3,4,5,8,9,10]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.ElementalTrap,10,"Elemental Trap",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[["Radius",40,"F32"],["Trap link",48,"F32"],["Damage",52,"I32"],["Subtype",56,"I32"],["Delay",60,"I32"]]),F(k.StatusTrap,11,"Status Trap",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[["Radius",40,"F32"],["Trap link",48,"F32"],["Subtype",56,"I32"],["Delay",60,"I32"]]),F(k.HealTrap,12,"Heal Trap",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[["Radius",40,"F32"],["Trap link",48,"F32"],["HP",52,"I32"],["Subtype",56,"I32"],["Delay",60,"I32"]]),F(k.LargeElementalTrap,13,"Large Elemental Trap",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[["Radus",40,"F32"],["Trap link",48,"F32"],["Damage",52,"I32"],["Subtype",56,"I32"],["Delay",60,"I32"]]),F(k.ObjRoomID,14,"Obj Room ID",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,11,12,13]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[["SCL_TAMA",40,"F32"],["Next section",44,"F32"],["Previous section ",48,"F32"]]),F(k.Sensor,15,"Sensor",[[n.b.I,[1,2,4,5,6,7]]],[]),F(k.UnknownItem16,16,"Unknown Item (16)",[],[]),F(k.LensFlare,17,"Lens Flare",[[n.b.I,[1,2,3,4,8,14]]],[]),F(k.ScriptCollision,18,"Script Collision",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Radius",40,"F32"]]),F(k.HealRing,19,"Heal Ring",[[n.b.I,[1,2,3,4,5,6,7,8,9,10]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.MapCollision,20,"Map Collision",[[n.b.I,[0,1,2,3,4,5,8,9,10,16,17]],[n.b.II,[0,5,6,7,8,9,10,11,16,17]],[n.b.IV,[0]]],[]),F(k.ScriptCollisionA,21,"Script Collision A",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.ItemLight,22,"Item Light",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Subtype",40,"F32"]]),F(k.RadarCollision,23,"Radar Collision",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Radius",40,"F32"]]),F(k.FogCollisionSW,24,"Fog Collision SW",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Radius",40,"F32"],["Status",44,"F32"],["Fog index no.",52,"I32"],["Switch ID",60,"I32"]]),F(k.BossTeleporter,25,"Boss Teleporter",[[n.b.I,[0,2,5,7,10]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[5,6,7,8,0]]],[]),F(k.ImageBoard,26,"Image Board",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"]]),F(k.QuestWarp,27,"Quest Warp",[[n.b.I,[1,2,3,4,5,6,7,11,12,13,14]],[n.b.IV,[9]]],[]),F(k.Epilogue,28,"Epilogue",[[n.b.I,[14]],[n.b.II,[13]],[n.b.IV,[9]]],[]),F(k.UnknownItem29,29,"Unknown Item (29)",[[n.b.I,[1]]],[]),F(k.UnknownItem30,30,"Unknown Item (30)",[[n.b.I,[1,2,17]],[n.b.II,[1,2,14]],[n.b.IV,[1,2,3,4,5]]],[]),F(k.UnknownItem31,31,"Unknown Item (31)",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.BoxDetectObject,32,"Box Detect Object",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Radius",40,"F32"],["Plate ID",52,"I32"]]),F(k.SymbolChatObject,33,"Symbol Chat Object",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[["Radius",40,"F32"]]),F(k.TouchPlateObject,34,"Touch plate Object",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Radius",40,"F32"],["Switch ID",52,"I32"]]),F(k.TargetableObject,35,"Targetable Object",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",48,"F32"],["HP",52,"I32"]]),F(k.EffectObject,36,"Effect object",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[0]]],[]),F(k.CountDownObject,37,"Count Down Object",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.UnknownItem38,38,"Unknown Item (38)",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.UnknownItem39,39,"Unknown Item (39)",[[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.UnknownItem40,40,"Unknown Item (40)",[[n.b.I,[0,1,2,4,5,6,7,8,9,10,13,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,13,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.UnknownItem41,41,"Unknown Item (41)",[[n.b.I,[0,1,2,4,5,6,7,8,9,10,13,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,13,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.MenuActivation,64,"Menu activation",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Menu ID",52,"I32"]]),F(k.TelepipeLocation,65,"Telepipe Location",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Slot ID",52,"I32"]]),F(k.BGMCollision,66,"BGM Collision",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.MainRagolTeleporter,67,"Main Ragol Teleporter",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.LobbyTeleporter,68,"Lobby Teleporter",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.PrincipalWarp,69,"Principal warp",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Destination x",40,"F32"],["Destination y",44,"F32"],["Destination z",48,"F32"],["Dst. rotation y",52,"Angle"],["Model",60,"U32"]]),F(k.ShopDoor,70,"Shop Door",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.HuntersGuildDoor,71,"Hunter's Guild Door",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.TeleporterDoor,72,"Teleporter Door",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.MedicalCenterDoor,73,"Medical Center Door",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.Elevator,74,"Elevator",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.EasterEgg,75,"Easter Egg",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.ValentinesHeart,76,"Valentines Heart",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.ChristmasTree,77,"Christmas Tree",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.ChristmasWreath,78,"Christmas Wreath",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.HalloweenPumpkin,79,"Halloween Pumpkin",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.TwentyFirstCentury,80,"21st Century",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.Sonic,81,"Sonic",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Model",52,"U32"]]),F(k.WelcomeBoard,82,"Welcome Board",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.Firework,83,"Firework",[[n.b.I,[0]],[n.b.II,[0,16]],[n.b.IV,[0]]],[["Mdl IDX",40,"F32"],["Area width",44,"F32"],["Rise height",48,"F32"],["Area depth",52,"I32"],["Freq",56,"I32"]]),F(k.LobbyScreenDoor,84,"Lobby Screen Door",[[n.b.I,[0]],[n.b.IV,[0]]],[]),F(k.MainRagolTeleporterBattleInNextArea,85,"Main Ragol Teleporter (Battle in next area?)",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[]),F(k.LabTeleporterDoor,86,"Lab Teleporter Door",[[n.b.II,[0]]],[]),F(k.Pioneer2InvisibleTouchplate,87,"Pioneer 2 Invisible Touchplate",[[n.b.I,[0]],[n.b.II,[0]],[n.b.IV,[0]]],[["Radius",40,"F32"]]),F(k.ForestDoor,128,"Forest Door",[[n.b.I,[1,2]]],[["Door ID",52,"I32"]]),F(k.ForestSwitch,129,"Forest Switch",[[n.b.I,[1,2,3,4,5]],[n.b.II,[1,2,3,4]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",52,"I32"],["Color",60,"I32"]]),F(k.LaserFence,130,"Laser Fence",[[n.b.I,[1,2,3,4,5,6,7,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Color",40,"F32"],["Switch ID",52,"I32"],["Model",60,"U32"]]),F(k.LaserSquareFence,131,"Laser Square Fence",[[n.b.I,[1,2,3,4,5,6,7,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Color",40,"F32"],["Switch ID",52,"I32"],["Model",60,"U32"]]),F(k.ForestLaserFenceSwitch,132,"Forest Laser Fence Switch",[[n.b.I,[1,2,3,4,5,6,7,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",52,"I32"],["Color",60,"I32"]]),F(k.LightRays,133,"Light rays",[[n.b.I,[1,2]],[n.b.II,[5,6,7,8,9]],[n.b.IV,[6,7,8]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"]]),F(k.BlueButterfly,134,"Blue Butterfly",[[n.b.I,[1,2]],[n.b.IV,[6,7,8]]],[]),F(k.Probe,135,"Probe",[[n.b.I,[1,2]]],[["Model",40,"F32"]]),F(k.RandomTypeBox1,136,"Random Type Box 1",[[n.b.I,[1,2,3,4,5,6,7]],[n.b.II,[10,11,13]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.ForestWeatherStation,137,"Forest Weather Station",[[n.b.I,[1,2]]],[]),F(k.Battery,138,"Battery",[],[]),F(k.ForestConsole,139,"Forest Console",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Script label",52,"I32"],["Model",56,"U32"]]),F(k.BlackSlidingDoor,140,"Black Sliding Door",[[n.b.I,[1,2,3]]],[["Distance",40,"F32"],["Speed",44,"F32"],["Switch ID",48,"F32"],["Switch no.",52,"I32"],["Disable effect",56,"I32"],["Enable effect",60,"I32"]]),F(k.RicoMessagePod,141,"Rico Message Pod",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,13]]],[]),F(k.EnergyBarrier,142,"Energy Barrier",[[n.b.I,[1,2,4,5,6,7]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Door ID",52,"I32"]]),F(k.ForestRisingBridge,143,"Forest Rising Bridge",[[n.b.I,[1,2]]],[["Door ID",52,"I32"]]),F(k.SwitchNoneDoor,144,"Switch (none door)",[[n.b.I,[1,2,6,7,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",52,"I32"]]),F(k.EnemyBoxGrey,145,"Enemy Box (Grey)",[[n.b.I,[1,2,3,4,5,6,7]],[n.b.II,[10,11]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Event ID",40,"F32"]]),F(k.FixedTypeBox,146,"Fixed Type Box",[[n.b.I,[1,2,3,4,5,6,7,11,12,13,14]],[n.b.II,[10,11,13]],[n.b.IV,[1,2,3,4,6,7,8,9]]],[["Full random",40,"F32"],["Random item",44,"F32"],["Fixed item",48,"F32"],["Item parameter",52,"I32"]]),F(k.EnemyBoxBrown,147,"Enemy Box (Brown)",[[n.b.I,[1,2,3,4,5,6,7]],[n.b.II,[10,11]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Event ID",40,"F32"]]),F(k.EmptyTypeBox,149,"Empty Type Box",[[n.b.I,[1,2,3,4,5,6,7]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Event ID",40,"F32"]]),F(k.LaserFenceEx,150,"Laser Fence Ex",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Color",40,"F32"],["Collision width",44,"F32"],["Collision depth",48,"F32"],["Switch ID",52,"I32"],["Model",60,"U32"]]),F(k.LaserSquareFenceEx,151,"Laser Square Fence Ex",[],[["Color",40,"F32"],["Collision width",44,"F32"],["Collision depth",48,"F32"],["Switch ID",52,"I32"],["Model",60,"U32"]]),F(k.FloorPanel1,192,"Floor Panel 1",[[n.b.I,[3,4,5,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Scale  x",40,"F32"],["Scale  y",44,"F32"],["Scale  z",48,"F32"],["Switch ID",52,"I32"],["Stay active",56,"I32"]]),F(k.Caves4ButtonDoor,193,"Caves 4 Button door",[[n.b.I,[3,4,5]]],[["Door ID",52,"I32"],["Switch total",56,"I32"],["Stay active",60,"I32"]]),F(k.CavesNormalDoor,194,"Caves Normal door",[[n.b.I,[3,4,5]]],[["Door ID",52,"I32"]]),F(k.CavesSmashingPillar,195,"Caves Smashing Pillar",[[n.b.I,[3,4,5]],[n.b.II,[1,2,3,4,17]]],[]),F(k.CavesSign1,196,"Caves Sign 1",[[n.b.I,[4,5]]],[]),F(k.CavesSign2,197,"Caves Sign 2",[[n.b.I,[4,5]]],[]),F(k.CavesSign3,198,"Caves Sign 3",[[n.b.I,[4,5]]],[]),F(k.HexagonalTank,199,"Hexagonal Tank",[[n.b.I,[4,5]]],[]),F(k.BrownPlatform,200,"Brown Platform",[[n.b.I,[4,5]]],[]),F(k.WarningLightObject,201,"Warning Light Object",[[n.b.I,[4,5]],[n.b.IV,[5]]],[]),F(k.Rainbow,203,"Rainbow",[[n.b.I,[4]]],[["Scale  x",40,"F32"],["Scale  y",44,"F32"],["Scale  z",48,"F32"]]),F(k.FloatingJellyfish,204,"Floating Jellyfish",[[n.b.I,[4]],[n.b.II,[10,11]]],[]),F(k.FloatingDragonfly,205,"Floating Dragonfly",[[n.b.I,[4,16]],[n.b.II,[3,4]],[n.b.IV,[6,7,8]]],[]),F(k.CavesSwitchDoor,206,"Caves Switch Door",[[n.b.I,[3,4,5]]],[["Door ID",52,"I32"]]),F(k.RobotRechargeStation,207,"Robot Recharge Station",[[n.b.I,[3,4,5,6,7]],[n.b.II,[17]]],[]),F(k.CavesCakeShop,208,"Caves Cake Shop",[[n.b.I,[5]]],[]),F(k.Caves1SmallRedRock,209,"Caves 1 Small Red Rock",[[n.b.I,[3]]],[]),F(k.Caves1MediumRedRock,210,"Caves 1 Medium Red Rock",[[n.b.I,[3]]],[]),F(k.Caves1LargeRedRock,211,"Caves 1 Large Red Rock",[[n.b.I,[3]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.Caves2SmallRock1,212,"Caves 2 Small Rock 1",[[n.b.I,[4]]],[]),F(k.Caves2MediumRock1,213,"Caves 2 Medium Rock 1",[[n.b.I,[4]]],[]),F(k.Caves2LargeRock1,214,"Caves 2 Large Rock 1",[[n.b.I,[4]]],[]),F(k.Caves2SmallRock2,215,"Caves 2 Small Rock 2",[[n.b.I,[4]]],[]),F(k.Caves2MediumRock2,216,"Caves 2 Medium Rock 2",[[n.b.I,[4]]],[]),F(k.Caves2LargeRock2,217,"Caves 2 Large Rock 2",[[n.b.I,[4]]],[]),F(k.Caves3SmallRock,218,"Caves 3 Small Rock",[[n.b.I,[5]]],[]),F(k.Caves3MediumRock,219,"Caves 3 Medium Rock",[[n.b.I,[5]]],[]),F(k.Caves3LargeRock,220,"Caves 3 Large Rock",[[n.b.I,[5]]],[]),F(k.FloorPanel2,222,"Floor Panel 2",[[n.b.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Switch ID",52,"I32"],["Stay active",56,"I32"]]),F(k.DestructableRockCaves1,223,"Destructable Rock (Caves 1)",[[n.b.I,[3]]],[]),F(k.DestructableRockCaves2,224,"Destructable Rock (Caves 2)",[[n.b.I,[4]]],[]),F(k.DestructableRockCaves3,225,"Destructable Rock (Caves 3)",[[n.b.I,[5]]],[]),F(k.MinesDoor,256,"Mines Door",[[n.b.I,[6,7]]],[["Door ID",52,"I32"],["Switch total",56,"I32"],["Stay active",60,"I32"]]),F(k.FloorPanel3,257,"Floor Panel 3",[[n.b.I,[1,2,6,7,16,17]],[n.b.II,[1,2,3,4]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Switch ID",52,"I32"],["Stay active",56,"I32"]]),F(k.MinesSwitchDoor,258,"Mines Switch Door",[[n.b.I,[6,7]],[n.b.IV,[6,7,8]]],[["Door ID",52,"I32"],["Switch total",56,"I32"],["Stay active",60,"I32"]]),F(k.LargeCryoTube,259,"Large Cryo-Tube",[[n.b.I,[6,7]],[n.b.II,[17]]],[]),F(k.ComputerLikeCalus,260,"Computer (like calus)",[[n.b.I,[6,7]],[n.b.II,[17]]],[]),F(k.GreenScreenOpeningAndClosing,261,"Green Screen opening and closing",[[n.b.I,[6,7]],[n.b.II,[17]]],[]),F(k.FloatingRobot,262,"Floating Robot",[[n.b.I,[6,7]]],[]),F(k.FloatingBlueLight,263,"Floating Blue Light",[[n.b.I,[6,7]]],[]),F(k.SelfDestructingObject1,264,"Self Destructing Object 1",[[n.b.I,[6,7]]],[]),F(k.SelfDestructingObject2,265,"Self Destructing Object 2",[[n.b.I,[6,7]]],[]),F(k.SelfDestructingObject3,266,"Self Destructing Object 3",[[n.b.I,[6,7]]],[]),F(k.SparkMachine,267,"Spark Machine",[[n.b.I,[6,7]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"]]),F(k.MinesLargeFlashingCrate,268,"Mines Large Flashing Crate",[[n.b.I,[6,7]]],[]),F(k.RuinsSeal,304,"Ruins Seal",[[n.b.I,[13]]],[]),F(k.RuinsTeleporter,320,"Ruins Teleporter",[[n.b.I,[8,9,10]]],[["Area no.",40,"F32"],["Color blue",44,"F32"],["Color red",48,"F32"],["Floor no.",52,"I32"],["Display no.",56,"I32"],["No display no.",60,"I32"]]),F(k.RuinsWarpSiteToSite,321,"Ruins Warp (Site to Site)",[[n.b.I,[8,9,10]]],[["Destination x",40,"F32"],["Destination y",44,"F32"],["Destination z",48,"F32"],["Dst. rotation y",52,"Angle"]]),F(k.RuinsSwitch,322,"Ruins Switch",[[n.b.I,[8,9,10]]],[["Switch ID",52,"I32"]]),F(k.FloorPanel4,323,"Floor Panel 4",[[n.b.I,[8,9,10]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Plate ID",52,"I32"],["Stay active",56,"I32"]]),F(k.Ruins1Door,324,"Ruins 1 Door",[[n.b.I,[8]]],[["Door ID",52,"I32"]]),F(k.Ruins3Door,325,"Ruins 3 Door",[[n.b.I,[10]]],[["Door ID",52,"I32"]]),F(k.Ruins2Door,326,"Ruins 2 Door",[[n.b.I,[9]]],[["Door ID",52,"I32"]]),F(k.Ruins11ButtonDoor,327,"Ruins 1-1 Button Door",[[n.b.I,[8]]],[["Door ID",52,"I32"]]),F(k.Ruins21ButtonDoor,328,"Ruins 2-1 Button Door",[[n.b.I,[9]]],[["Door ID",52,"I32"]]),F(k.Ruins31ButtonDoor,329,"Ruins 3-1 Button Door",[[n.b.I,[10]]],[["Door ID",52,"I32"]]),F(k.Ruins4ButtonDoor,330,"Ruins 4-Button Door",[[n.b.I,[8,9,10]]],[["Door ID",52,"I32"],["Stay active",60,"I32"]]),F(k.Ruins2ButtonDoor,331,"Ruins 2-Button Door",[[n.b.I,[8,9,10]]],[["Door ID",52,"I32"],["Stay active",60,"I32"]]),F(k.RuinsSensor,332,"Ruins Sensor",[[n.b.I,[8,9,10]]],[]),F(k.RuinsFenceSwitch,333,"Ruins Fence Switch",[[n.b.I,[8,9,10]]],[["Switch ID",52,"I32"],["Color",56,"I32"]]),F(k.RuinsLaserFence4x2,334,"Ruins Laser Fence 4x2",[[n.b.I,[8,9,10]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",52,"I32"],["Color",56,"I32"]]),F(k.RuinsLaserFence6x2,335,"Ruins Laser Fence 6x2",[[n.b.I,[8,9,10]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Switch ID",52,"I32"],["Color",56,"I32"]]),F(k.RuinsLaserFence4x4,336,"Ruins Laser Fence 4x4",[[n.b.I,[8,9,10]]],[["Switch ID",52,"I32"],["Color",56,"I32"]]),F(k.RuinsLaserFence6x4,337,"Ruins Laser Fence 6x4",[[n.b.I,[8,9,10]]],[["Switch ID",52,"I32"],["Color",56,"I32"]]),F(k.RuinsPoisonBlob,338,"Ruins poison Blob",[[n.b.I,[8,9,10]],[n.b.II,[5,6,7,8,9]],[n.b.IV,[6,7,8]]],[]),F(k.RuinsPillarTrap,339,"Ruins Pillar Trap",[[n.b.I,[8,9,10]],[n.b.II,[1,2,3,4]]],[]),F(k.PopupTrapNoTech,340,"Popup Trap (No Tech)",[[n.b.I,[8,9,10]]],[["Radius",40,"F32"]]),F(k.RuinsCrystal,341,"Ruins Crystal",[[n.b.I,[8,9,10]]],[]),F(k.Monument,342,"Monument",[[n.b.I,[2,4,7]]],[]),F(k.RuinsRock1,345,"Ruins Rock 1",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock2,346,"Ruins Rock 2",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock3,347,"Ruins Rock 3",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock4,348,"Ruins Rock 4",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock5,349,"Ruins Rock 5",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock6,350,"Ruins Rock 6",[[n.b.I,[8,9,10]]],[]),F(k.RuinsRock7,351,"Ruins Rock 7",[[n.b.I,[8,9,10]]],[]),F(k.Poison,352,"Poison",[[n.b.I,[8,9,10,13]],[n.b.II,[3,4,10,11]],[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Radius",40,"F32"],["Power",44,"F32"],["Link",48,"F32"],["Switch mode",52,"I32"],["Fog index no.",56,"I32"],["Switch ID",60,"I32"]]),F(k.FixedBoxTypeRuins,353,"Fixed Box Type (Ruins)",[[n.b.I,[8,9,10,16,17]],[n.b.II,[1,2,3,4,14,15]]],[["Full random",40,"F32"],["Random item",44,"F32"],["Fixed item",48,"F32"],["Item parameter",52,"I32"]]),F(k.RandomBoxTypeRuins,354,"Random Box Type (Ruins)",[[n.b.I,[8,9,10,16,17]],[n.b.II,[1,2,3,4,14,15]]],[]),F(k.EnemyTypeBoxYellow,355,"Enemy Type Box (Yellow)",[[n.b.I,[8,9,10,16,17]],[n.b.II,[1,2,3,4]]],[]),F(k.EnemyTypeBoxBlue,356,"Enemy Type Box (Blue)",[[n.b.I,[8,9,10,16,17]],[n.b.II,[1,2,3,4]]],[]),F(k.EmptyTypeBoxBlue,357,"Empty Type Box (Blue)",[[n.b.I,[8,9,10,16,17]],[n.b.II,[1,2,3,4]]],[]),F(k.DestructableRock,358,"Destructable Rock",[[n.b.I,[8,9,10]]],[]),F(k.PopupTrapsTechs,359,"Popup Traps (techs)",[[n.b.I,[6,7,8,9,10]],[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]]],[["Radius",40,"F32"],["HP",44,"F32"],["Action",56,"I32"],["Tech",60,"I32"]]),F(k.FlyingWhiteBird,368,"Flying White Bird",[[n.b.I,[14,16]],[n.b.II,[3,4]]],[]),F(k.Tower,369,"Tower",[[n.b.I,[14]]],[]),F(k.FloatingRocks,370,"Floating Rocks",[[n.b.I,[14]]],[]),F(k.FloatingSoul,371,"Floating Soul",[[n.b.I,[14]]],[]),F(k.Butterfly,372,"Butterfly",[[n.b.I,[14]]],[]),F(k.LobbyGameMenu,384,"Lobby Game menu",[[n.b.I,[15]]],[]),F(k.LobbyWarpObject,385,"Lobby Warp Object",[[n.b.I,[15]]],[]),F(k.Lobby1EventObjectDefaultTree,386,"Lobby 1 Event Object (Default Tree)",[[n.b.I,[15]]],[]),F(k.UnknownItem387,387,"Unknown Item (387)",[[n.b.I,[15]]],[]),F(k.UnknownItem388,388,"Unknown Item (388)",[[n.b.I,[15]]],[]),F(k.UnknownItem389,389,"Unknown Item (389)",[[n.b.I,[15]]],[]),F(k.LobbyEventObjectStaticPumpkin,390,"Lobby Event Object (Static Pumpkin)",[[n.b.I,[15]]],[]),F(k.LobbyEventObject3ChristmasWindows,391,"Lobby Event Object (3 Christmas Windows)",[[n.b.I,[15]]],[]),F(k.LobbyEventObjectRedAndWhiteCurtain,392,"Lobby Event Object (Red and White Curtain)",[[n.b.I,[15]]],[]),F(k.UnknownItem393,393,"Unknown Item (393)",[[n.b.I,[15]]],[]),F(k.UnknownItem394,394,"Unknown Item (394)",[[n.b.I,[15]]],[]),F(k.LobbyFishTank,395,"Lobby Fish Tank",[[n.b.I,[15]]],[]),F(k.LobbyEventObjectButterflies,396,"Lobby Event Object (Butterflies)",[[n.b.I,[15]]],[]),F(k.UnknownItem400,400,"Unknown Item (400)",[[n.b.I,[16]],[n.b.II,[3,4]]],[]),F(k.GreyWallLow,401,"grey wall low",[[n.b.I,[16]],[n.b.II,[3,4,17]]],[]),F(k.SpaceshipDoor,402,"Spaceship Door",[[n.b.I,[16]],[n.b.II,[3,4]]],[["Switch ID",52,"I32"]]),F(k.GreyWallHigh,403,"grey wall high",[[n.b.I,[16]],[n.b.II,[3,4,17]]],[]),F(k.TempleNormalDoor,416,"Temple Normal Door",[[n.b.I,[17]],[n.b.II,[1,2]]],[["Switch ID",52,"I32"]]),F(k.BreakableWallWallButUnbreakable,417,'"breakable wall wall, but unbreakable"',[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.BrokenCylinderAndRubble,418,"Broken cylinder and rubble",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.ThreeBrokenWallPiecesOnFloor,419,"3 broken wall pieces on floor",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.HighBrickCylinder,420,"high brick cylinder",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.LyingCylinder,421,"lying cylinder",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.BrickConeWithFlatTop,422,"brick cone with flat top",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.BreakableTempleWall,423,"breakable temple wall",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.TempleMapDetect,424,"Temple Map Detect",[[n.b.I,[17]],[n.b.II,[1,2,14]],[n.b.IV,[1,2,3,4,5]]],[]),F(k.SmallBrownBrickRisingBridge,425,"small brown brick rising bridge",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.LongRisingBridgeWithPinkHighEdges,426,"long rising bridge (with pink high edges)",[[n.b.I,[17]],[n.b.II,[1,2]]],[]),F(k.FourSwitchTempleDoor,427,"4 Switch Temple Door",[[n.b.II,[1,2]]],[]),F(k.FourButtonSpaceshipDoor,448,"4 button Spaceship Door",[[n.b.II,[3,4]]],[]),F(k.ItemBoxCca,512,"Item Box CCA",[[n.b.II,[5,6,7,8,9,12,16,17]],[n.b.IV,[5]]],[]),F(k.TeleporterEp2,513,"Teleporter (Ep. II)",[[n.b.II,[5,6,7,8,9,10,11,12,13,16,17]]],[]),F(k.CcaDoor,514,"CCA Door",[[n.b.II,[5,6,7,8,9,16,17]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Switch ID",52,"I32"],["Switch amount",56,"I32"],["Stay active",60,"I32"]]),F(k.SpecialBoxCca,515,"Special Box CCA",[[n.b.II,[5,6,7,8,9,12,16,17]],[n.b.IV,[1,2,3,4,5]]],[]),F(k.BigCcaDoor,516,"Big CCA Door",[[n.b.II,[5]]],[]),F(k.BigCcaDoorSwitch,517,"Big CCA Door Switch",[[n.b.II,[5,6,7,8,9,16,17]]],[]),F(k.LittleRock,518,"Little Rock",[[n.b.II,[5,6,7,8,9,16]]],[]),F(k.Little3StoneWall,519,"Little 3 Stone Wall",[[n.b.II,[5,6,7,8,9,16]]],[["Switch ID",52,"I32"]]),F(k.Medium3StoneWall,520,"Medium 3 Stone Wall",[[n.b.II,[5,6,7,8,9,16]]],[]),F(k.SpiderPlant,521,"Spider Plant",[[n.b.II,[5,6,7,8,9,16]]],[]),F(k.CcaAreaTeleporter,522,"CCA Area Teleporter",[[n.b.II,[5,6,7,8,9,16,17]]],[]),F(k.UnknownItem523,523,"Unknown Item (523)",[[n.b.II,[5,12]]],[]),F(k.WhiteBird,524,"White Bird",[[n.b.II,[6,7,9,16,17]],[n.b.IV,[6,7,8]]],[]),F(k.OrangeBird,525,"Orange Bird",[[n.b.II,[6,7,9,17]]],[]),F(k.Saw,527,"Saw",[[n.b.II,[5,6,7,8,9,10,11,16,17]]],[["Speed",44,"F32"],["Model",48,"F32"],["Switch ID",52,"I32"],["Arc",56,"I32"],["Switch flag",60,"I32"]]),F(k.LaserDetect,528,"Laser Detect",[[n.b.II,[5,6,7,8,9,10,11,16,17]]],[["Model",48,"F32"],["Switch ID",52,"I32"],["Arc",56,"I32"]]),F(k.UnknownItem529,529,"Unknown Item (529)",[[n.b.II,[5,6,7]],[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem530,530,"Unknown Item (530)",[[n.b.II,[5,6,7,8,9,17]]],[]),F(k.Seagull,531,"Seagull",[[n.b.II,[6,7,8,9,16]],[n.b.IV,[6,7,8]]],[]),F(k.Fish,544,"Fish",[[n.b.I,[15]],[n.b.II,[6,9,10,11,16]]],[]),F(k.SeabedDoorWithBlueEdges,545,"Seabed Door (with Blue Edges)",[[n.b.II,[10,11]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Switch ID",52,"I32"],["Switch amount",56,"I32"],["Stay active",60,"I32"]]),F(k.SeabedDoorAlwaysOpenNonTriggerable,546,"Seabed Door (Always Open, Non-Triggerable)",[[n.b.II,[10,11]]],[]),F(k.LittleCryotube,547,"Little Cryotube",[[n.b.II,[10,11,17]]],[["Model",52,"U32"]]),F(k.WideGlassWallBreakable,548,"Wide Glass Wall (Breakable)",[[n.b.II,[10,11]]],[]),F(k.BlueFloatingRobot,549,"Blue Floating Robot",[[n.b.II,[10,11]]],[]),F(k.RedFloatingRobot,550,"Red Floating Robot",[[n.b.II,[10,11]]],[]),F(k.Dolphin,551,"Dolphin",[[n.b.II,[10,11]]],[]),F(k.CaptureTrap,552,"Capture Trap",[[n.b.II,[5,6,7,8,9,10,11,16,17]]],[]),F(k.VRLink,553,"VR Link",[[n.b.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]]],[]),F(k.UnknownItem576,576,"Unknown Item (576)",[[n.b.II,[12]]],[]),F(k.WarpInBarbaRayRoom,640,"Warp in Barba Ray Room",[[n.b.II,[14]]],[]),F(k.UnknownItem672,672,"Unknown Item (672)",[[n.b.II,[15]]],[]),F(k.GeeNest,688,"Gee Nest",[[n.b.I,[8,9,10]],[n.b.II,[5,6,7,8,9,16,17]],[n.b.IV,[6,7,8]]],[]),F(k.LabComputerConsole,689,"Lab Computer Console",[[n.b.II,[0]]],[]),F(k.LabComputerConsoleGreenScreen,690,"Lab Computer Console (Green Screen)",[[n.b.II,[0]]],[]),F(k.ChairYellowPillow,691,"Chair, Yellow Pillow",[[n.b.II,[0]]],[]),F(k.OrangeWallWithHoleInMiddle,692,"Orange Wall with Hole in Middle",[[n.b.II,[0]]],[]),F(k.GreyWallWithHoleInMiddle,693,"Grey Wall with Hole in Middle",[[n.b.II,[0]]],[]),F(k.LongTable,694,"Long Table",[[n.b.II,[0]]],[]),F(k.GBAStation,695,"GBA Station",[],[]),F(k.TalkLinkToSupport,696,"Talk (Link to Support)",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.InstaWarp,697,"Insta-Warp",[[n.b.I,[0,1,2,3,4,5,6,7,11,12,13,14,16,17]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,9,0]]],[]),F(k.LabInvisibleObject,698,"Lab Invisible Object",[[n.b.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[n.b.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[n.b.IV,[1,2,3,4,5,6,7,8,0]]],[]),F(k.LabGlassWindowDoor,699,"Lab Glass Window Door",[[n.b.II,[0]]],[]),F(k.UnknownItem700,700,"Unknown Item (700)",[[n.b.II,[13]]],[]),F(k.LabCeilingWarp,701,"Lab Ceiling Warp",[[n.b.II,[0]]],[]),F(k.Ep4LightSource,768,"Ep. IV Light Source",[[n.b.IV,[1,2,3,4,5,6,7,8,9]]],[]),F(k.Cactus,769,"Cactus",[[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Scale x",40,"F32"],["Scale y",44,"F32"],["Scale z",48,"F32"],["Model",52,"U32"]]),F(k.BigBrownRock,770,"Big Brown Rock",[[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Model",52,"U32"]]),F(k.BreakableBrownRock,771,"Breakable Brown Rock",[[n.b.IV,[1,2,3,4,5,6,7,8]]],[]),F(k.UnknownItem832,832,"Unknown Item (832)",[],[]),F(k.UnknownItem833,833,"Unknown Item (833)",[],[]),F(k.PoisonPlant,896,"Poison Plant",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem897,897,"Unknown Item (897)",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem898,898,"Unknown Item (898)",[[n.b.IV,[6,7,8]]],[]),F(k.OozingDesertPlant,899,"Oozing Desert Plant",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem901,901,"Unknown Item (901)",[[n.b.IV,[6,7,8]]],[]),F(k.BigBlackRocks,902,"Big Black Rocks",[[n.b.IV,[1,2,3,4,5,6,7,8]]],[["Model",52,"U32"]]),F(k.UnknownItem903,903,"Unknown Item (903)",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem904,904,"Unknown Item (904)",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem905,905,"Unknown Item (905)",[],[]),F(k.UnknownItem906,906,"Unknown Item (906)",[],[]),F(k.FallingRock,907,"Falling Rock",[[n.b.IV,[6,7,8]]],[]),F(k.DesertPlantHasCollision,908,"Desert Plant (Has Collision)",[[n.b.IV,[6,7,8]]],[]),F(k.DesertFixedTypeBoxBreakableCrystals,909,"Desert Fixed Type Box (Breakable Crystals)",[[n.b.IV,[6,7,8]]],[]),F(k.UnknownItem910,910,"Unknown Item (910)",[],[]),F(k.BeeHive,911,"Bee Hive",[[n.b.IV,[6,7,8]]],[["Model",52,"U32"]]),F(k.UnknownItem912,912,"Unknown Item (912)",[[n.b.IV,[6,7,8]]],[]),F(k.Heat,913,"Heat",[[n.b.IV,[6,7,8]]],[["Radius",40,"F32"],["Fog index no.",52,"I32"]]),F(k.TopOfSaintMillionEgg,960,"Top of Saint Million Egg",[[n.b.IV,[9]]],[]),F(k.UnknownItem961,961,"Unknown Item (961)",[[n.b.IV,[9]]],[]),Object.freeze(j),Object.freeze(C);var x=i(84),D=i(457),O=i(514),L=i(528),B=i(16),P=i(24),W=i(466);const E=P.a.get("core/data_formats/parsing/quest/dat");var q;function M({objs:e,npcs:t,events:i,unknowns:s}){const o=new L.a(84*e.length+88*t.length+s.reduce((e,t)=>e+t.total_size,0),D.a.Little),n=new O.a(o);z(n,e,1,68),z(n,t,2,72),function(e,t){const i=Object(x.groupBy)(t,e=>e.area_id),s=Object.keys(i).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(const t of s){const s=i[t];e.write_u32(3);const o=e.position;e.write_u32(0),e.write_u32(t);const n=e.position;e.write_u32(0);const r=e.position,a=r+16+20*s.length;e.size=Math.max(a,e.size),e.write_u32(a-r),e.write_u32(16),e.write_u32(s.length),e.write_u32(0);let d=0;for(const t of s){e.write_u32(t.id),e.write_u32(65536),e.write_u16(t.section_id),e.write_u16(t.wave),e.write_u16(t.delay),e.write_u16(t.unknown),e.write_u32(d);const i=e.position;e.seek_start(a+d);for(const i of t.actions)switch(e.write_u8(i.type),i.type){case q.SpawnNpcs:e.write_u16(i.section_id),e.write_u16(i.appear_flag);break;case q.Unlock:case q.Lock:e.write_u16(i.door_id);break;case q.TriggerEvent:e.write_u32(i.event_id);break;default:throw new Error(`Unknown event action type ${i.type}.`)}e.write_u8(1),d=e.position-a,e.seek_start(i)}for(e.seek_start(a+d);(e.position-a)%4!=0;)e.write_u8(255);const c=e.position;e.seek_start(o),e.write_u32(c-r+16),e.seek_start(n),e.write_u32(c-r),e.seek_start(c)}}(n,i);for(const e of s)n.write_u32(e.entity_type),n.write_u32(e.total_size),n.write_u32(e.area_id),n.write_u32(e.entities_size),n.write_u8_array(e.data);return n.write_u32(0),n.write_u32(0),n.write_u32(0),n.write_u32(0),o}function U(e,t,i,s){const o=Math.floor(e.size/s);for(let n=0;n<o;++n)i.push({area_id:t,data:e.array_buffer(s)})}function V(e,t,i){const s=e.u32();e.seek(4);const o=e.u32();e.seek(3);if(50===e.u8())throw new Error("Can't parse challenge mode quests yet.");e.seek_start(s);const n=e.take(e.bytes_left);e.seek_start(16);for(let s=0;s<o;++s){const s=e.u32();e.seek(4);const o=e.u16(),r=e.u16(),a=e.u16(),d=e.u16(),c=e.u32();let l=[];c<n.size?(n.seek_start(c),l=N(n)):E.warn(`Invalid event actions offset ${c} for event ${s}.`),i.push({id:s,section_id:o,wave:r,delay:a,actions:l,area_id:t,unknown:d})}e.position!==s&&E.warn(`Read ${e.position-16} bytes of event data instead of expected ${s-16}.`);let r=255;for(;n.bytes_left&&(r=n.u8(),255===r););255!==r&&n.seek(-1),e.seek_start(s+n.position)}function N(e){const t=[];e:for(;e.bytes_left;){const i=e.u8();switch(i){case 1:break e;case q.SpawnNpcs:t.push({type:q.SpawnNpcs,section_id:e.u16(),appear_flag:e.u16()});break;case q.Unlock:t.push({type:q.Unlock,door_id:e.u16()});break;case q.Lock:t.push({type:q.Lock,door_id:e.u16()});break;case q.TriggerEvent:t.push({type:q.TriggerEvent,event_id:e.u32()});break;default:E.warn(`Unexpected event action type ${i}.`);break e}}return t}function z(e,t,i,s){const o=Object(x.groupBy)(t,e=>e.area_id),n=Object.keys(o).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(const t of n){const n=o[t],r=n.length*s;e.write_u32(i),e.write_u32(r+16),e.write_u32(t),e.write_u32(r);const a=e.position;for(const i of n)Object(B.d)(i.data.byteLength===s,()=>`Malformed entity in area ${t}, data array was of length ${i.data.byteLength} instead of expected ${s}.`),e.write_cursor(new W.a(i.data,e.endianness));Object(B.d)(e.position===a+r,()=>`Wrote ${e.position-a} bytes of entity data instead of expected ${r} bytes for area ${t}.`)}}!function(e){e[e.SpawnNpcs=8]="SpawnNpcs",e[e.Unlock=10]="Unlock",e[e.Lock=11]="Lock",e[e.TriggerEvent=12]="TriggerEvent"}(q||(q={}));var A,$=i(464);function G(e,t,i,s){const o=new ArrayBuffer(72),n={episode:t,area_id:i,data:o,view:new DataView(o)};return function(e,t){switch(e){case R.c.FemaleFat:t.setInt16(2,2,!0),t.setInt16(4,1872,!0),t.setInt16(10,5969,!0),t.setInt16(68,-16432,!0),t.setInt16(70,1834,!0);break;case R.c.FemaleMacho:t.setInt16(2,2,!0),t.setInt16(4,1876,!0),t.setInt16(10,5973,!0),t.setInt16(68,-12528,!0),t.setInt16(70,1834,!0);break;case R.c.FemaleTall:t.setInt16(2,2,!0),t.setInt16(4,1883,!0),t.setInt16(68,-5504,!0),t.setInt16(70,1834,!0);break;case R.c.MaleDwarf:t.setInt16(2,2,!0),t.setInt16(4,1873,!0),t.setInt16(10,5970,!0),t.setInt16(68,-15456,!0),t.setInt16(70,1834,!0);break;case R.c.MaleFat:t.setInt16(2,2,!0),t.setInt16(4,1882,!0),t.setInt16(10,5979,!0),t.setInt16(68,-6528,!0),t.setInt16(70,1834,!0);break;case R.c.MaleMacho:t.setInt16(2,2,!0),t.setInt16(4,1880,!0),t.setInt16(10,5977,!0),t.setInt16(68,-8576,!0),t.setInt16(70,1834,!0);break;case R.c.MaleOld:t.setInt16(2,2,!0),t.setInt16(4,1878,!0),t.setInt16(10,5975,!0),t.setInt16(68,-10576,!0),t.setInt16(70,1834,!0);break;case R.c.BlueSoldier:t.setInt16(2,2,!0),t.setInt16(4,1875,!0),t.setInt16(10,5972,!0),t.setInt16(68,-13504,!0),t.setInt16(70,1834,!0);break;case R.c.RedSoldier:t.setInt16(2,2,!0),t.setInt16(4,1874,!0),t.setInt16(10,5971,!0),t.setInt16(68,-14480,!0),t.setInt16(70,1834,!0);break;case R.c.Principal:t.setInt16(4,1888,!0),t.setInt16(10,5985,!0),t.setInt16(68,-384,!0),t.setInt16(70,1834,!0);break;case R.c.Tekker:t.setInt16(2,2,!0),t.setInt16(4,1879,!0),t.setInt16(10,5976,!0),t.setInt16(68,-9600,!0),t.setInt16(70,1834,!0);break;case R.c.GuildLady:t.setInt16(2,2,!0),t.setInt16(4,1891,!0),t.setInt16(10,5988,!0),t.setInt16(68,11584,!0),t.setInt16(70,1835,!0);break;case R.c.Scientist:t.setInt16(2,2,!0),t.setInt16(4,1877,!0),t.setInt16(10,5974,!0),t.setInt16(68,-11552,!0),t.setInt16(70,1834,!0);break;case R.c.Nurse:t.setInt16(2,2,!0),t.setInt16(4,1884,!0),t.setInt16(10,5981,!0),t.setInt16(68,-4480,!0),t.setInt16(70,1834,!0);break;case R.c.Irene:t.setInt16(4,1889,!0),t.setInt16(10,5986,!0),t.setInt16(68,640,!0),t.setInt16(70,1835,!0);break;case R.c.ItemShop:t.setInt16(4,8,!0),t.setInt16(10,6453,!0),t.setInt16(68,16560,!0),t.setInt16(70,1176,!0);break;case R.c.Nurse2:t.setInt16(4,2330,!0),t.setInt16(10,6496,!0),t.setInt16(68,-13280,!0),t.setInt16(70,1200,!0);break;case R.c.Hildebear:t.setInt16(4,-1,!0),t.setInt16(8,2,!0),t.setInt16(10,-1,!0),t.setFloat32(44,1.000000238418579,!0),t.setInt16(68,29968,!0),t.setInt16(70,-29446,!0);break;case R.c.RagRappy:t.setInt16(8,1,!0),t.setInt16(10,-1,!0),t.setInt16(68,1072,!0),t.setInt16(70,-29444,!0);break;case R.c.Monest:t.setFloat32(48,5.000000953674316,!0),t.setFloat32(52,10.000004768371582,!0);break;case R.c.BarbarousWolf:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,6475,!0),t.setInt16(68,8576,!0),t.setInt16(70,-29445,!0);break;case R.c.Booma:t.setFloat32(44,.30000001192092896,!0),t.setFloat32(48,40.00001907348633,!0);break;case R.c.Gobooma:t.setInt16(8,1,!0),t.setInt16(10,-1,!0),t.setFloat32(44,.30000001192092896,!0),t.setFloat32(48,40.00001907348633,!0),t.setInt16(68,11600,!0),t.setInt16(70,-29444,!0);break;case R.c.Gigobooma:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,6492,!0),t.setInt16(68,-4e3,!0),t.setInt16(70,-29446,!0);break;case R.c.Dragon:t.setInt16(4,1173,!0),t.setInt16(8,11,!0),t.setInt16(10,-1,!0),t.setInt16(68,24624,!0),t.setInt16(70,-29446,!0);break;case R.c.GrassAssassin:case R.c.PoisonLily:t.setInt16(8,4,!0);break;case R.c.NanoDragon:case R.c.EvilShark:case R.c.PalShark:t.setInt16(8,3,!0);break;case R.c.GuilShark:case R.c.PofuillySlime:t.setInt16(8,4,!0);break;case R.c.PanArms:t.setInt16(8,5,!0);break;case R.c.DeRolLe:t.setInt16(4,1485,!0),t.setInt16(6,19,!0),t.setInt16(8,12,!0),t.setInt16(10,-1,!0),t.setInt16(68,-11088,!0),t.setInt16(70,-29445,!0);break;case R.c.Dubchic:t.setInt16(4,2626,!0),t.setInt16(8,7,!0),t.setInt16(10,7272,!0),t.setInt16(68,-25504,!0),t.setInt16(70,561,!0);break;case R.c.Gilchic:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-1,!0),t.setFloat32(44,1.000000238418579,!0),t.setInt16(68,5968,!0),t.setInt16(70,-29444,!0);break;case R.c.Garanz:t.setInt16(4,-1,!0),t.setInt16(8,7,!0),t.setInt16(10,6319,!0),t.setInt16(68,-26128,!0),t.setInt16(70,561,!0);break;case R.c.SinowBeat:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-1,!0),t.setInt16(68,6288,!0),t.setInt16(70,-29444,!0);break;case R.c.SinowGold:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-1,!0),t.setFloat32(44,-1.000000238418579,!0),t.setInt16(68,8048,!0),t.setInt16(70,-29444,!0);break;case R.c.Canadine:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-1,!0),t.setInt16(68,8496,!0),t.setInt16(70,-29444,!0);break;case R.c.Canane:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-1,!0),t.setInt16(68,7264,!0),t.setInt16(70,-29444,!0);break;case R.c.Dubswitch:t.setInt16(4,2626,!0),t.setInt16(8,7,!0),t.setInt16(10,7298,!0),t.setInt16(68,-16736,!0),t.setInt16(70,561,!0);break;case R.c.VolOptPart1:t.setInt16(6,35,!0);break;case R.c.VolOptPart2:t.setInt16(8,13,!0);break;case R.c.DarkFalz:t.setInt16(4,-1,!0),t.setInt16(8,14,!0),t.setInt16(10,7458,!0),t.setInt16(68,25008,!0),t.setInt16(70,-29446,!0);break;case R.c.Hildebear2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,30745,!0),t.setFloat32(44,1,!0),t.setInt16(68,-7296,!0),t.setInt16(70,-32759,!0);break;case R.c.RagRappy2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,-7401,!0),t.setInt16(68,-7296,!0),t.setInt16(70,8201,!0);break;case R.c.Monest2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,4122,!0),t.setFloat32(48,3,!0),t.setFloat32(52,9,!0),t.setInt16(68,-7296,!0),t.setInt16(70,-12252,!0);break;case R.c.PoisonLily2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,26648,!0),t.setInt16(68,-7296,!0),t.setInt16(70,8230,!0);break;case R.c.GrassAssassin2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,20761,!0),t.setInt16(68,-7296,!0),t.setInt16(70,24595,!0);break;case R.c.Dimenian2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,28696,!0),t.setInt16(68,-7296,!0),t.setInt16(70,-4086,!0);break;case R.c.LaDimenian2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,7449,!0),t.setInt16(68,-7296,!0),t.setInt16(70,-16367,!0);break;case R.c.SoDimenian2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,-1254,!0),t.setFloat32(48,100,!0),t.setInt16(68,-7040,!0),t.setInt16(70,8372,!0);break;case R.c.DarkBelra2:t.setInt16(4,-1,!0),t.setInt16(8,1,!0),t.setInt16(10,-17895,!0),t.setInt16(68,-7040,!0),t.setInt16(70,-32642,!0);break;case R.c.BarbaRay:t.setInt16(4,-1,!0),t.setInt16(8,14,!0),t.setInt16(10,23572,!0),t.setInt16(68,-2688,!0),t.setInt16(70,24576,!0);break;case R.c.SavageWolf2:t.setInt16(4,11785,!0),t.setInt16(8,3,!0),t.setInt16(10,-20711,!0),t.setInt16(68,-7552,!0),t.setInt16(70,8250,!0);break;case R.c.BarbarousWolf2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,-14056,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-32650,!0);break;case R.c.PanArms2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,-6632,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-16251,!0);break;case R.c.Dubchic2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,-3560,!0),t.setInt16(68,-7552,!0),t.setInt16(70,16513,!0);break;case R.c.Gilchic2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,-23272,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-32654,!0);break;case R.c.Garanz2:t.setInt16(4,27144,!0),t.setInt16(8,3,!0),t.setInt16(10,27928,!0),t.setInt16(68,-7552,!0),t.setInt16(70,24683,!0);break;case R.c.Dubswitch2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,-4840,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-20363,!0);break;case R.c.Delsaber2:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,2841,!0),t.setInt16(68,-7552,!0),t.setInt16(70,16513,!0);break;case R.c.ChaosSorcerer2:t.setInt16(4,-1,!0),t.setInt16(8,4,!0),t.setInt16(10,9754,!0),t.setInt16(68,-7296,!0),t.setInt16(70,-7963,!0);break;case R.c.GolDragon:t.setInt16(4,-19963,!0),t.setInt16(8,15,!0),t.setInt16(10,-18411,!0),t.setInt16(68,-3712,!0),t.setInt16(70,16555,!0);break;case R.c.SinowBerill:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,15896,!0),t.setFloat32(44,3,!0),t.setFloat32(52,-.19999998807907104,!0),t.setInt16(68,-7552,!0),t.setInt16(70,47,!0);break;case R.c.SinowSpigell:t.setInt16(4,880,!0),t.setInt16(8,5,!0),t.setInt16(10,7101,!0),t.setInt16(68,-11584,!0),t.setInt16(70,1163,!0);break;case R.c.Merillia:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,28439,!0),t.setFloat32(44,1,!0),t.setFloat32(52,-.09999999403953552,!0),t.setInt16(68,-7552,!0),t.setInt16(70,16456,!0);break;case R.c.Meriltas:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,30999,!0),t.setFloat32(44,-1,!0),t.setFloat32(52,.09999999403953552,!0),t.setInt16(68,-7552,!0),t.setInt16(70,16456,!0);break;case R.c.Mericarol:t.setInt16(4,-1,!0),t.setInt16(8,17,!0),t.setInt16(10,30232,!0),t.setFloat32(44,.19999998807907104,!0),t.setFloat32(52,.19999998807907104,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-4016,!0);break;case R.c.Mericus:t.setInt16(4,32010,!0),t.setInt16(8,17,!0),t.setInt16(10,3356,!0),t.setFloat32(44,.19999998807907104,!0),t.setFloat32(52,.19999998807907104,!0),t.setInt16(68,-7552,!0),t.setInt16(70,28762,!0);break;case R.c.Merikle:t.setInt16(4,32010,!0),t.setInt16(8,17,!0),t.setInt16(10,3868,!0),t.setFloat32(44,.19999998807907104,!0),t.setFloat32(52,.19999998807907104,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-3997,!0);break;case R.c.UlGibbon:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-27881,!0),t.setFloat32(48,1,!0),t.setInt16(68,-7552,!0),t.setInt16(70,20554,!0);break;case R.c.ZolGibbon:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,6331,!0),t.setInt16(68,-26688,!0),t.setInt16(70,565,!0);break;case R.c.Gibbles:t.setInt16(4,-1,!0),t.setInt16(8,17,!0),t.setInt16(10,-24296,!0),t.setFloat32(44,500,!0),t.setFloat32(52,.7999999523162842,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-12210,!0);break;case R.c.Gee:t.setInt16(4,-1,!0),t.setInt16(8,6,!0),t.setInt16(10,-20457,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-4024,!0);break;case R.c.GiGue:t.setInt16(4,32010,!0),t.setInt16(8,17,!0),t.setInt16(10,13852,!0),t.setFloat32(44,501,!0),t.setFloat32(52,50,!0),t.setInt16(68,-7552,!0),t.setInt16(70,12374,!0);break;case R.c.IllGill:t.setInt16(4,4104,!0),t.setInt16(8,17,!0),t.setInt16(10,7192,!0),t.setInt16(68,-7552,!0),t.setInt16(70,24639,!0);break;case R.c.DelLily:t.setInt16(4,-1,!0),t.setInt16(8,17,!0),t.setInt16(10,6388,!0),t.setInt16(68,-26576,!0),t.setInt16(70,564,!0);break;case R.c.Epsilon:t.setInt16(4,-1,!0),t.setInt16(8,17,!0),t.setInt16(10,-7914,!0),t.setInt16(68,-4224,!0),t.setInt16(70,-16379,!0);break;case R.c.GalGryphon:t.setInt16(4,1173,!0),t.setInt16(8,11,!0),t.setInt16(10,-1,!0),t.setInt16(68,24624,!0),t.setInt16(70,-29446,!0);break;case R.c.Deldepth:t.setInt16(4,2095,!0),t.setInt16(8,11,!0),t.setInt16(10,6251,!0),t.setInt16(68,-26352,!0),t.setInt16(70,665,!0);break;case R.c.Delbiter:t.setInt16(4,-1,!0),t.setInt16(8,11,!0),t.setInt16(10,-27880,!0),t.setFloat32(48,.19999998807907104,!0),t.setFloat32(52,20,!0),t.setFloat32(60,.5,!0),t.setInt32(64,1,!0),t.setInt16(68,-7552,!0),t.setInt16(70,24639,!0);break;case R.c.Dolmolm:t.setInt16(4,-1,!0),t.setInt16(8,11,!0),t.setInt16(10,28441,!0),t.setFloat32(52,1,!0),t.setInt16(68,-7552,!0),t.setInt16(70,12370,!0);break;case R.c.Dolmdarl:t.setInt16(4,-1,!0),t.setInt16(8,11,!0),t.setInt16(10,31513,!0),t.setFloat32(52,-1,!0),t.setInt16(68,-7552,!0),t.setInt16(70,-4001,!0);break;case R.c.Morfos:t.setInt16(4,1993,!0),t.setInt16(8,11,!0),t.setInt16(10,6115,!0),t.setInt16(68,-25424,!0),t.setInt16(70,561,!0);break;case R.c.Recobox:t.setInt16(4,-1,!0),t.setInt16(8,11,!0),t.setInt16(10,6107,!0),t.setInt16(68,-26160,!0),t.setInt16(70,686,!0);break;case R.c.SinowZoa:t.setInt16(4,2634,!0),t.setInt16(8,11,!0),t.setInt16(10,6999,!0),t.setFloat32(44,1,!0),t.setInt16(68,-19488,!0),t.setInt16(70,665,!0);break;case R.c.SinowZele:t.setInt16(4,2634,!0),t.setInt16(8,11,!0),t.setInt16(10,7027,!0),t.setInt16(68,-25152,!0),t.setInt16(70,665,!0);break;case R.c.OlgaFlow:t.setInt16(4,-1,!0),t.setInt16(8,13,!0),t.setInt16(10,8466,!0),t.setInt16(68,-4480,!0),t.setInt16(70,-28572,!0);break;case R.c.SandRappy:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5471,!0),t.setInt16(68,-27344,!0),t.setInt16(70,616,!0);break;case R.c.DelRappy:t.setInt16(4,-1,!0),t.setInt16(8,3,!0),t.setInt16(10,5039,!0),t.setInt16(68,-17168,!0),t.setInt16(70,410,!0);break;case R.c.Astark:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5653,!0),t.setInt16(68,-26896,!0),t.setInt16(70,616,!0);break;case R.c.SatelliteLizard:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5524,!0),t.setInt16(68,-27088,!0),t.setInt16(70,616,!0);break;case R.c.Yowie:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5547,!0),t.setFloat32(44,1,!0),t.setInt16(68,-25872,!0),t.setInt16(70,616,!0);break;case R.c.MerissaA:t.setInt16(4,-1,!0),t.setInt16(8,7,!0),t.setInt16(10,5322,!0),t.setInt16(68,-16512,!0),t.setInt16(70,542,!0);break;case R.c.MerissaAA:t.setInt16(4,-1,!0),t.setInt16(8,8,!0),t.setInt16(10,5651,!0),t.setInt16(68,-27328,!0),t.setInt16(70,1230,!0);break;case R.c.Girtablulu:t.setInt16(4,-1,!0),t.setInt16(8,7,!0),t.setInt16(10,5007,!0),t.setInt16(68,-26256,!0),t.setInt16(70,459,!0);break;case R.c.Zu:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5734,!0),t.setInt16(68,-28304,!0),t.setInt16(70,616,!0);break;case R.c.Pazuzu:t.setInt16(4,937,!0),t.setInt16(8,3,!0),t.setInt16(10,5054,!0),t.setInt16(68,-15216,!0),t.setInt16(70,410,!0);break;case R.c.Boota:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5496,!0),t.setInt16(68,-27216,!0),t.setInt16(70,616,!0);break;case R.c.ZeBoota:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5504,!0),t.setInt16(68,-20304,!0),t.setInt16(70,616,!0);break;case R.c.BaBoota:t.setInt16(4,-1,!0),t.setInt16(8,5,!0),t.setInt16(10,5513,!0),t.setInt16(68,-14800,!0),t.setInt16(70,616,!0);break;case R.c.Dorphon:t.setInt16(4,2308,!0),t.setInt16(8,5,!0),t.setInt16(10,6840,!0),t.setInt16(68,-26480,!0),t.setInt16(70,616,!0);break;case R.c.DorphonEclair:t.setInt16(4,951,!0),t.setInt16(8,3,!0),t.setInt16(10,5101,!0),t.setInt16(68,-30064,!0),t.setInt16(70,410,!0);break;case R.c.Goran:t.setInt16(4,-1,!0),t.setInt16(8,8,!0),t.setInt16(10,5439,!0),t.setInt16(68,-27216,!0),t.setInt16(70,610,!0);break;case R.c.PyroGoran:t.setInt16(4,-1,!0),t.setInt16(8,7,!0),t.setInt16(10,5375,!0),t.setInt16(68,-16384,!0),t.setInt16(70,542,!0);break;case R.c.GoranDetonator:t.setInt16(4,-1,!0),t.setInt16(8,7,!0),t.setInt16(10,5373,!0),t.setInt16(68,-16384,!0),t.setInt16(70,542,!0);break;case R.c.SaintMilion:t.setInt16(4,1297,!0),t.setInt16(6,24,!0),t.setInt16(8,9,!0),t.setInt16(10,5521,!0),t.setInt16(68,28144,!0),t.setInt16(70,673,!0);break;case R.c.Shambertin:t.setInt16(4,1362,!0),t.setInt16(6,24,!0),t.setInt16(8,9,!0),t.setInt16(10,5662,!0),t.setFloat32(44,1,!0),t.setInt16(68,31280,!0),t.setInt16(70,491,!0)}}(e,n.view),function(e,t){var i,s,o;const n=Object(R.d)(t);null!=n.episode&&(e.episode=n.episode);switch(function(e,t){e.view.setUint16(0,t,!0)}(e,null!==(i=n.type_id)&&void 0!==i?i:0),t){case R.c.SaintMilion:case R.c.SavageWolf:case R.c.BarbarousWolf:case R.c.PoisonLily:case R.c.NarLily:case R.c.PofuillySlime:case R.c.PouillySlime:case R.c.PoisonLily2:case R.c.NarLily2:case R.c.SavageWolf2:case R.c.BarbarousWolf2:case R.c.Kondrieu:case R.c.Shambertin:case R.c.SinowBeat:case R.c.SinowGold:case R.c.SatelliteLizard:case R.c.Yowie:!function(e,t){e.view.setFloat32(48,t?1:0,!0)}(e,null!==(s=n.special)&&void 0!==s&&s)}(function(e,t){e.view.setUint32(64,t,!0)})(e,null!==(o=n.skin)&&void 0!==o?o:0),n.area_ids.length>0&&!n.area_ids.includes(e.area_id)&&(e.area_id=n.area_ids[0])}(n,e),n.area_id=i,Q(n,s),Y(n,s),n}function H(e){return e.view.getUint16(12,!0)}function Q(e,t){e.view.setUint16(14,t,!0)}function Y(e,t){e.view.setUint32(16,t,!0)}function K(e){return Math.round(e.view.getFloat32(60,!0))}function J(e){const t=e.episode,i=function(e){return e.view.getUint16(0,!0)}(e),s=function(e){return 1===Math.round(e.view.getFloat32(48,!0))}(e),o=function(e){return e.view.getUint32(64,!0)}(e),n=e.area_id;switch(`${i}, ${o%3}, ${t}`){case"68, 0, 1":return R.c.Booma;case"68, 1, 1":return R.c.Gobooma;case"68, 2, 1":return R.c.Gigobooma;case"99, 0, 1":return R.c.EvilShark;case"99, 1, 1":return R.c.PalShark;case"99, 2, 1":return R.c.GuilShark;case"166, 0, 1":return R.c.Dimenian;case"166, 0, 2":return R.c.Dimenian2;case"166, 1, 1":return R.c.LaDimenian;case"166, 1, 2":return R.c.LaDimenian2;case"166, 2, 1":return R.c.SoDimenian;case"166, 2, 2":return R.c.SoDimenian2;case"214, 0, 2":return R.c.Mericarol;case"214, 1, 2":return R.c.Mericus;case"214, 2, 2":return R.c.Merikle;case"277, 0, 4":return R.c.Boota;case"277, 1, 4":return R.c.ZeBoota;case"277, 2, 4":return R.c.BaBoota;case"279, 0, 4":return R.c.Goran;case"279, 1, 4":return R.c.PyroGoran;case"279, 2, 4":return R.c.GoranDetonator}switch(`${i}, ${o%2}, ${t}`){case"64, 0, 1":return R.c.Hildebear;case"64, 0, 2":return R.c.Hildebear2;case"64, 1, 1":return R.c.Hildeblue;case"64, 1, 2":return R.c.Hildeblue2;case"65, 0, 1":return R.c.RagRappy;case"65, 0, 2":return R.c.RagRappy2;case"65, 0, 4":return R.c.SandRappy;case"65, 1, 1":return R.c.AlRappy;case"65, 1, 2":return R.c.LoveRappy;case"65, 1, 4":return R.c.DelRappy;case"128, 0, 1":return R.c.Dubchic;case"128, 0, 2":return R.c.Dubchic2;case"128, 1, 1":return R.c.Gilchic;case"128, 1, 2":return R.c.Gilchic2;case"212, 0, 2":return R.c.SinowBerill;case"212, 1, 2":return R.c.SinowSpigell;case"213, 0, 2":return R.c.Merillia;case"213, 1, 2":return R.c.Meriltas;case"215, 0, 2":return R.c.UlGibbon;case"215, 1, 2":return R.c.ZolGibbon;case"221, 0, 2":return R.c.Dolmolm;case"221, 1, 2":return R.c.Dolmdarl;case"224, 0, 2":return n>15?R.c.Epsilon:R.c.SinowZoa;case"224, 1, 2":return n>15?R.c.Epsilon:R.c.SinowZele;case"274, 0, 4":return R.c.MerissaA;case"274, 1, 4":return R.c.MerissaAA;case"276, 0, 4":return R.c.Zu;case"276, 1, 4":return R.c.Pazuzu;case"278, 0, 4":return R.c.Dorphon;case"278, 1, 4":return R.c.DorphonEclair;case"281, 0, 4":return s?R.c.Kondrieu:R.c.SaintMilion;case"281, 1, 4":return s?R.c.Kondrieu:R.c.Shambertin}switch(`${i}, ${t}`){case"66, 1":return R.c.Monest;case"66, 2":return R.c.Monest2;case"67, 1":return s?R.c.BarbarousWolf:R.c.SavageWolf;case"67, 2":return s?R.c.BarbarousWolf2:R.c.SavageWolf2;case"96, 1":return R.c.GrassAssassin;case"96, 2":return R.c.GrassAssassin2;case"97, 1":return n>15?R.c.DelLily:s?R.c.NarLily:R.c.PoisonLily;case"97, 2":return n>15?R.c.DelLily:s?R.c.NarLily2:R.c.PoisonLily2;case"98, 1":return R.c.NanoDragon;case"100, 1":return s?R.c.PouillySlime:R.c.PofuillySlime;case"101, 1":return R.c.PanArms;case"101, 2":return R.c.PanArms2;case"129, 1":return R.c.Garanz;case"129, 2":return R.c.Garanz2;case"130, 1":return s?R.c.SinowGold:R.c.SinowBeat;case"131, 1":return R.c.Canadine;case"132, 1":return R.c.Canane;case"133, 1":return R.c.Dubswitch;case"133, 2":return R.c.Dubswitch2;case"160, 1":return R.c.Delsaber;case"160, 2":return R.c.Delsaber2;case"161, 1":return R.c.ChaosSorcerer;case"161, 2":return R.c.ChaosSorcerer2;case"162, 1":return R.c.DarkGunner;case"164, 1":return R.c.ChaosBringer;case"165, 1":return R.c.DarkBelra;case"165, 2":return R.c.DarkBelra2;case"167, 1":return R.c.Bulclaw;case"168, 1":return R.c.Claw;case"192, 1":return R.c.Dragon;case"192, 2":return R.c.GalGryphon;case"193, 1":return R.c.DeRolLe;case"194, 1":return R.c.VolOptPart1;case"197, 1":return R.c.VolOptPart2;case"200, 1":return R.c.DarkFalz;case"202, 2":return R.c.OlgaFlow;case"203, 2":return R.c.BarbaRay;case"204, 2":return R.c.GolDragon;case"216, 2":return R.c.Gibbles;case"217, 2":return R.c.Gee;case"218, 2":return R.c.GiGue;case"219, 2":return R.c.Deldepth;case"220, 2":return R.c.Delbiter;case"222, 2":return R.c.Morfos;case"223, 2":return R.c.Recobox;case"225, 2":return R.c.IllGill;case"272, 4":return R.c.Astark;case"273, 4":return s?R.c.Yowie:R.c.SatelliteLizard;case"275, 4":return R.c.Girtablulu}switch(i){case 4:return R.c.FemaleFat;case 5:return R.c.FemaleMacho;case 7:return R.c.FemaleTall;case 10:return R.c.MaleDwarf;case 11:return R.c.MaleFat;case 12:return R.c.MaleMacho;case 13:return R.c.MaleOld;case 25:return R.c.BlueSoldier;case 26:return R.c.RedSoldier;case 27:return R.c.Principal;case 28:return R.c.Tekker;case 29:return R.c.GuildLady;case 30:return R.c.Scientist;case 31:return R.c.Nurse;case 32:return R.c.Irene;case 241:return R.c.ItemShop;case 254:return R.c.Nurse2}return R.c.Unknown}function Z(e,t){const i=new ArrayBuffer(68),s={area_id:t,data:i,view:new DataView(i)};return function(e,t){switch(t.setFloat32(40,1,!0),t.setFloat32(44,1,!0),t.setFloat32(48,1,!0),e){case k.PlayerSet:t.setInt16(2,2,!0),t.setInt16(4,4,!0),t.setFloat32(40,0,!0),t.setInt32(64,-1929687552,!0);break;case k.Particle:t.setInt16(4,5639,!0),t.setInt16(6,10,!0),t.setFloat32(40,38,!0),t.setInt32(64,1351475840,!0);break;case k.Teleporter:t.setInt16(2,2,!0),t.setInt16(4,90,!0),t.setInt16(6,1,!0),t.setInt32(64,-1929650432,!0);break;case k.Warp:t.setInt16(4,1332,!0),t.setInt16(6,4,!0),t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(52,0,!0),t.setInt32(64,-1929729040,!0);break;case k.LightCollision:t.setFloat32(48,.5,!0),t.setInt32(56,26112,!0),t.setInt32(64,-802624128,!0);break;case k.FogCollision:t.setInt16(4,2019,!0),t.setInt16(6,10,!0),t.setFloat32(40,140,!0),t.setInt32(52,17,!0),t.setInt32(64,36780240,!0);break;case k.EventCollision:t.setInt16(4,2131,!0),t.setInt16(6,8,!0),t.setFloat32(40,30,!0),t.setInt32(64,71359776,!0);break;case k.ElementalTrap:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,-1,!0),t.setInt32(52,100,!0),t.setInt32(60,20,!0);break;case k.StatusTrap:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,-1,!0),t.setInt32(56,17,!0),t.setInt32(60,20,!0);break;case k.HealTrap:t.setInt16(4,1566,!0),t.setInt16(6,4,!0),t.setFloat32(40,-32.00001525878906,!0),t.setFloat32(44,-60.00002670288086,!0),t.setFloat32(48,-1.000000238418579,!0),t.setInt32(52,200,!0),t.setInt32(60,60,!0),t.setInt32(64,-1929453936,!0);break;case k.LargeElementalTrap:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,-1,!0),t.setInt32(52,200,!0),t.setInt32(60,50,!0);break;case k.ObjRoomID:t.setInt16(4,1545,!0),t.setInt16(6,1,!0),t.setFloat32(40,3.9999988079071045,!0),t.setFloat32(44,5,!0),t.setFloat32(48,10,!0),t.setInt32(56,16384,!0),t.setInt32(64,-1929753600,!0);break;case k.ScriptCollision:t.setInt16(4,1771,!0),t.setInt16(6,14,!0),t.setFloat32(40,250.00009155273438,!0),t.setInt32(64,-1929714224,!0);break;case k.HealRing:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0);break;case k.ItemLight:t.setInt16(4,1990,!0),t.setInt16(6,8,!0),t.setFloat32(40,3,!0),t.setInt32(64,39205168,!0);break;case k.FogCollisionSW:t.setInt16(4,1550,!0),t.setInt16(6,3,!0),t.setFloat32(40,240.0000762939453,!0),t.setFloat32(48,0,!0),t.setInt32(52,17,!0),t.setInt32(64,-1929715680,!0);break;case k.BossTeleporter:t.setInt16(4,1555,!0),t.setInt16(6,2,!0),t.setInt32(56,31,!0),t.setInt32(64,-1929731696,!0);break;case k.ImageBoard:t.setInt16(4,384,!0),t.setFloat32(40,.5,!0),t.setFloat32(44,2.000000476837158,!0),t.setFloat32(48,1.000000238418579,!0),t.setInt32(64,72261968,!0);break;case k.QuestWarp:t.setInt16(4,1555,!0),t.setInt16(6,2,!0),t.setInt32(60,1,!0),t.setInt32(64,-1929711344,!0);break;case k.BoxDetectObject:t.setInt16(4,1776,!0),t.setInt16(6,5,!0),t.setFloat32(40,30.000015258789062,!0),t.setInt32(56,6,!0),t.setInt32(60,3,!0),t.setInt32(64,-1929661840,!0);break;case k.SymbolChatObject:t.setInt16(4,1792,!0),t.setInt16(6,5,!0),t.setFloat32(40,30.000015258789062,!0),t.setInt32(56,30,!0),t.setInt32(60,30,!0),t.setInt32(64,-1929667104,!0);break;case k.TouchPlateObject:t.setInt16(4,26119,!0),t.setInt16(6,11,!0),t.setFloat32(40,8,!0),t.setInt32(56,-1,!0),t.setInt32(64,-259264640,!0);break;case k.TargetableObject:t.setInt16(4,-23032,!0),t.setInt16(6,2,!0),t.setFloat32(40,-1,!0),t.setFloat32(48,0,!0),t.setInt32(52,2,!0),t.setInt32(64,-2144604032,!0);break;case k.EffectObject:t.setInt16(4,25863,!0),t.setInt16(6,11,!0),t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setInt32(60,1,!0),t.setInt32(64,-259199104,!0);break;case k.CountDownObject:t.setInt16(4,-31992,!0),t.setInt16(6,1,!0),t.setInt32(64,-252124544,!0);break;case k.UnknownItem39:t.setInt16(4,30728,!0),t.setInt16(6,1,!0),t.setInt32(56,65641,!0),t.setInt32(64,821944960,!0);break;case k.MenuActivation:t.setInt16(2,2,!0),t.setInt32(64,-1929688192,!0);break;case k.TelepipeLocation:t.setInt16(2,2,!0),t.setInt16(4,13,!0),t.setInt32(64,-1929685680,!0);break;case k.BGMCollision:t.setInt16(2,512,!0),t.setInt16(4,11520,!0),t.setFloat32(40,500,!0),t.setInt32(64,-265293952,!0);break;case k.MainRagolTeleporter:t.setInt16(4,1879,!0),t.setFloat32(40,1.000000238418579,!0),t.setInt32(64,-1929740080,!0);break;case k.LobbyTeleporter:t.setInt16(2,512,!0),t.setInt32(64,-1073221760,!0);break;case k.PrincipalWarp:t.setInt16(2,2,!0),t.setInt16(4,9,!0),t.setFloat32(40,10,!0),t.setFloat32(44,0,!0),t.setFloat32(48,-1760.001,!0),t.setInt32(52,32768,!0),t.setInt32(56,65536,!0),t.setInt32(64,-1929686608,!0);break;case k.ShopDoor:t.setInt16(2,2,!0),t.setInt16(4,18,!0),t.setFloat32(40,3.0000007152557373,!0),t.setInt32(64,-1929684656,!0);break;case k.HuntersGuildDoor:t.setInt16(2,2,!0),t.setInt16(4,20,!0),t.setFloat32(40,3.0000007152557373,!0),t.setInt32(64,-1929684240,!0);break;case k.TeleporterDoor:t.setInt16(2,2,!0),t.setInt16(4,21,!0),t.setFloat32(40,3.0000007152557373,!0),t.setInt32(64,-1929683984,!0);break;case k.MedicalCenterDoor:t.setInt16(2,2,!0),t.setInt16(4,17,!0),t.setFloat32(40,3.0000007152557373,!0),t.setInt32(64,-1929684912,!0);break;case k.Sonic:t.setInt16(2,2,!0),t.setUint32(52,1,!0),t.setInt32(64,79126144,!0);break;case k.WelcomeBoard:t.setInt16(4,23304,!0),t.setInt32(64,-1864965504,!0);break;case k.LobbyScreenDoor:t.setInt16(2,2,!0),t.setInt16(4,25,!0),t.setInt32(64,118136448,!0);break;case k.LabTeleporterDoor:t.setInt16(4,16904,!0),t.setInt32(64,-266145920,!0);break;case k.Pioneer2InvisibleTouchplate:t.setInt16(2,2,!0),t.setInt16(4,27,!0),t.setFloat32(40,150,!0),t.setInt32(64,70133216,!0);break;case k.ForestDoor:t.setInt16(4,1581,!0),t.setInt16(6,1,!0),t.setFloat32(40,.9999980926513672,!0),t.setFloat32(44,1.000000238418579,!0),t.setFloat32(48,.9999954700469971,!0),t.setInt32(64,-1929757168,!0);break;case k.ForestSwitch:t.setInt16(4,1543,!0),t.setInt16(6,1,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.0000005960464478,!0),t.setFloat32(48,1.0000001192092896,!0),t.setInt32(60,7,!0),t.setInt32(64,-1929750128,!0);break;case k.LaserFence:t.setInt16(4,1542,!0),t.setInt16(6,1,!0),t.setFloat32(40,0,!0),t.setFloat32(44,1.0000009536743164,!0),t.setFloat32(48,.9999961853027344,!0),t.setInt32(64,-1929756272,!0);break;case k.LaserSquareFence:t.setInt16(4,1468,!0),t.setInt16(6,3,!0),t.setFloat32(40,1.000000238418579,!0),t.setUint32(60,1,!0),t.setInt32(64,-1929753744,!0);break;case k.ForestLaserFenceSwitch:t.setInt16(4,1478,!0),t.setInt16(6,3,!0),t.setInt32(56,3,!0),t.setInt32(60,3,!0),t.setInt32(64,-1929696640,!0);break;case k.LightRays:t.setInt16(4,2369,!0),t.setInt16(6,8,!0),t.setFloat32(44,10,!0),t.setFloat32(48,20,!0),t.setInt32(64,74962176,!0);break;case k.BlueButterfly:t.setInt16(4,2048,!0),t.setInt16(6,2,!0),t.setInt32(64,-1929720176,!0);break;case k.Probe:t.setInt16(2,2,!0),t.setInt16(4,80,!0),t.setInt16(6,1,!0),t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(64,-1929746928,!0);break;case k.RandomTypeBox1:t.setInt16(4,1635,!0),t.setInt16(6,2,!0),t.setFloat32(40,8.000000953674316,!0),t.setFloat32(44,3.1000001430511475,!0),t.setFloat32(48,10.100005149841309,!0),t.setInt32(56,57344,!0),t.setInt32(64,-1929730096,!0);break;case k.ForestWeatherStation:t.setInt16(2,2,!0),t.setInt16(4,147,!0),t.setInt16(6,2,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.0000016689300537,!0),t.setFloat32(48,1.0000005960464478,!0),t.setInt32(56,2816,!0),t.setInt32(64,-1929753232,!0);break;case k.ForestConsole:t.setInt16(4,1331,!0),t.setInt16(6,2,!0),t.setFloat32(40,0,!0),t.setInt32(52,1050,!0),t.setInt32(64,-1929750848,!0);break;case k.BlackSlidingDoor:t.setInt16(4,1625,!0),t.setInt16(6,1,!0),t.setFloat32(40,30.000015258789062,!0),t.setFloat32(44,.8999999761581421,!0),t.setInt32(52,101,!0),t.setInt32(64,-1929721536,!0);break;case k.RicoMessagePod:t.setInt16(4,1654,!0),t.setInt16(6,13,!0),t.setInt32(60,259,!0),t.setInt32(64,-1929755408,!0);break;case k.EnergyBarrier:t.setInt16(4,1342,!0),t.setInt16(6,1,!0),t.setFloat32(40,15.000005722045898,!0),t.setFloat32(44,1.0000001192092896,!0),t.setFloat32(48,1.000000238418579,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1929730384,!0);break;case k.ForestRisingBridge:t.setInt16(2,2,!0),t.setInt16(4,145,!0),t.setInt16(6,2,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.0000015497207642,!0),t.setFloat32(48,1.0000005960464478,!0),t.setInt32(52,-1,!0),t.setInt32(56,2816,!0),t.setInt32(64,-1929751104,!0);break;case k.SwitchNoneDoor:t.setInt16(4,1495,!0),t.setInt16(6,2,!0),t.setFloat32(40,0,!0),t.setInt32(64,-1929748688,!0);break;case k.EnemyBoxGrey:t.setInt16(4,1525,!0),t.setInt16(6,5,!0),t.setInt32(64,-1929732576,!0);break;case k.FixedTypeBox:t.setFloat32(40,0,!0),t.setFloat32(48,0,!0);break;case k.EmptyTypeBox:t.setInt16(2,512,!0),t.setInt16(4,32001,!0),t.setInt16(6,6,!0),t.setInt32(64,-1862737024,!0);break;case k.LaserFenceEx:t.setInt16(4,28167,!0),t.setInt16(6,11,!0),t.setFloat32(40,0,!0),t.setFloat32(44,8,!0),t.setFloat32(48,25,!0),t.setInt32(64,-526061696,!0);break;case k.FloorPanel1:t.setInt16(4,1556,!0),t.setInt16(6,4,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.000000238418579,!0),t.setFloat32(48,.9990062713623047,!0),t.setInt32(64,-1929651776,!0);break;case k.Caves4ButtonDoor:t.setInt16(2,2,!0),t.setInt16(4,542,!0),t.setInt16(6,4,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1929625056,!0);break;case k.CavesNormalDoor:t.setInt16(4,1464,!0),t.setInt16(6,4,!0),t.setFloat32(40,.9999891519546509,!0),t.setFloat32(44,1.000000238418579,!0),t.setFloat32(48,.9990062713623047,!0),t.setInt32(52,-1,!0),t.setInt32(56,3,!0),t.setInt32(64,-1929741968,!0);break;case k.CavesSmashingPillar:t.setInt16(4,1559,!0),t.setInt16(6,3,!0),t.setInt32(64,-1929691696,!0);break;case k.CavesSign1:t.setInt16(2,512,!0),t.setInt16(4,-23552,!0),t.setInt16(6,5,!0),t.setInt32(64,814801792,!0);break;case k.CavesSign2:t.setInt16(2,512,!0),t.setInt16(4,26624,!0),t.setInt16(6,5,!0),t.setInt32(64,1884021632,!0);break;case k.CavesSign3:t.setInt16(2,512,!0),t.setInt16(4,-18944,!0),t.setInt16(6,5,!0),t.setInt32(64,280945536,!0);break;case k.HexagonalTank:t.setInt16(2,2,!0),t.setInt16(4,740,!0),t.setInt16(6,5,!0),t.setInt32(64,-1334188928,!0);break;case k.BrownPlatform:t.setInt16(2,2,!0),t.setInt16(4,559,!0),t.setInt16(6,5,!0),t.setInt32(64,276292480,!0);break;case k.FloatingDragonfly:t.setInt16(4,1517,!0),t.setInt16(6,6,!0),t.setInt32(64,37198656,!0);break;case k.CavesSwitchDoor:t.setInt16(4,1450,!0),t.setInt16(6,3,!0),t.setInt32(52,-1,!0),t.setInt32(56,3,!0),t.setInt32(64,-1929685552,!0);break;case k.RobotRechargeStation:t.setInt16(2,512,!0),t.setInt16(4,-29952,!0),t.setInt16(6,5,!0),t.setInt32(64,275440512,!0);break;case k.CavesCakeShop:t.setInt16(4,-6905,!0),t.setInt16(6,5,!0),t.setInt32(64,-1067911552,!0);break;case k.Caves1SmallRedRock:t.setInt16(4,1965,!0),t.setInt16(6,3,!0),t.setInt32(64,-1929677200,!0);break;case k.Caves1MediumRedRock:t.setInt16(4,1968,!0),t.setInt16(6,3,!0),t.setInt32(64,-1929811824,!0);break;case k.Caves1LargeRedRock:t.setInt16(4,1552,!0),t.setInt16(6,3,!0),t.setInt32(64,-1929724048,!0);break;case k.Caves2SmallRock1:t.setInt16(4,1563,!0),t.setInt16(6,4,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.000000238418579,!0),t.setInt32(64,-1929710640,!0);break;case k.Caves2MediumRock1:t.setInt16(2,2,!0),t.setInt16(4,569,!0),t.setInt16(6,4,!0),t.setFloat32(40,-20.000011444091797,!0),t.setFloat32(44,-80.00003814697266,!0),t.setFloat32(48,-1.000000238418579,!0),t.setInt32(60,40,!0),t.setInt32(64,-1929628992,!0);break;case k.Caves2LargeRock1:t.setInt16(4,2051,!0),t.setInt16(6,4,!0),t.setInt32(64,-1929711328,!0);break;case k.Caves2SmallRock2:t.setInt16(4,1961,!0),t.setInt16(6,4,!0),t.setInt32(64,-1929702432,!0);break;case k.Caves2MediumRock2:t.setInt16(4,1550,!0),t.setInt16(6,4,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.000000238418579,!0),t.setFloat32(48,.9990062713623047,!0),t.setInt32(64,-1929604016,!0);break;case k.Caves2LargeRock2:t.setInt16(4,1517,!0),t.setInt16(6,4,!0),t.setInt32(64,-1929749872,!0);break;case k.Caves3SmallRock:t.setInt16(4,1722,!0),t.setInt16(6,5,!0),t.setInt32(64,-1929727392,!0);break;case k.Caves3MediumRock:t.setInt16(4,1580,!0),t.setInt16(6,5,!0),t.setInt32(64,-1929674160,!0);break;case k.Caves3LargeRock:t.setInt16(4,-18425,!0),t.setInt16(6,5,!0),t.setInt32(64,279115136,!0);break;case k.FloorPanel2:t.setInt16(4,23560,!0),t.setInt16(6,1,!0),t.setInt32(60,65537,!0),t.setInt32(64,16310912,!0);break;case k.DestructableRockCaves1:t.setInt16(2,512,!0),t.setInt16(4,23553,!0),t.setInt16(6,3,!0),t.setInt32(64,10347136,!0);break;case k.DestructableRockCaves2:t.setInt16(4,2006,!0),t.setInt16(6,4,!0),t.setInt32(64,-1929719824,!0);break;case k.DestructableRockCaves3:t.setInt16(4,1617,!0),t.setInt16(6,5,!0),t.setInt32(64,-1929688384,!0);break;case k.MinesDoor:t.setInt16(2,2,!0),t.setInt16(4,715,!0),t.setInt16(6,6,!0),t.setInt32(52,-1,!0),t.setInt32(56,3,!0),t.setInt32(64,-1929747520,!0);break;case k.FloorPanel3:t.setInt16(4,23304,!0),t.setInt16(6,3,!0),t.setInt32(56,-1,!0),t.setInt32(64,1889001856,!0);break;case k.MinesSwitchDoor:t.setInt16(4,1887,!0),t.setInt16(6,6,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1929658608,!0);break;case k.LargeCryoTube:t.setInt16(2,512,!0),t.setInt16(4,28161,!0),t.setInt16(6,6,!0),t.setInt32(64,-1329536128,!0);break;case k.ComputerLikeCalus:t.setInt16(4,2006,!0),t.setInt16(6,6,!0),t.setFloat32(44,0,!0),t.setInt32(64,-1929695952,!0);break;case k.GreenScreenOpeningAndClosing:t.setInt16(4,4866,!0),t.setInt16(6,6,!0),t.setInt32(64,281469568,!0);break;case k.FloatingRobot:t.setInt16(4,1533,!0),t.setInt16(6,6,!0),t.setFloat32(40,-35.00001525878906,!0),t.setFloat32(44,20.000011444091797,!0),t.setInt32(64,-1929732496,!0);break;case k.MinesLargeFlashingCrate:t.setInt16(4,1546,!0),t.setInt16(6,6,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,0,!0),t.setInt32(64,-1929727328,!0);break;case k.RuinsSeal:t.setInt16(4,1550,!0),t.setInt16(6,13,!0),t.setInt32(64,-1929755808,!0);break;case k.RuinsTeleporter:t.setInt16(4,1483,!0),t.setInt16(6,8,!0),t.setInt32(64,-1929759760,!0);break;case k.RuinsWarpSiteToSite:t.setInt16(4,2017,!0),t.setInt16(6,8,!0),t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(64,39228864,!0);break;case k.RuinsSwitch:t.setInt16(4,1910,!0),t.setInt16(6,8,!0),t.setInt32(64,-1929687952,!0);break;case k.FloorPanel4:t.setInt16(4,1660,!0),t.setInt16(6,9,!0),t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(64,-1929749648,!0);break;case k.Ruins1Door:case k.Ruins3Door:case k.Ruins2Door:t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(52,-1,!0);break;case k.Ruins11ButtonDoor:t.setInt16(4,31751,!0),t.setInt16(6,8,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1874992256,!0);break;case k.Ruins21ButtonDoor:t.setInt16(2,2,!0),t.setInt16(4,1371,!0),t.setInt16(6,9,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1929663984,!0);break;case k.Ruins4ButtonDoor:t.setInt16(4,1480,!0),t.setInt16(6,8,!0),t.setInt32(52,-1,!0),t.setInt32(60,-1,!0),t.setInt32(64,-1929730336,!0);break;case k.Ruins2ButtonDoor:t.setInt16(4,1909,!0),t.setInt16(6,8,!0),t.setInt32(52,-1,!0),t.setInt32(64,-1929493856,!0);break;case k.RuinsFenceSwitch:t.setInt16(4,1899,!0),t.setInt16(6,8,!0),t.setInt32(56,1,!0),t.setInt32(64,-1929707856,!0);break;case k.RuinsLaserFence4x2:case k.RuinsLaserFence6x2:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0),t.setInt32(56,1,!0);break;case k.RuinsLaserFence4x4:t.setInt16(4,2064,!0),t.setInt16(6,9,!0),t.setInt32(56,1,!0),t.setInt32(64,-1929548960,!0);break;case k.RuinsPillarTrap:t.setFloat32(40,-25,!0),t.setFloat32(44,100,!0),t.setFloat32(48,15,!0),t.setInt32(60,60,!0);break;case k.PopupTrapNoTech:t.setInt16(2,2,!0),t.setInt16(4,1432,!0),t.setInt16(6,9,!0),t.setFloat32(40,1.000000238418579,!0),t.setInt32(64,-1929630640,!0);break;case k.RuinsCrystal:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0);break;case k.Monument:t.setInt16(4,1557,!0),t.setInt16(6,4,!0),t.setFloat32(40,1.000000238418579,!0),t.setFloat32(44,1.000000238418579,!0),t.setFloat32(48,1.000000238418579,!0),t.setInt32(64,-1929727536,!0);break;case k.RuinsRock1:case k.RuinsRock2:case k.RuinsRock3:case k.RuinsRock4:case k.RuinsRock5:case k.RuinsRock6:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0);break;case k.RuinsRock7:t.setInt16(4,1548,!0),t.setInt16(6,8,!0),t.setInt32(64,-1929795888,!0);break;case k.Poison:t.setInt16(4,1983,!0),t.setInt16(6,13,!0),t.setInt32(52,8,!0),t.setInt32(64,-1929757344,!0);break;case k.FixedBoxTypeRuins:case k.RandomBoxTypeRuins:t.setFloat32(40,0,!0),t.setFloat32(44,0,!0),t.setFloat32(48,0,!0);break;case k.EnemyTypeBoxYellow:t.setInt16(4,2043,!0),t.setInt16(6,10,!0),t.setInt32(64,39241584,!0);break;case k.DestructableRock:t.setInt16(2,2,!0),t.setInt16(4,1517,!0),t.setInt16(6,9,!0),t.setInt32(64,-1929579040,!0);break;case k.PopupTrapsTechs:t.setFloat32(40,50,!0),t.setFloat32(44,0,!0),t.setFloat32(48,30,!0),t.setInt32(56,-1,!0),t.setInt32(60,2,!0);break;case k.GreyWallLow:t.setInt16(4,2095,!0),t.setInt16(6,17,!0),t.setInt32(64,206220336,!0);break;case k.SpaceshipDoor:t.setInt16(4,-18681,!0),t.setInt16(6,18,!0),t.setInt32(64,-254418560,!0);break;case k.GreyWallHigh:t.setInt16(4,28424,!0),t.setInt16(6,3,!0),t.setInt32(64,548332416,!0);break;case k.TempleNormalDoor:t.setInt16(4,1638,!0),t.setInt16(6,17,!0),t.setInt32(64,1356460160,!0);break;case k.BreakableWallWallButUnbreakable:t.setInt16(4,21505,!0),t.setInt16(6,2,!0),t.setInt32(64,-521801600,!0);break;case k.BrokenCylinderAndRubble:t.setInt16(4,30984,!0),t.setInt16(6,1,!0),t.setInt32(64,1077601152,!0);break;case k.ThreeBrokenWallPiecesOnFloor:t.setInt16(4,-28409,!0),t.setInt16(6,1,!0),t.setInt32(64,-255991424,!0);break;case k.HighBrickCylinder:t.setInt16(4,-19448,!0),t.setInt16(6,1,!0),t.setInt32(64,-1597054592,!0);break;case k.LyingCylinder:t.setInt16(4,16136,!0),t.setInt16(6,2,!0),t.setInt32(64,-1069292672,!0);break;case k.BrickConeWithFlatTop:t.setInt16(4,4361,!0),t.setInt16(6,1,!0),t.setInt32(64,-1864506752,!0);break;case k.BreakableTempleWall:t.setInt16(4,-18936,!0),t.setInt16(6,1,!0),t.setInt32(64,-1873157504,!0);break;case k.TempleMapDetect:t.setInt16(4,17416,!0),t.setInt16(6,14,!0),t.setFloat32(40,0,!0),t.setInt32(64,-262672512,!0);break;case k.SmallBrownBrickRisingBridge:t.setInt16(4,-24824,!0),t.setInt16(6,1,!0),t.setFloat32(40,.5,!0),t.setFloat32(44,.5,!0),t.setInt32(64,-1601638272,!0);break;case k.LongRisingBridgeWithPinkHighEdges:t.setInt16(4,32264,!0),t.setInt16(6,1,!0),t.setFloat32(40,.29999998211860657,!0),t.setFloat32(44,.29999998211860657,!0),t.setInt32(64,-265231488,!0);break;case k.FourSwitchTempleDoor:t.setInt16(4,1289,!0),t.setInt16(6,1,!0),t.setInt32(56,1,!0),t.setInt32(64,-254680448,!0);break;case k.FourButtonSpaceshipDoor:t.setInt16(4,23048,!0),t.setInt16(6,3,!0),t.setInt32(56,2,!0),t.setInt32(60,-1,!0),t.setInt32(64,1620500864,!0);break;case k.ItemBoxCca:t.setInt16(2,512,!0),t.setInt16(4,22019,!0),t.setInt16(6,5,!0),t.setInt32(64,-1599409280,!0);break;case k.TeleporterEp2:t.setInt16(4,2110,!0),t.setInt16(6,16,!0),t.setInt32(60,1,!0),t.setInt32(64,71221728,!0);break;case k.CcaDoor:t.setInt16(2,512,!0),t.setInt16(4,21763,!0),t.setInt16(6,5,!0),t.setInt32(56,1,!0),t.setInt32(64,-2136345728,!0);break;case k.SpecialBoxCca:t.setInt16(2,512,!0),t.setInt16(4,-15612,!0),t.setInt16(6,7,!0),t.setFloat32(40,0,!0),t.setFloat32(48,0,!0),t.setInt32(64,-1871846784,!0);break;case k.BigCcaDoor:t.setInt16(4,2118,!0),t.setInt16(6,5,!0),t.setInt32(64,70753104,!0);break;case k.BigCcaDoorSwitch:t.setInt16(4,2111,!0),t.setInt16(6,6,!0),t.setInt32(64,71229312,!0);break;case k.LittleRock:t.setInt16(4,2126,!0),t.setInt16(6,16,!0),t.setInt32(64,71221728,!0);break;case k.Little3StoneWall:t.setInt16(4,2129,!0),t.setInt16(6,16,!0),t.setInt32(64,71227424,!0);break;case k.Medium3StoneWall:t.setInt16(4,2129,!0),t.setInt16(6,8,!0),t.setInt32(64,71259376,!0);break;case k.SpiderPlant:t.setInt16(4,2129,!0),t.setInt16(6,16,!0),t.setInt32(64,71231904,!0);break;case k.OrangeBird:t.setInt16(4,2086,!0),t.setInt16(6,9,!0),t.setInt32(64,70881472,!0);break;case k.Saw:t.setInt16(4,29959,!0),t.setInt16(6,11,!0),t.setFloat32(44,300,!0),t.setInt32(56,1073742320,!0),t.setInt32(60,1,!0),t.setInt32(64,547417984,!0);break;case k.LaserDetect:t.setInt16(4,32519,!0),t.setInt16(6,11,!0),t.setInt32(56,1073742160,!0),t.setInt32(60,2,!0),t.setInt32(64,1082650496,!0);break;case k.UnknownItem529:t.setInt16(4,2139,!0),t.setInt16(6,6,!0),t.setInt32(64,71348128,!0);break;case k.UnknownItem530:t.setInt16(4,2046,!0),t.setInt16(6,9,!0),t.setInt32(64,206357088,!0);break;case k.Seagull:t.setInt16(4,2120,!0),t.setInt16(6,8,!0),t.setInt32(64,71256080,!0);break;case k.Fish:t.setInt16(4,-29432,!0),t.setInt16(6,9,!0),t.setFloat32(40,11,!0),t.setFloat32(44,.5,!0),t.setFloat32(48,11,!0),t.setInt32(64,73579344,!0);break;case k.SeabedDoorWithBlueEdges:t.setInt16(4,29959,!0),t.setInt16(6,11,!0),t.setInt32(56,1,!0),t.setInt32(64,1611984768,!0);break;case k.SeabedDoorAlwaysOpenNonTriggerable:t.setInt16(4,1884,!0),t.setInt16(6,11,!0),t.setInt32(64,45365632,!0);break;case k.LittleCryotube:t.setInt16(4,2093,!0),t.setInt16(6,17,!0),t.setInt32(64,206221408,!0);break;case k.WideGlassWallBreakable:t.setInt16(2,2048,!0),t.setInt16(4,25863,!0),t.setInt16(6,10,!0),t.setInt32(56,1,!0),t.setInt32(64,8712064,!0);break;case k.CaptureTrap:t.setInt16(4,2123,!0),t.setInt16(6,5,!0),t.setFloat32(40,3,!0),t.setFloat32(44,400,!0),t.setInt32(60,3,!0),t.setInt32(64,37000640,!0);break;case k.VRLink:t.setInt16(4,21256,!0),t.setInt16(6,3,!0),t.setInt32(64,-1068113280,!0);break;case k.WarpInBarbaRayRoom:t.setInt16(4,17416,!0),t.setInt16(6,14,!0),t.setInt32(60,1,!0),t.setInt32(64,-266342528,!0);break;case k.GeeNest:t.setInt16(4,28169,!0),t.setInt16(6,6,!0),t.setInt32(60,-2,!0),t.setInt32(64,8053376,!0);break;case k.LabComputerConsole:t.setInt16(4,14600,!0),t.setInt32(64,1075834752,!0);break;case k.LabComputerConsoleGreenScreen:t.setInt16(2,512,!0),t.setInt16(4,11776,!0),t.setInt32(64,-1334123904,!0);break;case k.ChairYellowPillow:t.setInt16(2,512,!0),t.setInt16(4,13312,!0),t.setInt32(64,-253697408,!0);break;case k.OrangeWallWithHoleInMiddle:t.setInt16(2,512,!0),t.setInt16(4,13056,!0),t.setInt32(64,-1327635840,!0);break;case k.GreyWallWithHoleInMiddle:t.setInt16(2,512,!0),t.setInt16(4,8192,!0),t.setInt32(64,1080287872,!0);break;case k.LongTable:t.setInt16(2,2,!0),t.setInt16(4,45,!0),t.setInt32(64,78812400,!0);break;case k.GBAStation:t.setInt16(4,-31232,!0),t.setInt32(64,-532547200,!0);break;case k.TalkLinkToSupport:t.setInt16(4,21768,!0),t.setInt16(6,3,!0),t.setFloat32(40,22,!0),t.setInt32(64,-1067195776,!0);break;case k.InstaWarp:t.setInt16(4,2085,!0),t.setInt16(6,17,!0),t.setFloat32(40,-9995,!0),t.setFloat32(48,-385,!0),t.setInt32(56,4,!0),t.setInt32(64,206217872,!0);break;case k.LabInvisibleObject:t.setInt16(2,512,!0),t.setInt16(4,1536,!0),t.setFloat32(40,35,!0),t.setInt32(56,1,!0),t.setInt32(64,1611394944,!0);break;case k.LabGlassWindowDoor:t.setInt16(4,23048,!0),t.setInt32(64,272035712,!0);break;case k.LabCeilingWarp:t.setInt16(2,2,!0),t.setInt16(4,24,!0),t.setFloat32(40,-9990,!0),t.setFloat32(48,60,!0),t.setInt32(60,2,!0),t.setInt32(64,79130448,!0);break;case k.Cactus:t.setInt16(4,1495,!0),t.setInt16(6,1,!0),t.setFloat32(40,2,!0),t.setFloat32(44,.5,!0),t.setInt32(64,75997776,!0);break;case k.BigBrownRock:t.setInt16(4,1480,!0),t.setInt16(6,1,!0),t.setUint32(52,2,!0),t.setInt32(64,77443856,!0);break;case k.BreakableBrownRock:t.setInt16(4,1486,!0),t.setInt16(6,2,!0),t.setInt32(64,77425824,!0);break;case k.PoisonPlant:t.setInt16(4,1412,!0),t.setInt16(6,6,!0),t.setInt32(64,37198464,!0);break;case k.OozingDesertPlant:t.setInt16(4,1409,!0),t.setInt16(6,6,!0),t.setInt32(64,37197792,!0);break;case k.UnknownItem901:t.setInt16(4,1476,!0),t.setInt16(6,6,!0),t.setInt32(64,125843920,!0);break;case k.BigBlackRocks:t.setInt16(4,1488,!0),t.setInt16(6,5,!0),t.setUint32(52,1,!0),t.setInt32(64,53452336,!0);break;case k.FallingRock:t.setInt16(4,1579,!0),t.setInt16(6,8,!0),t.setInt32(64,36923424,!0);break;case k.DesertPlantHasCollision:t.setInt16(4,1278,!0),t.setInt16(6,7,!0),t.setInt32(64,42538928,!0);break;case k.DesertFixedTypeBoxBreakableCrystals:t.setInt16(2,2,!0),t.setInt16(4,1308,!0),t.setInt16(6,8,!0),t.setInt32(64,36805664,!0);break;case k.UnknownItem910:t.setInt16(4,1309,!0),t.setInt16(6,6,!0);break;case k.BeeHive:t.setInt16(4,1269,!0),t.setInt16(6,7,!0),t.setInt32(64,42531632,!0);break;case k.Heat:t.setInt16(4,1246,!0),t.setInt16(6,6,!0),t.setFloat32(40,251,!0),t.setFloat32(44,3,!0),t.setFloat32(48,0,!0),t.setInt32(52,137,!0),t.setInt32(56,1,!0),t.setInt32(60,5,!0),t.setInt32(64,26818944,!0);break;case k.UnknownItem961:t.setInt16(4,1322,!0),t.setInt16(6,9,!0),t.setInt32(64,207524384,!0)}}(e,s.view),function(e,t){var i;!function(e,t){e.view.setUint16(0,t,!0)}(e,null!==(i=T(t).type_id)&&void 0!==i?i:0)}(s,e),s}function X(e){return function(e){switch(e){default:return k.Unknown;case 0:return k.PlayerSet;case 1:return k.Particle;case 2:return k.Teleporter;case 3:return k.Warp;case 4:return k.LightCollision;case 5:return k.Item;case 6:return k.EnvSound;case 7:return k.FogCollision;case 8:return k.EventCollision;case 9:return k.CharaCollision;case 10:return k.ElementalTrap;case 11:return k.StatusTrap;case 12:return k.HealTrap;case 13:return k.LargeElementalTrap;case 14:return k.ObjRoomID;case 15:return k.Sensor;case 16:return k.UnknownItem16;case 17:return k.LensFlare;case 18:return k.ScriptCollision;case 19:return k.HealRing;case 20:return k.MapCollision;case 21:return k.ScriptCollisionA;case 22:return k.ItemLight;case 23:return k.RadarCollision;case 24:return k.FogCollisionSW;case 25:return k.BossTeleporter;case 26:return k.ImageBoard;case 27:return k.QuestWarp;case 28:return k.Epilogue;case 29:return k.UnknownItem29;case 30:return k.UnknownItem30;case 31:return k.UnknownItem31;case 32:return k.BoxDetectObject;case 33:return k.SymbolChatObject;case 34:return k.TouchPlateObject;case 35:return k.TargetableObject;case 36:return k.EffectObject;case 37:return k.CountDownObject;case 38:return k.UnknownItem38;case 39:return k.UnknownItem39;case 40:return k.UnknownItem40;case 41:return k.UnknownItem41;case 64:return k.MenuActivation;case 65:return k.TelepipeLocation;case 66:return k.BGMCollision;case 67:return k.MainRagolTeleporter;case 68:return k.LobbyTeleporter;case 69:return k.PrincipalWarp;case 70:return k.ShopDoor;case 71:return k.HuntersGuildDoor;case 72:return k.TeleporterDoor;case 73:return k.MedicalCenterDoor;case 74:return k.Elevator;case 75:return k.EasterEgg;case 76:return k.ValentinesHeart;case 77:return k.ChristmasTree;case 78:return k.ChristmasWreath;case 79:return k.HalloweenPumpkin;case 80:return k.TwentyFirstCentury;case 81:return k.Sonic;case 82:return k.WelcomeBoard;case 83:return k.Firework;case 84:return k.LobbyScreenDoor;case 85:return k.MainRagolTeleporterBattleInNextArea;case 86:return k.LabTeleporterDoor;case 87:return k.Pioneer2InvisibleTouchplate;case 128:return k.ForestDoor;case 129:return k.ForestSwitch;case 130:return k.LaserFence;case 131:return k.LaserSquareFence;case 132:return k.ForestLaserFenceSwitch;case 133:return k.LightRays;case 134:return k.BlueButterfly;case 135:return k.Probe;case 136:return k.RandomTypeBox1;case 137:return k.ForestWeatherStation;case 138:return k.Battery;case 139:return k.ForestConsole;case 140:return k.BlackSlidingDoor;case 141:return k.RicoMessagePod;case 142:return k.EnergyBarrier;case 143:return k.ForestRisingBridge;case 144:return k.SwitchNoneDoor;case 145:return k.EnemyBoxGrey;case 146:return k.FixedTypeBox;case 147:return k.EnemyBoxBrown;case 149:return k.EmptyTypeBox;case 150:return k.LaserFenceEx;case 151:return k.LaserSquareFenceEx;case 192:return k.FloorPanel1;case 193:return k.Caves4ButtonDoor;case 194:return k.CavesNormalDoor;case 195:return k.CavesSmashingPillar;case 196:return k.CavesSign1;case 197:return k.CavesSign2;case 198:return k.CavesSign3;case 199:return k.HexagonalTank;case 200:return k.BrownPlatform;case 201:return k.WarningLightObject;case 203:return k.Rainbow;case 204:return k.FloatingJellyfish;case 205:return k.FloatingDragonfly;case 206:return k.CavesSwitchDoor;case 207:return k.RobotRechargeStation;case 208:return k.CavesCakeShop;case 209:return k.Caves1SmallRedRock;case 210:return k.Caves1MediumRedRock;case 211:return k.Caves1LargeRedRock;case 212:return k.Caves2SmallRock1;case 213:return k.Caves2MediumRock1;case 214:return k.Caves2LargeRock1;case 215:return k.Caves2SmallRock2;case 216:return k.Caves2MediumRock2;case 217:return k.Caves2LargeRock2;case 218:return k.Caves3SmallRock;case 219:return k.Caves3MediumRock;case 220:return k.Caves3LargeRock;case 222:return k.FloorPanel2;case 223:return k.DestructableRockCaves1;case 224:return k.DestructableRockCaves2;case 225:return k.DestructableRockCaves3;case 256:return k.MinesDoor;case 257:return k.FloorPanel3;case 258:return k.MinesSwitchDoor;case 259:return k.LargeCryoTube;case 260:return k.ComputerLikeCalus;case 261:return k.GreenScreenOpeningAndClosing;case 262:return k.FloatingRobot;case 263:return k.FloatingBlueLight;case 264:return k.SelfDestructingObject1;case 265:return k.SelfDestructingObject2;case 266:return k.SelfDestructingObject3;case 267:return k.SparkMachine;case 268:return k.MinesLargeFlashingCrate;case 304:return k.RuinsSeal;case 320:return k.RuinsTeleporter;case 321:return k.RuinsWarpSiteToSite;case 322:return k.RuinsSwitch;case 323:return k.FloorPanel4;case 324:return k.Ruins1Door;case 325:return k.Ruins3Door;case 326:return k.Ruins2Door;case 327:return k.Ruins11ButtonDoor;case 328:return k.Ruins21ButtonDoor;case 329:return k.Ruins31ButtonDoor;case 330:return k.Ruins4ButtonDoor;case 331:return k.Ruins2ButtonDoor;case 332:return k.RuinsSensor;case 333:return k.RuinsFenceSwitch;case 334:return k.RuinsLaserFence4x2;case 335:return k.RuinsLaserFence6x2;case 336:return k.RuinsLaserFence4x4;case 337:return k.RuinsLaserFence6x4;case 338:return k.RuinsPoisonBlob;case 339:return k.RuinsPillarTrap;case 340:return k.PopupTrapNoTech;case 341:return k.RuinsCrystal;case 342:return k.Monument;case 345:return k.RuinsRock1;case 346:return k.RuinsRock2;case 347:return k.RuinsRock3;case 348:return k.RuinsRock4;case 349:return k.RuinsRock5;case 350:return k.RuinsRock6;case 351:return k.RuinsRock7;case 352:return k.Poison;case 353:return k.FixedBoxTypeRuins;case 354:return k.RandomBoxTypeRuins;case 355:return k.EnemyTypeBoxYellow;case 356:return k.EnemyTypeBoxBlue;case 357:return k.EmptyTypeBoxBlue;case 358:return k.DestructableRock;case 359:return k.PopupTrapsTechs;case 368:return k.FlyingWhiteBird;case 369:return k.Tower;case 370:return k.FloatingRocks;case 371:return k.FloatingSoul;case 372:return k.Butterfly;case 384:return k.LobbyGameMenu;case 385:return k.LobbyWarpObject;case 386:return k.Lobby1EventObjectDefaultTree;case 387:return k.UnknownItem387;case 388:return k.UnknownItem388;case 389:return k.UnknownItem389;case 390:return k.LobbyEventObjectStaticPumpkin;case 391:return k.LobbyEventObject3ChristmasWindows;case 392:return k.LobbyEventObjectRedAndWhiteCurtain;case 393:return k.UnknownItem393;case 394:return k.UnknownItem394;case 395:return k.LobbyFishTank;case 396:return k.LobbyEventObjectButterflies;case 400:return k.UnknownItem400;case 401:return k.GreyWallLow;case 402:return k.SpaceshipDoor;case 403:return k.GreyWallHigh;case 416:return k.TempleNormalDoor;case 417:return k.BreakableWallWallButUnbreakable;case 418:return k.BrokenCylinderAndRubble;case 419:return k.ThreeBrokenWallPiecesOnFloor;case 420:return k.HighBrickCylinder;case 421:return k.LyingCylinder;case 422:return k.BrickConeWithFlatTop;case 423:return k.BreakableTempleWall;case 424:return k.TempleMapDetect;case 425:return k.SmallBrownBrickRisingBridge;case 426:return k.LongRisingBridgeWithPinkHighEdges;case 427:return k.FourSwitchTempleDoor;case 448:return k.FourButtonSpaceshipDoor;case 512:return k.ItemBoxCca;case 513:return k.TeleporterEp2;case 514:return k.CcaDoor;case 515:return k.SpecialBoxCca;case 516:return k.BigCcaDoor;case 517:return k.BigCcaDoorSwitch;case 518:return k.LittleRock;case 519:return k.Little3StoneWall;case 520:return k.Medium3StoneWall;case 521:return k.SpiderPlant;case 522:return k.CcaAreaTeleporter;case 523:return k.UnknownItem523;case 524:return k.WhiteBird;case 525:return k.OrangeBird;case 527:return k.Saw;case 528:return k.LaserDetect;case 529:return k.UnknownItem529;case 530:return k.UnknownItem530;case 531:return k.Seagull;case 544:return k.Fish;case 545:return k.SeabedDoorWithBlueEdges;case 546:return k.SeabedDoorAlwaysOpenNonTriggerable;case 547:return k.LittleCryotube;case 548:return k.WideGlassWallBreakable;case 549:return k.BlueFloatingRobot;case 550:return k.RedFloatingRobot;case 551:return k.Dolphin;case 552:return k.CaptureTrap;case 553:return k.VRLink;case 576:return k.UnknownItem576;case 640:return k.WarpInBarbaRayRoom;case 672:return k.UnknownItem672;case 688:return k.GeeNest;case 689:return k.LabComputerConsole;case 690:return k.LabComputerConsoleGreenScreen;case 691:return k.ChairYellowPillow;case 692:return k.OrangeWallWithHoleInMiddle;case 693:return k.GreyWallWithHoleInMiddle;case 694:return k.LongTable;case 695:return k.GBAStation;case 696:return k.TalkLinkToSupport;case 697:return k.InstaWarp;case 698:return k.LabInvisibleObject;case 699:return k.LabGlassWindowDoor;case 700:return k.UnknownItem700;case 701:return k.LabCeilingWarp;case 768:return k.Ep4LightSource;case 769:return k.Cactus;case 770:return k.BigBrownRock;case 771:return k.BreakableBrownRock;case 832:return k.UnknownItem832;case 833:return k.UnknownItem833;case 896:return k.PoisonPlant;case 897:return k.UnknownItem897;case 898:return k.UnknownItem898;case 899:return k.OozingDesertPlant;case 901:return k.UnknownItem901;case 902:return k.BigBlackRocks;case 903:return k.UnknownItem903;case 904:return k.UnknownItem904;case 905:return k.UnknownItem905;case 906:return k.UnknownItem906;case 907:return k.FallingRock;case 908:return k.DesertPlantHasCollision;case 909:return k.DesertFixedTypeBoxBreakableCrystals;case 910:return k.UnknownItem910;case 911:return k.BeeHive;case 912:return k.UnknownItem912;case 913:return k.Heat;case 960:return k.TopOfSaintMillionEgg;case 961:return k.UnknownItem961}}(function(e){return e.view.getUint16(0,!0)}(e))}function ee(e){switch(X(e)){case k.ScriptCollision:case k.ForestConsole:case k.TalkLinkToSupport:return e.view.getUint32(52,!0);case k.RicoMessagePod:return e.view.getUint32(56,!0);default:return}}function te(e){switch(X(e)){case k.RicoMessagePod:return e.view.getUint32(60,!0);default:return}}function ie(e){var t;return null!==(t=R.c[e])&&void 0!==t?t:k[e]}function se(e){return null!=R.c[e]}function oe(e){var t;return null!==(t=Object(R.d)(e))&&void 0!==t?t:T(e)}function ne(e,t,i){Object(B.n)(e,"value"),Object(B.d)(e>=t,()=>`value should be greater than or equal to ${t} but was ${e}.`),Object(B.d)(e<=i,()=>`value should be less than or equal to ${i} but was ${e}.`)}!function(e){e[e.Normal=0]="Normal",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected"}(A||(A={}));const re=[];re[A.Normal]=16776960,re[A.Hovered]=16768831,re[A.Selected]=16755200;const ae=[];function de(e,t,i,s=new I.MeshLambertMaterial({color:se(e)?ae[A.Normal]:re[A.Normal],side:I.DoubleSide})){const o=Object(y.a)(t,i,s,!1);return o.name=ie(e),o}function ce(e,t,i){const s=de(e.type,t,i);return s.userData.entity=e,s.position.copy(e.world_position.val),s.rotation.copy(e.world_rotation.val),s}ae[A.Normal]=16711680,ae[A.Hovered]=16727903,ae[A.Selected]=16711764;var le=i(14);const ue=180/Math.PI,_e=Math.PI/180;function ve(e){return e*ue}function he(e){return e*_e}function pe(e,t){return(e%t+t)%t}function be(e,t,i){return new I.Euler(e,t,i,"ZXY")}function ge(e){return(new I.Euler).setFromQuaternion(e,"ZXY")}var fe=i(588);class me{constructor(e,t){switch(this.entity=e,this.prop=t,this.name=t.name,this.offset=t.offset,this.type=t.type,this._value=Object(le.e)(function(e,t){switch(t.type){case S.a.U8:return e.view.getUint8(t.offset);case S.a.U16:return e.view.getUint16(t.offset,!0);case S.a.U32:return e.view.getUint32(t.offset,!0);case S.a.I8:return e.view.getInt8(t.offset);case S.a.I16:return e.view.getInt16(t.offset,!0);case S.a.I32:return e.view.getInt32(t.offset,!0);case S.a.F32:return e.view.getFloat32(t.offset,!0);case S.a.Angle:return Object($.a)(e.view.getInt32(t.offset,!0))}}(e.entity,t)),this.value=this._value,this.entity.type){case k.Probe:this.affects_model=40===t.offset;break;case k.Saw:case k.LaserDetect:this.affects_model=48===t.offset;break;case k.Sonic:case k.LittleCryotube:case k.Cactus:case k.BigBrownRock:case k.BigBlackRocks:case k.BeeHive:this.affects_model=52===t.offset;break;case k.ForestConsole:this.affects_model=56===t.offset;break;case k.PrincipalWarp:case k.LaserFence:case k.LaserSquareFence:case k.LaserFenceEx:case k.LaserSquareFenceEx:this.affects_model=60===t.offset;break;default:this.affects_model=!1}}set_value(e,t=!0){!function(e,t,i){switch(t.type){case S.a.U8:ne(i,0,255),e.view.setUint8(t.offset,i);break;case S.a.U16:ne(i,0,65535),e.view.setUint16(t.offset,i,!0);break;case S.a.U32:ne(i,0,4294967295),e.view.setUint32(t.offset,i,!0);break;case S.a.I8:ne(i,-128,127),e.view.setInt8(t.offset,i);break;case S.a.I16:ne(i,-32768,32767),e.view.setInt16(t.offset,i,!0);break;case S.a.I32:ne(i,-2147483648,2147483647),e.view.setInt32(t.offset,i,!0);break;case S.a.F32:e.view.setFloat32(t.offset,i,!0);break;case S.a.Angle:Object(B.m)(i,"value"),e.view.setInt32(t.offset,Object($.b)(i),!0)}}(this.entity.entity,this.prop,e),this._value.val=e,t&&this.affects_model&&this.entity.set_model(e,!1)}}const ke=new I.Quaternion,we=new I.Quaternion;class Ie{constructor(e){this._section=Object(le.e)(void 0),this.entity=e,this._model=Object(le.e)(this.get_entity_model()),this.model=this._model,this.section=this._section,this._section_id=Object(le.e)(this.get_entity_section_id()),this.section_id=this._section_id;const t=Object(fe.a)(this.get_entity_position());this._position=Object(le.e)(t),this.position=this._position,this._world_position=Object(le.e)(t),this.world_position=this._world_position;const{x:i,y:s,z:o}=this.get_entity_rotation(),n=be(i,s,o);this._rotation=Object(le.e)(n),this.rotation=this._rotation,this._world_rotation=Object(le.e)(n),this.world_rotation=this._world_rotation,this._props=Object(le.c)(void 0,...oe(function(e){return 72===e.data.byteLength?J(e):X(e)}(e)).properties.map(e=>new me(this,e))),this.props=this._props}get area_id(){return this.entity.area_id}set_model(e,t=!0){if(this._model.val=e,t){let t;switch(this.type){case k.Probe:t=this.props.val.filter(e=>40===e.offset);break;case k.Saw:case k.LaserDetect:t=this.props.val.filter(e=>48===e.offset);break;case k.Sonic:case k.LittleCryotube:case k.Cactus:case k.BigBrownRock:case k.BigBlackRocks:case k.BeeHive:t=this.props.val.filter(e=>52===e.offset);break;case k.ForestConsole:t=this.props.val.filter(e=>56===e.offset);break;case k.PrincipalWarp:case k.LaserFence:case k.LaserSquareFence:case k.LaserFenceEx:case k.LaserSquareFenceEx:t=this.props.val.filter(e=>60===e.offset);break;default:return this}for(const i of t)i.set_value(e,!1)}return this}set_section(e){if(e.area_variant.area.id!==this.area_id)throw new Error("Quest entities can't be moved across areas.");return this.set_entity_section_id(e.id),this._section.val=e,this._section_id.val=e.id,this.set_position(this.position.val),this.set_rotation(this.rotation.val),this}set_position(e){this.set_entity_position(e),this._position.val=e;const t=this.section.val;return this._world_position.val=t?e.clone().applyEuler(t.rotation).add(t.position):e,this}set_world_position(e){this._world_position.val=e;const t=this.section.val,i=t?e.clone().sub(t.position).applyEuler(t.inverse_rotation):e;return this.set_entity_position(i),this._position.val=i,this}set_rotation(e){ye(e),this.set_entity_rotation(e),this._rotation.val=e;const t=this.section.val;return t?(ke.setFromEuler(e),we.setFromEuler(t.rotation),this._world_rotation.val=ye(ge(ke.multiply(we)))):this._world_rotation.val=e,this}set_world_rotation(e){ye(e),this._world_rotation.val=e;const t=this.section.val;let i;return t?(ke.setFromEuler(e),we.setFromEuler(t.rotation),we.inverse(),i=ye(ge(ke.multiply(we)))):i=e,this.set_entity_rotation(i),this._rotation.val=i,this}}function ye(e){return e.set(pe(e.x,2*Math.PI),pe(e.y,2*Math.PI),pe(e.z,2*Math.PI))}class Re extends Ie{constructor(e,t){Object(B.g)(e,"npc"),super(e),this._wave=Object(le.e)(t),this.wave=this._wave}get type(){return J(this.entity)}set_wave(e){var t,i;const s=null!==(i=null===(t=null==e?void 0:e.id)||void 0===t?void 0:t.val)&&void 0!==i?i:0;return Q(this.entity,s),Y(this.entity,s),this._wave.val=e,this}get_entity_model(){}get_entity_section_id(){return H(this.entity)}set_entity_section_id(e){!function(e,t){e.view.setUint16(12,t,!0)}(this.entity,e)}get_entity_position(){return{x:(e=this.entity).view.getFloat32(20,!0),y:e.view.getFloat32(24,!0),z:e.view.getFloat32(28,!0)};var e}set_entity_position(e){!function(e,t){e.view.setFloat32(20,t.x,!0),e.view.setFloat32(24,t.y,!0),e.view.setFloat32(28,t.z,!0)}(this.entity,e)}get_entity_rotation(){return e=this.entity,{x:Object($.a)(e.view.getInt32(32,!0)),y:Object($.a)(e.view.getInt32(36,!0)),z:Object($.a)(e.view.getInt32(40,!0))};var e}set_entity_rotation(e){!function(e,t){e.view.setInt32(32,Object($.b)(t.x),!0),e.view.setInt32(36,Object($.b)(t.y),!0),e.view.setInt32(40,Object($.b)(t.z),!0)}(this.entity,e)}}const Se=new I.Raycaster;function je(e,t,i){Se.setFromCamera(t,e.camera),Se.ray.origin.add(i);const s=Se.intersectObjects(e.collision_geometry.children,!0);for(const e of s)if(e.face.normal.y>.75)return{intersection:e,section:e.object.userData.section};return{}}const Te=Object.freeze(new I.Vector2(0,0)),Ce=Object.freeze(new I.Vector3(0,0,0));class Fe extends w.a{constructor(e,t){super(e),this._collision_geometry=new I.Object3D,this._render_geometry=new I.Object3D,this._entity_models=new I.Object3D,this.disposer=new a.a,this.entity_to_mesh=new Map,this.old_camera_target=new I.Vector3,this.camera=new I.PerspectiveCamera(60,1,10,5e3),this.camera_controls_updated=()=>{window.clearTimeout(this.camera_target_timeout),this.camera_target_timeout=window.setTimeout(this.update_camera_target,100)},this.update_camera_target=()=>{this.controls.updateCameraUp();const{intersection:e}=je(this,Te,Ce);if(e){this.controls.getTarget(this.old_camera_target);const t=e.point;t.distanceTo(this.old_camera_target)>10&&this.controls.setTarget(t.x,t.y,t.z)}this.camera_target_timeout=void 0},this.disposer.add(t(this))}get debug(){return super.debug}set debug(e){this.debug!==e&&(super.debug=e,this._render_geometry.visible=e,this.schedule_render())}get collision_geometry(){return this._collision_geometry}set collision_geometry(e){this.scene.remove(this.collision_geometry),this._collision_geometry=e,this.scene.add(e)}set render_geometry(e){this.scene.remove(this._render_geometry),this._render_geometry=e,e.visible=this.debug,this.scene.add(e)}get entity_models(){return this._entity_models}init_camera_controls(){super.init_camera_controls(),this.controls.verticalDragToForward=!0,this.controls.truckSpeed=2.5,this.controls.addEventListener("update",this.camera_controls_updated)}dispose(){super.dispose(),this.disposer.dispose()}set_size(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),super.set_size(e,t)}reset_entity_models(){this.scene.remove(this._entity_models),this._entity_models=new I.Group,this.scene.add(this._entity_models),this.entity_to_mesh.clear(),this.schedule_render()}add_entity_model(e){const t=e.userData.entity;this._entity_models.add(e),this.entity_to_mesh.set(t,e),t===this.selected_entity&&this.mark_selected(e),this.schedule_render()}remove_entity_model(e){const t=this.entity_to_mesh.get(e);t&&(this.entity_to_mesh.delete(e),this._entity_models.remove(t),this.schedule_render())}get_entity_mesh(e){return this.entity_to_mesh.get(e)}mark_selected(e){e===this.hovered_mesh&&(this.hovered_mesh=void 0),e!==this.selected_mesh&&(this.selected_mesh&&xe(this.selected_mesh,A.Normal),xe(e,A.Selected),this.schedule_render()),this.selected_mesh=e}mark_hovered(e){this.selected_mesh&&e===this.selected_mesh||(e!==this.hovered_mesh&&(this.hovered_mesh&&xe(this.hovered_mesh,A.Normal),e&&xe(e,A.Hovered),this.schedule_render()),this.hovered_mesh=e)}unmark_selected(){this.selected_mesh&&(xe(this.selected_mesh,A.Normal),this.schedule_render()),this.selected_mesh=void 0}render(){const e=this.controls.distance;this.camera.near=e/100,this.camera.far=Math.max(1e3,5*e),this.camera.updateProjectionMatrix(),super.render()}}function xe(e,t){const i=e.userData.entity instanceof Re?ae[t]:re[t];if(e)if(Array.isArray(e.material))for(const s of e.material)t===A.Normal&&s.map?s.color.set(16777215):s.color.set(i);else e.material.color.set(i)}var De=i(13),Oe=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const Le=P.a.get("quest_editor/rendering/QuestModelManager"),Be=Object.freeze(new I.Vector3(0,800,700)),Pe=Object.freeze(new I.Vector3(0,0,0)),We=new I.Object3D;class Ee{constructor(e,t,i,s){this.renderer=t,this.area_asset_loader=i,this.entity_asset_loader=s,this.disposer=new a.a,this.quest_disposer=this.disposer.add(new a.a),this.area_variant_changed=()=>Oe(this,void 0,void 0,(function*(){const{episode:e,area_variant:t,npcs:i,objects:s}=this.get_area_variant_details();yield this.area_model_manager.load(e,t),this.quest_disposer.dispose_all(),this.npc_model_manager.remove_all(),this.object_model_manager.remove_all(),this.renderer.reset_entity_models(),this.quest_disposer.add_all(i.observe_list(this.npcs_changed,{call_now:!0}),s.observe_list(this.objects_changed,{call_now:!0}))})),this.npcs_changed=e=>{e.type===De.a.ListChange&&(this.npc_model_manager.remove(e.removed),this.npc_model_manager.add(e.inserted))},this.objects_changed=e=>{e.type===De.a.ListChange&&(this.object_model_manager.remove(e.removed),this.object_model_manager.add(e.inserted))},this.area_model_manager=new qe(this.renderer,i),this.npc_model_manager=new Me(e,this.renderer,s),this.object_model_manager=new Me(e,this.renderer,s)}dispose(){this.disposer.dispose(),this.npc_model_manager.remove_all(),this.object_model_manager.remove_all(),this.renderer.reset_entity_models()}}class qe{constructor(e,t){this.renderer=e,this.area_asset_loader=t,this.raycaster=new I.Raycaster,this.origin=new I.Vector3,this.down=Object.freeze(new I.Vector3(0,-1,0)),this.up=Object.freeze(new I.Vector3(0,1,0))}load(e,t){return Oe(this,void 0,void 0,(function*(){if(this.area_variant=t,null==e||null==t)return this.renderer.collision_geometry=We,void(this.renderer.render_geometry=We);try{const i=yield this.area_asset_loader.load_collision_geometry(e,t);if(this.should_cancel(t))return;const s=yield this.area_asset_loader.load_render_geometry(e,t);if(this.should_cancel(t))return;this.add_sections_to_collision_geometry(i,s),this.renderer.collision_geometry=i,this.renderer.render_geometry=s,this.renderer.reset_camera(Be,Pe)}catch(e){Le.error(`Couldn't load models for area ${t.area.id}, variant ${t.id}.`,e),this.renderer.collision_geometry=We,this.renderer.render_geometry=We}}))}should_cancel(e){return this.area_variant!==e}add_sections_to_collision_geometry(e,t){for(const i of e.children){i.geometry.boundingBox.getCenter(this.origin),this.raycaster.set(this.origin,this.down);const e=this.raycaster.intersectObject(t,!0).find(e=>null!=e.object.userData.section);this.raycaster.set(this.origin,this.up);const s=this.raycaster.intersectObject(t,!0).find(e=>null!=e.object.userData.section);let o;if(o=e&&s?e.distance<=s.distance?e:s:e||s,o){const e=i.userData,t=o.object.userData;e.section=t.section}}}}class Me{constructor(e,t,i){this.current_wave=e,this.renderer=t,this.entity_asset_loader=i,this.queue=[],this.loaded_entities=[],this.loading=!1}add(e){return Oe(this,void 0,void 0,(function*(){if(this.queue.push(...e),!this.loading)try{for(this.loading=!0;this.queue.length;){const e=this.queue[0];try{yield this.load(e)}catch(t){Le.error(`Couldn't load model for entity ${ie(e.type)}.`,t)}finally{const t=this.queue.indexOf(e);-1!==t&&this.queue.splice(t,1)}}}finally{this.loading=!1}}))}remove(e){for(const t of e){const e=this.queue.indexOf(t);-1!==e&&this.queue.splice(e,1);const i=this.loaded_entities.findIndex(e=>e.entity===t);if(-1!==i){const e=this.loaded_entities.splice(i,1)[0];this.renderer.remove_entity_model(e.entity),e.disposer.dispose()}}}remove_all(){for(const{disposer:e}of this.loaded_entities)e.dispose();this.loaded_entities.splice(0,1/0),this.queue.splice(0,1/0)}load(e){return Oe(this,void 0,void 0,(function*(){let t;for(;;){t=e.model.val;const i=yield this.entity_asset_loader.load_geometry(e.type,e.model.val);if(!this.queue.includes(e))return;if(e.model.val!=t)continue;const s=yield this.entity_asset_loader.load_textures(e.type,e.model.val);if(!this.queue.includes(e))return;if(e.model.val!=t)continue;const o=ce(e,i,s);this.update_entity_geometry(e,o);break}}))}update_entity_geometry(e,t){this.renderer.add_entity_model(t);const i=new a.a(e.world_position.observe(({value:e})=>{t.position.copy(e),this.renderer.schedule_render()}),e.world_rotation.observe(({value:e})=>{t.rotation.copy(e),this.renderer.schedule_render()}),e.model.observe(()=>{this.remove([e]),this.add([e])}));e instanceof Re&&i.add(Object(le.d)((e,t)=>null==e||e===t,this.current_wave,e.wave).observe(({value:e})=>{t.visible=e,this.renderer.schedule_render()},{call_now:!0})),this.loaded_entities.push({entity:e,disposer:i})}}class Ue extends Ee{constructor(e,t,i,s,o,n){super(i,s,o,n),this.current_quest=e,this.current_area=t,this.disposer.add_all(e.observe(this.area_variant_changed),t.observe(this.area_variant_changed))}get_area_variant_details(){const e=this.current_quest.val,t=this.current_area.val;let i,s,o;return e&&t?(i=e.area_variants.val.find(e=>e.area.id===t.id)||t.area_variants[0],s=e.npcs.filtered(e=>e.area_id===t.id),o=e.objects.filtered(e=>e.area_id===t.id)):(s=Object(le.c)(),o=Object(le.c)()),{episode:null==e?void 0:e.episode,area_variant:i,npcs:s,objects:o}}}var Ve=i(529);class Ne extends g.a{constructor(e,t,i){super(),this.element=Object(_.h)({className:t,tabIndex:-1}),this.element.style.outline="none",this.renderer=i,this.renderer_widget=this.add(new Ve.a(this.renderer)),this.element.append(this.renderer_widget.element),this.disposables(e.debug.observe(({value:e})=>this.renderer.debug=e))}resize(e,t){return super.resize(e,t),this.renderer_widget.resize(e,t),this}}let ze=void 0;const Ae=new Map,$e=new I.Vector2(0,0);let Ge=0;function He(e,t,i){function s(e){ze&&i(Object.assign(Object.assign({},ze),{event:e}))}Ae.set(i,s),e.addEventListener(t,s)}function Qe(e,t,i){const s=Ae.get(i);s&&(Ae.delete(i),e.removeEventListener(t,s))}function Ye(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"),ze&&(ze.drag_element.style.transform=`translate(${e.clientX-$e.x}px, ${e.clientY-$e.y}px)`)}function Ke(){ze&&(ze.drag_element.remove(),ze=void 0)}class Je extends Ie{get type(){return X(this.entity)}constructor(e){Object(B.g)(e,"object"),super(e)}get_entity_model(){return function(e){switch(X(e)){case k.Probe:return Math.round(e.view.getFloat32(40,!0));case k.Saw:case k.LaserDetect:return Math.round(e.view.getFloat32(48,!0));case k.Sonic:case k.LittleCryotube:case k.Cactus:case k.BigBrownRock:case k.BigBlackRocks:case k.BeeHive:return e.view.getUint32(52,!0);case k.ForestConsole:return e.view.getUint32(56,!0);case k.PrincipalWarp:case k.LaserFence:case k.LaserSquareFence:case k.LaserFenceEx:case k.LaserSquareFenceEx:return e.view.getUint32(60,!0);default:return}}(this.entity)}get_entity_section_id(){return this.entity.view.getUint16(12,!0)}set_entity_section_id(e){!function(e,t){e.view.setUint16(12,t,!0)}(this.entity,e)}get_entity_position(){return{x:(e=this.entity).view.getFloat32(16,!0),y:e.view.getFloat32(20,!0),z:e.view.getFloat32(24,!0)};var e}set_entity_position(e){!function(e,t){e.view.setFloat32(16,t.x,!0),e.view.setFloat32(20,t.y,!0),e.view.setFloat32(24,t.z,!0)}(this.entity,e)}get_entity_rotation(){return e=this.entity,{x:Object($.a)(e.view.getInt32(28,!0)),y:Object($.a)(e.view.getInt32(32,!0)),z:Object($.a)(e.view.getInt32(36,!0))};var e}set_entity_rotation(e){!function(e,t){e.view.setInt32(28,Object($.b)(t.x),!0),e.view.setInt32(32,Object($.b)(t.y),!0),e.view.setInt32(36,Object($.b)(t.z),!0)}(this.entity,e)}}class Ze{constructor(e,t,i){this.quest_editor_store=e,this.quest=t,this.entity=i,this.description="Create "+oe(i.type).name}undo(){this.quest.remove_entity(this.entity)}redo(){this.quest.add_entity(this.entity),this.quest_editor_store.set_selected_entity(this.entity)}}class Xe{constructor(e,t,i,s,o){this.quest_editor_store=e,this.entity=t,this.old_rotation=i,this.new_rotation=s,this.world=o,this.description="Rotate "+oe(t.type).name}undo(){this.quest_editor_store.set_selected_entity(this.entity),this.world?this.entity.set_world_rotation(this.old_rotation):this.entity.set_rotation(this.old_rotation)}redo(){this.quest_editor_store.set_selected_entity(this.entity),this.world?this.entity.set_world_rotation(this.new_rotation):this.entity.set_rotation(this.new_rotation)}}class et{constructor(e,t,i){this.quest_editor_store=e,this.quest=t,this.entity=i,this.description="Delete "+oe(i.type).name,this.redo()}undo(){this.quest.add_entity(this.entity),this.quest_editor_store.set_selected_entity(this.entity)}redo(){this.quest.remove_entity(this.entity)}}class tt{constructor(e,t,i,s,o,n,r){this.quest_editor_store=e,this.entity=t,this.old_section=i,this.new_section=s,this.old_position=o,this.new_position=n,this.world=r,this.description="Move "+oe(t.type).name}undo(){this.quest_editor_store.set_selected_entity(this.entity),this.old_section&&this.entity.set_section(this.old_section),this.world?this.entity.set_world_position(this.old_position):this.entity.set_position(this.old_position)}redo(){this.quest_editor_store.set_selected_entity(this.entity),this.new_section&&this.entity.set_section(this.new_section),this.world?this.entity.set_world_position(this.new_position):this.entity.set_position(this.new_position)}}const it=Object.freeze(new I.Vector3(0,0,0)),st=Object.freeze(new I.Vector3(0,1,0)),ot=Object.freeze(new I.Vector3(0,-1,0)),nt=2*Math.PI,rt=new I.Raycaster;class at{constructor(e,t){this.quest_editor_store=e,this.renderer=t,this.disposer=new a.a,this.pointer_position=new I.Vector2(0,0),this.pointer_device_position=new I.Vector2(0,0),this.last_pointer_position=new I.Vector2(0,0),this.moved_since_last_pointer_down=!1,this._enabled=!0,this.dispose=()=>{this.renderer.canvas_element.removeEventListener("keydown",this.keydown),this.renderer.canvas_element.removeEventListener("mousedown",this.mousedown),this.renderer.canvas_element.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup),this.renderer.canvas_element.removeEventListener("mouseleave",this.mouseleave),Qe(this.renderer.canvas_element,"dragenter",this.dragenter),Qe(this.renderer.canvas_element,"dragover",this.dragover),Qe(this.renderer.canvas_element,"dragleave",this.dragleave),Qe(this.renderer.canvas_element,"drop",this.drop),this.disposer.dispose()},this.selected_entity_changed=({value:e})=>{if(this.state.cancel(),e){const t=this.renderer.get_entity_mesh(e);t?this.renderer.mark_selected(t):this.renderer.unmark_selected()}else this.renderer.unmark_selected()},this.keydown=e=>{this.state=this.state.process_event({type:dt.KeyDown,key:e.key})},this.mousedown=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:dt.MouseDown,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered}),this.renderer.canvas_element.removeEventListener("mousemove",this.mousemove),document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)},this.mousemove=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:dt.MouseMove,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered})},this.mouseup=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:dt.MouseUp,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered}),this.renderer.canvas_element.addEventListener("mousemove",this.mousemove),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},this.mouseleave=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:dt.MouseLeave,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered})},this.dragenter=e=>{var t,i;this.process_mouse_event(e.event),this.state=this.state.process_event({type:dt.EntityDragEnter,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,episode:null!==(i=null===(t=this.quest_editor_store.current_quest.val)||void 0===t?void 0:t.episode)&&void 0!==i?i:n.b.I,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.dragover=e=>{var t,i;this.process_mouse_event(e.event),this.state=this.state.process_event({type:dt.EntityDragOver,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,episode:null!==(i=null===(t=this.quest_editor_store.current_quest.val)||void 0===t?void 0:t.episode)&&void 0!==i?i:n.b.I,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.dragleave=e=>{var t,i;this.process_mouse_event(e.event),this.state=this.state.process_event({type:dt.EntityDragLeave,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,episode:null!==(i=null===(t=this.quest_editor_store.current_quest.val)||void 0===t?void 0:t.episode)&&void 0!==i?i:n.b.I,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.drop=e=>{this.process_mouse_event(e.event),this.renderer.canvas_element.focus(),this.state=this.state.process_event({type:dt.EntityDrop})},this.mark_hovered=e=>{this.renderer.mark_hovered(e)},this.disposer.add(e.selected_entity.observe(this.selected_entity_changed)),t.canvas_element.addEventListener("keydown",this.keydown),t.canvas_element.addEventListener("mousedown",this.mousedown),t.canvas_element.addEventListener("mousemove",this.mousemove),t.canvas_element.addEventListener("mouseleave",this.mouseleave),He(t.canvas_element,"dragenter",this.dragenter),He(t.canvas_element,"dragover",this.dragover),He(t.canvas_element,"dragleave",this.dragleave),He(t.canvas_element,"drop",this.drop),this.state=new ct(this.quest_editor_store,t,this._enabled)}set enabled(e){this._enabled=e,this.state.cancel(),this.state=new ct(this.quest_editor_store,this.renderer,this._enabled)}process_mouse_event(e){const{left:t,top:i}=this.renderer.canvas_element.getBoundingClientRect();this.pointer_position.set(e.clientX-t,e.clientY-i),this.pointer_device_position.copy(this.pointer_position),this.renderer.pointer_pos_to_device_coords(this.pointer_device_position),"mousedown"===e.type?this.moved_since_last_pointer_down=!1:"mousemove"!==e.type&&"mouseup"!==e.type||this.pointer_position.equals(this.last_pointer_position)||(this.moved_since_last_pointer_down=!0),this.last_pointer_position.copy(this.pointer_position)}}var dt;!function(e){e[e.KeyDown=0]="KeyDown",e[e.MouseDown=1]="MouseDown",e[e.MouseMove=2]="MouseMove",e[e.MouseUp=3]="MouseUp",e[e.MouseLeave=4]="MouseLeave",e[e.EntityDragEnter=5]="EntityDragEnter",e[e.EntityDragOver=6]="EntityDragOver",e[e.EntityDragLeave=7]="EntityDragLeave",e[e.EntityDrop=8]="EntityDrop"}(dt||(dt={}));class ct{constructor(e,t,i){this.quest_editor_store=e,this.renderer=t,this.enabled=i}process_event(e){switch(e.type){case dt.KeyDown:if(this.enabled){const t=this.quest_editor_store.selected_entity.val;if(t&&"Delete"===e.key){const e=this.quest_editor_store.current_quest.val;e&&this.quest_editor_store.undo.push(new et(this.quest_editor_store,e,t))}}return this;case dt.MouseDown:{const t=this.pick_entity(e.pointer_device_position);if(t)if(1===e.buttons){if(this.quest_editor_store.set_selected_entity(t.entity),this.enabled)return new lt(this.quest_editor_store,this.renderer,t.entity,t.drag_adjust,t.grab_offset)}else if(2===e.buttons&&(this.quest_editor_store.set_selected_entity(t.entity),this.enabled))return new ut(this.quest_editor_store,this.renderer,t.entity,t.mesh,t.grab_offset);return this}case dt.MouseMove:{const t=this.pick_entity(e.pointer_device_position);return e.mark_hovered(t&&t.mesh),this}case dt.MouseUp:return e.moved_since_last_pointer_down||this.pick_entity(e.pointer_device_position)||this.quest_editor_store.set_selected_entity(void 0),this;case dt.MouseLeave:return e.mark_hovered(void 0),this;case dt.EntityDragEnter:if(this.enabled){const t=this.quest_editor_store.current_area.val,i=this.quest_editor_store.current_quest.val;return t&&i?new _t(this.quest_editor_store,this.renderer,e,i,t):this}return this;default:return this}}cancel(){}pick_entity(e){rt.setFromCamera(e,this.renderer.camera);const t=gt(rt,this.renderer.entity_models.children);if(!t)return;const i=t.object.userData.entity,s=t.object.position.clone().sub(t.point),o=s.clone();rt.set(t.object.position,ot);const[n]=rt.intersectObjects(this.renderer.collision_geometry.children,!0);return n&&(o.y-=n.distance),{mesh:t.object,entity:i,grab_offset:s,drag_adjust:o}}}class lt{constructor(e,t,i,s,o){this.quest_editor_store=e,this.renderer=t,this.entity=i,this.drag_adjust=s,this.grab_offset=o,this.cancelled=!1,this.initial_section=i.section.val,this.initial_position=i.world_position.val,this.renderer.controls.enabled=!1}process_event(e){switch(e.type){case dt.MouseMove:return this.cancelled?new ct(this.quest_editor_store,this.renderer,!0):(e.moved_since_last_pointer_down&&vt(this.renderer,this.entity,this.drag_adjust,this.grab_offset,e.pointer_device_position,e.shift_key),this);case dt.MouseUp:return this.renderer.controls.enabled=!0,!this.cancelled&&e.moved_since_last_pointer_down&&this.quest_editor_store.undo.push(new tt(this.quest_editor_store,this.entity,this.initial_section,this.entity.section.val,this.initial_position,this.entity.world_position.val,!0)).redo(),new ct(this.quest_editor_store,this.renderer,!0);default:return this.cancelled?new ct(this.quest_editor_store,this.renderer,!0):this}}cancel(){this.cancelled=!0,this.renderer.controls.enabled=!0,this.initial_section&&this.entity.set_section(this.initial_section),this.entity.set_world_position(this.initial_position)}}class ut{constructor(e,t,i,s,o){this.quest_editor_store=e,this.renderer=t,this.entity=i,this.mesh=s,this.cancelled=!1,this.initial_rotation=i.world_rotation.val,this.grab_point=i.world_position.val.clone().sub(o),this.renderer.controls.enabled=!1}process_event(e){switch(e.type){case dt.MouseMove:return this.cancelled?new ct(this.quest_editor_store,this.renderer,!0):(e.moved_since_last_pointer_down&&bt(this.renderer,this.entity,this.mesh.quaternion,this.initial_rotation,this.grab_point,e.pointer_device_position),this);case dt.MouseUp:return this.renderer.controls.enabled=!0,!this.cancelled&&e.moved_since_last_pointer_down&&this.quest_editor_store.undo.push(new Xe(this.quest_editor_store,this.entity,this.initial_rotation,this.entity.world_rotation.val,!0)),new ct(this.quest_editor_store,this.renderer,!0);default:return this.cancelled?new ct(this.quest_editor_store,this.renderer,!0):this}}cancel(){this.cancelled=!0,this.renderer.controls.enabled=!0,this.entity.set_world_rotation(this.initial_rotation)}}class _t{constructor(e,t,i,s,o){var n;if(this.quest_editor_store=e,this.drag_adjust=new I.Vector3(0,0,0),this.cancelled=!1,this.renderer=t,i.drag_element.style.display="none",i.data_transfer&&(i.data_transfer.dropEffect="copy"),se(i.entity_type)){const t=e.selected_wave.val;this.entity=new Re(G(i.entity_type,i.episode,o.id,null!==(n=null==t?void 0:t.id.val)&&void 0!==n?n:0),t)}else this.entity=new Je(Z(i.entity_type,o.id));ht(this.renderer,this.entity,this.drag_adjust,it,i.pointer_device_position),s.add_entity(this.entity),this.quest_editor_store.set_selected_entity(this.entity)}process_event(e){switch(e.type){case dt.EntityDragOver:return this.cancelled?(e.drag_element.style.display="flex",e.data_transfer&&(e.data_transfer.dropEffect="none"),new ct(this.quest_editor_store,this.renderer,!0)):(e.stop_propagation(),e.prevent_default(),e.data_transfer&&(e.data_transfer.dropEffect="copy"),vt(this.renderer,this.entity,this.drag_adjust,it,e.pointer_device_position,e.shift_key),this);case dt.EntityDragLeave:{e.drag_element.style.display="flex";const t=this.quest_editor_store.current_quest.val;return t&&t.remove_entity(this.entity),new ct(this.quest_editor_store,this.renderer,!0)}case dt.EntityDrop:if(!this.cancelled){const e=this.quest_editor_store.current_quest.val;e&&this.quest_editor_store.undo.push(new Ze(this.quest_editor_store,e,this.entity))}return new ct(this.quest_editor_store,this.renderer,!0);default:return this}}cancel(){this.cancelled=!0;const e=this.quest_editor_store.current_quest.val;e&&e.remove_entity(this.entity)}}function vt(e,t,i,s,o,n){n?pt(e,t,i,s,o):ht(e,t,i,s,o)}const ht=(()=>{const e=new I.Plane,t=new I.Vector3;return(i,s,o,n,r)=>{const{intersection:a,section:d}=je(i,r,o);if(a){if(d){const e=s.world_rotation.val;s.set_section(d),s.set_world_rotation(e)}s.set_world_position(new I.Vector3(a.point.x,a.point.y+n.y-o.y,a.point.z))}else rt.setFromCamera(r,i.camera),e.set(st,-s.world_position.val.y+n.y),rt.ray.intersectPlane(e,t)&&s.set_world_position(new I.Vector3(t.x+n.x,s.world_position.val.y,t.z+n.z))}})(),pt=(()=>{const e=new I.Vector3,t=new I.Plane,i=new I.Vector3,s=new I.Vector3;return(o,n,r,a,d)=>{if(rt.setFromCamera(d,o.camera),o.camera.getWorldDirection(e),e.negate(),e.y=0,e.normalize(),s.set(n.world_position.val.x,n.world_position.val.y,n.world_position.val.z),s.sub(a),t.setFromNormalAndCoplanarPoint(e,s),rt.ray.intersectPlane(t,i)){const e=i.y+a.y,t=e-n.world_position.val.y;r.y-=t,n.set_world_position(new I.Vector3(n.world_position.val.x,e,n.world_position.val.z))}}})(),bt=(()=>{const e=new I.Vector3,t=new I.Plane,i=new I.Vector3,s=new I.Vector3,o=new I.Vector3,n=new I.Vector3;return(r,a,d,c,l,u)=>{if(e.copy(st),e.applyQuaternion(d),t.setFromNormalAndCoplanarPoint(e,l),rt.setFromCamera(u,r.camera),rt.ray.intersectPlane(t,i)){t.projectPoint(a.world_position.val,s),o.subVectors(s,l),n.subVectors(s,i);const r=o.dot(n),d=e.dot(o.cross(n)),u=Math.atan2(d,r);a.set_world_rotation(new I.Euler(c.x,(c.y+u)%nt,c.z,"ZXY"))}}})(),gt=(()=>{const e=[];return(t,i)=>{let s=void 0;for(let o=i.length-1;o>=0;o--){const n=i[o];if(!n.visible)continue;if(e.splice(0),t.intersectObject(n,!1,e),!e.length)continue;const[r]=e;(!s||r.distance<s.distance)&&(s=r)}return s}})();class ft extends Ne{constructor(e,t,i,s){super(e,"quest_editor_QuestEditorRendererView",new Fe(s,s=>new Ue(e.current_quest,e.current_area,e.selected_wave,s,t,i))),this.element.addEventListener("focus",()=>e.undo.make_current(),!0),this.entity_controls=this.disposable(new at(e,this.renderer)),this.disposables(e.selected_entity.observe(({value:e})=>this.renderer.selected_entity=e),e.quest_runner.running.observe(({value:e})=>this.entity_controls.enabled=!e,{call_now:!0})),this.renderer.init_camera_controls(),this.finalize_construction(ft)}}var mt=i(551),kt=i(490),wt=i(578);class It extends kt.a{constructor(e){const t=new wt.a(!0,{label:"Inline args mode",tooltip:e.has_issues.map(e=>{let t="Transform arg_push* opcodes to be inline with the opcode the arguments are given to.";return e&&(t+="\nThis mode cannot be toggled because there are issues in the script."),t})});super(t),this.disposables(t.checked.bind_to(e.inline_args_mode),t.checked.observe(({value:t})=>e.set_inline_args_mode(t)),t.enabled.bind_to(e.has_issues.map(e=>!e))),this.finalize_construction(It)}}var yt=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))},Rt=mt.editor.ScrollType;class St{constructor(e){this.editor=e,this.history=[],this.history_index=-1,this.capture_history=!0,this.disposer=new a.a,this.did_change_cursor_position=e=>{this.capture_history&&(this.history.splice(this.history_index+1,1/0),"api"===e.source||-1===this.history_index||Math.abs(e.position.lineNumber-this.history[this.history_index].lineNumber)>=10?(this.history.push(e.position),this.history_index++):this.history[this.history_index]=e.position)},this.back=()=>yt(this,void 0,void 0,(function*(){this.history_index>0&&this.set_position(this.history[--this.history_index])})),this.forward=()=>yt(this,void 0,void 0,(function*(){this.history_index+1<this.history.length&&this.set_position(this.history[++this.history_index])})),this.set_position=e=>{this.capture_history=!1,this.editor.setPosition(e),this.editor.revealPositionInCenterIfOutsideViewport(e,Rt.Immediate),this.capture_history=!0},this.mouse_up=e=>{const t=e.event.browserEvent.button,i=e.event.browserEvent.buttons;3===t?(0===i&&(e.event.preventDefault(),this.back()),this.editor.focus()):4===t&&(0===i&&(e.event.preventDefault(),this.forward()),this.editor.focus())},this.disposer.add_all(this.editor.onDidChangeCursorPosition(this.did_change_cursor_position),this.editor.addAction({id:"phantasmal.action.back",label:"Back",keybindings:[mt.KeyMod.Alt|mt.KeyCode.LeftArrow],run:this.back}),this.editor.addAction({id:"phantasmal.action.forward",label:"Forward",keybindings:[mt.KeyMod.Alt|mt.KeyCode.RightArrow],run:this.forward}),this.editor.onMouseUp(this.mouse_up))}dispose(){this.disposer.dispose()}reset(){this.history.splice(0,1/0),this.history_index=-1}}i(782);mt.editor.defineTheme("phantasmal-world",{base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"e0e0e0",background:"#181818"},{token:"tag",foreground:"99bbff"},{token:"keyword",foreground:"d0a0ff",fontStyle:"bold"},{token:"predefined",foreground:"bbffbb"},{token:"number",foreground:"ffffaa"},{token:"number.hex",foreground:"ffffaa"},{token:"string",foreground:"88ffff"},{token:"string.escape",foreground:"8888ff"}],colors:{"editor.background":"#181818","editor.lineHighlightBackground":"#202020"}});const jt=mt.editor.createModel("","psoasm");class Tt extends g.a{constructor(e,t,i){super(),this.asm_editor_store=i,this.breakpoint_decoration_ids=[],this.element=Object(_.h)(),this.tool_bar_view=this.add(new It(i)),this.element.append(this.tool_bar_view.element),this.editor=this.disposable(mt.editor.create(this.element,{theme:"phantasmal-world",scrollBeyondLastLine:!1,autoIndent:"full",fontSize:13,wordWrap:"on",wrappingIndent:"indent",renderIndentGuides:!1,folding:!1,glyphMargin:e.feature_active("vm")})),this.history=this.disposable(new St(this.editor));const s=this.editor.getAction("editor.action.quickCommand");this.disposables(this.editor.addAction({id:"editor.action.quickCommand",label:"Command Palette",keybindings:[mt.KeyMod.CtrlCmd|mt.KeyMod.Shift|mt.KeyCode.KEY_P],run:()=>s.run()})),this.disposables(i.did_undo.observe(({value:e})=>{this.editor.trigger(e,"undo",void 0)}),i.did_redo.observe(({value:e})=>{this.editor.trigger(e,"redo",void 0)}),i.model.observe(({value:e})=>{this.editor.updateOptions({readOnly:!this.enabled.val||!e}),this.editor.setModel(e||jt),this.history.reset(),this.breakpoint_decoration_ids=[],this.execloc_decoration_id="",t.clear_breakpoints()},{call_now:!0}),i.breakpoints.observe_list(e=>{if(e.type===De.a.ListChange){for(const t of e.removed){const e=this.editor.getLineDecorations(t.line_no);if(e)for(const t of e){const e=this.breakpoint_decoration_ids.indexOf(t.id);if(e>-1){this.editor.deltaDecorations([t.id],[]),this.breakpoint_decoration_ids.splice(e,1);break}}}for(const t of e.inserted){const e=this.editor.getLineDecorations(t.line_no);(null==e?void 0:e.some(e=>this.breakpoint_decoration_ids.includes(e.id)))||this.breakpoint_decoration_ids.push(this.editor.deltaDecorations([],[{range:new mt.Range(t.line_no,0,t.line_no,0),options:{glyphMarginClassName:"quest_editor_AsmEditorView_breakpoint-enabled",glyphMarginHoverMessage:{value:"Breakpoint"}}}])[0])}}}),i.pause_location.observe(e=>{const t=this.old_pause_location,i=e.value;if(this.old_pause_location=i,void 0!==t&&void 0!==this.execloc_decoration_id){this.editor.getLineDecorations(t)&&this.editor.deltaDecorations([this.execloc_decoration_id],[])}void 0!==i&&(this.execloc_decoration_id=this.editor.deltaDecorations([],[{range:new mt.Range(i,0,i,0),options:{className:"quest_editor_AsmEditorView_execution-location",isWholeLine:!0}}])[0],this.editor.revealLineInCenterIfOutsideViewport(i))}),this.editor.onDidFocusEditorWidget(()=>i.undo.make_current()),this.editor.onMouseDown(e=>{switch(e.target.type){case mt.editor.MouseTargetType.GUTTER_GLYPH_MARGIN:{const i=e.target.position;if(!i)return;t.toggle_breakpoint(i.lineNumber)}}}),this.enabled.bind_to(t.running.map(e=>!e))),this.finalize_construction(Tt)}focus(){this.editor.focus()}resize(e,t){const i=Math.max(0,t-this.tool_bar_view.height);return this.editor.layout({width:e,height:i}),this}set_enabled(e){super.set_enabled(e),this.tool_bar_view.enabled.val=e,this.editor.updateOptions({readOnly:!e||!this.asm_editor_store.model.val})}}i(783);class Ct extends g.a{constructor(e){super(),this.ctrl=e,this.element=Object(_.h)({className:"quest_editor_EntityInfoView",tabIndex:-1}),this.no_entity_view=new b("No entity selected."),this.standard_props_element=Object(_.t)(),this.specific_props_element=Object(_.t)({className:"quest_editor_EntityInfoView_specific_props"}),this.pos_x_element=this.add(new r.a(0,{round_to:3})),this.pos_y_element=this.add(new r.a(0,{round_to:3})),this.pos_z_element=this.add(new r.a(0,{round_to:3})),this.rot_x_element=this.add(new r.a(0,{round_to:3})),this.rot_y_element=this.add(new r.a(0,{round_to:3})),this.rot_z_element=this.add(new r.a(0,{round_to:3})),this.create_prop_row=e=>{const t=new a.a;let i,s;switch(e.type){case S.a.U8:i=0,s=255;break;case S.a.U16:i=0,s=65535;break;case S.a.U32:i=0,s=4294967295;break;case S.a.I8:i=-128,s=127;break;case S.a.I16:i=-32768,s=32767;break;case S.a.I32:i=-2147483648,s=2147483647;break;case S.a.Angle:i=-360,s=360}const o=e.type===S.a.F32||e.type===S.a.Angle?3:1,n=t.add(new r.a(e.type===S.a.Angle?ve(e.value.val):e.value.val,{min:i,max:s,round_to:o}));t.add_all(n.value.bind_to(e.type===S.a.Angle?e.value.map(ve):e.value),n.value.observe(({value:t})=>this.ctrl.set_prop_value(e,e.type===S.a.Angle?he(t):t)));return[Object(_.A)(Object(_.y)(e.name+":"),Object(_.v)(n.element)),t]};const t="quest_editor_EntityInfoView_coord";this.standard_props_element.append(Object(_.A)(Object(_.y)("Type:"),this.type_element=Object(_.v)()),Object(_.A)(Object(_.y)("Name:"),this.name_element=Object(_.v)()),Object(_.A)(Object(_.y)("Section:"),this.section_id_element=Object(_.v)()),this.wave_row_element=Object(_.A)(Object(_.y)("Wave:"),this.wave_element=Object(_.v)()),Object(_.A)(Object(_.y)({colSpan:2},"Position:")),Object(_.A)(Object(_.y)({className:t},"X:"),Object(_.v)(this.pos_x_element.element)),Object(_.A)(Object(_.y)({className:t},"Y:"),Object(_.v)(this.pos_y_element.element)),Object(_.A)(Object(_.y)({className:t},"Z:"),Object(_.v)(this.pos_z_element.element)),Object(_.A)(Object(_.y)({colSpan:2},"Rotation:")),Object(_.A)(Object(_.y)({className:t},"X:"),Object(_.v)(this.rot_x_element.element)),Object(_.A)(Object(_.y)({className:t},"Y:"),Object(_.v)(this.rot_y_element.element)),Object(_.A)(Object(_.y)({className:t},"Z:"),Object(_.v)(this.rot_z_element.element))),Object(_.d)(this.specific_props_element,e.props,this.create_prop_row),this.element.append(this.standard_props_element,this.specific_props_element,this.no_entity_view.element),this.element.addEventListener("focus",e.focused,!0),this.disposables(Object(_.c)(this.standard_props_element,"hidden",e.unavailable),this.no_entity_view.visible.bind_to(e.unavailable),Object(_.c)(this.type_element,"textContent",e.type),Object(_.c)(this.name_element,"textContent",e.name),Object(_.c)(this.section_id_element,"textContent",e.section_id),Object(_.c)(this.wave_element,"textContent",e.wave),Object(_.c)(this.wave_row_element,"hidden",e.wave_hidden),e.position.observe(({value:{x:e,y:t,z:i}})=>{this.pos_x_element.value.val=e,this.pos_y_element.value.val=t,this.pos_z_element.value.val=i},{call_now:!0}),e.rotation.observe(({value:{x:e,y:t,z:i}})=>{this.rot_x_element.value.val=ve(e),this.rot_y_element.value.val=ve(t),this.rot_z_element.value.val=ve(i)},{call_now:!0}),this.pos_x_element.value.observe(({value:t})=>e.set_pos_x(t)),this.pos_y_element.value.observe(({value:t})=>e.set_pos_y(t)),this.pos_z_element.value.observe(({value:t})=>e.set_pos_z(t)),this.rot_x_element.value.observe(({value:t})=>e.set_rot_x(t)),this.rot_y_element.value.observe(({value:t})=>e.set_rot_y(t)),this.rot_z_element.value.observe(({value:t})=>e.set_rot_z(t)),this.enabled.bind_to(e.enabled)),this.finalize_construction(Ct)}set_enabled(e){super.set_enabled(e),this.pos_x_element.enabled.val=e,this.pos_y_element.enabled.val=e,this.pos_z_element.enabled.val=e,this.rot_x_element.enabled.val=e,this.rot_y_element.enabled.val=e,this.rot_z_element.enabled.val=e}}var Ft=i(37);i(784);class xt extends g.a{constructor(e,t,i){super(),this.entity_image_renderer=t,this.entities=Object(le.c)(),this.create_entity_element=(e,t)=>{const i=Object(_.h)({className:"quest_editor_EntityListView_entity",data:{index:t.toString()}});i.draggable=!0;const s=Object(_.l)({width:100,height:100});s.style.visibility="hidden",s.style.pointerEvents="none",i.append(s),this.entity_image_renderer.render(e).then(e=>{s.src=e,s.style.visibility="visible"});const o=Object(_.s)(oe(e).name);return i.append(o),i};const s=Object(_.h)({className:"quest_editor_EntityListView_entity_list"});this.element=Object(_.h)({className:i+" quest_editor_EntityListView",tabIndex:-1},s),this.disposables(Object(_.d)(s,this.entities,this.create_entity_element),function(e,t){function i(e){if(e.target instanceof HTMLElement){const i=t(e.target);i?($e.set(e.offsetX,e.offsetY),ze={drag_element:i[0],entity_type:i[1]},ze.drag_element.style.position="fixed",ze.drag_element.style.pointerEvents="none",ze.drag_element.style.zIndex="500",ze.drag_element.style.top="0",ze.drag_element.style.left="0",ze.drag_element.style.transform=`translate(${e.clientX-$e.x}px, ${e.clientY-$e.y}px)`,document.body.append(ze.drag_element),e.dataTransfer&&(e.dataTransfer.effectAllowed="copy",e.dataTransfer.setDragImage(Object(_.h)(),0,0),e.dataTransfer.setData("phantasmal-entity",oe(ze.entity_type).name))):e.preventDefault()}}return e.addEventListener("dragstart",i),1==++Ge&&(document.addEventListener("dragover",Ye),document.addEventListener("dragend",Ke)),{dispose(){e.removeEventListener("dragstart",i),0==--Ge&&(document.removeEventListener("dragover",Ye),document.removeEventListener("dragend",Ke))}}}(s,e=>{if(!this.enabled.val)return;let t=e;do{const i=e.dataset.index;if(null!=i)return[t.querySelector("img").cloneNode(!0),this.entities.get(parseInt(i,10))];t=t.parentElement}while(t&&t!==s)}),this.enabled.bind_to(e.quest_runner.running.map(e=>!e)))}}class Dt extends xt{constructor(e,t){super(e,t,"quest_editor_NpcListView"),this.quest_editor_store=e,this.filter_npcs=()=>{const e=this.quest_editor_store.current_quest.val,t=this.quest_editor_store.current_area.val,i=e?e.episode:n.b.I,s=t?t.id:0;this.entities.val=R.b.filter(e=>{const t=Object(R.d)(e);return(null==t.episode||t.episode===i)&&t.area_ids.includes(s)})},this.disposables(e.current_quest.observe(this.filter_npcs),e.current_area.observe(this.filter_npcs)),this.filter_npcs(),this.finalize_construction(Dt)}}class Ot extends xt{constructor(e,t){super(e,t,"quest_editor_ObjectListView"),this.quest_editor_store=e,this.filter_objects=()=>{const e=this.quest_editor_store.current_quest.val,t=this.quest_editor_store.current_area.val,i=e?e.episode:n.b.I,s=t?t.id:0;this.entities.val=j.filter(e=>{const t=T(e);if(null==t.area_ids)return!0;const o=t.area_ids[i];return o&&o.includes(s)})},this.disposables(e.current_quest.observe(this.filter_objects),e.current_area.observe(this.filter_objects)),this.filter_objects(),this.finalize_construction(Ot)}}i(785);var Lt,Bt=i(138);!function(e){e[e.NodeAdded=0]="NodeAdded",e[e.NodeRemoved=1]="NodeRemoved",e[e.EdgeAdded=2]="EdgeAdded",e[e.EdgeRemoved=3]="EdgeRemoved"}(Lt||(Lt={}));class Pt{constructor(e){this.area_id=e,this._connected_sub_graphs=Object(le.c)(),this.meta=new Map,this.emitter=Object(le.a)(),this.events=[],this.connected_sub_graphs=this._connected_sub_graphs,Object(B.o)(e,"area_id")}observe(e){return this.emitter.observe(e)}get_index(e){return this.meta.get(e).index}get_sub_graph(e){return this.meta.get(e).sub_graph}get_children(e){return this.meta.get(e).children}get_parents(e){return this.meta.get(e).parents}add_event(e,t,i){this.remove_event(e);const s=this.events.length,o=Object(le.c)(void 0,e);this.meta.set(e,{index:s,sub_graph:o,children:[],parents:[]}),this.events.push(e),this._connected_sub_graphs.push(o);for(const i of t)this.add_edge(i,e);for(const t of i)this.add_edge(e,t);this.emit({type:Lt.NodeAdded,event:e})}insert_event(e,t,i,s){this.remove_event(t);const o=Object(le.c)(void 0,t);this.meta.set(t,{index:e,sub_graph:o,parents:[],children:[]}),this.events.splice(e,0,t);for(let t=e+1;t<this.events.length;t++)this.meta.get(this.events[t]).index=t;this.insert_sub_graph(e,o);for(const e of i)this.add_edge(e,t);for(const e of s)this.add_edge(t,e);this.emit({type:Lt.NodeAdded,event:t})}remove_event(e){const t=this.meta.get(e);if(t){for(;t.children.length;)this.internal_remove_edge(e,t,t.children[0],this.meta.get(t.children[0]));for(;t.parents.length;)this.internal_remove_edge(t.parents[0],this.meta.get(t.parents[0]),e,t);t.sub_graph.remove(e),0===t.sub_graph.length.val&&this._connected_sub_graphs.remove(t.sub_graph),this.meta.delete(e);const i=this.events.indexOf(e);this.events.splice(i,1);for(let e=i;e<this.events.length;e++)this.meta.get(this.events[e]).index=e;this.emit({type:Lt.NodeRemoved,event:e})}}add_edge(e,t){const i=this.meta.get(e);Object(B.g)(i,"parent is not part of the graph");const s=this.meta.get(t);Object(B.g)(s,"child is not part of the graph"),i.children.includes(t)||i.children.push(t),s.parents.includes(e)||s.parents.push(e);const o=i.sub_graph,n=s.sub_graph;if(o!==n){let e=0;for(const t of n){const i=this.meta.get(t);for(;e<o.length.val&&!(this.meta.get(o.get(e)).index>i.index);)e++;i.sub_graph=o,o.splice(e,0,t),e++}this._connected_sub_graphs.remove(n),n.clear()}this.emit({type:Lt.EdgeAdded,parent:e,child:t})}remove_edge(e,t){this.internal_remove_edge(e,this.meta.get(e),t,this.meta.get(t))}internal_remove_edge(e,t,i,s){if(t&&s){const o=t.children.indexOf(i);-1!==o&&t.children.splice(o,1);const n=s.parents.indexOf(e);-1!==n&&s.parents.splice(n,1);const r=new Set;if(!this.connected(e,i,r)){const e=Object(le.c)(void 0,...r);e.sort((e,t)=>this.meta.get(e).index-this.meta.get(t).index);for(const i of e)t.sub_graph.remove(i);this.insert_sub_graph(this.meta.get(e.get(0)).index,e),s.sub_graph=e}this.emit({type:Lt.EdgeRemoved,parent:e,child:i})}}connected(e,t,i){if(e===t)return!0;if(i.has(t))return!1;i.add(t);const s=this.meta.get(t);if(s){for(const t of s.children)if(this.connected(e,t,i))return!0;for(const t of s.parents)if(this.connected(e,t,i))return!0}return!1}insert_sub_graph(e,t){let i=0;for(;i<this._connected_sub_graphs.length.val;){const t=this._connected_sub_graphs.get(i).get(0);if(this.meta.get(t).index>e)break;i++}this._connected_sub_graphs.splice(i,0,t)}emit(e){this.emitter.emit({value:e})}}i(786);var Wt,Et=i(64);!function(e){e[e.SpawnNpcs=0]="SpawnNpcs",e[e.Unlock=1]="Unlock",e[e.Lock=2]="Lock"}(Wt||(Wt={}));const qt=Object(Et.a)(Wt);class Mt{constructor(e,t){this.type=Wt.SpawnNpcs,Object(B.o)(e,"section_id"),Object(B.o)(t,"appear_flag"),this.section_id=e,this.appear_flag=t}}class Ut{constructor(e){this.type=Wt.Unlock,Object(B.o)(e,"door_id"),this._door_id=Object(le.e)(e),this.door_id=this._door_id}set_door_id(e){Object(B.o)(e,"door_id"),this._door_id.val=e}}class Vt{constructor(e){this.type=Wt.Lock,Object(B.o)(e,"door_id"),this._door_id=Object(le.e)(e),this.door_id=this._door_id}set_door_id(e){Object(B.o)(e,"door_id"),this._door_id.val=e}}i(787);var Nt=i(146),zt=i(65);class At extends zt.a{constructor(e){super(e),this.element=Object(_.h)({className:"core_DropDown"}),this.button_mousedown=()=>{this.just_opened=!this.menu.visible.val,this.menu.visible.val=!0},this.button_mouseup=()=>{this.just_opened?this.menu.focus():this.menu.visible.val=!1,this.just_opened=!1},this.button_keydown=({value:e})=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.just_opened=!this.menu.visible.val,this.menu.visible.val=!0,this.menu.focus(),this.menu.hover_next())},this.button=this.disposable(new Bt.a({text:e.text,icon_left:e&&e.icon_left,icon_right:_.a.TriangleDown})),this.menu=this.disposable(new Nt.a({items:e.items,to_label:e.to_label,related_element:this.element})),this.element.append(this.button.element,this.menu.element),this._chosen=Object(le.a)(),this.chosen=this._chosen,this.just_opened=!1,this.disposables(Object(_.g)(this.button.element,"mousedown",this.button_mousedown,{capture:!0}),this.button.onmouseup.observe(this.button_mouseup),this.button.onkeydown.observe(this.button_keydown),this.menu.selected.observe(({value:e})=>{void 0!==e&&(this._chosen.emit({value:e}),this.menu.selected.val=void 0)})),this.finalize_construction(At)}set_enabled(e){super.set_enabled(e),this.button.enabled.val=e,this.menu.enabled.val=e}}class $t extends p.a{constructor(e,t){super(),this.ctrl=e,this.event=t,this.inputs_enabled=Object(le.e)(!0),this.create_action_element=e=>{const t=new a.a;let i,s;if(e.type===Wt.SpawnNpcs)i="Spawn:",s=Object(_.h)(Object(_.h)(t.add(new r.a(e.section_id,{min:0,step:1,enabled:!1})).element),Object(_.h)(t.add(new r.a(e.appear_flag,{min:0,step:1,enabled:!1})).element));else{i=e.type===Wt.Unlock?"Unlock:":"Lock:";const o=t.add(new r.a(e.door_id.val,{min:0,step:1,enabled:this.inputs_enabled}));s=o.element,t.add_all(o.value.bind_to(e.door_id),o.value.observe(({value:t})=>e.set_door_id(t)))}const o=t.add(new Bt.a({icon_left:_.a.Remove,enabled:this.inputs_enabled}));return t.add_all(o.onclick.observe(()=>this.ctrl.remove_action(this.event,e))),[Object(_.A)(Object(_.y)(i),Object(_.v)(s),Object(_.v)(o.element)),t]};const i=document.createTextNode(t.wave.id.val.toString());this.delay_input=this.add(new r.a(t.delay.val,{min:0,step:1,enabled:this.inputs_enabled}));const s=Object(_.t)({className:"quest_editor_EventView_actions"}),o=this.add(new At({text:"Add action",items:qt,enabled:this.inputs_enabled,to_label(e){switch(e){case Wt.SpawnNpcs:return"Spawn NPCs";case Wt.Unlock:return"Unlock door";case Wt.Lock:return"Lock door"}}}));this.element=Object(_.h)({tabIndex:0},Object(_.t)(Object(_.A)(Object(_.y)("ID:"),Object(_.v)(t.id.toString())),Object(_.A)(Object(_.y)("Section:"),Object(_.v)(t.section_id.toString())),Object(_.A)(Object(_.y)("Wave:"),Object(_.v)(void 0,i)),Object(_.A)(Object(_.y)("Delay:"),Object(_.v)(this.delay_input.element)),Object(_.A)(Object(_.y)({colSpan:2},"Actions:")),Object(_.A)(Object(_.v)({colSpan:2},s)),Object(_.A)(Object(_.v)({colSpan:2},o.element)))),this.disposables(Object(_.c)(this.element,"className",e.is_selected(t).map(e=>"quest_editor_EventView "+(e?"selected":""))),t.wave.id.observe(({value:e})=>i.data=e.toString()),Object(_.g)(this.element,"focus",()=>{e.set_selected_wave(t.wave)}),Object(_.g)(this.element,"click",i=>{i.stopPropagation(),e.set_selected_wave(t.wave)}),Object(_.g)(this.element,"keyup",i=>{"Delete"===i.key&&e.remove_event(t)}),this.delay_input.value.bind_to(t.delay),this.delay_input.value.observe(i=>e.set_delay(t,i.value)),Object(_.d)(s,t.actions,this.create_action_element),o.chosen.observe(({value:i})=>e.add_action(t,i))),this.finalize_construction($t)}set_enabled(e){super.set_enabled(e),this.inputs_enabled.val=e}}i(788);const Gt=P.a.get("quest_editor/gui/EventSubGraphView");class Ht extends p.a{constructor(e,t,i,s){super(),this.ctrl=e,this.dag=t,this.sub_graph=i,this.max_edge_depth=s,this.event_gui_data=new Map,this.event_container_element=Object(_.h)({className:"quest_editor_EventSubGraphView_event_container"}),this.edge_container_element=Object(_.h)({className:"quest_editor_EventSubGraphView_edge_container"}),this.element=Object(_.h)({className:"quest_editor_EventSubGraphView"},this.edge_container_element,this.event_container_element),this.update_edges=()=>{if(this.edge_container_element.innerHTML="",0===this.sub_graph.length.val)return;const e=Array(this.sub_graph.length.val-1);for(let t=0;t<e.length;t++)e[t]=[];for(const t of this.sub_graph){const i=this.event_gui_data.get(t);if(!i){Gt.warn(`No GUI data for event ${t.id}.`);continue}const{event_view:s,position:o}=i,n=s.element,r=n.offsetTop+n.offsetHeight-20;for(const i of this.dag.get_children(t)){const s=this.event_gui_data.get(i);if(!s){Gt.warn(`No GUI data for child event ${i.id}.`);continue}const{event_view:n,position:a}=s,d=n.element.offsetTop+20,c=Math.min(r,d),l=Math.max(r,d)-c;let u=1;const v=a>o,h=Math.min(o,a),p=Math.max(o,a);e:for(;;){for(let t=v?h:Math.max(0,h-1);t<p;t++)if(e[t][u]){u++;continue e}break}for(let t=h;t<p;t++)e[t][u]=!0;this.max_edge_depth.val=Math.max(u,this.max_edge_depth.val);const b=8*u,g=Object(_.h)({className:"quest_editor_EventSubGraphView_edge"});g.style.left=4-b+"px",g.style.top=c+"px",g.style.width=b+"px",g.style.height=l+"px",g.dataset.parent=t.id.toString(),g.dataset.child=i.id.toString(),this.edge_container_element.append(g)}}},this.create_event_element=(e,t)=>{const i=new a.a,s=i.add(new $t(this.ctrl,e));return s.enabled.val=this.enabled.val,this.event_gui_data.set(e,{event_view:s,position:t}),i.add({dispose:()=>this.event_gui_data.delete(e)}),[s.element,i]},this.after_events_changed=e=>{e.type===De.a.ListChange&&(this.sub_graph.val.forEach((e,t)=>{this.event_gui_data.get(e).position=t}),this.update_edges())},this.disposables(s.observe(({value:e})=>{this.element.style.marginLeft=8*e+"px"},{call_now:!0}),Object(_.d)(this.event_container_element,i,this.create_event_element,{after:this.after_events_changed}),t.observe(({value:e})=>{e.type!==Lt.EdgeAdded&&e.type!==Lt.EdgeRemoved||this.update_edges()})),this.finalize_construction(Ht)}set_enabled(e){super.set_enabled(e);for(const{event_view:t}of this.event_gui_data.values())t.enabled.val=e}}class Qt extends g.a{constructor(e){super(),this.ctrl=e,this.sub_graph_views=new Map,this.unavailable_view=new b("No quest loaded."),this.max_edge_depth=Object(le.e)(0),this.create_sub_graph_element=e=>{let t=this.sub_graph_views.get(e);return t||(t=new Ht(this.ctrl,this.ctrl.event_dag.val,e,this.max_edge_depth),t.enabled.val=this.enabled.val,this.sub_graph_views.set(e,t)),t.element},this.update_edges=()=>{for(const e of this.sub_graph_views.values())e.element.parentNode&&e.update_edges()},this.after_event_dags_changed=e=>{var t;if(e.type===De.a.ListChange)for(const i of e.inserted)null===(t=this.sub_graph_views.get(i))||void 0===t||t.update_edges()},this.element=Object(_.h)({className:"quest_editor_EventsView",tabIndex:-1},this.container_element=Object(_.h)({className:"quest_editor_EventsView_container"},this.add(new kt.a(this.add_event_button=new Bt.a({text:"Add event"}))).element,this.dag_container_element=Object(_.h)({className:"quest_editor_EventsView_sub_graph_container"})),this.unavailable_view.element),this.disposables(Object(_.c)(this.container_element,"hidden",e.unavailable),this.unavailable_view.visible.bind_to(e.unavailable),this.enabled.bind_to(e.enabled),this.add_event_button.onclick.observe(e.add_event),Object(_.d)(this.dag_container_element,e.event_sub_graphs,this.create_sub_graph_element,{after:this.after_event_dags_changed}),Object(_.g)(this.element,"focus",()=>{e.focused()}),Object(_.g)(this.element,"click",()=>{e.set_selected_wave(void 0)})),this.finalize_construction(Qt)}dispose(){super.dispose();for(const e of this.sub_graph_views.values())e.dispose();this.sub_graph_views.clear()}resize(e,t){return super.resize(e,t),this.update_edges(),this}focus(){super.focus(),this.update_edges()}set_enabled(e){super.set_enabled(e);for(const t of this.children)t.enabled.val=e;for(const t of this.sub_graph_views.values())t.element.parentNode&&(t.enabled.val=e)}}var Yt;!function(e){e[e.Any=0]="Any",e[e.Byte=1]="Byte",e[e.Word=2]="Word",e[e.DWord=3]="DWord",e[e.Float=4]="Float",e[e.Label=5]="Label",e[e.ILabel=6]="ILabel",e[e.DLabel=7]="DLabel",e[e.SLabel=8]="SLabel",e[e.String=9]="String",e[e.ILabelVar=10]="ILabelVar",e[e.RegRef=11]="RegRef",e[e.RegTupRef=12]="RegTupRef",e[e.RegRefVar=13]="RegRefVar",e[e.Pointer=14]="Pointer"}(Yt||(Yt={}));const Kt={kind:Yt.Any},Jt={kind:Yt.Byte},Zt={kind:Yt.Word},Xt={kind:Yt.DWord},ei={kind:Yt.Float},ti={kind:Yt.Label},ii={kind:Yt.ILabel},si={kind:Yt.DLabel},oi={kind:Yt.SLabel},ni={kind:Yt.String},ri={kind:Yt.ILabelVar},ai={kind:Yt.RegRef},di={kind:Yt.RegRefVar},ci={kind:Yt.Pointer},li=-Math.pow(2,31),ui=Math.pow(2,31)-1;Math.pow(2,32);var _i,vi;function hi(e,t,i){return{type:e,doc:t,access:i}}!function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.ReadWrite=2]="ReadWrite"}(_i||(_i={})),function(e){e[e.Push=0]="Push",e[e.Pop=1]="Pop"}(vi||(vi={}));const pi=[],bi=new Map;function gi(e,t,i,s,o){return{code:e,mnemonic:t,doc:i,size:e<256?1:2,params:s,stack:o}}const fi=pi[0]=gi(0,"nop","No operation, does nothing.",[],void 0),mi=pi[1]=gi(1,"ret","Returns control to caller.",[],void 0),ki=pi[2]=gi(2,"sync","Yields control for the rest of the current frame. Execution will continue the following frame.",[],void 0),wi=pi[3]=gi(3,"exit",void 0,[hi(Xt,void 0,void 0)],vi.Pop),Ii=pi[4]=gi(4,"thread","Starts a new thread. Thread execution will start at the given label.\nOften used to check a register every frame. Make sure to yield control with sync when looping.",[hi(ii,void 0,void 0)],void 0),yi=pi[5]=gi(5,"va_start","Initializes a variable argument list.\nMake sure to call va_end after va_start and va_call.",[],void 0),Ri=pi[6]=gi(6,"va_end","Restores the registers overwritten by arg_push* instructions.\nCalled after va_call.",[],void 0),Si=pi[7]=gi(7,"va_call","Calls the variable argument function at the given label.\nCalled after initializing the argument list with va_start and pushing arguments onto the stack with arg_push* instructions. Make sure to call va_end afterwards.",[hi(ii,void 0,void 0)],void 0),ji=pi[8]=gi(8,"let","Sets the first register's value to second one's value.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Ti=pi[9]=gi(9,"leti","Sets a register to the given value.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Ci=pi[10]=gi(10,"letb","Sets a register to the given value.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Jt,void 0,_i.Write)]},void 0,void 0),hi(Jt,void 0,void 0)],void 0),Fi=pi[11]=gi(11,"letw","Sets a register to the given value.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Zt,void 0,_i.Write)]},void 0,void 0),hi(Zt,void 0,void 0)],void 0),xi=pi[12]=gi(12,"leta","Sets the first register to the memory address of the second register. Not used by Sega.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(ci,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),Di=(pi[13]=gi(13,"leto","Sets a register to the memory address of the given label. Not used by Sega.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(ci,void 0,_i.Write)]},void 0,void 0),hi(ti,void 0,void 0)],void 0),pi[14]=gi(14,"unknown_0e",void 0,[],void 0),pi[15]=gi(15,"unknown_0f",void 0,[],void 0),pi[16]=gi(16,"set","Sets a register to 1.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0)),Oi=pi[17]=gi(17,"clear","Sets a register to 0.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),Li=pi[18]=gi(18,"rev","Sets a register to 1 if its current value is 0, otherwise sets it to 0.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.ReadWrite)]},void 0,void 0)],void 0),Bi=(pi[19]=gi(19,"gset",void 0,[hi(Zt,void 0,void 0)],void 0),pi[20]=gi(20,"gclear",void 0,[hi(Zt,void 0,void 0)],void 0),pi[21]=gi(21,"grev",void 0,[hi(Zt,void 0,void 0)],void 0),pi[22]=gi(22,"glet",void 0,[hi(Zt,void 0,void 0)],void 0),pi[23]=gi(23,"gget","Sets a register to value of the given flag.",[hi(Zt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Zt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[24]=gi(24,"add",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0)),Pi=pi[25]=gi(25,"addi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Wi=pi[26]=gi(26,"sub",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Ei=pi[27]=gi(27,"subi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),qi=pi[28]=gi(28,"mul",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Mi=pi[29]=gi(29,"muli",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Ui=pi[30]=gi(30,"div",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Vi=pi[31]=gi(31,"divi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Ni=pi[32]=gi(32,"and",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),zi=pi[33]=gi(33,"andi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Ai=pi[34]=gi(34,"or",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),$i=pi[35]=gi(35,"ori",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Gi=pi[36]=gi(36,"xor",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Hi=pi[37]=gi(37,"xori",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Qi=pi[38]=gi(38,"mod",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Yi=pi[39]=gi(39,"modi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),Ki=pi[40]=gi(40,"jmp",void 0,[hi(ii,void 0,void 0)],void 0),Ji=pi[41]=gi(41,"call",void 0,[hi(ii,void 0,void 0)],void 0),Zi=pi[42]=gi(42,"jmp_on",void 0,[hi(ii,void 0,void 0),hi(di,void 0,_i.Read)],void 0),Xi=pi[43]=gi(43,"jmp_off",void 0,[hi(ii,void 0,void 0),hi(di,void 0,_i.Read)],void 0),es=pi[44]=gi(44,"jmp_=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),ts=pi[45]=gi(45,"jmpi_=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),is=pi[46]=gi(46,"jmp_!=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),ss=pi[47]=gi(47,"jmpi_!=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),os=pi[48]=gi(48,"ujmp_>",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),ns=pi[49]=gi(49,"ujmpi_>",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),rs=pi[50]=gi(50,"jmp_>",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),as=pi[51]=gi(51,"jmpi_>",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),ds=pi[52]=gi(52,"ujmp_<",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),cs=pi[53]=gi(53,"ujmpi_<",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),ls=pi[54]=gi(54,"jmp_<",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),us=pi[55]=gi(55,"jmpi_<",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),_s=pi[56]=gi(56,"ujmp_>=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),vs=pi[57]=gi(57,"ujmpi_>=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),hs=pi[58]=gi(58,"jmp_>=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),ps=pi[59]=gi(59,"jmpi_>=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),bs=pi[60]=gi(60,"ujmp_<=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),gs=pi[61]=gi(61,"ujmpi_<=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),fs=pi[62]=gi(62,"jmp_<=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ii,void 0,void 0)],void 0),ms=pi[63]=gi(63,"jmpi_<=",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0)],void 0),ks=pi[64]=gi(64,"switch_jmp",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ri,void 0,void 0)],void 0),ws=pi[65]=gi(65,"switch_call",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(ri,void 0,void 0)],void 0),Is=pi[66]=gi(66,"stack_push",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),ys=pi[67]=gi(67,"stack_pop",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),Rs=pi[68]=gi(68,"stack_pushm","Pushes the values of an arbitrary amount of registers onto the stack.",[hi(ai,void 0,_i.Read),hi(Xt,void 0,void 0)],void 0),Ss=pi[69]=gi(69,"stack_popm","Pops an arbitrary amount of values from the stack and writes them to registers.",[hi(ai,void 0,_i.Write),hi(Xt,void 0,void 0)],void 0),js=(pi[70]=gi(70,"unknown_46",void 0,[],void 0),pi[71]=gi(71,"unknown_47",void 0,[],void 0),pi[72]=gi(72,"arg_pushr","Pushes the value of the given register onto the stack.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],vi.Push)),Ts=pi[73]=gi(73,"arg_pushl","Pushes the given value onto the stack.",[hi(Xt,void 0,void 0)],vi.Push),Cs=pi[74]=gi(74,"arg_pushb","Pushes the given value onto the stack.",[hi(Jt,void 0,void 0)],vi.Push),Fs=pi[75]=gi(75,"arg_pushw","Pushes the given value onto the stack.",[hi(Zt,void 0,void 0)],vi.Push),xs=pi[76]=gi(76,"arg_pusha","Pushes the memory address of the given register onto the stack. Not used by Sega.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],vi.Push),Ds=pi[77]=gi(77,"arg_pusho","Pushes the memory address of the given label onto the stack. Not used by Sega.",[hi(ti,void 0,void 0)],vi.Push),Os=pi[78]=gi(78,"arg_pushs","Pushes the given value onto the stack.",[hi(ni,void 0,void 0)],vi.Push),Ls=(pi[79]=gi(79,"unknown_4f",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[80]=gi(80,"message",void 0,[hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[81]=gi(81,"list","Used to display a list of items and retrieve the item selected by the player.\nList items should be seperated by newlines. The selected item's index will be written to the given register.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Jt,void 0,_i.Write)]},void 0,void 0),hi(ni,void 0,void 0)],vi.Pop)),Bs=(pi[82]=gi(82,"fadein",void 0,[],void 0),pi[83]=gi(83,"fadeout",void 0,[],void 0),pi[84]=gi(84,"se",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[85]=gi(85,"bgm",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[86]=gi(86,"unknown_56",void 0,[],void 0),pi[87]=gi(87,"unknown_57",void 0,[],void 0),pi[88]=gi(88,"enable",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[89]=gi(89,"disable",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[90]=gi(90,"window_msg",void 0,[hi(ni,void 0,void 0)],vi.Pop)),Ps=pi[91]=gi(91,"add_msg",void 0,[hi(ni,void 0,void 0)],vi.Pop),Ws=(pi[92]=gi(92,"mesend",void 0,[],void 0),pi[93]=gi(93,"gettime",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0)),Es=pi[94]=gi(94,"winend",void 0,[],void 0),qs=(pi[95]=gi(95,"unknown_5f",void 0,[],void 0),pi[96]=gi(96,"npc_crt_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[97]=gi(97,"npc_stop",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[98]=gi(98,"npc_play",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[99]=gi(99,"npc_kill",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[100]=gi(100,"npc_nont",void 0,[],void 0),pi[101]=gi(101,"npc_talk",void 0,[],void 0),pi[102]=gi(102,"npc_crp_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read),hi(Kt,void 0,_i.Read),hi(Kt,void 0,_i.Read),hi(ii,void 0,_i.Read),hi(Kt,void 0,_i.Read),hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[103]=gi(103,"unknown_67",void 0,[],void 0),pi[104]=gi(104,"create_pipe",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[105]=gi(105,"p_hpstat_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[106]=gi(106,"p_dead_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,"Player slot.",void 0)],vi.Pop)),Ms=(pi[107]=gi(107,"p_disablewarp",void 0,[],void 0),pi[108]=gi(108,"p_enablewarp",void 0,[],void 0),pi[109]=gi(109,"p_move_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[110]=gi(110,"p_look",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[111]=gi(111,"unknown_6f",void 0,[],void 0),pi[112]=gi(112,"p_action_disable",void 0,[],void 0),pi[113]=gi(113,"p_action_enable",void 0,[],void 0),pi[114]=gi(114,"disable_movement1",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[115]=gi(115,"enable_movement1",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[116]=gi(116,"p_noncol",void 0,[],void 0),pi[117]=gi(117,"p_col",void 0,[],void 0),pi[118]=gi(118,"p_setpos","Sets a player's position.",[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"X coordinate.",_i.Read),hi(Xt,"Y coordinate.",_i.Read),hi(Xt,"Z coordinate.",_i.Read),hi(Xt,"Y-axis rotation.",_i.Read)]},void 0,void 0)],vi.Pop),pi[119]=gi(119,"p_return_guild",void 0,[],void 0),pi[120]=gi(120,"p_talk_guild",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[121]=gi(121,"npc_talk_pl_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[122]=gi(122,"npc_talk_kill",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[123]=gi(123,"npc_crtpk_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[124]=gi(124,"npc_crppk_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[125]=gi(125,"npc_crptalk_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[126]=gi(126,"p_look_at_v1",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[127]=gi(127,"npc_crp_id_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[128]=gi(128,"cam_quake",void 0,[],void 0),pi[129]=gi(129,"cam_adj",void 0,[],void 0),pi[130]=gi(130,"cam_zmin",void 0,[],void 0),pi[131]=gi(131,"cam_zmout",void 0,[],void 0),pi[132]=gi(132,"cam_pan_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[133]=gi(133,"game_lev_super",void 0,[],void 0),pi[134]=gi(134,"game_lev_reset",void 0,[],void 0),pi[135]=gi(135,"pos_pipe_v3","Create a telepipe at a specific position for the given player slot that takes players back to Pioneer 2 or the Lab.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"X coordinate.",_i.Read),hi(Xt,"Y coordinate.",_i.Read),hi(Xt,"Z coordinate.",_i.Read),hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[136]=gi(136,"if_zone_clear",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0)),Us=(pi[137]=gi(137,"chk_ene_num","Retrieves the amount of enemies killed during the quest.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[138]=gi(138,"unhide_obj",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[139]=gi(139,"unhide_ene",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[140]=gi(140,"at_coords_call",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(ii,void 0,_i.Read)]},void 0,void 0)],void 0),pi[141]=gi(141,"at_coords_talk",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(ii,void 0,_i.Read)]},void 0,void 0)],void 0),pi[142]=gi(142,"col_npcin",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(ii,void 0,_i.Read)]},void 0,void 0)],void 0),pi[143]=gi(143,"col_npcinr",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[144]=gi(144,"switch_on",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[145]=gi(145,"switch_off",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[146]=gi(146,"playbgm_epi",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[147]=gi(147,"set_mainwarp",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[148]=gi(148,"set_obj_param","Creates a targetable object.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"X coordinate.",_i.Read),hi(Xt,"Y coordinate.",_i.Read),hi(Xt,"Z coordinate.",_i.Read),hi(Xt,"Collision radius.",_i.Read),hi(ii,"Function label.",_i.Read),hi(Xt,"Vertical position of the cursor.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},"Object handle.",void 0)],void 0),pi[149]=gi(149,"set_floor_handler",void 0,[hi(Xt,"Floor number.",void 0),hi(ii,"Handler function label.",void 0)],vi.Pop)),Vs=(pi[150]=gi(150,"clr_floor_handler",void 0,[hi(Xt,"Floor number.",void 0)],vi.Pop),pi[151]=gi(151,"col_plinaw",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[152]=gi(152,"hud_hide",void 0,[],void 0),pi[153]=gi(153,"hud_show",void 0,[],void 0),pi[154]=gi(154,"cine_enable",void 0,[],void 0),pi[155]=gi(155,"cine_disable",void 0,[],void 0),pi[156]=gi(156,"unknown_9c",void 0,[],void 0),pi[157]=gi(157,"unknown_9d",void 0,[],void 0),pi[158]=gi(158,"unknown_9e",void 0,[],void 0),pi[159]=gi(159,"unknown_9f",void 0,[],void 0),pi[160]=gi(160,"unknown_a0",void 0,[],void 0),pi[161]=gi(161,"set_qt_failure",void 0,[hi(ii,void 0,void 0)],void 0),pi[162]=gi(162,"set_qt_success",void 0,[hi(ii,void 0,void 0)],void 0),pi[163]=gi(163,"clr_qt_failure",void 0,[],void 0),pi[164]=gi(164,"clr_qt_success",void 0,[],void 0),pi[165]=gi(165,"set_qt_cancel",void 0,[hi(ii,void 0,void 0)],void 0),pi[166]=gi(166,"clr_qt_cancel",void 0,[],void 0),pi[167]=gi(167,"unknown_a7",void 0,[],void 0),pi[168]=gi(168,"pl_walk_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[169]=gi(169,"unknown_a9",void 0,[],void 0),pi[170]=gi(170,"unknown_aa",void 0,[],void 0),pi[171]=gi(171,"unknown_ab",void 0,[],void 0),pi[172]=gi(172,"unknown_ac",void 0,[],void 0),pi[173]=gi(173,"unknown_ad",void 0,[],void 0),pi[174]=gi(174,"unknown_ae",void 0,[],void 0),pi[175]=gi(175,"unknown_af",void 0,[],void 0),pi[176]=gi(176,"pl_add_meseta",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[177]=gi(177,"thread_stg",void 0,[hi(ii,void 0,void 0)],void 0)),Ns=(pi[178]=gi(178,"del_obj_param",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},"Object handle.",void 0)],void 0),pi[179]=gi(179,"item_create",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[180]=gi(180,"item_create2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[181]=gi(181,"item_delete",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[182]=gi(182,"item_delete2","Deletes an item from the player's inventory.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[183]=gi(183,"item_check",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[184]=gi(184,"setevt",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[185]=gi(185,"get_difflvl","Sets the given register to the current difficulty. 0 For normal, 1 for hard and 2 for both very hard and ultimate.\nUse get_difficulty_level2 if you want to differentiate between very hard and ultimate.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0)),zs=(pi[186]=gi(186,"set_qt_exit",void 0,[hi(ii,void 0,void 0)],void 0),pi[187]=gi(187,"clr_qt_exit",void 0,[],void 0),pi[188]=gi(188,"unknown_bc",void 0,[],void 0),pi[189]=gi(189,"unknown_bd",void 0,[],void 0),pi[190]=gi(190,"unknown_be",void 0,[],void 0),pi[191]=gi(191,"unknown_bf",void 0,[],void 0),pi[192]=gi(192,"particle_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[193]=gi(193,"npc_text",void 0,[hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[194]=gi(194,"npc_chkwarp",void 0,[],void 0),pi[195]=gi(195,"pl_pkoff",void 0,[],void 0),pi[196]=gi(196,"map_designate",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0)),As=(pi[197]=gi(197,"masterkey_on",void 0,[],void 0),pi[198]=gi(198,"masterkey_off",void 0,[],void 0),pi[199]=gi(199,"window_time",void 0,[],void 0),pi[200]=gi(200,"winend_time",void 0,[],void 0),pi[201]=gi(201,"winset_time",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[202]=gi(202,"getmtime",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[203]=gi(203,"set_quest_board_handler",void 0,[hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[204]=gi(204,"clear_quest_board_handler",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[205]=gi(205,"particle_id_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[206]=gi(206,"npc_crptalk_id_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[207]=gi(207,"npc_lang_clean",void 0,[],void 0),pi[208]=gi(208,"pl_pkon",void 0,[],void 0),pi[209]=gi(209,"pl_chk_item2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[210]=gi(210,"enable_mainmenu",void 0,[],void 0),pi[211]=gi(211,"disable_mainmenu",void 0,[],void 0),pi[212]=gi(212,"start_battlebgm",void 0,[],void 0),pi[213]=gi(213,"end_battlebgm",void 0,[],void 0),pi[214]=gi(214,"disp_msg_qb",void 0,[hi(ni,void 0,void 0)],vi.Pop),pi[215]=gi(215,"close_msg_qb",void 0,[],void 0),pi[216]=gi(216,"set_eventflag_v3",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[217]=gi(217,"sync_leti",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0)),$s=(pi[218]=gi(218,"set_returnhunter",void 0,[],void 0),pi[219]=gi(219,"set_returncity",void 0,[],void 0),pi[220]=gi(220,"load_pvr",void 0,[],void 0),pi[221]=gi(221,"load_midi",void 0,[],void 0),pi[222]=gi(222,"unknown_de",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[223]=gi(223,"npc_param_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[224]=gi(224,"pad_dragon",void 0,[],void 0),pi[225]=gi(225,"clear_mainwarp",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[226]=gi(226,"pcam_param_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[227]=gi(227,"start_setevt_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[228]=gi(228,"warp_on",void 0,[],void 0),pi[229]=gi(229,"warp_off",void 0,[],void 0),pi[230]=gi(230,"get_slotnumber",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0)),Gs=(pi[231]=gi(231,"get_servernumber",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[232]=gi(232,"set_eventflag2",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],vi.Pop),pi[233]=gi(233,"res",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[234]=gi(234,"unknown_ea",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0)],void 0),pi[235]=gi(235,"enable_bgmctrl",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[236]=gi(236,"sw_send",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[237]=gi(237,"create_bgmctrl",void 0,[],void 0),pi[238]=gi(238,"pl_add_meseta2",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[239]=gi(239,"sync_register",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[240]=gi(240,"send_regwork",void 0,[],void 0),pi[241]=gi(241,"leti_fixed_camera_v3",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[242]=gi(242,"default_camera_pos1",void 0,[],void 0),pi[243]=gi(243,"unknown_f3",void 0,[],void 0),pi[244]=gi(244,"unknown_f4",void 0,[],void 0),pi[245]=gi(245,"unknown_f5",void 0,[],void 0),pi[246]=gi(246,"unknown_f6",void 0,[],void 0),pi[247]=gi(247,"unknown_f7",void 0,[],void 0),pi[248]=gi(248,"unknown_f8",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[249]=gi(249,"unknown_f9",void 0,[],void 0),pi[250]=gi(250,"get_gc_number",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[251]=gi(251,"unknown_fb",void 0,[hi(Zt,void 0,void 0)],void 0),pi[252]=gi(252,"unknown_fc",void 0,[],void 0),pi[253]=gi(253,"unknown_fd",void 0,[],void 0),pi[254]=gi(254,"unknown_fe",void 0,[],void 0),pi[255]=gi(255,"unknown_ff",void 0,[],void 0),pi[63488]=gi(63488,"unknown_f800",void 0,[],void 0),pi[63489]=gi(63489,"set_chat_callback",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63490]=gi(63490,"unknown_f802",void 0,[],void 0),pi[63491]=gi(63491,"unknown_f803",void 0,[],void 0),pi[63492]=gi(63492,"unknown_f804",void 0,[],void 0),pi[63493]=gi(63493,"unknown_f805",void 0,[],void 0),pi[63494]=gi(63494,"unknown_f806",void 0,[],void 0),pi[63495]=gi(63495,"unknown_f807",void 0,[],void 0),pi[63496]=gi(63496,"get_difficulty_level2","Sets the given register to the current difficulty. 0 For normal, 1 for hard, 2 for very hard and 3 for ultimate.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63497]=gi(63497,"get_number_of_player1","Set the given register to the current number of players. Either 1, 2, 3 or 4.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63498]=gi(63498,"get_coord_of_player","Retrieves a player's position.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"X coordinate.",_i.Write),hi(Xt,"Y coordinate.",_i.Write),hi(Xt,"Z coordinate.",_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63499]=gi(63499,"enable_map",void 0,[],void 0),pi[63500]=gi(63500,"disable_map",void 0,[],void 0),pi[63501]=gi(63501,"map_designate_ex",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0)),Hs=(pi[63502]=gi(63502,"unknown_f80e",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63503]=gi(63503,"unknown_f80f",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63504]=gi(63504,"ba_initial_floor",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63505]=gi(63505,"set_ba_rules",void 0,[],void 0),pi[63506]=gi(63506,"unknown_f812",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63507]=gi(63507,"unknown_f813",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63508]=gi(63508,"unknown_f814",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63509]=gi(63509,"unknown_f815",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63510]=gi(63510,"unknown_f816",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63511]=gi(63511,"unknown_f817",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63512]=gi(63512,"unknown_f818",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63513]=gi(63513,"unknown_f819",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63514]=gi(63514,"unknown_f81a",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63515]=gi(63515,"unknown_f81b",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63516]=gi(63516,"ba_disp_msg",void 0,[hi(ni,void 0,void 0)],vi.Pop),pi[63517]=gi(63517,"death_lvl_up",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63518]=gi(63518,"death_tech_lvl_up",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63519]=gi(63519,"unknown_f81f",void 0,[],void 0),pi[63520]=gi(63520,"cmode_stage",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63521]=gi(63521,"unknown_f821",void 0,[],void 0),pi[63522]=gi(63522,"unknown_f822",void 0,[],void 0),pi[63523]=gi(63523,"unknown_f823",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63524]=gi(63524,"unknown_f824",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63525]=gi(63525,"exp_multiplication",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63526]=gi(63526,"exp_division",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63527]=gi(63527,"get_user_is_dead",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63528]=gi(63528,"go_floor","Sends a player to the given floor.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Floor ID.",_i.Read)]},void 0,void 0)],void 0),pi[63529]=gi(63529,"unknown_f829",void 0,[],void 0),pi[63530]=gi(63530,"unknown_f82a",void 0,[],void 0),pi[63531]=gi(63531,"unlock_door2",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63532]=gi(63532,"lock_door2",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63533]=gi(63533,"if_switch_not_pressed",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63534]=gi(63534,"if_switch_pressed",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Floor ID.",_i.Read),hi(Xt,"Switch ID.",_i.Read),hi(Xt,"Will be set to 1 if the switch is pressed, 0 otherwise.",_i.Write)]},void 0,void 0)],void 0),pi[63535]=gi(63535,"unknown_f82f",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63536]=gi(63536,"control_dragon",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63537]=gi(63537,"release_dragon",void 0,[],void 0),pi[63538]=gi(63538,"unknown_f832",void 0,[],void 0),pi[63539]=gi(63539,"unknown_f833",void 0,[],void 0),pi[63540]=gi(63540,"unknown_f834",void 0,[],void 0),pi[63541]=gi(63541,"unknown_f835",void 0,[],void 0),pi[63542]=gi(63542,"unknown_f836",void 0,[],void 0),pi[63543]=gi(63543,"unknown_f837",void 0,[],void 0),pi[63544]=gi(63544,"shrink",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63545]=gi(63545,"unshrink",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63546]=gi(63546,"unknown_f83a",void 0,[],void 0),pi[63547]=gi(63547,"unknown_f83b",void 0,[],void 0),pi[63548]=gi(63548,"display_clock2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63549]=gi(63549,"unknown_f83d",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63550]=gi(63550,"delete_area_title",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63551]=gi(63551,"unknown_f83f",void 0,[],void 0),pi[63552]=gi(63552,"load_npc_data",void 0,[],void 0),pi[63553]=gi(63553,"get_npc_data",void 0,[hi(si,void 0,void 0)],void 0),pi[63554]=gi(63554,"unknown_f842",void 0,[],void 0),pi[63555]=gi(63555,"unknown_f843",void 0,[],void 0),pi[63556]=gi(63556,"unknown_f844",void 0,[],void 0),pi[63557]=gi(63557,"unknown_f845",void 0,[],void 0),pi[63558]=gi(63558,"unknown_f846",void 0,[],void 0),pi[63559]=gi(63559,"unknown_f847",void 0,[],void 0),pi[63560]=gi(63560,"give_damage_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63561]=gi(63561,"take_damage_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63562]=gi(63562,"unk_score_f84a",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63563]=gi(63563,"unk_score_f84b",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63564]=gi(63564,"kill_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63565]=gi(63565,"death_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63566]=gi(63566,"unk_score_f84e",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63567]=gi(63567,"enemy_death_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63568]=gi(63568,"meseta_score",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63569]=gi(63569,"unknown_f851",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63570]=gi(63570,"unknown_f852",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63571]=gi(63571,"reverse_warps",void 0,[],void 0),pi[63572]=gi(63572,"unreverse_warps",void 0,[],void 0),pi[63573]=gi(63573,"set_ult_map",void 0,[],void 0),pi[63574]=gi(63574,"unset_ult_map",void 0,[],void 0),pi[63575]=gi(63575,"set_area_title",void 0,[hi(ni,void 0,void 0)],vi.Pop),pi[63576]=gi(63576,"unknown_f858",void 0,[],void 0),pi[63577]=gi(63577,"unknown_f859",void 0,[],void 0),pi[63578]=gi(63578,"equip_item",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63579]=gi(63579,"unequip_item",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63580]=gi(63580,"unknown_f85c",void 0,[],void 0),pi[63581]=gi(63581,"unknown_f85d",void 0,[],void 0),pi[63582]=gi(63582,"unknown_f85e",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63583]=gi(63583,"unknown_f85f",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63584]=gi(63584,"unknown_f860",void 0,[],void 0),pi[63585]=gi(63585,"unknown_f861",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63586]=gi(63586,"unknown_f862",void 0,[],void 0),pi[63587]=gi(63587,"unknown_f863",void 0,[],void 0),pi[63588]=gi(63588,"cmode_rank",void 0,[hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63589]=gi(63589,"award_item_name",void 0,[],void 0),pi[63590]=gi(63590,"award_item_select",void 0,[],void 0),pi[63591]=gi(63591,"award_item_give_to",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63592]=gi(63592,"unknown_f868",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63593]=gi(63593,"unknown_f869",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63594]=gi(63594,"item_create_cmode",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63595]=gi(63595,"unknown_f86b",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63596]=gi(63596,"award_item_ok",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63597]=gi(63597,"unknown_f86d",void 0,[],void 0),pi[63598]=gi(63598,"unknown_f86e",void 0,[],void 0),pi[63599]=gi(63599,"ba_set_lives",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63600]=gi(63600,"ba_set_tech_lvl",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63601]=gi(63601,"ba_set_lvl",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63602]=gi(63602,"ba_set_time_limit",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63603]=gi(63603,"boss_is_dead",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63604]=gi(63604,"unknown_f874",void 0,[],void 0),pi[63605]=gi(63605,"unknown_f875",void 0,[],void 0),pi[63606]=gi(63606,"unknown_f876",void 0,[],void 0),pi[63607]=gi(63607,"enable_techs","Enables technique use for the given player.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63608]=gi(63608,"disable_techs","Disables technique use for the given player.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63609]=gi(63609,"get_gender","Retrieves the player's gender. 0 If male, 1 if female.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player gender.",_i.Write)]},void 0,void 0)],void 0),pi[63610]=gi(63610,"get_chara_class","Retrieves the player's race and character class.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player race. 0 If human, 1 if newman, 2 if cast.",_i.Write),hi(Xt,"Player class. 0 If hunter, 1 if ranger, 2 if force.",_i.Write)]},void 0,void 0)],void 0),pi[63611]=gi(63611,"take_slot_meseta","Takes an amount of meseta from a player's inventory.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read),hi(Xt,"Amount of meseta to take.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Will be set to 1 if the meseta was taken, 0 otherwise.",_i.Write)]},void 0,void 0)],void 0),pi[63612]=gi(63612,"unknown_f87c",void 0,[],void 0),pi[63613]=gi(63613,"unknown_f87d",void 0,[],void 0),pi[63614]=gi(63614,"unknown_f87e",void 0,[],void 0),pi[63615]=gi(63615,"read_guildcard_flag",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63616]=gi(63616,"unknown_f880",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63617]=gi(63617,"get_pl_name","Sets the value of <pl_name> to the given player's name.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63618]=gi(63618,"get_pl_job","Sets the value of <pl_job> to the given player's job (Hunter/Ranger/Force).",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63619]=gi(63619,"unknown_f883",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63620]=gi(63620,"unknown_f884",void 0,[],void 0),pi[63621]=gi(63621,"unknown_f885",void 0,[],void 0),pi[63622]=gi(63622,"unknown_f886",void 0,[],void 0),pi[63623]=gi(63623,"unknown_f887",void 0,[],void 0),pi[63624]=gi(63624,"unknown_f888",void 0,[],void 0),pi[63625]=gi(63625,"unknown_f889",void 0,[],void 0),pi[63626]=gi(63626,"get_player_status",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63627]=gi(63627,"send_mail",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63628]=gi(63628,"online_check",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63629]=gi(63629,"chl_set_timerecord",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63630]=gi(63630,"chl_get_timerecord",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63631]=gi(63631,"unknown_f88f",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63632]=gi(63632,"unknown_f890",void 0,[],void 0),pi[63633]=gi(63633,"load_enemy_data",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63634]=gi(63634,"get_physical_data",void 0,[hi(Zt,void 0,void 0)],void 0),pi[63635]=gi(63635,"get_attack_data",void 0,[hi(Zt,void 0,void 0)],void 0),pi[63636]=gi(63636,"get_resist_data",void 0,[hi(Zt,void 0,void 0)],void 0),pi[63637]=gi(63637,"get_movement_data",void 0,[hi(Zt,void 0,void 0)],void 0),pi[63638]=gi(63638,"unknown_f896",void 0,[],void 0),pi[63639]=gi(63639,"unknown_f897",void 0,[],void 0),pi[63640]=gi(63640,"shift_left",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0)),Qs=pi[63641]=gi(63641,"shift_right",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),Ys=pi[63642]=gi(63642,"get_random",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),Ks=(pi[63643]=gi(63643,"reset_map","Sets all registers to 0 and resets the quest.",[],void 0),pi[63644]=gi(63644,"disp_chl_retry_menu",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63645]=gi(63645,"chl_reverser",void 0,[],void 0),pi[63646]=gi(63646,"unknown_f89e",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63647]=gi(63647,"unknown_f89f",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63648]=gi(63648,"unknown_f8a0",void 0,[],void 0),pi[63649]=gi(63649,"unknown_f8a1",void 0,[],void 0),pi[63650]=gi(63650,"unknown_f8a2",void 0,[],void 0),pi[63651]=gi(63651,"unknown_f8a3",void 0,[],void 0),pi[63652]=gi(63652,"unknown_f8a4",void 0,[],void 0),pi[63653]=gi(63653,"unknown_f8a5",void 0,[],void 0),pi[63654]=gi(63654,"unknown_f8a6",void 0,[],void 0),pi[63655]=gi(63655,"unknown_f8a7",void 0,[],void 0),pi[63656]=gi(63656,"unknown_f8a8",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63657]=gi(63657,"unknown_f8a9",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63658]=gi(63658,"unknown_f8aa",void 0,[],void 0),pi[63659]=gi(63659,"unknown_f8ab",void 0,[],void 0),pi[63660]=gi(63660,"unknown_f8ac",void 0,[],void 0),pi[63661]=gi(63661,"get_number_of_player2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63662]=gi(63662,"unknown_f8ae",void 0,[],void 0),pi[63663]=gi(63663,"unknown_f8af",void 0,[],void 0),pi[63664]=gi(63664,"read1","Reads a 1-byte value from an arbitrary location.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Jt,void 0,_i.Write)]},"Register to store the result to.",void 0),hi(Xt,"Address to read from.",void 0)],void 0),pi[63665]=gi(63665,"read2","Reads a 2-byte value from an arbitrary location.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Zt,void 0,_i.Write)]},"Register to store the result to.",void 0),hi(Xt,"Address to read from.",void 0)],void 0),pi[63666]=gi(63666,"read4","Reads a 4-byte value from an arbitrary location.",[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},"Register to store the result to.",void 0),hi(Xt,"Address to read from.",void 0)],void 0),pi[63667]=gi(63667,"write1","Writes a 1-byte value to an arbitrary location.",[hi(Xt,"Address to write to.",void 0),hi(Jt,"Value to be written.",void 0)],vi.Pop),pi[63668]=gi(63668,"write2","Writes a 2-byte value to an arbitrary location.",[hi(Xt,"Address to write to.",void 0),hi(Zt,"Value to be written.",void 0)],vi.Pop),pi[63669]=gi(63669,"write4","Writes a 4-byte value to an arbitrary location.",[hi(Xt,"Address to write to.",void 0),hi(Xt,"Value to be written.",void 0)],vi.Pop),pi[63670]=gi(63670,"unknown_f8b6",void 0,[],void 0),pi[63671]=gi(63671,"unknown_f8b7",void 0,[],void 0),pi[63672]=gi(63672,"unknown_f8b8",void 0,[],void 0),pi[63673]=gi(63673,"chl_recovery",void 0,[],void 0),pi[63674]=gi(63674,"unknown_f8ba",void 0,[],void 0),pi[63675]=gi(63675,"unknown_f8bb",void 0,[],void 0),pi[63676]=gi(63676,"set_episode",void 0,[hi(Xt,void 0,void 0)],void 0)),Js=(pi[63677]=gi(63677,"unknown_f8bd",void 0,[],void 0),pi[63678]=gi(63678,"unknown_f8be",void 0,[],void 0),pi[63679]=gi(63679,"unknown_f8bf",void 0,[],void 0),pi[63680]=gi(63680,"file_dl_req",void 0,[hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63681]=gi(63681,"get_dl_status",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63682]=gi(63682,"gba_unknown4",void 0,[],void 0),pi[63683]=gi(63683,"get_gba_state",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63684]=gi(63684,"unknown_f8c4",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63685]=gi(63685,"unknown_f8c5",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63686]=gi(63686,"qexit",void 0,[],void 0),pi[63687]=gi(63687,"use_animation",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Animation ID.",_i.Read),hi(Xt,"Animation duration in number of frames.",_i.Read)]},void 0,void 0)],void 0),pi[63688]=gi(63688,"stop_animation",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63689]=gi(63689,"run_to_coord",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63690]=gi(63690,"set_slot_invincible",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63691]=gi(63691,"unknown_f8cb",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63692]=gi(63692,"set_slot_poison",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63693]=gi(63693,"set_slot_paralyze",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63694]=gi(63694,"set_slot_shock",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63695]=gi(63695,"set_slot_freeze",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63696]=gi(63696,"set_slot_slow",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63697]=gi(63697,"set_slot_confuse",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63698]=gi(63698,"set_slot_shifta",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63699]=gi(63699,"set_slot_deband",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63700]=gi(63700,"set_slot_jellen",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63701]=gi(63701,"set_slot_zalure",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read)]},void 0,void 0)],void 0),pi[63702]=gi(63702,"fleti_fixed_camera",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],vi.Pop),pi[63703]=gi(63703,"fleti_locked_camera",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],vi.Pop),pi[63704]=gi(63704,"default_camera_pos2",void 0,[],void 0),pi[63705]=gi(63705,"set_motion_blur",void 0,[],void 0),pi[63706]=gi(63706,"set_screen_bw",void 0,[],void 0),pi[63707]=gi(63707,"unknown_f8db",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Zt,void 0,void 0)],vi.Pop),pi[63708]=gi(63708,"npc_action_string",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0),hi(oi,void 0,void 0)],void 0),pi[63709]=gi(63709,"get_pad_cond",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63710]=gi(63710,"get_button_cond",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63711]=gi(63711,"freeze_enemies",void 0,[],void 0),pi[63712]=gi(63712,"unfreeze_enemies",void 0,[],void 0),pi[63713]=gi(63713,"freeze_everything",void 0,[],void 0),pi[63714]=gi(63714,"unfreeze_everything",void 0,[],void 0),pi[63715]=gi(63715,"restore_hp",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63716]=gi(63716,"restore_tp",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63717]=gi(63717,"close_chat_bubble",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63718]=gi(63718,"move_coords_object",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63719]=gi(63719,"at_coords_call_ex",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63720]=gi(63720,"unknown_f8e8",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63721]=gi(63721,"unknown_f8e9",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63722]=gi(63722,"unknown_f8ea",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63723]=gi(63723,"unknown_f8eb",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63724]=gi(63724,"unknown_f8ec",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63725]=gi(63725,"animation_check",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63726]=gi(63726,"call_image_data",void 0,[hi(Xt,void 0,void 0),hi(Zt,void 0,void 0)],vi.Pop),pi[63727]=gi(63727,"unknown_f8ef",void 0,[],void 0),pi[63728]=gi(63728,"turn_off_bgm_p2",void 0,[],void 0),pi[63729]=gi(63729,"turn_on_bgm_p2",void 0,[],void 0),pi[63730]=gi(63730,"load_unk_data",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(si,void 0,void 0)],vi.Pop),pi[63731]=gi(63731,"particle2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ei,void 0,void 0)],vi.Pop),pi[63732]=gi(63732,"unknown_f8f4",void 0,[],void 0),pi[63733]=gi(63733,"unknown_f8f5",void 0,[],void 0),pi[63734]=gi(63734,"unknown_f8f6",void 0,[],void 0),pi[63735]=gi(63735,"unknown_f8f7",void 0,[],void 0),pi[63736]=gi(63736,"unknown_f8f8",void 0,[],void 0),pi[63737]=gi(63737,"unknown_f8f9",void 0,[],void 0),pi[63738]=gi(63738,"unknown_f8fa",void 0,[],void 0),pi[63739]=gi(63739,"unknown_f8fb",void 0,[],void 0),pi[63740]=gi(63740,"unknown_f8fc",void 0,[],void 0),pi[63741]=gi(63741,"unknown_f8fd",void 0,[],void 0),pi[63742]=gi(63742,"unknown_f8fe",void 0,[],void 0),pi[63743]=gi(63743,"unknown_f8ff",void 0,[],void 0),pi[63744]=gi(63744,"unknown_f900",void 0,[],void 0),pi[63745]=gi(63745,"dec2float",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63746]=gi(63746,"float2dec",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63747]=gi(63747,"flet",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0)),Zs=pi[63748]=gi(63748,"fleti",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi(ei,void 0,void 0)],void 0),Xs=(pi[63749]=gi(63749,"unknown_f905",void 0,[],void 0),pi[63750]=gi(63750,"unknown_f906",void 0,[],void 0),pi[63751]=gi(63751,"unknown_f907",void 0,[],void 0),pi[63752]=gi(63752,"fadd",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0)),eo=pi[63753]=gi(63753,"faddi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi(ei,void 0,void 0)],void 0),to=pi[63754]=gi(63754,"fsub",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0),io=pi[63755]=gi(63755,"fsubi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi(ei,void 0,void 0)],void 0),so=pi[63756]=gi(63756,"fmul",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0),oo=pi[63757]=gi(63757,"fmuli",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi(ei,void 0,void 0)],void 0),no=pi[63758]=gi(63758,"fdiv",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Read)]},void 0,void 0)],void 0),ro=pi[63759]=gi(63759,"fdivi",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(ei,void 0,_i.Write)]},void 0,void 0),hi(ei,void 0,void 0)],void 0),ao=(pi[63760]=gi(63760,"get_unknown_count",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63761]=gi(63761,"get_stackable_item_count",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Player slot.",_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read),hi(Xt,void 0,_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63762]=gi(63762,"freeze_and_hide_equip",void 0,[],void 0),pi[63763]=gi(63763,"thaw_and_show_equip",void 0,[],void 0),pi[63764]=gi(63764,"set_palettex_callback",void 0,[hi(Xt,"Player slot.",void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63765]=gi(63765,"activate_palettex",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63766]=gi(63766,"enable_palettex",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63767]=gi(63767,"restore_palettex",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63768]=gi(63768,"disable_palettex",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63769]=gi(63769,"get_palettex_activated",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63770]=gi(63770,"get_unknown_palettex_status",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63771]=gi(63771,"disable_movement2",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63772]=gi(63772,"enable_movement2",void 0,[hi(Xt,"Player slot.",void 0)],vi.Pop),pi[63773]=gi(63773,"get_time_played",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63774]=gi(63774,"get_guildcard_total",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63775]=gi(63775,"get_slot_meseta",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63776]=gi(63776,"get_player_level",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63777]=gi(63777,"get_section_id",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63778]=gi(63778,"get_player_hp",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,"Maximum HP.",_i.Write),hi(Xt,"Current HP.",_i.Write),hi(Xt,"Maximum TP.",_i.Write),hi(Xt,"Current TP.",_i.Write)]},void 0,void 0)],vi.Pop),pi[63779]=gi(63779,"get_floor_number",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63780]=gi(63780,"get_coord_player_detect",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,"Player slot.",_i.Read)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Read)]},void 0,void 0)],void 0),pi[63781]=gi(63781,"read_global_flag",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63782]=gi(63782,"write_global_flag",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63783]=gi(63783,"unknown_f927",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63784]=gi(63784,"floor_player_detect",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write),hi(Xt,void 0,_i.Write),hi(Xt,void 0,_i.Write),hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63785]=gi(63785,"read_disk_file",void 0,[hi(ni,void 0,void 0)],vi.Pop),pi[63786]=gi(63786,"open_pack_select",void 0,[],void 0),pi[63787]=gi(63787,"item_select",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63788]=gi(63788,"get_item_id",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63789]=gi(63789,"color_change",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63790]=gi(63790,"send_statistic",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63791]=gi(63791,"unknown_f92f",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63792]=gi(63792,"chat_box",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63793]=gi(63793,"chat_bubble",void 0,[hi(Xt,void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63794]=gi(63794,"unknown_f932",void 0,[],void 0),pi[63795]=gi(63795,"unknown_f933",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63796]=gi(63796,"scroll_text",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ei,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63797]=gi(63797,"gba_unknown1",void 0,[],void 0),pi[63798]=gi(63798,"gba_unknown2",void 0,[],void 0),pi[63799]=gi(63799,"gba_unknown3",void 0,[],void 0),pi[63800]=gi(63800,"add_damage_to",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63801]=gi(63801,"item_delete3",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63802]=gi(63802,"get_item_info",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63803]=gi(63803,"item_packing1",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63804]=gi(63804,"item_packing2",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63805]=gi(63805,"get_lang_setting",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Kt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63806]=gi(63806,"prepare_statistic",void 0,[hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63807]=gi(63807,"keyword_detect",void 0,[],void 0),pi[63808]=gi(63808,"keyword",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,"Player slot.",void 0),hi(ni,void 0,void 0)],vi.Pop),pi[63809]=gi(63809,"get_guildcard_num",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63810]=gi(63810,"unknown_f942",void 0,[],void 0),pi[63811]=gi(63811,"unknown_f943",void 0,[],void 0),pi[63812]=gi(63812,"get_wrap_status",void 0,[hi(Xt,"Player slot.",void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63813]=gi(63813,"initial_floor",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63814]=gi(63814,"sin",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63815]=gi(63815,"cos",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0)],vi.Pop),pi[63816]=gi(63816,"unknown_f948",void 0,[],void 0),pi[63817]=gi(63817,"unknown_f949",void 0,[],void 0),pi[63818]=gi(63818,"boss_is_dead2",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63819]=gi(63819,"unknown_f94b",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63820]=gi(63820,"unknown_f94c",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63821]=gi(63821,"is_there_cardbattle",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63822]=gi(63822,"unknown_f94e",void 0,[],void 0),pi[63823]=gi(63823,"unknown_f94f",void 0,[],void 0),pi[63824]=gi(63824,"bb_p2_menu",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63825]=gi(63825,"bb_map_designate",void 0,[hi(Jt,void 0,void 0),hi(Zt,void 0,void 0),hi(Jt,void 0,void 0),hi(Jt,void 0,void 0)],void 0));pi[63826]=gi(63826,"bb_get_number_in_pack",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63827]=gi(63827,"bb_swap_item",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63828]=gi(63828,"bb_check_wrap",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],vi.Pop),pi[63829]=gi(63829,"bb_exchange_pd_item",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63830]=gi(63830,"bb_exchange_pd_srank",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63831]=gi(63831,"bb_exchange_pd_special",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63832]=gi(63832,"bb_exchange_pd_percent",void 0,[hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63833]=gi(63833,"unknown_f959",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63834]=gi(63834,"unknown_f95a",void 0,[],void 0),pi[63835]=gi(63835,"unknown_f95b",void 0,[],void 0),pi[63836]=gi(63836,"bb_exchange_slt",void 0,[hi(Xt,void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63837]=gi(63837,"bb_exchange_pc",void 0,[],void 0),pi[63838]=gi(63838,"bb_box_create_bp",void 0,[hi(Xt,void 0,void 0),hi(ei,void 0,void 0),hi(ei,void 0,void 0)],vi.Pop),pi[63839]=gi(63839,"bb_exchange_pt",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0),hi(Xt,void 0,void 0),hi(ii,void 0,void 0),hi(ii,void 0,void 0)],vi.Pop),pi[63840]=gi(63840,"unknown_f960",void 0,[hi(Xt,void 0,void 0)],vi.Pop),pi[63841]=gi(63841,"unknown_f961",void 0,[hi({kind:Yt.RegTupRef,register_tuples:[hi(Xt,void 0,_i.Write)]},void 0,void 0)],void 0),pi[63842]=gi(63842,"unknown_f962",void 0,[],void 0),pi[63843]=gi(63843,"unknown_f963",void 0,[],void 0),pi[63844]=gi(63844,"unknown_f964",void 0,[],void 0),pi[63845]=gi(63845,"unknown_f965",void 0,[],void 0),pi[63846]=gi(63846,"unknown_f966",void 0,[],void 0),pi[63847]=gi(63847,"unknown_f967",void 0,[],void 0),pi[63848]=gi(63848,"unknown_f968",void 0,[],void 0),pi[63849]=gi(63849,"unknown_f969",void 0,[],void 0),pi[63850]=gi(63850,"unknown_f96a",void 0,[],void 0),pi[63851]=gi(63851,"unknown_f96b",void 0,[],void 0),pi[63852]=gi(63852,"unknown_f96c",void 0,[],void 0),pi[63853]=gi(63853,"unknown_f96d",void 0,[],void 0),pi[63854]=gi(63854,"unknown_f96e",void 0,[],void 0),pi[63855]=gi(63855,"unknown_f96f",void 0,[],void 0),pi[63856]=gi(63856,"unknown_f970",void 0,[],void 0),pi[63857]=gi(63857,"unknown_f971",void 0,[],void 0),pi[63858]=gi(63858,"unknown_f972",void 0,[],void 0),pi[63859]=gi(63859,"unknown_f973",void 0,[],void 0),pi[63860]=gi(63860,"unknown_f974",void 0,[],void 0),pi[63861]=gi(63861,"unknown_f975",void 0,[],void 0),pi[63862]=gi(63862,"unknown_f976",void 0,[],void 0),pi[63863]=gi(63863,"unknown_f977",void 0,[],void 0),pi[63864]=gi(63864,"unknown_f978",void 0,[],void 0),pi[63865]=gi(63865,"unknown_f979",void 0,[],void 0),pi[63866]=gi(63866,"unknown_f97a",void 0,[],void 0),pi[63867]=gi(63867,"unknown_f97b",void 0,[],void 0),pi[63868]=gi(63868,"unknown_f97c",void 0,[],void 0),pi[63869]=gi(63869,"unknown_f97d",void 0,[],void 0),pi[63870]=gi(63870,"unknown_f97e",void 0,[],void 0),pi[63871]=gi(63871,"unknown_f97f",void 0,[],void 0),pi[63872]=gi(63872,"unknown_f980",void 0,[],void 0),pi[63873]=gi(63873,"unknown_f981",void 0,[],void 0),pi[63874]=gi(63874,"unknown_f982",void 0,[],void 0),pi[63875]=gi(63875,"unknown_f983",void 0,[],void 0),pi[63876]=gi(63876,"unknown_f984",void 0,[],void 0),pi[63877]=gi(63877,"unknown_f985",void 0,[],void 0),pi[63878]=gi(63878,"unknown_f986",void 0,[],void 0),pi[63879]=gi(63879,"unknown_f987",void 0,[],void 0),pi[63880]=gi(63880,"unknown_f988",void 0,[],void 0),pi[63881]=gi(63881,"unknown_f989",void 0,[],void 0),pi[63882]=gi(63882,"unknown_f98a",void 0,[],void 0),pi[63883]=gi(63883,"unknown_f98b",void 0,[],void 0),pi[63884]=gi(63884,"unknown_f98c",void 0,[],void 0),pi[63885]=gi(63885,"unknown_f98d",void 0,[],void 0),pi[63886]=gi(63886,"unknown_f98e",void 0,[],void 0),pi[63887]=gi(63887,"unknown_f98f",void 0,[],void 0),pi[63888]=gi(63888,"unknown_f990",void 0,[],void 0),pi[63889]=gi(63889,"unknown_f991",void 0,[],void 0),pi[63890]=gi(63890,"unknown_f992",void 0,[],void 0),pi[63891]=gi(63891,"unknown_f993",void 0,[],void 0),pi[63892]=gi(63892,"unknown_f994",void 0,[],void 0),pi[63893]=gi(63893,"unknown_f995",void 0,[],void 0),pi[63894]=gi(63894,"unknown_f996",void 0,[],void 0),pi[63895]=gi(63895,"unknown_f997",void 0,[],void 0),pi[63896]=gi(63896,"unknown_f998",void 0,[],void 0),pi[63897]=gi(63897,"unknown_f999",void 0,[],void 0),pi[63898]=gi(63898,"unknown_f99a",void 0,[],void 0),pi[63899]=gi(63899,"unknown_f99b",void 0,[],void 0),pi[63900]=gi(63900,"unknown_f99c",void 0,[],void 0),pi[63901]=gi(63901,"unknown_f99d",void 0,[],void 0),pi[63902]=gi(63902,"unknown_f99e",void 0,[],void 0),pi[63903]=gi(63903,"unknown_f99f",void 0,[],void 0),pi[63904]=gi(63904,"unknown_f9a0",void 0,[],void 0),pi[63905]=gi(63905,"unknown_f9a1",void 0,[],void 0),pi[63906]=gi(63906,"unknown_f9a2",void 0,[],void 0),pi[63907]=gi(63907,"unknown_f9a3",void 0,[],void 0),pi[63908]=gi(63908,"unknown_f9a4",void 0,[],void 0),pi[63909]=gi(63909,"unknown_f9a5",void 0,[],void 0),pi[63910]=gi(63910,"unknown_f9a6",void 0,[],void 0),pi[63911]=gi(63911,"unknown_f9a7",void 0,[],void 0),pi[63912]=gi(63912,"unknown_f9a8",void 0,[],void 0),pi[63913]=gi(63913,"unknown_f9a9",void 0,[],void 0),pi[63914]=gi(63914,"unknown_f9aa",void 0,[],void 0),pi[63915]=gi(63915,"unknown_f9ab",void 0,[],void 0),pi[63916]=gi(63916,"unknown_f9ac",void 0,[],void 0),pi[63917]=gi(63917,"unknown_f9ad",void 0,[],void 0),pi[63918]=gi(63918,"unknown_f9ae",void 0,[],void 0),pi[63919]=gi(63919,"unknown_f9af",void 0,[],void 0),pi[63920]=gi(63920,"unknown_f9b0",void 0,[],void 0),pi[63921]=gi(63921,"unknown_f9b1",void 0,[],void 0),pi[63922]=gi(63922,"unknown_f9b2",void 0,[],void 0),pi[63923]=gi(63923,"unknown_f9b3",void 0,[],void 0),pi[63924]=gi(63924,"unknown_f9b4",void 0,[],void 0),pi[63925]=gi(63925,"unknown_f9b5",void 0,[],void 0),pi[63926]=gi(63926,"unknown_f9b6",void 0,[],void 0),pi[63927]=gi(63927,"unknown_f9b7",void 0,[],void 0),pi[63928]=gi(63928,"unknown_f9b8",void 0,[],void 0),pi[63929]=gi(63929,"unknown_f9b9",void 0,[],void 0),pi[63930]=gi(63930,"unknown_f9ba",void 0,[],void 0),pi[63931]=gi(63931,"unknown_f9bb",void 0,[],void 0),pi[63932]=gi(63932,"unknown_f9bc",void 0,[],void 0),pi[63933]=gi(63933,"unknown_f9bd",void 0,[],void 0),pi[63934]=gi(63934,"unknown_f9be",void 0,[],void 0),pi[63935]=gi(63935,"unknown_f9bf",void 0,[],void 0),pi[63936]=gi(63936,"unknown_f9c0",void 0,[],void 0),pi[63937]=gi(63937,"unknown_f9c1",void 0,[],void 0),pi[63938]=gi(63938,"unknown_f9c2",void 0,[],void 0),pi[63939]=gi(63939,"unknown_f9c3",void 0,[],void 0),pi[63940]=gi(63940,"unknown_f9c4",void 0,[],void 0),pi[63941]=gi(63941,"unknown_f9c5",void 0,[],void 0),pi[63942]=gi(63942,"unknown_f9c6",void 0,[],void 0),pi[63943]=gi(63943,"unknown_f9c7",void 0,[],void 0),pi[63944]=gi(63944,"unknown_f9c8",void 0,[],void 0),pi[63945]=gi(63945,"unknown_f9c9",void 0,[],void 0),pi[63946]=gi(63946,"unknown_f9ca",void 0,[],void 0),pi[63947]=gi(63947,"unknown_f9cb",void 0,[],void 0),pi[63948]=gi(63948,"unknown_f9cc",void 0,[],void 0),pi[63949]=gi(63949,"unknown_f9cd",void 0,[],void 0),pi[63950]=gi(63950,"unknown_f9ce",void 0,[],void 0),pi[63951]=gi(63951,"unknown_f9cf",void 0,[],void 0),pi[63952]=gi(63952,"unknown_f9d0",void 0,[],void 0),pi[63953]=gi(63953,"unknown_f9d1",void 0,[],void 0),pi[63954]=gi(63954,"unknown_f9d2",void 0,[],void 0),pi[63955]=gi(63955,"unknown_f9d3",void 0,[],void 0),pi[63956]=gi(63956,"unknown_f9d4",void 0,[],void 0),pi[63957]=gi(63957,"unknown_f9d5",void 0,[],void 0),pi[63958]=gi(63958,"unknown_f9d6",void 0,[],void 0),pi[63959]=gi(63959,"unknown_f9d7",void 0,[],void 0),pi[63960]=gi(63960,"unknown_f9d8",void 0,[],void 0),pi[63961]=gi(63961,"unknown_f9d9",void 0,[],void 0),pi[63962]=gi(63962,"unknown_f9da",void 0,[],void 0),pi[63963]=gi(63963,"unknown_f9db",void 0,[],void 0),pi[63964]=gi(63964,"unknown_f9dc",void 0,[],void 0),pi[63965]=gi(63965,"unknown_f9dd",void 0,[],void 0),pi[63966]=gi(63966,"unknown_f9de",void 0,[],void 0),pi[63967]=gi(63967,"unknown_f9df",void 0,[],void 0),pi[63968]=gi(63968,"unknown_f9e0",void 0,[],void 0),pi[63969]=gi(63969,"unknown_f9e1",void 0,[],void 0),pi[63970]=gi(63970,"unknown_f9e2",void 0,[],void 0),pi[63971]=gi(63971,"unknown_f9e3",void 0,[],void 0),pi[63972]=gi(63972,"unknown_f9e4",void 0,[],void 0),pi[63973]=gi(63973,"unknown_f9e5",void 0,[],void 0),pi[63974]=gi(63974,"unknown_f9e6",void 0,[],void 0),pi[63975]=gi(63975,"unknown_f9e7",void 0,[],void 0),pi[63976]=gi(63976,"unknown_f9e8",void 0,[],void 0),pi[63977]=gi(63977,"unknown_f9e9",void 0,[],void 0),pi[63978]=gi(63978,"unknown_f9ea",void 0,[],void 0),pi[63979]=gi(63979,"unknown_f9eb",void 0,[],void 0),pi[63980]=gi(63980,"unknown_f9ec",void 0,[],void 0),pi[63981]=gi(63981,"unknown_f9ed",void 0,[],void 0),pi[63982]=gi(63982,"unknown_f9ee",void 0,[],void 0),pi[63983]=gi(63983,"unknown_f9ef",void 0,[],void 0),pi[63984]=gi(63984,"unknown_f9f0",void 0,[],void 0),pi[63985]=gi(63985,"unknown_f9f1",void 0,[],void 0),pi[63986]=gi(63986,"unknown_f9f2",void 0,[],void 0),pi[63987]=gi(63987,"unknown_f9f3",void 0,[],void 0),pi[63988]=gi(63988,"unknown_f9f4",void 0,[],void 0),pi[63989]=gi(63989,"unknown_f9f5",void 0,[],void 0),pi[63990]=gi(63990,"unknown_f9f6",void 0,[],void 0),pi[63991]=gi(63991,"unknown_f9f7",void 0,[],void 0),pi[63992]=gi(63992,"unknown_f9f8",void 0,[],void 0),pi[63993]=gi(63993,"unknown_f9f9",void 0,[],void 0),pi[63994]=gi(63994,"unknown_f9fa",void 0,[],void 0),pi[63995]=gi(63995,"unknown_f9fb",void 0,[],void 0),pi[63996]=gi(63996,"unknown_f9fc",void 0,[],void 0),pi[63997]=gi(63997,"unknown_f9fd",void 0,[],void 0),pi[63998]=gi(63998,"unknown_f9fe",void 0,[],void 0),pi[63999]=gi(63999,"unknown_f9ff",void 0,[],void 0);var co;pi.forEach(e=>{bi.set(e.mnemonic,e)}),function(e){e[e.DC=0]="DC",e[e.GC=1]="GC",e[e.PC=2]="PC",e[e.BB=3]="BB"}(co||(co={}));co.DC,co.GC,co.PC,co.BB;var lo,uo;function _o(e){switch(e){case co.DC:case co.GC:return lo.DC_GC;case co.PC:return lo.PC;case co.BB:return lo.BB}}function vo(e,t,i){const s=Math.min(e.params.length,t.length),o=[];for(let i=0;i<s;i++){const s=e.params[i].type,n=t[i];switch(o[i]=[],s.kind){case Yt.ILabelVar:case Yt.RegRefVar:for(let e=i;e<t.length;e++)o[i].push(t[e]);break;default:o[i].push(n)}}return{opcode:e,args:t,param_to_args:o,asm:i}}function ho(e,t){const i=e.opcode,s=Math.min(i.params.length,e.param_to_args.length);let o=0;for(let n=0;n<s;n++){const s=i.params[n].type,r=e.param_to_args[n];switch(s.kind){case Yt.Byte:case Yt.RegRef:case Yt.RegTupRef:o++;break;case Yt.Word:case Yt.Label:case Yt.ILabel:case Yt.DLabel:case Yt.SLabel:o+=2;break;case Yt.DWord:case Yt.Float:o+=4;break;case Yt.String:t==lo.DC_GC?o+=r[0].value.length+1:o+=2*r[0].value.length+2;break;case Yt.ILabelVar:o+=1+2*r.length;break;case Yt.RegRefVar:o+=1+r.length;break;default:throw new Error(`Parameter type ${Yt[s.kind]} not implemented.`)}}return i.size+o}function po(e){return{value:e}}function bo(e){const t=e.labels.slice(),i={labels:e.asm.labels.map(e=>Object.assign({},e))};switch(e.type){case uo.Instructions:return{type:uo.Instructions,labels:t,instructions:e.instructions.map(e=>function(e){return{opcode:e.opcode,args:e.args.map(e=>Object.assign({},e)),param_to_args:e.param_to_args.map(e=>e.map(e=>Object.assign({},e))),asm:e.asm}}(e)),asm:i};case uo.Data:return{type:uo.Data,labels:t,data:e.data.slice(0),asm:i};case uo.String:return{type:uo.String,labels:t,value:e.value,asm:i}}}!function(e){e[e.DC_GC=0]="DC_GC",e[e.PC=1]="PC",e[e.BB=2]="BB"}(lo||(lo={})),function(e){e[e.Instructions=0]="Instructions",e[e.Data=1]="Data",e[e.String=2]="String"}(uo||(uo={}));const go=(e,t)=>e+t,fo=(e,t)=>e-t,mo=(e,t)=>e*t,ko=(e,t)=>e/t,wo=(e,t)=>Math.floor(e/t),Io=(e,t)=>e%t,yo=(e,t)=>e&t,Ro=(e,t)=>e|t,So=(e,t)=>e^t,jo=(e,t)=>e<<t,To=(e,t)=>e>>>t;function Co(e,t,i){if(e(t,i))return i}function Fo(e){return e.slice(1)}const xo=P.a.get("quest_editor/scripting/vm/io");class Do{map_designate(e,t){xo.warn(`bb_map_designate(${e}, ${t})`)}set_floor_handler(e,t){xo.warn(`set_floor_handler(${e}, ${t})`)}window_msg(e){xo.warn(`window_msg("${e}")`)}message(e){xo.warn(`message("${e}")`)}add_msg(e){xo.warn(`add_msg("${e}")`)}winend(){xo.warn("winend")}p_dead_v3(e){return xo.warn(`p_dead_v3(${e})`),!1}mesend(){xo.warn("mesend")}list(e){xo.warn(`list([${e.map(e=>`"${e}"`).join(", ")}])`)}warning(e,t){xo.warn(e+this.srcloc_to_string(null==t?void 0:t.source_location))}error(e,t){xo.error(e+this.srcloc_to_string(null==t?void 0:t.source_location))}srcloc_to_string(e){return e?` [${e.line_no}:${e.col}]`:" "}}class Oo{constructor(e=Math.floor(performance.now())){this.holdrand=e}next(){const e=214013*this.holdrand+2531011>>>0;return this.holdrand=e,e>>>16&32767}}class Lo{constructor(e,t,i){Object(B.d)(e>=0,"seg_idx should be greater or equal to 0."),Object(B.d)(e<i.length,`seg_idx should be less than ${i.length}.`);const s=i[e];Object(B.d)(s.type===uo.Instructions,"seg_idx should point to an instructions segment."),Object(B.d)(t>=0,"inst_idx should be greater or equal to 0."),Object(B.d)(t<s.instructions.length,`inst_idx should be less than ${s.instructions.length}.`),this.seg_idx=e,this.inst_idx=t,this.object_code=i}get segment(){return this.object_code[this.seg_idx]}get instruction(){return this.segment.instructions[this.inst_idx]}get source_location(){var e,t;return(null===(e=this.instruction.asm)||void 0===e?void 0:e.mnemonic)||(null===(t=this.instruction.asm)||void 0===t?void 0:t.args[0])}next(){return this.inst_idx+1<this.segment.instructions.length?new Lo(this.seg_idx,this.inst_idx+1,this.object_code):this.seg_idx+1<this.object_code.length?new Lo(this.seg_idx+1,0,this.object_code):void 0}equals(e){return this.seg_idx===e.seg_idx&&this.inst_idx==e.inst_idx}}var Bo=i(661);class Po extends Bo.a{constructor(e,t){super(t),this.buffer="number"==typeof e?new ArrayBuffer(e):e,this.data_view=new DataView(this.buffer)}get size(){return this.data_view.byteLength}get backing_buffer(){return this.buffer}}var Wo;!function(e){e[e.BreakPoint=0]="BreakPoint",e[e.Over=1]="Over",e[e.In=2]="In",e[e.Out=3]="Out"}(Wo||(Wo={}));class Eo{constructor(e,t){this.idx=e,this.instruction_pointer=t}}class qo{constructor(e,t,i){this.io=e,this.arg_stack=new Po(32,D.a.Little),this.arg_stack_counter=0,this.arg_stack_types=Array(8).fill(Yt.Any),this._step_mode=Wo.BreakPoint,this.id=qo.next_id++,this.variable_stack=[],this._call_stack=[new Eo(0,t)],this.call_stack=this._call_stack,this.area_id=i}get step_mode(){return this._step_mode}set step_mode(e){this._step_mode=e,this._step_frame=this.current_stack_frame()}get step_frame(){return this._step_frame}current_stack_frame(){return this._call_stack[this._call_stack.length-1]}set_current_instruction_pointer(e){this._call_stack.length?this._call_stack[this._call_stack.length-1].instruction_pointer=e:this.push_frame(e)}push_frame(e){this._call_stack.push(new Eo(this.call_stack.length,e))}pop_call_stack(){this._call_stack.pop()}push_arg(e,t){if(this.arg_stack_counter>=8)throw new Error("Argument stack: Stack overflow");this.arg_stack.set_u32(4*this.arg_stack_counter,e),this.arg_stack_types[this.arg_stack_counter]=t,this.arg_stack_counter++}fetch_args(e){const t=e.instruction;if(t.opcode.stack!==vi.Pop)return[];const i=[];t.opcode.params.length!==this.arg_stack_counter&&this.io.warning("Argument stack: Argument count mismatch.",e);for(let s=0;s<t.opcode.params.length;s++){const o=t.opcode.params[s];this.check_arg_type(o.type.kind,this.arg_stack_types[s],e);const n=4*s;switch(o.type.kind){case Yt.Byte:i.push(this.arg_stack.get_u8(n));break;case Yt.Word:case Yt.ILabel:case Yt.DLabel:case Yt.SLabel:i.push(this.arg_stack.get_u16(n));break;case Yt.DWord:case Yt.String:i.push(this.arg_stack.get_u32(n));break;case Yt.RegTupRef:o.type.register_tuples.length>0&&i.push(this.arg_stack.get_u8(n));break;default:throw new Error(`Argument stack: Unhandled parameter kind: ${Yt[o.type.kind]}.`)}}return this.arg_stack_counter=0,i}check_arg_type(e,t,i){let s;switch(e){case Yt.Any:s=!0;break;case Yt.Byte:case Yt.Word:case Yt.DWord:case Yt.Float:case Yt.String:case Yt.Pointer:s=t===e;break;case Yt.Label:case Yt.ILabel:case Yt.ILabelVar:case Yt.DLabel:case Yt.SLabel:s=t===Yt.Word;break;case Yt.RegRef:case Yt.RegTupRef:case Yt.RegRefVar:s=t===Yt.Byte}s||this.io.warning(`Argument stack: Argument type mismatch, expected ${Yt[e]} but received ${Yt[t]}.`,i)}static reset_id_counter(){this.next_id=0}}qo.next_id=0;const Mo=P.a.get("quest_editor/scripting/vm/VirtualMachine");var Uo;!function(e){e[e.Suspended=0]="Suspended",e[e.Paused=1]="Paused",e[e.WaitingVsync=2]="WaitingVsync",e[e.WaitingInput=3]="WaitingInput",e[e.WaitingSelection=4]="WaitingSelection",e[e.Halted=5]="Halted"}(Uo||(Uo={}));class Vo{constructor(e=new Do,t=new Oo){this.io=e,this.random=t,this.episode=n.b.I,this._object_code=[],this.label_to_seg_idx=new Map,this.registers=new Po(1024,D.a.Little),this.string_arg_store="",this.threads=[],this.thread_idx=0,this.window_msg_open=!1,this.set_episode_called=!1,this.list_open=!1,this.selection_reg=0,this._halted=!0,this.ignore_pauses_until_after_line=void 0,this.breakpoints=[],this.paused=!1,this.unsupported_opcodes_logged=new Set}get object_code(){return this._object_code}get halted(){return this._halted}set step_mode(e){if(null!=e){const t=this.current_thread();t&&(t.step_mode=e)}}load_object_code(e,t){this.halt(),Mo.debug("Starting."),this._object_code=e,this.episode=t,this.label_to_seg_idx.clear();let i=0;for(const e of this._object_code){for(const t of e.labels)this.label_to_seg_idx.set(t,i);i++}this._halted=!1}start_thread(e,t){const i=this.get_segment_index_by_label(e),s=this._object_code[i];if(s.type!==uo.Instructions)throw new Error(`Label ${e} points to a ${uo[s.type]} segment, expecting ${uo[uo.Instructions]}.`);this.threads.push(new qo(this.io,new Lo(i,0,this.object_code),t))}execute(){var e,t,i;if(this._halted)return Uo.Halted;let s;try{let o=0;for(;o++<1e4;){if(this.threads.length>=1&&this.thread_idx>=this.threads.length)return Uo.WaitingVsync;const o=this.current_thread();if(!o)return Uo.Suspended;const n=o.current_stack_frame();s=n.instruction_pointer;const r=s.instruction;if(!this.paused)switch(o.step_mode){case Wo.BreakPoint:if(-1!==this.breakpoints.findIndex(e=>e.equals(s)))return this.paused=!0,Uo.Paused;break;case Wo.Over:if(o.step_frame&&n.idx<=o.step_frame.idx&&(null===(e=r.asm)||void 0===e?void 0:e.mnemonic))return this.paused=!0,Uo.Paused;break;case Wo.In:if(null===(t=r.asm)||void 0===t?void 0:t.mnemonic)return this.paused=!0,Uo.Paused;break;case Wo.Out:if(o.step_frame&&n.idx<o.step_frame.idx&&(null===(i=r.asm)||void 0===i?void 0:i.mnemonic))return this.paused=!0,Uo.Paused}this.paused=!1;const a=this.execute_instruction(o,s);if(null!=a&&a!==Uo.WaitingVsync)return a}throw new Error("Maximum execution count reached. The code probably contains an infinite loop.")}catch(e){let t=e;t instanceof Error||(t=new Error(String(t)));try{this.io.error(t,s)}finally{this.halt()}return Uo.Halted}}vsync(){this.thread_idx>=this.threads.length&&(this.thread_idx=0)}halt(){this._halted||(Mo.debug("Halting."),this.registers.zero(),this.string_arg_store="",this.threads=[],this.thread_idx=0,this.window_msg_open=!1,this.set_episode_called=!1,this.list_open=!1,this.selection_reg=0,this._halted=!0,this.paused=!1,this.breakpoints.splice(0,1/0),this.unsupported_opcodes_logged.clear(),qo.reset_id_counter())}get_instruction_pointer(e){var t;const i=void 0===e?this.current_thread():this.threads.find(t=>t.id===e);return null===(t=null==i?void 0:i.current_stack_frame())||void 0===t?void 0:t.instruction_pointer}get_segment_index_by_label(e){if(!this.label_to_seg_idx.has(e))throw new Error(`Invalid argument: No such label ${e}.`);return this.label_to_seg_idx.get(e)}list_select(e){if(!this.list_open)throw new Error("list_select may not be called if there is no list open");this.set_register_unsigned(this.selection_reg,e)}set_breakpoint(e){-1===this.breakpoints.findIndex(t=>t.equals(e))&&this.breakpoints.push(e)}remove_breakpoint(e){const t=this.breakpoints.findIndex(t=>t.equals(e));-1!==t&&this.breakpoints.splice(t,1)}get_thread_ids(){return this.threads.map(e=>e.id)}get_current_thread_id(){var e;return null===(e=this.current_thread())||void 0===e?void 0:e.id}current_thread(){return this.threads[this.thread_idx]}terminate_thread(e){const t=this.threads[e];this.threads.splice(e,1),this.thread_idx>=e&&this.thread_idx>0&&this.thread_idx--,Mo.debug(`Thread #${t.id} terminated.`)}advance(e){const t=e.current_stack_frame();if(!t)return;const i=t.instruction_pointer.next();if(i)e.set_current_instruction_pointer(i);else{if(e.call_stack.length>0)throw new Error("Reached EOF but call stack was not empty");e.pop_call_stack(),this.terminate_thread(this.thread_idx)}}execute_instruction(e,t){const i=t.instruction;let s=void 0,o=!0;const r=i.args.map(e=>e.value),[a,d,c]=r;this.list_open&&(this.list_open=!1);const l=e.fetch_args(t);switch(i.opcode.code){case fi.code:break;case mi.code:this.pop_call_stack(this.thread_idx);break;case ki.code:s=Uo.WaitingVsync,this.advance(e),this.thread_idx++,o=!1;break;case wi.code:this.halt();break;case Ii.code:this.start_thread(a);break;case ji.code:this.set_register_signed(a,this.get_register_signed(d));break;case Ti.code:this.set_register_signed(a,d);break;case Ci.code:this.set_register_byte(a,d);break;case Fi.code:this.set_register_word(a,d);break;case xi.code:this.set_register_unsigned(a,this.get_register_address(a));break;case Js.code:this.set_register_float(a,this.get_register_float(d));break;case Zs.code:this.set_register_float(a,d);break;case Di.code:this.set_register_signed(a,1);break;case Oi.code:this.set_register_signed(a,0);break;case Li.code:this.set_register_signed(a,0===this.get_register_signed(a)?1:0);break;case Ji.code:this.push_call_stack(e,a),o=!1;break;case Ki.code:this.jump_to_label(e,a),o=!1;break;case js.code:e.push_arg(this.get_register_signed(a),Yt.DWord);break;case Ts.code:e.push_arg(i.args[0].value,Yt.DWord);break;case Cs.code:e.push_arg(i.args[0].value,Yt.Byte);break;case Fs.code:e.push_arg(i.args[0].value,Yt.Word);break;case xs.code:e.push_arg(this.get_register_address(i.args[0].value),Yt.DWord);break;case Os.code:if("string"==typeof a){const t=this.parse_template_string(a);this.string_arg_store=t.slice(0,512),e.push_arg(11085568,Yt.String)}break;case Bi.code:this.do_integer_op_with_register(a,d,go);break;case Pi.code:this.do_integer_op_with_literal(a,d,go);break;case Wi.code:this.do_integer_op_with_register(a,d,fo);break;case Ei.code:this.do_integer_op_with_literal(a,d,fo);break;case qi.code:this.do_integer_op_with_register(a,d,mo);break;case Mi.code:this.do_integer_op_with_literal(a,d,mo);break;case Ui.code:this.do_integer_op_with_register(a,d,wo);break;case Vi.code:this.do_integer_op_with_literal(a,d,wo);break;case Qi.code:this.do_integer_op_with_register(a,d,Io);break;case Yi.code:this.do_integer_op_with_literal(a,d,Io);break;case Xs.code:this.do_float_op_with_register(a,d,go);break;case eo.code:this.do_float_op_with_literal(a,Math.fround(d),go);break;case to.code:this.do_float_op_with_register(a,d,fo);break;case io.code:this.do_float_op_with_literal(a,Math.fround(d),fo);break;case so.code:this.do_float_op_with_register(a,d,mo);break;case oo.code:this.do_float_op_with_literal(a,Math.fround(d),mo);break;case no.code:this.do_float_op_with_register(a,d,ko);break;case ro.code:this.do_float_op_with_literal(a,Math.fround(d),ko);break;case Ni.code:this.do_integer_op_with_register(a,d,yo);break;case zi.code:this.do_integer_op_with_literal(a,d,yo);break;case Ai.code:this.do_integer_op_with_register(a,d,Ro);break;case $i.code:this.do_integer_op_with_literal(a,d,Ro);break;case Gi.code:this.do_integer_op_with_register(a,d,So);break;case Hi.code:this.do_integer_op_with_literal(a,d,So);break;case Hs.code:this.do_integer_op_with_register(a,d,jo);break;case Qs.code:this.do_integer_op_with_register(a,d,To);break;case Zi.code:this.conditional_jump(e,a,(e,t)=>0!==t,1,...Fo(r).map(e=>this.get_register_signed(e))),o=!1;break;case Xi.code:this.conditional_jump(e,a,(e,t)=>e===t,0,...Fo(r).map(e=>this.get_register_signed(e))),o=!1;break;case es.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e===t,a,d),o=!1;break;case ts.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e===t,a,d),o=!1;break;case is.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e!==t,a,d),o=!1;break;case ss.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e!==t,a,d),o=!1;break;case os.code:this.unsigned_cond_jump_with_register(e,c,(e,t)=>e>t,a,d),o=!1;break;case ns.code:this.unsigned_cond_jump_with_literal(e,c,(e,t)=>e>t,a,d),o=!1;break;case rs.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e>t,a,d),o=!1;break;case as.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e>t,a,d),o=!1;break;case ds.code:this.unsigned_cond_jump_with_register(e,c,(e,t)=>e<t,a,d),o=!1;break;case cs.code:this.unsigned_cond_jump_with_literal(e,c,(e,t)=>e<t,a,d),o=!1;break;case ls.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e<t,a,d),o=!1;break;case us.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e<t,a,d),o=!1;break;case _s.code:this.unsigned_cond_jump_with_register(e,c,(e,t)=>e>=t,a,d),o=!1;break;case vs.code:this.unsigned_cond_jump_with_literal(e,c,(e,t)=>e>=t,a,d),o=!1;break;case hs.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e>=t,a,d),o=!1;break;case ps.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e>=t,a,d),o=!1;break;case bs.code:this.unsigned_cond_jump_with_register(e,c,(e,t)=>e<=t,a,d),o=!1;break;case gs.code:this.unsigned_cond_jump_with_literal(e,c,(e,t)=>e<=t,a,d),o=!1;break;case fs.code:this.signed_cond_jump_with_register(e,c,(e,t)=>e<=t,a,d),o=!1;break;case ms.code:this.signed_cond_jump_with_literal(e,c,(e,t)=>e<=t,a,d),o=!1;break;case Is.code:this.push_variable_stack(e,a,1);break;case ys.code:this.pop_variable_stack(e,a,1);break;case Rs.code:this.push_variable_stack(e,a,d);break;case Ss.code:this.pop_variable_stack(e,a,d);break;case Ls.code:if(!this.window_msg_open){const e=this.deref_string(l[1]).split("\n");s=Uo.WaitingSelection,this.list_open=!0,this.selection_reg=l[0],this.io.list(e)}break;case Bs.code:if(!this.window_msg_open){const e=this.deref_string(l[0]);s=Uo.WaitingInput,this.window_msg_open=!0,this.io.window_msg(e)}break;case Ps.code:if(this.window_msg_open){const e=this.deref_string(l[0]);s=Uo.WaitingInput,this.io.add_msg(e)}break;case Ws.code:this.set_register_unsigned(a,Math.floor(Date.now()/1e3));break;case Es.code:this.window_msg_open&&(this.window_msg_open=!1,this.io.winend());break;case qs.code:this.set_register_signed(l[0],this.io.p_dead_v3(l[1])?1:0);break;case Us.code:this.io.set_floor_handler(l[0],l[1]);break;case Vs.code:this.start_thread(a);break;case zs.code:this.io.map_designate(this.get_register_signed(a),this.get_register_signed(a+2));break;case Gs.code:this.io.map_designate(this.get_register_signed(a),this.get_register_signed(a+3));break;case Ys.code:{const e=this.get_register_signed(a),t=this.get_register_signed(a+1),i=this.random.next();let s=Math.floor(Math.fround(i/32768)*t);e>=s&&(s=e),this.set_register_signed(d,s)}break;case Ks.code:if(this.set_episode_called){this.io.warning("Calling set_episode more than once is not supported.",t);break}if(this.set_episode_called=!0,!this._object_code[t.seg_idx].labels.includes(0)){this.io.warning("Calling set_episode outside of segment 0 is not supported.",t);break}if(function(e){switch(e){case n.b.I:return 0;case n.b.II:return 1;case n.b.IV:return 2}}(this.episode)!==a){this.io.warning("Calling set_episode with an argument that does not match the quest's designated episode is not supported.",t);break}break;case ao.code:this.io.map_designate(a,c);break;default:this.unsupported_opcodes_logged.has(i.opcode.code)||(this.unsupported_opcodes_logged.add(i.opcode.code),this.io.warning("Unsupported instruction.",t))}return o&&this.advance(e),s}get_register_signed(e){return this.registers.get_i32(4*e)}set_register_signed(e,t){this.registers.set_i32(4*e,t)}get_register_unsigned(e){return this.registers.get_u32(4*e)}set_register_unsigned(e,t){this.registers.set_u32(4*e,t)}get_register_word(e){return this.registers.get_u16(4*e)}set_register_word(e,t){this.registers.set_u16(4*e,t)}get_register_byte(e){return this.registers.get_u8(4*e)}set_register_byte(e,t){this.registers.set_u8(4*e,t)}get_register_float(e){return this.registers.get_f32(4*e)}set_register_float(e,t){this.registers.set_f32(4*e,t)}do_integer_op_with_register(e,t,i){this.do_integer_op_with_literal(e,this.get_register_signed(t),i)}do_integer_op_with_literal(e,t,i){if((i===ko||i===wo)&&0===t)throw new Error("Division by zero");this.set_register_signed(e,i(this.get_register_signed(e),t))}do_float_op_with_register(e,t,i){this.do_float_op_with_literal(e,this.get_register_float(t),i)}do_float_op_with_literal(e,t,i){if((i===ko||i===wo)&&0===t)throw new Error("Division by zero");this.set_register_float(e,i(this.get_register_float(e),t))}push_call_stack(e,t){const i=this.get_segment_index_by_label(t),s=this._object_code[i];if(s.type!==uo.Instructions)throw new Error(`Label ${t} points to a ${uo[s.type]} segment, expecting ${uo[uo.Instructions]}.`);e.push_frame(new Lo(i,0,this.object_code))}pop_call_stack(e){this.threads[e].pop_call_stack(),0===this.threads[e].call_stack.length&&this.terminate_thread(e)}jump_to_label(e,t){e.set_current_instruction_pointer(new Lo(this.get_segment_index_by_label(t),0,this.object_code))}signed_cond_jump_with_register(e,t,i,s,o){this.conditional_jump(e,t,i,this.get_register_signed(s),this.get_register_signed(o))}signed_cond_jump_with_literal(e,t,i,s,o){this.conditional_jump(e,t,i,this.get_register_signed(s),o)}unsigned_cond_jump_with_register(e,t,i,s,o){this.conditional_jump(e,t,i,this.get_register_unsigned(s),this.get_register_unsigned(o))}unsigned_cond_jump_with_literal(e,t,i,s,o){this.conditional_jump(e,t,i,this.get_register_unsigned(s),o)}conditional_jump(e,t,i,...s){const o=Co.bind(null,i);var n;void 0!==function(e,t,i){let s=t;for(const t of i){const i=e(s,t);if(void 0===i)return;s=i}return s}(o,(n=s)[0],n.slice(1))?this.jump_to_label(e,t):this.advance(e)}push_variable_stack(e,t,i){const s=t+i;if(s>256)throw new Error("Variable stack: Invalid register");if(e.variable_stack.length+i>16)throw new Error("Variable stack: Stack overflow");for(let i=t;i<s;i++)e.variable_stack.push(this.get_register_unsigned(i))}pop_variable_stack(e,t,i){const s=t+i;if(s>256)throw new Error("Variable stack: Invalid register");if(e.variable_stack.length<i)throw new Error("Variable stack: Stack underflow");for(let i=s-1;i>=t;i--)this.set_register_unsigned(i,e.variable_stack.pop())}get_register_address(e){return 4*e}deref_string(e){if(11085568===e)return this.string_arg_store;if(e>0&&e<1024)return this.registers.get_string_utf16(e,1024,!0);throw new Error("Failed to dereference string: Invalid address "+e)}parse_template_string(e){const t={"hero name":"PLACEHOLDER","hero job":"PLACEHOLDER","name hero":"PLACEHOLDER","name job":"PLACEHOLDER",time:"01:12","award item":"PLACEHOLDER","challenge title":"PLACEHOLDER",pl_name:"PLACEHOLDER",pl_job:"PLACEHOLDER",last_word:"PLACEHOLDER",last_chat:"PLACEHOLDER",team_name:"PLACEHOLDER",meseta_slot_prize:"PLACEHOLDER"},i=[[/^color ([0-9]+)$/,e=>`<color ${e}>`],[/^r([0-9]{1,3})$/,e=>{const t=parseInt(e);return isNaN(t)?"":this.get_register_unsigned(t).toString()}],[/^f([0-9]{1,3})$/,e=>{const t=parseInt(e);return isNaN(t)?"":this.get_register_float(t).toFixed(6)}]];let s=!1,o=-1,n=0,r=e.length;for(;n<r;){const a=e[n];if(s&&">"===a){s=!1;const a=n,d=e.slice(o+1,a);let c=void 0;for(const[e,t]of i){const i=e.exec(d);if(i&&void 0!==i[1]){c=t(i[1]);break}}if(void 0===c&&(c=t[d]),void 0===c)c="";else if("function"==typeof c){const e=c();t[d]=e,c=e}e=e.slice(0,o)+c+e.slice(a+1);const l=c.length-(d.length+2);n+=l,r+=l}else"<"===a&&(s=!0,o=n);n++}return s&&(e=e.slice(0,o)),e}}i(789);var No,zo=i(143);!function(e){e[e.Signed=0]="Signed",e[e.Unsigned=1]="Unsigned",e[e.Word=2]="Word",e[e.Byte=3]="Byte",e[e.Float=4]="Float"}(No||(No={}));class Ao extends g.a{constructor(e){super(),this.quest_runner=e,this.type_select=this.add(new zo.a({label:"Display type:",tooltip:"Select which data type register values should be displayed as.",items:[No.Signed,No.Unsigned,No.Word,No.Byte,No.Float],to_label:e=>No[e]})),this.register_getter=this.get_register_getter(No.Signed),this.hex_checkbox=this.add(new wt.a(!1,{label:"Hex",tooltip:"Display register values in hexadecimal."})),this.settings_bar=this.add(new kt.a(this.type_select,this.hex_checkbox)),this.list_element=Object(_.h)({className:"quest_editor_RegistersView_list"}),this.container_element=Object(_.h)({className:"quest_editor_RegistersView_container"},this.list_element),this.element=Object(_.h)({className:"quest_editor_RegistersView"},this.settings_bar.element,this.container_element),this.type_select.selected.val=No.Signed;const t=Array(256);for(let e=0;e<256;e++){const i=this.add(new c("",{class:"quest_editor_RegistersView_value",label:`r${e}:`,readonly:!0})),s=Object(_.h)({className:"quest_editor_RegistersView_register"},i.label.element,i.element);t[e]=i,this.list_element.appendChild(s)}this.register_els=t;const i=()=>!this.quest_runner.paused.val||!this.quest_runner.running.val;this.update(i(),this.hex_checkbox.checked.val),this.disposables(this.quest_runner.running.observe(()=>this.update(i(),this.hex_checkbox.checked.val)),this.quest_runner.paused.observe(()=>this.update(i(),this.hex_checkbox.checked.val)),this.quest_runner.pause_location.observe(()=>this.update(i(),this.hex_checkbox.checked.val)),this.type_select.selected.observe(({value:e})=>{null!=e&&(this.register_getter=this.get_register_getter(e),this.update(i(),this.hex_checkbox.checked.val))}),this.hex_checkbox.checked.observe(e=>this.update(i(),e.value))),this.finalize_construction(Ao)}get_register_getter(e){let t;switch(e){case No.Signed:t=this.quest_runner.vm.get_register_signed;break;case No.Unsigned:t=this.quest_runner.vm.get_register_unsigned;break;case No.Word:t=this.quest_runner.vm.get_register_word;break;case No.Byte:t=this.quest_runner.vm.get_register_byte;break;case No.Float:t=this.quest_runner.vm.get_register_float}return t.bind(this.quest_runner.vm)}update(e,t){if(e){const e="??";for(let t=0;t<256;t++){this.register_els[t].value.set_val(e,{silent:!0})}}else if(t)for(let e=0;e<256;e++){const t=this.register_els[e],i=this.quest_runner.vm.get_register_unsigned(e);t.value.set_val(Object(B.k)(i),{silent:!0})}else for(let e=0;e<256;e++){const t=this.register_els[e],i=this.register_getter(e);t.value.set_val(i.toString(),{silent:!0})}}}i(790);var $o=i(28);class Go extends g.a{constructor(e){super(),this.should_scroll_to_bottom=!0,this.scrolled=()=>{this.should_scroll_to_bottom=this.list_container.scrollTop>=this.list_container.scrollHeight-this.list_container.offsetHeight-5},this.scroll_to_bottom=()=>{this.should_scroll_to_bottom&&this.list_container.scrollTo({top:this.list_container.scrollHeight,left:0,behavior:"auto"})},this.create_message_element=({time:e,severity:t,message:i})=>Object(_.h)({className:["quest_editor_DebugView_message","quest_editor_DebugView_"+$o.b[t]+"_message"].join(" ")},Object(_.h)({className:"quest_editor_DebugView_message_timestamp"},Object(P.b)(e)),Object(_.h)({className:"quest_editor_DebugView_message_severity"},`[${$o.b[t]}]`),Object(_.h)({className:"quest_editor_DebugView_message_contents"},i));const t=new Bt.a({text:"Debug",icon_left:_.a.Play,tooltip:"Debug the current quest in a virtual machine (F5)"}),i=new Bt.a({icon_left:_.a.SquareArrowRight,tooltip:"Continue (F6)"}),s=new Bt.a({icon_left:_.a.LongArrowRight,tooltip:"Step over (F10)"}),o=new Bt.a({icon_left:_.a.LevelDown,tooltip:"Step into (F11)"}),n=new Bt.a({icon_left:_.a.LevelUp,tooltip:"Step out (Shift-F11)"}),r=new Bt.a({icon_left:_.a.Stop,tooltip:"Stop execution (Shift-F5)"}),a=new zo.a({class:"quest_editor_DebugView_thread_select",label:"Thread:",items:e.threads,selected:e.selected_thread_id,to_label:e=>e.label}),d=new zo.a({class:"quest_editor_DebugView_severity_select",label:"Log:",items:$o.a,selected:e.severity,to_label:e=>$o.b[e]});this.settings_bar=this.add(new kt.a({class:"quest_editor_DebugView_settings"},t,i,s,o,n,r,a,d)),this.list_element=Object(_.h)({className:"quest_editor_DebugView_message_list"}),this.list_container=Object(_.h)({className:"quest_editor_DebugView_list_container"},this.list_element),this.element=Object(_.h)({className:"quest_editor_DebugView",tabIndex:-1},this.settings_bar.element,this.list_container),this.list_container.addEventListener("scroll",this.scrolled),this.disposables(Object(_.d)(this.list_element,e.log,this.create_message_element,{after:this.scroll_to_bottom}),t.onclick.observe(e.debug),t.enabled.bind_to(e.can_debug),i.onclick.observe(e.resume),i.enabled.bind_to(e.can_step),s.onclick.observe(e.step_over),s.enabled.bind_to(e.can_step),o.onclick.observe(e.step_in),o.enabled.bind_to(e.can_step),n.onclick.observe(e.step_out),n.enabled.bind_to(e.can_step),r.onclick.observe(e.stop),r.enabled.bind_to(e.can_stop),a.selected.observe(({value:t})=>e.select_thread(t.id)),a.enabled.bind_to(e.can_select_thread),d.selected.observe(({value:t})=>null!=t&&e.set_severity(t))),this.finalize_construction(Go)}}class Ho extends Ee{constructor(e,t,i,s){super(Object(le.e)(void 0),t,i,s),this.quest_runner=e,this.disposer.add_all(this.quest_runner.game_state.current_area_variant.observe(this.area_variant_changed,{call_now:!0}))}get_area_variant_details(){const e=this.quest_runner.game_state;return{episode:e.episode,area_variant:e.current_area_variant.val,npcs:e.npcs,objects:e.objects}}}class Qo extends Ne{constructor(e,t,i,s){super(e,"quest_editor_QuestRunnerRendererView",new Fe(s,s=>new Ho(e.quest_runner,s,t,i))),this.renderer.init_camera_controls(),this.finalize_construction(Qo)}}var Yo=i(142);i(791);class Ko extends Yo.a{constructor(e){super(),this.element=Object(_.h)({className:"core_ErrorWidget"}),this.children=[],this.label=this.disposable(new h.a(e,{enabled:!1})),this.element.append(this.label.element),this.finalize_construction(Ko)}}var Jo=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const Zo=P.a.get("quest_editor/gui/QuestEditorView"),Xo={settings:{showPopoutIcon:!1,showMaximiseIcon:!0,showCloseIcon:!0},dimensions:{headerHeight:24},labels:{close:"Close",maximise:"Maximise",minimise:"Minimise",popout:"Open in new window"}};class en extends g.a{constructor(e,t,i,s,o,n,r,a,d,c,l,u,v,h,p){super(),this.gui_store=e,this.quest_editor_ui_persister=i,this.tool_bar=s,this.element=Object(_.h)({className:"quest_editor_QuestEditorView"}),this.layout_element=Object(_.h)({className:"quest_editor_gl_container"}),this.sub_views=new Map,this.view_map=new Map([[f,{name:"quest_info",create:o}],[m,{name:"npc_counts",create:n}],[ft,{name:"quest_renderer",create:r}],[Tt,{name:"asm_editor",create:a}],[Ct,{name:"entity_info",create:d}],[Dt,{name:"npc_list_view",create:c}],[Ot,{name:"object_list_view",create:l}],[Qt,{name:"events_view",create:u}]]),e.feature_active("vm")&&(this.view_map.set(Qo,{name:"quest_runner",create:v}),this.view_map.set(Go,{name:"log_view",create:h}),this.view_map.set(Ao,{name:"registers_view",create:p})),this.element.append(this.tool_bar.element,this.layout_element),this.layout=this.init_golden_layout(),this.disposables(e.on_global_keydown(Ft.b.QuestEditor,"Ctrl-Alt-D",()=>t.debug.val=!t.debug.val),t.quest_runner.running.observe(({value:e})=>Jo(this,void 0,void 0,(function*(){const i=yield this.layout;if(t.quest_runner.running.val===e){const t=i.root.getItemsById(this.view_map.get(Qo).name);if(e){if(0===t.length){i.root.getItemsById(this.view_map.get(ft).name)[0].parent.addChild({id:this.view_map.get(Qo).name,title:"Debug 3D View",type:"component",componentName:this.view_map.get(Qo).name,isClosable:!1})}}else for(const e of t)e.remove()}})))),this.finalize_construction(en)}activate(){super.activate();for(const e of this.sub_views.values())e.activate()}deactivate(){for(const e of this.sub_views.values())e.deactivate();super.deactivate()}resize(e,t){super.resize(e,t);const i=Math.max(0,t-this.tool_bar.height);return this.layout_element.style.width=e+"px",this.layout_element.style.height=i+"px",this.layout.then(t=>t.updateSize(e,i)),this}dispose(){super.dispose(),this.layout.then(e=>e.destroy());for(const e of this.sub_views.values())e.dispose();this.sub_views.clear()}init_golden_layout(){return Jo(this,void 0,void 0,(function*(){const e=this.get_default_layout_content();try{const t=yield this.quest_editor_ui_persister.load_layout_config(e);if(t){const e=this.attempt_gl_init(Object.assign(Object.assign({},Xo),{content:t}));return Zo.info("Instantiated golden layout with persisted layout."),e}}catch(e){Zo.warn("Couldn't instantiate golden layout with persisted layout.",e)}return Zo.info("Instantiating golden layout with default layout."),this.attempt_gl_init(Object.assign(Object.assign({},Xo),{content:e}))}))}attempt_gl_init(e){const t=new o.a(e,this.layout_element),i=this;try{for(const{name:e,create:s}of this.view_map.values())t.registerComponent(e,(function(t){let o;try{o=s(),i.active&&o.activate()}catch(t){Zo.error(`Couldn't instantiate "${e}".`,t),o=new Ko("Something went wrong while creating this window.")}t.on("close",()=>o.dispose()),t.on("resize",()=>o.resize(t.width,t.height-4)),o.resize(t.width,t.height),i.sub_views.set(e,o),t.getElement().append(o.element)}));return t.on("stateChanged",()=>{this.quest_editor_ui_persister.persist_layout_config(t.toConfig().content)}),t.on("stackCreated",e=>{e.on("activeContentItemChanged",e=>{if("componentName"in e.config){const t=this.sub_views.get(e.config.componentName);t&&t.focus()}})}),t.init(),t}catch(e){throw t.destroy(),e}}get_default_layout_content(){return[{type:"row",content:[{type:"column",width:2,content:[{type:"stack",content:[{title:"Info",type:"component",componentName:this.view_map.get(f).name,isClosable:!1},{title:"NPC Counts",type:"component",componentName:this.view_map.get(m).name,isClosable:!1}]},{title:"Entity",type:"component",componentName:this.view_map.get(Ct).name,isClosable:!1}]},{type:"stack",width:9,content:[{id:this.view_map.get(ft).name,title:"3D View",type:"component",componentName:this.view_map.get(ft).name,isClosable:!1},{title:"Script",type:"component",componentName:this.view_map.get(Tt).name,isClosable:!1},...this.gui_store.feature_active("vm")?[{title:"Debug",type:"component",componentName:this.view_map.get(Go).name,isClosable:!1},{title:"Registers",type:"component",componentName:this.view_map.get(Ao).name,isClosable:!1}]:[]]},{type:"stack",width:2,content:[{title:"NPCs",type:"component",componentName:this.view_map.get(Dt).name,isClosable:!1},{title:"Objects",type:"component",componentName:this.view_map.get(Ot).name,isClosable:!1},{title:"Events",type:"component",componentName:this.view_map.get(Qt).name,isClosable:!1}]}]}]}}class tn{constructor(e){this.manager=e,this.can_redo=Object(le.e)(!1),this.can_undo=Object(le.e)(!1),this.first_redo=Object(le.e)(void 0),this.first_undo=Object(le.e)(void 0)}make_current(){this.manager.current.val=this}redo(){return!1}reset(){}undo(){return!1}}const sn=new class{constructor(){this.noop_undo=new tn(this),this.current=Object(le.e)(this.noop_undo),this.can_undo=this.current.flat_map(e=>e.can_undo),this.can_redo=this.current.flat_map(e=>e.can_redo),this.first_undo=this.current.flat_map(e=>e.first_undo),this.first_redo=this.current.flat_map(e=>e.first_redo)}undo(){return this.current.val.undo()}redo(){return this.current.val.redo()}make_noop_current(){this.current.val=this.noop_undo}},on=P.a.get("core/undo/UndoStack");class nn{constructor(){this.stack=Object(le.c)(),this.index=Object(le.e)(0),this.can_undo=this.index.map(e=>e>0),this.can_redo=Object(le.d)((e,t)=>t<e.length,this.stack,this.index),this.first_undo=this.can_undo.map(e=>e?this.stack.get(this.index.val-1):void 0),this.first_redo=this.can_redo.map(e=>e?this.stack.get(this.index.val):void 0),this.undoing_or_redoing=!1}make_current(){sn.current.val=this}push(e){return this.undoing_or_redoing||(this.stack.splice(this.index.val,1/0,e),this.index.update(e=>e+1)),e}pop(){return this.index.update(e=>e-1),this.stack.splice(this.index.val,1)[0]}undo(){if(this.can_undo.val&&!this.undoing_or_redoing){try{this.undoing_or_redoing=!0,this.index.update(e=>e-1),this.stack.get(this.index.val).undo()}catch(e){on.warn("Error while undoing action.",e)}finally{this.undoing_or_redoing=!1}return!0}return!1}redo(){if(this.can_redo.val&&!this.undoing_or_redoing){try{this.undoing_or_redoing=!0,this.stack.get(this.index.val).redo(),this.index.update(e=>e+1)}catch(e){on.warn("Error while redoing action.",e)}finally{this.undoing_or_redoing=!1}return!0}return!1}reset(){this.stack.clear(),this.index.val=0}}class rn{constructor(e){this._breakpoints=[],this.breakpoints=this._breakpoints,this.vm=e}resume(){this.vm.step_mode=Wo.BreakPoint}step_over(){this.vm.step_mode=Wo.Over}step_in(){this.vm.step_mode=Wo.In}step_out(){this.vm.step_mode=Wo.Out}set_breakpoint(e){return-1===this._breakpoints.findIndex(t=>t.line_no===e)&&(this._breakpoints.push(new an(e,void 0,this.vm)),!0)}remove_breakpoint(e){const t=this._breakpoints.findIndex(t=>t.line_no===e);return-1!=t&&(this._breakpoints.splice(t,1)[0].deactivate(),!0)}toggle_breakpoint(e){const t=this._breakpoints.findIndex(t=>t.line_no===e);-1==t?this._breakpoints.push(new an(e,void 0,this.vm)):this._breakpoints.splice(t,1)[0].deactivate()}clear_breakpoints(){for(const e of this._breakpoints.splice(0,1/0))e.deactivate()}activate_breakpoints(){for(const e of this._breakpoints)e.activate()}deactivate_breakpoints(){for(const e of this._breakpoints)e.deactivate()}}class an{constructor(e,t,i){this.line_no=e,this.ptr=t,this.vm=i,null==t?this.activate():this.vm.set_breakpoint(t)}get active(){return null!=this.ptr}activate(){this.ptr=this.line_no_to_inst_pointer(this.line_no),this.ptr&&this.vm.set_breakpoint(this.ptr)}deactivate(){this.ptr&&this.vm.remove_breakpoint(this.ptr)}line_no_to_inst_pointer(e){var t,i;if(!this.vm.halted)for(let s=0;s<this.vm.object_code.length;s++){const o=this.vm.object_code[s];if(o.type===uo.Instructions)for(let n=0;n<o.instructions.length;n++){if((null===(i=null===(t=o.instructions[n].asm)||void 0===t?void 0:t.mnemonic)||void 0===i?void 0:i.line_no)===e)return new Lo(s,n,this.vm.object_code)}}}}var dn;!function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running",e[e.Paused=2]="Paused"}(dn||(dn={}));class cn{constructor(e){this.episode=e,this.floor_handlers=new Map,this.area_variants=new Map,this.current_area_variant=Object(le.e)(void 0),this.npcs=Object(le.c)(),this.objects=Object(le.c)()}}class ln{constructor(e,t){this.area_store=e,this.startup=!0,this._state=Object(le.e)(dn.Stopped),this.initial_area_id=0,this.npcs=[],this.objects=[],this._breakpoints=Object(le.c)(),this._pause_location=Object(le.e)(void 0),this._thread_ids=Object(le.c)(),this._active_thread_id=Object(le.e)(void 0),this._shown_thread_id=Object(le.e)(void 0),this._game_state=new cn(n.b.I),this.running=this._state.map(e=>e!==dn.Stopped),this.paused=this._state.map(e=>e===dn.Paused),this.breakpoints=this._breakpoints,this.pause_location=this._pause_location,this.thread_ids=this._thread_ids,this.active_thread_id=this._active_thread_id,this.shown_thread_id=this._shown_thread_id,this.execution_loop=()=>{var e,t;this.animation_frame=void 0,this.vm.vsync();let i;switch(this.vm.execute()){case Uo.Suspended:this._state.val=dn.Running,this.update_thread_info();break;case Uo.Paused:this._state.val=dn.Paused,i=null===(t=null===(e=this.vm.get_instruction_pointer())||void 0===e?void 0:e.source_location)||void 0===t?void 0:t.line_no,this.update_thread_info();break;case Uo.WaitingVsync:case Uo.WaitingInput:this._state.val=dn.Running,this.schedule_frame();break;case Uo.WaitingSelection:this.vm.list_select(0),this._state.val=dn.Running,this.schedule_frame();break;case Uo.Halted:this.stop()}this._pause_location.val=i,this.startup&&this._state.val===dn.Running&&(this.startup=!1,this.run_floor_handler(this._game_state.area_variants.get(this.initial_area_id)||this.area_store.get_variant(this._game_state.episode,this.initial_area_id,0)))},this.create_vm_io=()=>{function e(e,t){const i=[e];if(t){const{instruction:e,source_location:s}=t;i.push(" ["+e.opcode.mnemonic),s&&i.push(` ${s.line_no}:${s.col}`),i.push("]")}return i.join("")}return{map_designate:(e,t)=>{this._game_state.area_variants.set(e,this.area_store.get_variant(this._game_state.episode,e,t))},set_floor_handler:(e,t)=>{this._game_state.floor_handlers.set(e,t)},window_msg:e=>{this.logger.info(`window_msg "${e}"`)},message:e=>{this.logger.info(`message "${e}"`)},add_msg:e=>{this.logger.info(`add_msg "${e}"`)},winend:()=>{},p_dead_v3:()=>!1,mesend:()=>{},list:e=>{this.logger.info(`list "[${e}]"`)},warning:(t,i)=>{this.logger.warn(e(t,i))},error:(t,i)=>{this.logger.error(e(t.message,i))}}},this.logger=t.get_logger("quest_editor/QuestRunner"),this.logger.severity=$o.b.Trace,this.vm=new Vo(this.create_vm_io()),this.debugger=new rn(this.vm)}get game_state(){return this._game_state}run(e){this.stop(),this.logger.info("Starting debugger."),this.startup=!0,this.initial_area_id=0,this.npcs.splice(0,this.npcs.length,...e.npcs.val),this.objects.splice(0,this.objects.length,...e.objects.val),this._game_state=new cn(e.episode),this.vm.load_object_code(e.object_code.map(bo),this.game_state.episode),this.vm.start_thread(0),this.debugger.activate_breakpoints(),this._state.val=dn.Running,this.schedule_frame()}resume(){this.debugger.resume(),this.schedule_frame()}step_over(){this.debugger.step_over(),this.schedule_frame()}step_into(){this.debugger.step_in(),this.schedule_frame()}step_out(){this.debugger.step_out(),this.schedule_frame()}stop(){this.running.val&&(this.logger.info("Stopping debugger."),null!=this.animation_frame&&(cancelAnimationFrame(this.animation_frame),this.animation_frame=void 0),this.vm.halt(),this.debugger.deactivate_breakpoints(),this._state.val=dn.Stopped,this._pause_location.val=void 0,this._active_thread_id.val=void 0,this._shown_thread_id.val=void 0,this._thread_ids.clear(),this.npcs.splice(0,this.npcs.length),this.objects.splice(0,this.objects.length),this._game_state=new cn(n.b.I))}set_breakpoint(e){const t=this.debugger.set_breakpoint(e);return this._breakpoints.splice(0,1/0,...this.debugger.breakpoints),t}remove_breakpoint(e){const t=this.debugger.remove_breakpoint(e);return this._breakpoints.splice(0,1/0,...this.debugger.breakpoints),t}toggle_breakpoint(e){this.debugger.toggle_breakpoint(e),this._breakpoints.splice(0,1/0,...this.debugger.breakpoints)}clear_breakpoints(){this.debugger.clear_breakpoints(),this._breakpoints.splice(0,1/0,...this.debugger.breakpoints)}show_thread_location(e){const t=this.vm.get_instruction_pointer(e);t&&t.source_location?(this._pause_location.val=t.source_location.line_no,this._shown_thread_id.val=e):this.logger.warn(`Failed to select thread #${e} because its execution location is unknown.`)}schedule_frame(){null==this.animation_frame&&(this.animation_frame=requestAnimationFrame(this.execution_loop))}update_thread_info(){const e=this.vm.get_current_thread_id();this._active_thread_id.val=e,this._shown_thread_id.val=e,this._thread_ids.splice(0,this._thread_ids.length.val,...this.vm.get_thread_ids())}run_floor_handler(e){const t=e.area.id;this._game_state.current_area_variant.val=e,this._game_state.objects.push(...this.objects.filter(e=>e.area_id===t));const i=this._game_state.floor_handlers.get(t);null==i?this.logger.debug(`No floor handler registered for floor ${t}.`):(this.vm.start_thread(i),this.schedule_frame())}}var un=i(59),_n=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const vn=P.a.get("quest_editor/gui/QuestEditorStore");class hn extends un.a{constructor(e,t,i){super(),this.area_store=t,this._current_quest=Object(le.e)(void 0),this._current_area=Object(le.e)(void 0),this._selected_wave=Object(le.e)(void 0),this._selected_entity=Object(le.e)(void 0),this.debug=Object(le.e)(!1),this.undo=new nn,this.current_quest=this._current_quest,this.current_area=this._current_area,this.selected_wave=this._selected_wave,this.selected_entity=this._selected_entity,this.set_current_area=e=>{var t,i;e&&e.id!==(null===(i=null===(t=this.selected_wave.val)||void 0===t?void 0:t.area_id)||void 0===i?void 0:i.val)&&this.set_selected_wave(void 0),this._selected_entity.val=void 0,this._current_area.val=e},this.set_selected_wave=e=>{if(e){const t=this.selected_entity.val;t&&t instanceof Re&&t.wave.val!==e&&this.set_selected_entity(void 0)}this._selected_wave.val=e},this.set_selected_entity=e=>{e&&this.current_quest.val&&(this._current_area.val=this.area_store.get_area(this.current_quest.val.episode,e.area_id)),this._selected_entity.val=e},this.set_section_on_quest_entity=(e,t)=>{const i=t.find(t=>t.id===e.section_id.val);i?e.set_section(i):vn.warn(`Section ${e.section_id.val} not found.`)},this.quest_runner=new ln(t,i),this.disposables(e.tool.observe(({value:e})=>{e===Ft.b.QuestEditor&&this.undo.make_current()},{call_now:!0}),this.current_quest.flat_map(e=>e?e.npcs:Object(le.e)([])).observe(({value:e})=>{const t=this.selected_entity.val;t instanceof Re&&!e.includes(t)&&this.set_selected_entity(void 0)}),this.current_quest.flat_map(e=>e?e.objects:Object(le.e)([])).observe(({value:e})=>{const t=this.selected_entity.val;t instanceof Je&&!e.includes(t)&&this.set_selected_entity(void 0)}),Object(_.g)(window,"beforeunload",e=>{this.quest_runner.stop(),this.undo.can_undo.val&&(e.preventDefault(),e.returnValue=!1)}))}dispose(){this.quest_runner.stop(),super.dispose()}set_current_quest(e){return _n(this,void 0,void 0,(function*(){if(this.undo.reset(),this.quest_runner.stop(),this._current_area.val=void 0,this._selected_entity.val=void 0,this._current_quest.val=e,e){this._current_area.val=this.area_store.get_area(e.episode,0);for(const t of e.area_variants.val){const i=yield this.area_store.get_area_sections(e.episode,t);t.set_sections(i);for(const s of e.objects.val.filter(e=>e.area_id===t.area.id))try{this.set_section_on_quest_entity(s,i)}catch(e){vn.error(e)}for(const s of e.npcs.val.filter(e=>e.area_id===t.area.id))try{this.set_section_on_quest_entity(s,i)}catch(e){vn.error(e)}}}}))}}var pn,bn,gn=i(792),fn=i.n(gn);!function(e){e[e.NewAssembly=0]="NewAssembly",e[e.AssemblyChange=1]="AssemblyChange",e[e.SignatureHelp=2]="SignatureHelp",e[e.Definition=3]="Definition",e[e.SettingsChange=4]="SettingsChange"}(pn||(pn={})),function(e){e[e.NewObjectCode=0]="NewObjectCode",e[e.SignatureHelp=1]="SignatureHelp",e[e.Definition=2]="Definition"}(bn||(bn={}));const mn=new DataView(new ArrayBuffer(4));const kn=P.a.get("quest_editor/scripting/disassembly");function wn(e,t){const i=[],s=Math.min(e.length,t.length);for(let o=0;o<s;o++)i.push(Object.assign(Object.assign({},t[o]),{type:e[o].type}));const o=e[e.length-1];if(o&&(o.type.kind===Yt.ILabelVar||o.type.kind===Yt.RegRefVar)){const e=t.length;for(let s=i.length;s<e;s++)i.push(Object.assign(Object.assign({},t[s]),{type:o.type}))}return i}function In(e,t,i){const s=[];for(let n=0;n<e.length;n++){const r=e[n].type,a=t[n];if(null!=a)if(a.type.kind===Yt.RegTupRef)s.push("r"+a.value);else switch(r.kind){case Yt.Float:i?s.push((o=a.value,mn.setInt32(0,o),mn.getFloat32(0)).toString()):s.push(a.value.toString());break;case Yt.ILabelVar:for(;n<t.length;n++)s.push(t[n].value.toString());break;case Yt.RegRefVar:for(;n<t.length;n++)s.push("r"+t[n].value);break;case Yt.RegRef:case Yt.RegTupRef:s.push("r"+a.value);break;case Yt.String:s.push(JSON.stringify(a.value));break;default:s.push(a.value.toString())}else s.push("")}var o;return s}var yn=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))},Rn=mt.languages.CompletionItemKind;const Sn=pi.filter(e=>null!=e).map(e=>({label:e.mnemonic,kind:Rn.Function,insertText:e.mnemonic})),jn=[{label:".code",kind:Rn.Keyword,insertText:"code"},{label:".data",kind:Rn.Keyword,insertText:"data"},{label:".string",kind:Rn.Keyword,insertText:"string"}];class Tn{constructor(e,t,i){this.can_undo=Object(le.e)(!1),this.can_redo=Object(le.e)(!1),this.action=Object(le.e)({description:e,undo:t,redo:i}),this.first_undo=Object(le.d)((e,t)=>t?e:void 0,this.action,this.can_undo),this.first_redo=Object(le.d)((e,t)=>t?e:void 0,this.action,this.can_redo)}make_current(){sn.current.val=this}undo(){return!!this.can_undo&&(this.action.val.undo(),!0)}redo(){return!!this.can_redo&&(this.action.val.redo(),!0)}reset(){this.can_undo.val=!1,this.can_redo.val=!1}}var Cn=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const Fn=new class{constructor(){this._issues=Object(le.e)({warnings:[],errors:[]}),this.issues=this._issues,this.worker=new fn.a,this.promises=new Map,this.message_id=0,this.process_worker_message=e=>{const t=e.data;switch(t.type){case bn.NewObjectCode:this.quest&&(this.quest.object_code.splice(0,this.quest.object_code.length,...t.object_code),this.quest.set_map_designations(t.map_designations),this._issues.val={warnings:t.warnings,errors:t.errors});break;case bn.SignatureHelp:{const e=this.promises.get(t.id);if(e)if(this.promises.delete(t.id),t.opcode){let i=t.opcode.mnemonic+" ";const s=[];let o=!0;for(const e of t.opcode.params){let t;switch(o?o=!1:i+=", ",e.type.kind){case Yt.ILabel:t="FuncLabel";break;case Yt.DLabel:t="DataLabel";break;case Yt.SLabel:t="StringLabel";break;case Yt.ILabelVar:t="...FuncLabel";break;case Yt.RegRef:case Yt.RegTupRef:t="Register";break;case Yt.RegRefVar:t="...Register";break;default:t=Yt[e.type.kind]}s.push({label:[i.length,i.length+t.length],documentation:e.doc}),i+=t}const n={signatures:[{label:i,documentation:t.opcode.doc,parameters:s}],activeSignature:0,activeParameter:t.active_param};e.resolve(n)}else e.resolve(void 0)}break;case bn.Definition:{const e=this.promises.get(t.id);if(e){this.promises.delete(t.id);const i=[];null!=t.line_no&&i.push({uri:e.uri,range:{startLineNumber:t.line_no,startColumn:t.col,endLineNumber:t.line_no,endColumn:t.col+t.len}}),e.resolve(i)}}}},this.worker.onmessage=this.process_worker_message}disassemble(e,t){this.quest=e;const i=function(e,t=!1){kn.trace("disassemble start");const i=[],s=[];let o=void 0;for(const r of e){let e;switch(r.type){case uo.Instructions:e=".code";break;case uo.Data:e=".data";break;case uo.String:e=".string"}o!==r.type&&(o=r.type,i.length&&i.push(""),i.push(e,""));for(const e of r.labels)i.push(e+":");if(r.type===uo.Data){const e=new Uint8Array(r.data);let t="    ";for(let s=0;s<e.length;s++)t+="0x"+Object(B.k)(e[s],2),s%16==15?(i.push(t),t="    "):s<e.length-1&&(t+=" ");t.length>4&&i.push(t)}else if(r.type===uo.String)i.push("    "+(n=r.value,JSON.stringify(n.replace(/<cr>/g,"\n"))));else{let e=!1;for(const o of r.instructions)if(o.opcode.code===yi.code?e=!0:o.opcode.code===Ri.code&&(e=!1),t||e||o.opcode.stack!==vi.Push){let e=[];o.opcode.stack===vi.Pop?t||(e=In(o.opcode.params,s.splice(Math.max(0,s.length-o.opcode.params.length),o.opcode.params.length),!0)):e=In(o.opcode.params,wn(o.opcode.params,o.args),!1),i.push("    "+o.opcode.mnemonic+(e.length?" "+e.join(", "):""))}else s.push(...wn(o.opcode.params,o.args))}}var n;return i.length&&i.push(""),kn.trace("disassemble end, line count: "+i.length),i}(e.object_code,t),s={type:pn.NewAssembly,assembly:i};return this.worker.postMessage(s),i}update_assembly(e){const t={type:pn.AssemblyChange,changes:e.map(e=>({start_line_no:e.range.startLineNumber,start_col:e.range.startColumn,end_line_no:e.range.endLineNumber,end_col:e.range.endColumn,new_text:e.text}))};this.worker.postMessage(t)}provide_completion_items(e){return{suggestions:/^\s*([a-z][a-z0-9_=<>!]*)?$/.test(e)?Sn:/^\s*\.[a-z]+$/.test(e)?jn:[],incomplete:!1}}provide_signature_help(e,t,i){return yn(this,void 0,void 0,(function*(){return yield this.send_and_await_response("Signature help provision",e,e=>({type:pn.SignatureHelp,id:e,line_no:t,col:i}))}))}provide_definition(e,t,i){return yn(this,void 0,void 0,(function*(){return yield this.send_and_await_response("Definition provision",e,e=>({type:pn.Definition,id:e,line_no:t,col:i}))}))}update_settings(e){const t={type:pn.SettingsChange,settings:e};this.worker.postMessage(t)}dispose(){this.worker.terminate()}send_and_await_response(e,t,i){return yn(this,void 0,void 0,(function*(){const s=this.message_id++;return new Promise((o,n)=>{this.promises.set(s,{uri:t,resolve:o,reject:n});const r=i(s);this.worker.postMessage(r),setTimeout(()=>{this.promises.delete(s)&&n(new Error(e+" timed out."))},5e3)})}))}};mt.languages.register({id:"psoasm"}),mt.languages.setMonarchTokensProvider("psoasm",{defaultToken:"invalid",tokenizer:{root:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/r\d+/,"predefined"],[/[^\s]+:/,"tag"],[/0x[0-9a-fA-F]+/,"number.hex"],[/-?\d+(\.\d+)?(e-?\d+)?/,"number.float"],[/-?[0-9]+/,"number"],[/\.[^\s]+/,"keyword"],[/[a-z][a-z0-9_=<>!]*/,"identifier"],[/[ \t\r\n]+/,"white"],[/\/\/.*$/,"comment"],[/,/,"delimiter"]],string:[[/[^\\"]+/,"string"],[/\\(?:[n\\"])/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}),mt.languages.registerCompletionItemProvider("psoasm",{provideCompletionItems(e,t){const i=e.getValueInRange({startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:1,endColumn:t.column});return Fn.provide_completion_items(i)}}),mt.languages.registerSignatureHelpProvider("psoasm",{signatureHelpTriggerCharacters:[" ",","],signatureHelpRetriggerCharacters:[", "],provideSignatureHelp(e,t){return Cn(this,void 0,void 0,(function*(){const i=yield Fn.provide_signature_help(e.uri,t.lineNumber,t.column);return i&&{value:i,dispose(){}}}))}}),mt.languages.setLanguageConfiguration("psoasm",{indentationRules:{increaseIndentPattern:/^\s*\d+:/,decreaseIndentPattern:/^\s*(\d+|\.)/},autoClosingPairs:[{open:'"',close:'"'}],surroundingPairs:[{open:'"',close:'"'}],comments:{lineComment:"//"}}),mt.languages.registerDefinitionProvider("psoasm",{provideDefinition:(e,t)=>Fn.provide_definition(e.uri,t.lineNumber,t.column)}),mt.languages.registerHoverProvider("psoasm",{provideHover(e,t){return Cn(this,void 0,void 0,(function*(){const i=yield Fn.provide_signature_help(e.uri,t.lineNumber,t.column);if(!i)return;const s=i.signatures[i.activeSignature],o=s.parameters[i.activeParameter];if(!s||!s.documentation)return;const n=[];o&&Array.isArray(o.label)?n.push({value:s.label.slice(0,o.label[0])+"__"+s.label.slice(o.label[0],o.label[1])+"__"+s.label.slice(o.label[1])}):n.push({value:s.label});let r="";return o&&o.documentation&&(r="string"==typeof o.documentation?o.documentation:o.documentation.value,r+="\n\n"),r+="string"==typeof s.documentation?s.documentation:s.documentation.value,n.push({value:r}),{contents:n}}))}});class xn extends un.a{constructor(e){super(),this.quest_editor_store=e,this.model_disposer=this.disposable(new a.a),this._model=Object(le.e)(void 0),this._did_undo=Object(le.a)(),this._did_redo=Object(le.a)(),this._inline_args_mode=Object(le.e)(!0),this.model=this._model,this.did_undo=this._did_undo,this.did_redo=this._did_redo,this.undo=new Tn("Text edits",()=>this._did_undo.emit({value:"asm undo"}),()=>this._did_redo.emit({value:"asm redo"})),this.inline_args_mode=this._inline_args_mode,this.has_issues=Fn.issues.map(e=>e.warnings.length+e.errors.length>0),this.set_inline_args_mode=e=>{this.has_issues.val||(this._inline_args_mode.val=e,Fn.update_settings({manual_stack:!this.inline_args_mode.val}),this.update_model())},this.quest_changed=()=>{this.update_model()},this.breakpoints=e.quest_runner.breakpoints,this.pause_location=e.quest_runner.pause_location,this.disposables(e.current_quest.observe(this.quest_changed,{call_now:!0}),Fn.issues.observe(({value:e})=>this.update_model_markers(e),{call_now:!0}),Object(_.g)(window,"beforeunload",e=>{this.undo.can_undo.val&&(e.preventDefault(),e.returnValue=!1)}))}setup_editor_model_features(e){const t=e.getAlternativeVersionId();let i=t,s=t;this.model_disposer.add(e.onDidChangeContent(o=>{const n=e.getAlternativeVersionId();n<i?(this.undo.can_redo.val=!0,n===t&&(this.undo.can_undo.val=!1)):(n<=s?n===s&&(this.undo.can_redo.val=!1):(this.undo.can_redo.val=!1,i>s&&(s=i)),this.undo.can_undo.val=!0),i=n,Fn.update_assembly(o.changes),this.update_breakpoints(o.changes)}))}update_model_markers({warnings:e,errors:t}){const i=this.model.val;i&&mt.editor.setModelMarkers(i,"psoasm",e.map(e=>({severity:mt.MarkerSeverity.Hint,message:e.message,startLineNumber:e.line_no,endLineNumber:e.line_no,startColumn:e.col,endColumn:e.col+e.length,tags:[mt.MarkerTag.Unnecessary]})).concat(t.map(e=>({severity:mt.MarkerSeverity.Error,message:e.message,startLineNumber:e.line_no,endLineNumber:e.line_no,startColumn:e.col,endColumn:e.col+e.length}))))}update_model(){this.undo.reset(),this.model_disposer.dispose_all();const e=this.quest_editor_store.current_quest.val;if(e){const t=!this.inline_args_mode.val,i=Fn.disassemble(e,t),s=this.model_disposer.add(mt.editor.createModel(i.join("\n"),"psoasm"));this.setup_editor_model_features(s),this._model.val=s}else this._model.val=void 0}update_breakpoints(e){for(const t of e){const e=[];if(""===t.text){const i=t.range.endLineNumber-t.range.startLineNumber;if(i>0){for(let s=t.range.startLineNumber+1;s<=t.range.endLineNumber;s++){const t=Math.max(s-i,1);this.quest_editor_store.quest_runner.remove_breakpoint(s)&&e.push(t)}for(const s of this.breakpoints.val)s.line_no>t.range.endLineNumber&&(this.quest_editor_store.quest_runner.remove_breakpoint(s.line_no),e.push(s.line_no-i))}}else{const i=t.text.split("\n").length-1;if(i>0)for(const s of this.breakpoints.val)s.line_no>t.range.endLineNumber&&(this.quest_editor_store.quest_runner.remove_breakpoint(s.line_no),e.push(s.line_no+i))}for(const t of e)this.quest_editor_store.quest_runner.set_breakpoint(t)}}}class Dn{constructor(e,t,i,s){if(!Number.isInteger(e)||e<0)throw new Error(`Expected id to be a non-negative integer, got ${e}.`);if(!t)throw new Error("name is required.");if(!s)throw new Error("area_variants is required.");this.id=e,this.name=t,this.order=i,this.area_variants=s}}class On{constructor(e,t){if(this._sections=Object(le.c)(),this.sections=this._sections,!Number.isInteger(e)||e<0)throw new Error(`Expected id to be a non-negative integer, got ${e}.`);this.id=e,this.area=t}set_sections(e){return this._sections.val=e,this}}function Ln(e){return Bn[e]}const Bn=[];function Pn(e,t,i,s){const o={id:e,name:t,order:i,area_variants:[]};for(let e=0;e<s;e++)o.area_variants.push(Object.freeze({id:e,area:o}));return Object.freeze(o)}let Wn=0;Bn[n.b.I]=[Pn(0,"Pioneer II",Wn++,1),Pn(1,"Forest 1",Wn++,1),Pn(2,"Forest 2",Wn++,1),Pn(11,"Under the Dome",Wn++,1),Pn(3,"Cave 1",Wn++,6),Pn(4,"Cave 2",Wn++,5),Pn(5,"Cave 3",Wn++,6),Pn(12,"Underground Channel",Wn++,1),Pn(6,"Mine 1",Wn++,6),Pn(7,"Mine 2",Wn++,6),Pn(13,"Monitor Room",Wn++,1),Pn(8,"Ruins 1",Wn++,5),Pn(9,"Ruins 2",Wn++,5),Pn(10,"Ruins 3",Wn++,5),Pn(14,"Dark Falz",Wn++,1)],Wn=0,Bn[n.b.II]=[Pn(0,"Lab",Wn++,1),Pn(1,"VR Temple Alpha",Wn++,3),Pn(2,"VR Temple Beta",Wn++,3),Pn(14,"VR Temple Final",Wn++,1),Pn(3,"VR Spaceship Alpha",Wn++,3),Pn(4,"VR Spaceship Beta",Wn++,3),Pn(15,"VR Spaceship Final",Wn++,1),Pn(5,"Central Control Area",Wn++,1),Pn(6,"Jungle Area East",Wn++,1),Pn(7,"Jungle Area North",Wn++,1),Pn(8,"Mountain Area",Wn++,3),Pn(9,"Seaside Area",Wn++,1),Pn(12,"Cliffs of Gal Da Val",Wn++,1),Pn(10,"Seabed Upper Levels",Wn++,3),Pn(11,"Seabed Lower Levels",Wn++,3),Pn(13,"Test Subject Disposal Area",Wn++,1),Pn(16,"Seaside Area at Night",Wn++,2),Pn(17,"Control Tower",Wn++,5)],Wn=0,Bn[n.b.IV]=[Pn(0,"Pioneer II (Ep. IV)",Wn++,1),Pn(1,"Crater Route 1",Wn++,1),Pn(2,"Crater Route 2",Wn++,1),Pn(3,"Crater Route 3",Wn++,1),Pn(4,"Crater Route 4",Wn++,1),Pn(5,"Crater Interior",Wn++,1),Pn(6,"Subterranean Desert 1",Wn++,3),Pn(7,"Subterranean Desert 2",Wn++,3),Pn(8,"Subterranean Desert 3",Wn++,3),Pn(9,"Meteor Impact Site",Wn++,1)],Object.freeze(Bn);class En extends un.a{constructor(e){super(),this.area_asset_loader=e,this.areas=[],this.get_areas_for_episode=e=>this.areas[e],this.get_area=(e,t)=>{const i=this.areas[e].find(e=>e.id===t);if(!i)throw new Error(`Area id ${t} for episode ${e} is invalid.`);return i},this.get_variant=(e,t,i)=>{const s=this.get_area(e,t).area_variants[i];if(!s)throw new Error(`Area variant id ${i} for area ${t} of episode ${n.b[e]} is invalid.`);return s},this.get_area_sections=(e,t)=>this.area_asset_loader.load_sections(e,t);for(const e of n.a)this.areas[e]=Ln(e).map(e=>{const t=new Dn(e.id,e.name,e.order,[]);for(const i of e.area_variants)t.area_variants.push(new On(i.id,t));return t})}}function qn(e,t){e.seek_end(32);const i=e.u32(),s=e.u32();e.seek(8);const o=e.u32();e.seek_start(i);return{data_offset:o,index:t?function(e,t){const i=e.u16_array(t),s=[];let o=0;for(const t of i){o+=4*t,e.seek_start(o-4);const i=e.u32(),n=e.u32();s.push({offset:n,size:i})}return s}(e,s):[]}}var Mn=i(513);function Un(e,t,i){const s=[];for(let o=0;o<i;o++){e.seek_start(t+16*o);let i=e.u32();e.seek(8);4&e.u32()&&(i=e.seek_start(i).u32()),e.seek_start(i),s.push(...Object(Mn.d)(e))}return s}class Vn{constructor(){this.map=new Map}set(e,t){this.map.set(e,t)}get_or_set(e,t){let i=this.map.get(e);return void 0===i&&(i=t(),this.map.set(e,i)),i}dispose(){for(const e of this.values())e.dispose();this.map.clear()}values(){return this.map.values()}}var Nn=i(692),zn=i(628);class An{constructor(e,t,i,s){if(!Number.isInteger(e)||e<-1)throw new Error(`Expected id to be an integer greater than or equal to -1, got ${e}.`);if(!t)throw new Error("position is required.");if(!i)throw new Error("rotation is required.");if(!s)throw new Error("area_variant is required.");this.id=e,this.position=t,this.rotation=i,this.inverse_rotation=ge((new I.Quaternion).setFromEuler(i).inverse()),this.area_variant=s}}const $n=[new I.MeshBasicMaterial({color:8437968,transparent:!0,opacity:.25}),new I.MeshLambertMaterial({color:4214864,side:I.DoubleSide}),new I.MeshLambertMaterial({color:3170368,side:I.DoubleSide}),new I.MeshLambertMaterial({color:4202576,side:I.DoubleSide})],Gn=[new I.MeshBasicMaterial({color:9490656,wireframe:!0,transparent:!0,opacity:.3}),new I.MeshBasicMaterial({color:5267552,wireframe:!0}),new I.MeshBasicMaterial({color:4214864,wireframe:!0}),new I.MeshBasicMaterial({color:5255264,wireframe:!0})];function Hn(e,t){const i=[],s=new I.Group;let o=0;for(const n of e.sections){const e=new Nn.a;for(const t of n.objects)Object(zn.b)(t,e);const r=new I.Mesh(e.build(),new I.MeshBasicMaterial({color:(new I.Color).setHSL(o++%7/7,1,.5),transparent:!0,opacity:.25,side:I.DoubleSide}));if(s.add(r),r.position.set(n.position.x,n.position.y,n.position.z),r.rotation.set(n.rotation.x,n.rotation.y,n.rotation.z),r.updateMatrixWorld(),n.id>=0){const e=new An(n.id,Object(fe.a)(n.position),be(n.rotation.x,n.rotation.y,n.rotation.z),t);i.push(e),r.userData.section=e}}return[i,s]}class Qn{constructor(e){this.http_client=e,this.disposer=new a.a,this.render_object_cache=this.disposer.add(new Vn),this.collision_object_cache=this.disposer.add(new Vn),this.area_sections_cache=this.disposer.add(new Vn)}dispose(){this.disposer.dispose()}load_sections(e,t){const i=`${e}-${t.area.id}-${t.id}`;return this.area_sections_cache.get_or_set(i,()=>this.render_object_cache.get_or_set(i,()=>this.load_render_object(e,t)).then(e=>Hn(e,t)[0]))}load_render_geometry(e,t){const i=`${e}-${t.area.id}-${t.id}`;return this.render_object_cache.get_or_set(i,()=>this.load_render_object(e,t)).then(e=>Hn(e,t)[1])}load_collision_geometry(e,t){const i=`${e}-${t.area.id}-${t.id}`;return this.collision_object_cache.get_or_set(i,()=>this.get_area_asset(e,t,"collision").then(e=>function(e){const{data_offset:t}=qn(e,!1);e.seek_start(t);const i=e.u32();e.seek_start(i);const s={meshes:[]};for(;e.bytes_left;){const t=e.position,i=e.u32();if(0===i)break;const o={vertices:[],triangles:[]};s.meshes.push(o),e.seek_start(i);const n=e.u32(),r=e.u32(),a=e.u32(),d=e.u32();e.seek_start(r);for(let t=0;t<n;t++)o.vertices.push(e.vec3_f32());e.seek_start(d);for(let t=0;t<a;t++){const t=e.u16(),i=e.u16(),s=e.u16(),n=e.u16(),r=e.vec3_f32();e.seek(16),o.triangles.push({indices:[t,i,s],flags:n,normal:r})}e.seek_start(t+24)}return s}(new W.a(e,D.a.Little)))).then(e=>function(e){const t=new I.Group;for(const i of e.meshes){const e=new I.Geometry;for(const{x:t,y:s,z:o}of i.vertices)e.vertices.push(new I.Vector3(t,s,o));for(const{indices:t,flags:s,normal:o}of i.triangles){const i=16&s,n=1&s,r=64&s?3:i?2:n?1:0;0!==r&&e.faces.push(new I.Face3(t[0],t[1],t[2],new I.Vector3(o.x,o.y,o.z),void 0,r))}if(e.faces.length){e.computeBoundingBox(),e.computeBoundingSphere();const i=new I.Mesh(e,$n);i.renderOrder=1,t.add(i);const s=new I.Mesh(e,Gn);s.renderOrder=2,t.add(s)}}return t}(e))}load_render_object(e,t){return this.get_area_asset(e,t,"render").then(e=>function(e){const t=[];e.seek_end(16);const{data_offset:i}=qn(e,!1);e.seek_start(i),e.seek(8);const s=e.u32();e.seek(4);const o=e.u32();for(let i=0;i<s;i++){e.seek_start(o+52*i);const s=e.i32(),n=e.vec3_f32(),r={x:Object($.a)(e.u32()),y:Object($.a)(e.u32()),z:Object($.a)(e.u32())};e.seek(4);const a=e.u32();e.seek(4);const d=e.u32(),c=Un(e,a,d);t.push({id:s,position:n,rotation:r,objects:c})}return{sections:t}}(new W.a(e,D.a.Little)))}get_area_asset(e,t,i){const s=function(e,t){let i=t.area.id,s=t.id;16===i&&1===s&&(i=17,s=1);const o=Yn[e-1];if(0<=i&&i<o.length){const[t,n]=o[i];if(0<=s&&s<n){let e;return 1===n?e="":(e=String(s),e=e.padStart(2,"0")),`/maps/map_${t}${e}`}throw new Error(`Unknown variant ${s} of area ${i} in episode ${e}.`)}throw new Error(`Unknown episode ${e} area ${i}.`)}(e,t),o="render"===i?"n.rel":"c.rel";return this.http_client.get(s+o).array_buffer()}}const Yn=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]];var Kn=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};function Jn(e){const t=[];return function(...i){const s=new Promise((e,s)=>t.push({args:i,resolve:e,reject:s}));return 1===t.length&&function(){Kn(this,void 0,void 0,(function*(){for(;t.length;){const{args:i,resolve:s,reject:o}=t[0];try{s(yield e(...i))}catch(e){o(e)}finally{t.shift()}}}))}(),s}}var Zn=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const Xn=new I.HemisphereLight(16777215,5263440,1.2),er=new I.Scene,tr=new I.PerspectiveCamera(30,1,10,2e3),ir=new I.Vector3(1,1,2).normalize(),sr=1.3/Math.tan(tr.fov/180*Math.PI/2);class or{constructor(e,t){this.entity_asset_loader=e,this.cache=new Vn,this.render_to_image=Jn(e=>this.entity_asset_loader.load_geometry(e).then(t=>this.entity_asset_loader.load_textures(e).then(i=>{er.remove(...er.children),er.add(Xn);const s=de(e,t,[],new I.MeshBasicMaterial({color:2500134,side:I.DoubleSide}));er.add(s);const o=s.geometry.boundingSphere;tr.position.copy(ir),tr.position.multiplyScalar(o.radius*sr),tr.lookAt(o.center),this.renderer.render(er,tr),er.remove(s);const n=de(e,t,i);return er.add(n),this.renderer.autoClearColor=!1,this.renderer.render(er,tr),this.renderer.autoClearColor=!0,this.renderer.domElement.toDataURL()}))),this.renderer=t(),this.renderer.setSize(100,100)}dispose(){this.renderer.dispose(),this.cache.dispose()}render(e){return Zn(this,void 0,void 0,(function*(){return this.cache.get_or_set(e,()=>this.render_to_image(e))}))}}var nr=i(540),rr=i(579),ar=i(135);const dr=P.a.get("quest_editor/loading/EntityAssetLoader"),cr=new I.CylinderBufferGeometry(3,3,20);cr.translate(0,10,0),cr.computeBoundingBox(),cr.computeBoundingSphere();const lr=ar.a.resolve(cr),ur=[],_r=ar.a.resolve(ur);class vr{constructor(e){this.http_client=e,this.disposer=new a.a,this.geom_cache=this.disposer.add(new Vn),this.tex_cache=this.disposer.add(new Vn),this.warm_up_caches()}dispose(){this.disposer.dispose()}load_geometry(e,t){return this.geom_cache.get_or_set(`${e}-${null!=t?t:""}`,()=>ar.a.all(function(e){switch(e){case k.Teleporter:case k.Warp:case k.BossTeleporter:case k.QuestWarp:case k.Epilogue:case k.MainRagolTeleporter:case k.PrincipalWarp:case k.TeleporterDoor:case k.EasterEgg:return["","-2"];case k.ValentinesHeart:return["","-2","-3"];case k.ChristmasTree:return["","-2","-3","-4"];case k.TwentyFirstCentury:return["","-2"];case k.WelcomeBoard:return[""];case k.ForestDoor:return["","-2","-3","-4","-5"];case k.ForestSwitch:return["","-2","-3"];case k.LaserFence:case k.LaserSquareFence:return["","-2"];case k.ForestLaserFenceSwitch:return["","-2","-3"];case k.Probe:return["-0"];case k.RandomTypeBox1:return["-2"];case k.BlackSlidingDoor:case k.EnergyBarrier:case k.SwitchNoneDoor:return["","-2"];case k.EnemyBoxGrey:return["-2"];case k.FixedTypeBox:case k.EnemyBoxBrown:return["-3"];case k.LaserFenceEx:case k.LaserSquareFenceEx:return["","-2"];case k.CavesSmashingPillar:return["","-3"];case k.RobotRechargeStation:return["","-2"];case k.RuinsTeleporter:return["","-2","-3","-4"];case k.RuinsWarpSiteToSite:case k.RuinsSwitch:return["","-2"];case k.RuinsPillarTrap:return["","-2","-3","-4"];case k.RuinsCrystal:return["","-2","-3"];case k.FloatingRocks:return["-0"];case k.ItemBoxCca:return["","-3"];case k.TeleporterEp2:case k.CcaDoor:return["","-2"];case k.SpecialBoxCca:return["","-4"];case k.BigCcaDoor:return["","-2","-3","-4"];case k.BigCcaDoorSwitch:case k.LaserDetect:case k.LabCeilingWarp:return["","-2"];case k.BigBrownRock:return["-0"];case k.BigBlackRocks:return[""];case k.BeeHive:return["","-0","-1"];default:return[void 0]}}(e).map(i=>this.load_data(e,hr.Geometry,i,t).then(({url:t,data:i})=>{const s=new W.a(i,D.a.Little),o=t.endsWith(".nj")?Object(Mn.b)(s):Object(Mn.c)(s);return o.success&&o.value.length?o.value:(dr.warn(`Couldn't parse ${t} for ${ie(e)}.`),[])}).catch(t=>(dr.warn(`Couldn't load geometry file for ${ie(e)}.`,t),[])))).then(e=>{const t=e.flat(),i=t[0];for(let e=1;e<t.length;e++)i.add_child(t[e]);return i?(i.evaluation_flags.break_child_trace=!1,Object(zn.a)(i)):cr}))}load_textures(e,t){let i;return i=e===k.FloatingRocks||e===k.BigBrownRock&&null==t?"-0":"",this.tex_cache.get_or_set(`${e}-${null!=t?t:""}`,()=>this.load_data(e,hr.Texture,i,t).then(({data:e})=>{const t=new W.a(e,D.a.Little),i=Object(nr.b)(t);return i.success?Object(rr.a)(i.value):[]}).catch(t=>(dr.warn(`Couldn't load texture file for ${ie(e)}.`,t),ur)))}load_data(e,t,i,s){const o=function e(t,i,s,o){let n;n=null!=s?s:null!=o?"-"+o:"";if(se(t))switch(t){case R.c.Dubswitch:return`/npcs/${R.c[t]}.${i===hr.Geometry?"xj":"xvm"}`;case R.c.Hildebear2:return e(R.c.Hildebear,i,s,o);case R.c.Hildeblue2:return e(R.c.Hildeblue,i,s,o);case R.c.RagRappy2:return e(R.c.RagRappy,i,s,o);case R.c.Monest2:return e(R.c.Monest,i,s,o);case R.c.Mothmant2:return e(R.c.Mothmant,i,s,o);case R.c.PoisonLily2:return e(R.c.PoisonLily,i,s,o);case R.c.NarLily2:return e(R.c.NarLily,i,s,o);case R.c.GrassAssassin2:return e(R.c.GrassAssassin,i,s,o);case R.c.Dimenian2:return e(R.c.Dimenian,i,s,o);case R.c.LaDimenian2:return e(R.c.LaDimenian,i,s,o);case R.c.SoDimenian2:return e(R.c.SoDimenian,i,s,o);case R.c.DarkBelra2:return e(R.c.DarkBelra,i,s,o);case R.c.SavageWolf2:return e(R.c.SavageWolf,i,s,o);case R.c.BarbarousWolf2:return e(R.c.BarbarousWolf,i,s,o);case R.c.PanArms2:return e(R.c.PanArms,i,s,o);case R.c.Dubchic2:return e(R.c.Dubchic,i,s,o);case R.c.Gilchic2:return e(R.c.Gilchic,i,s,o);case R.c.Garanz2:return e(R.c.Garanz,i,s,o);case R.c.Dubswitch2:return e(R.c.Dubswitch,i,s,o);case R.c.Delsaber2:return e(R.c.Delsaber,i,s,o);case R.c.ChaosSorcerer2:return e(R.c.ChaosSorcerer,i,s,o);default:return`/npcs/${R.c[t]}${n}.${i===hr.Geometry?"nj":"xvm"}`}else{if(i!==hr.Geometry)return`/objects/${T(t).type_id}${n}.xvm`;switch(t){case k.EasterEgg:case k.ChristmasTree:case k.ChristmasWreath:case k.TwentyFirstCentury:case k.Sonic:case k.WelcomeBoard:case k.FloatingJellyfish:case k.RuinsSeal:case k.Dolphin:case k.Cactus:case k.BigBrownRock:case k.PoisonPlant:case k.BigBlackRocks:case k.FallingRock:case k.DesertFixedTypeBoxBreakableCrystals:case k.BeeHive:return`/objects/${T(t).type_id}${n}.nj`;default:return`/objects/${T(t).type_id}${n}.xj`}}}(e,t,i,s);return this.http_client.get(o).array_buffer().then(e=>({url:o,data:e}))}warm_up_caches(){for(const e of[R.c.Unknown,R.c.Migium,R.c.Hidoom,R.c.VolOptPart1,R.c.DeathGunner,R.c.StRappy,R.c.HalloRappy,R.c.EggRappy,R.c.Migium2,R.c.Hidoom2,R.c.Recon,k.Unknown,k.PlayerSet,k.Particle,k.LightCollision,k.EnvSound,k.FogCollision,k.EventCollision,k.CharaCollision,k.ObjRoomID,k.LensFlare,k.ScriptCollision,k.MapCollision,k.ScriptCollisionA,k.ItemLight,k.RadarCollision,k.FogCollisionSW,k.ImageBoard,k.UnknownItem29,k.UnknownItem30,k.UnknownItem31,k.MenuActivation,k.BoxDetectObject,k.SymbolChatObject,k.TouchPlateObject,k.TargetableObject,k.EffectObject,k.CountDownObject,k.UnknownItem38,k.UnknownItem39,k.UnknownItem40,k.UnknownItem41,k.TelepipeLocation,k.BGMCollision,k.Pioneer2InvisibleTouchplate,k.TempleMapDetect,k.Firework,k.MainRagolTeleporterBattleInNextArea,k.Rainbow,k.FloatingBlueLight,k.PopupTrapNoTech,k.Poison,k.EnemyTypeBoxYellow,k.EnemyTypeBoxBlue,k.EmptyTypeBoxBlue,k.FloatingSoul,k.Butterfly,k.UnknownItem400,k.CcaAreaTeleporter,k.UnknownItem523,k.WhiteBird,k.OrangeBird,k.UnknownItem529,k.UnknownItem530,k.Seagull,k.UnknownItem576,k.WarpInBarbaRayRoom,k.UnknownItem672,k.InstaWarp,k.LabInvisibleObject,k.UnknownItem700,k.Ep4LightSource,k.BreakableBrownRock,k.UnknownItem897,k.UnknownItem898,k.OozingDesertPlant,k.UnknownItem901,k.UnknownItem903,k.UnknownItem904,k.UnknownItem905,k.UnknownItem906,k.DesertPlantHasCollision,k.UnknownItem910,k.UnknownItem912,k.Heat,k.TopOfSaintMillionEgg,k.UnknownItem961])this.geom_cache.set(e+"-",lr),this.tex_cache.set(e+"-",_r)}}var hr;!function(e){e[e.Geometry=0]="Geometry",e[e.Texture=1]="Texture"}(hr||(hr={}));var pr=i(580),br=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};class gr extends pr.a{constructor(){super(...arguments),this.persist_layout_config=Object(x.throttle)(e=>{this.persist("QuestEditorUiPersister.layout_config",this.to_persisted_item_config(e))},500,{leading:!1,trailing:!0})}load_layout_config(e){return br(this,void 0,void 0,(function*(){const t=yield this.load("QuestEditorUiPersister.layout_config");if(t){const i=this.extract_components(e),s=this.sanitized_layout_config(this.from_persisted_item_config(t),i);if(s)return s}}))}sanitized_layout_config(e,t){const i=new Set,s=e.map(e=>this.sanitize_layout_child(e,t,i));if(i.size===t.size)return s.filter(e=>e)}sanitize_layout_child(e,t,i){if(!e)return;if("component"===e.type){if(!("componentName"in e))return;const s=t.get(e.componentName);if(!s)return;i.add(e.componentName),e.id=s.id,e.title=s.title}switch(e.content&&(e.content=e.content.map(e=>this.sanitize_layout_child(e,t,i)).filter(e=>e)),e.type){case"row":case"column":case"stack":if(null==e.content||0===e.content.length)return}const s=e;return null!=s.activeItemIndex&&(null==s.content||s.activeItemIndex>=s.content.length)&&(s.activeItemIndex=void 0),e}extract_components(e,t=new Map){for(const i of e)"componentName"in i&&t.set(i.componentName,i),i.content&&this.extract_components(i.content,t);return t}to_persisted_item_config(e){return e.map(e=>({id:e.id,type:e.type,componentName:e.componentName,width:e.width,height:e.height,activeItemIndex:e.activeItemIndex,content:e.content&&this.to_persisted_item_config(e.content)}))}from_persisted_item_config(e){return e.map(e=>({id:e.id,type:e.type,componentName:e.componentName,width:e.width,height:e.height,activeItemIndex:e.activeItemIndex,content:e.content&&this.from_persisted_item_config(e.content),isClosable:"component"!==e.type&&void 0}))}}var fr=i(541),mr=i(525),kr=(i(793),i(543));class wr extends p.a{constructor(e){super();const t=new At({text:"New quest",icon_left:_.a.NewFile,items:[n.b.I],to_label:e=>"Episode "+n.b[e]}),i=new fr.a({icon_left:_.a.File,text:"Open file...",accept:".bin, .dat, .qst",multiple:!0,tooltip:"Open a quest file (Ctrl-O)"}),s=new Bt.a({text:"Save as...",icon_left:_.a.Save,tooltip:"Save this quest to new file (Ctrl-Shift-S)"}),o=new Bt.a({text:"Undo",icon_left:_.a.Undo,tooltip:sn.first_undo.map(e=>(e?`Undo "${e.description}"`:"Nothing to undo")+" (Ctrl-Z)")}),r=new Bt.a({text:"Redo",icon_left:_.a.Redo,tooltip:sn.first_redo.map(e=>(e?`Redo "${e.description}"`:"Nothing to redo")+" (Ctrl-Shift-Z)")}),a=new zo.a({items:e.areas,to_label:({label:e})=>e}),d=this.disposable(new kr.a({visible:e.result_dialog_visible,result:e.result,problems_message:e.result_problems_message,error_message:e.result_error_message}));this.toolbar=this.disposable(new kt.a(t,i,s,o,r,a));const l=this.disposable(new c(e.filename.val,{label:"File name:"})),u=this.disposable(new zo.a({label:"Version:",items:[co.GC,co.BB],selected:e.version,to_label:e=>{switch(e){case co.DC:return"Dreamcast";case co.GC:return"GameCube";case co.PC:return"PC";case co.BB:return"BlueBurst"}}})),v=this.disposable(new Bt.a({text:"Save"})),h=this.disposable(new Bt.a({text:"Cancel"})),p=this.disposable(new mr.a({title:"Save As",visible:e.save_as_dialog_visible,content:Object(_.h)({className:"quest_editor_QuestEditorToolBarView_save_as_dialog_content"},l.label.element,l.element,u.label.element,u.element),footer:[v.element,h.element]}));p.element.addEventListener("keydown",t=>{"Enter"===t.key&&e.save_as()}),this.disposables(t.chosen.observe(({value:t})=>e.create_new_quest(t)),i.files.observe(({value:t})=>e.parse_files(t)),s.onclick.observe(e.save_as_clicked),s.enabled.bind_to(e.can_save),p.ondismiss.observe(e.dismiss_save_as_dialog),l.value.bind_to(e.filename),l.value.observe(({value:t})=>e.set_filename(t)),u.selected.observe(({value:t})=>{null!=t&&e.set_version(t)}),v.onclick.observe(e.save_as),h.onclick.observe(e.dismiss_save_as_dialog),o.onclick.observe(()=>sn.undo()),o.enabled.bind_to(e.can_undo),r.onclick.observe(()=>sn.redo()),r.enabled.bind_to(e.can_redo),a.selected.bind_to(e.current_area),a.selected.observe(({value:t})=>e.set_area(t)),a.enabled.bind_to(e.can_select_area),d.ondismiss.observe(e.dismiss_result_dialog)),this.finalize_construction(wr)}get element(){return this.toolbar.element}get height(){return this.toolbar.height}}var Ir=i(140),yr=i(501),Rr=i(693);const Sr=Object(Rr.a)();function jr(e){return Object(B.f)()&&Sr?Sr.prs_compress_wasm(e):function(e){const t=new Tr(e.size,e.endianness),i=e.take(e.size);e.seek_start(0);for(;e.bytes_left;){let s=0,o=0;const n=e.position,r=Math.max(0,n-Math.min(2048,e.bytes_left));for(let t=n-255;t>=r;t--){i.seek_start(t);let r=0;for(;e.bytes_left&&r<=254&&e.u8()===i.u8();)r++;if(e.seek_start(n),r>=o&&(s=t,o=r,r>=255))break}o<3?t.add_u8(e.u8()):(t.copy(s-e.position,o),e.seek(o))}return t.finalize()}(e)}class Tr{constructor(e,t){this.flags=0,this.flag_bits_left=0,this.flag_offset=0,this.output=new O.a(new L.a(e,t))}add_u8(e){this.write_control_bit(1),this.write_u8(e)}copy(e,t){e>-256&&t<=5?this.short_copy(e,t):this.long_copy(e,t)}finalize(){this.write_control_bit(0),this.write_control_bit(1),this.flags>>>=this.flag_bits_left;const e=this.output.position;return this.output.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e),this.write_u8(0),this.write_u8(0),this.output.seek_start(0)}write_control_bit(e){if(0==this.flag_bits_left--){const e=this.output.position;this.output.seek_start(this.flag_offset),this.output.write_u8(this.flags),this.output.seek_start(e),this.output.write_u8(0),this.flag_offset=e,this.flag_bits_left=7}this.flags>>>=1,e&&(this.flags|=128)}write_u8(e){this.output.write_u8(e)}short_copy(e,t){t-=2,this.write_control_bit(0),this.write_control_bit(0),this.write_control_bit(t>>>1&1),this.write_control_bit(1&t),this.write_u8(255&e)}long_copy(e,t){t<=9?(this.write_control_bit(0),this.write_control_bit(1),this.write_u8(e<<3&248|t-2&7),this.write_u8(e>>5&255)):(this.write_control_bit(0),this.write_control_bit(1),this.write_u8(e<<3&248),this.write_u8(e>>5&255),this.write_u8(t-1))}}var Cr=i(629);const Fr=P.a.get("core/data_formats/parsing/quest/bin");var xr=i(453);const Dr=P.a.get("core/data_formats/parsing/quest/qst");function Or(e){const t=new xr.a(Dr),i=function(e){const t=[];let i=void 0,s=void 0;for(let o=0;o<4;++o){let o,n;const r=e.u8();e.seek(1);const a=e.u8();if(e.seek(-3),88===r&&68===a)o=co.BB,n=!0;else if(60===r&&68===a)o=co.PC,n=!0;else{if(60!==a)break;{const t=e.position;if(e.seek(35),o=0===e.u8()?co.GC:co.DC,e.seek_start(t),68===r)n=!0;else{if(166!==r)break;n=!1}}}let d,c,l,u,_;switch(o){case co.DC:e.seek(1),c=e.u8(),d=e.u16(),l=e.string_ascii(32,!0,!0),e.seek(3),u=e.string_ascii(16,!0,!0),e.seek(1),_=e.u32();break;case co.GC:e.seek(1),c=e.u8(),d=e.u16(),l=e.string_ascii(32,!0,!0),e.seek(4),u=e.string_ascii(16,!0,!0),_=e.u32();break;case co.PC:d=e.u16(),e.seek(1),c=e.u8(),l=e.string_ascii(32,!0,!0),e.seek(4),u=e.string_ascii(16,!0,!0),_=e.u32();break;case co.BB:d=e.u16(),e.seek(2),c=e.u16(),e.seek(38),u=e.string_ascii(16,!0,!0),_=e.u32(),l=e.string_ascii(24,!0,!0)}if(null!=i&&null!=s&&(c!==i||Object(B.e)(u)!==Object(B.e)(s))){e.seek(-d);break}i=c,s=u,t.push({version:o,online:n,quest_id:c,name:l,filename:u,size:_})}return t}(e);if(i.length<2)return t.add_problem($o.b.Error,"This .qst file is corrupt.",`Corrupt .qst file, expected at least 2 headers but only found ${i.length}.`).failure();let s=void 0,o=void 0;for(const e of i){if(null!=s&&e.version!==s)return t.add_problem($o.b.Error,"This .qst file is corrupt.",`Corrupt .qst file, header version ${co[e.version]} for file ${e.filename} doesn't match the previous header's version ${co[s]}.`).failure();if(null!=o&&e.online!==o)return t.add_problem($o.b.Error,"This .qst file is corrupt.",`Corrupt .qst file, header type ${e.online?'"online"':'"download"'} for file ${e.filename} doesn't match the previous header's type ${o?'"online"':'"download"'}.`).failure();s=e.version,o=e.online}Object(B.g)(s,"version"),Object(B.g)(o,"online");const n=function(e,t,i){var s,o;const n=new xr.a(Dr),r=new Map;let a,d;switch(t){case co.DC:case co.GC:case co.PC:a=1048,d=4;break;case co.BB:a=1056,d=8}for(;e.bytes_left>=a;){const o=e.position;let c;switch(t){case co.DC:case co.GC:e.seek(1),c=e.u8(),e.seek(2);break;case co.PC:e.seek(3),c=e.u8();break;case co.BB:e.seek(4),c=e.u32()}const l=e.string_ascii(16,!0,!0);let u=r.get(l);if(!u){const e=i.get(l);u={name:l,expected_size:null==e?void 0:e.size,cursor:new O.a(new L.a(null!==(s=null==e?void 0:e.size)&&void 0!==s?s:10240,D.a.Little)),chunk_nos:new Set},r.set(l,u)}u.chunk_nos.has(c)?n.add_problem($o.b.Warning,`File chunk number ${c} of file ${l} was already encountered, overwriting previous chunk.`):u.chunk_nos.add(c);let _=e.seek(1024).u32();e.seek(-1028),_>1024&&(n.add_problem($o.b.Warning,`Data segment size of ${_} is larger than expected maximum size, reading just 1024 bytes.`),_=1024);const v=e.take(_),h=1024*c;u.cursor.size=Math.max(h+_,u.cursor.size),u.cursor.seek_start(h).write_cursor(v),e.seek(1024+d-v.size),Object(B.d)(e.position===o+a,()=>`Read ${e.position-o} file chunk message bytes instead of expected ${a}.`)}e.bytes_left&&n.add_problem($o.b.Warning,e.bytes_left+" Bytes left in file.");for(const e of r.values()){e.cursor.seek_start(0),e.chunk_nos=new Set(Array.from(e.chunk_nos.values()).sort((e,t)=>e-t)),null!=e.expected_size&&e.cursor.size!==e.expected_size&&n.add_problem($o.b.Warning,`File ${e.name} has an actual size of ${e.cursor.size} instead of the expected size ${e.expected_size}.`);const t=Math.max(e.cursor.size,null!==(o=e.expected_size)&&void 0!==o?o:0),i=Math.ceil(t/1024);for(let t=0;t<i;++t)e.chunk_nos.has(t)||n.add_problem($o.b.Warning,`File ${e.name} is missing chunk ${t}.`)}const c=[];for(const e of r.values()){const t=i.get(e.name);c.push({id:null==t?void 0:t.quest_id,filename:e.name,quest_name:null==t?void 0:t.name,data:e.cursor.seek_start(0).array_buffer()})}return n.success(c)}(e,s,new Map(i.map(e=>[e.filename,e])));return t.add_result(n),n.success?t.success({version:s,online:o,files:n.value}):t.failure()}function Lr({version:e,online:t,files:i}){let s,o;switch(e){case co.DC:case co.GC:case co.PC:s=60,o=1048;break;case co.BB:s=88,o=1056}const n=i.map(e=>s+Math.ceil(e.data.byteLength/1024)*o).reduce((e,t)=>e+t),r=new ArrayBuffer(n),a=new W.a(r,D.a.Little);return function(e,t,i,s,o){var n,r,a,d,c,l,u,_;let v,h;i===co.BB?(v=65535,h=23):(v=255,h=31);for(const p of t)switch(Object(B.d)(null==p.id||0<=p.id&&p.id<=v,()=>`Quest ID should be between 0 and ${v}, inclusive.`),Object(B.d)(null==p.quest_name||p.quest_name.length<=h,()=>`File ${p.filename} has a quest name longer than ${h} characters (${p.quest_name}).`),Object(B.d)(p.filename.length<=15,()=>`File ${p.filename} has a filename longer than 15 characters.`),i){case co.DC:e.write_u8(s?68:166),e.write_u8(null!==(n=p.id)&&void 0!==n?n:0),e.write_u16(o),e.write_string_ascii(null!==(r=p.quest_name)&&void 0!==r?r:p.filename,32),e.write_u8(0),e.write_u8(0),e.write_u8(0),e.write_string_ascii(p.filename,16),e.write_u8(0),e.write_u32(p.data.byteLength);break;case co.GC:e.write_u8(s?68:166),e.write_u8(null!==(a=p.id)&&void 0!==a?a:0),e.write_u16(o),e.write_string_ascii(null!==(d=p.quest_name)&&void 0!==d?d:p.filename,32),e.write_u32(0),e.write_string_ascii(p.filename,16),e.write_u32(p.data.byteLength);break;case co.PC:e.write_u16(o),e.write_u8(s?68:166),e.write_u8(null!==(c=p.id)&&void 0!==c?c:0),e.write_string_ascii(null!==(l=p.quest_name)&&void 0!==l?l:p.filename,32),e.write_u32(0),e.write_string_ascii(p.filename,16),e.write_u32(p.data.byteLength);break;case co.BB:e.write_u16(o),e.write_u16(s?68:166),e.write_u16(null!==(u=p.id)&&void 0!==u?u:0);for(let t=0;t<38;t++)e.write_u8(0);e.write_string_ascii(p.filename,16),e.write_u32(p.data.byteLength),e.write_string_ascii(null!==(_=p.quest_name)&&void 0!==_?_:p.filename,24)}}(a,i,e,t,s),function(e,t,i){const s=t.map(e=>({no:0,data:new W.a(e.data,D.a.Little),name:e.filename}));let o=0;for(;o<s.length;)for(const t of s)t.data.bytes_left&&(Br(e,t.data,t.no++,t.name,i)||o++);for(const e of s){const t=Math.ceil(e.data.size/1024);Object(B.d)(e.no===t,()=>`Expected to write ${t} chunks for file "${e.name}" but ${e.no} where written.`)}}(a,i,e),Object(B.d)(a.position===n,()=>`Expected a final file size of ${n}, but got ${a.position}.`),r}function Br(e,t,i,s,o){switch(o){case co.DC:case co.GC:e.write_u8(0),e.write_u8(i),e.write_u16(0);break;case co.PC:e.write_u8(0),e.write_u8(0),e.write_u8(0),e.write_u8(i);break;case co.BB:e.write_u8_array([28,4,19,0]),e.write_u32(i)}e.write_string_ascii(s,16);const n=Math.min(1024,t.bytes_left);e.write_cursor(t.take(n));for(let t=n;t<1024;++t)e.write_u8(0);return e.write_u32(n),o===co.BB&&e.write_u32(0),t.bytes_left>0}var Pr;!function(e){e[e.None=0]="None",e[e.Return=1]="Return",e[e.Jump=2]="Jump",e[e.ConditionalJump=3]="ConditionalJump",e[e.Call=4]="Call"}(Pr||(Pr={}));class Wr{constructor(e,t,i,s,o){this.from=[],this.to=[],this.segment=e,this.start=t,this.end=i,this.branch_type=s,this.branch_labels=o}link_to(e){this.to.includes(e)||(this.to.push(e),e.from.push(this))}index_of_instruction(e){const t=this.segment.instructions.indexOf(e,this.start);return t<this.end?t:-1}}class Er{constructor(){this.blocks=[],this.instructions_to_block=new Map,this.labels_to_block=new Map}get_block_for_instruction(e){return this.instructions_to_block.get(e)}static create(e){const t=new Er;for(const i of e)this.create_basic_blocks(t,i);return this.link_blocks(t),t}static create_basic_blocks(e,t){const i=t.instructions.length;let s=0,o=!0;for(let n=0;n<i;n++){const r=t.instructions[n];let a,d;switch(r.opcode.code){case mi.code:a=Pr.Return,d=[];break;case Ki.code:a=Pr.Jump,d=[r.args[0].value];break;case Zi.code:case Xi.code:a=Pr.ConditionalJump,d=[r.args[0].value];break;case es.code:case ts.code:case is.code:case ss.code:case os.code:case ns.code:case rs.code:case as.code:case ds.code:case cs.code:case ls.code:case us.code:case _s.code:case vs.code:case hs.code:case ps.code:case bs.code:case gs.code:case fs.code:case ms.code:a=Pr.ConditionalJump,d=[r.args[2].value];break;case ks.code:a=Pr.ConditionalJump,d=r.args.slice(1).map(e=>e.value);break;case Ji.code:case Si.code:a=Pr.Call,d=[r.args[0].value];break;case ws.code:a=Pr.Call,d=r.args.slice(1).map(e=>e.value);break;default:if(n===i-1){a=Pr.None,d=[];break}continue}const c=new Wr(t,s,n+1,a,d);for(let t=c.start;t<c.end;t++)e.instructions_to_block.set(c.segment.instructions[t],c);if(e.blocks.push(c),o){for(const i of t.labels)e.labels_to_block.set(i,c);o=!1}s=n+1}}static link_blocks(e){const t=[];for(let i=0;i<e.blocks.length;i++){const s=e.blocks[i],o=e.blocks[i+1];switch(s.branch_type){case Pr.Return:continue;case Pr.Call:o&&t.push([s,o]);break;case Pr.None:case Pr.ConditionalJump:o&&s.link_to(o)}for(const t of s.branch_labels){const i=e.labels_to_block.get(t);i&&s.link_to(i)}}for(const[i,s]of t)qr(e.labels_to_block,s,i)}}function qr(e,t,i){for(const s of i.branch_labels){const i=e.get(s);i&&(i.branch_type===Pr.Return?i.link_to(t):Mr(new Set,t,i))}}function Mr(e,t,i){if(!e.has(i)){e.add(i);for(const s of i.to)s.branch_type===Pr.Return?s.link_to(t):Mr(e,t,s)}}class Ur{constructor(){this.intervals=[],this[Symbol.iterator]=()=>{let e=0,t=NaN;return{next:()=>{let i=!0;return e<this.intervals.length&&(isNaN(t)?(t=this.intervals[e].start,i=!1):t>this.intervals[e].end?(e++,e<this.intervals.length&&(t=this.intervals[e].start,i=!1)):i=!1),{done:i,value:t++}}}}}size(){return this.intervals.reduce((e,t)=>e+t.end-t.start+1,0)}get(e){for(const{start:t,end:i}of this.intervals){const s=i-t+1;if(e<s)return t+e;e-=s}}min(){return this.intervals.length?this.intervals[0].start:void 0}max(){return this.intervals.length?this.intervals[this.intervals.length-1].end:void 0}has(e){for(const t of this.intervals)if(t.start<=e&&e<=t.end)return!0;return!1}set_value(e){return this.intervals=[{start:e,end:e}],this}set_interval(e,t){if(t<e)throw new Error(`Interval upper bound should be greater than or equal to lower bound, got [${e}, ${t}].`);return this.intervals=[{start:e,end:t}],this}scalar_add(e){for(const t of this.intervals)t.start+=e,t.end+=e;return this}scalar_sub(e){return this.scalar_add(-e)}scalar_mul(e){for(const t of this.intervals)t.start*=e,t.end*=e;return this}scalar_div(e){for(const t of this.intervals)t.start=Math.floor(t.start/e),t.end=Math.floor(t.end/e);return this}union(e){let t=0;e:for(const i of e.intervals){for(;t<this.intervals.length;){const e=this.intervals[t];if(i.end<e.start-1){this.intervals.splice(t,0,i),t++;continue e}if(i.start<=e.end+1){e.start=Math.min(e.start,i.start);let s=t;for(;s<this.intervals.length&&i.end>this.intervals[s].start;)e.end=this.intervals[s].end,s++;this.intervals.splice(t+1,s-t-1),e.end=Math.max(e.end,i.end),t++;continue e}t++}this.intervals.push(i)}return this}to_array(){const e=[];for(const{start:t,end:i}of this.intervals)for(let s=t;s<=i;s++)e.push(s);return e}}const Vr=P.a.get("core/data_formats/asm/data_flow_analysis/register_value"),Nr=li,zr=ui;Math.pow(2,32);function Ar(e,t,i){const s=e.get_block_for_instruction(t);return s?function e(t,i,s,o,n){if(++t.iterations>100)return Vr.warn("Too many iterations."),(new Ur).set_interval(Nr,zr);for(let r=o-1;r>=s.start;r--){const o=s.segment.instructions[r],a=o.args;switch(o.opcode.code){case ji.code:if(a[0].value===n)return e(t,new Set(i),s,r,a[1].value);break;case Ti.code:case Ci.code:case Fi.code:case As.code:if(a[0].value===n)return(new Ur).set_value(a[1].value);break;case Di.code:if(a[0].value===n)return(new Ur).set_value(1);break;case Oi.code:if(a[0].value===n)return(new Ur).set_value(0);break;case Li.code:if(a[0].value===n){const o=e(t,new Set(i),s,r,n),a=o.size();return 0===a||1===a&&0===o.get(0)?(new Ur).set_value(1):o.has(0)?(new Ur).set_interval(0,1):(new Ur).set_value(0)}break;case Pi.code:if(a[0].value===n){return e(t,new Set(i),s,r,n).scalar_add(a[1].value)}break;case Ei.code:if(a[0].value===n){return e(t,new Set(i),s,r,n).scalar_sub(a[1].value)}break;case Mi.code:if(a[0].value===n){return e(t,new Set(i),s,r,n).scalar_mul(a[1].value)}break;case Vi.code:if(a[0].value===n){return e(t,new Set(i),s,r,n).scalar_div(a[1].value)}break;case Ms.code:if(a[0].value===n)return(new Ur).set_interval(0,1);break;case Ns.code:if(a[0].value===n)return(new Ur).set_interval(0,2);break;case $s.code:if(a[0].value===n)return(new Ur).set_interval(0,3);break;case Ys.code:if(a[1].value===n){const o=e(t,new Set(i),s,r,a[0].value).min()||0,n=Math.max(e(t,new Set(i),s,r,a[0].value+1).max()||0,o+1);return(new Ur).set_interval(o,n-1)}break;case Rs.code:case Ss.code:{const e=a[0].value,t=a[0].value+a[1].value;if(e<=n&&n<t)return(new Ur).set_interval(Nr,zr)}break;default:{const e=o.opcode.params,t=Math.min(a.length,e.length);for(let i=0;i<t;i++){const t=e[i];if(t.type.kind==Yt.RegTupRef){const e=a[i].value;let s=0;for(const i of t.type.register_tuples){if((i.access===_i.Write||i.access===_i.ReadWrite)&&e+s===n)return(new Ur).set_interval(Nr,zr);s++}}}}}}const r=new Ur;i.add(s);for(const o of s.from){if(i.has(o)){r.set_interval(Nr,zr);break}r.union(e(t,new Set(i),o,o.end,n))}return r}(new $r,new Set,s,s.index_of_instruction(t),i):new Ur}class $r{constructor(){this.iterations=0}}const Gr=P.a.get("core/data_formats/asm/data_flow_analysis/stack_value"),Hr=li,Qr=ui;function Yr(e,t,i){const s=e.get_block_for_instruction(t);return s?function e(t,i,s,o,n){if(++t.iterations>100)return Gr.warn("Too many iterations."),(new Ur).set_interval(Hr,Qr);for(let e=o-1;e>=s.start;e--){const i=s.segment.instructions[e];if(i.opcode.stack===vi.Pop){n+=i.opcode.params.length;continue}const o=i.args;switch(i.opcode.code){case js.code:if(0===n)return Ar(t.cfg,i,o[0].value);n--;break;case Ts.code:case Cs.code:case Fs.code:if(0===n)return(new Ur).set_value(o[0].value);n--;break;case xs.code:case Ds.code:case Os.code:if(0===n)return(new Ur).set_interval(Hr,Qr);n--}}const r=new Ur;i.add(s);for(const o of s.from){if(i.has(o)){r.set_interval(Hr,Qr);break}r.union(e(t,new Set(i),o,o.end,n))}return r}(new Kr(e),new Set,s,s.index_of_instruction(t),i):new Ur}class Kr{constructor(e){this.cfg=e,this.iterations=0}}const Jr=P.a.get("core/data_formats/parsing/quest/object_code"),Zr=[];Zr[uo.Instructions]=2,Zr[uo.String]=1,Zr[uo.Data]=0;const Xr=new Set([60,70,80,90,100,110,120,130,140,800,810,820,830,840,850,860]);function ea(e,t,i,s,o){const n=new W.a(e,D.a.Little),r=new na(t),a=new xr.a(Jr),d=new Map;!function(e,t,i,s,o,n){let r;do{r=s.size;for(const[r,a]of i)ia(s,t,e,r,a,o,n);const a=[...s.entries()].filter(([,e])=>e.type===uo.Instructions).sort(([e],[t])=>e-t).map(([,e])=>e),d=Er.create(a);i=new Map;for(const e of a)for(const t of e.instructions)for(let e=0;e<t.opcode.params.length;e++){const s=t.opcode.params[e];switch(s.type.kind){case Yt.ILabel:ta(d,i,t,e,uo.Instructions);break;case Yt.ILabelVar:for(;e<t.args.length;e++)i.set(t.args[e].value,uo.Instructions);break;case Yt.DLabel:ta(d,i,t,e,uo.Data);break;case Yt.SLabel:ta(d,i,t,e,uo.String);break;case Yt.RegTupRef:{const o=t.args[e];for(let e=0;e<s.type.register_tuples.length;e++){if(s.type.register_tuples[e].type.kind===Yt.ILabel){const s=Ar(d,t,o.value+e);if(s.size()<=10)for(const e of s)i.set(e,uo.Instructions)}}}}}}while(s.size>r)}(n,r,i.reduce((e,t)=>e.set(t,uo.Instructions),new Map),d,s,o);const c=[];let l=0;for(;l<n.size;){let e=d.get(l);if(!e){const t=r.get_labels(l);let i;if(t){const e=r.get_info(t[0]);i=e.next?e.next.offset:n.size}else{i=n.size;for(const e of r.labels)if(e.offset>l){i=e.offset;break}}n.seek_start(l),sa(d,n,i,t||[]),e=d.get(l),Object(B.d)(i>l,()=>`Next offset ${i} was smaller than or equal to current offset ${l}.`),Object(B.d)(e,()=>`Couldn't create segment for offset ${l}.`)}switch(c.push(e),e.type){case uo.Instructions:for(const t of e.instructions)l+=ho(t,o);break;case uo.Data:l+=e.data.byteLength;break;case uo.String:l+=4*Math.ceil((e.value.length+1)/2);break;default:throw new Error(uo[e.type]+" not implemented.")}}for(const{label:e,offset:t}of r.labels){const i=d.get(t);i?i.labels.includes(e)||(i.labels.push(e),i.labels.sort((e,t)=>e-t)):a.add_problem($o.b.Warning,`Label ${e} doesn't point to anything.`,`Label ${e} with offset ${t} doesn't point to anything.`)}return n.size===l||(a.add_problem($o.b.Error,"The script code is corrupt.",`Expected to parse ${n.size} bytes but parsed ${l} instead.`),s)?a.success(c):a.failure()}function ta(e,t,i,s,o){if(i.opcode.stack===vi.Pop){const n=Yr(e,i,i.opcode.params.length-s-1);if(n.size()<=10)for(const e of n){const i=t.get(e);(null==i||Zr[o]>Zr[i])&&t.set(e,o)}}else{const e=i.args[s].value,n=t.get(e);(null==n||Zr[o]>Zr[n])&&t.set(e,o)}}function ia(e,t,i,s,o,n,r){try{const a=t.get_info(s);if(null==a)return void(Xr.has(s)||Jr.warn(`Label ${s} is not registered in the label table.`));const d=e.get(a.offset);let c;if(d){if(d.labels.includes(s)||(d.labels.push(s),d.labels.sort((e,t)=>e-t)),!(Zr[o]>Zr[d.type]))return;c=d.labels}else c=[s];const l=a.next?a.next.offset:i.size;switch(i.seek_start(a.offset),o){case uo.Instructions:!function(e,t,i,s,o,n,r,a){const d=[],c={type:uo.Instructions,labels:o,instructions:d,asm:{labels:[]}};e.set(i.position,c);for(;i.position<s;){const e=i.u8();let t;switch(e){case 248:case 249:t=e<<8|i.u8();break;default:t=e}const s=pi[t];try{const e=oa(i,s,a);d.push(vo(s,e))}catch(e){if(!r)throw e;Jr.error(`Exception occurred while parsing arguments for instruction ${s.mnemonic}.`,e),d.push(vo(s,[]))}}if(null!=n){let s=!0;for(let e=d.length-1;e>=0;e--){const t=d[e].opcode;if(t.code===mi.code||t.code===Ki.code){s=!1;break}}s&&ia(e,t,i,n,uo.Instructions,r,a)}}(e,t,i,l,c,a.next&&a.next.label,n,r);break;case uo.Data:sa(e,i,l,c);break;case uo.String:!function(e,t,i,s,o){const n=t.position,r={type:uo.String,labels:s,value:o===lo.DC_GC?t.string_ascii(i-n,!0,!0):t.string_utf16(i-n,!0,!0),asm:{labels:[]}};e.set(n,r)}(e,i,l,c,r);break;default:throw new Error(`Segment type ${uo[o]} not implemented.`)}}catch(e){if(!n)throw e;Jr.error("Couldn't fully parse object code segment.",e)}}function sa(e,t,i,s){const o=t.position,n={type:uo.Data,labels:s,data:t.array_buffer(i-o),asm:{labels:[]}};e.set(o,n)}function oa(e,t,i){const s=[];if(t.stack!==vi.Pop)for(const o of t.params)switch(o.type.kind){case Yt.Byte:s.push(po(e.u8()));break;case Yt.Word:s.push(po(e.u16()));break;case Yt.DWord:s.push(po(e.i32()));break;case Yt.Float:s.push(po(e.f32()));break;case Yt.Label:case Yt.ILabel:case Yt.DLabel:case Yt.SLabel:s.push(po(e.u16()));break;case Yt.String:{const t=Math.min(4096,e.bytes_left);s.push(po(i===lo.DC_GC?e.string_ascii(t,!0,!1):e.string_utf16(t,!0,!1)))}break;case Yt.ILabelVar:{const t=e.u8();s.push(...e.u16_array(t).map(e=>po(e)))}break;case Yt.RegRef:case Yt.RegTupRef:s.push(po(e.u8()));break;case Yt.RegRefVar:{const t=e.u8();s.push(...e.u8_array(t).map(e=>po(e)))}break;default:throw new Error(`Parameter type ${Yt[o.type.kind]} not implemented.`)}return s}class na{constructor(e){this.labels=[],this.label_map=new Map,this.offset_map=new Map;for(let t=0;t<e.length;t++){const i=e[t];-1!==i&&this.labels.push({label:t,offset:i})}this.labels.sort((e,t)=>e.offset-t.offset||e.label-t.label);for(let e=0;e<this.labels.length;e++){const{label:t,offset:i}=this.labels[e];this.label_map.set(t,{offset:i,index:e});const s=this.offset_map.get(i)||[];s.push(t),this.offset_map.set(i,s)}}get_labels(e){return this.offset_map.get(e)}get_info(e){const t=this.label_map.get(e);if(null==t)return;let i;for(let e=t.index+1;e<this.labels.length&&(i=this.labels[e],!(i.offset>t.offset));e++)i=void 0;return{offset:t.offset,next:i}}}const ra=P.a.get("core/data_formats/asm/data_flow_analysis/map_designations");const aa=P.a.get("core/data_formats/parsing/quest");function da(e,t,i=!1){const s=new xr.a(aa),o=Object(Cr.a)(e);if(s.add_result(o),!o.success)return s.failure();const{bin:r,format:a}=function(e){const t=e.u32(),i=e.u32(),s=e.u32();let o,n,r,a,d,c,l;switch(e.seek(4),t){case 468:o=lo.DC_GC;break;case 4652:o=lo.BB;break;default:o=lo.PC}o===lo.DC_GC?(e.seek(1),r=e.u8(),n=e.u16(),a=e.string_ascii(32,!0,!0),d=e.string_ascii(128,!0,!0),c=e.string_ascii(288,!0,!0)):(n=e.u32(),r=e.u32(),a=e.string_utf16(64,!0,!0),d=e.string_utf16(256,!0,!0),c=e.string_utf16(576,!0,!0)),s!==e.size&&Fr.warn(`Value ${s} in bin size field does not match actual size ${e.size}.`),o===lo.BB?(e.seek(4),l=e.u32_array(932)):l=[];const u=Math.floor((e.size-i)/4),_=e.seek_start(i).i32_array(u);return{bin:{quest_id:n,language:r,quest_name:a,short_description:d,long_description:c,object_code:e.seek_start(t).array_buffer(i-t),label_offsets:_,shop_items:l},format:o}}(o.value),d=Object(Cr.a)(t);if(s.add_result(d),!d.success)return s.failure();const c=function(e){const t=[],i=[],s=[],o=[];for(;e.bytes_left;){const n=e.u32(),r=e.u32(),a=e.u32(),d=e.u32();if(0===n)break;{if(d!==r-16)throw Error(`Malformed DAT file. Expected an entities size of ${r-16}, got ${d}.`);const c=e.take(d);1===n?U(c,a,t,68):2===n?U(c,a,i,72):3===n?V(c,a,s):o.push({entity_type:n,total_size:r,area_id:a,entities_size:d,data:e.u8_array(d)}),c.bytes_left&&E.warn(`Read ${c.position} bytes instead of expected ${c.size} for entity type ${n}.`)}}return{objs:t,npcs:i,events:s,unknowns:o}}(d.value),l=c.objs.map(({area_id:e,data:t})=>function(e,t){return Object(B.d)(68===t.byteLength,()=>`Data byteLength should be 68 but was ${t.byteLength}.`),{area_id:e,data:t,view:new DataView(t)}}(e,t)),u=c.npcs.map(({area_id:e,data:t})=>function(e,t,i){return Object(B.d)(72===i.byteLength,()=>`Data byteLength should be 72 but was ${i.byteLength}.`),{episode:e,area_id:t,data:i,view:new DataView(i)}}(n.b.I,e,t));let _=n.b.I,v=new Map;const h=ea(r.object_code,r.label_offsets,function(e,t){const i=new Set([0]);for(const t of e){const e=ee(t);null!=e&&i.add(e);const s=te(t);null!=s&&i.add(s)}for(const e of t)i.add(K(e));return[...i]}(l,u),i,a);if(s.add_result(h),!h.success)return s.failure();const p=h.value;if(p.length){const e=p.filter(e=>e.type===uo.Instructions);let t;for(const i of e)if(i.labels.includes(0)){t=i;break}if(t){_=function(e,t){const i=t.instructions.find(e=>e.opcode.code===Ks.code);if(!i)return aa.debug("Function 0 has no set_episode instruction."),n.b.I;{const t=i.args[0].value;switch(t){case 0:return n.b.I;case 1:return n.b.II;case 2:return n.b.IV;default:return e.add_problem($o.b.Warning,`Unknown episode ${t} in function 0 set_episode instruction.`),n.b.I}}}(s,t);for(const e of u)e.episode=_;v=function(e,t){const i=new Map;let s;for(const o of t.instructions)switch(o.opcode.code){case zs.code:case Gs.code:{s||(s=Er.create(e));const t=Ar(s,o,o.args[0].value);if(1!==t.size()){ra.warn("Couldn't determine area ID for map_designate instruction.");continue}const n=Ar(s,o,o.args[0].value+(o.opcode.code===zs.code?2:3));if(1!==n.size()){ra.warn("Couldn't determine area variant ID for map_designate instruction.");continue}i.set(t.get(0),n.get(0))}break;case ao.code:i.set(o.args[0].value,o.args[2].value)}return i}(e,t)}else s.add_problem($o.b.Warning,"No instruction segment for label 0 found.")}else s.add_problem($o.b.Warning,"File contains no instruction labels.");return s.success({id:r.quest_id,language:r.language,name:r.quest_name,short_description:r.short_description,long_description:r.long_description,episode:_,objects:l,npcs:u,events:c.events,dat_unknowns:c.unknowns,object_code:p,shop_items:r.shop_items,map_designations:v})}function ca(e,t=!1){const i=new xr.a(aa),s=Or(e);if(i.add_result(s),!s.success)return i.failure();const{version:o,online:n,files:r}=s.value;let a,d;for(const e of r){const t=e.filename.trim().toLowerCase();t.endsWith(".dat")?a=e:t.endsWith(".bin")&&(d=e)}if(!a)return i.add_problem($o.b.Error,"File contains no DAT file.").failure();if(!d)return i.add_problem($o.b.Error,"File contains no BIN file.").failure();const c=da(new W.a(d.data,D.a.Little),new W.a(a.data,D.a.Little),t);return i.add_result(c),c.success?i.success({quest:c.value,version:o,online:n}):i.failure()}function la(e,t,i,s){const o=M({objs:ua(e.objects),npcs:ua(e.npcs),events:e.events,unknowns:e.dat_unknowns}),{object_code:n,label_offsets:r}=function(e,t){const i=new O.a(new L.a(100*e.length),D.a.Little),s=i.position,o=[];for(const n of e){for(const e of n.labels)o[e]=i.position-s;if(n.type===uo.Instructions)for(const e of n.instructions){const s=e.opcode;if(2===s.size&&i.write_u8(s.code>>>8),i.write_u8(255&s.code),s.stack!==vi.Pop)for(let o=0;o<s.params.length;o++){const n=s.params[o],r=e.param_to_args[o],[a]=r;switch(n.type.kind){case Yt.Byte:a.value>=0?i.write_u8(a.value):i.write_i8(a.value);break;case Yt.Word:a.value>=0?i.write_u16(a.value):i.write_i16(a.value);break;case Yt.DWord:a.value>=0?i.write_u32(a.value):i.write_i32(a.value);break;case Yt.Float:i.write_f32(a.value);break;case Yt.Label:case Yt.ILabel:case Yt.DLabel:case Yt.SLabel:i.write_u16(a.value);break;case Yt.String:t===lo.DC_GC?i.write_string_ascii(a.value,a.value.length+1):i.write_string_utf16(a.value,2*a.value.length+2);break;case Yt.ILabelVar:i.write_u8(r.length),i.write_u16_array(r.map(e=>e.value));break;case Yt.RegRef:case Yt.RegTupRef:i.write_u8(a.value);break;case Yt.RegRefVar:i.write_u8(r.length),i.write_u8_array(r.map(e=>e.value));break;default:throw new Error(`Parameter type ${Yt[n.type.kind]} not implemented.`)}}}else if(n.type===uo.String)if(t===lo.DC_GC){const e=4*Math.ceil((n.value.length+1)/4);i.write_string_ascii(n.value,e)}else{const e=4*Math.ceil((n.value.length+1)/2);i.write_string_utf16(n.value,e)}else i.write_cursor(new W.a(n.data,i.endianness))}for(let e=0;e<o.length;e++)null==o[e]&&(o[e]=-1);return{object_code:i.seek_start(0).array_buffer(),label_offsets:o}}(e.object_code,_o(i)),a=function(e,t){let i;switch(Object(B.d)(e.quest_name.length<=32,()=>"quest_name can't be longer than 32 characters, was "+e.quest_name.length),Object(B.d)(e.short_description.length<=127,()=>"short_description can't be longer than 127 characters, was "+e.short_description.length),Object(B.d)(e.long_description.length<=287,()=>"long_description can't be longer than 287 characters, was "+e.long_description.length),Object(B.d)(0===e.shop_items.length||t===lo.BB,"shop_items is only supported in BlueBurst quests."),Object(B.d)(e.shop_items.length<=932,()=>`shop_items can't be larger than 932, was ${e.shop_items.length}.`),t){case lo.DC_GC:i=468;break;case lo.PC:i=920;break;case lo.BB:i=4652}const s=i+e.object_code.byteLength+4*e.label_offsets.length,o=new ArrayBuffer(s),n=new W.a(o,D.a.Little);if(n.write_u32(i),n.write_u32(i+e.object_code.byteLength),n.write_u32(s),n.write_u32(4294967295),t===lo.DC_GC?(n.write_u8(0),n.write_u8(e.language),n.write_u16(e.quest_id),n.write_string_ascii(e.quest_name,32),n.write_string_ascii(e.short_description,128),n.write_string_ascii(e.long_description,288)):(n.write_u32(e.quest_id),n.write_u32(e.language),n.write_string_utf16(e.quest_name,64),n.write_string_utf16(e.short_description,256),n.write_string_utf16(e.long_description,576)),t===lo.BB){n.write_u32(0),n.write_u32_array(e.shop_items);for(let t=e.shop_items.length;t<932;t++)n.write_u32(0)}return Object(B.d)(n.position===i,()=>`Expected to write ${i} bytes before object code, but wrote ${n.position}.`),n.write_cursor(new W.a(e.object_code,D.a.Little)),n.write_i32_array(e.label_offsets),Object(B.d)(n.position===s,`Expected to write ${s} bytes, but wrote ${n.position}.`),o}({quest_id:e.id,language:e.language,quest_name:e.name,short_description:e.short_description,long_description:e.long_description,object_code:n,label_offsets:r,shop_items:e.shop_items},_o(i)),d=Object(B.e)(t).slice(0,11);return Lr({version:i,online:s,files:[{id:e.id,filename:d+".dat",quest_name:e.name,data:jr(new O.a(o)).array_buffer()},{id:e.id,filename:d+".bin",quest_name:e.name,data:jr(new W.a(a,D.a.Little)).array_buffer()}]})}function ua(e){return e.map(({area_id:e,data:t})=>({area_id:e,data:t}))}const _a=P.a.get("quest_editor/model/QuestModel");class va{constructor(e,t,i,s,o,r,a,d,c,l,u,_,v,h){this.area_store=e,this._id=Object(le.e)(0),this._language=Object(le.e)(0),this._name=Object(le.e)(""),this._short_description=Object(le.e)(""),this._long_description=Object(le.e)(""),this._area_variants=Object(le.c)(),this.id=this._id,this.language=this._language,this.name=this._name,this.short_description=this._short_description,this.long_description=this._long_description,this.area_variants=this._area_variants,this.update_area_variants=()=>{const e=new Map;for(const t of this.entities_per_area.val.keys())try{e.set(t,this.area_store.get_variant(this.episode,t,0))}catch(e){_a.warn(e)}for(const[t,i]of this.map_designations.val)try{e.set(t,this.area_store.get_variant(this.episode,t,i))}catch(e){_a.warn(e)}this._area_variants.val=[...e.values()]},Object(n.c)(a),Object(B.g)(d,"map_designations"),Object(B.l)(c,"objs"),Object(B.l)(l,"npcs"),Object(B.g)(u,"event_dags"),Object(B.l)(_,"dat_unknowns"),Object(B.l)(v,"object_code"),Object(B.l)(h,"shop_items"),this.set_id(t),this.set_language(i),this.set_name(s),this.set_short_description(o),this.set_long_description(r),this.episode=a,this._map_designations=Object(le.e)(d),this.map_designations=this._map_designations,this._objects=Object(le.c)(void 0,...c),this.objects=this._objects,this._npcs=Object(le.c)(void 0,...l),this.npcs=this._npcs,this.event_dags=u,this.dat_unknowns=_,this.object_code=v,this.shop_items=h,this.entities_per_area=Object(le.d)((e,t)=>{const i=new Map;for(const t of e)i.set(t.area_id,(i.get(t.area_id)||0)+1);for(const e of t)i.set(e.area_id,(i.get(e.area_id)||0)+1);return i},this.npcs,this.objects),this.entities_per_area.observe(this.update_area_variants,{call_now:!0}),this.map_designations.observe(this.update_area_variants,{call_now:!0})}set_id(e){return Object(B.d)(e>=0,`id should be greater than or equal to 0, was ${e}.`),this._id.val=e,this}set_language(e){return Object(B.d)(e>=0,`language should be greater than or equal to 0, was ${e}.`),this._language.val=e,this}set_name(e){return Object(B.d)(e.length<=32,`name can't be longer than 32 characters, got "${e}".`),this._name.val=e,this}set_short_description(e){return Object(B.d)(e.length<=128,`short_description can't be longer than 128 characters, got "${e}".`),this._short_description.val=e,this}set_long_description(e){return Object(B.d)(e.length<=288,`long_description can't be longer than 288 characters, got "${e}".`),this._long_description.val=e,this}set_map_designations(e){return this._map_designations.val=e,this}add_entity(e){if(e instanceof Je)this.add_object(e);else{if(!(e instanceof Re))throw new Error(ie(e.type)+" not supported.");this.add_npc(e)}}add_object(e){this._objects.push(e)}add_npc(e){this._npcs.push(e)}remove_entity(e){if(e instanceof Je)this._objects.remove(e);else{if(!(e instanceof Re))throw new Error(ie(e.type)+" not supported.");this._npcs.remove(e)}}insert_event(e,t,i,s){const o=t.wave.area_id.val;let n=this.event_dags.get(o);n||(n=new Pt(o),this.event_dags.set(o,n)),n.insert_event(e,t,i,s)}get_event_dag_or_create(e){let t=this.event_dags.get(e);return t||(t=new Pt(e),this.event_dags.set(e,t)),t}add_event(e,t,i){const s=e.wave.area_id.val;let o=this.event_dags.get(s);o||(o=new Pt(s),this.event_dags.set(s,o)),o.add_event(e,t,i)}remove_event(e,t){for(const e of this.npcs)e.wave.val===t.wave&&e.set_wave(void 0);e.remove_event(t)}}class ha{constructor(e,t,i,s,o){this._actions=Object(le.c)(),this.actions=this._actions,Object(B.o)(e,"id"),Object(B.o)(t,"section_id"),Object(B.g)(i,"wave"),Object(B.o)(s,"delay"),Object(B.n)(o,"unknown"),this.id=e,this.section_id=t,this.wave=i,this._delay=Object(le.e)(s),this.delay=this._delay,this.unknown=o}set_delay(e){Object(B.o)(e,"delay"),this._delay.val=e}add_action(e){this._actions.push(e)}remove_action(e){this._actions.remove(e)}}class pa{constructor(e,t,i){Object(B.o)(e,"id"),Object(B.o)(t,"area_id"),Object(B.o)(i,"section_id"),this._id=Object(le.e)(e),this.id=this._id,this._area_id=Object(le.e)(t),this.area_id=this._area_id,this._section_id=Object(le.e)(i),this.section_id=this._section_id}}const ba=P.a.get("quest_editor/stores/model_conversion");function ga(e,t){const i=new Map;return new va(e,t.id,t.language,t.name,t.short_description,t.long_description,t.episode,t.map_designations,t.objects.map(e=>new Je(e)),t.npcs.map(e=>function(e,t){const i=function(e){return e.view.getUint16(14,!0)}(t),s=0===i?void 0:fa(e,t.area_id,H(t),i);return new Re(t,s)}(i,e)),function(e,t){const i=new Map;for(const s of t){const t=`${s.id}-${s.area_id}`;let o=i.get(t);if(o&&o.event){ba.warn(`Ignored duplicate event #${s.id} for area ${s.area_id}.`);continue}const n=fa(e,s.area_id,s.section_id,s.wave),r=new ha(s.id,s.section_id,n,s.delay,s.unknown);o?o.event=r:(o={event:r,area_id:s.area_id,parents:[],child_ids:[]},i.set(t,o));for(const e of s.actions)switch(e.type){case q.SpawnNpcs:r.add_action(new Mt(e.section_id,e.appear_flag));break;case q.Unlock:r.add_action(new Ut(e.door_id));break;case q.Lock:r.add_action(new Vt(e.door_id));break;case q.TriggerEvent:{o.child_ids.push(e.event_id);const t=`${e.event_id}-${s.area_id}`,n=i.get(t);n?n.parents.push(r):i.set(t,{area_id:s.area_id,parents:[r],child_ids:[]})}break;default:ba.warn(`Unknown event action type: ${e.type}.`)}}const s=new Map;for(const{area_id:e,event:t}of i.values())if(t){let i=s.get(e);i||(i=new Pt(e),s.set(e,i)),i.add_event(t,[],[])}for(const e of i.values())if(e.event)for(const t of e.child_ids){const o=i.get(`${t}-${e.area_id}`);o.event?s.get(e.area_id).add_edge(e.event,o.event):ba.warn(`Event ${e.event.id} calls nonexistent event ${t}.`)}return s}(i,t.events),t.dat_unknowns,t.object_code.slice(),t.shop_items)}function fa(e,t,i,s){const o=`${t}-${i}-${s}`;let n=e.get(o);return n||(n=new pa(s,t,i),e.set(o,n)),n}function ma(e){const t=[];for(const i of e.values())for(const e of i.events){const s=e.actions.val.map(e=>{switch(e.type){case Wt.SpawnNpcs:return{type:q.SpawnNpcs,section_id:e.section_id,appear_flag:e.appear_flag};case Wt.Unlock:return{type:q.Unlock,door_id:e.door_id.val};case Wt.Lock:return{type:q.Lock,door_id:e.door_id.val}}});for(const t of i.get_children(e))s.push({type:q.TriggerEvent,event_id:t.id});t.push({id:e.id,section_id:e.section_id,wave:e.wave.id.val,delay:e.delay.val,actions:s,area_id:i.area_id,unknown:e.unknown})}return t}var ka=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const wa=P.a.get("quest_editor/controllers/QuestEditorToolBarController");class Ia extends Ir.a{constructor(e,t,i,s){super(),this.quest_loader=e,this.area_store=i,this.quest_editor_store=s,this._result_dialog_visible=Object(le.e)(!1),this._result=Object(le.e)(void 0),this._result_problems_message=Object(le.e)(""),this._result_error_message=Object(le.e)(""),this._save_as_dialog_visible=Object(le.e)(!1),this._filename=Object(le.e)(""),this._version=Object(le.e)(co.BB),this.result_dialog_visible=this._result_dialog_visible,this.result=this._result,this.result_problems_message=this._result_problems_message,this.result_error_message=this._result_error_message,this.save_as_dialog_visible=this._save_as_dialog_visible,this.filename=this._filename,this.version=this._version,this.create_new_quest=e=>ka(this,void 0,void 0,(function*(){this.set_filename(""),this.set_version(co.BB),yield this.quest_editor_store.set_current_quest(ga(this.area_store,yield this.quest_loader.load_default_quest(e)))})),this.parse_files=e=>ka(this,void 0,void 0,(function*(){try{if(0===e.length)return;let t;const i=e.find(e=>e.name.toLowerCase().endsWith(".qst"));if(i){const e=yield Object(yr.b)(i),s=ca(new W.a(e,D.a.Little));this.set_result(s),s.success&&(t=s.value.quest,this.set_version(s.value.version),this.set_filename(Object(B.e)(i.name)))}else{const i=e.find(e=>e.name.toLowerCase().endsWith(".bin")),s=e.find(e=>e.name.toLowerCase().endsWith(".dat"));if(i&&s){const e=yield Object(yr.b)(i),o=yield Object(yr.b)(s),n=da(new W.a(e,D.a.Little),new W.a(o,D.a.Little));this.set_result(n),n.success&&(t=n.value,this.set_filename(Object(B.e)(i.name||s.name)))}else this.set_result(Object(xr.b)(Object(xr.c)($o.b.Error,"Please select a .qst file or one .bin and one .dat file.")))}t&&(yield this.quest_editor_store.set_current_quest(ga(this.area_store,t)))}catch(e){wa.error("Couldn't read file.",e),this.set_result(Object(xr.b)(Object(xr.c)($o.b.Error,e.message)))}})),this.set_area=({area:e})=>{this.quest_editor_store.set_current_area(e)},this.save_as_clicked=()=>{this.quest_editor_store.current_quest.val&&(this._save_as_dialog_visible.val=!0)},this.save_as=()=>{const e=this.quest_editor_store.current_quest.val;if(!e)return;const t=this.version.val;if(void 0===t)return;let i=this.filename.val;const s=la(function(e){return{id:e.id.val,language:e.language.val,name:e.name.val,short_description:e.short_description.val,long_description:e.long_description.val,episode:e.episode,objects:e.objects.val.map(e=>e.entity),npcs:e.npcs.val.map(e=>e.entity),events:ma(e.event_dags),dat_unknowns:e.dat_unknowns.map(e=>Object.assign({},e)),object_code:e.object_code.map(e=>bo(e)),shop_items:e.shop_items.slice(),map_designations:new Map(e.map_designations.val)}}(e),i,t,!0);i.endsWith(".qst")||(i+=".qst");const o=document.createElement("a");o.href=URL.createObjectURL(new Blob([s],{type:"application/octet-stream"})),o.download=i,document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o),this.dismiss_save_as_dialog()},this.dismiss_save_as_dialog=()=>{this._save_as_dialog_visible.val=!1},this.set_filename=e=>{this._filename.val=e},this.set_version=e=>{switch(e){case co.DC:case co.GC:this._version.val=co.GC;break;case co.PC:case co.BB:this._version.val=co.BB}},this.dismiss_result_dialog=()=>{this._result_dialog_visible.val=!1},this.areas=s.current_quest.flat_map(e=>e?e.entities_per_area.flat_map(t=>Object(le.c)(void 0,...i.get_areas_for_episode(e.episode).map(e=>{const i=t.get(e.id);return{area:e,label:e.name+(i?` (${i})`:"")}}))):Object(le.c)()),this.current_area=Object(le.d)((e,t)=>e.find(e=>e.area==t),this.areas,s.current_area);const o=s.current_quest.map(e=>null!=e);this.can_save=o,this.can_select_area=o,this.can_undo=Object(le.d)((e,t)=>e&&!t,sn.can_undo,s.quest_runner.running),this.can_redo=Object(le.d)((e,t)=>e&&!t,sn.can_redo,s.quest_runner.running),this.disposables(t.on_global_keydown(Ft.b.QuestEditor,"Ctrl-O",()=>ka(this,void 0,void 0,(function*(){const e=yield Object(yr.a)({accept:".bin, .dat, .qst",multiple:!0});yield this.parse_files(e)}))),t.on_global_keydown(Ft.b.QuestEditor,"Ctrl-Shift-S",this.save_as_clicked),t.on_global_keydown(Ft.b.QuestEditor,"Ctrl-Z",()=>{sn.undo()}),t.on_global_keydown(Ft.b.QuestEditor,"Ctrl-Shift-Z",()=>{sn.redo()}),t.on_global_keydown(Ft.b.QuestEditor,"Ctrl-Y",()=>{sn.redo()}))}set_result(e){this._result.val=e,e.problems.length&&(this._result_dialog_visible.val=!0)}}class ya{constructor(e,t,i){this.quest=e,this.old=t,this.new=i}}class Ra extends ya{constructor(){super(...arguments),this.description="Edit ID"}undo(){this.quest.set_id(this.old)}redo(){this.quest.set_id(this.new)}}class Sa extends ya{constructor(){super(...arguments),this.description="Edit name"}undo(){this.quest.set_name(this.old)}redo(){this.quest.set_name(this.new)}}class ja extends ya{constructor(){super(...arguments),this.description="Edit short description"}undo(){this.quest.set_short_description(this.old)}redo(){this.quest.set_short_description(this.new)}}class Ta extends ya{constructor(){super(...arguments),this.description="Edit long description"}undo(){this.quest.set_long_description(this.old)}redo(){this.quest.set_long_description(this.new)}}class Ca extends Ir.a{constructor(e){super(),this.store=e,this.focused=()=>{this.store.undo.make_current()},this.set_id=e=>{const t=this.current_quest.val;t&&this.store.undo.push(new Ra(t,t.id.val,e)).redo()},this.set_name=e=>{const t=this.current_quest.val;t&&this.store.undo.push(new Sa(t,t.name.val,e)).redo()},this.set_short_description=e=>{const t=this.current_quest.val;t&&this.store.undo.push(new ja(t,t.short_description.val,e)).redo()},this.set_long_description=e=>{const t=this.current_quest.val;t&&this.store.undo.push(new Ta(t,t.long_description.val,e)).redo()},this.current_quest=e.current_quest,this.enabled=e.quest_runner.running.map(e=>!e),this.unavailable=this.current_quest.map(e=>null==e)}}class Fa{constructor(e,t,i,s,o){this.quest_editor_store=e,this.entity=t,this.prop=i,this.old_value=s,this.new_value=o,this.description="Edit "+i.name}redo(){this.prop.set_value(this.new_value),this.quest_editor_store.set_selected_entity(this.entity)}undo(){this.prop.set_value(this.old_value),this.quest_editor_store.set_selected_entity(this.entity)}}const xa=Object.freeze(new I.Vector3),Da=Object.freeze(new I.Euler);class Oa extends Ir.a{constructor(e){super(),this.store=e,this.focused=()=>{this.store.undo.make_current()};const t=e.selected_entity;this.unavailable=t.map(e=>null==e),this.enabled=e.quest_runner.running.map(e=>!e),this.type=t.map(e=>e instanceof Re?"NPC":"Object"),this.name=t.map(e=>null==e?"":oe(e.type).name),this.section_id=t.flat_map(e=>null==e?Object(le.e)(""):e.section_id.map(e=>e.toString())),this.wave=t.flat_map(e=>e instanceof Re?e.wave.flat_map(e=>{var t,i;return null!==(i=null===(t=null==e?void 0:e.id)||void 0===t?void 0:t.map(e=>e.toString()))&&void 0!==i?i:Object(le.e)("None")}):Object(le.e)("")),this.wave_hidden=t.map(e=>!(e instanceof Re)),this.position=t.flat_map(e=>{var t;return null!==(t=null==e?void 0:e.position)&&void 0!==t?t:Object(le.e)(xa)}),this.rotation=t.flat_map(e=>{var t;return null!==(t=null==e?void 0:e.rotation)&&void 0!==t?t:Object(le.e)(Da)}),this.props=Object(le.b)(e=>{var t;return null!==(t=null==e?void 0:e.props)&&void 0!==t?t:Object(le.c)()},t)}set_pos_x(e){const t=this.store.selected_entity.val;if(t){const i=t.position.val;this.store.undo.push(new tt(this.store,t,t.section.val,t.section.val,i,new I.Vector3(e,i.y,i.z),!1)).redo()}}set_pos_y(e){const t=this.store.selected_entity.val;if(t){const i=t.position.val;this.store.undo.push(new tt(this.store,t,t.section.val,t.section.val,i,new I.Vector3(i.x,e,i.z),!1)).redo()}}set_pos_z(e){const t=this.store.selected_entity.val;if(t){const i=t.position.val;this.store.undo.push(new tt(this.store,t,t.section.val,t.section.val,i,new I.Vector3(i.x,i.y,e),!1)).redo()}}set_rot_x(e){const t=this.store.selected_entity.val;if(t){const i=t.rotation.val;this.store.undo.push(new Xe(this.store,t,i,be(he(e),i.y,i.z),!1)).redo()}}set_rot_y(e){const t=this.store.selected_entity.val;if(t){const i=t.rotation.val;this.store.undo.push(new Xe(this.store,t,i,be(i.x,he(e),i.z),!1)).redo()}}set_rot_z(e){const t=this.store.selected_entity.val;if(t){const i=t.rotation.val;this.store.undo.push(new Xe(this.store,t,i,be(i.x,i.y,he(e)),!1)).redo()}}set_prop_value(e,t){const i=this.store.selected_entity.val;i&&this.store.undo.push(new Fa(this.store,i,e,e.value.val,t)).redo()}}class La extends Ir.a{constructor(e){super(),this.unavailable=e.current_quest.map(e=>null==e),this.npc_counts=e.current_quest.flat_map(e=>e?e.npcs:Object(le.e)([])).map(this.update_view)}update_view(e){const t=new Map;for(const i of e)if(i.type!==R.c.VolOptPart2){const e=t.get(i.type)||0;t.set(i.type,e+1)}const i=8*(t.get(R.c.Canane)||0);return[...t].sort((e,t)=>e[0]-t[0]).map(([e,t])=>{const s=e===R.c.Canadine?i:0;return{name:Object(R.d)(e).name,count:t+s}})}}class Ba{constructor(e,t,i){this.event=e,this.old_delay=t,this.new_delay=i,this.description="Edit delay of event "+e.id}undo(){this.event.set_delay(this.old_delay)}redo(){this.event.set_delay(this.new_delay)}}class Pa{constructor(e,t,i,s){this.store=e,this.quest=t,this.event_dag=i,this.event=s,this.new_edges=[],this.description="Delete event "+s.id,this.parents=i.get_parents(s).slice(),this.children=i.get_children(s).slice();for(const e of this.parents){const t=i.get_children(e);for(const i of this.children)t.includes(i)||this.new_edges.push({parent:e,child:i})}this.npcs=t.npcs.val.filter(e=>e.wave.val===s.wave),this.event_index=i.get_index(s)}undo(){this.quest.insert_event(this.event_index,this.event,this.parents,this.children);for(const{parent:e,child:t}of this.new_edges)this.event_dag.remove_edge(e,t);for(const e of this.npcs)e.set_wave(this.event.wave)}redo(){this.store.selected_wave.val===this.event.wave&&this.store.set_selected_wave(void 0);for(const{parent:e,child:t}of this.new_edges)this.event_dag.add_edge(e,t);this.quest.remove_event(this.event_dag,this.event)}}class Wa{constructor(e,t,i,s){this.quest=e,this.event_dag=t,this.event=i,this.parent_event=s,this.description="Add event "+i.id}undo(){this.quest.remove_event(this.event_dag,this.event)}redo(){this.quest.add_event(this.event,this.parent_event?[this.parent_event]:[],[])}}class Ea extends Ir.a{constructor(e){super(),this.store=e,this.focused=()=>{this.store.undo.make_current()},this.add_event=()=>{var e,t,i,s;const o=this.store.current_quest.val,n=this.store.current_area.val;if(o&&n){const r=o.get_event_dag_or_create(n.id),a=r.events.find(e=>e.wave===this.store.selected_wave.val),d=null!==(s=null!==(e=null==a?void 0:a.section_id)&&void 0!==e?e:null===(i=null===(t=this.store.selected_entity.val)||void 0===t?void 0:t.section_id)||void 0===i?void 0:i.val)&&void 0!==s?s:1,c=[],l=[];for(const e of r.events)c.push(e.id),e.wave.section_id.val===d&&l.push(e.wave.id.val);c.sort((e,t)=>e-t),l.sort((e,t)=>e-t);let u,_=0;for(const e of l)if(++_!==e)break;if(_===l.length&&_++,a){let e=a;for(;;){const[t]=r.get_parents(e);if(!t)break;e=t}const t=r.get_sub_graph(e).length.val;u=`${e.id}${t}`}else u=`${d}${_}`;let v=parseInt(u,10),h=0;for(;h=c.indexOf(v,h),-1!==h;)v++;this.store.undo.push(new Wa(o,r,new ha(v,d,new pa(_,n.id,d),30,0),a)).redo()}},this.remove_event=e=>{const t=this.store.current_quest.val,i=this.event_dag.val;t&&i&&this.store.undo.push(new Pa(this.store,t,i,e)).redo()},this.set_selected_wave=e=>{this.store.set_selected_wave(e)},this.set_delay=(e,t)=>{this.store.undo.push(new Ba(e,e.delay.val,t)).redo()},this.enabled=e.quest_runner.running.map(e=>!e),this.unavailable=e.current_quest.map(e=>null==e),this.event_dag=Object(le.d)((e,t)=>e&&t?e.event_dags.get(t.id):void 0,e.current_quest,e.current_area),this.event_sub_graphs=Object(le.b)(e=>{var t;return null!==(t=null==e?void 0:e.connected_sub_graphs)&&void 0!==t?t:Object(le.c)()},this.event_dag)}is_selected(e){return this.store.selected_wave.map(t=>e.wave===t)}add_action(e,t){let i;switch(t){case Wt.SpawnNpcs:i=new Mt(0,0);break;case Wt.Unlock:i=new Ut(0);break;case Wt.Lock:i=new Vt(0)}e.add_action(i)}remove_action(e,t){e.remove_action(t)}}class qa extends Ir.a{constructor(e,t,i){super(),this.quest_editor_store=t,this.log_store=i,this.debug=()=>{const e=this.quest_editor_store.current_quest.val;e&&this.quest_editor_store.quest_runner.run(e)},this.resume=()=>{this.quest_editor_store.quest_runner.resume()},this.step_over=()=>{this.quest_editor_store.quest_runner.step_over()},this.step_in=()=>{this.quest_editor_store.quest_runner.step_into()},this.step_out=()=>{this.quest_editor_store.quest_runner.step_out()},this.stop=()=>{this.quest_editor_store.quest_runner.stop()},this.set_severity=e=>{this.log_store.set_severity(e)},this.select_thread=e=>{this.quest_editor_store.quest_runner.show_thread_location(e)},this.can_debug=t.current_quest.map(e=>null!=e),this.can_step=t.quest_runner.paused,this.can_stop=t.quest_runner.running,this.threads=Object(le.d)((e,t)=>e.map(e=>({id:e,label:`Thread #${e} (${t===e?"Active":"Yielded"})`})),t.quest_runner.thread_ids,t.quest_runner.active_thread_id),this.selected_thread_id=Object(le.d)((e,t)=>e.find(e=>e.id===t),this.threads,t.quest_runner.shown_thread_id),this.can_select_thread=t.quest_runner.thread_ids.map(e=>e.length>0&&t.quest_runner.running.val),this.log=i.log,this.severity=i.severity,this.disposables(e.on_global_keydown(Ft.b.QuestEditor,"F5",this.debug),e.on_global_keydown(Ft.b.QuestEditor,"Shift-F5",this.stop),e.on_global_keydown(Ft.b.QuestEditor,"F6",this.resume),e.on_global_keydown(Ft.b.QuestEditor,"F10",this.step_over),e.on_global_keydown(Ft.b.QuestEditor,"F11",this.step_in),e.on_global_keydown(Ft.b.QuestEditor,"Shift-F11",this.step_out))}}const Ma=P.a.get("quest_editor/stores/LogStore");class Ua extends un.a{constructor(){super(...arguments),this.log_buffer=[],this.logger_name_buffer=[],this._severity=Object(le.e)($o.b.Info),this._log=Object(le.c)(),this.handler=(e,t)=>{this.buffer_log_entry(e,t)},this.severity=this._severity,this.log=this._log.filtered(this.severity.map(e=>t=>t.severity>=e))}dispose(){super.dispose(),null!=this.animation_frame&&(cancelAnimationFrame(this.animation_frame),this.animation_frame=void 0)}get_logger(e){const t=P.a.get(e);return t.handler=this.handler,t}set_severity(e){this._severity.val=e}buffer_log_entry(e,t){this.log_buffer.push(e),this.logger_name_buffer.push(t),this.add_buffered_log_entries()}add_buffered_log_entries(){null!=this.animation_frame||this.disposed||(this.animation_frame=requestAnimationFrame(()=>{if(this.log_buffer.length>500){const e=this.log_buffer.length-500;this.log_buffer.splice(250,e,{time:new Date,message:`...dropped ${e} messages...`,severity:$o.b.Warning,logger:Ma}),this.logger_name_buffer.splice(250,e,"quest_editor/stores/LogStore")}const e=Math.min(200,this.log_buffer.length),t=this.log_buffer.splice(0,e),i=this.logger_name_buffer.splice(0,e);this._log.push(...t);for(let s=0;s<e;s++){const e=t[s];if(e.severity>=P.a.default_severity){const t=i[s];P.a.default_handler(e,t)}}this._log.length.val>2e3&&this._log.splice(0,1e3),this.animation_frame=void 0,this.log_buffer.length&&this.add_buffered_log_entries()}))}}class Va{constructor(e){this.http_client=e,this.cache=new Vn}load_default_quest(e){if(e===n.b.II)throw new Error("Episode II not yet supported.");if(e===n.b.IV)throw new Error("Episode IV not yet supported.");return this.load_quest("/defaults/default_ep_1.qst")}dispose(){this.cache.dispose()}load_quest(e){return this.cache.get_or_set(e,()=>this.http_client.get("/quests"+e).array_buffer()).then(t=>{const i=Object(xr.e)(ca(new W.a(t,D.a.Little)));return Object(B.d)(i,()=>`Quest "${e}" can't be parsed.`),i.quest})}}function Na(e,t,i){const s=new a.a,o=s.add(new Va(e)),n=s.add(new Qn(e)),r=s.add(new vr(e)),d=s.add(new En(n)),c=s.add(new Ua),l=s.add(new hn(t,d,c)),u=s.add(new xn(l)),_=new gr,v=s.add(new or(r,i));return{view:s.add(new en(t,l,_,s.add(new wr(s.add(new Ia(o,t,d,l)))),()=>new f(s.add(new Ca(l))),()=>new m(s.add(new La(l))),()=>new ft(l,n,r,i()),()=>new Tt(t,l.quest_runner,u),()=>new Ct(s.add(new Oa(l))),()=>new Dt(l,v),()=>new Ot(l,v),()=>new Qt(s.add(new Ea(l))),()=>new Qo(l,n,r,i()),()=>new Go(s.add(new qa(t,l,c))),()=>new Ao(l.quest_runner))),dispose(){s.dispose()}}}}}]);