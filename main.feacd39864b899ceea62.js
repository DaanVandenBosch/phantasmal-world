(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+LO4":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")).default.get("core/observable/property/AbstractMinimalProperty");t.AbstractMinimalProperty=class{constructor(){this.is_property=!0,this.observers=[]}observe(e,t){return this.observers.includes(e)||this.observers.push(e),t&&t.call_now&&this.call_observer(e,this.val,this.val),{dispose:()=>{const t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)}}}emit(e){const t=this.val;for(const i of this.observers)this.call_observer(i,t,e)}call_observer(e,t,i){try{e({value:t,old_value:i})}catch(e){s.error("Observer threw error.",e)}}}},"+oIp":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("xs7i");var s;!function(e){e[e.Unknown=1e3]="Unknown",e[e.PlayerSet=1001]="PlayerSet",e[e.Particle=1002]="Particle",e[e.Teleporter=1003]="Teleporter",e[e.Warp=1004]="Warp",e[e.LightCollision=1005]="LightCollision",e[e.Item=1006]="Item",e[e.EnvSound=1007]="EnvSound",e[e.FogCollision=1008]="FogCollision",e[e.EventCollision=1009]="EventCollision",e[e.CharaCollision=1010]="CharaCollision",e[e.ElementalTrap=1011]="ElementalTrap",e[e.StatusTrap=1012]="StatusTrap",e[e.HealTrap=1013]="HealTrap",e[e.LargeElementalTrap=1014]="LargeElementalTrap",e[e.ObjRoomID=1015]="ObjRoomID",e[e.Sensor=1016]="Sensor",e[e.UnknownItem16=1017]="UnknownItem16",e[e.LensFlare=1018]="LensFlare",e[e.ScriptCollision=1019]="ScriptCollision",e[e.HealRing=1020]="HealRing",e[e.MapCollision=1021]="MapCollision",e[e.ScriptCollisionA=1022]="ScriptCollisionA",e[e.ItemLight=1023]="ItemLight",e[e.RadarCollision=1024]="RadarCollision",e[e.FogCollisionSW=1025]="FogCollisionSW",e[e.BossTeleporter=1026]="BossTeleporter",e[e.ImageBoard=1027]="ImageBoard",e[e.QuestWarp=1028]="QuestWarp",e[e.Epilogue=1029]="Epilogue",e[e.UnknownItem29=1030]="UnknownItem29",e[e.UnknownItem30=1031]="UnknownItem30",e[e.UnknownItem31=1032]="UnknownItem31",e[e.BoxDetectObject=1033]="BoxDetectObject",e[e.SymbolChatObject=1034]="SymbolChatObject",e[e.TouchPlateObject=1035]="TouchPlateObject",e[e.TargetableObject=1036]="TargetableObject",e[e.EffectObject=1037]="EffectObject",e[e.CountDownObject=1038]="CountDownObject",e[e.UnknownItem38=1039]="UnknownItem38",e[e.UnknownItem39=1040]="UnknownItem39",e[e.UnknownItem40=1041]="UnknownItem40",e[e.UnknownItem41=1042]="UnknownItem41",e[e.MenuActivation=1043]="MenuActivation",e[e.TelepipeLocation=1044]="TelepipeLocation",e[e.BGMCollision=1045]="BGMCollision",e[e.MainRagolTeleporter=1046]="MainRagolTeleporter",e[e.LobbyTeleporter=1047]="LobbyTeleporter",e[e.PrincipalWarp=1048]="PrincipalWarp",e[e.ShopDoor=1049]="ShopDoor",e[e.HuntersGuildDoor=1050]="HuntersGuildDoor",e[e.TeleporterDoor=1051]="TeleporterDoor",e[e.MedicalCenterDoor=1052]="MedicalCenterDoor",e[e.Elevator=1053]="Elevator",e[e.EasterEgg=1054]="EasterEgg",e[e.ValentinesHeart=1055]="ValentinesHeart",e[e.ChristmasTree=1056]="ChristmasTree",e[e.ChristmasWreath=1057]="ChristmasWreath",e[e.HalloweenPumpkin=1058]="HalloweenPumpkin",e[e.TwentyFirstCentury=1059]="TwentyFirstCentury",e[e.Sonic=1060]="Sonic",e[e.WelcomeBoard=1061]="WelcomeBoard",e[e.Firework=1062]="Firework",e[e.LobbyScreenDoor=1063]="LobbyScreenDoor",e[e.MainRagolTeleporterBattleInNextArea=1064]="MainRagolTeleporterBattleInNextArea",e[e.LabTeleporterDoor=1065]="LabTeleporterDoor",e[e.Pioneer2InvisibleTouchplate=1066]="Pioneer2InvisibleTouchplate",e[e.ForestDoor=1067]="ForestDoor",e[e.ForestSwitch=1068]="ForestSwitch",e[e.LaserFence=1069]="LaserFence",e[e.LaserSquareFence=1070]="LaserSquareFence",e[e.ForestLaserFenceSwitch=1071]="ForestLaserFenceSwitch",e[e.LightRays=1072]="LightRays",e[e.BlueButterfly=1073]="BlueButterfly",e[e.Probe=1074]="Probe",e[e.RandomTypeBox1=1075]="RandomTypeBox1",e[e.ForestWeatherStation=1076]="ForestWeatherStation",e[e.Battery=1077]="Battery",e[e.ForestConsole=1078]="ForestConsole",e[e.BlackSlidingDoor=1079]="BlackSlidingDoor",e[e.RicoMessagePod=1080]="RicoMessagePod",e[e.EnergyBarrier=1081]="EnergyBarrier",e[e.ForestRisingBridge=1082]="ForestRisingBridge",e[e.SwitchNoneDoor=1083]="SwitchNoneDoor",e[e.EnemyBoxGrey=1084]="EnemyBoxGrey",e[e.FixedTypeBox=1085]="FixedTypeBox",e[e.EnemyBoxBrown=1086]="EnemyBoxBrown",e[e.EmptyTypeBox=1087]="EmptyTypeBox",e[e.LaserFenceEx=1088]="LaserFenceEx",e[e.LaserSquareFenceEx=1089]="LaserSquareFenceEx",e[e.FloorPanel1=1090]="FloorPanel1",e[e.Caves4ButtonDoor=1091]="Caves4ButtonDoor",e[e.CavesNormalDoor=1092]="CavesNormalDoor",e[e.CavesSmashingPillar=1093]="CavesSmashingPillar",e[e.CavesSign1=1094]="CavesSign1",e[e.CavesSign2=1095]="CavesSign2",e[e.CavesSign3=1096]="CavesSign3",e[e.HexagonalTank=1097]="HexagonalTank",e[e.BrownPlatform=1098]="BrownPlatform",e[e.WarningLightObject=1099]="WarningLightObject",e[e.Rainbow=1100]="Rainbow",e[e.FloatingJellyfish=1101]="FloatingJellyfish",e[e.FloatingDragonfly=1102]="FloatingDragonfly",e[e.CavesSwitchDoor=1103]="CavesSwitchDoor",e[e.RobotRechargeStation=1104]="RobotRechargeStation",e[e.CavesCakeShop=1105]="CavesCakeShop",e[e.Caves1SmallRedRock=1106]="Caves1SmallRedRock",e[e.Caves1MediumRedRock=1107]="Caves1MediumRedRock",e[e.Caves1LargeRedRock=1108]="Caves1LargeRedRock",e[e.Caves2SmallRock1=1109]="Caves2SmallRock1",e[e.Caves2MediumRock1=1110]="Caves2MediumRock1",e[e.Caves2LargeRock1=1111]="Caves2LargeRock1",e[e.Caves2SmallRock2=1112]="Caves2SmallRock2",e[e.Caves2MediumRock2=1113]="Caves2MediumRock2",e[e.Caves2LargeRock2=1114]="Caves2LargeRock2",e[e.Caves3SmallRock=1115]="Caves3SmallRock",e[e.Caves3MediumRock=1116]="Caves3MediumRock",e[e.Caves3LargeRock=1117]="Caves3LargeRock",e[e.FloorPanel2=1118]="FloorPanel2",e[e.DestructableRockCaves1=1119]="DestructableRockCaves1",e[e.DestructableRockCaves2=1120]="DestructableRockCaves2",e[e.DestructableRockCaves3=1121]="DestructableRockCaves3",e[e.MinesDoor=1122]="MinesDoor",e[e.FloorPanel3=1123]="FloorPanel3",e[e.MinesSwitchDoor=1124]="MinesSwitchDoor",e[e.LargeCryoTube=1125]="LargeCryoTube",e[e.ComputerLikeCalus=1126]="ComputerLikeCalus",e[e.GreenScreenOpeningAndClosing=1127]="GreenScreenOpeningAndClosing",e[e.FloatingRobot=1128]="FloatingRobot",e[e.FloatingBlueLight=1129]="FloatingBlueLight",e[e.SelfDestructingObject1=1130]="SelfDestructingObject1",e[e.SelfDestructingObject2=1131]="SelfDestructingObject2",e[e.SelfDestructingObject3=1132]="SelfDestructingObject3",e[e.SparkMachine=1133]="SparkMachine",e[e.MinesLargeFlashingCrate=1134]="MinesLargeFlashingCrate",e[e.RuinsSeal=1135]="RuinsSeal",e[e.RuinsTeleporter=1136]="RuinsTeleporter",e[e.RuinsWarpSiteToSite=1137]="RuinsWarpSiteToSite",e[e.RuinsSwitch=1138]="RuinsSwitch",e[e.FloorPanel4=1139]="FloorPanel4",e[e.Ruins1Door=1140]="Ruins1Door",e[e.Ruins3Door=1141]="Ruins3Door",e[e.Ruins2Door=1142]="Ruins2Door",e[e.Ruins11ButtonDoor=1143]="Ruins11ButtonDoor",e[e.Ruins21ButtonDoor=1144]="Ruins21ButtonDoor",e[e.Ruins31ButtonDoor=1145]="Ruins31ButtonDoor",e[e.Ruins4ButtonDoor=1146]="Ruins4ButtonDoor",e[e.Ruins2ButtonDoor=1147]="Ruins2ButtonDoor",e[e.RuinsSensor=1148]="RuinsSensor",e[e.RuinsFenceSwitch=1149]="RuinsFenceSwitch",e[e.RuinsLaserFence4x2=1150]="RuinsLaserFence4x2",e[e.RuinsLaserFence6x2=1151]="RuinsLaserFence6x2",e[e.RuinsLaserFence4x4=1152]="RuinsLaserFence4x4",e[e.RuinsLaserFence6x4=1153]="RuinsLaserFence6x4",e[e.RuinsPoisonBlob=1154]="RuinsPoisonBlob",e[e.RuinsPillarTrap=1155]="RuinsPillarTrap",e[e.PopupTrapNoTech=1156]="PopupTrapNoTech",e[e.RuinsCrystal=1157]="RuinsCrystal",e[e.Monument=1158]="Monument",e[e.RuinsRock1=1159]="RuinsRock1",e[e.RuinsRock2=1160]="RuinsRock2",e[e.RuinsRock3=1161]="RuinsRock3",e[e.RuinsRock4=1162]="RuinsRock4",e[e.RuinsRock5=1163]="RuinsRock5",e[e.RuinsRock6=1164]="RuinsRock6",e[e.RuinsRock7=1165]="RuinsRock7",e[e.Poison=1166]="Poison",e[e.FixedBoxTypeRuins=1167]="FixedBoxTypeRuins",e[e.RandomBoxTypeRuins=1168]="RandomBoxTypeRuins",e[e.EnemyTypeBoxYellow=1169]="EnemyTypeBoxYellow",e[e.EnemyTypeBoxBlue=1170]="EnemyTypeBoxBlue",e[e.EmptyTypeBoxBlue=1171]="EmptyTypeBoxBlue",e[e.DestructableRock=1172]="DestructableRock",e[e.PopupTrapsTechs=1173]="PopupTrapsTechs",e[e.FlyingWhiteBird=1174]="FlyingWhiteBird",e[e.Tower=1175]="Tower",e[e.FloatingRocks=1176]="FloatingRocks",e[e.FloatingSoul=1177]="FloatingSoul",e[e.Butterfly=1178]="Butterfly",e[e.LobbyGameMenu=1179]="LobbyGameMenu",e[e.LobbyWarpObject=1180]="LobbyWarpObject",e[e.Lobby1EventObjectDefaultTree=1181]="Lobby1EventObjectDefaultTree",e[e.UnknownItem387=1182]="UnknownItem387",e[e.UnknownItem388=1183]="UnknownItem388",e[e.UnknownItem389=1184]="UnknownItem389",e[e.LobbyEventObjectStaticPumpkin=1185]="LobbyEventObjectStaticPumpkin",e[e.LobbyEventObject3ChristmasWindows=1186]="LobbyEventObject3ChristmasWindows",e[e.LobbyEventObjectRedAndWhiteCurtain=1187]="LobbyEventObjectRedAndWhiteCurtain",e[e.UnknownItem393=1188]="UnknownItem393",e[e.UnknownItem394=1189]="UnknownItem394",e[e.LobbyFishTank=1190]="LobbyFishTank",e[e.LobbyEventObjectButterflies=1191]="LobbyEventObjectButterflies",e[e.UnknownItem400=1192]="UnknownItem400",e[e.GreyWallLow=1193]="GreyWallLow",e[e.SpaceshipDoor=1194]="SpaceshipDoor",e[e.GreyWallHigh=1195]="GreyWallHigh",e[e.TempleNormalDoor=1196]="TempleNormalDoor",e[e.BreakableWallWallButUnbreakable=1197]="BreakableWallWallButUnbreakable",e[e.BrokenCylinderAndRubble=1198]="BrokenCylinderAndRubble",e[e.ThreeBrokenWallPiecesOnFloor=1199]="ThreeBrokenWallPiecesOnFloor",e[e.HighBrickCylinder=1200]="HighBrickCylinder",e[e.LyingCylinder=1201]="LyingCylinder",e[e.BrickConeWithFlatTop=1202]="BrickConeWithFlatTop",e[e.BreakableTempleWall=1203]="BreakableTempleWall",e[e.TempleMapDetect=1204]="TempleMapDetect",e[e.SmallBrownBrickRisingBridge=1205]="SmallBrownBrickRisingBridge",e[e.LongRisingBridgeWithPinkHighEdges=1206]="LongRisingBridgeWithPinkHighEdges",e[e.FourSwitchTempleDoor=1207]="FourSwitchTempleDoor",e[e.FourButtonSpaceshipDoor=1208]="FourButtonSpaceshipDoor",e[e.ItemBoxCca=1209]="ItemBoxCca",e[e.TeleporterEp2=1210]="TeleporterEp2",e[e.CCADoor=1211]="CCADoor",e[e.SpecialBoxCCA=1212]="SpecialBoxCCA",e[e.BigCCADoor=1213]="BigCCADoor",e[e.BigCCADoorSwitch=1214]="BigCCADoorSwitch",e[e.LittleRock=1215]="LittleRock",e[e.Little3StoneWall=1216]="Little3StoneWall",e[e.Medium3StoneWall=1217]="Medium3StoneWall",e[e.SpiderPlant=1218]="SpiderPlant",e[e.CCAAreaTeleporter=1219]="CCAAreaTeleporter",e[e.UnknownItem523=1220]="UnknownItem523",e[e.WhiteBird=1221]="WhiteBird",e[e.OrangeBird=1222]="OrangeBird",e[e.Saw=1223]="Saw",e[e.LaserDetect=1224]="LaserDetect",e[e.UnknownItem529=1225]="UnknownItem529",e[e.UnknownItem530=1226]="UnknownItem530",e[e.Seagull=1227]="Seagull",e[e.Fish=1228]="Fish",e[e.SeabedDoorWithBlueEdges=1229]="SeabedDoorWithBlueEdges",e[e.SeabedDoorAlwaysOpenNonTriggerable=1230]="SeabedDoorAlwaysOpenNonTriggerable",e[e.LittleCryotube=1231]="LittleCryotube",e[e.WideGlassWallBreakable=1232]="WideGlassWallBreakable",e[e.BlueFloatingRobot=1233]="BlueFloatingRobot",e[e.RedFloatingRobot=1234]="RedFloatingRobot",e[e.Dolphin=1235]="Dolphin",e[e.CaptureTrap=1236]="CaptureTrap",e[e.VRLink=1237]="VRLink",e[e.UnknownItem576=1238]="UnknownItem576",e[e.WarpInBarbaRayRoom=1239]="WarpInBarbaRayRoom",e[e.UnknownItem672=1240]="UnknownItem672",e[e.GeeNest=1241]="GeeNest",e[e.LabComputerConsole=1242]="LabComputerConsole",e[e.LabComputerConsoleGreenScreen=1243]="LabComputerConsoleGreenScreen",e[e.ChairYellowPillow=1244]="ChairYellowPillow",e[e.OrangeWallWithHoleInMiddle=1245]="OrangeWallWithHoleInMiddle",e[e.GreyWallWithHoleInMiddle=1246]="GreyWallWithHoleInMiddle",e[e.LongTable=1247]="LongTable",e[e.GBAStation=1248]="GBAStation",e[e.TalkLinkToSupport=1249]="TalkLinkToSupport",e[e.InstaWarp=1250]="InstaWarp",e[e.LabInvisibleObject=1251]="LabInvisibleObject",e[e.LabGlassWindowDoor=1252]="LabGlassWindowDoor",e[e.UnknownItem700=1253]="UnknownItem700",e[e.LabCeilingWarp=1254]="LabCeilingWarp",e[e.Ep4LightSource=1255]="Ep4LightSource",e[e.Cacti=1256]="Cacti",e[e.BigBrownRock=1257]="BigBrownRock",e[e.BreakableBrownRock=1258]="BreakableBrownRock",e[e.UnknownItem832=1259]="UnknownItem832",e[e.UnknownItem833=1260]="UnknownItem833",e[e.PoisonPlant=1261]="PoisonPlant",e[e.UnknownItem897=1262]="UnknownItem897",e[e.UnknownItem898=1263]="UnknownItem898",e[e.OozingDesertPlant=1264]="OozingDesertPlant",e[e.UnknownItem901=1265]="UnknownItem901",e[e.BigBlackRocks=1266]="BigBlackRocks",e[e.UnknownItem903=1267]="UnknownItem903",e[e.UnknownItem904=1268]="UnknownItem904",e[e.UnknownItem905=1269]="UnknownItem905",e[e.UnknownItem906=1270]="UnknownItem906",e[e.FallingRock=1271]="FallingRock",e[e.DesertPlantHasCollision=1272]="DesertPlantHasCollision",e[e.DesertFixedTypeBoxBreakableCrystals=1273]="DesertFixedTypeBoxBreakableCrystals",e[e.UnknownItem910=1274]="UnknownItem910",e[e.BeeHive=1275]="BeeHive",e[e.UnknownItem912=1276]="UnknownItem912",e[e.Heat=1277]="Heat",e[e.TopOfSaintMillionEgg=1278]="TopOfSaintMillionEgg",e[e.UnknownItem961=1279]="UnknownItem961"}(s=t.ObjectType||(t.ObjectType={})),t.OBJECT_TYPES=[],t.object_data=function(e){return n[e]},t.pso_id_to_object_type=function(e){switch(e){default:return s.Unknown;case 0:return s.PlayerSet;case 1:return s.Particle;case 2:return s.Teleporter;case 3:return s.Warp;case 4:return s.LightCollision;case 5:return s.Item;case 6:return s.EnvSound;case 7:return s.FogCollision;case 8:return s.EventCollision;case 9:return s.CharaCollision;case 10:return s.ElementalTrap;case 11:return s.StatusTrap;case 12:return s.HealTrap;case 13:return s.LargeElementalTrap;case 14:return s.ObjRoomID;case 15:return s.Sensor;case 16:return s.UnknownItem16;case 17:return s.LensFlare;case 18:return s.ScriptCollision;case 19:return s.HealRing;case 20:return s.MapCollision;case 21:return s.ScriptCollisionA;case 22:return s.ItemLight;case 23:return s.RadarCollision;case 24:return s.FogCollisionSW;case 25:return s.BossTeleporter;case 26:return s.ImageBoard;case 27:return s.QuestWarp;case 28:return s.Epilogue;case 29:return s.UnknownItem29;case 30:return s.UnknownItem30;case 31:return s.UnknownItem31;case 32:return s.BoxDetectObject;case 33:return s.SymbolChatObject;case 34:return s.TouchPlateObject;case 35:return s.TargetableObject;case 36:return s.EffectObject;case 37:return s.CountDownObject;case 38:return s.UnknownItem38;case 39:return s.UnknownItem39;case 40:return s.UnknownItem40;case 41:return s.UnknownItem41;case 64:return s.MenuActivation;case 65:return s.TelepipeLocation;case 66:return s.BGMCollision;case 67:return s.MainRagolTeleporter;case 68:return s.LobbyTeleporter;case 69:return s.PrincipalWarp;case 70:return s.ShopDoor;case 71:return s.HuntersGuildDoor;case 72:return s.TeleporterDoor;case 73:return s.MedicalCenterDoor;case 74:return s.Elevator;case 75:return s.EasterEgg;case 76:return s.ValentinesHeart;case 77:return s.ChristmasTree;case 78:return s.ChristmasWreath;case 79:return s.HalloweenPumpkin;case 80:return s.TwentyFirstCentury;case 81:return s.Sonic;case 82:return s.WelcomeBoard;case 83:return s.Firework;case 84:return s.LobbyScreenDoor;case 85:return s.MainRagolTeleporterBattleInNextArea;case 86:return s.LabTeleporterDoor;case 87:return s.Pioneer2InvisibleTouchplate;case 128:return s.ForestDoor;case 129:return s.ForestSwitch;case 130:return s.LaserFence;case 131:return s.LaserSquareFence;case 132:return s.ForestLaserFenceSwitch;case 133:return s.LightRays;case 134:return s.BlueButterfly;case 135:return s.Probe;case 136:return s.RandomTypeBox1;case 137:return s.ForestWeatherStation;case 138:return s.Battery;case 139:return s.ForestConsole;case 140:return s.BlackSlidingDoor;case 141:return s.RicoMessagePod;case 142:return s.EnergyBarrier;case 143:return s.ForestRisingBridge;case 144:return s.SwitchNoneDoor;case 145:return s.EnemyBoxGrey;case 146:return s.FixedTypeBox;case 147:return s.EnemyBoxBrown;case 149:return s.EmptyTypeBox;case 150:return s.LaserFenceEx;case 151:return s.LaserSquareFenceEx;case 192:return s.FloorPanel1;case 193:return s.Caves4ButtonDoor;case 194:return s.CavesNormalDoor;case 195:return s.CavesSmashingPillar;case 196:return s.CavesSign1;case 197:return s.CavesSign2;case 198:return s.CavesSign3;case 199:return s.HexagonalTank;case 200:return s.BrownPlatform;case 201:return s.WarningLightObject;case 203:return s.Rainbow;case 204:return s.FloatingJellyfish;case 205:return s.FloatingDragonfly;case 206:return s.CavesSwitchDoor;case 207:return s.RobotRechargeStation;case 208:return s.CavesCakeShop;case 209:return s.Caves1SmallRedRock;case 210:return s.Caves1MediumRedRock;case 211:return s.Caves1LargeRedRock;case 212:return s.Caves2SmallRock1;case 213:return s.Caves2MediumRock1;case 214:return s.Caves2LargeRock1;case 215:return s.Caves2SmallRock2;case 216:return s.Caves2MediumRock2;case 217:return s.Caves2LargeRock2;case 218:return s.Caves3SmallRock;case 219:return s.Caves3MediumRock;case 220:return s.Caves3LargeRock;case 222:return s.FloorPanel2;case 223:return s.DestructableRockCaves1;case 224:return s.DestructableRockCaves2;case 225:return s.DestructableRockCaves3;case 256:return s.MinesDoor;case 257:return s.FloorPanel3;case 258:return s.MinesSwitchDoor;case 259:return s.LargeCryoTube;case 260:return s.ComputerLikeCalus;case 261:return s.GreenScreenOpeningAndClosing;case 262:return s.FloatingRobot;case 263:return s.FloatingBlueLight;case 264:return s.SelfDestructingObject1;case 265:return s.SelfDestructingObject2;case 266:return s.SelfDestructingObject3;case 267:return s.SparkMachine;case 268:return s.MinesLargeFlashingCrate;case 304:return s.RuinsSeal;case 320:return s.RuinsTeleporter;case 321:return s.RuinsWarpSiteToSite;case 322:return s.RuinsSwitch;case 323:return s.FloorPanel4;case 324:return s.Ruins1Door;case 325:return s.Ruins3Door;case 326:return s.Ruins2Door;case 327:return s.Ruins11ButtonDoor;case 328:return s.Ruins21ButtonDoor;case 329:return s.Ruins31ButtonDoor;case 330:return s.Ruins4ButtonDoor;case 331:return s.Ruins2ButtonDoor;case 332:return s.RuinsSensor;case 333:return s.RuinsFenceSwitch;case 334:return s.RuinsLaserFence4x2;case 335:return s.RuinsLaserFence6x2;case 336:return s.RuinsLaserFence4x4;case 337:return s.RuinsLaserFence6x4;case 338:return s.RuinsPoisonBlob;case 339:return s.RuinsPillarTrap;case 340:return s.PopupTrapNoTech;case 341:return s.RuinsCrystal;case 342:return s.Monument;case 345:return s.RuinsRock1;case 346:return s.RuinsRock2;case 347:return s.RuinsRock3;case 348:return s.RuinsRock4;case 349:return s.RuinsRock5;case 350:return s.RuinsRock6;case 351:return s.RuinsRock7;case 352:return s.Poison;case 353:return s.FixedBoxTypeRuins;case 354:return s.RandomBoxTypeRuins;case 355:return s.EnemyTypeBoxYellow;case 356:return s.EnemyTypeBoxBlue;case 357:return s.EmptyTypeBoxBlue;case 358:return s.DestructableRock;case 359:return s.PopupTrapsTechs;case 368:return s.FlyingWhiteBird;case 369:return s.Tower;case 370:return s.FloatingRocks;case 371:return s.FloatingSoul;case 372:return s.Butterfly;case 384:return s.LobbyGameMenu;case 385:return s.LobbyWarpObject;case 386:return s.Lobby1EventObjectDefaultTree;case 387:return s.UnknownItem387;case 388:return s.UnknownItem388;case 389:return s.UnknownItem389;case 390:return s.LobbyEventObjectStaticPumpkin;case 391:return s.LobbyEventObject3ChristmasWindows;case 392:return s.LobbyEventObjectRedAndWhiteCurtain;case 393:return s.UnknownItem393;case 394:return s.UnknownItem394;case 395:return s.LobbyFishTank;case 396:return s.LobbyEventObjectButterflies;case 400:return s.UnknownItem400;case 401:return s.GreyWallLow;case 402:return s.SpaceshipDoor;case 403:return s.GreyWallHigh;case 416:return s.TempleNormalDoor;case 417:return s.BreakableWallWallButUnbreakable;case 418:return s.BrokenCylinderAndRubble;case 419:return s.ThreeBrokenWallPiecesOnFloor;case 420:return s.HighBrickCylinder;case 421:return s.LyingCylinder;case 422:return s.BrickConeWithFlatTop;case 423:return s.BreakableTempleWall;case 424:return s.TempleMapDetect;case 425:return s.SmallBrownBrickRisingBridge;case 426:return s.LongRisingBridgeWithPinkHighEdges;case 427:return s.FourSwitchTempleDoor;case 448:return s.FourButtonSpaceshipDoor;case 512:return s.ItemBoxCca;case 513:return s.TeleporterEp2;case 514:return s.CCADoor;case 515:return s.SpecialBoxCCA;case 516:return s.BigCCADoor;case 517:return s.BigCCADoorSwitch;case 518:return s.LittleRock;case 519:return s.Little3StoneWall;case 520:return s.Medium3StoneWall;case 521:return s.SpiderPlant;case 522:return s.CCAAreaTeleporter;case 523:return s.UnknownItem523;case 524:return s.WhiteBird;case 525:return s.OrangeBird;case 527:return s.Saw;case 528:return s.LaserDetect;case 529:return s.UnknownItem529;case 530:return s.UnknownItem530;case 531:return s.Seagull;case 544:return s.Fish;case 545:return s.SeabedDoorWithBlueEdges;case 546:return s.SeabedDoorAlwaysOpenNonTriggerable;case 547:return s.LittleCryotube;case 548:return s.WideGlassWallBreakable;case 549:return s.BlueFloatingRobot;case 550:return s.RedFloatingRobot;case 551:return s.Dolphin;case 552:return s.CaptureTrap;case 553:return s.VRLink;case 576:return s.UnknownItem576;case 640:return s.WarpInBarbaRayRoom;case 672:return s.UnknownItem672;case 688:return s.GeeNest;case 689:return s.LabComputerConsole;case 690:return s.LabComputerConsoleGreenScreen;case 691:return s.ChairYellowPillow;case 692:return s.OrangeWallWithHoleInMiddle;case 693:return s.GreyWallWithHoleInMiddle;case 694:return s.LongTable;case 695:return s.GBAStation;case 696:return s.TalkLinkToSupport;case 697:return s.InstaWarp;case 698:return s.LabInvisibleObject;case 699:return s.LabGlassWindowDoor;case 700:return s.UnknownItem700;case 701:return s.LabCeilingWarp;case 768:return s.Ep4LightSource;case 769:return s.Cacti;case 770:return s.BigBrownRock;case 771:return s.BreakableBrownRock;case 832:return s.UnknownItem832;case 833:return s.UnknownItem833;case 896:return s.PoisonPlant;case 897:return s.UnknownItem897;case 898:return s.UnknownItem898;case 899:return s.OozingDesertPlant;case 901:return s.UnknownItem901;case 902:return s.BigBlackRocks;case 903:return s.UnknownItem903;case 904:return s.UnknownItem904;case 905:return s.UnknownItem905;case 906:return s.UnknownItem906;case 907:return s.FallingRock;case 908:return s.DesertPlantHasCollision;case 909:return s.DesertFixedTypeBoxBreakableCrystals;case 910:return s.UnknownItem910;case 911:return s.BeeHive;case 912:return s.UnknownItem912;case 913:return s.Heat;case 960:return s.TopOfSaintMillionEgg;case 961:return s.UnknownItem961}};const n=[];function r(e,i,o,s){t.OBJECT_TYPES.push(e);const r=[];for(const[e,t]of s)r[e]=t;n[e]=Object.freeze({name:o,area_ids:r,pso_id:i})}r(s.Unknown,void 0,"Unknown",[]),r(s.PlayerSet,0,"Player Set",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9,0]]]),r(s.Particle,1,"Particle",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.Teleporter,2,"Teleporter",[[o.Episode.I,[0,1,2,3,4,5,6,7,11,12,13,14]],[o.Episode.II,[0,1,2,3,4,12,13,14,15]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9,0]]]),r(s.Warp,3,"Warp",[[o.Episode.I,[0,1,2,3,4,5,6,7,11,12,13,14,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9,0]]]),r(s.LightCollision,4,"Light Collision",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,15,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.Item,5,"Item",[]),r(s.EnvSound,6,"Env Sound",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,13]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.FogCollision,7,"Fog Collision",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.EventCollision,8,"Event Collision",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9,0]]]),r(s.CharaCollision,9,"Chara Collision",[[o.Episode.I,[0,1,2,3,4,5,8,9,10]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ElementalTrap,10,"Elemental Trap",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.StatusTrap,11,"Status Trap",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.HealTrap,12,"Heal Trap",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.LargeElementalTrap,13,"Large Elemental Trap",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.ObjRoomID,14,"Obj Room ID",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,11,12,13]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.Sensor,15,"Sensor",[[o.Episode.I,[1,2,4,5,6,7]]]),r(s.UnknownItem16,16,"Unknown Item (16)",[]),r(s.LensFlare,17,"Lens Flare",[[o.Episode.I,[1,2,3,4,8,14]]]),r(s.ScriptCollision,18,"Script Collision",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.HealRing,19,"Heal Ring",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.MapCollision,20,"Map Collision",[[o.Episode.I,[0,1,2,3,4,5,8,9,10,16,17]],[o.Episode.II,[0,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[0]]]),r(s.ScriptCollisionA,21,"Script Collision A",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.ItemLight,22,"Item Light",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.RadarCollision,23,"Radar Collision",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.FogCollisionSW,24,"Fog Collision SW",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.BossTeleporter,25,"Boss Teleporter",[[o.Episode.I,[0,2,5,7,10]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[5,6,7,8,0]]]),r(s.ImageBoard,26,"Image Board",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.QuestWarp,27,"Quest Warp",[[o.Episode.I,[1,2,3,4,5,6,7,11,12,13,14]],[o.Episode.IV,[9]]]),r(s.Epilogue,28,"Epilogue",[[o.Episode.I,[14]],[o.Episode.II,[13]],[o.Episode.IV,[9]]]),r(s.UnknownItem29,29,"Unknown Item (29)",[[o.Episode.I,[1]]]),r(s.UnknownItem30,30,"Unknown Item (30)",[[o.Episode.I,[1,2,17]],[o.Episode.II,[1,2,14]],[o.Episode.IV,[1,2,3,4,5]]]),r(s.UnknownItem31,31,"Unknown Item (31)",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.BoxDetectObject,32,"Box Detect Object",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.SymbolChatObject,33,"Symbol Chat Object",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.TouchPlateObject,34,"Touch plate Object",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.TargetableObject,35,"Targetable Object",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.EffectObject,36,"Effect object",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[0]]]),r(s.CountDownObject,37,"Count Down Object",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.UnknownItem38,38,"Unknown Item (38)",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.UnknownItem39,39,"Unknown Item (39)",[[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.UnknownItem40,40,"Unknown Item (40)",[[o.Episode.I,[0,1,2,4,5,6,7,8,9,10,13,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,13,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.UnknownItem41,41,"Unknown Item (41)",[[o.Episode.I,[0,1,2,4,5,6,7,8,9,10,13,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,13,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.MenuActivation,64,"Menu activation",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.TelepipeLocation,65,"Telepipe Location",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.BGMCollision,66,"BGM Collision",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.MainRagolTeleporter,67,"Main Ragol Teleporter",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.LobbyTeleporter,68,"Lobby Teleporter",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.PrincipalWarp,69,"Principal warp",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ShopDoor,70,"Shop Door",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.HuntersGuildDoor,71,"Hunter's Guild Door",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.TeleporterDoor,72,"Teleporter Door",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.MedicalCenterDoor,73,"Medical Center Door",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.Elevator,74,"Elevator",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.EasterEgg,75,"Easter Egg",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ValentinesHeart,76,"Valentines Heart",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ChristmasTree,77,"Christmas Tree",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ChristmasWreath,78,"Christmas Wreath",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.HalloweenPumpkin,79,"Halloween Pumpkin",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.TwentyFirstCentury,80,"21st Century",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.Sonic,81,"Sonic",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.WelcomeBoard,82,"Welcome Board",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.Firework,83,"Firework",[[o.Episode.I,[0]],[o.Episode.II,[0,16]],[o.Episode.IV,[0]]]),r(s.LobbyScreenDoor,84,"Lobby Screen Door",[[o.Episode.I,[0]],[o.Episode.IV,[0]]]),r(s.MainRagolTeleporterBattleInNextArea,85,"Main Ragol Teleporter (Battle in next area?)",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.LabTeleporterDoor,86,"Lab Teleporter Door",[[o.Episode.II,[0]]]),r(s.Pioneer2InvisibleTouchplate,87,"Pioneer 2 Invisible Touchplate",[[o.Episode.I,[0]],[o.Episode.II,[0]],[o.Episode.IV,[0]]]),r(s.ForestDoor,128,"Forest Door",[[o.Episode.I,[1,2]]]),r(s.ForestSwitch,129,"Forest Switch",[[o.Episode.I,[1,2,3,4,5]],[o.Episode.II,[1,2,3,4]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.LaserFence,130,"Laser Fence",[[o.Episode.I,[1,2,3,4,5,6,7,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.LaserSquareFence,131,"Laser Square Fence",[[o.Episode.I,[1,2,3,4,5,6,7,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.ForestLaserFenceSwitch,132,"Forest Laser Fence Switch",[[o.Episode.I,[1,2,3,4,5,6,7,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.LightRays,133,"Light rays",[[o.Episode.I,[1,2]],[o.Episode.II,[5,6,7,8,9]],[o.Episode.IV,[6,7,8]]]),r(s.BlueButterfly,134,"Blue Butterfly",[[o.Episode.I,[1,2]],[o.Episode.IV,[6,7,8]]]),r(s.Probe,135,"Probe",[[o.Episode.I,[1,2]]]),r(s.RandomTypeBox1,136,"Random Type Box 1",[[o.Episode.I,[1,2,3,4,5,6,7]],[o.Episode.II,[10,11,13]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.ForestWeatherStation,137,"Forest Weather Station",[[o.Episode.I,[1,2]]]),r(s.Battery,138,"Battery",[]),r(s.ForestConsole,139,"Forest Console",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.BlackSlidingDoor,140,"Black Sliding Door",[[o.Episode.I,[1,2,3]]]),r(s.RicoMessagePod,141,"Rico Message Pod",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,13]]]),r(s.EnergyBarrier,142,"Energy Barrier",[[o.Episode.I,[1,2,4,5,6,7]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.ForestRisingBridge,143,"Forest Rising Bridge",[[o.Episode.I,[1,2]]]),r(s.SwitchNoneDoor,144,"Switch (none door)",[[o.Episode.I,[1,2,6,7,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.EnemyBoxGrey,145,"Enemy Box (Grey)",[[o.Episode.I,[1,2,3,4,5,6,7]],[o.Episode.II,[10,11]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.FixedTypeBox,146,"Fixed Type Box",[[o.Episode.I,[1,2,3,4,5,6,7,11,12,13,14]],[o.Episode.II,[10,11,13]],[o.Episode.IV,[1,2,3,4,6,7,8,9]]]),r(s.EnemyBoxBrown,147,"Enemy Box (Brown)",[[o.Episode.I,[1,2,3,4,5,6,7]],[o.Episode.II,[10,11]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.EmptyTypeBox,149,"Empty Type Box",[[o.Episode.I,[1,2,3,4,5,6,7]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.LaserFenceEx,150,"Laser Fence Ex",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.LaserSquareFenceEx,151,"Laser Square Fence Ex",[]),r(s.FloorPanel1,192,"Floor Panel 1",[[o.Episode.I,[3,4,5,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.Caves4ButtonDoor,193,"Caves 4 Button door",[[o.Episode.I,[3,4,5]]]),r(s.CavesNormalDoor,194,"Caves Normal door",[[o.Episode.I,[3,4,5]]]),r(s.CavesSmashingPillar,195,"Caves Smashing Pillar",[[o.Episode.I,[3,4,5]],[o.Episode.II,[1,2,3,4,17]]]),r(s.CavesSign1,196,"Caves Sign 1",[[o.Episode.I,[4,5]]]),r(s.CavesSign2,197,"Caves Sign 2",[[o.Episode.I,[4,5]]]),r(s.CavesSign3,198,"Caves Sign 3",[[o.Episode.I,[4,5]]]),r(s.HexagonalTank,199,"Hexagonal Tank",[[o.Episode.I,[4,5]]]),r(s.BrownPlatform,200,"Brown Platform",[[o.Episode.I,[4,5]]]),r(s.WarningLightObject,201,"Warning Light Object",[[o.Episode.I,[4,5]],[o.Episode.IV,[5]]]),r(s.Rainbow,203,"Rainbow",[[o.Episode.I,[4]]]),r(s.FloatingJellyfish,204,"Floating Jellyfish",[[o.Episode.I,[4]],[o.Episode.II,[10,11]]]),r(s.FloatingDragonfly,205,"Floating Dragonfly",[[o.Episode.I,[4,16]],[o.Episode.II,[3,4]],[o.Episode.IV,[6,7,8]]]),r(s.CavesSwitchDoor,206,"Caves Switch Door",[[o.Episode.I,[3,4,5]]]),r(s.RobotRechargeStation,207,"Robot Recharge Station",[[o.Episode.I,[3,4,5,6,7]],[o.Episode.II,[17]]]),r(s.CavesCakeShop,208,"Caves Cake Shop",[[o.Episode.I,[5]]]),r(s.Caves1SmallRedRock,209,"Caves 1 Small Red Rock",[[o.Episode.I,[3]]]),r(s.Caves1MediumRedRock,210,"Caves 1 Medium Red Rock",[[o.Episode.I,[3]]]),r(s.Caves1LargeRedRock,211,"Caves 1 Large Red Rock",[[o.Episode.I,[3]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.Caves2SmallRock1,212,"Caves 2 Small Rock 1",[[o.Episode.I,[4]]]),r(s.Caves2MediumRock1,213,"Caves 2 Medium Rock 1",[[o.Episode.I,[4]]]),r(s.Caves2LargeRock1,214,"Caves 2 Large Rock 1",[[o.Episode.I,[4]]]),r(s.Caves2SmallRock2,215,"Caves 2 Small Rock 2",[[o.Episode.I,[4]]]),r(s.Caves2MediumRock2,216,"Caves 2 Medium Rock 2",[[o.Episode.I,[4]]]),r(s.Caves2LargeRock2,217,"Caves 2 Large Rock 2",[[o.Episode.I,[4]]]),r(s.Caves3SmallRock,218,"Caves 3 Small Rock",[[o.Episode.I,[5]]]),r(s.Caves3MediumRock,219,"Caves 3 Medium Rock",[[o.Episode.I,[5]]]),r(s.Caves3LargeRock,220,"Caves 3 Large Rock",[[o.Episode.I,[5]]]),r(s.FloorPanel2,222,"Floor Panel 2",[[o.Episode.I,[1,2,3,4,5,6,7,8,9,10,16,17]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.DestructableRockCaves1,223,"Destructable Rock (Caves 1)",[[o.Episode.I,[3]]]),r(s.DestructableRockCaves2,224,"Destructable Rock (Caves 2)",[[o.Episode.I,[4]]]),r(s.DestructableRockCaves3,225,"Destructable Rock (Caves 3)",[[o.Episode.I,[5]]]),r(s.MinesDoor,256,"Mines Door",[[o.Episode.I,[6,7]]]),r(s.FloorPanel3,257,"Floor Panel 3",[[o.Episode.I,[1,2,6,7,16,17]],[o.Episode.II,[1,2,3,4]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.MinesSwitchDoor,258,"Mines Switch Door",[[o.Episode.I,[6,7]],[o.Episode.IV,[6,7,8]]]),r(s.LargeCryoTube,259,"Large Cryo-Tube",[[o.Episode.I,[6,7]],[o.Episode.II,[17]]]),r(s.ComputerLikeCalus,260,"Computer (like calus)",[[o.Episode.I,[6,7]],[o.Episode.II,[17]]]),r(s.GreenScreenOpeningAndClosing,261,"Green Screen opening and closing",[[o.Episode.I,[6,7]],[o.Episode.II,[17]]]),r(s.FloatingRobot,262,"Floating Robot",[[o.Episode.I,[6,7]]]),r(s.FloatingBlueLight,263,"Floating Blue Light",[[o.Episode.I,[6,7]]]),r(s.SelfDestructingObject1,264,"Self Destructing Object 1",[[o.Episode.I,[6,7]]]),r(s.SelfDestructingObject2,265,"Self Destructing Object 2",[[o.Episode.I,[6,7]]]),r(s.SelfDestructingObject3,266,"Self Destructing Object 3",[[o.Episode.I,[6,7]]]),r(s.SparkMachine,267,"Spark Machine",[[o.Episode.I,[6,7]]]),r(s.MinesLargeFlashingCrate,268,"Mines Large Flashing Crate",[[o.Episode.I,[6,7]]]),r(s.RuinsSeal,304,"Ruins Seal",[[o.Episode.I,[13]]]),r(s.RuinsTeleporter,320,"Ruins Teleporter",[[o.Episode.I,[8,9,10]]]),r(s.RuinsWarpSiteToSite,321,"Ruins Warp (Site to site)",[[o.Episode.I,[8,9,10]]]),r(s.RuinsSwitch,322,"Ruins Switch",[[o.Episode.I,[8,9,10]]]),r(s.FloorPanel4,323,"Floor Panel 4",[[o.Episode.I,[8,9,10]]]),r(s.Ruins1Door,324,"Ruins 1 Door",[[o.Episode.I,[8]]]),r(s.Ruins3Door,325,"Ruins 3 Door",[[o.Episode.I,[10]]]),r(s.Ruins2Door,326,"Ruins 2 Door",[[o.Episode.I,[9]]]),r(s.Ruins11ButtonDoor,327,"Ruins 1-1 Button Door",[[o.Episode.I,[8]]]),r(s.Ruins21ButtonDoor,328,"Ruins 2-1 Button Door",[[o.Episode.I,[9]]]),r(s.Ruins31ButtonDoor,329,"Ruins 3-1 Button Door",[[o.Episode.I,[10]]]),r(s.Ruins4ButtonDoor,330,"Ruins 4-Button Door",[[o.Episode.I,[8,9,10]]]),r(s.Ruins2ButtonDoor,331,"Ruins 2-Button Door",[[o.Episode.I,[8,9,10]]]),r(s.RuinsSensor,332,"Ruins Sensor",[[o.Episode.I,[8,9,10]]]),r(s.RuinsFenceSwitch,333,"Ruins Fence Switch",[[o.Episode.I,[8,9,10]]]),r(s.RuinsLaserFence4x2,334,"Ruins Laser Fence 4x2",[[o.Episode.I,[8,9,10]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.RuinsLaserFence6x2,335,"Ruins Laser Fence 6x2",[[o.Episode.I,[8,9,10]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.RuinsLaserFence4x4,336,"Ruins Laser Fence 4x4",[[o.Episode.I,[8,9,10]]]),r(s.RuinsLaserFence6x4,337,"Ruins Laser Fence 6x4",[[o.Episode.I,[8,9,10]]]),r(s.RuinsPoisonBlob,338,"Ruins poison Blob",[[o.Episode.I,[8,9,10]],[o.Episode.II,[5,6,7,8,9]],[o.Episode.IV,[6,7,8]]]),r(s.RuinsPillarTrap,339,"Ruins Pillar Trap",[[o.Episode.I,[8,9,10]],[o.Episode.II,[1,2,3,4]]]),r(s.PopupTrapNoTech,340,"Popup Trap (No Tech)",[[o.Episode.I,[8,9,10]]]),r(s.RuinsCrystal,341,"Ruins Crystal",[[o.Episode.I,[8,9,10]]]),r(s.Monument,342,"Monument",[[o.Episode.I,[2,4,7]]]),r(s.RuinsRock1,345,"Ruins Rock 1",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock2,346,"Ruins Rock 2",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock3,347,"Ruins Rock 3",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock4,348,"Ruins Rock 4",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock5,349,"Ruins Rock 5",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock6,350,"Ruins Rock 6",[[o.Episode.I,[8,9,10]]]),r(s.RuinsRock7,351,"Ruins Rock 7",[[o.Episode.I,[8,9,10]]]),r(s.Poison,352,"Poison",[[o.Episode.I,[8,9,10,13]],[o.Episode.II,[3,4,10,11]],[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.FixedBoxTypeRuins,353,"Fixed Box Type (Ruins)",[[o.Episode.I,[8,9,10,16,17]],[o.Episode.II,[1,2,3,4,14,15]]]),r(s.RandomBoxTypeRuins,354,"Random Box Type (Ruins)",[[o.Episode.I,[8,9,10,16,17]],[o.Episode.II,[1,2,3,4,14,15]]]),r(s.EnemyTypeBoxYellow,355,"Enemy Type Box (Yellow)",[[o.Episode.I,[8,9,10,16,17]],[o.Episode.II,[1,2,3,4]]]),r(s.EnemyTypeBoxBlue,356,"Enemy Type Box (Blue)",[[o.Episode.I,[8,9,10,16,17]],[o.Episode.II,[1,2,3,4]]]),r(s.EmptyTypeBoxBlue,357,"Empty Type Box (Blue)",[[o.Episode.I,[8,9,10,16,17]],[o.Episode.II,[1,2,3,4]]]),r(s.DestructableRock,358,"Destructable Rock",[[o.Episode.I,[8,9,10]]]),r(s.PopupTrapsTechs,359,"Popup Traps (techs)",[[o.Episode.I,[6,7,8,9,10]],[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,16,17]]]),r(s.FlyingWhiteBird,368,"Flying White Bird",[[o.Episode.I,[14,16]],[o.Episode.II,[3,4]]]),r(s.Tower,369,"Tower",[[o.Episode.I,[14]]]),r(s.FloatingRocks,370,"Floating Rocks",[[o.Episode.I,[14]]]),r(s.FloatingSoul,371,"Floating Soul",[[o.Episode.I,[14]]]),r(s.Butterfly,372,"Butterfly",[[o.Episode.I,[14]]]),r(s.LobbyGameMenu,384,"Lobby Game menu",[[o.Episode.I,[15]]]),r(s.LobbyWarpObject,385,"Lobby Warp Object",[[o.Episode.I,[15]]]),r(s.Lobby1EventObjectDefaultTree,386,"Lobby 1 Event Object (Default Tree)",[[o.Episode.I,[15]]]),r(s.UnknownItem387,387,"Unknown Item (387)",[[o.Episode.I,[15]]]),r(s.UnknownItem388,388,"Unknown Item (388)",[[o.Episode.I,[15]]]),r(s.UnknownItem389,389,"Unknown Item (389)",[[o.Episode.I,[15]]]),r(s.LobbyEventObjectStaticPumpkin,390,"Lobby Event Object (Static Pumpkin)",[[o.Episode.I,[15]]]),r(s.LobbyEventObject3ChristmasWindows,391,"Lobby Event Object (3 Christmas Windows)",[[o.Episode.I,[15]]]),r(s.LobbyEventObjectRedAndWhiteCurtain,392,"Lobby Event Object (Red and White Curtain)",[[o.Episode.I,[15]]]),r(s.UnknownItem393,393,"Unknown Item (393)",[[o.Episode.I,[15]]]),r(s.UnknownItem394,394,"Unknown Item (394)",[[o.Episode.I,[15]]]),r(s.LobbyFishTank,395,"Lobby Fish Tank",[[o.Episode.I,[15]]]),r(s.LobbyEventObjectButterflies,396,"Lobby Event Object (Butterflies)",[[o.Episode.I,[15]]]),r(s.UnknownItem400,400,"Unknown Item (400)",[[o.Episode.I,[16]],[o.Episode.II,[3,4]]]),r(s.GreyWallLow,401,"grey wall low",[[o.Episode.I,[16]],[o.Episode.II,[3,4,17]]]),r(s.SpaceshipDoor,402,"Spaceship Door",[[o.Episode.I,[16]],[o.Episode.II,[3,4]]]),r(s.GreyWallHigh,403,"grey wall high",[[o.Episode.I,[16]],[o.Episode.II,[3,4,17]]]),r(s.TempleNormalDoor,416,"Temple Normal Door",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.BreakableWallWallButUnbreakable,417,'"breakable wall wall, but unbreakable"',[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.BrokenCylinderAndRubble,418,"Broken cylinder and rubble",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.ThreeBrokenWallPiecesOnFloor,419,"3 broken wall pieces on floor",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.HighBrickCylinder,420,"high brick cylinder",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.LyingCylinder,421,"lying cylinder",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.BrickConeWithFlatTop,422,"brick cone with flat top",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.BreakableTempleWall,423,"breakable temple wall",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.TempleMapDetect,424,"Temple Map Detect",[[o.Episode.I,[17]],[o.Episode.II,[1,2,14]],[o.Episode.IV,[1,2,3,4,5]]]),r(s.SmallBrownBrickRisingBridge,425,"small brown brick rising bridge",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.LongRisingBridgeWithPinkHighEdges,426,"long rising bridge (with pink high edges)",[[o.Episode.I,[17]],[o.Episode.II,[1,2]]]),r(s.FourSwitchTempleDoor,427,"4 switch temple door",[[o.Episode.II,[1,2]]]),r(s.FourButtonSpaceshipDoor,448,"4 button spaceship door",[[o.Episode.II,[3,4]]]),r(s.ItemBoxCca,512,"item box cca",[[o.Episode.II,[5,6,7,8,9,12,16,17]],[o.Episode.IV,[5]]]),r(s.TeleporterEp2,513,"Teleporter (Ep 2)",[[o.Episode.II,[5,6,7,8,9,10,11,12,13,16,17]]]),r(s.CCADoor,514,"CCA Door",[[o.Episode.II,[5,6,7,8,9,16,17]]]),r(s.SpecialBoxCCA,515,"Special Box CCA",[[o.Episode.II,[5,6,7,8,9,12,16,17]],[o.Episode.IV,[1,2,3,4,5]]]),r(s.BigCCADoor,516,"Big CCA Door",[[o.Episode.II,[5]]]),r(s.BigCCADoorSwitch,517,"Big CCA Door Switch",[[o.Episode.II,[5,6,7,8,9,16,17]]]),r(s.LittleRock,518,"Little Rock",[[o.Episode.II,[5,6,7,8,9,16]]]),r(s.Little3StoneWall,519,"Little 3 Stone Wall",[[o.Episode.II,[5,6,7,8,9,16]]]),r(s.Medium3StoneWall,520,"Medium 3 stone wall",[[o.Episode.II,[5,6,7,8,9,16]]]),r(s.SpiderPlant,521,"Spider Plant",[[o.Episode.II,[5,6,7,8,9,16]]]),r(s.CCAAreaTeleporter,522,"CCA Area Teleporter",[[o.Episode.II,[5,6,7,8,9,16,17]]]),r(s.UnknownItem523,523,"Unknown Item (523)",[[o.Episode.II,[5,12]]]),r(s.WhiteBird,524,"White Bird",[[o.Episode.II,[6,7,9,16,17]],[o.Episode.IV,[6,7,8]]]),r(s.OrangeBird,525,"Orange Bird",[[o.Episode.II,[6,7,9,17]]]),r(s.Saw,527,"Saw",[[o.Episode.II,[5,6,7,8,9,10,11,16,17]]]),r(s.LaserDetect,528,"Laser Detect",[[o.Episode.II,[5,6,7,8,9,10,11,16,17]]]),r(s.UnknownItem529,529,"Unknown Item (529)",[[o.Episode.II,[5,6,7]],[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem530,530,"Unknown Item (530)",[[o.Episode.II,[5,6,7,8,9,17]]]),r(s.Seagull,531,"Seagull",[[o.Episode.II,[6,7,8,9,16]],[o.Episode.IV,[6,7,8]]]),r(s.Fish,544,"Fish",[[o.Episode.I,[15]],[o.Episode.II,[6,9,10,11,16]]]),r(s.SeabedDoorWithBlueEdges,545,"Seabed Door (with blue edges)",[[o.Episode.II,[10,11]]]),r(s.SeabedDoorAlwaysOpenNonTriggerable,546,"Seabed door (always open, non-triggerable)",[[o.Episode.II,[10,11]]]),r(s.LittleCryotube,547,"Little Cryotube",[[o.Episode.II,[10,11,17]]]),r(s.WideGlassWallBreakable,548,"Wide Glass Wall (breakable)",[[o.Episode.II,[10,11]]]),r(s.BlueFloatingRobot,549,"Blue floating robot",[[o.Episode.II,[10,11]]]),r(s.RedFloatingRobot,550,"Red floating robot",[[o.Episode.II,[10,11]]]),r(s.Dolphin,551,"Dolphin",[[o.Episode.II,[10,11]]]),r(s.CaptureTrap,552,"Capture Trap",[[o.Episode.II,[5,6,7,8,9,10,11,16,17]]]),r(s.VRLink,553,"VR link",[[o.Episode.II,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]]]),r(s.UnknownItem576,576,"Unknown Item (576)",[[o.Episode.II,[12]]]),r(s.WarpInBarbaRayRoom,640,"Warp in Barba Ray Room",[[o.Episode.II,[14]]]),r(s.UnknownItem672,672,"Unknown Item (672)",[[o.Episode.II,[15]]]),r(s.GeeNest,688,"Gee Nest",[[o.Episode.I,[8,9,10]],[o.Episode.II,[5,6,7,8,9,16,17]],[o.Episode.IV,[6,7,8]]]),r(s.LabComputerConsole,689,"Lab Computer Console",[[o.Episode.II,[0]]]),r(s.LabComputerConsoleGreenScreen,690,"Lab Computer Console (Green Screen)",[[o.Episode.II,[0]]]),r(s.ChairYellowPillow,691,"Chair, Yellow Pillow",[[o.Episode.II,[0]]]),r(s.OrangeWallWithHoleInMiddle,692,"orange wall with hole in middle",[[o.Episode.II,[0]]]),r(s.GreyWallWithHoleInMiddle,693,"grey wall with hole in middle",[[o.Episode.II,[0]]]),r(s.LongTable,694,"long table",[[o.Episode.II,[0]]]),r(s.GBAStation,695,"GBA Station",[]),r(s.TalkLinkToSupport,696,"Talk (link to support)",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.InstaWarp,697,"insta-warp",[[o.Episode.I,[0,1,2,3,4,5,6,7,11,12,13,14,16,17]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,9,0]]]),r(s.LabInvisibleObject,698,"Lab Invisible Object",[[o.Episode.I,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]],[o.Episode.II,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]],[o.Episode.IV,[1,2,3,4,5,6,7,8,0]]]),r(s.LabGlassWindowDoor,699,"Lab Glass window Door",[[o.Episode.II,[0]]]),r(s.UnknownItem700,700,"Unknown Item (700)",[[o.Episode.II,[13]]]),r(s.LabCeilingWarp,701,"Lab Ceiling Warp",[[o.Episode.II,[0]]]),r(s.Ep4LightSource,768,"Ep4 Light Source",[[o.Episode.IV,[1,2,3,4,5,6,7,8,9]]]),r(s.Cacti,769,"cacti",[[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.BigBrownRock,770,"Big Brown Rock",[[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.BreakableBrownRock,771,"Breakable Brown Rock",[[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.UnknownItem832,832,"Unknown Item (832)",[]),r(s.UnknownItem833,833,"Unknown Item (833)",[]),r(s.PoisonPlant,896,"Poison Plant",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem897,897,"Unknown Item (897)",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem898,898,"Unknown Item (898)",[[o.Episode.IV,[6,7,8]]]),r(s.OozingDesertPlant,899,"Oozing Desert Plant",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem901,901,"Unknown Item (901)",[[o.Episode.IV,[6,7,8]]]),r(s.BigBlackRocks,902,"big black rocks",[[o.Episode.IV,[1,2,3,4,5,6,7,8]]]),r(s.UnknownItem903,903,"Unknown Item (903)",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem904,904,"Unknown Item (904)",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem905,905,"Unknown Item (905)",[]),r(s.UnknownItem906,906,"Unknown Item (906)",[]),r(s.FallingRock,907,"Falling Rock",[[o.Episode.IV,[6,7,8]]]),r(s.DesertPlantHasCollision,908,"Desert Plant (has collision)",[[o.Episode.IV,[6,7,8]]]),r(s.DesertFixedTypeBoxBreakableCrystals,909,"Desert Fixed Type Box (Breakable Crystals)",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem910,910,"Unknown Item (910)",[]),r(s.BeeHive,911,"Bee Hive",[[o.Episode.IV,[6,7,8]]]),r(s.UnknownItem912,912,"Unknown Item (912)",[[o.Episode.IV,[6,7,8]]]),r(s.Heat,913,"Heat",[[o.Episode.IV,[6,7,8]]]),r(s.TopOfSaintMillionEgg,960,"Top of saint million egg",[[o.Episode.IV,[9]]]),r(s.UnknownItem961,961,"Unknown Item (961)",[[o.Episode.IV,[9]]]),Object.freeze(t.OBJECT_TYPES),Object.freeze(n)},"/7QA":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("1Qg8");i("8UJ8");const n=i("LvDl"),r=o(i("GGSb"));function a(e){const t=e;"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType||e.preventDefault()}function _(e){const t=e;t.ctrlKey&&!t.altKey&&"Z"===t.key.toUpperCase()&&t.preventDefault()}function d(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none")}function l(e){d(e)}function c(e){d(e)}i("XtFL"),i("tjRy"),i("3oCa"),i("OP0w"),r.default.useDefaults({defaultLevel:r.default.WARN}),function(){document.addEventListener("beforeinput",a),document.addEventListener("keydown",_),document.addEventListener("dragenter",d),document.addEventListener("dragover",l),document.addEventListener("drop",c);const e=new s.ApplicationView,t=n.throttle(()=>{e.resize(window.innerWidth,window.innerHeight)},100,{leading:!0,trailing:!0});t(),document.body.append(e.element),window.addEventListener("resize",t)}()},"/Wax":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("9dYx");class s extends o.AbstractWritableCursor{constructor(e,t,i=0,o=e.size-i){if(i<0||i>e.size)throw new Error(`Offset ${i} is out of bounds.`);if(o<0||i+o>e.size)throw new Error(`Size ${o} is out of bounds.`);super(t,i),this.buffer=e,this._size=o}get size(){return this._size}set size(e){e>this._size?this.ensure_size(e-this.position):this._size=e}get backing_buffer(){return this.buffer.backing_buffer}get dv(){return this.buffer.view}take(e){this.check_size("size",e,e);const t=this.offset+this.position,i=new s(this.buffer,this.endianness,t,e);return this._position+=e,i}ensure_size(e,t=this.position){const i=t+e-this._size;i>0&&(this._size+=i,this.buffer.size<this.offset+this._size&&(this.buffer.size=this.offset+this._size))}}t.ResizableBufferCursor=s},"0CzU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("hUhj"),s=i("jJhE");class n extends o.AbstractProperty{constructor(e){super(),this._val=e}get val(){return this.get_val()}set val(e){this.set_val(e)}get_val(){return this._val}set_val(e,t={}){if(e!==this._val){const i=this._val;this._val=e,t.silent||this.emit(i)}}update(e){this.val=e(this.val)}bind_to(e){return s.is_property(e)&&(this.val=e.val),e.observe(e=>this.val=e.value)}}t.SimpleProperty=n},"0Xme":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("sDu+"),s=i("FXpb"),n=i("jJhE");i("x1yY");const r=i("4VsB");class a extends o.LabelledControl{constructor(e,t,i,o,n){super(n),this.element=s.el.span({class:`${t} core_Input`}),this._value=new r.WidgetProperty(this,e,this.set_value),this.value=this._value,this.input_element=s.create_element("input",{class:`${o} core_Input_inner`}),this.input_element.type=i,this.input_element.onchange=()=>{this._value.set_val(this.get_value(),{silent:!1})},n&&n.readonly&&this.set_attr("readOnly",!0),this.element.append(this.input_element)}set_enabled(e){super.set_enabled(e),this.input_element.disabled=!e}set_attr(e,t,i){if(null==t)return;const o=this.input_element,s=i||(e=>e);n.is_any_property(t)?(o[e]=s(t.val),this.disposable(t.observe(({value:t})=>o[e]=s(t)))):o[e]=s(t)}}t.Input=a},"1Qg8":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yxQK"),s=i("49yP"),n=i("FXpb"),r=i("nN8q");class a extends r.ResizableWidget{constructor(){super(),this.menu_view=this.disposable(new o.NavigationView),this.main_content_view=this.disposable(new s.MainContentView),this.element=n.el.div({class:"application_ApplicationView"},this.menu_view.element,this.main_content_view.element),this.element.id="root",this.finalize_construction(a.prototype)}resize(e,t){return super.resize(e,t),this.main_content_view.resize(e,t-this.menu_view.height),this}}t.ApplicationView=a},"1aHr":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("w6HN"),s=i("6cU9"),n=i("KVVN"),r=i("c5EP"),a=i("n5fr"),_=i("sv1z"),d=i("ouMO"),l=i("FXpb"),c=i("r+6V"),u=i("xs7i"),p=i("4Mnx"),h=i("4SjJ");class v extends o.ToolBar{constructor(){const e=new c.DropDown("New quest",[u.Episode.I],e=>`Episode ${u.Episode[e]}`,{icon_left:l.Icon.NewFile}),t=new s.FileButton("Open file...",{icon_left:l.Icon.File,accept:".qst",tooltip:"Open a quest file (Ctrl-O)"}),i=new n.Button("Save as...",{icon_left:l.Icon.Save,tooltip:"Save this quest to new file (Ctrl-Shift-S)"}),o=new n.Button("Undo",{icon_left:l.Icon.Undo,tooltip:a.undo_manager.first_undo.map(e=>(e?`Undo "${e.description}"`:"Nothing to undo")+" (Ctrl-Z)")}),f=new n.Button("Redo",{icon_left:l.Icon.Redo,tooltip:a.undo_manager.first_redo.map(e=>(e?`Redo "${e.description}"`:"Nothing to redo")+" (Ctrl-Shift-Z)")}),O=new _.Select(r.quest_editor_store.current_quest.flat_map(e=>e?d.list_property(void 0,...p.area_store.get_areas_for_episode(e.episode)):d.list_property()),e=>{const t=r.quest_editor_store.current_quest.val;if(t){const i=t.entities_per_area.val.get(e.id);return e.name+(i?` (${i})`:"")}return e.name}),m=new n.Button("Run in VM",{icon_left:l.Icon.Play,tooltip:"[Experimental] Run the current quest in a virtual machine (F5)"}),g=new n.Button("Resume",{icon_left:l.Icon.SquareArrowRight,tooltip:"Resume execution"}),E=new n.Button("Step over",{icon_left:l.Icon.LongArrowRight,tooltip:"Execute the next line and step over any function calls"}),P=new n.Button("Step in",{icon_left:l.Icon.LevelDown,tooltip:"Execute the next line and step inside any function calls"}),w=new n.Button("Step out",{icon_left:l.Icon.LevelUp,tooltip:"Execute until outside of current call frame"}),b=new n.Button("Stop",{icon_left:l.Icon.Stop,tooltip:"Stop execution"}),y=[e,t,i,o,f,O];h.gui_store.feature_active("vm")&&y.push(m,g,E,P,w,b),super({children:y});const D=r.quest_editor_store.current_quest.map(e=>null!=e),T=r.quest_editor_store.quest_runner.paused.map(e=>e&&r.quest_editor_store.quest_runner.running.val&&D.val);this.disposables(e.chosen.observe(({value:e})=>r.quest_editor_store.new_quest(e)),t.files.observe(({value:e})=>{e.length&&r.quest_editor_store.open_file(e[0])}),i.enabled.bind_to(D),i.click.observe(r.quest_editor_store.save_as),o.enabled.bind_to(a.undo_manager.can_undo),o.click.observe(()=>a.undo_manager.undo()),f.enabled.bind_to(a.undo_manager.can_redo),f.click.observe(()=>a.undo_manager.redo()),O.enabled.bind_to(D),O.selected.bind_to(r.quest_editor_store.current_area),O.selected.observe(({value:e})=>r.quest_editor_store.set_current_area(e)),m.click.observe(r.quest_editor_store.run_current_quest),g.click.observe(()=>r.quest_editor_store.quest_runner.resume()),E.click.observe(()=>r.quest_editor_store.quest_runner.step_over()),P.click.observe(()=>r.quest_editor_store.quest_runner.step_in()),w.click.observe(()=>r.quest_editor_store.quest_runner.step_out()),b.click.observe(()=>r.quest_editor_store.quest_runner.stop()),m.enabled.bind_to(D),g.enabled.bind_to(T),E.enabled.bind_to(T),P.enabled.bind_to(T),w.enabled.bind_to(T),b.enabled.bind_to(T),h.gui_store.on_global_keydown(h.GuiTool.QuestEditor,"Ctrl-O",()=>t.click()),h.gui_store.on_global_keydown(h.GuiTool.QuestEditor,"Ctrl-Shift-S",r.quest_editor_store.save_as),h.gui_store.on_global_keydown(h.GuiTool.QuestEditor,"Ctrl-Z",()=>{a.undo_manager.undo()}),h.gui_store.on_global_keydown(h.GuiTool.QuestEditor,"Ctrl-Shift-Z",()=>{a.undo_manager.redo()}),h.gui_store.on_global_keydown(h.GuiTool.QuestEditor,"F5",r.quest_editor_store.run_current_quest)),this.finalize_construction(v.prototype)}}t.QuestEditorToolBar=v},"1vWm":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i("nN8q"),r=i("FXpb"),a=i("1aHr"),_=s(i("xGNL")),d=i("zBQr"),l=i("q1Dg");i("88+i"),i("UrNz");const c=i("xyE7"),u=i("W7aE"),p=i("DUCy"),h=i("Yq7v"),v=i("4SjJ"),f=i("c5EP"),O=i("B2O0"),m=i("Jo0o"),g=i("3IMX"),E=i("GGSb"),P=i("TP44"),w=i("ZINw"),b=E.get("quest_editor/gui/QuestEditorView"),y=new Map([[l.QuestInfoView,"quest_info"],[c.NpcCountsView,"npc_counts"],[u.QuestRendererView,"quest_renderer"],[p.AsmEditorView,"asm_editor"],[h.EntityInfoView,"entity_info"],[O.NpcListView,"npc_list_view"],[m.ObjectListView,"object_list_view"],[P.QuestMessageLogView,"message_log_view"],[w.RegistersView,"registers_view"]]);v.gui_store.feature_active("events")&&y.set(g.EventsView,"events_view");const D={settings:{showPopoutIcon:!1,showMaximiseIcon:!0,showCloseIcon:!0},dimensions:{headerHeight:24},labels:{close:"Close",maximise:"Maximise",minimise:"Minimise",popout:"Open in new window"}},T=[{type:"row",content:[{type:"column",width:2,content:[{type:"stack",content:[{title:"Info",type:"component",componentName:y.get(l.QuestInfoView),isClosable:!1},{title:"NPC Counts",type:"component",componentName:y.get(c.NpcCountsView),isClosable:!1}]},{title:"Entity",type:"component",componentName:y.get(h.EntityInfoView),isClosable:!1}]},{type:"stack",width:9,content:[{title:"3D View",type:"component",componentName:y.get(u.QuestRendererView),isClosable:!1},{title:"Script",type:"component",componentName:y.get(p.AsmEditorView),isClosable:!1},...v.gui_store.feature_active("vm")?[{title:"Log",type:"component",componentName:y.get(P.QuestMessageLogView),isClosable:!1},{title:"Registers",type:"component",componentName:y.get(w.RegistersView),isClosable:!1}]:[]]},{type:"stack",width:2,content:[{title:"NPCs",type:"component",componentName:y.get(O.NpcListView),isClosable:!1},{title:"Objects",type:"component",componentName:y.get(m.ObjectListView),isClosable:!1},...v.gui_store.feature_active("events")?[{title:"Events",type:"component",componentName:y.get(g.EventsView),isClosable:!1}]:[]]}]}];class R extends n.ResizableWidget{constructor(){super(),this.element=r.el.div({class:"quest_editor_QuestEditorView"}),this.tool_bar_view=this.disposable(new a.QuestEditorToolBar),this.layout_element=r.create_element("div",{class:"quest_editor_gl_container"}),this.sub_views=new Map,this.element.append(this.tool_bar_view.element,this.layout_element),this.layout=this.init_golden_layout(),this.disposables(v.gui_store.on_global_keydown(v.GuiTool.QuestEditor,"Ctrl-Alt-D",()=>f.quest_editor_store.debug.val=!f.quest_editor_store.debug.val)),this.finalize_construction(R.prototype)}resize(e,t){super.resize(e,t);const i=Math.max(0,t-this.tool_bar_view.height);return this.layout_element.style.width=`${e}px`,this.layout_element.style.height=`${i}px`,this.layout.then(t=>t.updateSize(e,i)),this}dispose(){super.dispose(),this.layout.then(e=>e.destroy());for(const e of this.sub_views.values())e.dispose();this.sub_views.clear()}init_golden_layout(){return o(this,void 0,void 0,(function*(){const e=yield d.quest_editor_ui_persister.load_layout_config([...y.values()],T);try{return this.attempt_gl_init(Object.assign(Object.assign({},D),{content:e}))}catch(e){return b.warn("Couldn't instantiate golden layout with persisted layout.",e),this.attempt_gl_init(Object.assign(Object.assign({},D),{content:T}))}}))}attempt_gl_init(e){const t=new _.default(e,this.layout_element),i=this;try{for(const[e,o]of y)t.registerComponent(o,(function(t){const s=new e;t.on("close",()=>s.dispose()),t.on("resize",()=>s.resize(t.width,t.height-4)),s.resize(t.width,t.height),i.sub_views.set(o,s),t.getElement().append(s.element)}));return t.on("stateChanged",()=>{this.layout&&d.quest_editor_ui_persister.persist_layout_config(t.toConfig().content)}),t.on("stackCreated",e=>{e.on("activeContentItemChanged",e=>{if("componentName"in e.config){const t=this.sub_views.get(e.config.componentName);t&&t.focus()}})}),t.init(),t}catch(e){throw t.destroy(),e}}}t.QuestEditorView=R},"1z6m":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb"),n=i("4SjJ");i("Rbar");class r extends o.Widget{constructor(e,t){super(),this.element=s.el.span({class:"application_NavigationButton"}),this.input=s.create_element("input"),this.label=s.create_element("label");const i=n.GuiTool[e];this.input.type="radio",this.input.name="application_NavigationButton",this.input.value=i,this.input.id=`application_NavigationButton_${i}`,this.label.append(t),this.label.htmlFor=`application_NavigationButton_${i}`,this.element.append(this.input,this.label),this.finalize_construction(r.prototype)}set checked(e){this.input.checked=e}}t.NavigationButton=r},"22Lq":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("jJhE"),s=i("oxtq"),n=i("sHzS"),r=i("qRPN");class a extends n.AbstractListProperty{constructor(e,...t){super(e),this.values=t||[]}get val(){return this.get_val()}set val(e){this.set_val(e)}get_val(){return this.values}set_val(e){const t=this.values.splice(0,this.values.length,...e);return this.finalize_update({type:s.ListChangeType.ListChange,index:0,removed:t,inserted:e}),t}filtered(e){return new r.DependentListProperty(this,t=>t.filter(e))}bind_to(e){return s.is_list_property(e)?(this.set_val(e.val),e.observe_list(e=>{e.type===s.ListChangeType.ListChange&&this.splice(e.index,e.removed.length,...e.inserted)})):(o.is_property(e)&&this.set_val(e.val),e.observe(({value:e})=>this.set_val(e)))}update(e){this.splice(0,this.values.length,...e(this.values))}set(e,t){const i=[this.values[e]];this.values[e]=t,this.finalize_update({type:s.ListChangeType.ListChange,index:e,removed:i,inserted:[t]})}push(...e){const t=this.values.length;return this.values.push(...e),this.finalize_update({type:s.ListChangeType.ListChange,index:t,removed:[],inserted:e}),this.length.val}remove(...e){for(const t of e){const e=this.values.indexOf(t);e>-1&&(this.values.splice(e,1),this.finalize_update({type:s.ListChangeType.ListChange,index:e,removed:[t],inserted:[]}))}}clear(){const e=this.values.splice(0,this.values.length);this.finalize_update({type:s.ListChangeType.ListChange,index:0,removed:e,inserted:[]})}splice(e,t,...i){let o;return o=null==t?this.values.splice(e):this.values.splice(e,t,...i),this.finalize_update({type:s.ListChangeType.ListChange,index:e,removed:o,inserted:i}),o}sort(e){this.values.sort(e),this.finalize_update({type:s.ListChangeType.ListChange,index:0,removed:this.values,inserted:this.values})}compute_length(){return this.values.length}}t.SimpleListProperty=a},"2Ghz":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{}t.QuestEventActionModel=o;t.QuestEventActionSpawnNpcsModel=class extends o{constructor(e,t){super(),this.section_id=e,this.appear_flag=t}};t.QuestEventActionUnlockModel=class extends o{constructor(e){super(),this.door_id=e}};t.QuestEventActionLockModel=class extends o{constructor(e){super(),this.door_id=e}}},"39ZU":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("nN8q");class n extends s.ResizableWidget{constructor(e){super(),this.create_view=e,this.element=o.el.div({class:"core_LazyView"}),this.initialized=!1,this.visible.val=!1}set_visible(e){super.set_visible(e),e&&!this.initialized&&(this.initialized=!0,this.create_view().then(e=>{this.disposed||(this.view=this.disposable(e),this.view.resize(this.width,this.height),this.element.append(e.element))})),this.finalize_construction(n.prototype)}resize(e,t){return super.resize(e,t),this.view&&this.view.resize(e,t),this}}t.LazyWidget=n},"3AeF":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("x4IQ");class s extends o.QuestEditAction{constructor(){super(...arguments),this.description="Edit long description"}undo(){this.quest.set_long_description(this.old)}redo(){this.quest.set_long_description(this.new)}}t.EditLongDescriptionAction=s},"3CEK":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i("GGSb")),r=i("Womt"),a=i("4vnR"),_=i("aEXR"),d=i("Tpfs"),l=i("xpi7"),c=i("c5EP"),u=i("oxtq"),p=i("yQqj"),h=n.default.get("quest_editor/rendering/QuestModelManager"),v=new r.Vector3(0,800,700),f=new r.Vector3(0,0,0),O=new r.Object3D;t.QuestModelManager=class{constructor(e){this.renderer=e,this.disposer=new d.Disposer,this.quest_disposer=this.disposer.add(new d.Disposer),this.quest_or_area_changed=()=>o(this,void 0,void 0,(function*(){const e=c.quest_editor_store.current_quest.val,t=c.quest_editor_store.current_area.val;yield this.area_model_manager.load(e,t),e===c.quest_editor_store.current_quest.val&&t===c.quest_editor_store.current_area.val&&(this.quest_disposer.dispose_all(),this.npc_model_manager.remove_all(),this.object_model_manager.remove_all(),this.renderer.reset_entity_models(),e&&t&&(this.npc_model_manager.add(e.npcs.val.filter(e=>e.area_id===t.id)),this.object_model_manager.add(e.objects.val.filter(e=>e.area_id===t.id)),this.quest_disposer.add_all(e.npcs.observe_list(this.npcs_changed),e.objects.observe_list(this.objects_changed))))})),this.npcs_changed=e=>{const t=c.quest_editor_store.current_area.val;e.type===u.ListChangeType.ListChange&&t&&(this.npc_model_manager.remove(e.removed),this.npc_model_manager.add(e.inserted.filter(e=>e.area_id===t.id)))},this.objects_changed=e=>{const t=c.quest_editor_store.current_area.val;e.type===u.ListChangeType.ListChange&&t&&(this.object_model_manager.remove(e.removed),this.object_model_manager.add(e.inserted.filter(e=>e.area_id===t.id)))},this.area_model_manager=new m(this.renderer),this.npc_model_manager=new g(this.renderer),this.object_model_manager=new g(this.renderer),this.disposer.add_all(c.quest_editor_store.current_quest.observe(this.quest_or_area_changed),c.quest_editor_store.current_area.observe(this.quest_or_area_changed))}dispose(){this.disposer.dispose()}};class m{constructor(e){this.renderer=e,this.raycaster=new r.Raycaster,this.origin=new r.Vector3,this.down=new r.Vector3(0,-1,0),this.up=new r.Vector3(0,1,0)}load(e,t){return o(this,void 0,void 0,(function*(){if(this.quest=e,this.area=t,!e||!t)return this.renderer.collision_geometry=O,void(this.renderer.render_geometry=O);try{const i=e.area_variants.val.find(e=>e.area.id===t.id)||t.area_variants[0],o=e.episode,s=yield _.load_area_collision_geometry(o,i);if(this.should_cancel(e,t))return;const n=yield _.load_area_render_geometry(o,i);if(this.should_cancel(e,t))return;this.add_sections_to_collision_geometry(s,n),this.renderer.collision_geometry=s,this.renderer.render_geometry=n,this.renderer.reset_camera(v,f)}catch(i){h.error(`Couldn't load area models for quest ${e.id}, ${t.name}.`,i),this.renderer.collision_geometry=O,this.renderer.render_geometry=O}}))}should_cancel(e,t){return this.quest!==e||this.area!==t}add_sections_to_collision_geometry(e,t){for(const i of e.children){i.geometry.boundingBox.getCenter(this.origin),this.raycaster.set(this.origin,this.down);const e=this.raycaster.intersectObject(t,!0).find(e=>null!=e.object.userData.section);this.raycaster.set(this.origin,this.up);const o=this.raycaster.intersectObject(t,!0).find(e=>null!=e.object.userData.section);let s;if(s=e&&o?e.distance<=o.distance?e:o:e||o){const e=i.userData,t=s.object.userData;e.section=t.section}}}}class g{constructor(e){this.renderer=e,this.queue=[],this.loaded_entities=[],this.loading=!1}add(e){return o(this,void 0,void 0,(function*(){if(this.queue.push(...e),!this.loading)try{for(this.loading=!0;this.queue.length;){const e=this.queue[0];try{yield this.load(e)}catch(t){h.error(`Couldn't load model for entity ${p.entity_type_to_string(e.type)}.`,t)}finally{const t=this.queue.indexOf(e);-1!==t&&this.queue.splice(t,1)}}}finally{this.loading=!1}}))}remove(e){for(const t of e){const e=this.queue.indexOf(t);-1!==e&&this.queue.splice(e,1);const i=this.loaded_entities.findIndex(e=>e.entity===t);if(-1!==i){const e=this.loaded_entities.splice(i,1)[0];this.renderer.remove_entity_model(e.entity),e.disposer.dispose()}}}remove_all(){for(const{disposer:e}of this.loaded_entities)e.dispose();this.loaded_entities.splice(0,1/0),this.queue.splice(0,1/0)}load(e){return o(this,void 0,void 0,(function*(){const t=yield a.load_entity_geometry(e.type),i=yield a.load_entity_textures(e.type),o=l.create_entity_mesh(e,t,i);this.queue.includes(e)&&this.update_entity_geometry(e,o)}))}update_entity_geometry(e,t){this.renderer.add_entity_model(t),this.loaded_entities.push({entity:e,disposer:new d.Disposer(e.world_position.observe(({value:e})=>{t.position.copy(e),this.renderer.schedule_render()}),e.world_rotation.observe(({value:e})=>{t.rotation.copy(e),this.renderer.schedule_render()}))})}}},"3IMX":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("c5EP"),r=i("Tpfs"),a=i("PE7g");i("RL+K");const _=i("LvDl"),d=i("oxtq");class l extends o.ResizableWidget{constructor(){super(),this.dag_gui_data=[],this.element=s.el.div({class:"quest_editor_EventsView"}),this.update=()=>{this.event_dags_observer&&this.event_dags_observer.dispose();const e=n.quest_editor_store.current_quest.val,t=n.quest_editor_store.current_area.val;if(e&&t){const i=e.event_dags.filtered(e=>e.area_id===t.id);this.event_dags_observer=i.observe_list(this.observe_event_dags),this.redraw_event_dags(i.val)}else this.event_dags_observer=void 0,this.redraw_event_dags([])},this.redraw_event_dags=e=>{this.element.innerHTML="";for(const e of this.dag_gui_data.splice(0,this.dag_gui_data.length))e.disposer.dispose();let t=0;for(const i of e){const e=this.create_dag_ui_data(i);this.dag_gui_data.splice(t,0,e),this.element.append(e.element),t++}_.defer(this.update_edges)},this.observe_event_dags=e=>{if(e.type===d.ListChangeType.ListChange){for(const t of this.dag_gui_data.splice(e.index,e.removed.length))t.element.remove(),t.disposer.dispose();let t=e.index;for(const i of e.inserted){const e=this.create_dag_ui_data(i);this.dag_gui_data.splice(t,0,e),this.element.insertBefore(e.element,this.element.children.item(t)),t++}_.defer(this.update_edges)}},this.create_dag_ui_data=e=>{const t=new r.Disposer,i=new Map,o=s.el.div({class:"quest_editor_EventsView_dag"}),n=s.el.div({class:"quest_editor_EventsView_edge_container"});return o.append(n),e.events.forEach((e,n)=>{const r=s.el.div({class:"quest_editor_EventsView_event"},s.el.table(s.el.tr(s.el.th({text:"ID:"}),s.el.td({text:e.id.toString()})),s.el.tr(s.el.th({text:"Section:"}),s.el.td(t.add(new a.NumberInput(e.section_id,{enabled:!1})).element)),s.el.tr(s.el.th({text:"Wave:"}),s.el.td({text:e.wave.toString()})),s.el.tr(s.el.th({text:"Delay:"}),s.el.td(t.add(new a.NumberInput(e.delay,{enabled:!1})).element))));o.append(r),i.set(e.id,{element:r,position:n})}),{dag:e,element:o,edge_container_element:n,disposer:t,event_gui_data:i}},this.update_edges=()=>{let e=0;for(const{dag:t,edge_container_element:i,event_gui_data:o}of this.dag_gui_data){i.innerHTML="";const n=Array(t.events.length-1);for(let e=0;e<n.length;e++)n[e]=[];for(const r of t.events){const{element:a,position:_}=o.get(r.id),d=a.offsetTop+a.offsetHeight;for(const a of t.get_children(r)){const{element:t,position:r}=o.get(a.id),l=t.offsetTop,c=s.el.div({class:"quest_editor_EventsView_edge"}),u=Math.min(d,l)-20,p=Math.max(d,l)-u+20;let h=1;const v=Math.min(_,r),f=Math.max(_,r);e:for(;;){for(let e=v;e<f;e++)if(n[e][h]){h++;continue e}break}for(let e=v;e<f;e++)n[e][h]=!0;e=Math.max(h,e);const O=8*h;c.style.left=`${4-O}px`,c.style.top=`${u}px`,c.style.width=`${O}px`,c.style.height=`${p}px`,i.append(c)}}}for(const{element:t}of this.dag_gui_data)t.style.marginLeft=`${8*e}px`},this.disposables(n.quest_editor_store.current_quest.observe(this.update),n.quest_editor_store.current_area.observe(this.update)),this.finalize_construction(l.prototype)}resize(e,t){return super.resize(e,t),this.update_edges(),this}focus(){super.focus(),this.update_edges()}dispose(){super.dispose(),this.event_dags_observer&&this.event_dags_observer.dispose();for(const{disposer:e}of this.dag_gui_data)e.dispose()}}t.EventsView=l},"3ONQ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yQqj"),s=i("FXpb"),n=i("Womt");let r=void 0;const a=new Map,_=new n.Vector2(0,0);let d=0;function l(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"),r&&(r.drag_element.style.transform=`translate(${e.clientX-_.x}px, ${e.clientY-_.y}px)`)}function c(){r&&(r.drag_element.remove(),r=void 0)}t.add_entity_dnd_listener=function(e,t,i){function o(e){r&&i(Object.assign(Object.assign({},r),{event:e}))}a.set(i,o),e.addEventListener(t,o)},t.remove_entity_dnd_listener=function(e,t,i){const o=a.get(i);o&&(a.delete(i),e.removeEventListener(t,o))},t.entity_dnd_source=function(e,t){function i(e){if(e.target instanceof HTMLElement){const i=t(e.target);i?(_.set(e.offsetX,e.offsetY),(r={drag_element:i[0],entity_type:i[1]}).drag_element.style.position="fixed",r.drag_element.style.pointerEvents="none",r.drag_element.style.zIndex="500",r.drag_element.style.top="0",r.drag_element.style.left="0",r.drag_element.style.transform=`translate(${e.clientX-_.x}px, ${e.clientY-_.y}px)`,document.body.append(r.drag_element),e.dataTransfer&&(e.dataTransfer.effectAllowed="copy",e.dataTransfer.setDragImage(s.el.div(),0,0),e.dataTransfer.setData("phantasmal-entity",o.entity_data(r.entity_type).name))):e.preventDefault()}}return e.addEventListener("dragstart",i),1==++d&&(document.addEventListener("dragover",l),document.addEventListener("dragend",c)),{dispose(){e.removeEventListener("dragstart",i),0==--d&&(document.removeEventListener("dragover",l),document.removeEventListener("dragend",c))}}}},"4/Uj":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("ouMO"),n=i("yub1"),r=i("Sa3/"),a=i("NRxM"),_=i("bcBH"),d=i("GGSb").get("viewer/stores/TextureStore");class l{constructor(){this._current_xvm=s.property(void 0),this.current_xvm=this._current_xvm,this.load_file=e=>o(this,void 0,void 0,(function*(){try{const t=yield r.read_file(e);this._current_xvm.val=n.parse_xvm(new a.ArrayBufferCursor(t,_.Endianness.Little))}catch(e){d.error("Couldn't read file.",e)}}))}}t.TextureStore=l,t.texture_store=new l},"469Q":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("Ftn7"),n=i("Tpfs"),r=i("iR5r"),a=i("4/Uj"),_=i("GGSb").get("viewer/rendering/TextureRenderer");class d extends s.Renderer{constructor(){super(),this.disposer=new n.Disposer,this.quad_meshes=[],this.camera=new o.OrthographicCamera(-400,400,300,-300,1,10),this.disposer.add_all(a.texture_store.current_xvm.observe(({value:e})=>{this.scene.remove(...this.quad_meshes),e&&this.render_textures(e),this.reset_camera(new o.Vector3(0,0,5),new o.Vector3),this.schedule_render()})),this.init_camera_controls(),this.controls.dollySpeed=-1,this.controls.azimuthRotateSpeed=0,this.controls.polarRotateSpeed=0}set_size(e,t){this.camera.left=-Math.floor(e/2),this.camera.right=Math.ceil(e/2),this.camera.top=Math.floor(t/2),this.camera.bottom=-Math.ceil(t/2),this.camera.updateProjectionMatrix(),super.set_size(e,t)}dispose(){super.dispose(),this.disposer.dispose()}render_textures(e){let t=10*(e.textures.length-1),i=0;for(const o of e.textures)t+=o.width,i=Math.max(i,o.height);let s=-Math.floor(t/2);const n=-Math.floor(i/2);for(const t of e.textures){let e;try{e=r.xvm_texture_to_texture(t)}catch(e){_.warn("Couldn't convert XVM texture.",e)}const a=new o.Mesh(this.create_quad(s,n+Math.floor((i-t.height)/2),t.width,t.height),e?new o.MeshBasicMaterial({map:e,transparent:!0}):new o.MeshBasicMaterial({color:16711935}));this.quad_meshes.push(a),this.scene.add(a),s+=10+t.width}}create_quad(e,t,i,s){const n=new o.PlaneGeometry(i,s,1,1);return n.faceVertexUvs=[[[new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(1,0)],[new o.Vector2(0,1),new o.Vector2(1,1),new o.Vector2(1,0)]]],n.translate(e+i/2,t+s/2,-5),n}}t.TextureRenderer=d},"488w":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("tRdk"),n=i("kwt4"),r=i("vM2b"),a=new o.Vector3(0,1,0),_=new o.Vector2(0,0),d=new o.Vector3(0,0,0),l=new o.Quaternion(0,0,0,1),c=new o.Vector3(1,1,1);t.ninja_object_to_geometry_builder=function(e,t){new p(t).to_geometry_builder(e)},t.ninja_object_to_buffer_geometry=function(e){return new p(new r.GeometryBuilder).create_buffer_geometry(e)};class u{constructor(){this.vertices_stack=[]}put(e){this.vertices_stack.push(e)}get(e){const t=[];for(let i=this.vertices_stack.length-1;i>=0;i--){const o=this.vertices_stack[i][e];o&&t.push(o)}return t}}class p{constructor(e){this.vertices=new u,this.bone_id=0,this.builder=e}to_geometry_builder(e){this.object_to_geometry(e,void 0,new o.Matrix4)}create_buffer_geometry(e){return this.to_geometry_builder(e),this.builder.build()}object_to_geometry(e,t,i){const{no_translate:n,no_rotate:r,no_scale:a,hidden:_,break_child_trace:u,zxy_rotation_order:p,skip:h}=e.evaluation_flags,{position:v,rotation:f,scale:O}=e,m=new o.Euler(f.x,f.y,f.z,p?"ZXY":"ZYX"),g=(new o.Matrix4).compose(n?d:s.vec3_to_threejs(v),r?l:(new o.Quaternion).setFromEuler(m),a?c:s.vec3_to_threejs(O)).premultiply(i);let E;if(h?E=t:((E=new o.Bone).name=this.bone_id.toString(),E.position.set(v.x,v.y,v.z),E.setRotationFromEuler(m),E.scale.set(O.x,O.y,O.z),this.builder.add_bone(E),t&&t.add(E)),e.model&&!_&&this.model_to_geometry(e.model,g),this.bone_id++,!u)for(const t of e.children)this.object_to_geometry(t,E,g)}model_to_geometry(e,t){n.is_njcm_model(e)?this.njcm_model_to_geometry(e,t):this.xj_model_to_geometry(e,t)}njcm_model_to_geometry(e,t){const i=(new o.Matrix3).getNormalMatrix(t),n=e.vertices.map(e=>{const n=s.vec3_to_threejs(e.position),r=e.normal?s.vec3_to_threejs(e.normal):new o.Vector3(0,1,0);return n.applyMatrix4(t),r.applyMatrix3(i),{bone_id:this.bone_id,position:n,normal:r,bone_weight:e.bone_weight,bone_weight_status:e.bone_weight_status,calc_continue:e.calc_continue}});this.vertices.put(n);for(const t of e.meshes){const e=this.builder.index_count;for(let e=0;e<t.vertices.length;++e){const i=t.vertices[e],o=this.vertices.get(i.index);if(o.length){const s=o[0],n=s.normal||i.normal||a,r=this.builder.vertex_count;this.builder.add_vertex(s.position,n,t.has_tex_coords?i.tex_coords:_),e>=2&&(e%2==(t.clockwise_winding?1:0)?(this.builder.add_index(r-2),this.builder.add_index(r-1),this.builder.add_index(r)):(this.builder.add_index(r-2),this.builder.add_index(r),this.builder.add_index(r-1)));const d=[[0,0],[0,0],[0,0],[0,0]];for(let e=o.length-1;e>=0;e--){const t=o[e];d[t.bone_weight_status]=[t.bone_id,t.bone_weight]}for(const[e,t]of d)this.builder.add_bone_weight(e,t)}}this.builder.add_group(e,this.builder.index_count-e,t.texture_id)}}xj_model_to_geometry(e,t){const i=this.builder.vertex_count,n=(new o.Matrix3).getNormalMatrix(t);for(const{position:i,normal:r,uv:a}of e.vertices){const e=s.vec3_to_threejs(i).applyMatrix4(t),d=(r?s.vec3_to_threejs(r):new o.Vector3(0,1,0)).applyMatrix3(n),l=a||_;this.builder.add_vertex(e,d,l)}let r;for(const t of e.meshes){const e=this.builder.index_count;let o=!1;for(let e=2;e<t.indices.length;++e){const s=i+t.indices[e-2],n=i+t.indices[e-1],r=i+t.indices[e],a=this.builder.get_position(s),_=this.builder.get_position(n),d=this.builder.get_position(r),l=this.builder.get_normal(s),c=this.builder.get_normal(n),u=this.builder.get_normal(r),p=_.clone().sub(a).cross(d.clone().sub(a));o&&p.negate(),(p.dot(l)<0?1:0)+(p.dot(c)<0?1:0)+(p.dot(u)<0?1:0)>=2&&(o=!o),o?(this.builder.add_index(n),this.builder.add_index(s),this.builder.add_index(r)):(this.builder.add_index(s),this.builder.add_index(n),this.builder.add_index(r)),o=!o}null!=t.material_properties.texture_id&&(r=t.material_properties.texture_id),this.builder.add_group(e,this.builder.index_count-e,r)}}}},"49yP":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i("FXpb"),r=i("4SjJ"),a=i("39ZU"),_=i("nN8q"),d=[[r.GuiTool.Viewer,()=>o(void 0,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("vsj6")))).ViewerView)}))],[r.GuiTool.QuestEditor,()=>o(void 0,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("1vWm")))).QuestEditorView)}))],[r.GuiTool.HuntOptimizer,()=>o(void 0,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("LkpO")))).HuntOptimizerView)}))]];class l extends _.ResizableWidget{constructor(){super(),this.element=n.el.div({class:"application_MainContentView"}),this.tool_views=new Map(d.map(([e,t])=>[e,this.disposable(new a.LazyWidget(t))])),this.tool_changed=({value:e})=>{for(const e of this.tool_views.values())e.visible.val=!1;const t=this.tool_views.get(e);t&&(t.visible.val=!0)};for(const e of this.tool_views.values())this.element.append(e.element);const e=this.tool_views.get(r.gui_store.tool.val);e&&(e.visible.val=!0),this.disposable(r.gui_store.tool.observe(this.tool_changed)),this.finalize_construction(l.prototype)}resize(e,t){super.resize(e,t);for(const i of this.tool_views.values())i.resize(e,t);return this}}t.MainContentView=l},"4Mnx":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("lPzw"),s=i("bJO5"),n=i("xs7i"),r=i("aEXR"),a=i("SoCI");t.area_store=new class{constructor(){this.areas=[],this.get_areas_for_episode=e=>this.areas[e],this.get_area=(e,t)=>{const i=this.areas[e].find(e=>e.id===t);if(!i)throw new Error(`Area id ${t} for episode ${e} is invalid.`);return i},this.get_variant=(e,t,i)=>{const o=this.get_area(e,t).area_variants[i];if(!o)throw new Error(`Area variant id ${i} for area ${t} of episode ${e} is invalid.`);return o},this.get_area_sections=(e,t)=>r.load_area_sections(e,t);for(const e of n.EPISODES)this.areas[e]=a.get_areas_for_episode(e).map(e=>{const t=new o.AreaModel(e.id,e.name,e.order,[]);for(const i of e.area_variants)t.area_variants.push(new s.AreaVariantModel(i.id,t));return t})}}},"4SjJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("nsCy");var n;!function(e){e[e.Viewer=0]="Viewer",e[e.QuestEditor=1]="QuestEditor",e[e.HuntOptimizer=2]="HuntOptimizer"}(n=t.GuiTool||(t.GuiTool={}));const r=new Map([[n.Viewer,"viewer"],[n.QuestEditor,"quest_editor"],[n.HuntOptimizer,"hunt_optimizer"]]),a=new Map([...r.entries()].map(([e,t])=>[t,e]));t.gui_store=new class{constructor(){this.tool=o.property(n.Viewer),this._server=o.property(s.Server.Ephinea),this.hash_disposer=this.tool.observe(({value:e})=>{let t=`#/${function(e){const t=r.get(e);if(t)return t;throw new Error(`To string not implemented for ${n[e]}.`)}(e)}`;this.features.size&&(t+="?features="+[...this.features].join(",")),window.location.hash=t}),this.global_keydown_handlers=new Map,this.features=new Set,this.dispatch_global_keydown=e=>{const t=[];e.ctrlKey&&t.push("Ctrl"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),t.push(e.key.toUpperCase());const i=t.join("-"),o=this.global_keydown_handlers.get(this.handler_key(this.tool.val,i));o&&(e.preventDefault(),o(e))};const e=window.location.hash.slice(2),[t,i]=e.split("?");if(i){const e=i.split("&").map(e=>e.split("=")).find(([e])=>"features"===e);if(e&&e.length>=2)for(const t of e[1].split(","))this.features.add(t)}var _;this.tool.val=(_=t,a.get(_)||n.Viewer),this.server=this._server,window.addEventListener("keydown",this.dispatch_global_keydown)}dispose(){this.hash_disposer.dispose(),this.global_keydown_handlers.clear(),window.removeEventListener("keydown",this.dispatch_global_keydown)}on_global_keydown(e,t,i){const o=this.handler_key(e,t);return this.global_keydown_handlers.set(o,i),{dispose:()=>{this.global_keydown_handlers.delete(o)}}}feature_active(e){return this.features.has(e)}handler_key(e,t){return`${n[e]} -> ${t}`}}},"4VsB":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("0CzU");class s extends o.SimpleProperty{constructor(e,t,i){super(t),this.widget=e,this.set_value=i}set_val(e,t){this.set_value.call(this.widget,e),super.set_val(e,Object.assign({silent:!0},t))}}t.WidgetProperty=s},"4mUz":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse_rel=function(e,t){e.seek_end(32);const i=e.u32(),o=e.u32();e.seek(8);const s=e.u32();return e.seek_start(i),{data_offset:s,index:t?function(e,t){const i=e.u16_array(t),o=[];let s=0;for(const t of i){s+=4*t,e.seek_start(s-4);const i=e.u32(),n=e.u32();o.push({offset:n,size:i})}return o}(e,o):[]}}},"4s8/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ValueSet=class{constructor(){this.intervals=[],this[Symbol.iterator]=()=>{let e=0,t=NaN;return{next:()=>{let i=!0;return e<this.intervals.length&&(isNaN(t)?(t=this.intervals[e].start,i=!1):t>this.intervals[e].end?++e<this.intervals.length&&(t=this.intervals[e].start,i=!1):i=!1),{done:i,value:t++}}}}}size(){return this.intervals.reduce((e,t)=>e+t.end-t.start+1,0)}get(e){for(const{start:t,end:i}of this.intervals){const o=i-t+1;if(e<o)return t+e;e-=o}}min(){return this.intervals.length?this.intervals[0].start:void 0}max(){return this.intervals.length?this.intervals[this.intervals.length-1].end:void 0}has(e){for(const t of this.intervals)if(t.start<=e&&e<=t.end)return!0;return!1}set_value(e){return this.intervals=[{start:e,end:e}],this}set_interval(e,t){if(t<e)throw new Error(`Interval upper bound should be greater than or equal to lower bound, got [${e}, ${t}].`);return this.intervals=[{start:e,end:t}],this}scalar_add(e){for(const t of this.intervals)t.start+=e,t.end+=e;return this}scalar_sub(e){return this.scalar_add(-e)}scalar_mul(e){for(const t of this.intervals)t.start*=e,t.end*=e;return this}scalar_div(e){for(const t of this.intervals)t.start=Math.floor(t.start/e),t.end=Math.floor(t.end/e);return this}union(e){let t=0;e:for(const i of e.intervals){for(;t<this.intervals.length;){const e=this.intervals[t];if(i.end<e.start-1){this.intervals.splice(t,0,i),t++;continue e}if(i.start<=e.end+1){e.start=Math.min(e.start,i.start);let o=t;for(;o<this.intervals.length&&i.end>this.intervals[o].start;)e.end=this.intervals[o].end,o++;this.intervals.splice(t+1,o-t-1),e.end=Math.max(e.end,i.end),t++;continue e}t++}this.intervals.push(i)}return this}to_array(){const e=[];for(const{start:t,end:i}of this.intervals)for(let o=t;o<=i;o++)e.push(o);return e}}},"4vnR":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i("Womt"),r=s(i("GGSb")),a=i("AUhH"),_=i("bcBH"),d=i("NRxM"),l=i("488w"),c=i("kwt4"),u=i("yub1"),p=i("iR5r"),h=i("Yuai"),v=i("+oIp"),f=i("sZ1+"),O=i("yQqj"),m=r.default.get("quest_editor/loading/entities"),g=new n.CylinderBufferGeometry(3,3,20);g.translate(0,10,0),g.computeBoundingBox(),g.computeBoundingSphere();const E=new Promise(e=>e(g)),P=[],w=new Promise(e=>e(P)),b=new a.LoadingCache,y=new a.LoadingCache;for(const e of[f.NpcType.Unknown,f.NpcType.Migium,f.NpcType.Hidoom,f.NpcType.DeathGunner,f.NpcType.StRappy,f.NpcType.HalloRappy,f.NpcType.EggRappy,f.NpcType.Migium2,f.NpcType.Hidoom2,f.NpcType.Recon,v.ObjectType.Unknown,v.ObjectType.PlayerSet,v.ObjectType.Particle,v.ObjectType.LightCollision,v.ObjectType.EnvSound,v.ObjectType.FogCollision,v.ObjectType.EventCollision,v.ObjectType.CharaCollision,v.ObjectType.ObjRoomID,v.ObjectType.LensFlare,v.ObjectType.ScriptCollision,v.ObjectType.MapCollision,v.ObjectType.ScriptCollisionA,v.ObjectType.ItemLight,v.ObjectType.RadarCollision,v.ObjectType.FogCollisionSW,v.ObjectType.ImageBoard,v.ObjectType.UnknownItem29,v.ObjectType.UnknownItem30,v.ObjectType.UnknownItem31,v.ObjectType.MenuActivation,v.ObjectType.BoxDetectObject,v.ObjectType.SymbolChatObject,v.ObjectType.TouchPlateObject,v.ObjectType.TargetableObject,v.ObjectType.EffectObject,v.ObjectType.CountDownObject,v.ObjectType.UnknownItem38,v.ObjectType.UnknownItem39,v.ObjectType.UnknownItem40,v.ObjectType.UnknownItem41,v.ObjectType.TelepipeLocation,v.ObjectType.BGMCollision,v.ObjectType.Pioneer2InvisibleTouchplate,v.ObjectType.TempleMapDetect,v.ObjectType.Firework,v.ObjectType.MainRagolTeleporterBattleInNextArea,v.ObjectType.Rainbow,v.ObjectType.FloatingBlueLight,v.ObjectType.PopupTrapNoTech,v.ObjectType.Poison,v.ObjectType.EnemyTypeBoxYellow,v.ObjectType.EnemyTypeBoxBlue,v.ObjectType.EmptyTypeBoxBlue,v.ObjectType.FloatingRocks,v.ObjectType.FloatingSoul,v.ObjectType.Butterfly,v.ObjectType.UnknownItem400,v.ObjectType.CCAAreaTeleporter,v.ObjectType.UnknownItem523,v.ObjectType.WhiteBird,v.ObjectType.OrangeBird,v.ObjectType.UnknownItem529,v.ObjectType.UnknownItem530,v.ObjectType.Seagull,v.ObjectType.UnknownItem576,v.ObjectType.WarpInBarbaRayRoom,v.ObjectType.UnknownItem672,v.ObjectType.InstaWarp,v.ObjectType.LabInvisibleObject,v.ObjectType.UnknownItem700])b.set(e,E),y.set(e,w);function D(e,t){return o(this,void 0,void 0,(function*(){const i=function e(t,i){if(O.is_npc_type(t))switch(t){case f.NpcType.Dubswitch:return`/npcs/${f.NpcType[t]}.${i===T.Geometry?"xj":"xvm"}`;case f.NpcType.Hildebear2:return e(f.NpcType.Hildebear,i);case f.NpcType.Hildeblue2:return e(f.NpcType.Hildeblue,i);case f.NpcType.RagRappy2:return e(f.NpcType.RagRappy,i);case f.NpcType.Monest2:return e(f.NpcType.Monest,i);case f.NpcType.Mothmant2:return e(f.NpcType.Mothmant,i);case f.NpcType.PoisonLily2:return e(f.NpcType.PoisonLily,i);case f.NpcType.NarLily2:return e(f.NpcType.NarLily,i);case f.NpcType.GrassAssassin2:return e(f.NpcType.GrassAssassin,i);case f.NpcType.Dimenian2:return e(f.NpcType.Dimenian,i);case f.NpcType.LaDimenian2:return e(f.NpcType.LaDimenian,i);case f.NpcType.SoDimenian2:return e(f.NpcType.SoDimenian,i);case f.NpcType.DarkBelra2:return e(f.NpcType.DarkBelra,i);case f.NpcType.SavageWolf2:return e(f.NpcType.SavageWolf,i);case f.NpcType.BarbarousWolf2:return e(f.NpcType.BarbarousWolf,i);case f.NpcType.PanArms2:return e(f.NpcType.PanArms,i);case f.NpcType.Dubchic2:return e(f.NpcType.Dubchic,i);case f.NpcType.Gilchic2:return e(f.NpcType.Gilchic,i);case f.NpcType.Garanz2:return e(f.NpcType.Garanz,i);case f.NpcType.Dubswitch2:return e(f.NpcType.Dubswitch,i);case f.NpcType.Delsaber2:return e(f.NpcType.Delsaber,i);case f.NpcType.ChaosSorcerer2:return e(f.NpcType.ChaosSorcerer,i);default:return`/npcs/${f.NpcType[t]}.${i===T.Geometry?"nj":"xvm"}`}else{if(i!==T.Geometry)return`/objects/${v.object_data(t).pso_id}.xvm`;switch(t){case v.ObjectType.EasterEgg:case v.ObjectType.ChristmasTree:case v.ObjectType.ChristmasWreath:case v.ObjectType.TwentyFirstCentury:case v.ObjectType.Sonic:case v.ObjectType.WelcomeBoard:case v.ObjectType.FloatingJellyfish:case v.ObjectType.RuinsSeal:case v.ObjectType.Dolphin:case v.ObjectType.Cacti:case v.ObjectType.BigBrownRock:case v.ObjectType.PoisonPlant:case v.ObjectType.BigBlackRocks:case v.ObjectType.FallingRock:case v.ObjectType.DesertFixedTypeBoxBreakableCrystals:case v.ObjectType.BeeHive:return`/objects/${v.object_data(t).pso_id}.nj`;default:return`/objects/${v.object_data(t).pso_id}.xj`}}}(e,t);return{url:i,data:yield h.load_array_buffer(i)}}))}var T;t.load_entity_geometry=function(e){return o(this,void 0,void 0,(function*(){return b.get_or_set(e,()=>o(this,void 0,void 0,(function*(){try{const{url:t,data:i}=yield D(e,T.Geometry),o=new d.ArrayBufferCursor(i,_.Endianness.Little),s=t.endsWith(".nj")?c.parse_nj(o):c.parse_xj(o);return s.length?l.ninja_object_to_buffer_geometry(s[0]):(m.warn(`Couldn't parse ${t} for ${O.entity_type_to_string(e)}.`),g)}catch(t){return m.warn(`Couldn't load geometry file for ${O.entity_type_to_string(e)}.`,t),g}})))}))},t.load_entity_textures=function(e){return o(this,void 0,void 0,(function*(){return y.get_or_set(e,()=>o(this,void 0,void 0,(function*(){try{const{data:t}=yield D(e,T.Texture),i=new d.ArrayBufferCursor(t,_.Endianness.Little),o=u.parse_xvm(i);return p.xvm_to_textures(o)}catch(t){return m.warn(`Couldn't load texture file for ${O.entity_type_to_string(e)}.`,t),P}})))}))},t.load_entity_data=D,function(e){e[e.Geometry=0]="Geometry",e[e.Texture=1]="Texture"}(T||(T={}))},"52VV":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("+LO4"),s=i("nEgy");class n extends o.AbstractMinimalProperty{constructor(e,t){super(),this.dependency=e,this.f=t}get val(){return this.get_val()}get_val(){return this.computed_property?this.computed_property.val:this.f(this.dependency.val).val}observe(e,t){const i=super.observe(e,t);return null==this.dependency_disposable&&(this.dependency_disposable=this.dependency.observe(()=>{const e=this.val;this.compute_and_observe(),this.emit(e)}),this.compute_and_observe()),{dispose:()=>{i.dispose(),0===this.observers.length&&(this.dependency_disposable.dispose(),this.dependency_disposable=void 0,this.computed_disposable.dispose(),this.computed_disposable=void 0,this.computed_property=void 0)}}}map(e){return new s.DependentProperty([this],()=>e(this.val))}flat_map(e){return new n(this,t=>e(t))}compute_and_observe(){this.computed_disposable&&this.computed_disposable.dispose(),this.computed_property=this.f(this.dependency.val);let e=this.computed_property.val;this.computed_disposable=this.computed_property.observe(()=>{const t=e;e=this.val,this.emit(t)})}}t.FlatMappedProperty=n},"5aKR":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb"),n=i("7ZX1");i("+BDF");class r extends o.Widget{constructor(e){super(),this.element=s.el.div({class:"quest_editor_DisabledView"}),this.label=this.disposable(new n.Label(e,{enabled:!1})),this.element.append(this.label.element),this.finalize_construction(r.prototype)}}t.DisabledView=r},"6WXA":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("4SjJ"),n=i("LvDl"),r=i("M/y3");t.ServerMap=class{constructor(e){this.get_value=n.memoize(e)}get current(){return this._current||(this._current=s.gui_store.server.map(e=>this.get(e))),this._current}get(e){return this.get_value(e)}observe_current(e,t){const i=r.sequential(({value:t})=>o(this,void 0,void 0,(function*(){return e(yield t)})));return this.current.observe(i,t)}}},"6cU9":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb");i("+Mcu"),i("Tp1L");const s=i("ouMO"),n=i("QmPX");class r extends n.Control{constructor(e,t){super(t),this.element=o.create_element("label",{class:"core_FileButton core_Button"}),this.input=o.create_element("input",{class:"core_FileButton_input core_Button_inner"}),this._files=s.property([]),this.files=this._files,this.input.type="file",this.input.onchange=()=>{this.input.files&&this.input.files.length?this._files.val=[...this.input.files]:this._files.val=[]},t&&t.accept&&(this.input.accept=t.accept);const i=o.el.span({class:"core_FileButton_inner core_Button_inner"});t&&null!=t.icon_left&&i.append(o.el.span({class:"core_FileButton_left core_Button_left"},o.icon(t.icon_left))),i.append(o.el.span({class:"core_Button_center",text:e})),this.element.append(i,this.input),this.disposables(this.enabled.observe(({value:e})=>{this.input.disabled=!e,e?this.element.classList.remove("disabled"):this.element.classList.add("disabled")})),this.finalize_construction(r.prototype)}click(){this.input.click()}}t.FileButton=r},"70mo":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("Ts/k"),n=i("n5fr"),r=i("GGSb").get("core/undo/UndoStack");t.UndoStack=class{constructor(){this.stack=o.list_property(),this.index=o.property(0),this.can_undo=this.index.map(e=>e>0),this.can_redo=o.map((e,t)=>t<e.length,this.stack,this.index),this.first_undo=this.can_undo.map(e=>e?this.stack.get(this.index.val-1):void 0),this.first_redo=this.can_redo.map(e=>e?this.stack.get(this.index.val):void 0),this.undoing_or_redoing=!1}make_current(){n.undo_manager.current.val=this}ensure_not_current(){n.undo_manager.current.val===this&&(n.undo_manager.current.val=s.NOOP_UNDO)}push(e){return this.undoing_or_redoing||(this.stack.splice(this.index.val,1/0,e),this.index.update(e=>e+1)),e}pop(){return this.index.update(e=>e-1),this.stack.splice(this.index.val,1)[0]}undo(){if(this.can_undo.val&&!this.undoing_or_redoing){try{this.undoing_or_redoing=!0,this.index.update(e=>e-1),this.stack.get(this.index.val).undo()}catch(e){r.warn("Error while undoing action.",e)}finally{this.undoing_or_redoing=!1}return!0}return!1}redo(){if(this.can_redo.val&&!this.undoing_or_redoing){try{this.undoing_or_redoing=!0,this.stack.get(this.index.val).redo(),this.index.update(e=>e+1)}catch(e){r.warn("Error while redoing action.",e)}finally{this.undoing_or_redoing=!1}return!0}return!1}reset(){this.stack.clear(),this.index.val=0}}},"7CyS":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("VwSi");t.PSO_FRAME_RATE=30,t.create_animation_clip=function(e,i){const n=i.interpolation===s.NjInterpolation.Spline?o.InterpolateSmooth:o.InterpolateLinear,r=[];return i.motion_data.forEach((i,a)=>{const _=e.get_bone(a);_&&i.tracks.forEach(({type:e,keyframes:i})=>{const d=[],l=[];for(const n of i)if(d.push(n.frame/t.PSO_FRAME_RATE),e===s.NjKeyframeTrackType.Rotation){const e=_.evaluation_flags.zxy_rotation_order?"ZXY":"ZYX",t=(new o.Quaternion).setFromEuler(new o.Euler(n.value.x,n.value.y,n.value.z,e));l.push(t.x,t.y,t.z,t.w)}else l.push(n.value.x,n.value.y,n.value.z);if(e===s.NjKeyframeTrackType.Rotation)r.push(new o.QuaternionKeyframeTrack(`.bones[${a}].quaternion`,d,l,n));else{const t=e===s.NjKeyframeTrackType.Position?`.bones[${a}].position`:`.bones[${a}].scale`;r.push(new o.VectorKeyframeTrack(t,d,l,n))}})}),new o.AnimationClip("Animation",(i.frame_count-1)/t.PSO_FRAME_RATE,r).optimize()}},"7ZX1":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb");i("ku4b");const n=i("4VsB");class r extends o.Widget{constructor(e,t){super(t),this.element=s.create_element("label",{class:"core_Label"}),this._text=new n.WidgetProperty(this,"",this.set_text),this.text=this._text,"string"==typeof e?this.set_text(e):this.disposable(this._text.bind_to(e)),this.finalize_construction(r.prototype)}set for(e){this.element.htmlFor=e}set_text(e){this.element.textContent=e}}t.Label=r},"8hIv":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=new DataView(new ArrayBuffer(4));t.reinterpret_i32_as_f32=function(e){return o.setInt32(0,e),o.getFloat32(0)},t.reinterpret_f32_as_i32=function(e){return o.setFloat32(0,e),o.getInt32(0)}},"9Onn":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")).default.get("core/data_formats/parsing/ninja/njcm");var n;function r(e,t,i){const o=[];let d=!0;for(;d;){const l=e.u8(),c=e.u8(),u=e.position;let p=0;if(0===l)o.push({type:n.Null,type_id:l});else if(1<=l&&l<=3)o.push({type:n.Bits,type_id:l});else if(4===l){const i=c,s=e.position;o.push({type:n.CachePolygonList,type_id:l,cache_index:i,offset:s}),t[i]=s,d=!1}else if(5===l){const s=c,a=t[s];null!=a&&(e.seek_start(a),o.push(...r(e,t,i))),o.push({type:n.DrawPolygonList,type_id:l,cache_index:s})}else if(8<=l&&l<=9){p=2;const t=e.u16();o.push({type:n.Tiny,type_id:l,flip_u:0!=(128&l),flip_v:0!=(64&l),clamp_u:0!=(32&l),clamp_v:0!=(16&l),mipmap_d_adjust:15&l,filter_mode:t>>>14,super_sample:0!=(64&t),texture_id:8191&t})}else 17<=l&&l<=31?(p=2+2*e.u16(),o.push({type:n.Material,type_id:l})):32<=l&&l<=50?(p=2+4*e.u16(),o.push({type:n.Vertex,type_id:l,vertices:a(e,l,c)})):56<=l&&l<=58?(p=2+2*e.u16(),o.push({type:n.Volume,type_id:l})):64<=l&&l<=75?(p=2+2*e.u16(),o.push({type:n.Strip,type_id:l,triangle_strips:_(e,l,c)})):255===l?(p=i?2:0,o.push({type:n.End,type_id:l}),d=!1):(p=2+2*e.u16(),o.push({type:n.Unknown,type_id:l}),s.warn(`Unknown chunk type ${l} at offset ${u}.`));e.seek_start(u+p)}return o}function a(e,t,i){if(t<32||t>50)return s.warn(`Unknown vertex chunk type ${t}.`),[];const o=3&i,n=0!=(128&i),r=e.u16(),a=e.u16(),_=[];for(let i=0;i<a;++i){const s={index:r+i,position:e.vec3_f32(),bone_weight:1,bone_weight_status:o,calc_continue:n};if(32===t)e.seek(4);else if(33===t)e.seek(4),s.normal=e.vec3_f32(),e.seek(4);else if(35<=t&&t<=40)37===t?(s.index=r+e.u16(),s.bone_weight=e.u16()/255):e.seek(4);else if(41<=t&&t<=47)s.normal=e.vec3_f32(),t>=42&&(44===t?(s.index=r+e.u16(),s.bone_weight=e.u16()/255):e.seek(4));else if(48<=t&&t<=50){const i=e.u32();s.normal={x:(i>>20&1023)/1023,y:(i>>10&1023)/1023,z:(1023&i)/1023},t>=49&&e.seek(4)}_.push(s)}return _}function _(e,t,i){const o={ignore_light:0!=(1&i),ignore_specular:0!=(2&i),ignore_ambient:0!=(4&i),use_alpha:0!=(8&i),double_side:0!=(16&i),flat_shading:0!=(32&i),environment_mapping:0!=(64&i)},s=e.u16(),n=s>>>14,r=16383&s;let a=!1,_=!1,d=!1,l=!1;switch(t){case 64:break;case 65:case 66:a=!0;break;case 67:d=!0;break;case 68:case 69:a=!0,d=!0;break;case 70:_=!0;break;case 71:case 72:a=!0,_=!0;break;case 73:break;case 74:case 75:l=!0;break;default:throw new Error(`Unexpected chunk type ID: ${t}.`)}const c=[];for(let t=0;t<r;++t){const t=e.i16(),i=t<1,s=Math.abs(t),r=[];for(let t=0;t<s;++t){const i={index:e.u16()};r.push(i),a&&(i.tex_coords={x:e.u16()/255,y:e.u16()/255}),_&&e.seek(4),d&&(i.normal={x:e.u16()/255,y:e.u16()/255,z:e.u16()/255}),l&&e.seek(8),t>=2&&e.seek(2*n)}c.push(Object.assign(Object.assign({},o),{clockwise_winding:i,has_tex_coords:a,has_normal:d,vertices:r}))}return c}!function(e){e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Bits=2]="Bits",e[e.CachePolygonList=3]="CachePolygonList",e[e.DrawPolygonList=4]="DrawPolygonList",e[e.Tiny=5]="Tiny",e[e.Material=6]="Material",e[e.Vertex=7]="Vertex",e[e.Volume=8]="Volume",e[e.Strip=9]="Strip",e[e.End=10]="End"}(n||(n={})),t.parse_njcm_model=function(e,t){const i=e.u32(),o=e.u32(),s=e.vec3_f32(),a=e.f32(),_=[],d=[];if(i){e.seek_start(i);for(const i of r(e,t,!0))if(i.type===n.Vertex)for(const e of i.vertices)_[e.index]={position:e.position,normal:e.normal,bone_weight:e.bone_weight,bone_weight_status:e.bone_weight_status,calc_continue:e.calc_continue}}if(o){e.seek_start(o);let i=void 0;for(const o of r(e,t,!1))if(o.type===n.Tiny)i=o.texture_id;else if(o.type===n.Strip){for(const e of o.triangle_strips)e.texture_id=i;d.push(...o.triangle_strips)}}return{type:"njcm",vertices:_,meshes:d,collision_sphere_center:s,collision_sphere_radius:a}}},"9Ykw":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse_iff=function(e){const t=[];for(;e.bytes_left;){const i=e.u32(),o=e.u32();if(o>e.bytes_left)break;t.push({type:i,data:e.take(o)})}return t}},"9dYx":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("GuD3");class s extends o.AbstractCursor{write_u8(e){return this.write_u8_at(this.position,e),this._position+=1,this}write_u16(e){return this.write_u16_at(this.position,e),this._position+=2,this}write_u32(e){return this.write_u32_at(this.position,e),this._position+=4,this}write_i8(e){return this.write_i8_at(this.position,e),this._position+=1,this}write_i16(e){return this.write_i16_at(this.position,e),this._position+=2,this}write_i32(e){return this.write_i32_at(this.position,e),this._position+=4,this}write_f32(e){return this.write_f32_at(this.position,e),this._position+=4,this}write_u8_array(e){return this.write_u8_array_at(this.position,e),this._position+=e.length,this}write_u16_array(e){return this.write_u16_array_at(this.position,e),this._position+=2*e.length,this}write_u32_array(e){return this.write_u32_array_at(this.position,e),this._position+=4*e.length,this}write_vec2_f32(e){return this.write_vec2_f32_at(this.position,e),this._position+=8,this}write_vec3_f32(e){return this.write_vec3_f32_at(this.position,e),this._position+=12,this}write_cursor(e){const t=e.size-e.position;return this.ensure_size(t),e.copy_to_uint8_array(new Uint8Array(this.backing_buffer,this.offset+this.position,t),t),this._position+=t,this}write_string_ascii(e,t){return this.write_string_ascii_at(this.position,e,t),this._position+=t,this}write_string_utf16(e,t){return this.write_string_utf16_at(this.position,e,t),this._position+=t,this}write_u8_at(e,t){return this.ensure_size(1,e),this.dv.setUint8(e,t),this}write_u16_at(e,t){return this.ensure_size(2,e),this.dv.setUint16(e,t,this.little_endian),this}write_u32_at(e,t){return this.ensure_size(4,e),this.dv.setUint32(e,t,this.little_endian),this}write_i8_at(e,t){return this.ensure_size(1,e),this.dv.setInt8(e,t),this}write_i16_at(e,t){return this.ensure_size(2,e),this.dv.setInt16(e,t,this.little_endian),this}write_i32_at(e,t){return this.ensure_size(4,e),this.dv.setInt32(e,t,this.little_endian),this}write_f32_at(e,t){return this.ensure_size(4,e),this.dv.setFloat32(e,t,this.little_endian),this}write_u8_array_at(e,t){return this.ensure_size(t.length,e),new Uint8Array(this.backing_buffer,this.offset+e).set(new Uint8Array(t)),this}write_u16_array_at(e,t){this.ensure_size(2*t.length,e);const i=t.length;for(let o=0;o<i;o++)this.write_u16_at(e+2*o,t[o]);return this}write_u32_array_at(e,t){this.ensure_size(4*t.length,e);const i=t.length;for(let o=0;o<i;o++)this.write_u32_at(e+4*o,t[o]);return this}write_vec2_f32_at(e,t){return this.ensure_size(8,e),this.dv.setFloat32(e,t.x,this.little_endian),this.dv.setFloat32(e+4,t.y,this.little_endian),this}write_vec3_f32_at(e,t){return this.ensure_size(12,e),this.dv.setFloat32(e,t.x,this.little_endian),this.dv.setFloat32(e+4,t.y,this.little_endian),this.dv.setFloat32(e+8,t.z,this.little_endian),this}write_string_ascii_at(e,t,i){this.ensure_size(i,e);const o=Math.min(i,t.length);for(let i=0;i<o;i++)this.write_u8_at(e+i,t.codePointAt(i));const s=i-o;for(let t=0;t<s;t++)this.write_u8_at(e+o+t,0);return this}write_string_utf16_at(e,t,i){this.ensure_size(i,e);const o=Math.floor(i/2),s=Math.min(o,t.length);for(let i=0;i<s;i++)this.write_u16_at(e+2*i,t.codePointAt(i));const n=o-s;for(let t=0;t<n;t++)this.write_u16_at(e+2*s+2*t,0);return this}ensure_size(e,t=this.position){const i=this.size-t;if(e>i)throw new Error(`${e} Bytes required but only ${i} available.`)}}t.AbstractWritableCursor=s},"9fJw":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CharacterClassModel=class{constructor(e,t,i,o){this.name=e,this.head_style_count=t,this.hair_styles_count=i,this.hair_styles_with_accessory=o}}},AAJ5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("nN8q"),n=i("r+6V"),r=i("w6HN"),a=i("ouMO");i("wpBG");class _ extends s.ResizableWidget{constructor(e,t){super(),this.store=e,this.element=o.el.div({class:"MessageLog",tab_index:-1}),this.was_scrolled_to_bottom=!0,this.create_message_element=e=>o.el.div({class:[this.base_classname+"_message",this.base_classname+"_"+e.log_level.name+"_message"].join(" ")},o.el.div({class:this.base_classname+"_message_timestamp",text:e.formatted_timestamp}),o.el.div({class:this.base_classname+"_message_group",text:"["+e.log_group.name+"]"}),o.el.div({class:this.base_classname+"_message_level",text:"["+e.log_level.name+"]"}),o.el.div({class:this.base_classname+"_message_contents",text:e.message_contents})),this.base_classname=this.element.className,this.element.classList.add(t),this.list_container=o.el.div({class:this.base_classname+"_list_container"}),this.list_element=o.el.div({class:this.base_classname+"_message_list"}),this.level_filter=new n.DropDown("Level",this.store.log_levels,e=>e.name,{class:this.base_classname+"_level_filter"});const i={name:"Show All",key:-1},s=a.list_property(void 0,i,...this.store.log_groups.val);this.group_filter=new n.DropDown("Group",s,e=>e.name,{class:this.base_classname+"_group_filter"}),this.settings_bar=new r.ToolBar({class:this.base_classname+"_settings",children:[this.level_filter,this.group_filter]}),this.disposables(this.store.log_messages.observe_list(()=>{this.was_scrolled_to_bottom=this.is_scrolled_to_bottom()}),o.bind_children_to(this.list_element,this.store.log_messages,this.create_message_element),this.store.log_messages.observe_list(()=>{this.was_scrolled_to_bottom&&this.scroll_to_bottom()}),this.level_filter.chosen.observe(({value:e})=>this.store.set_log_level(e)),this.group_filter.chosen.observe(({value:e})=>{e.key===i.key?this.store.show_all_log_groups():this.store.set_log_group(e)}),this.store.log_groups.observe(()=>{s.val=[i].concat(this.store.log_groups.val)})),this.list_container.appendChild(this.list_element),this.element.appendChild(this.settings_bar.element),this.element.appendChild(this.list_container),this.finalize_construction(this.constructor.prototype)}get_formatted_timestamp(e=new Date){return"["+e.toISOString()+"]"}get_autoscroll_treshold(){const e=this.list_element.firstElementChild;return e?e.clientHeight/2:0}is_scrolled_to_bottom(){return this.list_container.scrollTop>=this.list_container.scrollHeight-this.list_container.offsetHeight-this.get_autoscroll_treshold()}scroll_to_bottom(){this.list_container.scrollTo({top:this.list_container.scrollHeight,left:0,behavior:"auto"})}add_message(e){const t=this.is_scrolled_to_bottom();this.list_element.appendChild(e),t&&this.scroll_to_bottom()}}t.MessageLog=_},"AF+w":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("bcBH"),r=i("NRxM"),a=i("/Wax"),_=i("tjEv"),d=i("wtpc"),l=s.default.get("core/data_formats/parsing/quest/qst");function c(e,t,i,o){e.write_u8_array([28,4,19,0]),e.write_u8(i),e.write_u8_array([0,0,0]),e.write_string_ascii(o,16);const s=Math.min(1024,t.bytes_left);e.write_cursor(t.take(s));for(let t=s;t<1024;++t)e.write_u8(0);return e.write_u32(s),e.write_u32(0),t.bytes_left>0}t.parse_qst=function(e){let t="PC";const i=e.u8();e.seek(1);const o=e.u8();if(68===i?t="Dreamcast/GameCube":88===i?68===o&&(t="Blue Burst"):166===i&&(t="Dreamcast download"),"Blue Burst"===t){e.seek_start(0);const i=function(e){const t=[];let i,o;for(let s=0;s<4;++s){e.seek(4);const s=e.u16();e.seek(38);const n=e.string_ascii(16,!0,!0),r=e.u32(),a=e.string_ascii(24,!0,!0);if(null!=i&&null!=o&&(s!==i||d.basename(n)!==d.basename(o))){e.seek(-88);break}i=s,o=n,t.push({quest_id:s,file_name:n,file_name_2:a,size:r})}return t}(e),o=function(e,t){const i=new Map;for(;e.bytes_left>=1056;){const o=e.position,s=e.seek(4).u8(),r=e.seek(3).string_ascii(16,!0,!0);let d=i.get(r);if(!d){const e=t.get(r);i.set(r,d={name:r,expected_size:e,cursor:new a.ResizableBufferCursor(new _.ResizableBuffer(e||10240),n.Endianness.Little),chunk_nos:new Set})}d.chunk_nos.has(s)?l.warn(`File chunk number ${s} of file ${r} was already encountered, overwriting previous chunk.`):d.chunk_nos.add(s);let c=e.seek(1024).u32();e.seek(-1028),c>1024&&(l.warn(`Data segment size of ${c} is larger than expected maximum size, reading just 1024 bytes.`),c=1024);const u=e.take(c),p=1024*s;if(d.cursor.size=Math.max(p+c,d.cursor.size),d.cursor.seek_start(p).write_cursor(u),e.seek(1032-u.size),e.position!==o+1056)throw new Error(`Read ${e.position-o} file chunk message bytes instead of expected 1056.`)}e.bytes_left&&l.warn(`${e.bytes_left} Bytes left in file.`);for(const e of i.values()){e.cursor.seek_start(0),e.chunk_nos=new Set(Array.from(e.chunk_nos.values()).sort((e,t)=>e-t)),null!=e.expected_size&&e.cursor.size!==e.expected_size&&l.warn(`File ${e.name} has an actual size of ${e.cursor.size} instead of the expected size ${e.expected_size}.`);const t=Math.max(e.cursor.size,e.expected_size||0);for(let i=0;i<Math.ceil(t/1024);++i)e.chunk_nos.has(i)||l.warn(`File ${e.name} is missing chunk ${i}.`)}const o=[];for(const e of i.values())o.push({name:e.name,data:e.cursor.seek_start(0).array_buffer()});return o}(e,new Map(i.map(e=>[e.file_name,e.size])));for(const e of o){const t=i.find(t=>t.file_name===e.name);t&&(e.id=t.quest_id,e.name_2=t.file_name_2)}return{version:t,files:o}}l.error(`Can't parse ${t} QST files.`)},t.write_qst=function(e){const t=e.files,i=t.map(e=>88+1056*Math.ceil(e.data.byteLength/1024)).reduce((e,t)=>e+t),o=new ArrayBuffer(i),s=new r.ArrayBufferCursor(o,n.Endianness.Little);if(function(e,t){for(const i of t){if(i.name.length>15)throw new Error(`File ${i.name} has a name longer than 15 characters.`);e.write_u16(88),e.write_u16(68),e.write_u16(i.id||0);for(let t=0;t<38;++t)e.write_u8(0);let t;if(e.write_string_ascii(i.name,16),e.write_u32(i.data.byteLength),null==i.name_2){const e=i.name.lastIndexOf(".");t=-1===e?i.name+"_j":i.name.slice(0,e)+"_j"+i.name.slice(e)}else t=i.name_2;if(t.length>24)throw Error(`File ${i.name} has a file_name_2 length (${t}) longer than 24 characters.`);e.write_string_ascii(t,24)}}(s,t),function(e,t){const i=t.map(e=>({no:0,data:new r.ArrayBufferCursor(e.data,n.Endianness.Little),name:e.name}));let o=0;for(;o<i.length;)for(const t of i)t.data.bytes_left&&(c(e,t.data,t.no++,t.name)||o++);for(const e of i){const t=Math.ceil(e.data.size/1024);if(e.no!==t)throw new Error(`Expected to write ${t} chunks for file "${e.name}" but ${e.no} where written.`)}}(s,t),s.position!==i)throw new Error(`Expected a final file size of ${i}, but got ${s.position}.`);return o}},AU7j:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ZPAt");var s;!function(e){e[e.None=0]="None",e[e.Return=1]="Return",e[e.Jump=2]="Jump",e[e.ConditionalJump=3]="ConditionalJump",e[e.Call=4]="Call"}(s=t.BranchType||(t.BranchType={}));class n{constructor(e,t,i,o,s){this.from=[],this.to=[],this.segment=e,this.start=t,this.end=i,this.branch_type=o,this.branch_labels=s}link_to(e){this.to.includes(e)||(this.to.push(e),e.from.push(this))}index_of_instruction(e){const t=this.segment.instructions.indexOf(e,this.start);return t<this.end?t:-1}}t.BasicBlock=n;class r{constructor(){this.blocks=[],this.instructions_to_block=new Map,this.labels_to_block=new Map}get_block_for_instruction(e){return this.instructions_to_block.get(e)}static create(e){const t=new r;for(const i of e)this.create_basic_blocks(t,i);return this.link_blocks(t),t}static create_basic_blocks(e,t){const i=t.instructions.length;let r=0,a=!0;for(let _=0;_<i;_++){const d=t.instructions[_];let l,c;switch(d.opcode.code){case o.OP_RET.code:l=s.Return,c=[];break;case o.OP_JMP.code:l=s.Jump,c=[d.args[0].value];break;case o.OP_JMP_ON.code:case o.OP_JMP_OFF.code:l=s.ConditionalJump,c=[d.args[0].value];break;case o.OP_JMP_E.code:case o.OP_JMPI_E.code:case o.OP_JMP_NE.code:case o.OP_JMPI_NE.code:case o.OP_UJMP_G.code:case o.OP_UJMPI_G.code:case o.OP_JMP_G.code:case o.OP_JMPI_G.code:case o.OP_UJMP_L.code:case o.OP_UJMPI_L.code:case o.OP_JMP_L.code:case o.OP_JMPI_L.code:case o.OP_UJMP_GE.code:case o.OP_UJMPI_GE.code:case o.OP_JMP_GE.code:case o.OP_JMPI_GE.code:case o.OP_UJMP_LE.code:case o.OP_UJMPI_LE.code:case o.OP_JMP_LE.code:case o.OP_JMPI_LE.code:l=s.ConditionalJump,c=[d.args[2].value];break;case o.OP_SWITCH_JMP.code:l=s.ConditionalJump,c=d.args.slice(1).map(e=>e.value);break;case o.OP_CALL.code:case o.OP_VA_CALL.code:l=s.Call,c=[d.args[0].value];break;case o.OP_SWITCH_CALL.code:l=s.Call,c=d.args.slice(1).map(e=>e.value);break;default:if(_===i-1){l=s.None,c=[];break}continue}const u=new n(t,r,_+1,l,c);for(let t=u.start;t<u.end;t++)e.instructions_to_block.set(u.segment.instructions[t],u);if(e.blocks.push(u),a){for(const i of t.labels)e.labels_to_block.set(i,u);a=!1}r=_+1}}static link_blocks(e){const t=[];for(let i=0;i<e.blocks.length;i++){const o=e.blocks[i],n=e.blocks[i+1];switch(o.branch_type){case s.Return:continue;case s.Call:n&&t.push([o,n]);break;case s.None:case s.ConditionalJump:n&&o.link_to(n)}for(const t of o.branch_labels){const i=e.labels_to_block.get(t);i&&o.link_to(i)}}for(const[i,o]of t)a(e.labels_to_block,o,i)}}function a(e,t,i){for(const o of i.branch_labels){const i=e.get(o);i&&(i.branch_type===s.Return?i.link_to(t):_(new Set,t,i))}}function _(e,t,i){if(!e.has(i)){e.add(i);for(const o of i.to)o.branch_type===s.Return?o.link_to(t):_(e,t,o)}}t.ControlFlowGraph=r},AUhH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LoadingCache=class{constructor(){this.map=new Map}set(e,t){this.map.set(e,t)}get_or_set(e,t){let i=this.map.get(e);return void 0===i&&(i=t(),this.map.set(e,i)),i}}},B2O0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("weRg"),s=i("sZ1+"),n=i("c5EP"),r=i("xs7i");class a extends o.EntityListView{constructor(){super("quest_editor_NpcListView"),this.filter_npcs=()=>{const e=n.quest_editor_store.current_quest.val,t=n.quest_editor_store.current_area.val,i=e?e.episode:r.Episode.I,o=t?t.id:0;this.entities.val=s.NPC_TYPES.filter(e=>{const t=s.npc_data(e);return(null==t.episode||t.episode===i)&&t.area_ids.includes(o)})},this.disposables(n.quest_editor_store.current_quest.observe(this.filter_npcs),n.quest_editor_store.current_area.observe(this.filter_npcs)),this.filter_npcs(),this.finalize_construction(a.prototype)}}t.NpcListView=a},CUby:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("ZPAt"),r=i("4s8/"),a=s.default.get("quest_editor/scripting/data_flow_analysis/register_value");t.MIN_REGISTER_VALUE=n.MIN_SIGNED_DWORD_VALUE,t.MAX_REGISTER_VALUE=n.MAX_SIGNED_DWORD_VALUE,t.REGISTER_VALUES=Math.pow(2,32),t.register_value=function(e,i,o){const s=e.get_block_for_instruction(i);return s?function e(i,o,s,_,d){if(++i.iterations>100)return a.warn("Too many iterations."),(new r.ValueSet).set_interval(t.MIN_REGISTER_VALUE,t.MAX_REGISTER_VALUE);for(let a=_-1;a>=s.start;a--){const _=s.segment.instructions[a],l=_.args;switch(_.opcode.code){case n.OP_LET.code:if(l[0].value===d)return e(i,new Set(o),s,a,l[1].value);break;case n.OP_LETI.code:case n.OP_LETB.code:case n.OP_LETW.code:case n.OP_SYNC_LETI.code:if(l[0].value===d)return(new r.ValueSet).set_value(l[1].value);break;case n.OP_SET.code:if(l[0].value===d)return(new r.ValueSet).set_value(1);break;case n.OP_CLEAR.code:if(l[0].value===d)return(new r.ValueSet).set_value(0);break;case n.OP_REV.code:if(l[0].value===d){const t=e(i,new Set(o),s,a,d),n=t.size();return 0===n||1===n&&0===t.get(0)?(new r.ValueSet).set_value(1):t.has(0)?(new r.ValueSet).set_interval(0,1):(new r.ValueSet).set_value(0)}break;case n.OP_ADDI.code:if(l[0].value===d){return e(i,new Set(o),s,a,d).scalar_add(l[1].value)}break;case n.OP_SUBI.code:if(l[0].value===d){return e(i,new Set(o),s,a,d).scalar_sub(l[1].value)}break;case n.OP_MULI.code:if(l[0].value===d){return e(i,new Set(o),s,a,d).scalar_mul(l[1].value)}break;case n.OP_DIVI.code:if(l[0].value===d){return e(i,new Set(o),s,a,d).scalar_div(l[1].value)}break;case n.OP_IF_ZONE_CLEAR.code:if(l[0].value===d)return(new r.ValueSet).set_interval(0,1);break;case n.OP_GET_DIFFLVL.code:if(l[0].value===d)return(new r.ValueSet).set_interval(0,2);break;case n.OP_GET_SLOTNUMBER.code:if(l[0].value===d)return(new r.ValueSet).set_interval(0,3);break;case n.OP_GET_RANDOM.code:if(l[1].value===d){const t=e(i,new Set(o),s,a,l[0].value).min()||0,n=Math.max(e(i,new Set(o),s,a,l[0].value+1).max()||0,t+1);return(new r.ValueSet).set_interval(t,n-1)}break;case n.OP_STACK_PUSHM.code:case n.OP_STACK_POPM.code:{const e=l[0].value,i=l[0].value+l[1].value;if(e<=d&&d<i)return(new r.ValueSet).set_interval(t.MIN_REGISTER_VALUE,t.MAX_REGISTER_VALUE)}break;default:{const e=_.opcode.params,i=Math.min(l.length,e.length);for(let o=0;o<i;o++){const i=e[o];if(i.type.kind==n.Kind.RegTupRef){const e=l[o].value;let s=0;for(const o of i.type.register_tuples){if((o.access===n.ParamAccess.Write||o.access===n.ParamAccess.ReadWrite)&&e+s===d)return(new r.ValueSet).set_interval(t.MIN_REGISTER_VALUE,t.MAX_REGISTER_VALUE);s++}}}}}}const l=new r.ValueSet;o.add(s);for(const n of s.from){if(o.has(n)){l.set_interval(t.MIN_REGISTER_VALUE,t.MAX_REGISTER_VALUE);break}l.union(e(i,new Set(o),n,n.end,d))}return l}(new _,new Set,s,s.index_of_instruction(i),o):new r.ValueSet};class _{constructor(){this.iterations=0}}},CpvQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("0Xme"),s=i("ExVU");i("vlF3");class n extends o.Input{constructor(e=s.Duration.fromMillis(0),t){super(e,"core_DurationInput","text","core_DurationInput_inner",t),this.preferred_label_position="left",this.input_element.pattern="(60|[0-5][0-9]):(60|[0-5][0-9])",this.set_value(e),this.finalize_construction(n.prototype)}get_value(){const e=this.input_element.value;if(this.input_element.validity.valid)return s.Duration.fromObject({hours:parseInt(e.slice(0,2),10),minutes:parseInt(e.slice(3),10)});{const t=e.indexOf(":");return-1===t?s.Duration.fromObject({minutes:parseInt(e,10)}):s.Duration.fromObject({hours:parseInt(e.slice(0,t),10),minutes:parseInt(e.slice(t+1),10)})}}set_value(e){this.input_element.value=e.toFormat("hh:mm")}}t.DurationInput=n},DUCy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("wsa1"),r=i("S6Bx"),a=i("KS+z"),_=i("ueWm");i("/NSH");const d=i("oxtq"),l=i("c5EP");n.editor.defineTheme("phantasmal-world",{base:"vs-dark",inherit:!0,rules:[{token:"",foreground:"e0e0e0",background:"#181818"},{token:"tag",foreground:"99bbff"},{token:"keyword",foreground:"d0a0ff",fontStyle:"bold"},{token:"predefined",foreground:"bbffbb"},{token:"number",foreground:"ffffaa"},{token:"number.hex",foreground:"ffffaa"},{token:"string",foreground:"88ffff"},{token:"string.escape",foreground:"8888ff"}],colors:{"editor.background":"#181818","editor.lineHighlightBackground":"#202020"}});const c=n.editor.createModel("","psoasm");class u extends o.ResizableWidget{constructor(){super(),this.tool_bar_view=this.disposable(new a.AsmEditorToolBar),this.breakpoint_decoration_ids=[],this.element=s.el.div(),this.element.append(this.tool_bar_view.element),this.editor=this.disposable(n.editor.create(this.element,{theme:"phantasmal-world",scrollBeyondLastLine:!1,autoIndent:!0,fontSize:13,wordBasedSuggestions:!1,wordWrap:"on",wrappingIndent:"indent",renderIndentGuides:!1,folding:!1,glyphMargin:!0})),this.history=this.disposable(new _.EditorHistory(this.editor)),this.editor.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_Z,()=>{}),this.editor.addCommand(n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.KEY_Z,()=>{});const e=this.editor.getAction("editor.action.quickCommand");this.disposables(this.editor.addAction({id:"editor.action.quickCommand",label:"Command Palette",keybindings:[n.KeyMod.CtrlCmd|n.KeyMod.Shift|n.KeyCode.KEY_P],run:()=>e.run()})),this.disposables(r.asm_editor_store.did_undo.observe(({value:e})=>{this.editor.trigger(e,"undo",void 0)}),r.asm_editor_store.did_redo.observe(({value:e})=>{this.editor.trigger(e,"redo",void 0)}),r.asm_editor_store.model.observe(({value:e})=>{this.editor.updateOptions({readOnly:null==e&&!l.quest_editor_store.quest_runner.running.val}),this.editor.setModel(e||c),this.history.reset(),this.breakpoint_decoration_ids=[],this.execloc_decoration_id="",r.asm_editor_store.clear_breakpoints()},{call_now:!0}),l.quest_editor_store.quest_runner.running.observe(({value:e})=>this.editor.updateOptions({readOnly:e})),r.asm_editor_store.breakpoints.observe_list(e=>{var t;if(e.type===d.ListChangeType.ListChange){for(const t of e.removed){const e=this.editor.getLineDecorations(t);if(e)for(const t of e){const e=this.breakpoint_decoration_ids.indexOf(t.id);if(e>-1){this.editor.deltaDecorations([t.id],[]),this.breakpoint_decoration_ids.splice(e,1);break}}}for(const i of e.inserted){(null===(t=this.editor.getLineDecorations(i))||void 0===t?void 0:t.some(e=>this.breakpoint_decoration_ids.includes(e.id)))||this.breakpoint_decoration_ids.push(this.editor.deltaDecorations([],[{range:new n.Range(i,0,i,0),options:{glyphMarginClassName:"quest_editor_AsmEditorView_breakpoint-enabled",glyphMarginHoverMessage:{value:"Breakpoint"}}}])[0])}}}),r.asm_editor_store.execution_location.observe(e=>{const t=e.old_value,i=e.value;if(void 0!==t&&void 0!==this.execloc_decoration_id){this.editor.getLineDecorations(t)&&this.editor.deltaDecorations([this.execloc_decoration_id],[])}void 0!==i&&(this.execloc_decoration_id=this.editor.deltaDecorations([],[{range:new n.Range(i,0,i,0),options:{className:"quest_editor_AsmEditorView_execution-location",isWholeLine:!0}}])[0])}),this.editor.onDidFocusEditorWidget(()=>r.asm_editor_store.undo.make_current()),this.editor.onMouseDown(e=>{switch(e.target.type){case n.editor.MouseTargetType.GUTTER_GLYPH_MARGIN:{const t=e.target.position;if(!t)return;r.asm_editor_store.toggle_breakpoint(t.lineNumber)}}})),this.finalize_construction(u.prototype)}focus(){this.editor.focus()}resize(e,t){const i=Math.max(0,t-this.tool_bar_view.height);return this.editor.layout({width:e,height:i}),this}}t.AsmEditorView=u},DixV:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("bcBH"),r=i("AU7j"),a=i("CUby"),_=i("JQxC"),d=i("lg9k"),l=i("ZPAt"),c=i("NRxM"),u=i("/Wax"),p=i("tjEv"),h=s.default.get("core/data_formats/parsing/quest/bin"),v=[];v[d.SegmentType.Instructions]=2,v[d.SegmentType.String]=1,v[d.SegmentType.Data]=0,t.parse_bin=function(e,t=[0],i=!1){const o=e.u32(),s=e.u32(),n=e.u32();e.seek(4);const _=e.u32(),c=e.u32(),u=e.string_utf16(64,!0,!0),p=e.string_utf16(256,!0,!0),v=e.string_utf16(576,!0,!0);n!==e.size&&h.warn(`Value ${n} in bin size field does not match actual size ${e.size}.`),e.seek(4);const E=e.u32_array(932),P=Math.floor((e.size-s)/4);e.seek_start(s);const w=e.i32_array(P),b=new f(w);return{quest_id:_,language:c,quest_name:u,short_description:p,long_description:v,object_code:function(e,t,i,o){const s=new Map;!function(e,t,i,o,s){let n;do{n=o.size;for(const[n,r]of i)m(o,t,e,n,r,s);const _=[...o.entries()].filter(([,e])=>e.type===d.SegmentType.Instructions).sort(([e],[t])=>e-t).map(([,e])=>e),c=r.ControlFlowGraph.create(_);i=new Map;for(const e of _)for(const t of e.instructions)for(let e=0;e<t.opcode.params.length;e++){const o=t.opcode.params[e];switch(o.type.kind){case l.Kind.ILabel:O(c,i,t,e,d.SegmentType.Instructions);break;case l.Kind.ILabelVar:for(;e<t.args.length;e++)i.set(t.args[e].value,d.SegmentType.Instructions);break;case l.Kind.DLabel:O(c,i,t,e,d.SegmentType.Data);break;case l.Kind.SLabel:O(c,i,t,e,d.SegmentType.String);break;case l.Kind.RegTupRef:{const s=t.args[e];for(let e=0;e<o.type.register_tuples.length;e++){if(o.type.register_tuples[e].type.kind===l.Kind.ILabel){const o=a.register_value(c,t,s.value+e);if(o.size()<=10)for(const e of o)i.set(e,d.SegmentType.Instructions)}}}}}}while(o.size>n)}(e,t,i.reduce((e,t)=>e.set(t,d.SegmentType.Instructions),new Map),s,o);const n=[];let _=0;for(;_<e.size;){let i=s.get(_);if(!i){const o=t.get_labels(_);let n;if(o){const i=t.get_info(o[0]);n=i.next?i.next.offset:e.size}else{n=e.size;for(const e of t.labels)if(e.offset>_){n=e.offset;break}}if(e.seek_start(_),g(s,e,n,o||[]),i=s.get(_),n<=_){h.error(`Next offset ${n} was smaller than or equal to current offset ${_}.`);break}if(!i){h.error(`Couldn't create segment for offset ${_}.`);continue}}switch(n.push(i),i.type){case d.SegmentType.Instructions:for(const e of i.instructions)_+=e.size;break;case d.SegmentType.Data:_+=i.data.byteLength;break;case d.SegmentType.String:_+=4*Math.ceil((i.value.length+1)/2);break;default:throw new Error(`${d.SegmentType[i.type]} not implemented.`)}}for(const{label:e,offset:i}of t.labels){const t=s.get(i);t?t.labels.includes(e)||(t.labels.push(e),t.labels.sort((e,t)=>e-t)):h.warn(`Label ${e} with offset ${i} does not point to anything.`)}if(e.size!==_){const t=`Expected to parse ${e.size} bytes but parsed ${_} instead.`;if(!o)throw new Error(t);h.error(t)}return n}(e.seek_start(o).take(s-o),b,t,i),shop_items:E}},t.write_bin=function(e){const t=new p.ResizableBuffer(4652+100*e.object_code.length),i=new u.ResizableBufferCursor(t,n.Endianness.Little);if(i.write_u32(4652),i.write_u32(0),i.write_u32(0),i.write_u32(4294967295),i.write_u32(e.quest_id),i.write_u32(e.language),i.write_string_utf16(e.quest_name,64),i.write_string_utf16(e.short_description,256),i.write_string_utf16(e.long_description,576),i.write_u32(0),e.shop_items.length>932)throw new Error(`shop_items can't be larger than 932, was ${e.shop_items.length}.`);i.write_u32_array(e.shop_items);for(let t=e.shop_items.length;t<932;t++)i.write_u32(0);for(;i.position<4652;)i.write_u8(0);const{size:o,label_offsets:s}=function(e,t){const i=e.position,o=[];for(const s of t){for(const t of s.labels)o[t]=e.position-i;if(s.type===d.SegmentType.Instructions)for(const t of s.instructions){const i=t.opcode;if(2===i.size&&e.write_u8(i.code>>>8),e.write_u8(255&i.code),i.stack!==l.StackInteraction.Pop)for(let o=0;o<i.params.length;o++){const s=i.params[o],n=t.param_to_args[o],[r]=n;switch(s.type.kind){case l.Kind.Byte:r.value>=0?e.write_u8(r.value):e.write_i8(r.value);break;case l.Kind.Word:r.value>=0?e.write_u16(r.value):e.write_i16(r.value);break;case l.Kind.DWord:r.value>=0?e.write_u32(r.value):e.write_i32(r.value);break;case l.Kind.Float:e.write_f32(r.value);break;case l.Kind.Label:case l.Kind.ILabel:case l.Kind.DLabel:case l.Kind.SLabel:e.write_u16(r.value);break;case l.Kind.String:e.write_string_utf16(r.value,r.size);break;case l.Kind.ILabelVar:e.write_u8(n.length),e.write_u16_array(n.map(e=>e.value));break;case l.Kind.RegRef:case l.Kind.RegTupRef:e.write_u8(r.value);break;case l.Kind.RegRefVar:e.write_u8(n.length),e.write_u8_array(n.map(e=>e.value));break;default:throw new Error(`Parameter type ${l.Kind[s.type.kind]} not implemented.`)}}}else if(s.type===d.SegmentType.String){const t=4*Math.ceil((s.value.length+1)/2);e.write_string_utf16(s.value,t)}else e.write_cursor(new c.ArrayBufferCursor(s.data,e.endianness))}return{size:e.position-i,label_offsets:o}}(i,e.object_code);for(let e=0;e<s.length;e++){const t=s[e];null==t?i.write_i32(-1):i.write_i32(t)}const r=i.position;return i.seek_start(4),i.write_u32(4652+o),i.write_u32(r),i.seek_start(0).array_buffer(r)};class f{constructor(e){this.labels=[],this.label_map=new Map,this.offset_map=new Map;for(let t=0;t<e.length;t++){const i=e[t];-1!==i&&this.labels.push({label:t,offset:i})}this.labels.sort((e,t)=>e.offset-t.offset||e.label-t.label);for(let e=0;e<this.labels.length;e++){const{label:t,offset:i}=this.labels[e];this.label_map.set(t,{offset:i,index:e});const o=this.offset_map.get(i)||[];o.push(t),this.offset_map.set(i,o)}}get_labels(e){return this.offset_map.get(e)}get_info(e){const t=this.label_map.get(e);if(null==t)return;let i;for(let e=t.index+1;e<this.labels.length&&!((i=this.labels[e]).offset>t.offset);e++)i=void 0;return{offset:t.offset,next:i}}}function O(e,t,i,o,s){if(i.opcode.stack===l.StackInteraction.Pop){const n=_.stack_value(e,i,i.opcode.params.length-o-1);if(n.size()<=10)for(const e of n){const i=t.get(e);(null==i||v[s]>v[i])&&t.set(e,s)}}else{const e=i.args[o].value,n=t.get(e);(null==n||v[s]>v[n])&&t.set(e,s)}}function m(e,t,i,o,s,n){try{const r=t.get_info(o);if(null==r)return void h.warn(`Label ${o} is not registered in the label table.`);const a=e.get(r.offset);let _;if(a){if(a.labels.includes(o)||(a.labels.push(o),a.labels.sort((e,t)=>e-t)),!(v[s]>v[a.type]))return;_=a.labels}else _=[o];const c=r.next?r.next.offset:i.size;switch(i.seek_start(r.offset),s){case d.SegmentType.Instructions:!function(e,t,i,o,s,n,r){const a=[],_={type:d.SegmentType.Instructions,labels:s,instructions:a,asm:{labels:[]}};e.set(i.position,_);for(;i.position<o;){const e=i.u8();let t;switch(e){case 248:case 249:t=e<<8|i.u8();break;default:t=e}const o=l.OPCODES[t];try{const e=E(i,o);a.push(d.new_instruction(o,e))}catch(e){if(!r)throw e;h.error(`Exception occurred while parsing arguments for instruction ${o.mnemonic}.`,e),a.push(d.new_instruction(o,[]))}}if(null!=n){let o=!0;for(let e=a.length-1;e>=0;e--){const t=a[e].opcode;if(t.code===l.OP_RET.code||t.code===l.OP_JMP.code){o=!1;break}}o&&m(e,t,i,n,d.SegmentType.Instructions,r)}}(e,t,i,c,_,r.next&&r.next.label,n);break;case d.SegmentType.Data:g(e,i,c,_);break;case d.SegmentType.String:!function(e,t,i,o){const s=t.position,n={type:d.SegmentType.String,labels:o,value:t.string_utf16(i-s,!0,!0),asm:{labels:[]}};e.set(s,n)}(e,i,c,_);break;default:throw new Error(`Segment type ${d.SegmentType[s]} not implemented.`)}}catch(e){if(!n)throw e;h.error("Couldn't fully parse object code segment.",e)}}function g(e,t,i,o){const s=t.position,n={type:d.SegmentType.Data,labels:o,data:t.array_buffer(i-s),asm:{labels:[]}};e.set(s,n)}function E(e,t){const i=[];if(t.stack!==l.StackInteraction.Pop)for(const o of t.params)switch(o.type.kind){case l.Kind.Byte:i.push(d.new_arg(e.u8(),1));break;case l.Kind.Word:i.push(d.new_arg(e.u16(),2));break;case l.Kind.DWord:i.push(d.new_arg(e.i32(),4));break;case l.Kind.Float:i.push(d.new_arg(e.f32(),4));break;case l.Kind.Label:case l.Kind.ILabel:case l.Kind.DLabel:case l.Kind.SLabel:i.push(d.new_arg(e.u16(),2));break;case l.Kind.String:{const t=e.position;i.push(d.new_arg(e.string_utf16(Math.min(4096,e.bytes_left),!0,!1),e.position-t))}break;case l.Kind.ILabelVar:{const t=e.u8();i.push(...e.u16_array(t).map(e=>d.new_arg(e,2)))}break;case l.Kind.RegRef:case l.Kind.RegTupRef:i.push(d.new_arg(e.u8(),1));break;case l.Kind.RegRefVar:{const t=e.u8();i.push(...e.u8_array(t).map(e=>d.new_arg(e,1)))}break;default:throw new Error(`Parameter type ${l.Kind[o.type.kind]} not implemented.`)}return i}},DuVK:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("LvDl"),r=i("bcBH"),a=i("/Wax"),_=i("tjEv"),d=s.default.get("core/data_formats/parsing/quest/dat"),l=68,c=72;var u;function p(e,t,i){const o=Math.floor(e.size/l);for(let s=0;s<o;++s){const o=e.u16(),s=e.u8_array(6),n=e.u16(),r=e.u16(),a=e.u16(),_=e.u8_array(2),d=e.vec3_f32(),l={x:e.i32()/65535*2*Math.PI,y:e.i32()/65535*2*Math.PI,z:e.i32()/65535*2*Math.PI},c=[e.f32(),e.f32(),e.f32(),e.u32(),e.u32(),e.u32(),e.u32()];i.push({type_id:o,id:n,group_id:r,section_id:a,position:d,rotation:l,properties:c,area_id:t,unknown:[s,_]})}}function h(e,t,i){const o=Math.floor(e.size/c);for(let s=0;s<o;++s){const o=e.u16(),s=e.u8_array(10),n=e.u16(),r=e.u8_array(6),a=e.vec3_f32(),_=e.i32()/65535*2*Math.PI,d=e.i32()/65535*2*Math.PI,l=e.i32()/65535*2*Math.PI,c=e.vec3_f32(),u=e.f32(),p=e.f32(),h=e.u32(),v=e.u8_array(4);i.push({type_id:o,section_id:n,position:a,rotation:{x:_,y:d,z:l},scale:c,npc_id:u,script_label:p,roaming:h,area_id:t,unknown:[s,r,v]})}}function v(e,t,i){const o=e.u32();e.seek(4);const s=e.u32();if(e.seek(3),50===e.u8())throw new Error("Can't parse challenge mode quests yet.");e.seek_start(o);const n=e.take(e.bytes_left);e.seek_start(16);for(let o=0;o<s;++o){const o=e.u32();e.seek(4);const s=e.u16(),r=e.u16(),a=e.u16(),_=e.u16(),d=e.u32();n.seek_start(d);const l=f(n);i.push({id:o,section_id:s,wave:r,delay:a,actions:l,area_id:t,unknown:_})}e.position!==o&&d.warn(`Read ${e.position-16} bytes of wave data instead of expected ${o-16}.`);let r=255;for(;n.bytes_left&&255===(r=n.u8()););255!==r&&n.seek(-1),e.seek_start(o+n.position)}function f(e){const t=[];e:for(;e.bytes_left;){const i=e.u8();switch(i){case 1:break e;case u.SpawnNpcs:t.push({type:u.SpawnNpcs,section_id:e.u16(),appear_flag:e.u16()});break;case u.Unlock:t.push({type:u.Unlock,door_id:e.u16()});break;case u.Lock:t.push({type:u.Lock,door_id:e.u16()});break;case u.TriggerEvent:t.push({type:u.TriggerEvent,event_id:e.u32()});break;default:d.warn(`Unexpected wave action type ${i}.`);break e}}return t}!function(e){e[e.SpawnNpcs=8]="SpawnNpcs",e[e.Unlock=10]="Unlock",e[e.Lock=11]="Lock",e[e.TriggerEvent=12]="TriggerEvent"}(u=t.DatEventActionType||(t.DatEventActionType={})),t.parse_dat=function(e){const t=[],i=[],o=[],s=[];for(;e.bytes_left;){const n=e.u32(),r=e.u32(),a=e.u32(),_=e.u32();if(0===n)break;{if(_!==r-16)throw Error(`Malformed DAT file. Expected an entities size of ${r-16}, got ${_}.`);const l=e.take(_);1===n?p(l,a,t):2===n?h(l,a,i):3===n?v(l,a,o):s.push({entity_type:n,total_size:r,area_id:a,entities_size:_,data:e.u8_array(_)}),l.bytes_left&&d.warn(`Read ${l.position} bytes instead of expected ${l.size} for entity type ${n}.`)}}return{objs:t,npcs:i,waves:o,unknowns:s}},t.write_dat=function({objs:e,npcs:t,waves:i,unknowns:o}){const s=new _.ResizableBuffer(e.length*(16+l)+t.length*(16+c)+o.reduce((e,t)=>e+t.total_size,0)),d=new a.ResizableBufferCursor(s,r.Endianness.Little);!function(e,t){const i=n.groupBy(t,e=>e.area_id),o=Object.keys(i).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(const t of o){const o=i[t],s=o.length*l;e.write_u32(1),e.write_u32(s+16),e.write_u32(t),e.write_u32(s);for(const t of o){if(2!==t.unknown.length)throw new Error(`unknown should be of length 2, was ${t.unknown.length}`);if(e.write_u16(t.type_id),6!==t.unknown[0].length)throw new Error(`unknown[0] should be of length 6, was ${t.unknown[0].length}`);if(e.write_u8_array(t.unknown[0]),e.write_u16(t.id),e.write_u16(t.group_id),e.write_u16(t.section_id),2!==t.unknown[1].length)throw new Error(`unknown[1] should be of length 2, was ${t.unknown[1].length}`);if(e.write_u8_array(t.unknown[1]),e.write_vec3_f32(t.position),e.write_i32(Math.round(t.rotation.x/(2*Math.PI)*65535)),e.write_i32(Math.round(t.rotation.y/(2*Math.PI)*65535)),e.write_i32(Math.round(t.rotation.z/(2*Math.PI)*65535)),7!==t.properties.length)throw new Error(`properties should be of length 7, was ${t.properties.length}`);e.write_f32(t.properties[0]),e.write_f32(t.properties[1]),e.write_f32(t.properties[2]),e.write_u32(t.properties[3]),e.write_u32(t.properties[4]),e.write_u32(t.properties[5]),e.write_u32(t.properties[6])}}}(d,e),function(e,t){const i=n.groupBy(t,e=>e.area_id),o=Object.keys(i).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(const t of o){const o=i[t],s=o.length*c;e.write_u32(2),e.write_u32(s+16),e.write_u32(t),e.write_u32(s);for(const t of o){if(3!==t.unknown.length)throw new Error(`unknown should be of length 3, was ${t.unknown.length}`);if(e.write_u16(t.type_id),10!==t.unknown[0].length)throw new Error(`unknown[0] should be of length 10, was ${t.unknown[0].length}`);if(e.write_u8_array(t.unknown[0]),e.write_u16(t.section_id),6!==t.unknown[1].length)throw new Error(`unknown[1] should be of length 6, was ${t.unknown[1].length}`);if(e.write_u8_array(t.unknown[1]),e.write_vec3_f32(t.position),e.write_i32(Math.round(t.rotation.x/(2*Math.PI)*65535)),e.write_i32(Math.round(t.rotation.y/(2*Math.PI)*65535)),e.write_i32(Math.round(t.rotation.z/(2*Math.PI)*65535)),e.write_vec3_f32(t.scale),e.write_f32(t.npc_id),e.write_f32(t.script_label),e.write_u32(t.roaming),4!==t.unknown[2].length)throw new Error(`unknown[2] should be of length 4, was ${t.unknown[2].length}`);e.write_u8_array(t.unknown[2])}}}(d,t),function(e,t){const i=n.groupBy(t,e=>e.area_id),o=Object.keys(i).map(e=>parseInt(e,10)).sort((e,t)=>e-t);for(const t of o){const o=i[t];e.write_u32(3);const s=e.position;e.write_u32(0),e.write_u32(t);const n=e.position;e.write_u32(0);const r=e.position,a=r+16+20*o.length;e.size=Math.max(a,e.size),e.write_u32(a-r),e.write_u32(16),e.write_u32(o.length),e.write_u32(0);let _=0;for(const t of o){e.write_u32(t.id),e.write_u32(65536),e.write_u16(t.section_id),e.write_u16(t.wave),e.write_u16(t.delay),e.write_u16(t.unknown),e.write_u32(_);const i=e.position;e.seek_start(a+_);for(const i of t.actions)switch(e.write_u8(i.type),i.type){case u.SpawnNpcs:e.write_u16(i.section_id),e.write_u16(i.appear_flag);break;case u.Unlock:case u.Lock:e.write_u16(i.door_id);break;case u.TriggerEvent:e.write_u32(i.event_id);break;default:throw new Error(`Unknown wave action type ${i.type}.`)}e.write_u8(1),_=e.position-a,e.seek_start(i)}for(e.seek_start(a+_);(e.position-a)%4!=0;)e.write_u8(255);const d=e.position;e.seek_start(s),e.write_u32(d-r+16),e.seek_start(n),e.write_u32(d-r),e.seek_start(d)}}(d,i);for(const e of o)d.write_u32(e.entity_type),d.write_u32(e.total_size),d.write_u32(e.area_id),d.write_u32(e.entities_size),d.write_u8_array(e.data);return d.write_u32(0),d.write_u32(0),d.write_u32(0),d.write_u32(0),s}},"E/0a":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("0Xme");class s extends o.Input{constructor(e="",t){if(super(e,"core_TextInput","text","core_TextInput_inner",t),this.preferred_label_position="left",t){const{max_length:e}=t;this.set_attr("maxLength",e)}this.set_value(e),this.finalize_construction(s.prototype)}get_value(){return this.input_element.value}set_value(e){this.input_element.value=e}}t.TextInput=s},ETgL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("sDu+"),s=i("FXpb");i("C5oP");const n=i("4VsB");class r extends o.LabelledControl{constructor(e="",t){super(t),this.element=s.el.div({class:"core_TextArea"}),this.preferred_label_position="left",this.text_element=s.el.textarea({class:"core_TextArea_inner"}),this._value=new n.WidgetProperty(this,"",this.set_value),t&&(null!=t.max_length&&(this.text_element.maxLength=t.max_length),null!=t.font_family&&(this.text_element.style.fontFamily=t.font_family),null!=t.rows&&(this.text_element.rows=t.rows),null!=t.cols&&(this.text_element.cols=t.cols)),this.value=this._value,this.set_value(e),this.text_element.onchange=()=>this._value.set_val(this.text_element.value,{silent:!1}),this.element.append(this.text_element),this.finalize_construction(r.prototype)}set_value(e){this.text_element.value=e}}t.TextArea=r},Eqai:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=new o.MeshLambertMaterial({color:65280,side:o.DoubleSide}),n=new o.MeshLambertMaterial({color:16711935,side:o.DoubleSide}),r=new o.MeshLambertMaterial({skinning:!0,color:16711935,side:o.DoubleSide});function a(e,t,i,n){const{created_by_geometry_builder:r,normalized_material_indices:a,bones:_}=e.userData;let d;if(Array.isArray(t))if(r){d=[s];for(const[e,o]of a.entries())o>0&&(d[o]=t[e]||i)}else d=t;else d=t||i;const l=new n(e,d);return r&&_.length&&l instanceof o.SkinnedMesh&&(l.add(_[0]),l.bind(new o.Skeleton(_))),l}t.create_mesh=function(e,t,i=n){return a(e,t,i,o.Mesh)},t.create_skinned_mesh=function(e,t,i=r){return a(e,t,i,o.SkinnedMesh)}},F0Xh:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("nN8q");i("bknw");class n extends s.ResizableWidget{constructor(){super(),this.element=o.el.div({class:"hunt_optimizer_HelpView"},o.el.p({text:"Add some items with the combo box on the left to see the optimal combination of hunt methods on the right."}),o.el.p({text:'At the moment a hunt method is simply a quest run-through. Partial quest run-throughs are coming. View the list of methods on the "Methods" tab. Each method takes a certain amount of time, which affects the optimization result. Make sure the times are correct for you.'}),o.el.p({text:"Only enemy drops are considered. Box drops are coming."}),o.el.p({text:"The optimal result is calculated using linear optimization. The optimizer takes into account rare enemies and the fact that pan arms can be split in two."})),this.finalize_construction(n.prototype)}}t.HelpView=n},FNQV:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("If1w");i("l8iQ");const r=i("WJtm");class a extends o.ResizableWidget{constructor(){super(),this.element=s.el.div({class:"hunt_optimizer_OptimizerView"}),this.element.append(this.disposable(new n.WantedItemsView).element,this.disposable(new r.OptimizationResultView).element),this.finalize_construction(a.prototype)}}t.OptimizerView=a},FXpb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("jJhE"),s=i("nsCy"),n=i("oxtq"),r=i("Tpfs");function a(e,t,...i){const o=document.createElement(e);if(t)if(t instanceof HTMLElement)o.append(t);else{if(null!=t.class&&(o.className=t.class),null!=t.text&&(o.textContent=t.text),null!=t.title&&(o.title=t.title),null!=t.href&&(o.href=t.href),null!=t.src&&(o.src=t.src),null!=t.width&&(o.width=t.width),null!=t.height&&(o.height=t.height),null!=t.alt&&(o.alt=t.alt),t.data)for(const[e,i]of Object.entries(t.data))o.dataset[e]=i;null!=t.col_span&&(o.colSpan=t.col_span),null!=t.tab_index&&(o.tabIndex=t.tab_index)}return o.append(...i),o}var _;t.el={div:(e,...t)=>a("div",e,...t),span:(e,...t)=>a("span",e,...t),h2:(e,...t)=>a("h2",e,...t),p:(e,...t)=>a("p",e,...t),a:(e,...t)=>{const i=a("a",e,...t);return e&&e.href&&e.href.trimLeft().startsWith("http")&&(i.target="_blank",i.rel="noopener noreferrer"),i},img:(e,...t)=>a("img",e,...t),table:(e,...t)=>a("table",e,...t),thead:(e,...t)=>a("thead",e,...t),tbody:(e,...t)=>a("tbody",e,...t),tfoot:(e,...t)=>a("tfoot",e,...t),tr:(e,...t)=>a("tr",e,...t),th:(e,...t)=>a("th",e,...t),td:(e,...t)=>a("td",e,...t),button:(e,...t)=>a("button",e,...t),textarea:(e,...t)=>a("textarea",e,...t)},t.create_element=a,t.bind_hidden=function(e,t){return o.is_property(t)&&(e.hidden=t.val),t.observe(({value:t})=>e.hidden=t)},function(e){e[e.ArrowDown=0]="ArrowDown",e[e.File=1]="File",e[e.GitHub=2]="GitHub",e[e.NewFile=3]="NewFile",e[e.Play=4]="Play",e[e.Plus=5]="Plus",e[e.Redo=6]="Redo",e[e.Remove=7]="Remove",e[e.Save=8]="Save",e[e.TriangleDown=9]="TriangleDown",e[e.TriangleUp=10]="TriangleUp",e[e.Undo=11]="Undo",e[e.SquareArrowRight=12]="SquareArrowRight",e[e.LevelDown=13]="LevelDown",e[e.LevelUp=14]="LevelUp",e[e.LongArrowRight=15]="LongArrowRight",e[e.Stop=16]="Stop"}(_=t.Icon||(t.Icon={})),t.icon=function(e){let i;switch(e){case _.ArrowDown:i="fas fa-arrow-down";break;case _.File:i="fas fa-file";break;case _.GitHub:i="fab fa-github";break;case _.NewFile:i="fas fa-file-medical";break;case _.Play:i="fas fa-play";break;case _.Plus:i="fas fa-plus";break;case _.Redo:i="fas fa-redo";break;case _.Remove:i="fas fa-trash-alt";break;case _.Save:i="fas fa-save";break;case _.TriangleDown:i="fas fa-caret-down";break;case _.TriangleUp:i="fas fa-caret-up";break;case _.Undo:i="fas fa-undo";break;case _.SquareArrowRight:i="far fa-caret-square-right";break;case _.LongArrowRight:i="fas fa-long-arrow-alt-right";break;case _.LevelDown:i="fas fa-level-down-alt";break;case _.LevelUp:i="fas fa-level-up-alt";break;case _.Stop:i="fas fa-stop"}return t.el.span({class:i})},t.section_id_icon=function(e,i){const o=t.el.span(),n=i&&i.size;return o.style.display="inline-block",o.style.width=`${n}px`,o.style.height=`${n}px`,o.style.backgroundImage=`url(/assets/images/sectionids/${s.SectionId[e]}.png)`,o.style.backgroundSize=`${n}px`,o.title=s.SectionId[e],o},t.disposable_listener=function(e,t,i,o){return e.addEventListener(t,i,o),{dispose(){e.removeEventListener(t,i)}}},t.bind_children_to=function(e,t,i){const o=new r.Disposer,s=t.observe_list(e=>{e.type===n.ListChangeType.ListChange?a(e.index,e.removed.length,e.inserted):(e.type,n.ListChangeType.ValueChange)});function a(t,s,n){for(let i=0;i<s;i++)e.children[t].remove();o.dispose_at(t,s);const r=n.map((e,s)=>{const n=i(e,t+s);return Array.isArray(n)?(o.insert(t+s,n[1]),n[0]):n});if(t>=e.childElementCount)e.append(...r);else for(let i=0;i<s;i++)e.children[t+i].insertAdjacentElement("beforebegin",r[i])}return a(0,0,t.val),{dispose(){s.dispose(),o.dispose(),e.innerHTML=""}}}},Ftn7:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=o(i("pVCM")),r=s(i("Womt")),a=i("Womt");n.default.install({THREE:Object.assign(Object.assign({},r),{MOUSE:Object.assign(Object.assign({},r.MOUSE),{LEFT:r.MOUSE.RIGHT,RIGHT:r.MOUSE.LEFT})})});t.Renderer=class{constructor(){this._debug=!1,this.scene=new a.Scene,this.light_holder=new a.Group,this.renderer=new a.WebGLRenderer({antialias:!0,alpha:!0}),this.render_scheduled=!1,this.animation_frame_handle=void 0,this.light=new a.HemisphereLight(16777215,5263440,1),this.controls_clock=new a.Clock,this.size=new a.Vector2,this.schedule_render=()=>{this.render_scheduled=!0},this.on_mouse_down=e=>{e.currentTarget&&e.currentTarget.focus()},this.call_render=()=>{const e=this.controls.update(this.controls_clock.getDelta()),t=this.render_scheduled||e;this.render_scheduled=!1,t&&this.render(),this.animation_frame_handle=requestAnimationFrame(this.call_render)},this.dom_element.tabIndex=0,this.dom_element.addEventListener("mousedown",this.on_mouse_down),this.dom_element.style.outline="none",this.scene.background=new a.Color(1579032),this.light_holder.add(this.light),this.scene.add(this.light_holder),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.getSize(this.size)}get debug(){return this._debug}set debug(e){this._debug=e}get dom_element(){return this.renderer.domElement}set_size(e,t){this.size.set(e,t),this.renderer.setSize(e,t),this.schedule_render()}pointer_pos_to_device_coords(e){e.set(e.x/this.size.width*2-1,e.y/this.size.height*-2+1)}start_rendering(){this.schedule_render(),this.animation_frame_handle=requestAnimationFrame(this.call_render)}stop_rendering(){null!=this.animation_frame_handle&&(cancelAnimationFrame(this.animation_frame_handle),this.animation_frame_handle=void 0)}reset_camera(e,t){this.controls.setLookAt(e.x,e.y,e.z,t.x,t.y,t.z)}dispose(){this.renderer.dispose(),this.controls.dispose()}init_camera_controls(){this.controls=new n.default(this.camera,this.renderer.domElement),this.controls.dampingFactor=1,this.controls.draggingDampingFactor=1}render(){this.renderer.render(this.scene,this.camera)}}},"G+UN":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("x4QM"),n=i("6WXA"),r=i("nsCy");class a{constructor(e,t){this.id_to_item_type=t,this.get_by_id=e=>this.id_to_item_type[e],this.item_types=e}}t.ItemTypeStore=a,t.item_type_stores=new n.ServerMap((function(e){return o(this,void 0,void 0,(function*(){const t=yield fetch(`/assets/itemTypes.${r.Server[e].toLowerCase()}.json`),i=yield t.json(),o=[],n=[];for(const e of i){let t;switch(e.class){case"weapon":t=new s.WeaponItemType(e.id,e.name,e.minAtp,e.maxAtp,e.ata,e.maxGrind,e.requiredAtp);break;case"armor":t=new s.ArmorItemType(e.id,e.name,e.atp,e.ata,e.minEvp,e.maxEvp,e.minDfp,e.maxDfp,e.mst,e.hp,e.lck);break;case"shield":t=new s.ShieldItemType(e.id,e.name,e.atp,e.ata,e.minEvp,e.maxEvp,e.minDfp,e.maxDfp,e.mst,e.hp,e.lck);break;case"unit":t=new s.UnitItemType(e.id,e.name);break;case"tool":t=new s.ToolItemType(e.id,e.name);break;default:continue}n[t.id]=t,o.push(t)}return new a(o,n)}))}))},GN66:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("HjM1"),n=i("xs7i"),r=i("j4Ss");class a extends s.TabContainer{constructor(){super({class:"hunt_optimizer_MethodsView",tabs:[{title:"Episode I",key:"episode_1",create_view:function(){return o(this,void 0,void 0,(function*(){return new r.MethodsForEpisodeView(n.Episode.I)}))}},{title:"Episode II",key:"episode_2",create_view:function(){return o(this,void 0,void 0,(function*(){return new r.MethodsForEpisodeView(n.Episode.II)}))}},{title:"Episode IV",key:"episode_4",create_view:function(){return o(this,void 0,void 0,(function*(){return new r.MethodsForEpisodeView(n.Episode.IV)}))}}]}),this.finalize_construction(a.prototype)}}t.MethodsView=a},GXOi:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("/Wax"),s=i("tjEv");t.prs_compress=function(e){const t=new n(e.size,e.endianness);for(;e.bytes_left;){let i=0,o=0;const s=Math.max(0,e.position-Math.min(2048,e.bytes_left));for(let t=e.position-255;t>=s;t--){let s=e.position,n=t,r=0;for(;s+3<e.size&&r<252&&e.u32_at(s)===e.u32_at(n);)r+=4,s+=4,n+=4;for(;s<e.size&&r<255&&e.u8_at(s)===e.u8_at(n);)r++,s++,n++;if(r>=o&&(i=t,o=r,r>=255))break}o<3?t.add_u8(e.u8()):(t.copy(i-e.position,o),e.seek(o))}return t.finalize()};class n{constructor(e,t){this.flags=0,this.flag_bits_left=0,this.flag_offset=0,this.output=new o.ResizableBufferCursor(new s.ResizableBuffer(e),t)}add_u8(e){this.write_control_bit(1),this.write_u8(e)}copy(e,t){e>-256&&t<=5?this.short_copy(e,t):this.long_copy(e,t)}finalize(){this.write_control_bit(0),this.write_control_bit(1),this.flags>>>=this.flag_bits_left;const e=this.output.position;return this.output.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e),this.write_u8(0),this.write_u8(0),this.output.seek_start(0)}write_control_bit(e){if(0==this.flag_bits_left--){const e=this.output.position;this.output.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e).write_u8(0),this.flag_offset=e,this.flag_bits_left=7}this.flags>>>=1,e&&(this.flags|=128)}write_u8(e){this.output.write_u8(e)}short_copy(e,t){t-=2,this.write_control_bit(0),this.write_control_bit(0),this.write_control_bit(t>>>1&1),this.write_control_bit(1&t),this.write_u8(255&e)}long_copy(e,t){t<=9?(this.write_control_bit(0),this.write_control_bit(1),this.write_u8(e<<3&248|t-2&7),this.write_u8(e>>5&255)):(this.write_control_bit(0),this.write_control_bit(1),this.write_u8(e<<3&248),this.write_u8(e>>5&255),this.write_u8(t-1))}}},Gc0Z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("c5EP"),n=i("xpi7"),r=i("IjTL"),a=i("Tpfs"),_=i("yQqj"),d=i("sZ1+"),l=i("3ONQ"),c=i("uaZj"),u=Object.freeze(new o.Vector3(0,0,0)),p=Object.freeze(new o.Vector3(0,1,0)),h=Object.freeze(new o.Vector3(0,-1,0)),v=2*Math.PI,f=new o.Raycaster;var O;t.QuestEntityControls=class{constructor(e){this.renderer=e,this.disposer=new a.Disposer,this.pointer_position=new o.Vector2(0,0),this.pointer_device_position=new o.Vector2(0,0),this.last_pointer_position=new o.Vector2(0,0),this.moved_since_last_pointer_down=!1,this.dispose=()=>{this.renderer.dom_element.removeEventListener("keydown",this.keydown),this.renderer.dom_element.removeEventListener("mousedown",this.mousedown),this.renderer.dom_element.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup),this.renderer.dom_element.removeEventListener("mouseleave",this.mouseleave),l.remove_entity_dnd_listener(this.renderer.dom_element,"dragenter",this.dragenter),l.remove_entity_dnd_listener(this.renderer.dom_element,"dragover",this.dragover),l.remove_entity_dnd_listener(this.renderer.dom_element,"dragleave",this.dragleave),l.remove_entity_dnd_listener(this.renderer.dom_element,"drop",this.drop),this.disposer.dispose()},this.mark_selected=e=>{e===this.hovered_mesh&&(this.hovered_mesh=void 0),e!==this.selected_mesh&&(this.selected_mesh&&w(this.selected_mesh,n.ColorType.Normal),w(e,n.ColorType.Selected),this.renderer.schedule_render()),this.selected_mesh=e},this.selected_entity_changed=({value:e})=>{if(this.state.cancel(),e){const t=this.renderer.get_entity_mesh(e);t?this.mark_selected(t):this.unmark_selected()}else this.unmark_selected()},this.keydown=e=>{this.state=this.state.process_event({type:O.KeyDown,key:e.key})},this.mousedown=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:O.MouseDown,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered}),this.renderer.dom_element.removeEventListener("mousemove",this.mousemove),document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)},this.mousemove=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:O.MouseMove,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered})},this.mouseup=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:O.MouseUp,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered}),this.renderer.dom_element.addEventListener("mousemove",this.mousemove),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},this.mouseleave=e=>{this.process_mouse_event(e),this.state=this.state.process_event({type:O.MouseLeave,buttons:e.buttons,shift_key:e.shiftKey,pointer_device_position:this.pointer_device_position,moved_since_last_pointer_down:this.moved_since_last_pointer_down,mark_hovered:this.mark_hovered})},this.dragenter=e=>{this.process_mouse_event(e.event),this.state=this.state.process_event({type:O.EntityDragEnter,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.dragover=e=>{this.process_mouse_event(e.event),this.state=this.state.process_event({type:O.EntityDragOver,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.dragleave=e=>{this.process_mouse_event(e.event),this.state=this.state.process_event({type:O.EntityDragLeave,shift_key:e.event.shiftKey,pointer_device_position:this.pointer_device_position,entity_type:e.entity_type,drag_element:e.drag_element,data_transfer:e.event.dataTransfer,prevent_default:()=>e.event.preventDefault(),stop_propagation:()=>e.event.stopPropagation()})},this.drop=e=>{this.process_mouse_event(e.event),this.renderer.dom_element.focus(),this.state=this.state.process_event({type:O.EntityDrop})},this.mark_hovered=e=>{this.selected_mesh&&e===this.selected_mesh||(e!==this.hovered_mesh&&(this.hovered_mesh&&w(this.hovered_mesh,n.ColorType.Normal),e&&w(e,n.ColorType.Hovered),this.renderer.schedule_render()),this.hovered_mesh=e)},this.disposer.add(s.quest_editor_store.selected_entity.observe(this.selected_entity_changed)),e.dom_element.addEventListener("keydown",this.keydown),e.dom_element.addEventListener("mousedown",this.mousedown),e.dom_element.addEventListener("mousemove",this.mousemove),e.dom_element.addEventListener("mouseleave",this.mouseleave),l.add_entity_dnd_listener(e.dom_element,"dragenter",this.dragenter),l.add_entity_dnd_listener(e.dom_element,"dragover",this.dragover),l.add_entity_dnd_listener(e.dom_element,"dragleave",this.dragleave),l.add_entity_dnd_listener(e.dom_element,"drop",this.drop),this.state=new m(e)}process_mouse_event(e){const{left:t,top:i}=this.renderer.dom_element.getBoundingClientRect();this.pointer_position.set(e.clientX-t,e.clientY-i),this.pointer_device_position.copy(this.pointer_position),this.renderer.pointer_pos_to_device_coords(this.pointer_device_position),"mousedown"===e.type?this.moved_since_last_pointer_down=!1:"mousemove"!==e.type&&"mouseup"!==e.type||this.pointer_position.equals(this.last_pointer_position)||(this.moved_since_last_pointer_down=!0),this.last_pointer_position.copy(this.pointer_position)}unmark_selected(){this.selected_mesh&&(w(this.selected_mesh,n.ColorType.Normal),this.renderer.schedule_render()),this.selected_mesh=void 0}},function(e){e[e.KeyDown=0]="KeyDown",e[e.MouseDown=1]="MouseDown",e[e.MouseMove=2]="MouseMove",e[e.MouseUp=3]="MouseUp",e[e.MouseLeave=4]="MouseLeave",e[e.EntityDragEnter=5]="EntityDragEnter",e[e.EntityDragOver=6]="EntityDragOver",e[e.EntityDragLeave=7]="EntityDragLeave",e[e.EntityDrop=8]="EntityDrop"}(O||(O={}));class m{constructor(e){this.renderer=e}process_event(e){switch(e.type){case O.KeyDown:{const t=s.quest_editor_store.selected_entity.val;return t&&"Delete"===e.key&&s.quest_editor_store.remove_entity(t),this}case O.MouseDown:{const t=this.pick_entity(e.pointer_device_position);if(t){if(1===e.buttons)return s.quest_editor_store.set_selected_entity(t.entity),new g(this.renderer,t.entity,t.drag_adjust,t.grab_offset);if(2===e.buttons)return s.quest_editor_store.set_selected_entity(t.entity),new E(this.renderer,t.entity,t.mesh,t.grab_offset)}return this}case O.MouseMove:{const t=this.pick_entity(e.pointer_device_position);return e.mark_hovered(t&&t.mesh),this}case O.MouseUp:return e.moved_since_last_pointer_down||s.quest_editor_store.set_selected_entity(void 0),this;case O.MouseLeave:return e.mark_hovered(void 0),this;case O.EntityDragEnter:{const t=s.quest_editor_store.current_area.val,i=s.quest_editor_store.current_quest.val;return t&&i?new P(this.renderer,e,i,t):this}default:return this}}cancel(){}pick_entity(e){f.setFromCamera(e,this.renderer.camera);const[t]=f.intersectObjects(this.renderer.entity_models.children);if(!t)return;const i=t.object.userData.entity,o=t.object.position.clone().sub(t.point),s=o.clone();f.set(t.object.position,h);const[n]=f.intersectObjects(this.renderer.collision_geometry.children,!0);return n&&(s.y-=n.distance),{mesh:t.object,entity:i,grab_offset:o,drag_adjust:s}}}class g{constructor(e,t,i,o){this.renderer=e,this.entity=t,this.drag_adjust=i,this.grab_offset=o,this.cancelled=!1,this.initial_section=t.section.val,this.initial_position=t.world_position.val,this.renderer.controls.enabled=!1}process_event(e){switch(e.type){case O.MouseMove:return this.cancelled?new m(this.renderer):(e.moved_since_last_pointer_down&&b(this.renderer,this.entity,this.drag_adjust,this.grab_offset,e.pointer_device_position,e.shift_key),this);case O.MouseUp:return this.renderer.controls.enabled=!0,!this.cancelled&&e.moved_since_last_pointer_down&&s.quest_editor_store.translate_entity(this.entity,this.initial_section,this.entity.section.val,this.initial_position,this.entity.world_position.val,!0),new m(this.renderer);default:return this.cancelled?new m(this.renderer):this}}cancel(){this.cancelled=!0,this.renderer.controls.enabled=!0,this.initial_section&&this.entity.set_section(this.initial_section),this.entity.set_world_position(this.initial_position)}}class E{constructor(e,t,i,o){this.renderer=e,this.entity=t,this.mesh=i,this.cancelled=!1,this.initial_rotation=t.world_rotation.val,this.grab_point=t.world_position.val.clone().sub(o),this.renderer.controls.enabled=!1}process_event(e){switch(e.type){case O.MouseMove:return this.cancelled?new m(this.renderer):(e.moved_since_last_pointer_down&&T(this.renderer,this.entity,this.mesh.quaternion,this.initial_rotation,this.grab_point,e.pointer_device_position),this);case O.MouseUp:return this.renderer.controls.enabled=!0,!this.cancelled&&e.moved_since_last_pointer_down&&s.quest_editor_store.rotate_entity(this.entity,this.initial_rotation,this.entity.world_rotation.val,!0),new m(this.renderer);default:return this.cancelled?new m(this.renderer):this}}cancel(){this.cancelled=!0,this.renderer.controls.enabled=!0,this.entity.set_world_rotation(this.initial_rotation)}}class P{constructor(e,t,i,n){if(this.drag_adjust=new o.Vector3(0,0,0),this.cancelled=!1,this.renderer=e,t.drag_element.style.display="none",t.data_transfer&&(t.data_transfer.dropEffect="copy"),_.is_npc_type(t.entity_type)){const e=d.npc_data(t.entity_type);this.entity=new r.QuestNpcModel(t.entity_type,e.pso_type_id,0,0,e.pso_roaming,n.id,0,new o.Vector3(0,0,0),new o.Euler(0,0,0,"ZXY"),new o.Vector3(1,1,1),[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0]])}else this.entity=new c.QuestObjectModel(t.entity_type,0,0,n.id,0,new o.Vector3(0,0,0),new o.Euler(0,0,0,"ZXY"),new Map,[[0,0,0,0,0,0],[0,0]]);y(this.renderer,this.entity,this.drag_adjust,u,t.pointer_device_position),i.add_entity(this.entity),s.quest_editor_store.set_selected_entity(this.entity)}process_event(e){switch(e.type){case O.EntityDragOver:return this.cancelled?(e.drag_element.style.display="flex",e.data_transfer&&(e.data_transfer.dropEffect="none"),new m(this.renderer)):(e.stop_propagation(),e.prevent_default(),e.data_transfer&&(e.data_transfer.dropEffect="copy"),b(this.renderer,this.entity,this.drag_adjust,u,e.pointer_device_position,e.shift_key),this);case O.EntityDragLeave:{e.drag_element.style.display="flex";const t=s.quest_editor_store.current_quest.val;return t&&t.remove_entity(this.entity),new m(this.renderer)}case O.EntityDrop:return this.cancelled||s.quest_editor_store.push_create_entity_action(this.entity),new m(this.renderer);default:return this}}cancel(){this.cancelled=!0;const e=s.quest_editor_store.current_quest.val;e&&e.remove_entity(this.entity)}}function w(e,t){const i=e.userData.entity instanceof r.QuestNpcModel?n.NPC_COLORS[t]:n.OBJECT_COLORS[t];if(e)if(Array.isArray(e.material))for(const o of e.material)t===n.ColorType.Normal&&o.map?o.color.set(16777215):o.color.set(i);else e.material.color.set(i)}function b(e,t,i,o,s,n){n?D(e,t,i,o,s):y(e,t,i,o,s)}const y=(()=>{const e=new o.Plane,t=new o.Vector3;return(i,s,n,r,a)=>{const{intersection:_,section:d}=function(e,t,i){f.setFromCamera(t,e.camera),f.ray.origin.add(i);const o=f.intersectObjects(e.collision_geometry.children,!0);for(const e of o)if(e.face.normal.y>.75)return{intersection:e,section:e.object.userData.section};return{}}(i,a,n);if(_){if(d){const e=s.world_rotation.val;s.set_section(d),s.set_world_rotation(e)}s.set_world_position(new o.Vector3(_.point.x,_.point.y+r.y-n.y,_.point.z))}else f.setFromCamera(a,i.camera),e.set(p,-s.world_position.val.y+r.y),f.ray.intersectPlane(e,t)&&s.set_world_position(new o.Vector3(t.x+r.x,s.world_position.val.y,t.z+r.z))}})(),D=(()=>{const e=new o.Vector3,t=new o.Plane,i=new o.Vector3,s=new o.Vector3;return(n,r,a,_,d)=>{if(f.setFromCamera(d,n.camera),n.camera.getWorldDirection(e),e.negate(),e.y=0,e.normalize(),s.set(r.world_position.val.x,r.world_position.val.y,r.world_position.val.z),s.sub(_),t.setFromNormalAndCoplanarPoint(e,s),f.ray.intersectPlane(t,i)){const e=i.y+_.y,t=e-r.world_position.val.y;a.y-=t,r.set_world_position(new o.Vector3(r.world_position.val.x,e,r.world_position.val.z))}}})(),T=(()=>{const e=new o.Vector3,t=new o.Plane,i=new o.Vector3,s=new o.Vector3,n=new o.Vector3,r=new o.Vector3;return(a,_,d,l,c,u)=>{if(e.copy(p),e.applyQuaternion(d),t.setFromNormalAndCoplanarPoint(e,c),f.setFromCamera(u,a.camera),f.ray.intersectPlane(t,i)){t.projectPoint(_.world_position.val,s),n.subVectors(s,c),r.subVectors(s,i);const a=n.dot(r),d=e.dot(n.cross(r)),u=Math.atan2(d,a);_.set_world_rotation(new o.Euler(l.x,(l.y+u)%v,l.z,"ZXY"))}}})()},GuD3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("bcBH");t.AbstractCursor=class{constructor(e,t){this._position=0,this.endianness=e,this.offset=t}get position(){return this._position}get endianness(){return this.little_endian?o.Endianness.Little:o.Endianness.Big}set endianness(e){this.little_endian=e===o.Endianness.Little}get bytes_left(){return this.size-this.position}seek(e){return this.seek_start(this.position+e)}seek_start(e){if(e<0||e>this.size)throw new Error(`Offset ${e} is out of bounds.`);return this._position=e,this}seek_end(e){if(e<0||e>this.size)throw new Error(`Offset ${e} is out of bounds.`);return this._position=this.size-e,this}u8(){return this.u8_at(this._position++)}u8_at(e){return this.check_offset(e,1),this.dv.getUint8(this.offset+e)}u16(){const e=this.u16_at(this.position);return this._position+=2,e}u16_at(e){return this.check_offset(e,2),this.dv.getUint16(this.offset+e,this.little_endian)}u32(){const e=this.u32_at(this.position);return this._position+=4,e}u32_at(e){return this.check_offset(e,4),this.dv.getUint32(this.offset+e,this.little_endian)}i8(){return this.i8_at(this._position++)}i8_at(e){return this.check_offset(e,1),this.dv.getInt8(this.offset+e)}i16(){const e=this.i16_at(this.position);return this._position+=2,e}i16_at(e){return this.check_offset(e,2),this.dv.getInt16(this.offset+e,this.little_endian)}i32(){const e=this.i32_at(this.position);return this._position+=4,e}i32_at(e){return this.check_offset(e,4),this.dv.getInt32(this.offset+e,this.little_endian)}f32(){const e=this.f32_at(this.position);return this._position+=4,e}f32_at(e){return this.check_offset(e,4),this.dv.getFloat32(this.offset+e,this.little_endian)}u8_array(e){this.check_size("n",e,e);const t=[];for(let i=0;i<e;++i)t.push(this.dv.getUint8(this.offset+this._position++));return t}u16_array(e){this.check_size("n",e,2*e);const t=[];for(let i=0;i<e;++i)t.push(this.dv.getUint16(this.offset+this.position,this.little_endian)),this._position+=2;return t}u32_array(e){this.check_size("n",e,4*e);const t=[];for(let i=0;i<e;++i)t.push(this.dv.getUint32(this.offset+this.position,this.little_endian)),this._position+=4;return t}i32_array(e){this.check_size("n",e,4*e);const t=[];for(let i=0;i<e;++i)t.push(this.dv.getInt32(this.offset+this.position,this.little_endian)),this._position+=4;return t}vec2_f32(){return{x:this.f32(),y:this.f32()}}vec3_f32(){return{x:this.f32(),y:this.f32(),z:this.f32()}}string_ascii(e,t,i){const o=[];for(let s=0;s<e;s++){const n=this.u8();if(t&&0===n){i&&this.seek(e-s-1);break}o.push(n)}return String.fromCodePoint(...o)}string_utf16(e,t,i){const o=[],s=Math.floor(e/2);for(let e=0;e<s;e++){const n=this.u16();if(t&&0===n){i&&this.seek(2*(s-e-1));break}o.push(n)}return String.fromCodePoint(...o)}string_ascii_at(e,t,i){const o=[];for(let s=0;s<t;s++){const t=this.u8_at(e+s);if(i&&0===t)break;o.push(t)}return String.fromCodePoint(...o)}string_utf16_at(e,t,i){const o=[],s=Math.floor(t/2);for(let t=0;t<s;t++){const s=this.u16_at(e+2*t);if(i&&0===s)break;o.push(s)}return String.fromCodePoint(...o)}array_buffer(e=this.size-this.position){this.check_size("size",e,e);const t=this.backing_buffer.slice(this.offset+this.position,this.offset+this.position+e);return this._position+=e,t}copy_to_uint8_array(e,t=this.size-this.position){return this.check_size("size",t,t),e.set(new Uint8Array(this.backing_buffer,this.offset+this.position,t)),this._position+=t,this}check_size(e,t,i){if(i<0||i>this.size-this.position)throw new Error(`${e} ${t} is out of bounds.`)}check_offset(e,t){if(e<0||e+t>this.size)throw new Error(`Offset ${e} is out of bounds.`)}}},HNnB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("GGSb").get("core/decorators");t.stub=function(e,t,i){const s=i.value;return i.value=function(...i){return o.warn(`Stub: ${e.constructor.name}.prototype.${String(t)}`),s.apply(this,i)},i}},Hdaq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("nN8q");i("m5WL");const n=i("4SjJ"),r=i("KUR2"),a=i("tyuj"),_=i("lHpu"),d=i("VRtl"),l=i("Y3Jw"),c=100,u=140;class p extends s.ResizableWidget{constructor(){super(),this.element=o.el.div({class:"viewer_Model3DView"}),this.tool_bar_view=this.disposable(new d.Model3DToolBar),this.model_list_view=this.disposable(new l.Model3DSelectListView(a.model_store.models,a.model_store.current_model,a.model_store.set_current_model)),this.animation_list_view=this.disposable(new l.Model3DSelectListView(a.model_store.animations,a.model_store.current_animation,a.model_store.set_current_animation)),this.renderer_view=this.disposable(new r.RendererWidget(new _.Model3DRenderer)),this.animation_list_view.borders=!0,this.element.append(this.tool_bar_view.element,o.el.div({class:"viewer_Model3DView_container"},this.model_list_view.element,this.animation_list_view.element,this.renderer_view.element)),a.model_store.set_current_model(a.model_store.models[5]),this.renderer_view.start_rendering(),this.disposable(n.gui_store.tool.observe(({value:e})=>{e===n.GuiTool.Viewer?this.renderer_view.start_rendering():this.renderer_view.stop_rendering()})),this.finalize_construction(p.prototype)}resize(e,t){super.resize(e,t);const i=Math.max(0,t-this.tool_bar_view.height);return this.model_list_view.resize(c,i),this.animation_list_view.resize(u,i),this.renderer_view.resize(Math.max(0,e-c-u),i),this}}t.Model3DView=p},HjM1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("39ZU"),n=i("nN8q");i("4AvX");const r=28;class a extends n.ResizableWidget{constructor(e){super(e),this.element=o.el.div({class:"core_TabContainer"}),this.tabs=[],this.bar_element=o.el.div({class:"core_TabContainer_Bar"}),this.panes_element=o.el.div({class:"core_TabContainer_Panes"}),this.bar_mousedown=e=>{if(e.target instanceof HTMLElement){const t=e.target.dataset.key;t&&this.activate(t)}},this.bar_element.onmousedown=this.bar_mousedown;for(const t of e.tabs){const e=o.create_element("span",{class:"core_TabContainer_Tab",text:t.title,data:{key:t.key}});this.bar_element.append(e);const i=new s.LazyWidget(t.create_view);this.tabs.push(Object.assign(Object.assign({},t),{tab_element:e,lazy_view:i})),this.panes_element.append(i.element),this.disposable(i)}this.tabs.length&&this.activate(this.tabs[0].key),this.element.append(this.bar_element,this.panes_element),this.finalize_construction(a.prototype)}resize(e,t){super.resize(e,t),this.bar_element.style.width=`${e}px`,this.bar_element.style.height=`${r}px`;const i=t-r;this.panes_element.style.width=`${e}px`,this.panes_element.style.height=`${i}px`;for(const t of this.tabs)t.lazy_view.resize(e,i);return this}activate(e){for(const t of this.tabs){const i=t.key===e;i?t.tab_element.classList.add("active"):t.tab_element.classList.remove("active"),t.lazy_view.visible.val=i}}}t.TabContainer=a},IMNf:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("/Wax"),r=i("tjEv"),a=s.default.get("core/data_formats/compression/prs/decompress");t.prs_decompress=function(e){const t=new _(e);for(;;)if(1===t.read_flag_bit())t.copy_u8();else{let e,i;if(0===t.read_flag_bit())e=t.read_flag_bit()<<1,e|=t.read_flag_bit(),e+=2,i=t.read_u8()-256;else{if(0===(i=t.read_u16()))break;e=7&i,i>>>=3,0===e?(e=t.read_u8(),e+=1):e+=2,i-=8192}t.offset_copy(i,e)}return t.dst.seek_start(0)};class _{constructor(e){this.src=e,this.dst=new n.ResizableBufferCursor(new r.ResizableBuffer(Math.floor(1.5*e.size)),e.endianness),this.flags=0,this.flag_bits_left=0}read_flag_bit(){0===this.flag_bits_left&&(this.flags=this.read_u8(),this.flag_bits_left=8);const e=1&this.flags;return this.flags>>>=1,this.flag_bits_left-=1,e}copy_u8(){this.dst.write_u8(this.read_u8())}read_u8(){return this.src.u8()}read_u16(){return this.src.u16()}offset_copy(e,t){(e<-8192||e>0)&&a.error(`offset was ${e}, should be between -8192 and 0.`),(t<1||t>256)&&a.error(`length was ${t}, should be between 1 and 256.`);const i=Math.min(-e,t);this.dst.seek(e);const o=this.dst.take(i);this.dst.seek(-e-i);for(let e=0;e<Math.floor(t/i);++e)this.dst.write_cursor(o),o.seek_start(0);this.dst.write_cursor(o.take(t%i))}}},IV2v:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("ExVU");t.HuntMethodModel=class{constructor(e,t,i,n){if(!e)throw new Error("id is required.");if(!s.Duration.isDuration(n))throw new Error("default_time must a valid duration.");if(!t)throw new Error("name is required.");if(!i)throw new Error("quest is required.");this.id=e,this.name=t,this.episode=i.episode,this.quest=i,this.enemy_counts=i.enemy_counts,this.default_time=n,this._user_time=o.property(void 0),this.user_time=this._user_time,this.time=this.user_time.map(e=>null!=e?e:this.default_time)}set_user_time(e){return this._user_time.val=e,this}}},If1w:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("FXpb");i("XfQH");const n=i("KVVN"),r=i("Tpfs"),a=i("TRid"),_=i("PE7g"),d=i("sMN3"),l=i("Ncr4"),c=i("ouMO");class u extends a.Widget{constructor(){super(),this.element=s.el.div({class:"hunt_optimizer_WantedItemsView"}),this.tbody_element=s.el.tbody(),this.store_disposer=this.disposable(new r.Disposer),this.create_row=e=>{const t=new r.Disposer,i=t.add(new _.NumberInput(e.amount.val,{min:0,step:1}));t.add_all(i.value.bind_to(e.amount),i.value.observe(({value:t})=>e.set_amount(t)));const a=t.add(new n.Button("",{icon_left:s.Icon.Remove}));return t.add(a.click.observe(()=>o(this,void 0,void 0,(function*(){return(yield d.hunt_optimizer_stores.current.val).remove_wanted_item(e)})))),[s.el.tr({},s.el.td({},i.element),s.el.td({text:e.item_type.name}),s.el.td({},a.element)),t]};const e=c.list_property(),t=c.list_property(),i=this.disposable(new l.ComboBox({items:t,to_label:e=>e.name,placeholder_text:"Add an item",filter(i){const o=i.toLowerCase();t.val=e.val.filter(e=>e.name.toLowerCase().includes(o))}}));this.element.append(s.el.h2({text:"Wanted Items"}),i.element,s.el.div({class:"hunt_optimizer_WantedItemsView_table_wrapper"},s.el.table({},this.tbody_element))),this.disposables(d.hunt_optimizer_stores.observe_current(o=>{this.store_disposer.dispose_all(),this.store_disposer.add_all(s.bind_children_to(this.tbody_element,o.wanted_items,this.create_row),i.selected.observe(({value:e})=>{e&&(o.add_wanted_item(e),i.selected.val=void 0)})),e.val=o.huntable_item_types.slice().sort((e,t)=>e.name.localeCompare(t.name)),t.val=e.val},{call_now:!0})),this.finalize_construction(u.prototype)}}t.WantedItemsView=u},IjTL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("kiqn");class s extends o.QuestEntityModel{constructor(e,t,i,o,s,n,r,a,_,d,l){if(!Number.isInteger(t))throw new Error("pso_type_id should be an integer.");if(!Number.isFinite(i))throw new Error("npc_id should be a number.");if(!Number.isInteger(o))throw new Error("script_label should be an integer.");if(!Number.isInteger(s))throw new Error("pso_roaming should be an integer.");if(!d)throw new Error("scale is required.");if(!l)throw new Error("unknown is required.");if(3!==l.length)throw new Error(`unknown should be of length 3, was ${l.length}.`);if(10!==l[0].length)throw new Error(`unknown[0] should be of length 10, was ${l[0].length}`);if(6!==l[1].length)throw new Error(`unknown[1] should be of length 6, was ${l[1].length}`);if(4!==l[2].length)throw new Error(`unknown[2] should be of length 4, was ${l[2].length}`);super(e,n,r,a,_),this.pso_type_id=t,this.npc_id=i,this.script_label=o,this.pso_roaming=s,this.unknown=l,this.scale=d}}t.QuestNpcModel=s},JCZi:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i("wsa1"),r=s(i("NUmZ")),a=i("yAUo"),_=i("Q4I3"),d=i("ZPAt"),l=i("ouMO");var c=n.languages.CompletionItemKind;const u=d.OPCODES.filter(e=>null!=e).map(e=>({label:e.mnemonic,kind:c.Function,insertText:e.mnemonic})),p=[{label:".code",kind:c.Keyword,insertText:"code"},{label:".data",kind:c.Keyword,insertText:"data"},{label:".string",kind:c.Keyword,insertText:"string"}];t.AssemblyAnalyser=class{constructor(){this._issues=l.property({warnings:[],errors:[]}),this.issues=this._issues,this.worker=new r.default,this.promises=new Map,this.message_id=0,this.process_worker_message=e=>{const t=e.data;switch(t.type){case a.OutputMessageType.NewObjectCode:this.quest&&(this.quest.object_code.splice(0,this.quest.object_code.length,...t.object_code),this.quest.set_map_designations(t.map_designations),this._issues.val={warnings:t.warnings,errors:t.errors});break;case a.OutputMessageType.SignatureHelp:{const e=this.promises.get(t.id);if(e)if(this.promises.delete(t.id),t.opcode){let i=t.opcode.mnemonic+" ";const o=[];let s=!0;for(const e of t.opcode.params){let t;switch(s?s=!1:i+=", ",e.type.kind){case d.Kind.ILabel:t="FuncLabel";break;case d.Kind.DLabel:t="DataLabel";break;case d.Kind.SLabel:t="StringLabel";break;case d.Kind.ILabelVar:t="...FuncLabel";break;case d.Kind.RegRef:case d.Kind.RegTupRef:t="Register";break;case d.Kind.RegRefVar:t="...Register";break;default:t=d.Kind[e.type.kind]}o.push({label:[i.length,i.length+t.length],documentation:e.doc}),i+=t}const n={signatures:[{label:i,documentation:t.opcode.doc,parameters:o}],activeSignature:0,activeParameter:t.active_param};e.resolve(n)}else e.resolve(void 0)}break;case a.OutputMessageType.Definition:{const e=this.promises.get(t.id);if(e){this.promises.delete(t.id);const i=[];null!=t.line_no&&i.push({uri:e.uri,range:{startLineNumber:t.line_no,startColumn:t.col,endLineNumber:t.line_no,endColumn:t.col+t.len}}),e.resolve(i)}}}},this.worker.onmessage=this.process_worker_message}disassemble(e,t){this.quest=e;const i=_.disassemble(e.object_code,t),o={type:a.InputMessageType.NewAssembly,assembly:i};return this.worker.postMessage(o),i}update_assembly(e){const t={type:a.InputMessageType.AssemblyChange,changes:e.map(e=>({start_line_no:e.range.startLineNumber,start_col:e.range.startColumn,end_line_no:e.range.endLineNumber,end_col:e.range.endColumn,new_text:e.text}))};this.worker.postMessage(t)}provide_completion_items(e){return{suggestions:/^\s*([a-z][a-z0-9_=<>!]*)?$/.test(e)?u:/^\s*\.[a-z]+$/.test(e)?p:[],incomplete:!1}}provide_signature_help(e,t,i){return o(this,void 0,void 0,(function*(){return yield this.send_and_await_response("Signature help provision",e,e=>({type:a.InputMessageType.SignatureHelp,id:e,line_no:t,col:i}))}))}provide_definition(e,t,i){return o(this,void 0,void 0,(function*(){return yield this.send_and_await_response("Definition provision",e,e=>({type:a.InputMessageType.Definition,id:e,line_no:t,col:i}))}))}update_settings(e){const t={type:a.InputMessageType.SettingsChange,settings:e};this.worker.postMessage(t)}dispose(){this.worker.terminate()}send_and_await_response(e,t,i){return o(this,void 0,void 0,(function*(){const o=this.message_id++;return new Promise((s,n)=>{this.promises.set(o,{uri:t,resolve:s,reject:n});const r=i(o);this.worker.postMessage(r),setTimeout(()=>{this.promises.delete(o)&&n(new Error(`${e} timed out.`))},5e3)})}))}}},JQxC:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("ZPAt"),r=i("4s8/"),a=i("CUby"),_=s.default.get("quest_editor/scripting/data_flow_analysis/stack_value");t.MIN_STACK_VALUE=n.MIN_SIGNED_DWORD_VALUE,t.MAX_STACK_VALUE=n.MAX_SIGNED_DWORD_VALUE,t.stack_value=function(e,i,o){const s=e.get_block_for_instruction(i);return s?function e(i,o,s,d,l){if(++i.iterations>100)return _.warn("Too many iterations."),(new r.ValueSet).set_interval(t.MIN_STACK_VALUE,t.MAX_STACK_VALUE);for(let e=d-1;e>=s.start;e--){const o=s.segment.instructions[e];if(o.opcode.stack===n.StackInteraction.Pop){l+=o.opcode.params.length;continue}const _=o.args;switch(o.opcode.code){case n.OP_ARG_PUSHR.code:if(0===l)return a.register_value(i.cfg,o,_[0].value);l--;break;case n.OP_ARG_PUSHL.code:case n.OP_ARG_PUSHB.code:case n.OP_ARG_PUSHW.code:if(0===l)return(new r.ValueSet).set_value(_[0].value);l--;break;case n.OP_ARG_PUSHA.code:case n.OP_ARG_PUSHO.code:case n.OP_ARG_PUSHS.code:if(0===l)return(new r.ValueSet).set_interval(t.MIN_STACK_VALUE,t.MAX_STACK_VALUE);l--}}const c=new r.ValueSet;o.add(s);for(const n of s.from){if(o.has(n)){c.set_interval(t.MIN_STACK_VALUE,t.MAX_STACK_VALUE);break}c.union(e(i,new Set(o),n,n.end,l))}return c}(new d(e),new Set,s,s.index_of_instruction(i),o):new r.ValueSet};class d{constructor(e){this.cfg=e,this.iterations=0}}},Jo0o:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("weRg"),s=i("+oIp"),n=i("c5EP"),r=i("xs7i");class a extends o.EntityListView{constructor(){super("quest_editor_ObjectListView"),this.filter_objects=()=>{const e=n.quest_editor_store.current_quest.val,t=n.quest_editor_store.current_area.val,i=e?e.episode:r.Episode.I,o=t?t.id:0;this.entities.val=s.OBJECT_TYPES.filter(e=>{const t=s.object_data(e);if(null==t.area_ids)return!0;const n=t.area_ids[i];return n&&n.includes(o)})},this.disposables(n.quest_editor_store.current_quest.observe(this.filter_objects),n.quest_editor_store.current_area.observe(this.filter_objects)),this.filter_objects(),this.finalize_construction(a.prototype)}}t.ObjectListView=a},KCHA:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("v2aa"),n=i("uaZj"),r=i("tRdk"),a=i("Womt"),_=i("IjTL"),d=i("LUot"),l=i("DuVK"),c=i("2Ghz"),u=i("VlMR"),p=o(i("GGSb")),h=i("lg9k"),v=p.default.get("quest_editor/stores/model_conversion");function f(e,t,i,o,s,n){if(n.has(s))return;n.add(s);const r=e.get(s);t.push(s),o.set(s,r),0===r.parents.length&&i.push(s);for(const s of r.parents)f(e,t,i,o,s,n);for(const s of r.children)f(e,t,i,o,s,n)}function O(e){const t=[];for(const i of e)for(const e of i.events){const o=e.actions.val.map(e=>{if(e instanceof c.QuestEventActionSpawnNpcsModel)return{type:l.DatEventActionType.SpawnNpcs,section_id:e.section_id,appear_flag:e.appear_flag};if(e instanceof c.QuestEventActionUnlockModel)return{type:l.DatEventActionType.Unlock,door_id:e.door_id};if(e instanceof c.QuestEventActionLockModel)return{type:l.DatEventActionType.Lock,door_id:e.door_id};throw new Error(`Unknown event action type ${Object.getPrototypeOf(e).constructor}`)});for(const t of i.get_children(e))o.push({type:l.DatEventActionType.TriggerEvent,event_id:t.id});t.push({id:e.id,section_id:e.section_id,wave:e.wave,delay:e.delay,actions:o,area_id:i.area_id,unknown:e.unknown})}return t}t.convert_quest_to_model=function(e){return new s.QuestModel(e.id,e.language,e.name,e.short_description,e.long_description,e.episode,e.map_designations,e.objects.map(e=>new n.QuestObjectModel(e.type,e.id,e.group_id,e.area_id,e.section_id,r.vec3_to_threejs(e.position),new a.Euler(e.rotation.x,e.rotation.y,e.rotation.z,"ZXY"),e.properties,e.unknown)),e.npcs.map(e=>new _.QuestNpcModel(e.type,e.pso_type_id,e.npc_id,e.script_label,e.pso_roaming,e.area_id,e.section_id,r.vec3_to_threejs(e.position),new a.Euler(e.rotation.x,e.rotation.y,e.rotation.z,"ZXY"),r.vec3_to_threejs(e.scale),e.unknown)),function(e){const t=new Map;for(const i of e){const e=`${i.id}-${i.area_id}`;let o=t.get(e);if(o&&o.event){v.warn(`Ignored duplicate event #${i.id} for area ${i.area_id}.`);continue}const s=new d.QuestEventModel(i.id,i.section_id,i.wave,i.delay,i.unknown);o?o.event=s:(o={event:s,area_id:i.area_id,parents:[],child_ids:[]},t.set(e,o));for(const e of i.actions)switch(e.type){case l.DatEventActionType.SpawnNpcs:s.add_action(new c.QuestEventActionSpawnNpcsModel(e.section_id,e.appear_flag));break;case l.DatEventActionType.Unlock:s.add_action(new c.QuestEventActionUnlockModel(e.door_id));break;case l.DatEventActionType.Lock:s.add_action(new c.QuestEventActionLockModel(e.door_id));break;case l.DatEventActionType.TriggerEvent:{o.child_ids.push(e.event_id);const n=`${e.event_id}-${i.area_id}`,r=t.get(n);r?r.parents.push(s):t.set(n,{area_id:i.area_id,parents:[s],child_ids:[]})}break;default:v.warn(`Unknown event action type: ${e.type}.`)}}const i=new Map,o=[];for(const e of t.values())if(e.event){const s=[];for(const i of e.child_ids){const o=t.get(`${i}-${e.area_id}`);o.event?s.push(o.event):v.warn(`Event ${e.event.id} calls nonexistent event ${i}.`)}i.set(e.event,{parents:e.parents,children:s}),0===e.parents.length&&o.push({event:e.event,area_id:e.area_id})}const s=[];for(;o.length;){const{event:e,area_id:t}=o.shift(),n=[],r=[],a=new Map;f(i,n,r,a,e,new Set);for(const e of r){const t=o.findIndex(t=>t.event===e);-1!==t&&o.splice(t,1)}s.push(new u.QuestEventDagModel(t,n,r,a))}return s}(e.events),e.dat_unknowns,e.object_code,e.shop_items)},t.convert_quest_from_model=function(e){return{id:e.id.val,language:e.language.val,name:e.name.val,short_description:e.short_description.val,long_description:e.long_description.val,episode:e.episode,objects:e.objects.val.map(e=>({type:e.type,area_id:e.area_id,section_id:e.section_id.val,position:e.position.val.clone(),rotation:e.rotation.val.clone(),unknown:e.unknown,id:e.id,group_id:e.group_id,properties:new Map(e.properties)})),npcs:e.npcs.val.map(e=>({type:e.type,area_id:e.area_id,section_id:e.section_id.val,position:e.position.val.clone(),rotation:e.rotation.val.clone(),scale:e.scale.clone(),unknown:e.unknown,pso_type_id:e.pso_type_id,npc_id:e.npc_id,script_label:e.script_label,pso_roaming:e.pso_roaming})),events:O(e.event_dags.val),dat_unknowns:e.dat_unknowns.map(e=>Object.assign({},e)),object_code:e.object_code.map(e=>h.clone_segment(e)),shop_items:e.shop_items.slice(),map_designations:new Map(e.map_designations.val)}}},"KS+z":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("w6HN"),s=i("oyid"),n=i("S6Bx");class r extends o.ToolBar{constructor(){const e=new s.CheckBox(!0,{label:"Inline args mode",tooltip:n.asm_editor_store.has_issues.map(e=>{let t="Transform arg_push* opcodes to be inline with the opcode the arguments are given to.";return e&&(t+="\nThis mode cannot be toggled because there are issues in the script."),t})});super({children:[e]}),this.disposables(e.checked.bind_to(n.asm_editor_store.inline_args_mode),e.checked.observe(({value:e})=>n.asm_editor_store.set_inline_args_mode(e)),e.enabled.bind_to(n.asm_editor_store.has_issues.map(e=>!e))),this.finalize_construction(r.prototype)}}t.AsmEditorToolBar=r},KUR2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb");class n extends o.ResizableWidget{constructor(e){super(),this.renderer=e,this.element=s.el.div(),this.element.append(e.dom_element),this.disposable(e),this.finalize_construction(n.prototype)}start_rendering(){this.renderer.start_rendering()}stop_rendering(){this.renderer.stop_rendering()}resize(e,t){return super.resize(e,t),this.renderer.set_size(e,t),this}}t.RendererWidget=n},KVVN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb");i("Tp1L");const s=i("ouMO"),n=i("QmPX"),r=i("4VsB");class a extends n.Control{constructor(e,t){super(t),this.element=o.el.button({class:"core_Button"});const i=o.el.span({class:"core_Button_inner"});this.center_element=o.el.span({class:"core_Button_center"}),t&&null!=t.icon_left&&i.append(o.el.span({class:"core_Button_left"},o.icon(t.icon_left))),i.append(this.center_element),t&&null!=t.icon_right&&i.append(o.el.span({class:"core_Button_right"},o.icon(t.icon_right))),this._mousedown=s.emitter(),this.mousedown=this._mousedown,this.element.onmousedown=e=>this._mousedown.emit({value:e}),this._mouseup=s.emitter(),this.mouseup=this._mouseup,this.element.onmouseup=e=>this._mouseup.emit({value:e}),this._click=s.emitter(),this.click=this._click,this.element.onclick=e=>this._click.emit({value:e}),this._text=new r.WidgetProperty(this,"",this.set_text),this.text=this._text,"string"==typeof e?this.text.val=e:e&&this.text.bind_to(e),this.element.append(i),this.finalize_construction(a.prototype)}set_enabled(e){super.set_enabled(e),this.element.disabled=!e}set_text(e){this.center_element.textContent=e,this.center_element.hidden=""===e}}t.Button=a},"L/3r":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("Ts/k"),n=i("n5fr");t.SimpleUndo=class{constructor(e,t,i){this.can_undo=o.property(!1),this.can_redo=o.property(!1),this.action=o.property({description:e,undo:t,redo:i}),this.first_undo=o.map((e,t)=>t?e:void 0,this.action,this.can_undo),this.first_redo=o.map((e,t)=>t?e:void 0,this.action,this.can_redo)}make_current(){n.undo_manager.current.val=this}ensure_not_current(){n.undo_manager.current.val===this&&(n.undo_manager.current.val=s.NOOP_UNDO)}undo(){return!!this.can_undo&&(this.action.val.undo(),!0)}redo(){return!!this.can_redo&&(this.action.val.redo(),!0)}reset(){this.can_undo.val=!1,this.can_redo.val=!1}}},LSoc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("TRid"),n=i("ouMO"),r=i("4VsB");i("/xfa");class a extends s.Widget{constructor(e,t,i){super(),this.element=o.el.div({class:"core_Menu",tab_index:-1}),this.inner_element=o.el.div({class:"core_Menu_inner"}),this.mouseup=e=>{if(!(e.target instanceof HTMLElement))return;const t=e.target.dataset.index;null!=t&&this.select_item(parseInt(t,10))},this.keydown=e=>{switch(e.key){case"ArrowDown":this.hover_next();break;case"ArrowUp":this.hover_prev();break;case"Enter":this.select_hovered()}},this.inner_mouseover=e=>{if(e.target&&e.target instanceof HTMLElement){const t=e.target.dataset.index;null!=t&&this.hover_item(parseInt(t,10))}},this.document_mousedown=e=>{!this.visible.val||this.element.contains(e.target)||this.related_element.contains(e.target)||this.visible.set_val(!1,{silent:!1})},this.document_keydown=e=>{"Escape"===e.key&&this.visible.set_val(!1,{silent:!1})},this.visible.val=!1,this.element.onmouseup=this.mouseup,this.element.onkeydown=this.keydown,this.inner_element.onmouseover=this.inner_mouseover,this.element.append(this.inner_element),this.to_label=t,this.items=Array.isArray(e)?n.property(e):e,this.related_element=i,this._selected=new r.WidgetProperty(this,void 0,this.set_selected),this.selected=this._selected,this.disposables(this.items.observe(({value:e})=>{this.inner_element.innerHTML="",this.inner_element.append(...e.map((e,i)=>o.el.div({text:t(e),data:{index:i.toString()}}))),this.hover_item()},{call_now:!0}),o.disposable_listener(document,"mousedown",this.document_mousedown,{capture:!0}),o.disposable_listener(document,"keydown",this.document_keydown)),this.finalize_construction(a.prototype)}hover_next(){this.visible.set_val(!0,{silent:!1}),this.hover_item(null!=this.hovered_index?(this.hovered_index+1)%this.items.val.length:0)}hover_prev(){this.visible.set_val(!0,{silent:!1}),this.hover_item(this.hovered_index?this.hovered_index-1:this.items.val.length-1)}select_hovered(){null!=this.hovered_index&&this.select_item(this.hovered_index)}set_visible(e){super.set_visible(e),this.visible.val!=e&&(this.hover_item(),this.inner_element.scrollTop=0)}set_selected(){}hover_item(e){this.hovered_element&&this.hovered_element.classList.remove("core_Menu_hovered"),null==e?(this.hovered_index=void 0,this.hovered_element=void 0):(this.hovered_element=this.inner_element.children.item(e),this.hovered_element&&(this.hovered_index=e,this.hovered_element.classList.add("core_Menu_hovered"),this.hovered_element.scrollIntoView({block:"nearest"})))}select_item(e){const t=this.items.val[e];void 0!==t&&(this.selected.set_val(t,{silent:!1}),this.visible.set_val(!1,{silent:!1}))}}t.Menu=a},LUot:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO");t.QuestEventModel=class{constructor(e,t,i,s,n){if(this._actions=o.list_property(),this.actions=this._actions,!Number.isInteger(e))throw new Error("id should be an integer.");if(!Number.isInteger(t))throw new Error("section_id should be an integer.");if(!Number.isInteger(i))throw new Error("wave should be an integer.");if(!Number.isInteger(s))throw new Error("delay should be an integer.");if(!Number.isInteger(n))throw new Error("unknown should be an integer.");this.id=e,this.section_id=t,this.wave=i,this.delay=s,this.unknown=n}add_action(e){this._actions.push(e)}}},LkpO:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i("HjM1");class r extends n.TabContainer{constructor(){super({class:"hunt_optimizer_HuntOptimizerView",tabs:[{title:"Optimize",key:"optimize",create_view:function(){return o(this,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("FNQV")))).OptimizerView)}))}},{title:"Methods",key:"methods",create_view:function(){return o(this,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("GN66")))).MethodsView)}))}},{title:"Help",key:"help",create_view:function(){return o(this,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("F0Xh")))).HelpView)}))}}]}),this.finalize_construction(r.prototype)}}t.HuntOptimizerView=r},"M/y3":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sequential=function(e){const t=[];return function(...i){const s=new Promise((e,o)=>t.push({args:i,resolve:e,reject:o}));return 1===t.length&&function(){o(this,void 0,void 0,(function*(){for(;t.length;){const{args:i,resolve:o,reject:s}=t[0];try{o(yield e(...i))}catch(e){s(e)}finally{t.shift()}}}))}(),s}}},NQMy:function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0});const s=i("HNnB");class n{window_msg(e){}message(e){}add_msg(e){}winend(){}mesend(){}list(e){}warning(e,t){}error(e,t){}}o([s.stub],n.prototype,"window_msg",null),o([s.stub],n.prototype,"message",null),o([s.stub],n.prototype,"add_msg",null),o([s.stub],n.prototype,"winend",null),o([s.stub],n.prototype,"mesend",null),o([s.stub],n.prototype,"list",null),o([s.stub],n.prototype,"warning",null),o([s.stub],n.prototype,"error",null),t.VMIOStub=n},NRxM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("9dYx");class s extends o.AbstractWritableCursor{constructor(e,t,i=0,o=e.byteLength-i){super(t,i),this._size=o,this.backing_buffer=e,this.dv=new DataView(e,0,e.byteLength)}get size(){return this._size}set size(e){if(e>this.backing_buffer.byteLength-this.offset)throw new Error(`Size ${e} is out of bounds.`);this._size=e}take(e){const t=this.offset+this.position,i=new s(this.backing_buffer,this.endianness,t,e);return this._position+=e,i}}t.ArrayBufferCursor=s},NUmZ:function(e,t,i){e.exports=function(){return new Worker(i.p+"95eadaf16dcf7c0ecb7e.worker.js")}},Ncr4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("sDu+"),s=i("FXpb");i("rlVZ"),i("x1yY");const n=i("LSoc"),r=i("4VsB");class a extends o.LabelledControl{constructor(e){super(e),this.element=s.el.span({class:"core_ComboBox core_Input"}),this.preferred_label_position="left",this.input_element=s.create_element("input"),this.to_label=e.to_label,this._selected=new r.WidgetProperty(this,void 0,this.set_selected),this.selected=this._selected,this.menu=this.disposable(new n.Menu(e.items,e.to_label,this.element)),this.menu.element.onmousedown=e=>e.preventDefault(),this.input_element.placeholder=e.placeholder_text||"",this.input_element.onmousedown=()=>{this.menu.visible.set_val(!0,{silent:!1})},this.input_element.onkeydown=e=>{switch(e.key){case"ArrowDown":e.preventDefault(),this.menu.hover_next();break;case"ArrowUp":e.preventDefault(),this.menu.hover_prev();break;case"Enter":this.menu.select_hovered()}};const t=e.filter;if(t){let e="";this.input_element.onkeyup=()=>{this.input_element.value!==e&&(e=this.input_element.value,t(e),(this.menu.visible.val||e)&&this.menu.hover_next())}}this.input_element.onblur=()=>{this.menu.visible.set_val(!1,{silent:!1})};const i=s.el.span({},s.icon(s.Icon.TriangleDown));this.bind_hidden(i,this.menu.visible);const o=s.el.span({},s.icon(s.Icon.TriangleUp));this.bind_hidden(o,this.menu.visible.map(e=>!e));const _=s.el.span({class:"core_ComboBox_button"},i,o);_.onmousedown=e=>{e.preventDefault(),this.menu.visible.set_val(!this.menu.visible.val,{silent:!1})},this.element.append(s.el.span({class:"core_ComboBox_inner core_Input_inner"},this.input_element,_),this.menu.element),this.disposables(this.menu.visible.observe(({value:e})=>{e&&this.menu.hover_next()}),this.menu.selected.observe(({value:e})=>{this.selected.set_val(e,{silent:!1}),this.input_element.focus()})),this.finalize_construction(a.prototype)}set_selected(e){this.input_element.value=e?this.to_label(e):"",this.menu.selected.val=e}}t.ComboBox=a},PE7g:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("0Xme");i("rY5A");class s extends o.Input{constructor(e=0,t={}){super(e,"core_NumberInput","number","core_NumberInput_inner",t),this.preferred_label_position="left";const{min:i,max:o,step:n}=t;this.set_attr("min",i,String),this.set_attr("max",o,String),this.input_element.step="any",this.set_attr("step",n,String),null!=t.round_to&&t.round_to>=0?this.rounding_factor=Math.pow(10,t.round_to):this.rounding_factor=1,this.element.style.width=`${null==t.width?54:t.width}px`,this.set_value(e),this.finalize_construction(s.prototype)}get_value(){return this.input_element.valueAsNumber}set_value(e){this.input_element.valueAsNumber=Math.round(this.rounding_factor*e)/this.rounding_factor}}t.NumberInput=s},"Q+PT":function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")).default.get("core/observable/SimpleEmitter");t.SimpleEmitter=class{constructor(){this.observers=[]}emit(e){for(const t of this.observers)try{t(e)}catch(e){s.error("Observer threw error.",e)}}observe(e){return this.observers.includes(e)||this.observers.push(e),{dispose:()=>{const t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)}}}}},Q4I3:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("8hIv"),n=i("lg9k"),r=i("ZPAt"),a=o(i("GGSb")).default.get("quest_editor/scripting/disassembly");function _(e,t){const i=[],o=Math.min(e.length,t.length);for(let s=0;s<o;s++)i.push(Object.assign(Object.assign({},t[s]),{type:e[s].type}));const s=e[e.length-1];if(s&&(s.type.kind===r.Kind.ILabelVar||s.type.kind===r.Kind.RegRefVar)){const e=t.length;for(let o=i.length;o<e;o++)i.push(Object.assign(Object.assign({},t[o]),{type:s.type}))}return i}function d(e,t,i){const o=[];for(let n=0;n<e.length;n++){const a=e[n].type,_=t[n];if(null!=_)if(_.type.kind===r.Kind.RegTupRef)o.push("r"+_.value);else switch(a.kind){case r.Kind.Float:i?o.push(s.reinterpret_i32_as_f32(_.value).toString()):o.push(_.value.toString());break;case r.Kind.ILabelVar:for(;n<t.length;n++)o.push(t[n].value.toString());break;case r.Kind.RegRefVar:for(;n<t.length;n++)o.push("r"+t[n].value);break;case r.Kind.RegRef:case r.Kind.RegTupRef:o.push("r"+_.value);break;case r.Kind.String:o.push(JSON.stringify(_.value));break;default:o.push(_.value.toString())}else o.push("")}return o}t.disassemble=function(e,t=!1){a.trace("disassemble start");const i=[],o=[];let s=void 0;for(const a of e){let e;switch(a.type){case n.SegmentType.Instructions:e=".code";break;case n.SegmentType.Data:e=".data";break;case n.SegmentType.String:e=".string"}s!==a.type&&(s=a.type,i.length&&i.push(""),i.push(e,""));for(const e of a.labels)i.push(`${e}:`);if(a.type===n.SegmentType.Data){const e=new Uint8Array(a.data);let t="    ";for(let o=0;o<e.length;o++)t+="0x"+e[o].toString(16).padStart(2,"0"),o%16==15?(i.push(t),t="    "):o<e.length-1&&(t+=" ");t.length>4&&i.push(t)}else if(a.type===n.SegmentType.String)i.push("    "+(l=a.value,JSON.stringify(l.replace(/<cr>/g,"\n"))));else{let e=!1;for(const s of a.instructions)if(s.opcode.code===r.OP_VA_START.code?e=!0:s.opcode.code===r.OP_VA_END.code&&(e=!1),t||e||s.opcode.stack!==r.StackInteraction.Push){let e=[];s.opcode.stack===r.StackInteraction.Pop?t||(e=d(s.opcode.params,o.splice(Math.max(0,o.length-s.opcode.params.length),s.opcode.params.length),!0)):e=d(s.opcode.params,_(s.opcode.params,s.args),!1),i.push("    "+s.opcode.mnemonic+(e.length?" "+e.join(", "):""))}else o.push(..._(s.opcode.params,s.args))}}var l;return i.length&&i.push(""),a.trace(`disassemble end, line count: ${i.length}`),i}},QLFx:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("lg9k"),s=i("ZPAt"),n=i("RLUm"),r=i("NQMy"),a=i("cC1J"),_=i("KCHA"),d=i("xs7i"),l=i("NRxM"),c=i("bcBH");t.REGISTER_COUNT=256;const u=4,p=16,h=4,v=8,f=11085568,O=1024,m=0,g="\n";var E;!function(e){e[e.Ok=0]="Ok",e[e.WaitingVsync=1]="WaitingVsync",e[e.Halted=2]="Halted",e[e.WaitingInput=3]="WaitingInput",e[e.WaitingSelection=4]="WaitingSelection"}(E=t.ExecutionResult||(t.ExecutionResult={}));class P extends l.ArrayBufferCursor{constructor(e,t){super(new ArrayBuffer(e),t)}zero(){new Uint32Array(this.backing_buffer).fill(0)}}t.VirtualMachine=class{constructor(e=new r.VMIOStub){this.io=e,this.registers=new P(t.REGISTER_COUNT*u,c.Endianness.Little),this.string_arg_store="",this.object_code=[],this.label_to_seg_idx=new Map,this.thread=[],this.thread_idx=0,this.window_msg_open=!1,this.set_episode_called=!1,this.list_open=!1,this.selection_reg=0,this._halted=!0,a.srand(a.GetTickCount())}load_quest(e){const t=_.convert_quest_from_model(e);this.load_object_code(t.object_code)}load_object_code(e){this.halt(),this.quest=void 0,this.registers.zero(),this.string_arg_store="",this.object_code=e,this.label_to_seg_idx.clear(),this.set_episode_called=!1,this.list_open=!1,this.selection_reg=0,this.cur_srcloc=void 0;let t=0;for(const e of this.object_code){for(const i of e.labels)this.label_to_seg_idx.set(i,t);t++}}start_thread(e){const t=this.get_segment_index_by_label(e),i=this.object_code[t];if(i.type!==o.SegmentType.Instructions)throw new Error(`Label ${e} points to a ${o.SegmentType[i.type]} segment, expecting ${o.SegmentType[o.SegmentType.Instructions]}.`);const s=new b(this.io,new w(t,-1),!0);this.thread.push(s),this._halted=!1}dispose_thread(e){this.thread.splice(e,1),0===this.thread.length&&this.halt()}update_source_location(e){const t=this.get_next_instruction_from_thread(e);t.asm&&t.asm.mnemonic?this.cur_srcloc=t.asm.mnemonic:this.cur_srcloc=void 0}advance(){if(this._halted)return;const e=this.thread[this.thread_idx];if(e.call_stack.length){const t=e.call_stack_top(),i=this.object_code[t.seg_idx];++t.inst_idx>=i.instructions.length&&(++t.seg_idx>=this.object_code.length?this.dispose_thread(this.thread_idx):t.inst_idx=0)}0===this.thread.length?this.halt():this.update_source_location(e)}get halted(){return this._halted}execute(e=!0){if(this._halted)return E.Halted;if(e&&this.advance(),this._halted)return E.Halted;try{const t=this.thread[this.thread_idx],i=this.get_next_instruction_from_thread(t);return this.execute_instruction(e,t,i,void 0)}catch(e){let t=e;return t instanceof Error||(t=new Error(String(t))),this.halt(),this.io.error(t,void 0),E.Halted}}execute_instruction(e,t,i,o){if(this.thread_idx>=this.thread.length)return E.WaitingVsync;let r=E.Ok;const _=i.args.map(e=>e.value),[l,c,u,p,h,v,P,w]=_,b=e=>[t,u,e,l,c];switch(this.list_open&&(this.list_open=!1),i.opcode.code){case s.OP_NOP.code:break;case s.OP_RET.code:this.pop_call_stack(this.thread_idx,t);break;case s.OP_SYNC.code:this.thread_idx++;break;case s.OP_EXIT.code:this.halt();break;case s.OP_THREAD.code:this.start_thread(l);break;case s.OP_LET.code:this.set_register_signed(l,this.get_register_signed(c));break;case s.OP_LETI.code:this.set_register_signed(l,c);break;case s.OP_LETB.code:this.set_register_byte(l,c);break;case s.OP_LETW.code:this.set_register_word(l,c);break;case s.OP_LETA.code:this.set_register_unsigned(l,this.get_register_address(l));break;case s.OP_FLET.code:this.set_register_float(l,this.get_register_float(c));break;case s.OP_FLETI.code:this.set_register_float(l,c);break;case s.OP_SET.code:this.set_register_signed(l,1);break;case s.OP_CLEAR.code:this.set_register_signed(l,0);break;case s.OP_REV.code:this.set_register_signed(l,0===this.get_register_signed(l)?1:0);break;case s.OP_CALL.code:this.push_call_stack(t,l);break;case s.OP_JMP.code:this.jump_to_label(t,l);break;case s.OP_ARG_PUSHR.code:t.push_arg(this.get_register_signed(l),s.Kind.DWord);break;case s.OP_ARG_PUSHL.code:t.push_arg(i.args[0].value,s.Kind.DWord);break;case s.OP_ARG_PUSHB.code:t.push_arg(i.args[0].value,s.Kind.Byte);break;case s.OP_ARG_PUSHW.code:t.push_arg(i.args[0].value,s.Kind.Word);break;case s.OP_ARG_PUSHA.code:t.push_arg(this.get_register_address(i.args[0].value),s.Kind.DWord);break;case s.OP_ARG_PUSHS.code:if("string"==typeof l){const e=this.parse_template_string(l);this.string_arg_store=e.slice(0,O/2),t.push_arg(f,s.Kind.String)}break;case s.OP_ADD.code:this.do_integer_op_with_register(l,c,n.numeric_ops.add);break;case s.OP_ADDI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.add);break;case s.OP_SUB.code:this.do_integer_op_with_register(l,c,n.numeric_ops.sub);break;case s.OP_SUBI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.sub);break;case s.OP_MUL.code:this.do_integer_op_with_register(l,c,n.numeric_ops.mul);break;case s.OP_MULI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.mul);break;case s.OP_DIV.code:this.do_integer_op_with_register(l,c,n.numeric_ops.idiv);break;case s.OP_DIVI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.idiv);break;case s.OP_MOD.code:this.do_integer_op_with_register(l,c,n.numeric_ops.mod);break;case s.OP_MODI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.mod);break;case s.OP_FADD.code:this.do_float_op_with_register(l,c,n.numeric_ops.add);break;case s.OP_FADDI.code:this.do_float_op_with_literal(l,Math.fround(c),n.numeric_ops.add);break;case s.OP_FSUB.code:this.do_float_op_with_register(l,c,n.numeric_ops.sub);break;case s.OP_FSUBI.code:this.do_float_op_with_literal(l,Math.fround(c),n.numeric_ops.sub);break;case s.OP_FMUL.code:this.do_float_op_with_register(l,c,n.numeric_ops.mul);break;case s.OP_FMULI.code:this.do_float_op_with_literal(l,Math.fround(c),n.numeric_ops.mul);break;case s.OP_FDIV.code:this.do_float_op_with_register(l,c,n.numeric_ops.div);break;case s.OP_FDIVI.code:this.do_float_op_with_literal(l,Math.fround(c),n.numeric_ops.div);break;case s.OP_AND.code:this.do_integer_op_with_register(l,c,n.numeric_ops.and);break;case s.OP_ANDI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.and);break;case s.OP_OR.code:this.do_integer_op_with_register(l,c,n.numeric_ops.or);break;case s.OP_ORI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.or);break;case s.OP_XOR.code:this.do_integer_op_with_register(l,c,n.numeric_ops.xor);break;case s.OP_XORI.code:this.do_integer_op_with_literal(l,c,n.numeric_ops.xor);break;case s.OP_SHIFT_LEFT.code:this.do_integer_op_with_register(l,c,n.numeric_ops.shl);break;case s.OP_SHIFT_RIGHT.code:this.do_integer_op_with_register(l,c,n.numeric_ops.shr);break;case s.OP_JMP_ON.code:this.conditional_jump(t,l,n.comparison_ops.eq,1,...n.rest(_).map(e=>this.get_register_signed(e)));break;case s.OP_JMP_OFF.code:this.conditional_jump(t,l,n.comparison_ops.eq,0,...n.rest(_).map(e=>this.get_register_signed(e)));break;case s.OP_JMP_E.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.eq));break;case s.OP_JMPI_E.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.eq));break;case s.OP_JMP_NE.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.neq));break;case s.OP_JMPI_NE.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.neq));break;case s.OP_UJMP_G.code:this.unsigned_conditional_jump_with_register(...b(n.comparison_ops.gt));break;case s.OP_UJMPI_G.code:this.unsigned_conditional_jump_with_literal(...b(n.comparison_ops.gt));break;case s.OP_JMP_G.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.gt));break;case s.OP_JMPI_G.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.gt));break;case s.OP_UJMP_L.code:this.unsigned_conditional_jump_with_register(...b(n.comparison_ops.lt));break;case s.OP_UJMPI_L.code:this.unsigned_conditional_jump_with_literal(...b(n.comparison_ops.lt));break;case s.OP_JMP_L.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.lt));break;case s.OP_JMPI_L.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.lt));break;case s.OP_UJMP_GE.code:this.unsigned_conditional_jump_with_register(...b(n.comparison_ops.gte));break;case s.OP_UJMPI_GE.code:this.unsigned_conditional_jump_with_literal(...b(n.comparison_ops.gte));break;case s.OP_JMP_GE.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.gte));break;case s.OP_JMPI_GE.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.gte));break;case s.OP_UJMP_LE.code:this.unsigned_conditional_jump_with_register(...b(n.comparison_ops.lte));break;case s.OP_UJMPI_LE.code:this.unsigned_conditional_jump_with_literal(...b(n.comparison_ops.lte));break;case s.OP_JMP_LE.code:this.signed_conditional_jump_with_register(...b(n.comparison_ops.lte));break;case s.OP_JMPI_LE.code:this.signed_conditional_jump_with_literal(...b(n.comparison_ops.lte));break;case s.OP_STACK_PUSH.code:this.push_variable_stack(t,l,1);break;case s.OP_STACK_POP.code:this.pop_variable_stack(t,l,1);break;case s.OP_STACK_PUSHM.code:this.push_variable_stack(t,l,c);break;case s.OP_STACK_POPM.code:this.pop_variable_stack(t,l,c);break;case s.OP_LIST.code:if(!this.window_msg_open){const e=t.fetch_args(i),o=this.deref_string(e[1]).split(g);r=E.WaitingSelection,this.list_open=!0,this.selection_reg=e[0],this.io.list(o)}break;case s.OP_WINDOW_MSG.code:if(!this.window_msg_open){const e=t.fetch_args(i),o=this.deref_string(e[0]);r=E.WaitingInput,this.window_msg_open=!0,this.io.window_msg(o)}break;case s.OP_ADD_MSG.code:if(this.window_msg_open){const e=t.fetch_args(i),o=this.deref_string(e[0]);r=E.WaitingInput,this.io.add_msg(o)}break;case s.OP_GETTIME.code:this.set_register_unsigned(l,Math.floor(Date.now()/1e3));break;case s.OP_WINEND.code:this.window_msg_open&&(this.window_msg_open=!1,this.io.winend());break;case s.OP_GET_RANDOM.code:{const e=this.get_register_signed(l),t=this.get_register_signed(l+1),i=a.rand();let o=Math.floor(Math.fround(i/32768)*t);e>=o&&(o=e),this.set_register_signed(c,o)}break;case s.OP_SET_EPISODE.code:if(this.set_episode_called){this.io.warning("Calling set_episode more than once is not supported.",o);break}if(this.set_episode_called=!0,!this.object_code[this.get_current_execution_location().seg_idx].labels.includes(m)){this.io.warning(`Calling set_episode outside of segment ${m} is not supported.`,o);break}if(!this.quest){this.missing_quest_data_warning(s.OP_SET_EPISODE.mnemonic,o);break}if(function(e){switch(e){case d.Episode.I:return 0;case d.Episode.II:return 1;case d.Episode.IV:return 2}}(this.quest.episode)!==l){this.io.warning("Calling set_episode with an argument that does notmatch the quest's designated episode is not supported.",o);break}break;default:this.io.warning(`Unsupported instruction: ${i.opcode.mnemonic}.`)}return this.thread_idx>=this.thread.length?E.WaitingVsync:r}vsync(){this.thread_idx>=this.thread.length&&(this.thread_idx=0)}halt(){this.cur_srcloc=void 0,this._halted=!0,this.window_msg_open=!1,this.thread=[],this.thread_idx=0}get_register_signed(e){return this.registers.i32_at(u*e)}set_register_signed(e,t){this.registers.write_i32_at(u*e,t)}get_register_unsigned(e){return this.registers.u32_at(u*e)}set_register_unsigned(e,t){this.registers.write_u32_at(u*e,t)}get_register_word(e){return this.registers.u16_at(u*e)}set_register_word(e,t){this.registers.write_u16_at(u*e,t)}get_register_byte(e){return this.registers.u8_at(u*e)}set_register_byte(e,t){this.registers.write_u8_at(u*e,t)}get_register_float(e){return this.registers.f32_at(u*e)}set_register_float(e,t){this.registers.write_f32_at(u*e,t)}do_integer_op_with_register(e,t,i){this.do_integer_op_with_literal(e,this.get_register_signed(t),i)}do_integer_op_with_literal(e,t,i){if((i===n.numeric_ops.div||i===n.numeric_ops.idiv)&&0===t)throw new Error("Division by zero");this.set_register_signed(e,i(this.get_register_signed(e),t))}do_float_op_with_register(e,t,i){this.do_float_op_with_literal(e,this.get_register_float(t),i)}do_float_op_with_literal(e,t,i){if((i===n.numeric_ops.div||i===n.numeric_ops.idiv)&&0===t)throw new Error("Division by zero");this.set_register_float(e,i(this.get_register_float(e),t))}push_call_stack(e,t){const i=this.get_segment_index_by_label(t),s=this.object_code[i];if(s.type!==o.SegmentType.Instructions)throw new Error(`Label ${t} points to a ${o.SegmentType[s.type]} segment, expecting ${o.SegmentType[o.SegmentType.Instructions]}.`);e.call_stack.push(new w(i,-1))}pop_call_stack(e,t){if(t.call_stack.pop(),t.call_stack.length>=1){const e=t.call_stack_top(),i=this.object_code[e.seg_idx];if(!i||i.type!==o.SegmentType.Instructions)throw new Error(`Invalid segment index ${e.seg_idx}.`)}else this.dispose_thread(e)}jump_to_label(e,t){const i=e.call_stack_top(),o=this.get_segment_index_by_label(t);i.seg_idx=o,i.inst_idx=-1}signed_conditional_jump_with_register(e,t,i,o,s){this.conditional_jump(e,t,i,this.get_register_signed(o),this.get_register_signed(s))}signed_conditional_jump_with_literal(e,t,i,o,s){this.conditional_jump(e,t,i,this.get_register_signed(o),s)}unsigned_conditional_jump_with_register(e,t,i,o,s){this.conditional_jump(e,t,i,this.get_register_unsigned(o),this.get_register_unsigned(s))}unsigned_conditional_jump_with_literal(e,t,i,o,s){this.conditional_jump(e,t,i,this.get_register_unsigned(o),s)}conditional_jump(e,t,i,...o){const s=n.andsecond.bind(null,i);void 0!==n.andreduce(s,o)&&this.jump_to_label(e,t)}push_variable_stack(e,i,o){const s=i+o;if(s>t.REGISTER_COUNT)throw new Error("Variable stack: Invalid register");if(e.variable_stack.length+o>p)throw new Error("Variable stack: Stack overflow");for(let t=i;t<s;t++)e.variable_stack.push(this.get_register_unsigned(t))}pop_variable_stack(e,i,o){const s=i+o;if(s>t.REGISTER_COUNT)throw new Error("Variable stack: Invalid register");if(e.variable_stack.length<o)throw new Error("Variable stack: Stack underflow");for(let t=s-1;t>=i;t--)this.set_register_unsigned(t,e.variable_stack.pop())}get_next_instruction_from_thread(e){if(e.call_stack.length){const t=e.call_stack_top(),i=this.object_code[t.seg_idx];if(!i||i.type!==o.SegmentType.Instructions)throw new Error(`Invalid segment index ${t.seg_idx}.`);const s=i.instructions[t.inst_idx];if(!s)throw new Error(`Invalid instruction index ${t.inst_idx} for segment ${t.seg_idx}.`);return s}throw new Error("Call stack is empty.")}get_register_address(e){return e*u}deref_string(e){if(e===f)return this.string_arg_store;if(e>0&&e<t.REGISTER_COUNT*u)return this.registers.string_utf16_at(e,t.REGISTER_COUNT*u,!0);throw new Error(`Failed to dereference string: Invalid address ${e}`)}get_current_execution_location(){return this.thread[this.thread_idx].call_stack_top()}missing_quest_data_warning(e,t){this.io.warning(`Opcode execution failed because the VM was missing quest data: ${e}`,t)}list_select(e){if(!this.list_open)throw new Error("list_select may not be called if there is no list open");this.set_register_unsigned(this.selection_reg,e)}parse_template_string(e){const t={"hero name":"PLACEHOLDER","hero job":"PLACEHOLDER","name hero":"PLACEHOLDER","name job":"PLACEHOLDER",time:"01:12","award item":"PLACEHOLDER","challenge title":"PLACEHOLDER",pl_name:"PLACEHOLDER",pl_job:"PLACEHOLDER",last_word:"PLACEHOLDER",last_chat:"PLACEHOLDER",team_name:"PLACEHOLDER",meseta_slot_prize:"PLACEHOLDER"},i=[[/^color ([0-9]+)$/,e=>`<color ${e}>`],[/^r([0-9]{1,3})$/,e=>{const t=parseInt(e);return isNaN(t)?"":this.get_register_unsigned(t).toString()}],[/^f([0-9]{1,3})$/,e=>{const t=parseInt(e);return isNaN(t)?"":this.get_register_float(t).toFixed(6)}]];let o=!1,s=-1,n=0,r=e.length;for(;n<r;){const a=e[n];if(o&&">"===a){o=!1;const a=n,_=e.slice(s+1,a);let d=void 0;for(const[e,t]of i){const i=e.exec(_);if(i&&void 0!==i[1]){d=t(i[1]);break}}if(void 0===d&&(d=t[_]),void 0===d)d="";else if("function"==typeof d){const e=d();t[_]=e,d=e}e=e.slice(0,s)+d+e.slice(a+1);const l=d.length-(_.length+2);n+=l,r+=l}else"<"===a&&(o=!0,s=n);n++}return o&&(e=e.slice(0,s)),e}get_current_source_location(){return this.cur_srcloc}get_segment_index_by_label(e){if(!this.label_to_seg_idx.has(e))throw new Error(`Invalid argument: No such label ${e}.`);return this.label_to_seg_idx.get(e)}};class w{constructor(e,t){this.seg_idx=e,this.inst_idx=t}}t.ExecutionLocation=w;class b{constructor(e,t,i){this.io=e,this.call_stack=[],this.arg_stack=new P(v*h,c.Endianness.Little),this.arg_stack_counter=0,this.arg_stack_types=Array(v).fill(s.Kind.Any),this.variable_stack=[],this.call_stack=[t],this.global=i}call_stack_top(){return this.call_stack[this.call_stack.length-1]}push_arg(e,t){if(this.arg_stack_counter>=v)throw new Error("Argument stack: Stack overflow");this.arg_stack.write_u32_at(this.arg_stack_counter*h,e),this.arg_stack_types[this.arg_stack_counter]=t,this.arg_stack_counter++}fetch_args(e){const t=[],i=e.asm&&e.asm.mnemonic;e.opcode.params.length!==this.arg_stack_counter&&this.io.warning("Argument stack: Argument count mismatch",i);for(let o=0;o<e.opcode.params.length;o++){const n=e.opcode.params[o];n.type.kind!==this.arg_stack_types[o]&&this.io.warning("Argument stack: Argument type mismatch",i);const r=o*h;switch(n.type.kind){case s.Kind.Byte:t.push(this.arg_stack.u8_at(r));break;case s.Kind.Word:t.push(this.arg_stack.u16_at(r));break;case s.Kind.DWord:case s.Kind.String:t.push(this.arg_stack.u32_at(r));break;case s.Kind.RegTupRef:n.type.register_tuples.length>0&&t.push(this.arg_stack.u8_at(r));break;default:throw new Error(`Argument stack: Unhandled param kind: Kind.${s.Kind[n.type.kind]}`)}}return this.arg_stack_counter=0,t}}},QmPX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid");class s extends o.Widget{}t.Control=s},RLUm:function(e,t,i){"use strict";function o(e,t,i){let o=t;for(const t of i){const i=e(o,t);if(void 0===i)return;o=i}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.numeric_ops={add:(e,t)=>e+t,sub:(e,t)=>e-t,mul:(e,t)=>e*t,div:(e,t)=>e/t,idiv:(e,t)=>Math.floor(e/t),mod:(e,t)=>e%t,and:(e,t)=>e&t,or:(e,t)=>e|t,xor:(e,t)=>e^t,shl:(e,t)=>e<<t,shr:(e,t)=>e>>>t},t.comparison_ops={eq:(e,t)=>e===t,neq:(e,t)=>e!==t,gt:(e,t)=>e>t,lt:(e,t)=>e<t,gte:(e,t)=>e>=t,lte:(e,t)=>e<=t},t.andfold=o,t.andreduce=function(e,t){return o(e,t[0],t.slice(1))},t.andsecond=function(e,t,i){if(e(t,i))return i},t.rest=function(e){return e.slice(1)},t.ranges_overlap=function(e,t){return e[0]<=t[1]&&t[0]<=e[1]}},RMZt:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("yfUv"),n=i("ExVU"),r="HuntMethodStore.methodUserTimes";class a extends s.Persister{persist_method_user_times(e,t){const i={};for(const t of e)null!=t.user_time.val&&(i[t.id]=t.user_time.val.as("hours"));this.persist_for_server(t,r,i)}load_method_user_times(e,t){return o(this,void 0,void 0,(function*(){const i=yield this.load_for_server(t,r);if(i)for(const t of e){const e=i[t.id];t.set_user_time(null==e?void 0:n.Duration.fromObject({hours:e}))}}))}}t.hunt_method_persister=new a},S6Bx:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("wsa1"),n=i("JCZi"),r=i("Tpfs"),a=i("L/3r"),_=i("c5EP"),d=i("hVaW"),l=i("ouMO"),c=new n.AssemblyAnalyser;s.languages.register({id:"psoasm"}),s.languages.setMonarchTokensProvider("psoasm",d.ASM_SYNTAX),s.languages.registerCompletionItemProvider("psoasm",{provideCompletionItems(e,t){const i=e.getValueInRange({startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:1,endColumn:t.column});return c.provide_completion_items(i)}}),s.languages.registerSignatureHelpProvider("psoasm",{signatureHelpTriggerCharacters:[" ",","],signatureHelpRetriggerCharacters:[", "],provideSignatureHelp(e,t){return o(this,void 0,void 0,(function*(){const i=yield c.provide_signature_help(e.uri,t.lineNumber,t.column);return i&&{value:i,dispose(){}}}))}}),s.languages.setLanguageConfiguration("psoasm",{indentationRules:{increaseIndentPattern:/^\s*\d+:/,decreaseIndentPattern:/^\s*(\d+|\.)/},autoClosingPairs:[{open:'"',close:'"'}],surroundingPairs:[{open:'"',close:'"'}],comments:{lineComment:"//"}}),s.languages.registerDefinitionProvider("psoasm",{provideDefinition:(e,t)=>c.provide_definition(e.uri,t.lineNumber,t.column)});class u{constructor(){this.disposer=new r.Disposer,this.model_disposer=this.disposer.add(new r.Disposer),this._model=l.property(void 0),this._did_undo=l.emitter(),this._did_redo=l.emitter(),this._inline_args_mode=l.property(!0),this._breakpoints=l.list_property(),this._execution_location=l.property(void 0),this.model=this._model,this.did_undo=this._did_undo,this.did_redo=this._did_redo,this.undo=new a.SimpleUndo("Text edits",()=>this._did_undo.emit({value:"asm undo"}),()=>this._did_redo.emit({value:"asm undo"})),this.inline_args_mode=this._inline_args_mode,this.has_issues=c.issues.map(e=>e.warnings.length+e.errors.length>0),this.breakpoints=this._breakpoints,this.execution_location=this._execution_location,this.set_inline_args_mode=e=>{this.has_issues.val||(this._inline_args_mode.val=e,c.update_settings({manual_stack:!this.inline_args_mode.val}),this.update_model())},this.quest_changed=()=>{this.update_model()},this.disposer.add_all(_.quest_editor_store.current_quest.observe(this.quest_changed,{call_now:!0}),c.issues.observe(({value:e})=>this.update_model_markers(e),{call_now:!0}))}dispose(){this.disposer.dispose()}setup_editor_model_features(e){const t=e.getAlternativeVersionId();let i=t,o=t;this.model_disposer.add(e.onDidChangeContent(s=>{const n=e.getAlternativeVersionId();n<i?(this.undo.can_redo.val=!0,n===t&&(this.undo.can_undo.val=!1)):(n<=o?n===o&&(this.undo.can_redo.val=!1):(this.undo.can_redo.val=!1,i>o&&(o=i)),this.undo.can_undo.val=!0),i=n,c.update_assembly(s.changes);for(const e of s.changes)if(""===e.text){const t=e.range.endLineNumber-e.range.startLineNumber;if(t>0){for(let i=e.range.startLineNumber+1;i<=e.range.endLineNumber;i++){const e=Math.max(i-t,1),o=this._breakpoints.val.indexOf(i);o>-1&&!this._breakpoints.val.includes(e)&&this._breakpoints.splice(o,1,e)}for(let i=0;i<this._breakpoints.val.length;i++)this._breakpoints.val[i]>e.range.endLineNumber&&this._breakpoints.splice(i,1,this._breakpoints.val[i]-t)}}else{const t=e.text.split("\n").length-1;if(t>0)for(let i=0;i<this.breakpoints.val.length;i++)this._breakpoints.val[i]>e.range.endLineNumber&&this._breakpoints.splice(i,1,this._breakpoints.val[i]+t)}}))}update_model_markers({warnings:e,errors:t}){const i=this.model.val;i&&s.editor.setModelMarkers(i,"psoasm",e.map(e=>({severity:s.MarkerSeverity.Hint,message:e.message,startLineNumber:e.line_no,endLineNumber:e.line_no,startColumn:e.col,endColumn:e.col+e.length,tags:[s.MarkerTag.Unnecessary]})).concat(t.map(e=>({severity:s.MarkerSeverity.Error,message:e.message,startLineNumber:e.line_no,endLineNumber:e.line_no,startColumn:e.col,endColumn:e.col+e.length}))))}update_model(){this.undo.reset(),this.model_disposer.dispose_all();const e=_.quest_editor_store.current_quest.val;if(e){const t=!this.inline_args_mode.val,i=c.disassemble(e,t),o=this.model_disposer.add(s.editor.createModel(i.join("\n"),"psoasm"));this.setup_editor_model_features(o),this._model.val=o}else this._model.val=void 0}toggle_breakpoint(e){const t=this._breakpoints.val.indexOf(e);-1===t?this._breakpoints.push(e):this._breakpoints.splice(t,1)}clear_breakpoints(){this._breakpoints.splice(0)}set_execution_location(e){this._execution_location.val=e}unset_execution_location(){this._execution_location.val=void 0}}t.AsmEditorStore=u,t.asm_editor_store=new u},"Sa3/":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.read_file=function(e){return o(this,void 0,void 0,(function*(){return new Promise((t,i)=>{const o=new FileReader;o.addEventListener("loadend",()=>{o.result instanceof ArrayBuffer?t(o.result):i(new Error("Couldn't read file."))}),o.readAsArrayBuffer(e)})}))}},SoCI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("xs7i");t.get_areas_for_episode=function(e){return s[e]},t.get_area_variant=function(e,t,i){const o=s[e].find(e=>e.id===t);if(!o)throw new Error(`No area with id ${t}.`);const n=o.area_variants[i];if(!n)throw new Error(`No area variant with id ${i}.`);return n};const s=[];function n(e,t,i,o){const s={id:e,name:t,order:i,area_variants:[]};for(let e=0;e<o;e++)s.area_variants.push(Object.freeze({id:e,area:s}));return Object.freeze(s)}let r=0;s[o.Episode.I]=[n(0,"Pioneer II",r++,1),n(1,"Forest 1",r++,1),n(2,"Forest 2",r++,1),n(11,"Under the Dome",r++,1),n(3,"Cave 1",r++,6),n(4,"Cave 2",r++,5),n(5,"Cave 3",r++,6),n(12,"Underground Channel",r++,1),n(6,"Mine 1",r++,6),n(7,"Mine 2",r++,6),n(13,"Monitor Room",r++,1),n(8,"Ruins 1",r++,5),n(9,"Ruins 2",r++,5),n(10,"Ruins 3",r++,5),n(14,"Dark Falz",r++,1)],r=0,s[o.Episode.II]=[n(0,"Lab",r++,1),n(1,"VR Temple Alpha",r++,3),n(2,"VR Temple Beta",r++,3),n(14,"VR Temple Final",r++,1),n(3,"VR Spaceship Alpha",r++,3),n(4,"VR Spaceship Beta",r++,3),n(15,"VR Spaceship Final",r++,1),n(5,"Central Control Area",r++,1),n(6,"Jungle Area East",r++,1),n(7,"Jungle Area North",r++,1),n(8,"Mountain Area",r++,3),n(9,"Seaside Area",r++,1),n(12,"Cliffs of Gal Da Val",r++,1),n(10,"Seabed Upper Levels",r++,3),n(11,"Seabed Lower Levels",r++,3),n(13,"Test Subject Disposal Area",r++,1),n(16,"Seaside Area at Night",r++,2),n(17,"Control Tower",r++,5)],r=0,s[o.Episode.IV]=[n(0,"Pioneer II (Ep. IV)",r++,1),n(1,"Crater Route 1",r++,1),n(2,"Crater Route 2",r++,1),n(3,"Crater Route 3",r++,1),n(4,"Crater Route 4",r++,1),n(5,"Crater Interior",r++,1),n(6,"Subterranean Desert 1",r++,3),n(7,"Subterranean Desert 2",r++,3),n(8,"Subterranean Desert 3",r++,3),n(9,"Meteor Impact Site",r++,1)],Object.freeze(s)},TP44:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("c5EP"),s=i("AAJ5");i("LxXb");class n extends s.MessageLog{constructor(){super(o.quest_editor_store,"quest_editor_QuestMessageLogView")}}t.QuestMessageLogView=n},TRid:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("Tpfs"),n=i("FXpb"),r=i("4VsB"),a=o(i("GGSb")).default.get("core/gui/Widget");t.Widget=class{constructor(e){this.disposed=!1,this.disposer=new s.Disposer,this._visible=new r.WidgetProperty(this,!0,this.set_visible),this._enabled=new r.WidgetProperty(this,!0,this.set_enabled),this._tooltip=new r.WidgetProperty(this,"",this.set_tooltip),this.construction_finalized=!1,this.visible=this._visible,this.enabled=this._enabled,this.tooltip=this._tooltip,this.options=e||{},setTimeout(()=>{this.construction_finalized||a.warn(`finalize_construction is never called for ${Object.getPrototypeOf(this).constructor.name}.`)},0)}get id(){return this.element.id}set id(e){this.element.id=e}focus(){this.element.focus()}dispose(){this.element.remove(),this.disposer.dispose(),this.disposed=!0}finalize_construction(e){Object.getPrototypeOf(this)===e&&(this.options.class&&this.element.classList.add(this.options.class),"boolean"==typeof this.options.enabled?this.enabled.val=this.options.enabled:this.options.enabled&&this.enabled.bind_to(this.options.enabled),"string"==typeof this.options.tooltip?this.tooltip.val=this.options.tooltip:this.options.tooltip&&this.tooltip.bind_to(this.options.tooltip),this.construction_finalized=!0)}set_visible(e){this.element.hidden=!e}set_enabled(e){e?this.element.classList.remove("disabled"):this.element.classList.add("disabled")}set_tooltip(e){this.element.title=e}bind_hidden(e,t){this.disposable(n.bind_hidden(e,t))}disposable(e){return this.disposer.add(e)}disposables(...e){this.disposer.add_all(...e)}}},Tpfs:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("GGSb").get("core/observable/Disposer");t.Disposer=class{constructor(...e){this._disposed=!1,this.disposables=e}get length(){return this.disposables.length}get disposed(){return this._disposed}add(e){return this._disposed||this.disposables.push(e),e}insert(e,t){return this._disposed||this.disposables.splice(e,0,t),t}add_all(...e){return this._disposed||this.disposables.push(...e),this}dispose_all(){this.dispose_at(0,this.disposables.length)}dispose(){this.dispose_all(),this._disposed=!0}dispose_at(e,t=1){for(const i of this.disposables.splice(e,t))try{i.dispose()}catch(e){o.warn("Error while disposing.",e)}}}},"Ts/k":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("n5fr");t.NOOP_UNDO={can_redo:o.property(!1),can_undo:o.property(!1),first_redo:o.property(void 0),first_undo:o.property(void 0),ensure_not_current(){},make_current(){s.undo_manager.current.val=this},redo:()=>!1,reset(){},undo:()=>!1}},U210:function(e,t,i){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=i("QLFx"),n=i("lg9k"),r=i("c5EP"),a=i("wtpc"),_=i("ZPAt"),d=i("ouMO");let l,c;function u(e){return`[${e.line_no}:${e.col}]`}t.QuestRunner=class{constructor(){this.stepping_breakpoints=[],this.break_on_next=!1,this._running=d.property(!1),this._paused=d.property(!1),this.running=this._running,this.paused=this._paused,this.executed_since_advance=!0,this.execution_counter=0,this.execution_max_count=1e5,this.execution_loop=()=>{var e,t,i;let o;this._paused.val=!1;e:for(;;){if(this.executed_since_advance){if(this.vm.advance(),this.executed_since_advance=!1,this.vm.halted){this.stop();break e}const i=this.vm.get_current_source_location();if(i){const o=this.break_on_next||(null===(e=l)||void 0===e?void 0:e.breakpoints.val.includes(i.line_no))||this.stepping_breakpoints.includes(i.line_no);if(this.break_on_next=!1,o){this.stepping_breakpoints.length=0,null===(t=l)||void 0===t||t.set_execution_location(i.line_no);break e}}}if(o=this.vm.execute(!1),this.executed_since_advance=!0,++this.execution_counter>=this.execution_max_count){this.stop(),null===(i=c)||void 0===i||i.error("Terminated: Maximum execution count reached.");break e}switch(o){case s.ExecutionResult.WaitingVsync:this.vm.vsync(),this.schedule_frame();break e;case s.ExecutionResult.WaitingInput:this.schedule_frame();break e;case s.ExecutionResult.WaitingSelection:this.vm.list_select(0),this.schedule_frame();break e;case s.ExecutionResult.Halted:this.stop();break e}}this._paused.val=!0,this.execution_counter=0},this.create_vm_io=()=>({window_msg:e=>{var t;null===(t=c)||void 0===t||t.info(`window_msg "${e}"`)},message:e=>{var t;null===(t=c)||void 0===t||t.info(`message "${e}"`)},add_msg:e=>{var t;null===(t=c)||void 0===t||t.info(`add_msg "${e}"`)},winend:()=>{},mesend:()=>{},list:e=>{var t;null===(t=c)||void 0===t||t.info(`list "[${e}]"`)},warning:(e,t)=>{var i;null===(i=c)||void 0===i||i.warning(e,t&&u(t))},error:(e,t)=>{var i;null===(i=c)||void 0===i||i.error(e,t&&u(t))}}),this.vm=new s.VirtualMachine(this.create_vm_io())}run(e){void 0===c&&(c=r.quest_editor_store.get_logger("quest_editor/QuestRunner")),void 0===l&&Promise.resolve().then(()=>o(i("S6Bx"))).then(e=>{l=e.asm_editor_store}),null!=this.animation_frame&&cancelAnimationFrame(this.animation_frame),this.quest=e,this.vm.load_object_code(e.object_code),this.vm.start_thread(0),this._running.val=!0,this._paused.val=!1,this.executed_since_advance=!0,this.execution_counter=0,this.schedule_frame()}resume(){this.schedule_frame()}step_over(){const e=this.vm.get_current_execution_location(),t=this.get_instruction_segment_by_index(e.seg_idx).instructions[e.inst_idx];if(void 0===this.get_step_innable_instruction_label_argument(t))this.break_on_next=!0;else{const t=this.get_next_source_location(e);t&&this.stepping_breakpoints.push(t.line_no)}this.schedule_frame()}step_in(){const e=this.vm.get_current_execution_location(),t=this.get_instruction_segment_by_index(e.seg_idx).instructions[e.inst_idx],i=this.get_step_innable_instruction_label_argument(t);if(void 0===i)this.step_over();else{const e=this.get_instruction_segment_by_label(i).instructions[0],t=this.get_source_location(e);t&&this.stepping_breakpoints.push(t.line_no),this.schedule_frame()}}step_out(){}stop(){var e;this.vm.halt(),this._running.val=!1,this._paused.val=!1,null===(e=l)||void 0===e||e.unset_execution_location()}schedule_frame(){this.animation_frame=requestAnimationFrame(this.execution_loop)}get_instruction_segment_by_index(e){a.defined(this.quest);const t=this.quest.object_code[e];return a.assert(t.type===n.SegmentType.Instructions,`Expected segment ${e} to be of type ${n.SegmentType[n.SegmentType.Instructions]}, but was ${n.SegmentType[t.type]}.`),t}get_instruction_segment_by_label(e){const t=this.vm.get_segment_index_by_label(e);return this.get_instruction_segment_by_index(t)}get_step_innable_instruction_label_argument(e){switch(e.opcode.code){case _.OP_VA_CALL.code:case _.OP_CALL.code:return e.args[0].value;case _.OP_SWITCH_CALL.code:return e.args[1].value}}is_arg_push_opcode(e){switch(e.opcode.code){case _.OP_ARG_PUSHB.code:case _.OP_ARG_PUSHL.code:case _.OP_ARG_PUSHR.code:case _.OP_ARG_PUSHW.code:case _.OP_ARG_PUSHA.code:case _.OP_ARG_PUSHS.code:return!0}return!1}get_source_location(e){var t,i,o;let s=null===(t=e.asm)||void 0===t?void 0:t.mnemonic;return(null===(i=l)||void 0===i?void 0:i.inline_args_mode.val)&&this.is_arg_push_opcode(e)&&(s=null===(o=e.asm)||void 0===o?void 0:o.args[0]),s}get_next_source_location(e){a.defined(this.quest);const t=new s.ExecutionLocation(e.seg_idx,e.inst_idx),i=this.quest.object_code[t.seg_idx];if(i.type!==n.SegmentType.Instructions)return;if(++t.inst_idx>=i.instructions.length&&(t.seg_idx++,t.inst_idx=0),t.seg_idx>=this.quest.object_code.length)return;const o=i.instructions[t.inst_idx];return this.get_source_location(o)}}},VRtl:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("w6HN"),s=i("6cU9"),n=i("oyid"),r=i("PE7g"),a=i("7CyS"),_=i("tyuj"),d=i("7ZX1"),l=i("FXpb");class c extends o.ToolBar{constructor(){const e=new s.FileButton("Open file...",{icon_left:l.Icon.File,accept:".nj, .njm, .xj, .xvm"}),t=new n.CheckBox(!1,{label:"Show skeleton"}),i=new n.CheckBox(!0,{label:"Play animation"}),o=new r.NumberInput(a.PSO_FRAME_RATE,{label:"Frame rate:",min:1,max:240,step:1}),u=new r.NumberInput(1,{label:"Frame:",min:1,max:_.model_store.animation_frame_count,step:1}),p=new d.Label(_.model_store.animation_frame_count.map(e=>`/ ${e}`));super({children:[e,t,i,o,u,p]}),this.disposables(e.files.observe(({value:e})=>{e.length&&_.model_store.load_file(e[0])}),t.checked.observe(({value:e})=>_.model_store.set_show_skeleton(e)));const h=_.model_store.current_nj_motion.map(e=>null!=e);this.disposables(i.enabled.bind_to(h),i.checked.bind_to(_.model_store.animation_playing),i.checked.observe(({value:e})=>_.model_store.set_animation_playing(e)),o.enabled.bind_to(h),o.value.observe(({value:e})=>_.model_store.set_animation_frame_rate(e)),u.enabled.bind_to(h),u.value.bind_to(_.model_store.animation_frame.map(e=>Math.round(e))),u.value.observe(({value:e})=>_.model_store.set_animation_frame(e)),p.enabled.bind_to(h)),this.finalize_construction(c.prototype)}}t.Model3DToolBar=c},VlMR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO");t.QuestEventDagModel=class{constructor(e,t,i,s){if(!Number.isInteger(e))throw new Error("area_id should be an integer.");if(!Array.isArray(t))throw new Error("events should be an array.");if(!Array.isArray(i))throw new Error("root_events should be an array.");if(!s)throw new Error("meta is required.");this.area_id=e,this.events=t,this._root_events=o.list_property(void 0,...i),this.root_events=this._root_events,this.meta=s}get_children(e){const t=this.meta.get(e);return t?t.children:[]}}},VwSi:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("kwt4"),s=1296321870;var n;function r(e,t){let i=e.u32();const o=e.u32(),s=e.u16(),r=e.u16(),d=(192&r)>>6,l=15&r,c=[];for(let r=0;r<t;r++){e.seek_start(i),i=i+=8*l;const t={tracks:[]};c.push(t);const r=[],d=[];for(let t=0;t<l;t++)r.push(e.u32());for(let t=0;t<l;t++){const t=e.u32();d.push(t)}if(1&s){e.seek_start(r.shift());const i=d.shift();i&&t.tracks.push({type:n.Position,keyframes:a(e,i)})}if(2&s){e.seek_start(r.shift());const i=d.shift();i&&t.tracks.push({type:n.Rotation,keyframes:_(e,i,o)})}if(4&s){e.seek_start(r.shift());const i=d.shift();i&&t.tracks.push({type:n.Scale,keyframes:a(e,i)})}}return{motion_data:c,frame_count:o,type:s,interpolation:d,element_count:l}}function a(e,t){const i=[];for(let o=0;o<t;++o)i.push({frame:e.u32(),value:e.vec3_f32()});return i}function _(e,t,i){const s=[],n=e.position;for(let i=0;i<t;++i)s.push({frame:e.u16(),value:{x:e.u16()*o.ANGLE_TO_RAD,y:e.u16()*o.ANGLE_TO_RAD,z:e.u16()*o.ANGLE_TO_RAD}});let r=-1;for(const{frame:o}of s){if(o<r||o>=i)return e.seek_start(n),d(e,t);r=o}return s}function d(e,t){const i=[];for(let s=0;s<t;++s)i.push({frame:e.u32(),value:{x:e.i32()*o.ANGLE_TO_RAD,y:e.i32()*o.ANGLE_TO_RAD,z:e.i32()*o.ANGLE_TO_RAD}});return i}!function(e){e[e.Linear=0]="Linear",e[e.Spline=1]="Spline",e[e.UserFunction=2]="UserFunction"}(t.NjInterpolation||(t.NjInterpolation={})),function(e){e[e.Position=0]="Position",e[e.Rotation=1]="Rotation",e[e.Scale=2]="Scale"}(n=t.NjKeyframeTrackType||(t.NjKeyframeTrackType={})),t.parse_njm=function(e,t){return e.u32()===s?function(e,t){const i=e.u32();return r(e.take(i),t)}(e,t):(e.seek_start(0),function(e,t){e.seek_end(16);const i=e.u32();e.seek_start(i);const o=e.u32();return e.seek_start(o),function(e,t){e.seek(4);const i=e.u32();return e.seek_start(i),r(e,t)}(e,t)}(e,t))}},W7aE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("KUR2"),r=i("YkZX"),a=i("4SjJ"),_=i("c5EP");class d extends o.ResizableWidget{constructor(){super(),this.element=s.el.div({class:"quest_editor_QuestRendererView",tab_index:-1}),this.renderer_view=this.disposable(new n.RendererWidget(new r.QuestRenderer)),this.element.append(this.renderer_view.element),this.element.addEventListener("focus",()=>_.quest_editor_store.undo.make_current(),!0),this.renderer_view.start_rendering(),this.disposables(a.gui_store.tool.observe(({value:e})=>{e===a.GuiTool.QuestEditor?this.renderer_view.start_rendering():this.renderer_view.stop_rendering()})),this.finalize_construction(d.prototype)}resize(e,t){return super.resize(e,t),this.renderer_view.resize(e,t),this}}t.QuestRendererView=d},WJtm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb"),n=i("yar8"),r=i("sMN3"),a=i("ouMO"),_=i("nsCy"),d=i("xs7i");i("a0xr");const l=i("ExVU");class c extends o.Widget{constructor(){super(),this.element=s.el.div({class:"hunt_optimizer_OptimizationResultView"},s.el.h2({text:"Ideal Combination of Methods"})),this.disposable(r.hunt_optimizer_stores.observe_current(e=>{this.results_observer&&this.results_observer.dispose(),this.results_observer=e.result.observe(({value:e})=>this.update_table(e),{call_now:!0})},{call_now:!0})),this.finalize_construction(c.prototype)}dispose(){super.dispose(),this.results_observer&&this.results_observer.dispose(),this.table&&this.table.dispose()}update_table(e){this.table&&this.table.dispose();let t=0,i=l.Duration.fromMillis(0);if(e)for(const o of e.optimal_methods)t+=o.runs,i=i.plus(o.total_time);const o=[{title:"Difficulty",fixed:!0,width:80,render_cell:e=>_.Difficulty[e.difficulty],footer:{render_cell:()=>"Totals:"}},{title:"Method",fixed:!0,width:250,render_cell:e=>e.method_name},{title:"Ep.",fixed:!0,width:40,render_cell:e=>d.Episode[e.method_episode]},{title:"Section ID",fixed:!0,width:90,render_cell(e){const t=s.el.span({},...e.section_ids.map(e=>s.section_id_icon(e,{size:17})));return t.style.display="flex",t}},{title:"Time/Run",width:90,text_align:"center",render_cell:e=>e.method_time.toFormat("hh:mm")},{title:"Runs",width:60,text_align:"right",render_cell:e=>e.runs.toFixed(1),tooltip:e=>e.runs.toString(),footer:{render_cell:()=>t.toFixed(1),tooltip:()=>t.toString()}},{title:"Total Hours",width:60,text_align:"right",render_cell:e=>e.total_time.as("hours").toFixed(1),tooltip:e=>e.total_time.as("hours").toString(),footer:{render_cell:()=>i.as("hours").toFixed(1),tooltip:()=>i.as("hours").toString()}}];if(e)for(const t of e.wanted_items){let i=0;for(const o of e.optimal_methods)i+=o.item_counts.get(t)||0;o.push({title:t.name,width:80,text_align:"right",render_cell(e){const i=e.item_counts.get(t);return i?i.toFixed(2):""},tooltip(e){const i=e.item_counts.get(t);return i?i.toString():""},footer:{render_cell:()=>i.toFixed(2),tooltip:()=>i.toString()}})}this.table=new n.Table({class:"hunt_optimizer_OptimizationResultView_table",values:e?a.list_property(void 0,...e.optimal_methods):a.list_property(),columns:o}),this.element.append(this.table.element)}}t.OptimizationResultView=c},X3DM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yQqj"),s=i("c5EP");t.RemoveEntityAction=class{constructor(e){this.entity=e,this.description=`Delete ${o.entity_data(e.type).name}`}undo(){const e=s.quest_editor_store.current_quest.val;e&&(e.add_entity(this.entity),s.quest_editor_store.set_selected_entity(this.entity))}redo(){const e=s.quest_editor_store.current_quest.val;e&&e.remove_entity(this.entity)}}},XDYw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("4mUz");t.parse_area_collision_geometry=function(e){const{data_offset:t}=o.parse_rel(e,!1);e.seek_start(t);const i=e.u32();e.seek_start(i);const s={meshes:[]};for(;e.bytes_left;){const t=e.position,i=e.u32();if(0===i)break;const o={vertices:[],triangles:[]};s.meshes.push(o),e.seek_start(i);const n=e.u32(),r=e.u32(),a=e.u32(),_=e.u32();e.seek_start(r);for(let t=0;t<n;t++)o.vertices.push(e.vec3_f32());e.seek_start(_);for(let t=0;t<a;t++){const t=e.u16(),i=e.u16(),s=e.u16(),n=e.u16(),r=e.vec3_f32();e.seek(16),o.triangles.push({indices:[t,i,s],flags:n,normal:r})}e.seek_start(t+24)}return s}},XcMJ:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("lg9k"),r=i("ZPAt"),a=i("GXOi"),_=i("IMNf"),d=i("NRxM"),l=i("/Wax"),c=i("bcBH"),u=i("DixV"),p=i("DuVK"),h=i("xs7i"),v=i("+oIp"),f=i("AF+w"),O=i("sZ1+"),m=i("8hIv"),g=s.default.get("core/data_formats/parsing/quest");function E(e,t){return t.map(t=>({type:P(e,t),area_id:t.area_id,section_id:t.section_id,position:t.position,rotation:t.rotation,scale:t.scale,unknown:t.unknown,pso_type_id:t.type_id,npc_id:t.npc_id,script_label:Math.round(t.script_label),pso_roaming:t.roaming}))}function P(e,{type_id:t,scale:i,roaming:o,area_id:s}){const n=Math.abs(i.y-1)>1e-5;switch(`${t}, ${o%3}, ${e}`){case"68, 0, 1":return O.NpcType.Booma;case"68, 1, 1":return O.NpcType.Gobooma;case"68, 2, 1":return O.NpcType.Gigobooma;case"99, 0, 1":return O.NpcType.EvilShark;case"99, 1, 1":return O.NpcType.PalShark;case"99, 2, 1":return O.NpcType.GuilShark;case"166, 0, 1":return O.NpcType.Dimenian;case"166, 0, 2":return O.NpcType.Dimenian2;case"166, 1, 1":return O.NpcType.LaDimenian;case"166, 1, 2":return O.NpcType.LaDimenian2;case"166, 2, 1":return O.NpcType.SoDimenian;case"166, 2, 2":return O.NpcType.SoDimenian2;case"214, 0, 2":return O.NpcType.Mericarol;case"214, 1, 2":return O.NpcType.Mericus;case"214, 2, 2":return O.NpcType.Merikle;case"277, 0, 4":return O.NpcType.Boota;case"277, 1, 4":return O.NpcType.ZeBoota;case"277, 2, 4":return O.NpcType.BaBoota;case"279, 0, 4":return O.NpcType.Goran;case"279, 1, 4":return O.NpcType.PyroGoran;case"279, 2, 4":return O.NpcType.GoranDetonator}switch(`${t}, ${o%2}, ${e}`){case"64, 0, 1":return O.NpcType.Hildebear;case"64, 0, 2":return O.NpcType.Hildebear2;case"64, 1, 1":return O.NpcType.Hildeblue;case"64, 1, 2":return O.NpcType.Hildeblue2;case"65, 0, 1":return O.NpcType.RagRappy;case"65, 0, 2":return O.NpcType.RagRappy2;case"65, 0, 4":return O.NpcType.SandRappy;case"65, 1, 1":return O.NpcType.AlRappy;case"65, 1, 2":return O.NpcType.LoveRappy;case"65, 1, 4":return O.NpcType.DelRappy;case"128, 0, 1":return O.NpcType.Dubchic;case"128, 0, 2":return O.NpcType.Dubchic2;case"128, 1, 1":return O.NpcType.Gilchic;case"128, 1, 2":return O.NpcType.Gilchic2;case"212, 0, 2":return O.NpcType.SinowBerill;case"212, 1, 2":return O.NpcType.SinowSpigell;case"213, 0, 2":return O.NpcType.Merillia;case"213, 1, 2":return O.NpcType.Meriltas;case"215, 0, 2":return O.NpcType.UlGibbon;case"215, 1, 2":return O.NpcType.ZolGibbon;case"221, 0, 2":return O.NpcType.Dolmolm;case"221, 1, 2":return O.NpcType.Dolmdarl;case"224, 0, 2":return s>15?O.NpcType.Epsilon:O.NpcType.SinowZoa;case"224, 1, 2":return s>15?O.NpcType.Epsilon:O.NpcType.SinowZele;case"274, 0, 4":return O.NpcType.MerissaA;case"274, 1, 4":return O.NpcType.MerissaAA;case"276, 0, 4":return O.NpcType.Zu;case"276, 1, 4":return O.NpcType.Pazuzu;case"278, 0, 4":return O.NpcType.Dorphon;case"278, 1, 4":return O.NpcType.DorphonEclair;case"281, 0, 4":return n?O.NpcType.SaintMilion:O.NpcType.Kondrieu;case"281, 1, 4":return n?O.NpcType.Shambertin:O.NpcType.Kondrieu}switch(`${t}, ${e}`){case"66, 1":return O.NpcType.Monest;case"66, 2":return O.NpcType.Monest2;case"67, 1":return n?O.NpcType.SavageWolf:O.NpcType.BarbarousWolf;case"67, 2":return n?O.NpcType.SavageWolf2:O.NpcType.BarbarousWolf2;case"96, 1":return O.NpcType.GrassAssassin;case"96, 2":return O.NpcType.GrassAssassin2;case"97, 1":return s>15?O.NpcType.DelLily:n?O.NpcType.PoisonLily:O.NpcType.NarLily;case"97, 2":return s>15?O.NpcType.DelLily:n?O.NpcType.PoisonLily2:O.NpcType.NarLily2;case"98, 1":return O.NpcType.NanoDragon;case"100, 1":return n?O.NpcType.PofuillySlime:O.NpcType.PouillySlime;case"101, 1":return O.NpcType.PanArms;case"101, 2":return O.NpcType.PanArms2;case"129, 1":return O.NpcType.Garanz;case"129, 2":return O.NpcType.Garanz2;case"130, 1":return n?O.NpcType.SinowBeat:O.NpcType.SinowGold;case"131, 1":return O.NpcType.Canadine;case"132, 1":return O.NpcType.Canane;case"133, 1":return O.NpcType.Dubswitch;case"133, 2":return O.NpcType.Dubswitch2;case"160, 1":return O.NpcType.Delsaber;case"160, 2":return O.NpcType.Delsaber2;case"161, 1":return O.NpcType.ChaosSorcerer;case"161, 2":return O.NpcType.ChaosSorcerer2;case"162, 1":return O.NpcType.DarkGunner;case"164, 1":return O.NpcType.ChaosBringer;case"165, 1":return O.NpcType.DarkBelra;case"165, 2":return O.NpcType.DarkBelra2;case"167, 1":return O.NpcType.Bulclaw;case"168, 1":return O.NpcType.Claw;case"192, 1":return O.NpcType.Dragon;case"192, 2":return O.NpcType.GalGryphon;case"193, 1":return O.NpcType.DeRolLe;case"197, 1":return O.NpcType.VolOpt;case"200, 1":return O.NpcType.DarkFalz;case"202, 2":return O.NpcType.OlgaFlow;case"203, 2":return O.NpcType.BarbaRay;case"204, 2":return O.NpcType.GolDragon;case"216, 2":return O.NpcType.Gibbles;case"217, 2":return O.NpcType.Gee;case"218, 2":return O.NpcType.GiGue;case"219, 2":return O.NpcType.Deldepth;case"220, 2":return O.NpcType.Delbiter;case"222, 2":return O.NpcType.Morfos;case"223, 2":return O.NpcType.Recobox;case"225, 2":return O.NpcType.IllGill;case"272, 4":return O.NpcType.Astark;case"273, 4":return n?O.NpcType.SatelliteLizard:O.NpcType.Yowie;case"275, 4":return O.NpcType.Girtablulu}switch(t){case 4:return O.NpcType.FemaleFat;case 5:return O.NpcType.FemaleMacho;case 7:return O.NpcType.FemaleTall;case 10:return O.NpcType.MaleDwarf;case 11:return O.NpcType.MaleFat;case 12:return O.NpcType.MaleMacho;case 13:return O.NpcType.MaleOld;case 25:return O.NpcType.BlueSoldier;case 26:return O.NpcType.RedSoldier;case 27:return O.NpcType.Principal;case 28:return O.NpcType.Tekker;case 29:return O.NpcType.GuildLady;case 30:return O.NpcType.Scientist;case 31:return O.NpcType.Nurse;case 32:return O.NpcType.Irene;case 241:return O.NpcType.ItemShop;case 254:return O.NpcType.Nurse2}return O.NpcType.Unknown}t.parse_quest=function(e,t=!1){const i=f.parse_qst(e);if(!i)return;let o,s;for(const e of i.files){const t=e.name.trim().toLowerCase();t.endsWith(".dat")?o=e:t.endsWith(".bin")&&(s=e)}if(!o)return void g.error("File contains no DAT file.");if(!s)return void g.error("File contains no BIN file.");const a=_.prs_decompress(new d.ArrayBufferCursor(o.data,c.Endianness.Little)),l=p.parse_dat(a),O=l.objs.map(e=>{const t=v.pso_id_to_object_type(e.type_id);return{type:t,id:e.id,group_id:e.group_id,area_id:e.area_id,section_id:e.section_id,position:e.position,rotation:e.rotation,properties:new Map(e.properties.map((e,i)=>3!==i||t!==v.ObjectType.ScriptCollision&&t!==v.ObjectType.ForestConsole&&t!==v.ObjectType.TalkLinkToSupport?4===i&&t===v.ObjectType.RicoMessagePod?["script_label",e]:5===i&&t===v.ObjectType.RicoMessagePod?["script_label_2",e]:[`property_${i}`,e]:["script_label",e])),unknown:e.unknown}}),m=_.prs_decompress(new d.ArrayBufferCursor(s.data,c.Endianness.Little)),P=u.parse_bin(m,function(e,t){const i=new Set([0]);for(const t of e){const e=t.properties.get("script_label");null!=e&&i.add(e);const o=t.properties.get("script_label_2");null!=o&&i.add(o)}for(const e of t)i.add(Math.round(e.script_label));return[...i]}(O,l.npcs),t);let w=h.Episode.I,b=new Map;if(P.object_code.length){let e;for(const t of P.object_code)if(t.type===n.SegmentType.Instructions&&t.labels.includes(0)){e=t;break}e?(w=function(e){const t=e.find(e=>e.opcode.code===r.OP_SET_EPISODE.code);if(!t)return g.debug("Function 0 has no set_episode instruction."),h.Episode.I;switch(t.args[0].value){default:case 0:return h.Episode.I;case 1:return h.Episode.II;case 2:return h.Episode.IV}}(e.instructions),b=function(e,t,i){const o=new Map;for(const e of i)e.opcode.code===r.OP_BB_MAP_DESIGNATE.code&&o.set(e.args[0].value,e.args[2].value);return o}(0,0,e.instructions)):g.warn("No instruction for label 0 found.")}else g.warn("File contains no instruction labels.");return{id:P.quest_id,language:P.language,name:P.quest_name,short_description:P.short_description,long_description:P.long_description,episode:w,objects:O,npcs:E(w,l.npcs),events:l.waves,dat_unknowns:l.unknowns,object_code:P.object_code,shop_items:P.shop_items,map_designations:b}},t.write_quest_qst=function(e,t){const i=p.write_dat({objs:(s=e.objects,s.map(e=>({type_id:v.object_data(e.type).pso_id,id:e.id,group_id:e.group_id,section_id:e.section_id,position:e.position,rotation:e.rotation,properties:[...e.properties.values()],area_id:e.area_id,unknown:e.unknown}))),npcs:(o=e.npcs,o.map(e=>{const t=O.npc_data(e.type),i=null==t.pso_type_id?e.pso_type_id:t.pso_type_id,o=null==t.pso_roaming?e.pso_roaming:t.pso_roaming,s=null==t.pso_regular||t.pso_regular,n=m.reinterpret_i32_as_f32(-8388609&m.reinterpret_f32_as_i32(e.scale.y)|(s?0:8388608)),r={x:e.scale.x,y:n,z:e.scale.z};return{type_id:i,section_id:e.section_id,position:e.position,rotation:e.rotation,scale:r,npc_id:e.npc_id,script_label:e.script_label,roaming:o,area_id:e.area_id,unknown:e.unknown}})),waves:e.events,unknowns:e.dat_unknowns});var o,s;const n=u.write_bin({quest_id:e.id,language:e.language,quest_name:e.name,short_description:e.short_description,long_description:e.long_description,object_code:e.object_code,shop_items:e.shop_items}),r=t.lastIndexOf("."),_=-1===r?t.slice(0,11):t.slice(0,Math.min(11,r));return f.write_qst({files:[{name:_+".dat",id:e.id,data:a.prs_compress(new l.ResizableBufferCursor(i,c.Endianness.Little)).array_buffer()},{name:_+".bin",id:e.id,data:a.prs_compress(new d.ArrayBufferCursor(n,c.Endianness.Little)).array_buffer()}]})}},Y3Jw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb");i("8TW1");class n extends o.ResizableWidget{constructor(e,t,i){super(),this.models=e,this.selected=t,this.set_selected=i,this.element=s.create_element("ul",{class:"viewer_Model3DSelectListView"}),this.list_click=e=>{if(e.target instanceof HTMLLIElement&&e.target.dataset.index){this.selected_element&&this.selected_element.classList.remove("active"),e.target.classList.add("active");const t=parseInt(e.target.dataset.index,10);this.selected_element=e.target,this.set_selected(this.models[t])}},this.element.onclick=this.list_click,e.forEach((e,t)=>{this.element.append(s.create_element("li",{text:e.name,data:{index:t.toString()}}))}),this.disposable(t.observe(({value:e})=>{if(this.selected_element&&(this.selected_element.classList.remove("active"),this.selected_element=void 0),e&&e!==this.selected_model){const t=this.models.indexOf(e);-1!==t&&(this.selected_element=this.element.childNodes[t],this.selected_element.classList.add("active"))}})),this.finalize_construction(n.prototype)}set borders(e){e?(this.element.style.borderLeft="var(--border)",this.element.style.borderRight="var(--border)"):(this.element.style.borderLeft="none",this.element.style.borderRight="none")}}t.Model3DSelectListView=n},YkZX:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Ftn7"),s=i("Womt"),n=i("c5EP"),r=i("3CEK"),a=i("Tpfs"),_=i("Gc0Z");class d extends o.Renderer{constructor(){super(),this._collision_geometry=new s.Object3D,this._render_geometry=new s.Object3D,this._entity_models=new s.Object3D,this.disposer=new a.Disposer,this.entity_to_mesh=new Map,this.entity_controls=this.disposer.add(new _.QuestEntityControls(this)),this.camera=new s.PerspectiveCamera(60,1,10,1e4),this.disposer.add_all(new r.QuestModelManager(this),n.quest_editor_store.debug.observe(({value:e})=>this.debug=e)),this.init_camera_controls()}get debug(){return super.debug}set debug(e){this.debug!==e&&(super.debug=e,this._render_geometry.visible=e,this.schedule_render())}get collision_geometry(){return this._collision_geometry}set collision_geometry(e){this.scene.remove(this.collision_geometry),this._collision_geometry=e,this.scene.add(e)}set render_geometry(e){this.scene.remove(this._render_geometry),this._render_geometry=e,e.visible=this.debug,this.scene.add(e)}get entity_models(){return this._entity_models}dispose(){super.dispose(),this.disposer.dispose()}set_size(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),super.set_size(e,t)}reset_entity_models(){this.scene.remove(this._entity_models),this._entity_models=new s.Group,this.scene.add(this._entity_models),this.entity_to_mesh.clear(),this.schedule_render()}add_entity_model(e){const t=e.userData.entity;this._entity_models.add(e),this.entity_to_mesh.set(t,e),t===n.quest_editor_store.selected_entity.val&&this.entity_controls.mark_selected(e),this.schedule_render()}remove_entity_model(e){const t=this.entity_to_mesh.get(e);t&&(this.entity_to_mesh.delete(e),this._entity_models.remove(t),this.schedule_render())}get_entity_mesh(e){return this.entity_to_mesh.get(e)}}t.QuestRenderer=d},Yq7v:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("5aKR"),r=i("c5EP"),a=i("IjTL"),_=i("yQqj");i("egRq");const d=i("PE7g"),l=i("Tpfs"),c=i("Womt"),u=i("cOX8");class p extends o.ResizableWidget{constructor(){super(),this.element=s.el.div({class:"quest_editor_EntityInfoView",tab_index:-1}),this.no_entity_view=new n.DisabledView("No entity selected."),this.table_element=s.el.table(),this.pos_x_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.pos_y_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.pos_z_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.rot_x_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.rot_y_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.rot_z_element=this.disposable(new d.NumberInput(0,{width:80,round_to:3})),this.entity_disposer=new l.Disposer;const e=r.quest_editor_store.selected_entity,t=e.map(e=>null==e),i="quest_editor_EntityInfoView_coord";this.table_element.append(s.el.tr({},s.el.th({text:"Type:"}),this.type_element=s.el.td()),s.el.tr({},s.el.th({text:"Name:"}),this.name_element=s.el.td()),s.el.tr({},s.el.th({text:"Section:"}),this.section_id_element=s.el.td()),s.el.tr({},s.el.th({text:"Position:",col_span:2})),s.el.tr({},s.el.th({text:"X:",class:i}),s.el.td({},this.pos_x_element.element)),s.el.tr({},s.el.th({text:"Y:",class:i}),s.el.td({},this.pos_y_element.element)),s.el.tr({},s.el.th({text:"Z:",class:i}),s.el.td({},this.pos_z_element.element)),s.el.tr({},s.el.th({text:"Rotation:",col_span:2})),s.el.tr({},s.el.th({text:"X:",class:i}),s.el.td({},this.rot_x_element.element)),s.el.tr({},s.el.th({text:"Y:",class:i}),s.el.td({},this.rot_y_element.element)),s.el.tr({},s.el.th({text:"Z:",class:i}),s.el.td({},this.rot_z_element.element))),this.element.append(this.table_element,this.no_entity_view.element),this.element.addEventListener("focus",()=>r.quest_editor_store.undo.make_current(),!0),this.bind_hidden(this.table_element,t),this.disposables(this.no_entity_view.visible.bind_to(t),e.observe(({value:e})=>{if(this.entity_disposer.dispose_all(),e){this.type_element.innerText=e instanceof a.QuestNpcModel?"NPC":"Object";const t=_.entity_data(e.type).name;this.name_element.innerText=t,this.name_element.title=t,this.entity_disposer.add(e.section_id.observe(({value:e})=>{this.section_id_element.innerText=e.toString()},{call_now:!0})),this.observe_entity(e)}})),this.finalize_construction(p.prototype)}dispose(){super.dispose(),this.entity_disposer.dispose()}observe_entity(e){const t=e.position;this.entity_disposer.add_all(t.observe(({value:{x:e,y:t,z:i}})=>{this.pos_x_element.value.val=e,this.pos_y_element.value.val=t,this.pos_z_element.value.val=i},{call_now:!0}),this.pos_x_element.value.observe(({value:i})=>r.quest_editor_store.translate_entity(e,e.section.val,e.section.val,t.val,new c.Vector3(i,t.val.y,t.val.z),!1)),this.pos_y_element.value.observe(({value:i})=>r.quest_editor_store.translate_entity(e,e.section.val,e.section.val,t.val,new c.Vector3(t.val.x,i,t.val.z),!1)),this.pos_z_element.value.observe(({value:i})=>r.quest_editor_store.translate_entity(e,e.section.val,e.section.val,t.val,new c.Vector3(t.val.x,t.val.y,i),!1)));const i=e.rotation;this.entity_disposer.add_all(i.observe(({value:{x:e,y:t,z:i}})=>{this.rot_x_element.value.val=u.rad_to_deg(e),this.rot_y_element.value.val=u.rad_to_deg(t),this.rot_z_element.value.val=u.rad_to_deg(i)},{call_now:!0}),this.rot_x_element.value.observe(({value:t})=>r.quest_editor_store.rotate_entity(e,i.val,new c.Euler(u.deg_to_rad(t),i.val.y,i.val.z,"ZXY"),!1)),this.rot_y_element.value.observe(({value:t})=>r.quest_editor_store.rotate_entity(e,i.val,new c.Euler(i.val.x,u.deg_to_rad(t),i.val.z,"ZXY"),!1)),this.rot_z_element.value.observe(({value:t})=>r.quest_editor_store.rotate_entity(e,i.val,new c.Euler(i.val.x,i.val.y,u.deg_to_rad(t),"ZXY"),!1)))}}t.EntityInfoView=p},Yuai:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.load_array_buffer=function(e){return o(this,void 0,void 0,(function*(){return(yield fetch("/assets"+e)).arrayBuffer()}))}},ZINw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("c5EP"),n=i("FXpb"),r=i("QLFx"),a=i("E/0a"),_=i("r+6V"),d=i("w6HN"),l=i("oyid"),c=i("wtpc");var u;i("PNEq"),function(e){e[e.Signed=0]="Signed",e[e.Unsigned=1]="Unsigned",e[e.Word=2]="Word",e[e.Byte=3]="Byte",e[e.Float=4]="Float"}(u||(u={}));class p extends o.ResizableWidget{constructor(){super(),this.type_dropdown=this.disposable(new _.DropDown("Display type",[u.Signed,u.Unsigned,u.Word,u.Byte,u.Float],e=>u[e],{tooltip:"Select which data type register values should be displayed as."})),this.register_getter=this.get_register_getter(u.Unsigned),this.hex_checkbox=this.disposable(new l.CheckBox(!1,{label:"Hex",tooltip:"Display register values in hexadecimal."})),this.settings_bar=this.disposable(new d.ToolBar({children:[this.type_dropdown,this.hex_checkbox]})),this.list_element=n.el.div({class:"quest_editor_RegistersView_list"}),this.container_element=n.el.div({class:"quest_editor_RegistersView_container"},this.list_element),this.element=n.el.div({class:"quest_editor_RegistersView"},this.settings_bar.element,this.container_element);const e=Array(r.REGISTER_COUNT);for(let t=0;t<r.REGISTER_COUNT;t++){const i=this.disposable(new a.TextInput("",{class:"quest_editor_RegistersView_value",label:"r"+t,readonly:!0})),o=n.el.div({class:"quest_editor_RegistersView_register"},i.label.element,i.element);e[t]=i,this.list_element.appendChild(o)}this.register_els=e;const t=()=>!s.quest_editor_store.quest_runner.paused.val||!s.quest_editor_store.quest_runner.running.val;this.update(t(),this.hex_checkbox.checked.val),this.disposables(s.quest_editor_store.quest_runner.running.observe(()=>this.update(t(),this.hex_checkbox.checked.val)),s.quest_editor_store.quest_runner.paused.observe(()=>this.update(t(),this.hex_checkbox.checked.val)),this.type_dropdown.chosen.observe(e=>{this.register_getter=this.get_register_getter(e.value),this.update(t(),this.hex_checkbox.checked.val)}),this.hex_checkbox.checked.observe(e=>this.update(t(),e.value))),this.finalize_construction(p.prototype)}get_register_getter(e){let t;switch(e){case u.Signed:t=s.quest_editor_store.quest_runner.vm.get_register_signed;break;case u.Unsigned:t=s.quest_editor_store.quest_runner.vm.get_register_unsigned;break;case u.Word:t=s.quest_editor_store.quest_runner.vm.get_register_word;break;case u.Byte:t=s.quest_editor_store.quest_runner.vm.get_register_byte;break;case u.Float:t=s.quest_editor_store.quest_runner.vm.get_register_float}return t.bind(s.quest_editor_store.quest_runner.vm)}update(e,t){if(e){const e="??";for(let t=0;t<r.REGISTER_COUNT;t++){this.register_els[t].value.set_val(e,{silent:!0})}}else if(t)for(let e=0;e<r.REGISTER_COUNT;e++){const t=this.register_els[e],i=s.quest_editor_store.quest_runner.vm.get_register_unsigned(e);t.value.set_val(c.number_to_hex_string(i),{silent:!0})}else for(let e=0;e<r.REGISTER_COUNT;e++){const t=this.register_els[e],i=this.register_getter(e);t.value.set_val(i.toString(),{silent:!0})}}}t.RegistersView=p},ZPAt:function(e,t,i){"use strict";var o,s,n;function r(e,t,i){return{type:e,doc:t,access:i}}function a(e,t,i,o,s){return{code:e,mnemonic:t,doc:i,size:e<256?1:2,params:o,stack:s}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Any=0]="Any",e[e.Byte=1]="Byte",e[e.Word=2]="Word",e[e.DWord=3]="DWord",e[e.Float=4]="Float",e[e.Label=5]="Label",e[e.ILabel=6]="ILabel",e[e.DLabel=7]="DLabel",e[e.SLabel=8]="SLabel",e[e.String=9]="String",e[e.ILabelVar=10]="ILabelVar",e[e.RegRef=11]="RegRef",e[e.RegTupRef=12]="RegTupRef",e[e.RegRefVar=13]="RegRefVar",e[e.Pointer=14]="Pointer"}(o=t.Kind||(t.Kind={})),t.TYPE_ANY={kind:o.Any},t.TYPE_BYTE={kind:o.Byte},t.TYPE_WORD={kind:o.Word},t.TYPE_DWORD={kind:o.DWord},t.TYPE_FLOAT={kind:o.Float},t.TYPE_LABEL={kind:o.Label},t.TYPE_I_LABEL={kind:o.ILabel},t.TYPE_D_LABEL={kind:o.DLabel},t.TYPE_S_LABEL={kind:o.SLabel},t.TYPE_STRING={kind:o.String},t.TYPE_I_LABEL_VAR={kind:o.ILabelVar},t.TYPE_REG_REF={kind:o.RegRef},t.TYPE_REG_REF_VAR={kind:o.RegRefVar},t.TYPE_POINTER={kind:o.Pointer},t.MIN_SIGNED_DWORD_VALUE=-Math.pow(2,31),t.MAX_SIGNED_DWORD_VALUE=Math.pow(2,31)-1,t.MIN_UNSIGNED_DWORD_VALUE=0,t.MAX_UNSIGNED_DWORD_VALUE=Math.pow(2,32)-1,t.MIN_DWORD_VALUE=t.MIN_SIGNED_DWORD_VALUE,t.MAX_DWORD_VALUE=t.MAX_UNSIGNED_DWORD_VALUE,function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.ReadWrite=2]="ReadWrite"}(s=t.ParamAccess||(t.ParamAccess={})),function(e){e[e.Push=0]="Push",e[e.Pop=1]="Pop"}(n=t.StackInteraction||(t.StackInteraction={})),t.OPCODES=[],t.OPCODES_BY_MNEMONIC=new Map,t.OP_NOP=t.OPCODES[0]=a(0,"nop","No operation, does nothing.",[],void 0),t.OP_RET=t.OPCODES[1]=a(1,"ret","Returns control to caller.",[],void 0),t.OP_SYNC=t.OPCODES[2]=a(2,"sync","Yields control for the rest of the current frame. Execution will continue the following frame.",[],void 0),t.OP_EXIT=t.OPCODES[3]=a(3,"exit",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_THREAD=t.OPCODES[4]=a(4,"thread","Starts a new thread. Thread execution will start at the given label.\nOften used to check a register every frame. Make sure to yield control with sync when looping.",[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_VA_START=t.OPCODES[5]=a(5,"va_start","Initializes a variable argument list.\nMake sure to call va_end after va_start and va_call.",[],void 0),t.OP_VA_END=t.OPCODES[6]=a(6,"va_end","Restores the registers overwritten by arg_push* instructions.\nCalled after va_call.",[],void 0),t.OP_VA_CALL=t.OPCODES[7]=a(7,"va_call","Calls the variable argument function at the given label.\nCalled after initializing the argument list with va_start and pushing arguments onto the stack with arg_push* instructions. Make sure to call va_end afterwards.",[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_LET=t.OPCODES[8]=a(8,"let","Sets the first register's value to second one's value.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_LETI=t.OPCODES[9]=a(9,"leti","Sets a register to the given value.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_LETB=t.OPCODES[10]=a(10,"letb","Sets a register to the given value.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_BYTE,void 0,s.Write)]},void 0,void 0),r(t.TYPE_BYTE,void 0,void 0)],void 0),t.OP_LETW=t.OPCODES[11]=a(11,"letw","Sets a register to the given value.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_WORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_LETA=t.OPCODES[12]=a(12,"leta","Sets the first register to the memory address of the second register. Not used by Sega.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_POINTER,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_LETO=t.OPCODES[13]=a(13,"leto","Sets a register to the memory address of the given label. Not used by Sega.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_POINTER,void 0,s.Write)]},void 0,void 0),r(t.TYPE_LABEL,void 0,void 0)],void 0),t.OP_UNKNOWN_0E=t.OPCODES[14]=a(14,"unknown_0e",void 0,[],void 0),t.OP_UNKNOWN_0F=t.OPCODES[15]=a(15,"unknown_0f",void 0,[],void 0),t.OP_SET=t.OPCODES[16]=a(16,"set","Sets a register to 1.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_CLEAR=t.OPCODES[17]=a(17,"clear","Sets a register to 0.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_REV=t.OPCODES[18]=a(18,"rev","Sets a register to 1 if its current value is 0, otherwise sets it to 0.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.ReadWrite)]},void 0,void 0)],void 0),t.OP_GSET=t.OPCODES[19]=a(19,"gset",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GCLEAR=t.OPCODES[20]=a(20,"gclear",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GREV=t.OPCODES[21]=a(21,"grev",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GLET=t.OPCODES[22]=a(22,"glet",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GGET=t.OPCODES[23]=a(23,"gget","Sets a register to value of the given flag.",[r(t.TYPE_WORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_WORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_ADD=t.OPCODES[24]=a(24,"add",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ADDI=t.OPCODES[25]=a(25,"addi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_SUB=t.OPCODES[26]=a(26,"sub",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SUBI=t.OPCODES[27]=a(27,"subi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_MUL=t.OPCODES[28]=a(28,"mul",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_MULI=t.OPCODES[29]=a(29,"muli",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_DIV=t.OPCODES[30]=a(30,"div",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_DIVI=t.OPCODES[31]=a(31,"divi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_AND=t.OPCODES[32]=a(32,"and",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ANDI=t.OPCODES[33]=a(33,"andi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_OR=t.OPCODES[34]=a(34,"or",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ORI=t.OPCODES[35]=a(35,"ori",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_XOR=t.OPCODES[36]=a(36,"xor",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_XORI=t.OPCODES[37]=a(37,"xori",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_MOD=t.OPCODES[38]=a(38,"mod",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_MODI=t.OPCODES[39]=a(39,"modi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_JMP=t.OPCODES[40]=a(40,"jmp",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_CALL=t.OPCODES[41]=a(41,"call",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_ON=t.OPCODES[42]=a(42,"jmp_on",void 0,[r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_REG_REF_VAR,void 0,s.Read)],void 0),t.OP_JMP_OFF=t.OPCODES[43]=a(43,"jmp_off",void 0,[r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_REG_REF_VAR,void 0,s.Read)],void 0),t.OP_JMP_E=t.OPCODES[44]=a(44,"jmp_=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_E=t.OPCODES[45]=a(45,"jmpi_=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_NE=t.OPCODES[46]=a(46,"jmp_!=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_NE=t.OPCODES[47]=a(47,"jmpi_!=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMP_G=t.OPCODES[48]=a(48,"ujmp_>",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMPI_G=t.OPCODES[49]=a(49,"ujmpi_>",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_G=t.OPCODES[50]=a(50,"jmp_>",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_G=t.OPCODES[51]=a(51,"jmpi_>",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMP_L=t.OPCODES[52]=a(52,"ujmp_<",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMPI_L=t.OPCODES[53]=a(53,"ujmpi_<",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_L=t.OPCODES[54]=a(54,"jmp_<",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_L=t.OPCODES[55]=a(55,"jmpi_<",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMP_GE=t.OPCODES[56]=a(56,"ujmp_>=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMPI_GE=t.OPCODES[57]=a(57,"ujmpi_>=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_GE=t.OPCODES[58]=a(58,"jmp_>=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_GE=t.OPCODES[59]=a(59,"jmpi_>=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMP_LE=t.OPCODES[60]=a(60,"ujmp_<=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_UJMPI_LE=t.OPCODES[61]=a(61,"ujmpi_<=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMP_LE=t.OPCODES[62]=a(62,"jmp_<=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_JMPI_LE=t.OPCODES[63]=a(63,"jmpi_<=",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_SWITCH_JMP=t.OPCODES[64]=a(64,"switch_jmp",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL_VAR,void 0,void 0)],void 0),t.OP_SWITCH_CALL=t.OPCODES[65]=a(65,"switch_call",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_I_LABEL_VAR,void 0,void 0)],void 0),t.OP_STACK_PUSH=t.OPCODES[66]=a(66,"stack_push",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_STACK_POP=t.OPCODES[67]=a(67,"stack_pop",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_STACK_PUSHM=t.OPCODES[68]=a(68,"stack_pushm","Pushes the values of an arbitrary amount of registers onto the stack.",[r(t.TYPE_REG_REF,void 0,s.Read),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_STACK_POPM=t.OPCODES[69]=a(69,"stack_popm","Pops an arbitrary amount of values from the stack and writes them to registers.",[r(t.TYPE_REG_REF,void 0,s.Write),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_UNKNOWN_46=t.OPCODES[70]=a(70,"unknown_46",void 0,[],void 0),t.OP_UNKNOWN_47=t.OPCODES[71]=a(71,"unknown_47",void 0,[],void 0),t.OP_ARG_PUSHR=t.OPCODES[72]=a(72,"arg_pushr","Pushes the value of the given register onto the stack.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],n.Push),t.OP_ARG_PUSHL=t.OPCODES[73]=a(73,"arg_pushl","Pushes the given value onto the stack.",[r(t.TYPE_DWORD,void 0,void 0)],n.Push),t.OP_ARG_PUSHB=t.OPCODES[74]=a(74,"arg_pushb","Pushes the given value onto the stack.",[r(t.TYPE_BYTE,void 0,void 0)],n.Push),t.OP_ARG_PUSHW=t.OPCODES[75]=a(75,"arg_pushw","Pushes the given value onto the stack.",[r(t.TYPE_WORD,void 0,void 0)],n.Push),t.OP_ARG_PUSHA=t.OPCODES[76]=a(76,"arg_pusha","Pushes the memory address of the given register onto the stack. Not used by Sega.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],n.Push),t.OP_ARG_PUSHO=t.OPCODES[77]=a(77,"arg_pusho","Pushes the memory address of the given label onto the stack. Not used by Sega.",[r(t.TYPE_LABEL,void 0,void 0)],n.Push),t.OP_ARG_PUSHS=t.OPCODES[78]=a(78,"arg_pushs","Pushes the given value onto the stack.",[r(t.TYPE_STRING,void 0,void 0)],n.Push),t.OP_UNKNOWN_4F=t.OPCODES[79]=a(79,"unknown_4f",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_MESSAGE=t.OPCODES[80]=a(80,"message",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_LIST=t.OPCODES[81]=a(81,"list","Used to display a list of items and retrieve the item selected by the player.\nList items should be seperated by newlines. The selected item's index will be written to the given register.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_BYTE,void 0,s.Write)]},void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_FADEIN=t.OPCODES[82]=a(82,"fadein",void 0,[],void 0),t.OP_FADEOUT=t.OPCODES[83]=a(83,"fadeout",void 0,[],void 0),t.OP_SE=t.OPCODES[84]=a(84,"se",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BGM=t.OPCODES[85]=a(85,"bgm",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_56=t.OPCODES[86]=a(86,"unknown_56",void 0,[],void 0),t.OP_UNKNOWN_57=t.OPCODES[87]=a(87,"unknown_57",void 0,[],void 0),t.OP_ENABLE=t.OPCODES[88]=a(88,"enable",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_DISABLE=t.OPCODES[89]=a(89,"disable",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_WINDOW_MSG=t.OPCODES[90]=a(90,"window_msg",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_ADD_MSG=t.OPCODES[91]=a(91,"add_msg",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_MESEND=t.OPCODES[92]=a(92,"mesend",void 0,[],void 0),t.OP_GETTIME=t.OPCODES[93]=a(93,"gettime",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_WINEND=t.OPCODES[94]=a(94,"winend",void 0,[],void 0),t.OP_UNKNOWN_5F=t.OPCODES[95]=a(95,"unknown_5f",void 0,[],void 0),t.OP_NPC_CRT_V3=t.OPCODES[96]=a(96,"npc_crt_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_STOP=t.OPCODES[97]=a(97,"npc_stop",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_PLAY=t.OPCODES[98]=a(98,"npc_play",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_KILL=t.OPCODES[99]=a(99,"npc_kill",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_NONT=t.OPCODES[100]=a(100,"npc_nont",void 0,[],void 0),t.OP_NPC_TALK=t.OPCODES[101]=a(101,"npc_talk",void 0,[],void 0),t.OP_NPC_CRP_V3=t.OPCODES[102]=a(102,"npc_crp_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read),r(t.TYPE_ANY,void 0,s.Read),r(t.TYPE_ANY,void 0,s.Read),r(t.TYPE_I_LABEL,void 0,s.Read),r(t.TYPE_ANY,void 0,s.Read),r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_67=t.OPCODES[103]=a(103,"unknown_67",void 0,[],void 0),t.OP_CREATE_PIPE=t.OPCODES[104]=a(104,"create_pipe",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_P_HPSTAT_V3=t.OPCODES[105]=a(105,"p_hpstat_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_P_DEAD_V3=t.OPCODES[106]=a(106,"p_dead_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_P_DISABLEWARP=t.OPCODES[107]=a(107,"p_disablewarp",void 0,[],void 0),t.OP_P_ENABLEWARP=t.OPCODES[108]=a(108,"p_enablewarp",void 0,[],void 0),t.OP_P_MOVE_V3=t.OPCODES[109]=a(109,"p_move_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_P_LOOK=t.OPCODES[110]=a(110,"p_look",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_6F=t.OPCODES[111]=a(111,"unknown_6f",void 0,[],void 0),t.OP_P_ACTION_DISABLE=t.OPCODES[112]=a(112,"p_action_disable",void 0,[],void 0),t.OP_P_ACTION_ENABLE=t.OPCODES[113]=a(113,"p_action_enable",void 0,[],void 0),t.OP_DISABLE_MOVEMENT1=t.OPCODES[114]=a(114,"disable_movement1",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_ENABLE_MOVEMENT1=t.OPCODES[115]=a(115,"enable_movement1",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_P_NONCOL=t.OPCODES[116]=a(116,"p_noncol",void 0,[],void 0),t.OP_P_COL=t.OPCODES[117]=a(117,"p_col",void 0,[],void 0),t.OP_P_SETPOS=t.OPCODES[118]=a(118,"p_setpos","Sets a player's position.",[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"X coordinate.",s.Read),r(t.TYPE_DWORD,"Y coordinate.",s.Read),r(t.TYPE_DWORD,"Z coordinate.",s.Read),r(t.TYPE_DWORD,"Y-axis rotation.",s.Read)]},void 0,void 0)],n.Pop),t.OP_P_RETURN_GUILD=t.OPCODES[119]=a(119,"p_return_guild",void 0,[],void 0),t.OP_P_TALK_GUILD=t.OPCODES[120]=a(120,"p_talk_guild",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_TALK_PL_V3=t.OPCODES[121]=a(121,"npc_talk_pl_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_TALK_KILL=t.OPCODES[122]=a(122,"npc_talk_kill",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_CRTPK_V3=t.OPCODES[123]=a(123,"npc_crtpk_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_CRPPK_V3=t.OPCODES[124]=a(124,"npc_crppk_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_CRPTALK_V3=t.OPCODES[125]=a(125,"npc_crptalk_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_P_LOOK_AT_V1=t.OPCODES[126]=a(126,"p_look_at_v1",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_NPC_CRP_ID_V3=t.OPCODES[127]=a(127,"npc_crp_id_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CAM_QUAKE=t.OPCODES[128]=a(128,"cam_quake",void 0,[],void 0),t.OP_CAM_ADJ=t.OPCODES[129]=a(129,"cam_adj",void 0,[],void 0),t.OP_CAM_ZMIN=t.OPCODES[130]=a(130,"cam_zmin",void 0,[],void 0),t.OP_CAM_ZMOUT=t.OPCODES[131]=a(131,"cam_zmout",void 0,[],void 0),t.OP_CAM_PAN_V3=t.OPCODES[132]=a(132,"cam_pan_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_GAME_LEV_SUPER=t.OPCODES[133]=a(133,"game_lev_super",void 0,[],void 0),t.OP_GAME_LEV_RESET=t.OPCODES[134]=a(134,"game_lev_reset",void 0,[],void 0),t.OP_POS_PIPE_V3=t.OPCODES[135]=a(135,"pos_pipe_v3","Create a telepipe at a specific position for the given player slot that takes players back to Pioneer 2 or the Lab.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"X coordinate.",s.Read),r(t.TYPE_DWORD,"Y coordinate.",s.Read),r(t.TYPE_DWORD,"Z coordinate.",s.Read),r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_IF_ZONE_CLEAR=t.OPCODES[136]=a(136,"if_zone_clear",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CHK_ENE_NUM=t.OPCODES[137]=a(137,"chk_ene_num","Retrieves the amount of enemies killed during the quest.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNHIDE_OBJ=t.OPCODES[138]=a(138,"unhide_obj",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNHIDE_ENE=t.OPCODES[139]=a(139,"unhide_ene",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_AT_COORDS_CALL=t.OPCODES[140]=a(140,"at_coords_call",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_I_LABEL,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_AT_COORDS_TALK=t.OPCODES[141]=a(141,"at_coords_talk",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_I_LABEL,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_COL_NPCIN=t.OPCODES[142]=a(142,"col_npcin",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_I_LABEL,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_COL_NPCINR=t.OPCODES[143]=a(143,"col_npcinr",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SWITCH_ON=t.OPCODES[144]=a(144,"switch_on",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SWITCH_OFF=t.OPCODES[145]=a(145,"switch_off",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_PLAYBGM_EPI=t.OPCODES[146]=a(146,"playbgm_epi",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SET_MAINWARP=t.OPCODES[147]=a(147,"set_mainwarp",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SET_OBJ_PARAM=t.OPCODES[148]=a(148,"set_obj_param","Creates a targetable object.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"X coordinate.",s.Read),r(t.TYPE_DWORD,"Y coordinate.",s.Read),r(t.TYPE_DWORD,"Z coordinate.",s.Read),r(t.TYPE_DWORD,"Collision radius.",s.Read),r(t.TYPE_I_LABEL,"Function label.",s.Read),r(t.TYPE_DWORD,"Vertical position of the cursor.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},"Object handle.",void 0)],void 0),t.OP_SET_FLOOR_HANDLER=t.OPCODES[149]=a(149,"set_floor_handler",void 0,[r(t.TYPE_DWORD,"Floor number.",void 0),r(t.TYPE_I_LABEL,"Handler function label.",void 0)],n.Pop),t.OP_CLR_FLOOR_HANDLER=t.OPCODES[150]=a(150,"clr_floor_handler",void 0,[r(t.TYPE_DWORD,"Floor number.",void 0)],n.Pop),t.OP_COL_PLINAW=t.OPCODES[151]=a(151,"col_plinaw",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_HUD_HIDE=t.OPCODES[152]=a(152,"hud_hide",void 0,[],void 0),t.OP_HUD_SHOW=t.OPCODES[153]=a(153,"hud_show",void 0,[],void 0),t.OP_CINE_ENABLE=t.OPCODES[154]=a(154,"cine_enable",void 0,[],void 0),t.OP_CINE_DISABLE=t.OPCODES[155]=a(155,"cine_disable",void 0,[],void 0),t.OP_UNKNOWN_9C=t.OPCODES[156]=a(156,"unknown_9c",void 0,[],void 0),t.OP_UNKNOWN_9D=t.OPCODES[157]=a(157,"unknown_9d",void 0,[],void 0),t.OP_UNKNOWN_9E=t.OPCODES[158]=a(158,"unknown_9e",void 0,[],void 0),t.OP_UNKNOWN_9F=t.OPCODES[159]=a(159,"unknown_9f",void 0,[],void 0),t.OP_UNKNOWN_A0=t.OPCODES[160]=a(160,"unknown_a0",void 0,[],void 0),t.OP_SET_QT_FAILURE=t.OPCODES[161]=a(161,"set_qt_failure",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_SET_QT_SUCCESS=t.OPCODES[162]=a(162,"set_qt_success",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_CLR_QT_FAILURE=t.OPCODES[163]=a(163,"clr_qt_failure",void 0,[],void 0),t.OP_CLR_QT_SUCCESS=t.OPCODES[164]=a(164,"clr_qt_success",void 0,[],void 0),t.OP_SET_QT_CANCEL=t.OPCODES[165]=a(165,"set_qt_cancel",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_CLR_QT_CANCEL=t.OPCODES[166]=a(166,"clr_qt_cancel",void 0,[],void 0),t.OP_UNKNOWN_A7=t.OPCODES[167]=a(167,"unknown_a7",void 0,[],void 0),t.OP_PL_WALK_V3=t.OPCODES[168]=a(168,"pl_walk_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_A9=t.OPCODES[169]=a(169,"unknown_a9",void 0,[],void 0),t.OP_UNKNOWN_AA=t.OPCODES[170]=a(170,"unknown_aa",void 0,[],void 0),t.OP_UNKNOWN_AB=t.OPCODES[171]=a(171,"unknown_ab",void 0,[],void 0),t.OP_UNKNOWN_AC=t.OPCODES[172]=a(172,"unknown_ac",void 0,[],void 0),t.OP_UNKNOWN_AD=t.OPCODES[173]=a(173,"unknown_ad",void 0,[],void 0),t.OP_UNKNOWN_AE=t.OPCODES[174]=a(174,"unknown_ae",void 0,[],void 0),t.OP_UNKNOWN_AF=t.OPCODES[175]=a(175,"unknown_af",void 0,[],void 0),t.OP_PL_ADD_MESETA=t.OPCODES[176]=a(176,"pl_add_meseta",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_THREAD_STG=t.OPCODES[177]=a(177,"thread_stg",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_DEL_OBJ_PARAM=t.OPCODES[178]=a(178,"del_obj_param",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},"Object handle.",void 0)],void 0),t.OP_ITEM_CREATE=t.OPCODES[179]=a(179,"item_create",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ITEM_CREATE2=t.OPCODES[180]=a(180,"item_create2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ITEM_DELETE=t.OPCODES[181]=a(181,"item_delete",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ITEM_DELETE2=t.OPCODES[182]=a(182,"item_delete2","Deletes an item from the player's inventory.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_ITEM_CHECK=t.OPCODES[183]=a(183,"item_check",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SETEVT=t.OPCODES[184]=a(184,"setevt",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_GET_DIFFLVL=t.OPCODES[185]=a(185,"get_difflvl","Sets the given register to the current difficulty. 0 For normal, 1 for hard and 2 for both very hard and ultimate.\nUse get_difficulty_level2 if you want to differentiate between very hard and ultimate.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_SET_QT_EXIT=t.OPCODES[186]=a(186,"set_qt_exit",void 0,[r(t.TYPE_I_LABEL,void 0,void 0)],void 0),t.OP_CLR_QT_EXIT=t.OPCODES[187]=a(187,"clr_qt_exit",void 0,[],void 0),t.OP_UNKNOWN_BC=t.OPCODES[188]=a(188,"unknown_bc",void 0,[],void 0),t.OP_UNKNOWN_BD=t.OPCODES[189]=a(189,"unknown_bd",void 0,[],void 0),t.OP_UNKNOWN_BE=t.OPCODES[190]=a(190,"unknown_be",void 0,[],void 0),t.OP_UNKNOWN_BF=t.OPCODES[191]=a(191,"unknown_bf",void 0,[],void 0),t.OP_PARTICLE_V3=t.OPCODES[192]=a(192,"particle_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_TEXT=t.OPCODES[193]=a(193,"npc_text",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_NPC_CHKWARP=t.OPCODES[194]=a(194,"npc_chkwarp",void 0,[],void 0),t.OP_PL_PKOFF=t.OPCODES[195]=a(195,"pl_pkoff",void 0,[],void 0),t.OP_MAP_DESIGNATE=t.OPCODES[196]=a(196,"map_designate",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_MASTERKEY_ON=t.OPCODES[197]=a(197,"masterkey_on",void 0,[],void 0),t.OP_MASTERKEY_OFF=t.OPCODES[198]=a(198,"masterkey_off",void 0,[],void 0),t.OP_WINDOW_TIME=t.OPCODES[199]=a(199,"window_time",void 0,[],void 0),t.OP_WINEND_TIME=t.OPCODES[200]=a(200,"winend_time",void 0,[],void 0),t.OP_WINSET_TIME=t.OPCODES[201]=a(201,"winset_time",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GETMTIME=t.OPCODES[202]=a(202,"getmtime",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_SET_QUEST_BOARD_HANDLER=t.OPCODES[203]=a(203,"set_quest_board_handler",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_CLEAR_QUEST_BOARD_HANDLER=t.OPCODES[204]=a(204,"clear_quest_board_handler",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_PARTICLE_ID_V3=t.OPCODES[205]=a(205,"particle_id_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_CRPTALK_ID_V3=t.OPCODES[206]=a(206,"npc_crptalk_id_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_NPC_LANG_CLEAN=t.OPCODES[207]=a(207,"npc_lang_clean",void 0,[],void 0),t.OP_PL_PKON=t.OPCODES[208]=a(208,"pl_pkon",void 0,[],void 0),t.OP_PL_CHK_ITEM2=t.OPCODES[209]=a(209,"pl_chk_item2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ENABLE_MAINMENU=t.OPCODES[210]=a(210,"enable_mainmenu",void 0,[],void 0),t.OP_DISABLE_MAINMENU=t.OPCODES[211]=a(211,"disable_mainmenu",void 0,[],void 0),t.OP_START_BATTLEBGM=t.OPCODES[212]=a(212,"start_battlebgm",void 0,[],void 0),t.OP_END_BATTLEBGM=t.OPCODES[213]=a(213,"end_battlebgm",void 0,[],void 0),t.OP_DISP_MSG_QB=t.OPCODES[214]=a(214,"disp_msg_qb",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_CLOSE_MSG_QB=t.OPCODES[215]=a(215,"close_msg_qb",void 0,[],void 0),t.OP_SET_EVENTFLAG_V3=t.OPCODES[216]=a(216,"set_eventflag_v3",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SYNC_LETI=t.OPCODES[217]=a(217,"sync_leti",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_SET_RETURNHUNTER=t.OPCODES[218]=a(218,"set_returnhunter",void 0,[],void 0),t.OP_SET_RETURNCITY=t.OPCODES[219]=a(219,"set_returncity",void 0,[],void 0),t.OP_LOAD_PVR=t.OPCODES[220]=a(220,"load_pvr",void 0,[],void 0),t.OP_LOAD_MIDI=t.OPCODES[221]=a(221,"load_midi",void 0,[],void 0),t.OP_UNKNOWN_DE=t.OPCODES[222]=a(222,"unknown_de",void 0,[],void 0),t.OP_NPC_PARAM_V3=t.OPCODES[223]=a(223,"npc_param_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_PAD_DRAGON=t.OPCODES[224]=a(224,"pad_dragon",void 0,[],void 0),t.OP_CLEAR_MAINWARP=t.OPCODES[225]=a(225,"clear_mainwarp",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_PCAM_PARAM_V3=t.OPCODES[226]=a(226,"pcam_param_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_START_SETEVT_V3=t.OPCODES[227]=a(227,"start_setevt_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_WARP_ON=t.OPCODES[228]=a(228,"warp_on",void 0,[],void 0),t.OP_WARP_OFF=t.OPCODES[229]=a(229,"warp_off",void 0,[],void 0),t.OP_GET_SLOTNUMBER=t.OPCODES[230]=a(230,"get_slotnumber",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_SERVERNUMBER=t.OPCODES[231]=a(231,"get_servernumber",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_SET_EVENTFLAG2=t.OPCODES[232]=a(232,"set_eventflag2",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],n.Pop),t.OP_RES=t.OPCODES[233]=a(233,"res",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_EA=t.OPCODES[234]=a(234,"unknown_ea",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_ENABLE_BGMCTRL=t.OPCODES[235]=a(235,"enable_bgmctrl",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SW_SEND=t.OPCODES[236]=a(236,"sw_send",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CREATE_BGMCTRL=t.OPCODES[237]=a(237,"create_bgmctrl",void 0,[],void 0),t.OP_PL_ADD_MESETA2=t.OPCODES[238]=a(238,"pl_add_meseta2",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SYNC_REGISTER=t.OPCODES[239]=a(239,"sync_register",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SEND_REGWORK=t.OPCODES[240]=a(240,"send_regwork",void 0,[],void 0),t.OP_LETI_FIXED_CAMERA_V3=t.OPCODES[241]=a(241,"leti_fixed_camera_v3",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_DEFAULT_CAMERA_POS1=t.OPCODES[242]=a(242,"default_camera_pos1",void 0,[],void 0),t.OP_UNKNOWN_F3=t.OPCODES[243]=a(243,"unknown_f3",void 0,[],void 0),t.OP_UNKNOWN_F4=t.OPCODES[244]=a(244,"unknown_f4",void 0,[],void 0),t.OP_UNKNOWN_F5=t.OPCODES[245]=a(245,"unknown_f5",void 0,[],void 0),t.OP_UNKNOWN_F6=t.OPCODES[246]=a(246,"unknown_f6",void 0,[],void 0),t.OP_UNKNOWN_F7=t.OPCODES[247]=a(247,"unknown_f7",void 0,[],void 0),t.OP_UNKNOWN_F8=t.OPCODES[248]=a(248,"unknown_f8",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F9=t.OPCODES[249]=a(249,"unknown_f9",void 0,[],void 0),t.OP_GET_GC_NUMBER=t.OPCODES[250]=a(250,"get_gc_number",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_FB=t.OPCODES[251]=a(251,"unknown_fb",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_UNKNOWN_FC=t.OPCODES[252]=a(252,"unknown_fc",void 0,[],void 0),t.OP_UNKNOWN_FD=t.OPCODES[253]=a(253,"unknown_fd",void 0,[],void 0),t.OP_UNKNOWN_FE=t.OPCODES[254]=a(254,"unknown_fe",void 0,[],void 0),t.OP_UNKNOWN_FF=t.OPCODES[255]=a(255,"unknown_ff",void 0,[],void 0),t.OP_UNKNOWN_F800=t.OPCODES[63488]=a(63488,"unknown_f800",void 0,[],void 0),t.OP_SET_CHAT_CALLBACK=t.OPCODES[63489]=a(63489,"set_chat_callback",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F802=t.OPCODES[63490]=a(63490,"unknown_f802",void 0,[],void 0),t.OP_UNKNOWN_F803=t.OPCODES[63491]=a(63491,"unknown_f803",void 0,[],void 0),t.OP_UNKNOWN_F804=t.OPCODES[63492]=a(63492,"unknown_f804",void 0,[],void 0),t.OP_UNKNOWN_F805=t.OPCODES[63493]=a(63493,"unknown_f805",void 0,[],void 0),t.OP_UNKNOWN_F806=t.OPCODES[63494]=a(63494,"unknown_f806",void 0,[],void 0),t.OP_UNKNOWN_F807=t.OPCODES[63495]=a(63495,"unknown_f807",void 0,[],void 0),t.OP_GET_DIFFICULTY_LEVEL2=t.OPCODES[63496]=a(63496,"get_difficulty_level2","Sets the given register to the current difficulty. 0 For normal, 1 for hard, 2 for very hard and 3 for ultimate.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_NUMBER_OF_PLAYER1=t.OPCODES[63497]=a(63497,"get_number_of_player1","Set the given register to the current number of players. Either 1, 2, 3 or 4.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_COORD_OF_PLAYER=t.OPCODES[63498]=a(63498,"get_coord_of_player","Retrieves a player's position.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"X coordinate.",s.Write),r(t.TYPE_DWORD,"Y coordinate.",s.Write),r(t.TYPE_DWORD,"Z coordinate.",s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_ENABLE_MAP=t.OPCODES[63499]=a(63499,"enable_map",void 0,[],void 0),t.OP_DISABLE_MAP=t.OPCODES[63500]=a(63500,"disable_map",void 0,[],void 0),t.OP_MAP_DESIGNATE_EX=t.OPCODES[63501]=a(63501,"map_designate_ex",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F80E=t.OPCODES[63502]=a(63502,"unknown_f80e",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F80F=t.OPCODES[63503]=a(63503,"unknown_f80f",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BA_INITIAL_FLOOR=t.OPCODES[63504]=a(63504,"ba_initial_floor",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SET_BA_RULES=t.OPCODES[63505]=a(63505,"set_ba_rules",void 0,[],void 0),t.OP_UNKNOWN_F812=t.OPCODES[63506]=a(63506,"unknown_f812",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F813=t.OPCODES[63507]=a(63507,"unknown_f813",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F814=t.OPCODES[63508]=a(63508,"unknown_f814",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F815=t.OPCODES[63509]=a(63509,"unknown_f815",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F816=t.OPCODES[63510]=a(63510,"unknown_f816",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F817=t.OPCODES[63511]=a(63511,"unknown_f817",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F818=t.OPCODES[63512]=a(63512,"unknown_f818",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F819=t.OPCODES[63513]=a(63513,"unknown_f819",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F81A=t.OPCODES[63514]=a(63514,"unknown_f81a",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F81B=t.OPCODES[63515]=a(63515,"unknown_f81b",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BA_DISP_MSG=t.OPCODES[63516]=a(63516,"ba_disp_msg",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_DEATH_LVL_UP=t.OPCODES[63517]=a(63517,"death_lvl_up",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_DEATH_TECH_LVL_UP=t.OPCODES[63518]=a(63518,"death_tech_lvl_up",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F81F=t.OPCODES[63519]=a(63519,"unknown_f81f",void 0,[],void 0),t.OP_CMODE_STAGE=t.OPCODES[63520]=a(63520,"cmode_stage",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F821=t.OPCODES[63521]=a(63521,"unknown_f821",void 0,[],void 0),t.OP_UNKNOWN_F822=t.OPCODES[63522]=a(63522,"unknown_f822",void 0,[],void 0),t.OP_UNKNOWN_F823=t.OPCODES[63523]=a(63523,"unknown_f823",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F824=t.OPCODES[63524]=a(63524,"unknown_f824",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_EXP_MULTIPLICATION=t.OPCODES[63525]=a(63525,"exp_multiplication",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_EXP_DIVISION=t.OPCODES[63526]=a(63526,"exp_division",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_USER_IS_DEAD=t.OPCODES[63527]=a(63527,"get_user_is_dead",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GO_FLOOR=t.OPCODES[63528]=a(63528,"go_floor","Sends a player to the given floor.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Floor ID.",s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F829=t.OPCODES[63529]=a(63529,"unknown_f829",void 0,[],void 0),t.OP_UNKNOWN_F82A=t.OPCODES[63530]=a(63530,"unknown_f82a",void 0,[],void 0),t.OP_UNLOCK_DOOR2=t.OPCODES[63531]=a(63531,"unlock_door2",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_LOCK_DOOR2=t.OPCODES[63532]=a(63532,"lock_door2",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_IF_SWITCH_NOT_PRESSED=t.OPCODES[63533]=a(63533,"if_switch_not_pressed",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_IF_SWITCH_PRESSED=t.OPCODES[63534]=a(63534,"if_switch_pressed",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Floor ID.",s.Read),r(t.TYPE_DWORD,"Switch ID.",s.Read),r(t.TYPE_DWORD,"Will be set to 1 if the switch is pressed, 0 otherwise.",s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F82F=t.OPCODES[63535]=a(63535,"unknown_f82f",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_CONTROL_DRAGON=t.OPCODES[63536]=a(63536,"control_dragon",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_RELEASE_DRAGON=t.OPCODES[63537]=a(63537,"release_dragon",void 0,[],void 0),t.OP_UNKNOWN_F832=t.OPCODES[63538]=a(63538,"unknown_f832",void 0,[],void 0),t.OP_UNKNOWN_F833=t.OPCODES[63539]=a(63539,"unknown_f833",void 0,[],void 0),t.OP_UNKNOWN_F834=t.OPCODES[63540]=a(63540,"unknown_f834",void 0,[],void 0),t.OP_UNKNOWN_F835=t.OPCODES[63541]=a(63541,"unknown_f835",void 0,[],void 0),t.OP_UNKNOWN_F836=t.OPCODES[63542]=a(63542,"unknown_f836",void 0,[],void 0),t.OP_UNKNOWN_F837=t.OPCODES[63543]=a(63543,"unknown_f837",void 0,[],void 0),t.OP_SHRINK=t.OPCODES[63544]=a(63544,"shrink",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_UNSHRINK=t.OPCODES[63545]=a(63545,"unshrink",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F83A=t.OPCODES[63546]=a(63546,"unknown_f83a",void 0,[],void 0),t.OP_UNKNOWN_F83B=t.OPCODES[63547]=a(63547,"unknown_f83b",void 0,[],void 0),t.OP_DISPLAY_CLOCK2=t.OPCODES[63548]=a(63548,"display_clock2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F83D=t.OPCODES[63549]=a(63549,"unknown_f83d",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_DELETE_AREA_TITLE=t.OPCODES[63550]=a(63550,"delete_area_title",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F83F=t.OPCODES[63551]=a(63551,"unknown_f83f",void 0,[],void 0),t.OP_LOAD_NPC_DATA=t.OPCODES[63552]=a(63552,"load_npc_data",void 0,[],void 0),t.OP_GET_NPC_DATA=t.OPCODES[63553]=a(63553,"get_npc_data",void 0,[r(t.TYPE_D_LABEL,void 0,void 0)],void 0),t.OP_UNKNOWN_F842=t.OPCODES[63554]=a(63554,"unknown_f842",void 0,[],void 0),t.OP_UNKNOWN_F843=t.OPCODES[63555]=a(63555,"unknown_f843",void 0,[],void 0),t.OP_UNKNOWN_F844=t.OPCODES[63556]=a(63556,"unknown_f844",void 0,[],void 0),t.OP_UNKNOWN_F845=t.OPCODES[63557]=a(63557,"unknown_f845",void 0,[],void 0),t.OP_UNKNOWN_F846=t.OPCODES[63558]=a(63558,"unknown_f846",void 0,[],void 0),t.OP_UNKNOWN_F847=t.OPCODES[63559]=a(63559,"unknown_f847",void 0,[],void 0),t.OP_GIVE_DAMAGE_SCORE=t.OPCODES[63560]=a(63560,"give_damage_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_TAKE_DAMAGE_SCORE=t.OPCODES[63561]=a(63561,"take_damage_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNK_SCORE_F84A=t.OPCODES[63562]=a(63562,"unk_score_f84a",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNK_SCORE_F84B=t.OPCODES[63563]=a(63563,"unk_score_f84b",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_KILL_SCORE=t.OPCODES[63564]=a(63564,"kill_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_DEATH_SCORE=t.OPCODES[63565]=a(63565,"death_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNK_SCORE_F84E=t.OPCODES[63566]=a(63566,"unk_score_f84e",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_ENEMY_DEATH_SCORE=t.OPCODES[63567]=a(63567,"enemy_death_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_MESETA_SCORE=t.OPCODES[63568]=a(63568,"meseta_score",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F851=t.OPCODES[63569]=a(63569,"unknown_f851",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F852=t.OPCODES[63570]=a(63570,"unknown_f852",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_REVERSE_WARPS=t.OPCODES[63571]=a(63571,"reverse_warps",void 0,[],void 0),t.OP_UNREVERSE_WARPS=t.OPCODES[63572]=a(63572,"unreverse_warps",void 0,[],void 0),t.OP_SET_ULT_MAP=t.OPCODES[63573]=a(63573,"set_ult_map",void 0,[],void 0),t.OP_UNSET_ULT_MAP=t.OPCODES[63574]=a(63574,"unset_ult_map",void 0,[],void 0),t.OP_SET_AREA_TITLE=t.OPCODES[63575]=a(63575,"set_area_title",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F858=t.OPCODES[63576]=a(63576,"unknown_f858",void 0,[],void 0),t.OP_UNKNOWN_F859=t.OPCODES[63577]=a(63577,"unknown_f859",void 0,[],void 0),t.OP_EQUIP_ITEM=t.OPCODES[63578]=a(63578,"equip_item",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNEQUIP_ITEM=t.OPCODES[63579]=a(63579,"unequip_item",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F85C=t.OPCODES[63580]=a(63580,"unknown_f85c",void 0,[],void 0),t.OP_UNKNOWN_F85D=t.OPCODES[63581]=a(63581,"unknown_f85d",void 0,[],void 0),t.OP_UNKNOWN_F85E=t.OPCODES[63582]=a(63582,"unknown_f85e",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F85F=t.OPCODES[63583]=a(63583,"unknown_f85f",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F860=t.OPCODES[63584]=a(63584,"unknown_f860",void 0,[],void 0),t.OP_UNKNOWN_F861=t.OPCODES[63585]=a(63585,"unknown_f861",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F862=t.OPCODES[63586]=a(63586,"unknown_f862",void 0,[],void 0),t.OP_UNKNOWN_F863=t.OPCODES[63587]=a(63587,"unknown_f863",void 0,[],void 0),t.OP_CMODE_RANK=t.OPCODES[63588]=a(63588,"cmode_rank",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_AWARD_ITEM_NAME=t.OPCODES[63589]=a(63589,"award_item_name",void 0,[],void 0),t.OP_AWARD_ITEM_SELECT=t.OPCODES[63590]=a(63590,"award_item_select",void 0,[],void 0),t.OP_AWARD_ITEM_GIVE_TO=t.OPCODES[63591]=a(63591,"award_item_give_to",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F868=t.OPCODES[63592]=a(63592,"unknown_f868",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F869=t.OPCODES[63593]=a(63593,"unknown_f869",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_ITEM_CREATE_CMODE=t.OPCODES[63594]=a(63594,"item_create_cmode",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F86B=t.OPCODES[63595]=a(63595,"unknown_f86b",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_AWARD_ITEM_OK=t.OPCODES[63596]=a(63596,"award_item_ok",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F86D=t.OPCODES[63597]=a(63597,"unknown_f86d",void 0,[],void 0),t.OP_UNKNOWN_F86E=t.OPCODES[63598]=a(63598,"unknown_f86e",void 0,[],void 0),t.OP_BA_SET_LIVES=t.OPCODES[63599]=a(63599,"ba_set_lives",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BA_SET_TECH_LVL=t.OPCODES[63600]=a(63600,"ba_set_tech_lvl",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BA_SET_LVL=t.OPCODES[63601]=a(63601,"ba_set_lvl",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BA_SET_TIME_LIMIT=t.OPCODES[63602]=a(63602,"ba_set_time_limit",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BOSS_IS_DEAD=t.OPCODES[63603]=a(63603,"boss_is_dead",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F874=t.OPCODES[63604]=a(63604,"unknown_f874",void 0,[],void 0),t.OP_UNKNOWN_F875=t.OPCODES[63605]=a(63605,"unknown_f875",void 0,[],void 0),t.OP_UNKNOWN_F876=t.OPCODES[63606]=a(63606,"unknown_f876",void 0,[],void 0),t.OP_ENABLE_TECHS=t.OPCODES[63607]=a(63607,"enable_techs","Enables technique use for the given player.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_DISABLE_TECHS=t.OPCODES[63608]=a(63608,"disable_techs","Disables technique use for the given player.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_GET_GENDER=t.OPCODES[63609]=a(63609,"get_gender","Retrieves the player's gender. 0 If male, 1 if female.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player gender.",s.Write)]},void 0,void 0)],void 0),t.OP_GET_CHARA_CLASS=t.OPCODES[63610]=a(63610,"get_chara_class","Retrieves the player's race and character class.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player race. 0 If human, 1 if newman, 2 if cast.",s.Write),r(t.TYPE_DWORD,"Player class. 0 If hunter, 1 if ranger, 2 if force.",s.Write)]},void 0,void 0)],void 0),t.OP_TAKE_SLOT_MESETA=t.OPCODES[63611]=a(63611,"take_slot_meseta","Takes an amount of meseta from a player's inventory.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read),r(t.TYPE_DWORD,"Amount of meseta to take.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Will be set to 1 if the meseta was taken, 0 otherwise.",s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F87C=t.OPCODES[63612]=a(63612,"unknown_f87c",void 0,[],void 0),t.OP_UNKNOWN_F87D=t.OPCODES[63613]=a(63613,"unknown_f87d",void 0,[],void 0),t.OP_UNKNOWN_F87E=t.OPCODES[63614]=a(63614,"unknown_f87e",void 0,[],void 0),t.OP_READ_GUILDCARD_FLAG=t.OPCODES[63615]=a(63615,"read_guildcard_flag",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F880=t.OPCODES[63616]=a(63616,"unknown_f880",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_PL_NAME=t.OPCODES[63617]=a(63617,"get_pl_name","Sets the value of <pl_name> to the given player's name.",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_GET_PL_JOB=t.OPCODES[63618]=a(63618,"get_pl_job","Sets the value of <pl_job> to the given player's job (Hunter/Ranger/Force).",[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F883=t.OPCODES[63619]=a(63619,"unknown_f883",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F884=t.OPCODES[63620]=a(63620,"unknown_f884",void 0,[],void 0),t.OP_UNKNOWN_F885=t.OPCODES[63621]=a(63621,"unknown_f885",void 0,[],void 0),t.OP_UNKNOWN_F886=t.OPCODES[63622]=a(63622,"unknown_f886",void 0,[],void 0),t.OP_UNKNOWN_F887=t.OPCODES[63623]=a(63623,"unknown_f887",void 0,[],void 0),t.OP_UNKNOWN_F888=t.OPCODES[63624]=a(63624,"unknown_f888",void 0,[],void 0),t.OP_UNKNOWN_F889=t.OPCODES[63625]=a(63625,"unknown_f889",void 0,[],void 0),t.OP_GET_PLAYER_STATUS=t.OPCODES[63626]=a(63626,"get_player_status",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_SEND_MAIL=t.OPCODES[63627]=a(63627,"send_mail",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_ONLINE_CHECK=t.OPCODES[63628]=a(63628,"online_check",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_CHL_SET_TIMERECORD=t.OPCODES[63629]=a(63629,"chl_set_timerecord",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CHL_GET_TIMERECORD=t.OPCODES[63630]=a(63630,"chl_get_timerecord",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F88F=t.OPCODES[63631]=a(63631,"unknown_f88f",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F890=t.OPCODES[63632]=a(63632,"unknown_f890",void 0,[],void 0),t.OP_LOAD_ENEMY_DATA=t.OPCODES[63633]=a(63633,"load_enemy_data",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_GET_PHYSICAL_DATA=t.OPCODES[63634]=a(63634,"get_physical_data",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GET_ATTACK_DATA=t.OPCODES[63635]=a(63635,"get_attack_data",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GET_RESIST_DATA=t.OPCODES[63636]=a(63636,"get_resist_data",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_GET_MOVEMENT_DATA=t.OPCODES[63637]=a(63637,"get_movement_data",void 0,[r(t.TYPE_WORD,void 0,void 0)],void 0),t.OP_UNKNOWN_F896=t.OPCODES[63638]=a(63638,"unknown_f896",void 0,[],void 0),t.OP_UNKNOWN_F897=t.OPCODES[63639]=a(63639,"unknown_f897",void 0,[],void 0),t.OP_SHIFT_LEFT=t.OPCODES[63640]=a(63640,"shift_left",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SHIFT_RIGHT=t.OPCODES[63641]=a(63641,"shift_right",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_GET_RANDOM=t.OPCODES[63642]=a(63642,"get_random",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_RESET_MAP=t.OPCODES[63643]=a(63643,"reset_map","Sets all registers to 0 and resets the quest.",[],void 0),t.OP_DISP_CHL_RETRY_MENU=t.OPCODES[63644]=a(63644,"disp_chl_retry_menu",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_CHL_REVERSER=t.OPCODES[63645]=a(63645,"chl_reverser",void 0,[],void 0),t.OP_UNKNOWN_F89E=t.OPCODES[63646]=a(63646,"unknown_f89e",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F89F=t.OPCODES[63647]=a(63647,"unknown_f89f",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8A0=t.OPCODES[63648]=a(63648,"unknown_f8a0",void 0,[],void 0),t.OP_UNKNOWN_F8A1=t.OPCODES[63649]=a(63649,"unknown_f8a1",void 0,[],void 0),t.OP_UNKNOWN_F8A2=t.OPCODES[63650]=a(63650,"unknown_f8a2",void 0,[],void 0),t.OP_UNKNOWN_F8A3=t.OPCODES[63651]=a(63651,"unknown_f8a3",void 0,[],void 0),t.OP_UNKNOWN_F8A4=t.OPCODES[63652]=a(63652,"unknown_f8a4",void 0,[],void 0),t.OP_UNKNOWN_F8A5=t.OPCODES[63653]=a(63653,"unknown_f8a5",void 0,[],void 0),t.OP_UNKNOWN_F8A6=t.OPCODES[63654]=a(63654,"unknown_f8a6",void 0,[],void 0),t.OP_UNKNOWN_F8A7=t.OPCODES[63655]=a(63655,"unknown_f8a7",void 0,[],void 0),t.OP_UNKNOWN_F8A8=t.OPCODES[63656]=a(63656,"unknown_f8a8",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F8A9=t.OPCODES[63657]=a(63657,"unknown_f8a9",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8AA=t.OPCODES[63658]=a(63658,"unknown_f8aa",void 0,[],void 0),t.OP_UNKNOWN_F8AB=t.OPCODES[63659]=a(63659,"unknown_f8ab",void 0,[],void 0),t.OP_UNKNOWN_F8AC=t.OPCODES[63660]=a(63660,"unknown_f8ac",void 0,[],void 0),t.OP_GET_NUMBER_OF_PLAYER2=t.OPCODES[63661]=a(63661,"get_number_of_player2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8AE=t.OPCODES[63662]=a(63662,"unknown_f8ae",void 0,[],void 0),t.OP_UNKNOWN_F8AF=t.OPCODES[63663]=a(63663,"unknown_f8af",void 0,[],void 0),t.OP_UNKNOWN_F8B0=t.OPCODES[63664]=a(63664,"unknown_f8b0",void 0,[],void 0),t.OP_UNKNOWN_F8B1=t.OPCODES[63665]=a(63665,"unknown_f8b1",void 0,[],void 0),t.OP_UNKNOWN_F8B2=t.OPCODES[63666]=a(63666,"unknown_f8b2",void 0,[],void 0),t.OP_UNKNOWN_F8B3=t.OPCODES[63667]=a(63667,"unknown_f8b3",void 0,[],void 0),t.OP_UNKNOWN_F8B4=t.OPCODES[63668]=a(63668,"unknown_f8b4",void 0,[],void 0),t.OP_UNKNOWN_F8B5=t.OPCODES[63669]=a(63669,"unknown_f8b5",void 0,[],void 0),t.OP_UNKNOWN_F8B6=t.OPCODES[63670]=a(63670,"unknown_f8b6",void 0,[],void 0),t.OP_UNKNOWN_F8B7=t.OPCODES[63671]=a(63671,"unknown_f8b7",void 0,[],void 0),t.OP_UNKNOWN_F8B8=t.OPCODES[63672]=a(63672,"unknown_f8b8",void 0,[],void 0),t.OP_CHL_RECOVERY=t.OPCODES[63673]=a(63673,"chl_recovery",void 0,[],void 0),t.OP_UNKNOWN_F8BA=t.OPCODES[63674]=a(63674,"unknown_f8ba",void 0,[],void 0),t.OP_UNKNOWN_F8BB=t.OPCODES[63675]=a(63675,"unknown_f8bb",void 0,[],void 0),t.OP_SET_EPISODE=t.OPCODES[63676]=a(63676,"set_episode",void 0,[r(t.TYPE_DWORD,void 0,void 0)],void 0),t.OP_UNKNOWN_F8BD=t.OPCODES[63677]=a(63677,"unknown_f8bd",void 0,[],void 0),t.OP_UNKNOWN_F8BE=t.OPCODES[63678]=a(63678,"unknown_f8be",void 0,[],void 0),t.OP_UNKNOWN_F8BF=t.OPCODES[63679]=a(63679,"unknown_f8bf",void 0,[],void 0),t.OP_FILE_DL_REQ=t.OPCODES[63680]=a(63680,"file_dl_req",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_GET_DL_STATUS=t.OPCODES[63681]=a(63681,"get_dl_status",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GBA_UNKNOWN4=t.OPCODES[63682]=a(63682,"gba_unknown4",void 0,[],void 0),t.OP_GET_GBA_STATE=t.OPCODES[63683]=a(63683,"get_gba_state",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8C4=t.OPCODES[63684]=a(63684,"unknown_f8c4",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8C5=t.OPCODES[63685]=a(63685,"unknown_f8c5",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_QEXIT=t.OPCODES[63686]=a(63686,"qexit",void 0,[],void 0),t.OP_USE_ANIMATION=t.OPCODES[63687]=a(63687,"use_animation",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Animation ID.",s.Read),r(t.TYPE_DWORD,"Animation duration in number of frames.",s.Read)]},void 0,void 0)],void 0),t.OP_STOP_ANIMATION=t.OPCODES[63688]=a(63688,"stop_animation",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_RUN_TO_COORD=t.OPCODES[63689]=a(63689,"run_to_coord",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_INVINCIBLE=t.OPCODES[63690]=a(63690,"set_slot_invincible",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8CB=t.OPCODES[63691]=a(63691,"unknown_f8cb",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_POISON=t.OPCODES[63692]=a(63692,"set_slot_poison",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_PARALYZE=t.OPCODES[63693]=a(63693,"set_slot_paralyze",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_SHOCK=t.OPCODES[63694]=a(63694,"set_slot_shock",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_FREEZE=t.OPCODES[63695]=a(63695,"set_slot_freeze",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_SLOW=t.OPCODES[63696]=a(63696,"set_slot_slow",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_CONFUSE=t.OPCODES[63697]=a(63697,"set_slot_confuse",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_SHIFTA=t.OPCODES[63698]=a(63698,"set_slot_shifta",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_DEBAND=t.OPCODES[63699]=a(63699,"set_slot_deband",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_JELLEN=t.OPCODES[63700]=a(63700,"set_slot_jellen",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_SET_SLOT_ZALURE=t.OPCODES[63701]=a(63701,"set_slot_zalure",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read)]},void 0,void 0)],void 0),t.OP_FLETI_FIXED_CAMERA=t.OPCODES[63702]=a(63702,"fleti_fixed_camera",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],n.Pop),t.OP_FLETI_LOCKED_CAMERA=t.OPCODES[63703]=a(63703,"fleti_locked_camera",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],n.Pop),t.OP_DEFAULT_CAMERA_POS2=t.OPCODES[63704]=a(63704,"default_camera_pos2",void 0,[],void 0),t.OP_SET_MOTION_BLUR=t.OPCODES[63705]=a(63705,"set_motion_blur",void 0,[],void 0),t.OP_SET_SCREEN_BW=t.OPCODES[63706]=a(63706,"set_screen_bw",void 0,[],void 0),t.OP_UNKNOWN_F8DB=t.OPCODES[63707]=a(63707,"unknown_f8db",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_WORD,void 0,void 0)],n.Pop),t.OP_NPC_ACTION_STRING=t.OPCODES[63708]=a(63708,"npc_action_string",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r(t.TYPE_S_LABEL,void 0,void 0)],void 0),t.OP_GET_PAD_COND=t.OPCODES[63709]=a(63709,"get_pad_cond",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_BUTTON_COND=t.OPCODES[63710]=a(63710,"get_button_cond",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_FREEZE_ENEMIES=t.OPCODES[63711]=a(63711,"freeze_enemies",void 0,[],void 0),t.OP_UNFREEZE_ENEMIES=t.OPCODES[63712]=a(63712,"unfreeze_enemies",void 0,[],void 0),t.OP_FREEZE_EVERYTHING=t.OPCODES[63713]=a(63713,"freeze_everything",void 0,[],void 0),t.OP_UNFREEZE_EVERYTHING=t.OPCODES[63714]=a(63714,"unfreeze_everything",void 0,[],void 0),t.OP_RESTORE_HP=t.OPCODES[63715]=a(63715,"restore_hp",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_RESTORE_TP=t.OPCODES[63716]=a(63716,"restore_tp",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CLOSE_CHAT_BUBBLE=t.OPCODES[63717]=a(63717,"close_chat_bubble",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_MOVE_COORDS_OBJECT=t.OPCODES[63718]=a(63718,"move_coords_object",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_AT_COORDS_CALL_EX=t.OPCODES[63719]=a(63719,"at_coords_call_ex",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8E8=t.OPCODES[63720]=a(63720,"unknown_f8e8",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8E9=t.OPCODES[63721]=a(63721,"unknown_f8e9",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8EA=t.OPCODES[63722]=a(63722,"unknown_f8ea",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8EB=t.OPCODES[63723]=a(63723,"unknown_f8eb",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F8EC=t.OPCODES[63724]=a(63724,"unknown_f8ec",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_ANIMATION_CHECK=t.OPCODES[63725]=a(63725,"animation_check",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_CALL_IMAGE_DATA=t.OPCODES[63726]=a(63726,"call_image_data",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_WORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F8EF=t.OPCODES[63727]=a(63727,"unknown_f8ef",void 0,[],void 0),t.OP_TURN_OFF_BGM_P2=t.OPCODES[63728]=a(63728,"turn_off_bgm_p2",void 0,[],void 0),t.OP_TURN_ON_BGM_P2=t.OPCODES[63729]=a(63729,"turn_on_bgm_p2",void 0,[],void 0),t.OP_LOAD_UNK_DATA=t.OPCODES[63730]=a(63730,"load_unk_data",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_D_LABEL,void 0,void 0)],n.Pop),t.OP_PARTICLE2=t.OPCODES[63731]=a(63731,"particle2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F8F4=t.OPCODES[63732]=a(63732,"unknown_f8f4",void 0,[],void 0),t.OP_UNKNOWN_F8F5=t.OPCODES[63733]=a(63733,"unknown_f8f5",void 0,[],void 0),t.OP_UNKNOWN_F8F6=t.OPCODES[63734]=a(63734,"unknown_f8f6",void 0,[],void 0),t.OP_UNKNOWN_F8F7=t.OPCODES[63735]=a(63735,"unknown_f8f7",void 0,[],void 0),t.OP_UNKNOWN_F8F8=t.OPCODES[63736]=a(63736,"unknown_f8f8",void 0,[],void 0),t.OP_UNKNOWN_F8F9=t.OPCODES[63737]=a(63737,"unknown_f8f9",void 0,[],void 0),t.OP_UNKNOWN_F8FA=t.OPCODES[63738]=a(63738,"unknown_f8fa",void 0,[],void 0),t.OP_UNKNOWN_F8FB=t.OPCODES[63739]=a(63739,"unknown_f8fb",void 0,[],void 0),t.OP_UNKNOWN_F8FC=t.OPCODES[63740]=a(63740,"unknown_f8fc",void 0,[],void 0),t.OP_UNKNOWN_F8FD=t.OPCODES[63741]=a(63741,"unknown_f8fd",void 0,[],void 0),t.OP_UNKNOWN_F8FE=t.OPCODES[63742]=a(63742,"unknown_f8fe",void 0,[],void 0),t.OP_UNKNOWN_F8FF=t.OPCODES[63743]=a(63743,"unknown_f8ff",void 0,[],void 0),t.OP_UNKNOWN_F900=t.OPCODES[63744]=a(63744,"unknown_f900",void 0,[],void 0),t.OP_DEC2FLOAT=t.OPCODES[63745]=a(63745,"dec2float",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FLOAT2DEC=t.OPCODES[63746]=a(63746,"float2dec",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FLET=t.OPCODES[63747]=a(63747,"flet",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FLETI=t.OPCODES[63748]=a(63748,"fleti",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],void 0),t.OP_UNKNOWN_F905=t.OPCODES[63749]=a(63749,"unknown_f905",void 0,[],void 0),t.OP_UNKNOWN_F906=t.OPCODES[63750]=a(63750,"unknown_f906",void 0,[],void 0),t.OP_UNKNOWN_F907=t.OPCODES[63751]=a(63751,"unknown_f907",void 0,[],void 0),t.OP_FADD=t.OPCODES[63752]=a(63752,"fadd",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FADDI=t.OPCODES[63753]=a(63753,"faddi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],void 0),t.OP_FSUB=t.OPCODES[63754]=a(63754,"fsub",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FSUBI=t.OPCODES[63755]=a(63755,"fsubi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],void 0),t.OP_FMUL=t.OPCODES[63756]=a(63756,"fmul",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FMULI=t.OPCODES[63757]=a(63757,"fmuli",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],void 0),t.OP_FDIV=t.OPCODES[63758]=a(63758,"fdiv",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_FDIVI=t.OPCODES[63759]=a(63759,"fdivi",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_FLOAT,void 0,s.Write)]},void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],void 0),t.OP_GET_UNKNOWN_COUNT=t.OPCODES[63760]=a(63760,"get_unknown_count",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_STACKABLE_ITEM_COUNT=t.OPCODES[63761]=a(63761,"get_stackable_item_count",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Player slot.",s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read),r(t.TYPE_DWORD,void 0,s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_FREEZE_AND_HIDE_EQUIP=t.OPCODES[63762]=a(63762,"freeze_and_hide_equip",void 0,[],void 0),t.OP_THAW_AND_SHOW_EQUIP=t.OPCODES[63763]=a(63763,"thaw_and_show_equip",void 0,[],void 0),t.OP_SET_PALETTEX_CALLBACK=t.OPCODES[63764]=a(63764,"set_palettex_callback",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_ACTIVATE_PALETTEX=t.OPCODES[63765]=a(63765,"activate_palettex",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_ENABLE_PALETTEX=t.OPCODES[63766]=a(63766,"enable_palettex",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_RESTORE_PALETTEX=t.OPCODES[63767]=a(63767,"restore_palettex",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_DISABLE_PALETTEX=t.OPCODES[63768]=a(63768,"disable_palettex",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_GET_PALETTEX_ACTIVATED=t.OPCODES[63769]=a(63769,"get_palettex_activated",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_UNKNOWN_PALETTEX_STATUS=t.OPCODES[63770]=a(63770,"get_unknown_palettex_status",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_DISABLE_MOVEMENT2=t.OPCODES[63771]=a(63771,"disable_movement2",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_ENABLE_MOVEMENT2=t.OPCODES[63772]=a(63772,"enable_movement2",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0)],n.Pop),t.OP_GET_TIME_PLAYED=t.OPCODES[63773]=a(63773,"get_time_played",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_GUILDCARD_TOTAL=t.OPCODES[63774]=a(63774,"get_guildcard_total",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_SLOT_MESETA=t.OPCODES[63775]=a(63775,"get_slot_meseta",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_PLAYER_LEVEL=t.OPCODES[63776]=a(63776,"get_player_level",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_SECTION_ID=t.OPCODES[63777]=a(63777,"get_section_id",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_PLAYER_HP=t.OPCODES[63778]=a(63778,"get_player_hp",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,"Maximum HP.",s.Write),r(t.TYPE_DWORD,"Current HP.",s.Write),r(t.TYPE_DWORD,"Maximum TP.",s.Write),r(t.TYPE_DWORD,"Current TP.",s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_FLOOR_NUMBER=t.OPCODES[63779]=a(63779,"get_floor_number",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_GET_COORD_PLAYER_DETECT=t.OPCODES[63780]=a(63780,"get_coord_player_detect",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,"Player slot.",s.Read)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Read)]},void 0,void 0)],void 0),t.OP_READ_GLOBAL_FLAG=t.OPCODES[63781]=a(63781,"read_global_flag",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_WRITE_GLOBAL_FLAG=t.OPCODES[63782]=a(63782,"write_global_flag",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F927=t.OPCODES[63783]=a(63783,"unknown_f927",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_FLOOR_PLAYER_DETECT=t.OPCODES[63784]=a(63784,"floor_player_detect",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write),r(t.TYPE_DWORD,void 0,s.Write),r(t.TYPE_DWORD,void 0,s.Write),r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_READ_DISK_FILE=t.OPCODES[63785]=a(63785,"read_disk_file",void 0,[r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_OPEN_PACK_SELECT=t.OPCODES[63786]=a(63786,"open_pack_select",void 0,[],void 0),t.OP_ITEM_SELECT=t.OPCODES[63787]=a(63787,"item_select",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_GET_ITEM_ID=t.OPCODES[63788]=a(63788,"get_item_id",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_COLOR_CHANGE=t.OPCODES[63789]=a(63789,"color_change",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SEND_STATISTIC=t.OPCODES[63790]=a(63790,"send_statistic",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F92F=t.OPCODES[63791]=a(63791,"unknown_f92f",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_CHAT_BOX=t.OPCODES[63792]=a(63792,"chat_box",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_CHAT_BUBBLE=t.OPCODES[63793]=a(63793,"chat_bubble",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F932=t.OPCODES[63794]=a(63794,"unknown_f932",void 0,[],void 0),t.OP_UNKNOWN_F933=t.OPCODES[63795]=a(63795,"unknown_f933",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_SCROLL_TEXT=t.OPCODES[63796]=a(63796,"scroll_text",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_GBA_UNKNOWN1=t.OPCODES[63797]=a(63797,"gba_unknown1",void 0,[],void 0),t.OP_GBA_UNKNOWN2=t.OPCODES[63798]=a(63798,"gba_unknown2",void 0,[],void 0),t.OP_GBA_UNKNOWN3=t.OPCODES[63799]=a(63799,"gba_unknown3",void 0,[],void 0),t.OP_ADD_DAMAGE_TO=t.OPCODES[63800]=a(63800,"add_damage_to",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_ITEM_DELETE3=t.OPCODES[63801]=a(63801,"item_delete3",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_GET_ITEM_INFO=t.OPCODES[63802]=a(63802,"get_item_info",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_ITEM_PACKING1=t.OPCODES[63803]=a(63803,"item_packing1",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_ITEM_PACKING2=t.OPCODES[63804]=a(63804,"item_packing2",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_GET_LANG_SETTING=t.OPCODES[63805]=a(63805,"get_lang_setting",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_ANY,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_PREPARE_STATISTIC=t.OPCODES[63806]=a(63806,"prepare_statistic",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_KEYWORD_DETECT=t.OPCODES[63807]=a(63807,"keyword_detect",void 0,[],void 0),t.OP_KEYWORD=t.OPCODES[63808]=a(63808,"keyword",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,"Player slot.",void 0),r(t.TYPE_STRING,void 0,void 0)],n.Pop),t.OP_GET_GUILDCARD_NUM=t.OPCODES[63809]=a(63809,"get_guildcard_num",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_UNKNOWN_F942=t.OPCODES[63810]=a(63810,"unknown_f942",void 0,[],void 0),t.OP_UNKNOWN_F943=t.OPCODES[63811]=a(63811,"unknown_f943",void 0,[],void 0),t.OP_GET_WRAP_STATUS=t.OPCODES[63812]=a(63812,"get_wrap_status",void 0,[r(t.TYPE_DWORD,"Player slot.",void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_INITIAL_FLOOR=t.OPCODES[63813]=a(63813,"initial_floor",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_SIN=t.OPCODES[63814]=a(63814,"sin",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_COS=t.OPCODES[63815]=a(63815,"cos",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F948=t.OPCODES[63816]=a(63816,"unknown_f948",void 0,[],void 0),t.OP_UNKNOWN_F949=t.OPCODES[63817]=a(63817,"unknown_f949",void 0,[],void 0),t.OP_BOSS_IS_DEAD2=t.OPCODES[63818]=a(63818,"boss_is_dead2",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F94B=t.OPCODES[63819]=a(63819,"unknown_f94b",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F94C=t.OPCODES[63820]=a(63820,"unknown_f94c",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_IS_THERE_CARDBATTLE=t.OPCODES[63821]=a(63821,"is_there_cardbattle",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_UNKNOWN_F94E=t.OPCODES[63822]=a(63822,"unknown_f94e",void 0,[],void 0),t.OP_UNKNOWN_F94F=t.OPCODES[63823]=a(63823,"unknown_f94f",void 0,[],void 0),t.OP_BB_P2_MENU=t.OPCODES[63824]=a(63824,"bb_p2_menu",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_BB_MAP_DESIGNATE=t.OPCODES[63825]=a(63825,"bb_map_designate",void 0,[r(t.TYPE_BYTE,void 0,void 0),r(t.TYPE_WORD,void 0,void 0),r(t.TYPE_BYTE,void 0,void 0),r(t.TYPE_BYTE,void 0,void 0)],void 0),t.OP_BB_GET_NUMBER_IN_PACK=t.OPCODES[63826]=a(63826,"bb_get_number_in_pack",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],void 0),t.OP_BB_SWAP_ITEM=t.OPCODES[63827]=a(63827,"bb_swap_item",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_BB_CHECK_WRAP=t.OPCODES[63828]=a(63828,"bb_check_wrap",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PD_ITEM=t.OPCODES[63829]=a(63829,"bb_exchange_pd_item",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PD_SRANK=t.OPCODES[63830]=a(63830,"bb_exchange_pd_srank",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PD_SPECIAL=t.OPCODES[63831]=a(63831,"bb_exchange_pd_special",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PD_PERCENT=t.OPCODES[63832]=a(63832,"bb_exchange_pd_percent",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F959=t.OPCODES[63833]=a(63833,"unknown_f959",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F95A=t.OPCODES[63834]=a(63834,"unknown_f95a",void 0,[],void 0),t.OP_UNKNOWN_F95B=t.OPCODES[63835]=a(63835,"unknown_f95b",void 0,[],void 0),t.OP_BB_EXCHANGE_SLT=t.OPCODES[63836]=a(63836,"bb_exchange_slt",void 0,[r(t.TYPE_DWORD,void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PC=t.OPCODES[63837]=a(63837,"bb_exchange_pc",void 0,[],void 0),t.OP_BB_BOX_CREATE_BP=t.OPCODES[63838]=a(63838,"bb_box_create_bp",void 0,[r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0),r(t.TYPE_FLOAT,void 0,void 0)],n.Pop),t.OP_BB_EXCHANGE_PT=t.OPCODES[63839]=a(63839,"bb_exchange_pt",void 0,[r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r({kind:o.RegTupRef,register_tuples:[r(t.TYPE_DWORD,void 0,s.Write)]},void 0,void 0),r(t.TYPE_DWORD,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0),r(t.TYPE_I_LABEL,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F960=t.OPCODES[63840]=a(63840,"unknown_f960",void 0,[r(t.TYPE_DWORD,void 0,void 0)],n.Pop),t.OP_UNKNOWN_F961=t.OPCODES[63841]=a(63841,"unknown_f961",void 0,[],void 0),t.OP_UNKNOWN_F962=t.OPCODES[63842]=a(63842,"unknown_f962",void 0,[],void 0),t.OP_UNKNOWN_F963=t.OPCODES[63843]=a(63843,"unknown_f963",void 0,[],void 0),t.OP_UNKNOWN_F964=t.OPCODES[63844]=a(63844,"unknown_f964",void 0,[],void 0),t.OP_UNKNOWN_F965=t.OPCODES[63845]=a(63845,"unknown_f965",void 0,[],void 0),t.OP_UNKNOWN_F966=t.OPCODES[63846]=a(63846,"unknown_f966",void 0,[],void 0),t.OP_UNKNOWN_F967=t.OPCODES[63847]=a(63847,"unknown_f967",void 0,[],void 0),t.OP_UNKNOWN_F968=t.OPCODES[63848]=a(63848,"unknown_f968",void 0,[],void 0),t.OP_UNKNOWN_F969=t.OPCODES[63849]=a(63849,"unknown_f969",void 0,[],void 0),t.OP_UNKNOWN_F96A=t.OPCODES[63850]=a(63850,"unknown_f96a",void 0,[],void 0),t.OP_UNKNOWN_F96B=t.OPCODES[63851]=a(63851,"unknown_f96b",void 0,[],void 0),t.OP_UNKNOWN_F96C=t.OPCODES[63852]=a(63852,"unknown_f96c",void 0,[],void 0),t.OP_UNKNOWN_F96D=t.OPCODES[63853]=a(63853,"unknown_f96d",void 0,[],void 0),t.OP_UNKNOWN_F96E=t.OPCODES[63854]=a(63854,"unknown_f96e",void 0,[],void 0),t.OP_UNKNOWN_F96F=t.OPCODES[63855]=a(63855,"unknown_f96f",void 0,[],void 0),t.OP_UNKNOWN_F970=t.OPCODES[63856]=a(63856,"unknown_f970",void 0,[],void 0),t.OP_UNKNOWN_F971=t.OPCODES[63857]=a(63857,"unknown_f971",void 0,[],void 0),t.OP_UNKNOWN_F972=t.OPCODES[63858]=a(63858,"unknown_f972",void 0,[],void 0),t.OP_UNKNOWN_F973=t.OPCODES[63859]=a(63859,"unknown_f973",void 0,[],void 0),t.OP_UNKNOWN_F974=t.OPCODES[63860]=a(63860,"unknown_f974",void 0,[],void 0),t.OP_UNKNOWN_F975=t.OPCODES[63861]=a(63861,"unknown_f975",void 0,[],void 0),t.OP_UNKNOWN_F976=t.OPCODES[63862]=a(63862,"unknown_f976",void 0,[],void 0),t.OP_UNKNOWN_F977=t.OPCODES[63863]=a(63863,"unknown_f977",void 0,[],void 0),t.OP_UNKNOWN_F978=t.OPCODES[63864]=a(63864,"unknown_f978",void 0,[],void 0),t.OP_UNKNOWN_F979=t.OPCODES[63865]=a(63865,"unknown_f979",void 0,[],void 0),t.OP_UNKNOWN_F97A=t.OPCODES[63866]=a(63866,"unknown_f97a",void 0,[],void 0),t.OP_UNKNOWN_F97B=t.OPCODES[63867]=a(63867,"unknown_f97b",void 0,[],void 0),t.OP_UNKNOWN_F97C=t.OPCODES[63868]=a(63868,"unknown_f97c",void 0,[],void 0),t.OP_UNKNOWN_F97D=t.OPCODES[63869]=a(63869,"unknown_f97d",void 0,[],void 0),t.OP_UNKNOWN_F97E=t.OPCODES[63870]=a(63870,"unknown_f97e",void 0,[],void 0),t.OP_UNKNOWN_F97F=t.OPCODES[63871]=a(63871,"unknown_f97f",void 0,[],void 0),t.OP_UNKNOWN_F980=t.OPCODES[63872]=a(63872,"unknown_f980",void 0,[],void 0),t.OP_UNKNOWN_F981=t.OPCODES[63873]=a(63873,"unknown_f981",void 0,[],void 0),t.OP_UNKNOWN_F982=t.OPCODES[63874]=a(63874,"unknown_f982",void 0,[],void 0),t.OP_UNKNOWN_F983=t.OPCODES[63875]=a(63875,"unknown_f983",void 0,[],void 0),t.OP_UNKNOWN_F984=t.OPCODES[63876]=a(63876,"unknown_f984",void 0,[],void 0),t.OP_UNKNOWN_F985=t.OPCODES[63877]=a(63877,"unknown_f985",void 0,[],void 0),t.OP_UNKNOWN_F986=t.OPCODES[63878]=a(63878,"unknown_f986",void 0,[],void 0),t.OP_UNKNOWN_F987=t.OPCODES[63879]=a(63879,"unknown_f987",void 0,[],void 0),t.OP_UNKNOWN_F988=t.OPCODES[63880]=a(63880,"unknown_f988",void 0,[],void 0),t.OP_UNKNOWN_F989=t.OPCODES[63881]=a(63881,"unknown_f989",void 0,[],void 0),t.OP_UNKNOWN_F98A=t.OPCODES[63882]=a(63882,"unknown_f98a",void 0,[],void 0),t.OP_UNKNOWN_F98B=t.OPCODES[63883]=a(63883,"unknown_f98b",void 0,[],void 0),t.OP_UNKNOWN_F98C=t.OPCODES[63884]=a(63884,"unknown_f98c",void 0,[],void 0),t.OP_UNKNOWN_F98D=t.OPCODES[63885]=a(63885,"unknown_f98d",void 0,[],void 0),t.OP_UNKNOWN_F98E=t.OPCODES[63886]=a(63886,"unknown_f98e",void 0,[],void 0),t.OP_UNKNOWN_F98F=t.OPCODES[63887]=a(63887,"unknown_f98f",void 0,[],void 0),t.OP_UNKNOWN_F990=t.OPCODES[63888]=a(63888,"unknown_f990",void 0,[],void 0),t.OP_UNKNOWN_F991=t.OPCODES[63889]=a(63889,"unknown_f991",void 0,[],void 0),t.OP_UNKNOWN_F992=t.OPCODES[63890]=a(63890,"unknown_f992",void 0,[],void 0),t.OP_UNKNOWN_F993=t.OPCODES[63891]=a(63891,"unknown_f993",void 0,[],void 0),t.OP_UNKNOWN_F994=t.OPCODES[63892]=a(63892,"unknown_f994",void 0,[],void 0),t.OP_UNKNOWN_F995=t.OPCODES[63893]=a(63893,"unknown_f995",void 0,[],void 0),t.OP_UNKNOWN_F996=t.OPCODES[63894]=a(63894,"unknown_f996",void 0,[],void 0),t.OP_UNKNOWN_F997=t.OPCODES[63895]=a(63895,"unknown_f997",void 0,[],void 0),t.OP_UNKNOWN_F998=t.OPCODES[63896]=a(63896,"unknown_f998",void 0,[],void 0),t.OP_UNKNOWN_F999=t.OPCODES[63897]=a(63897,"unknown_f999",void 0,[],void 0),t.OP_UNKNOWN_F99A=t.OPCODES[63898]=a(63898,"unknown_f99a",void 0,[],void 0),t.OP_UNKNOWN_F99B=t.OPCODES[63899]=a(63899,"unknown_f99b",void 0,[],void 0),t.OP_UNKNOWN_F99C=t.OPCODES[63900]=a(63900,"unknown_f99c",void 0,[],void 0),t.OP_UNKNOWN_F99D=t.OPCODES[63901]=a(63901,"unknown_f99d",void 0,[],void 0),t.OP_UNKNOWN_F99E=t.OPCODES[63902]=a(63902,"unknown_f99e",void 0,[],void 0),t.OP_UNKNOWN_F99F=t.OPCODES[63903]=a(63903,"unknown_f99f",void 0,[],void 0),t.OP_UNKNOWN_F9A0=t.OPCODES[63904]=a(63904,"unknown_f9a0",void 0,[],void 0),t.OP_UNKNOWN_F9A1=t.OPCODES[63905]=a(63905,"unknown_f9a1",void 0,[],void 0),t.OP_UNKNOWN_F9A2=t.OPCODES[63906]=a(63906,"unknown_f9a2",void 0,[],void 0),t.OP_UNKNOWN_F9A3=t.OPCODES[63907]=a(63907,"unknown_f9a3",void 0,[],void 0),t.OP_UNKNOWN_F9A4=t.OPCODES[63908]=a(63908,"unknown_f9a4",void 0,[],void 0),t.OP_UNKNOWN_F9A5=t.OPCODES[63909]=a(63909,"unknown_f9a5",void 0,[],void 0),t.OP_UNKNOWN_F9A6=t.OPCODES[63910]=a(63910,"unknown_f9a6",void 0,[],void 0),t.OP_UNKNOWN_F9A7=t.OPCODES[63911]=a(63911,"unknown_f9a7",void 0,[],void 0),t.OP_UNKNOWN_F9A8=t.OPCODES[63912]=a(63912,"unknown_f9a8",void 0,[],void 0),t.OP_UNKNOWN_F9A9=t.OPCODES[63913]=a(63913,"unknown_f9a9",void 0,[],void 0),t.OP_UNKNOWN_F9AA=t.OPCODES[63914]=a(63914,"unknown_f9aa",void 0,[],void 0),t.OP_UNKNOWN_F9AB=t.OPCODES[63915]=a(63915,"unknown_f9ab",void 0,[],void 0),t.OP_UNKNOWN_F9AC=t.OPCODES[63916]=a(63916,"unknown_f9ac",void 0,[],void 0),t.OP_UNKNOWN_F9AD=t.OPCODES[63917]=a(63917,"unknown_f9ad",void 0,[],void 0),t.OP_UNKNOWN_F9AE=t.OPCODES[63918]=a(63918,"unknown_f9ae",void 0,[],void 0),t.OP_UNKNOWN_F9AF=t.OPCODES[63919]=a(63919,"unknown_f9af",void 0,[],void 0),t.OP_UNKNOWN_F9B0=t.OPCODES[63920]=a(63920,"unknown_f9b0",void 0,[],void 0),t.OP_UNKNOWN_F9B1=t.OPCODES[63921]=a(63921,"unknown_f9b1",void 0,[],void 0),t.OP_UNKNOWN_F9B2=t.OPCODES[63922]=a(63922,"unknown_f9b2",void 0,[],void 0),t.OP_UNKNOWN_F9B3=t.OPCODES[63923]=a(63923,"unknown_f9b3",void 0,[],void 0),t.OP_UNKNOWN_F9B4=t.OPCODES[63924]=a(63924,"unknown_f9b4",void 0,[],void 0),t.OP_UNKNOWN_F9B5=t.OPCODES[63925]=a(63925,"unknown_f9b5",void 0,[],void 0),t.OP_UNKNOWN_F9B6=t.OPCODES[63926]=a(63926,"unknown_f9b6",void 0,[],void 0),t.OP_UNKNOWN_F9B7=t.OPCODES[63927]=a(63927,"unknown_f9b7",void 0,[],void 0),t.OP_UNKNOWN_F9B8=t.OPCODES[63928]=a(63928,"unknown_f9b8",void 0,[],void 0),t.OP_UNKNOWN_F9B9=t.OPCODES[63929]=a(63929,"unknown_f9b9",void 0,[],void 0),t.OP_UNKNOWN_F9BA=t.OPCODES[63930]=a(63930,"unknown_f9ba",void 0,[],void 0),t.OP_UNKNOWN_F9BB=t.OPCODES[63931]=a(63931,"unknown_f9bb",void 0,[],void 0),t.OP_UNKNOWN_F9BC=t.OPCODES[63932]=a(63932,"unknown_f9bc",void 0,[],void 0),t.OP_UNKNOWN_F9BD=t.OPCODES[63933]=a(63933,"unknown_f9bd",void 0,[],void 0),t.OP_UNKNOWN_F9BE=t.OPCODES[63934]=a(63934,"unknown_f9be",void 0,[],void 0),t.OP_UNKNOWN_F9BF=t.OPCODES[63935]=a(63935,"unknown_f9bf",void 0,[],void 0),t.OP_UNKNOWN_F9C0=t.OPCODES[63936]=a(63936,"unknown_f9c0",void 0,[],void 0),t.OP_UNKNOWN_F9C1=t.OPCODES[63937]=a(63937,"unknown_f9c1",void 0,[],void 0),t.OP_UNKNOWN_F9C2=t.OPCODES[63938]=a(63938,"unknown_f9c2",void 0,[],void 0),t.OP_UNKNOWN_F9C3=t.OPCODES[63939]=a(63939,"unknown_f9c3",void 0,[],void 0),t.OP_UNKNOWN_F9C4=t.OPCODES[63940]=a(63940,"unknown_f9c4",void 0,[],void 0),t.OP_UNKNOWN_F9C5=t.OPCODES[63941]=a(63941,"unknown_f9c5",void 0,[],void 0),t.OP_UNKNOWN_F9C6=t.OPCODES[63942]=a(63942,"unknown_f9c6",void 0,[],void 0),t.OP_UNKNOWN_F9C7=t.OPCODES[63943]=a(63943,"unknown_f9c7",void 0,[],void 0),t.OP_UNKNOWN_F9C8=t.OPCODES[63944]=a(63944,"unknown_f9c8",void 0,[],void 0),t.OP_UNKNOWN_F9C9=t.OPCODES[63945]=a(63945,"unknown_f9c9",void 0,[],void 0),t.OP_UNKNOWN_F9CA=t.OPCODES[63946]=a(63946,"unknown_f9ca",void 0,[],void 0),t.OP_UNKNOWN_F9CB=t.OPCODES[63947]=a(63947,"unknown_f9cb",void 0,[],void 0),t.OP_UNKNOWN_F9CC=t.OPCODES[63948]=a(63948,"unknown_f9cc",void 0,[],void 0),t.OP_UNKNOWN_F9CD=t.OPCODES[63949]=a(63949,"unknown_f9cd",void 0,[],void 0),t.OP_UNKNOWN_F9CE=t.OPCODES[63950]=a(63950,"unknown_f9ce",void 0,[],void 0),t.OP_UNKNOWN_F9CF=t.OPCODES[63951]=a(63951,"unknown_f9cf",void 0,[],void 0),t.OP_UNKNOWN_F9D0=t.OPCODES[63952]=a(63952,"unknown_f9d0",void 0,[],void 0),t.OP_UNKNOWN_F9D1=t.OPCODES[63953]=a(63953,"unknown_f9d1",void 0,[],void 0),t.OP_UNKNOWN_F9D2=t.OPCODES[63954]=a(63954,"unknown_f9d2",void 0,[],void 0),t.OP_UNKNOWN_F9D3=t.OPCODES[63955]=a(63955,"unknown_f9d3",void 0,[],void 0),t.OP_UNKNOWN_F9D4=t.OPCODES[63956]=a(63956,"unknown_f9d4",void 0,[],void 0),t.OP_UNKNOWN_F9D5=t.OPCODES[63957]=a(63957,"unknown_f9d5",void 0,[],void 0),t.OP_UNKNOWN_F9D6=t.OPCODES[63958]=a(63958,"unknown_f9d6",void 0,[],void 0),t.OP_UNKNOWN_F9D7=t.OPCODES[63959]=a(63959,"unknown_f9d7",void 0,[],void 0),t.OP_UNKNOWN_F9D8=t.OPCODES[63960]=a(63960,"unknown_f9d8",void 0,[],void 0),t.OP_UNKNOWN_F9D9=t.OPCODES[63961]=a(63961,"unknown_f9d9",void 0,[],void 0),t.OP_UNKNOWN_F9DA=t.OPCODES[63962]=a(63962,"unknown_f9da",void 0,[],void 0),t.OP_UNKNOWN_F9DB=t.OPCODES[63963]=a(63963,"unknown_f9db",void 0,[],void 0),t.OP_UNKNOWN_F9DC=t.OPCODES[63964]=a(63964,"unknown_f9dc",void 0,[],void 0),t.OP_UNKNOWN_F9DD=t.OPCODES[63965]=a(63965,"unknown_f9dd",void 0,[],void 0),t.OP_UNKNOWN_F9DE=t.OPCODES[63966]=a(63966,"unknown_f9de",void 0,[],void 0),t.OP_UNKNOWN_F9DF=t.OPCODES[63967]=a(63967,"unknown_f9df",void 0,[],void 0),t.OP_UNKNOWN_F9E0=t.OPCODES[63968]=a(63968,"unknown_f9e0",void 0,[],void 0),t.OP_UNKNOWN_F9E1=t.OPCODES[63969]=a(63969,"unknown_f9e1",void 0,[],void 0),t.OP_UNKNOWN_F9E2=t.OPCODES[63970]=a(63970,"unknown_f9e2",void 0,[],void 0),t.OP_UNKNOWN_F9E3=t.OPCODES[63971]=a(63971,"unknown_f9e3",void 0,[],void 0),t.OP_UNKNOWN_F9E4=t.OPCODES[63972]=a(63972,"unknown_f9e4",void 0,[],void 0),t.OP_UNKNOWN_F9E5=t.OPCODES[63973]=a(63973,"unknown_f9e5",void 0,[],void 0),t.OP_UNKNOWN_F9E6=t.OPCODES[63974]=a(63974,"unknown_f9e6",void 0,[],void 0),t.OP_UNKNOWN_F9E7=t.OPCODES[63975]=a(63975,"unknown_f9e7",void 0,[],void 0),t.OP_UNKNOWN_F9E8=t.OPCODES[63976]=a(63976,"unknown_f9e8",void 0,[],void 0),t.OP_UNKNOWN_F9E9=t.OPCODES[63977]=a(63977,"unknown_f9e9",void 0,[],void 0),t.OP_UNKNOWN_F9EA=t.OPCODES[63978]=a(63978,"unknown_f9ea",void 0,[],void 0),t.OP_UNKNOWN_F9EB=t.OPCODES[63979]=a(63979,"unknown_f9eb",void 0,[],void 0),t.OP_UNKNOWN_F9EC=t.OPCODES[63980]=a(63980,"unknown_f9ec",void 0,[],void 0),t.OP_UNKNOWN_F9ED=t.OPCODES[63981]=a(63981,"unknown_f9ed",void 0,[],void 0),t.OP_UNKNOWN_F9EE=t.OPCODES[63982]=a(63982,"unknown_f9ee",void 0,[],void 0),t.OP_UNKNOWN_F9EF=t.OPCODES[63983]=a(63983,"unknown_f9ef",void 0,[],void 0),t.OP_UNKNOWN_F9F0=t.OPCODES[63984]=a(63984,"unknown_f9f0",void 0,[],void 0),t.OP_UNKNOWN_F9F1=t.OPCODES[63985]=a(63985,"unknown_f9f1",void 0,[],void 0),t.OP_UNKNOWN_F9F2=t.OPCODES[63986]=a(63986,"unknown_f9f2",void 0,[],void 0),t.OP_UNKNOWN_F9F3=t.OPCODES[63987]=a(63987,"unknown_f9f3",void 0,[],void 0),t.OP_UNKNOWN_F9F4=t.OPCODES[63988]=a(63988,"unknown_f9f4",void 0,[],void 0),t.OP_UNKNOWN_F9F5=t.OPCODES[63989]=a(63989,"unknown_f9f5",void 0,[],void 0),t.OP_UNKNOWN_F9F6=t.OPCODES[63990]=a(63990,"unknown_f9f6",void 0,[],void 0),t.OP_UNKNOWN_F9F7=t.OPCODES[63991]=a(63991,"unknown_f9f7",void 0,[],void 0),t.OP_UNKNOWN_F9F8=t.OPCODES[63992]=a(63992,"unknown_f9f8",void 0,[],void 0),t.OP_UNKNOWN_F9F9=t.OPCODES[63993]=a(63993,"unknown_f9f9",void 0,[],void 0),t.OP_UNKNOWN_F9FA=t.OPCODES[63994]=a(63994,"unknown_f9fa",void 0,[],void 0),t.OP_UNKNOWN_F9FB=t.OPCODES[63995]=a(63995,"unknown_f9fb",void 0,[],void 0),t.OP_UNKNOWN_F9FC=t.OPCODES[63996]=a(63996,"unknown_f9fc",void 0,[],void 0),t.OP_UNKNOWN_F9FD=t.OPCODES[63997]=a(63997,"unknown_f9fd",void 0,[],void 0),t.OP_UNKNOWN_F9FE=t.OPCODES[63998]=a(63998,"unknown_f9fe",void 0,[],void 0),t.OP_UNKNOWN_F9FF=t.OPCODES[63999]=a(63999,"unknown_f9ff",void 0,[],void 0),t.OPCODES.forEach(e=>{t.OPCODES_BY_MNEMONIC.set(e.mnemonic,e)})},Za3H:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("nN8q"),n=i("6cU9"),r=i("w6HN"),a=i("4/Uj"),_=i("KUR2"),d=i("469Q"),l=i("4SjJ");class c extends s.ResizableWidget{constructor(){super(),this.element=o.el.div({class:"viewer_TextureView"}),this.open_file_button=new n.FileButton("Open file...",{icon_left:o.Icon.File,accept:".xvm"}),this.tool_bar=this.disposable(new r.ToolBar({children:[this.open_file_button]})),this.renderer_view=this.disposable(new _.RendererWidget(new d.TextureRenderer)),this.element.append(this.tool_bar.element,this.renderer_view.element),this.disposable(this.open_file_button.files.observe(({value:e})=>{e.length&&a.texture_store.load_file(e[0])})),this.renderer_view.start_rendering(),this.disposable(l.gui_store.tool.observe(({value:e})=>{e===l.GuiTool.Viewer?this.renderer_view.start_rendering():this.renderer_view.stop_rendering()})),this.finalize_construction(c.prototype)}resize(e,t){return super.resize(e,t),this.renderer_view.resize(e,Math.max(0,t-this.tool_bar.height)),this}}t.TextureView=c},aEXR:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("bcBH"),n=i("NRxM"),r=i("XDYw"),a=i("y42t"),_=i("Yuai"),d=i("AUhH"),l=i("eFYZ"),c=new d.LoadingCache,u=new d.LoadingCache;function p(e,t){const i=v(e,t,"render").then(e=>l.area_geometry_to_sections_and_object_3d(a.parse_area_geometry(new n.ArrayBufferCursor(e,s.Endianness.Little)),t));return{geometry:i.then(([,e])=>e),sections:i.then(([e])=>e)}}t.load_area_sections=function(e,t){return o(this,void 0,void 0,(function*(){return c.get_or_set(`${e}-${t.area.id}-${t.id}`,()=>p(e,t)).sections}))},t.load_area_render_geometry=function(e,t){return o(this,void 0,void 0,(function*(){return c.get_or_set(`${e}-${t.area.id}-${t.id}`,()=>p(e,t)).geometry}))},t.load_area_collision_geometry=function(e,t){return o(this,void 0,void 0,(function*(){return u.get_or_set(`${e}-${t.area.id}-${t.id}`,()=>v(e,t,"collision").then(e=>l.area_collision_geometry_to_object_3d(r.parse_area_collision_geometry(new n.ArrayBufferCursor(e,s.Endianness.Little)))))}))};const h=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]];function v(e,t,i){return o(this,void 0,void 0,(function*(){const o=function(e,t){let i=t.area.id,o=t.id;16===i&&1===o&&(i=17,o=1);const s=h[e-1];if(0<=i&&i<s.length){const[t,n]=s[i];if(0<=o&&o<n){let e;return e=1===n?"":(e=String(o)).padStart(2,"0"),`/maps/map_${t}${e}`}throw new Error(`Unknown variant ${o} of area ${i} in episode ${e}.`)}throw new Error(`Unknown episode ${e} area ${i}.`)}(e,t),s="render"===i?"n.rel":"c.rel";return _.load_array_buffer(o+s)}))}},bJO5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO");t.AreaVariantModel=class{constructor(e,t){if(this._sections=o.list_property(),this.sections=this._sections,!Number.isInteger(e)||e<0)throw new Error(`Expected id to be a non-negative integer, got ${e}.`);this.id=e,this.area=t}set_sections(e){return this._sections.val=e,this}}},bcBH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(t.Endianness||(t.Endianness={}))},bqrC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("xs7i"),s=i("v2aa"),n=i("lg9k"),r=i("+oIp"),a=i("sZ1+"),_=i("ZPAt"),d=i("uaZj"),l=i("IjTL"),c=i("Womt");t.create_new_quest=function(e){if(e===o.Episode.II)throw new Error("Episode II not yet supported.");if(e===o.Episode.IV)throw new Error("Episode IV not yet supported.");return new s.QuestModel(0,0,"Untitled","Created with phantasmal.world.","Created with phantasmal.world.",e,(new Map).set(0,0),[new d.QuestObjectModel(r.ObjectType.MenuActivation,16384,0,0,10,new c.Vector3(-16.313568115234375,3,-579.5118408203125),new c.Euler(.0009587526218325454,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365279104]]),[[2,0,0,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16385,0,0,10,new c.Vector3(-393.07318115234375,10,-12.964752197265625),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",9183549615799121e-56],["property_1",1.0000011920928955],["property_2",1],["property_3",0],["property_4",0],["property_5",0],["property_6",2365279264]]),[[2,0,1,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16386,0,0,10,new c.Vector3(-458.60699462890625,10,-51.270660400390625),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",2],["property_4",65536],["property_5",10],["property_6",2365279424]]),[[2,0,2,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16387,0,0,10,new c.Vector3(-430.19696044921875,10,-24.490447998046875),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",3],["property_4",0],["property_5",0],["property_6",2365279584]]),[[2,0,3,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16388,0,0,10,new c.Vector3(.995330810546875,0,-37.0010986328125),new c.Euler(0,4.712460886831327,0,"ZXY"),new Map([["property_0",0],["property_1",1],["property_2",1],["property_3",0],["property_4",0],["property_5",0],["property_6",2365279744]]),[[2,0,4,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16389,0,0,10,new c.Vector3(3.0009307861328125,0,-23.99688720703125),new c.Euler(0,4.859725289544806,0,"ZXY"),new Map([["property_0",1.000000238418579],["property_1",1],["property_2",1],["property_3",0],["property_4",0],["property_5",0],["property_6",2365279904]]),[[2,0,5,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16390,0,0,10,new c.Vector3(2.0015106201171875,0,-50.00386047363281),new c.Euler(0,4.565196484117848,0,"ZXY"),new Map([["property_0",2.000002384185791],["property_1",1],["property_2",1],["property_3",0],["property_4",0],["property_5",0],["property_6",2365280064]]),[[2,0,6,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16391,0,0,10,new c.Vector3(4.9973907470703125,0,-61.99664306640625),new c.Euler(0,4.368843947166543,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",65536],["property_4",10],["property_5",0],["property_6",2365280224]]),[[2,0,7,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MainRagolTeleporter,18264,0,0,10,new c.Vector3(132.00314331054688,1.000000238418579,-265.002197265625),new c.Euler(0,.49088134237826325,0,"ZXY"),new Map([["property_0",1.000000238418579],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365227216]]),[[0,0,87,7,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PrincipalWarp,16393,0,0,10,new c.Vector3(-228,0,-2020.99951171875),new c.Euler(0,2.9452880542695796,0,"ZXY"),new Map([["property_0",-10.000004768371582],["property_1",0],["property_2",-30.000030517578125],["property_3",0],["property_4",65536],["property_5",65536],["property_6",2365280688]]),[[2,0,9,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16394,0,0,10,new c.Vector3(-41.000030517578125,0,42.37322998046875),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",4],["property_4",0],["property_5",0],["property_6",2365280992]]),[[2,0,10,0,0,0],[1,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16395,0,0,10,new c.Vector3(-479.21673583984375,8.781256675720215,-322.465576171875),new c.Euler(6.28328118244177,.0009587526218325454,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",5],["property_4",0],["property_5",0],["property_6",2365281152]]),[[2,0,11,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PrincipalWarp,16396,0,0,10,new c.Vector3(-228,0,-351.0015869140625),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",10.000006675720215],["property_1",0],["property_2",-1760.0010986328125],["property_3",32768],["property_4",0],["property_5",0],["property_6",2365281312]]),[[2,0,12,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.TelepipeLocation,16397,0,0,10,new c.Vector3(-561.88232421875,0,-406.8829345703125),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",0],["property_4",0],["property_5",0],["property_6",2365281616]]),[[2,0,13,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.TelepipeLocation,16398,0,0,10,new c.Vector3(-547.8557739257812,0,-444.8822326660156),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365281808]]),[[2,0,14,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.TelepipeLocation,16399,0,0,10,new c.Vector3(-486.441650390625,0,-497.4501647949219),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",9183549615799121e-56],["property_1",1.0000011920928955],["property_2",1],["property_3",3],["property_4",0],["property_5",0],["property_6",2365282e3]]),[[2,0,15,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.TelepipeLocation,16400,0,0,10,new c.Vector3(-522.4052734375,0,-474.1882629394531),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1],["property_1",1],["property_2",1],["property_3",2],["property_4",65536],["property_5",10],["property_6",2365282192]]),[[2,0,16,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MedicalCenterDoor,16401,0,0,10,new c.Vector3(-34.49853515625,0,-384.4951171875),new c.Euler(0,5.497871034636549,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365282384]]),[[2,0,17,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.ShopDoor,16402,0,0,10,new c.Vector3(-393.0031433105469,0,-143.49981689453125),new c.Euler(0,3.141640591220885,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365282640]]),[[2,0,18,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.MenuActivation,16403,0,0,10,new c.Vector3(-355.17462158203125,0,-43.15193176269531),new c.Euler(0,0,0,"ZXY"),new Map([["property_0",1.000000238418579],["property_1",1],["property_2",1],["property_3",6],["property_4",0],["property_5",0],["property_6",2365282896]]),[[2,0,19,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.HuntersGuildDoor,16404,0,0,10,new c.Vector3(-43.00239562988281,0,-118.00120544433594),new c.Euler(0,3.141640591220885,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365283056]]),[[2,0,20,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.TeleporterDoor,16405,0,0,10,new c.Vector3(26.000823974609375,0,-265.99810791015625),new c.Euler(0,3.141640591220885,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365283312]]),[[2,0,21,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16406,0,0,10,new c.Vector3(57.81005859375,0,-268.5472412109375),new c.Euler(0,4.712460886831327,0,"ZXY"),new Map([["property_0",0],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365283568]]),[[2,0,22,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16407,0,0,10,new c.Vector3(66.769287109375,0,-252.3748779296875),new c.Euler(0,4.712460886831327,0,"ZXY"),new Map([["property_0",1.000000238418579],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365283728]]),[[2,0,23,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16408,0,0,10,new c.Vector3(67.36819458007812,0,-284.9297180175781),new c.Euler(0,4.712460886831327,0,"ZXY"),new Map([["property_0",2.000000476837158],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365283888]]),[[2,0,24,0,0,0],[0,0]]),new d.QuestObjectModel(r.ObjectType.PlayerSet,16409,0,0,10,new c.Vector3(77.10488891601562,0,-269.2830505371094),new c.Euler(0,4.712460886831327,0,"ZXY"),new Map([["property_0",3.0000007152557373],["property_1",1],["property_2",1],["property_3",1],["property_4",0],["property_5",0],["property_6",2365284048]]),[[2,0,25,0,0,0],[0,0]])],[new l.QuestNpcModel(a.NpcType.GuildLady,29,1011.0010986328125,850,0,0,10,new c.Vector3(-49.0010986328125,0,50.996429443359375),new c.Euler(0,2.3562304434156633,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,86,0,0,0,0,23,87],[0,0,0,0,0,0],[128,238,223,176]]),new l.QuestNpcModel(a.NpcType.FemaleFat,4,1016.0010986328125,100,1,0,20,new c.Vector3(167.99769592285156,0,83.99686431884766),new c.Euler(0,3.927050739026106,0,"ZXY"),new c.Vector3(24.000009536743164,0,0),[[0,0,7,88,0,0,0,0,23,89],[0,0,0,0,0,0],[128,238,232,48]]),new l.QuestNpcModel(a.NpcType.MaleDwarf,10,1015.0010986328125,90,1,0,20,new c.Vector3(156.0028839111328,0,-49.99967575073242),new c.Euler(0,5.497871034636549,0,"ZXY"),new c.Vector3(30.000009536743164,0,0),[[0,0,7,89,0,0,0,0,23,90],[0,0,0,0,0,0],[128,238,236,176]]),new l.QuestNpcModel(a.NpcType.RedSoldier,26,1020.0010986328125,130,0,0,20,new c.Vector3(237.9988250732422,0,-14.0001220703125),new c.Euler(0,5.497871034636549,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,90,0,0,0,0,23,91],[0,0,0,0,0,0],[128,238,241,48]]),new l.QuestNpcModel(a.NpcType.BlueSoldier,25,1019.0010986328125,120,0,0,20,new c.Vector3(238.00379943847656,0,63.00413513183594),new c.Euler(0,3.927050739026106,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,91,0,0,0,0,23,92],[0,0,0,0,0,0],[128,238,245,176]]),new l.QuestNpcModel(a.NpcType.FemaleMacho,5,1014.0010986328125,80,1,0,20,new c.Vector3(-2.001882553100586,0,35.0036506652832),new c.Euler(0,3.141640591220885,0,"ZXY"),new c.Vector3(26.000009536743164,0,0),[[0,0,7,92,0,0,0,0,23,93],[0,0,0,0,0,0],[128,238,250,48]]),new l.QuestNpcModel(a.NpcType.Scientist,30,1013.0010986328125,70,1,0,20,new c.Vector3(-147.0000457763672,0,-7.996537208557129),new c.Euler(0,2.577127047485882,0,"ZXY"),new c.Vector3(30.000009536743164,0,0),[[0,0,7,93,0,0,0,0,23,94],[0,0,0,0,0,0],[128,238,254,176]]),new l.QuestNpcModel(a.NpcType.MaleOld,13,1012.0010986328125,60,1,0,20,new c.Vector3(-219.99710083007812,0,-100.0008316040039),new c.Euler(0,0,0,"ZXY"),new c.Vector3(30.000011444091797,0,0),[[0,0,7,94,0,0,0,0,23,95],[0,0,0,0,0,0],[128,239,3,48]]),new l.QuestNpcModel(a.NpcType.GuildLady,29,1010.0010986328125,840,0,0,20,new c.Vector3(-262.5099792480469,0,-24.53999900817871),new c.Euler(0,1.963525369513053,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,95,0,0,0,0,23,106],[0,0,0,0,0,0],[128,239,100,192]]),new l.QuestNpcModel(a.NpcType.Tekker,28,1009,830,0,0,30,new c.Vector3(-43.70983123779297,2.5999999046325684,-52.78248596191406),new c.Euler(0,.7854101478052212,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,97,0,0,0,0,23,98],[0,0,0,0,0,0],[128,239,16,176]]),new l.QuestNpcModel(a.NpcType.MaleMacho,12,1006,800,0,0,30,new c.Vector3(.33990478515625,2.5999999046325684,-84.71995544433594),new c.Euler(0,0,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,98,0,0,0,0,23,99],[0,0,0,0,0,0],[128,239,21,48]]),new l.QuestNpcModel(a.NpcType.FemaleMacho,5,1008,820,0,0,30,new c.Vector3(43.87113952636719,2.5999996662139893,-74.80299377441406),new c.Euler(0,-.5645135437350027,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,99,0,0,0,0,23,100],[0,0,0,0,0,0],[128,239,25,176]]),new l.QuestNpcModel(a.NpcType.MaleFat,11,1007.0010986328125,810,0,0,30,new c.Vector3(75.88380432128906,2.5999996662139893,-42.69328308105469),new c.Euler(0,-1.0308508189943528,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,100,0,0,0,0,23,101],[0,0,0,0,0,0],[128,239,30,48]]),new l.QuestNpcModel(a.NpcType.FemaleTall,7,1021.0010986328125,140,1,0,30,new c.Vector3(16.003997802734375,0,5.995697021484375),new c.Euler(0,-1.1781152217078317,0,"ZXY"),new c.Vector3(22.000009536743164,0,0),[[0,0,7,101,0,0,0,0,23,102],[0,0,0,0,0,0],[128,239,34,176]]),new l.QuestNpcModel(a.NpcType.Nurse,31,1017,860,0,0,40,new c.Vector3(.3097381591796875,3,-105.3865966796875),new c.Euler(0,0,0,"ZXY"),new c.Vector3(0,0,0),[[0,0,7,102,0,0,0,0,23,103],[0,0,0,0,0,0],[128,239,39,48]]),new l.QuestNpcModel(a.NpcType.Nurse,31,1018.0010986328125,110,1,0,40,new c.Vector3(53.499176025390625,0,-26.496688842773438),new c.Euler(0,5.497871034636549,0,"ZXY"),new c.Vector3(18.000009536743164,0,0),[[0,0,7,103,0,0,0,0,23,104],[0,0,0,0,0,0],[128,239,43,176]])],[],[],[{labels:[0],type:n.SegmentType.Instructions,instructions:[n.new_instruction(_.OP_SET_EPISODE,[n.new_arg(0,4)]),n.new_instruction(_.OP_ARG_PUSHL,[n.new_arg(0,4)]),n.new_instruction(_.OP_ARG_PUSHW,[n.new_arg(150,2)]),n.new_instruction(_.OP_SET_FLOOR_HANDLER,[]),n.new_instruction(_.OP_BB_MAP_DESIGNATE,[n.new_arg(0,1),n.new_arg(0,2),n.new_arg(0,1),n.new_arg(0,1)]),n.new_instruction(_.OP_RET,[])],asm:{labels:[]}},{labels:[150],type:n.SegmentType.Instructions,instructions:[n.new_instruction(_.OP_LETI,[n.new_arg(60,1),n.new_arg(237,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(61,1),n.new_arg(0,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(62,1),n.new_arg(333,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(63,1),n.new_arg(-15,4)]),n.new_instruction(_.OP_ARG_PUSHL,[n.new_arg(0,4)]),n.new_instruction(_.OP_ARG_PUSHR,[n.new_arg(60,1)]),n.new_instruction(_.OP_P_SETPOS,[]),n.new_instruction(_.OP_LETI,[n.new_arg(60,1),n.new_arg(255,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(61,1),n.new_arg(0,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(62,1),n.new_arg(338,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(63,1),n.new_arg(-43,4)]),n.new_instruction(_.OP_ARG_PUSHL,[n.new_arg(1,4)]),n.new_instruction(_.OP_ARG_PUSHR,[n.new_arg(60,1)]),n.new_instruction(_.OP_P_SETPOS,[]),n.new_instruction(_.OP_LETI,[n.new_arg(60,1),n.new_arg(222,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(61,1),n.new_arg(0,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(62,1),n.new_arg(322,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(63,1),n.new_arg(25,4)]),n.new_instruction(_.OP_ARG_PUSHL,[n.new_arg(2,4)]),n.new_instruction(_.OP_ARG_PUSHR,[n.new_arg(60,1)]),n.new_instruction(_.OP_P_SETPOS,[]),n.new_instruction(_.OP_LETI,[n.new_arg(60,1),n.new_arg(248,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(61,1),n.new_arg(0,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(62,1),n.new_arg(323,4)]),n.new_instruction(_.OP_LETI,[n.new_arg(63,1),n.new_arg(-20,4)]),n.new_instruction(_.OP_ARG_PUSHL,[n.new_arg(3,4)]),n.new_instruction(_.OP_ARG_PUSHR,[n.new_arg(60,1)]),n.new_instruction(_.OP_P_SETPOS,[]),n.new_instruction(_.OP_RET,[])],asm:{labels:[]}}],[])}},c5EP:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("ouMO"),n=i("Sa3/"),r=i("XcMJ"),a=i("NRxM"),_=i("bcBH"),d=i("uaZj"),l=i("IjTL"),c=i("4Mnx"),u=i("Tpfs"),p=i("4SjJ"),h=i("70mo"),v=i("mpco"),f=i("oSIo"),O=i("3AeF"),m=i("pgiS"),g=i("yWJ7"),E=i("bqrC"),P=i("poKQ"),w=i("X3DM"),b=i("mIR/"),y=i("KCHA"),D=i("GGSb"),T=i("U210"),R=D.get("quest_editor/gui/QuestEditorStore");class k{constructor(){this.disposer=new u.Disposer,this.quest_runner=new T.QuestRunner,this.log_levels_map=["Debug","Info","Warning","Error"].reduce((e,t,i)=>(e[t]={name:t,value:i},e),{}),this.log_levels=Object.values(this.log_levels_map),this.default_log_level=this.log_levels_map.Info,this.log_group_key_counter=0,this._log_groups=s.list_property(),this.default_log_group=this.add_log_group("Default"),this._current_quest_filename=s.property(void 0),this._current_quest=s.property(void 0),this._current_area=s.property(void 0),this._selected_entity=s.property(void 0),this._log_messages=s.list_property(),this._log_level=s.property(this.default_log_level),this._log_group=s.property(this.default_log_group),this._show_all_log_groups=s.property(!0),this.debug=s.property(!1),this.undo=new h.UndoStack,this.current_quest_filename=this._current_quest_filename,this.current_quest=this._current_quest,this.current_area=this._current_area,this.selected_entity=this._selected_entity,this.log_level=this._log_level,this.log_group=this._log_group,this.log_groups=this._log_groups,this.set_current_area=e=>{this._selected_entity.val=void 0,this._current_area.val=e},this.set_selected_entity=e=>{e&&this.current_quest.val&&(this._current_area.val=c.area_store.get_area(this.current_quest.val.episode,e.area_id)),this._selected_entity.val=e},this.new_quest=e=>{this.set_quest(E.create_new_quest(e))},this.open_file=e=>o(this,void 0,void 0,(function*(){try{const t=yield n.read_file(e),i=r.parse_quest(new a.ArrayBufferCursor(t,_.Endianness.Little));this.set_quest(i&&y.convert_quest_to_model(i),e.name)}catch(e){R.error("Couldn't read file.",e)}})),this.save_as=()=>{const e=this.current_quest.val;if(!e)return;let t=this.current_quest_filename.val;if(t){const e=t.lastIndexOf(".");-1!==e&&(t=t.slice(0,e))}let i=prompt("File name:",t);if(!i)return;const o=r.write_quest_qst(y.convert_quest_from_model(e),i);i.endsWith(".qst")||(i+=".qst");const s=document.createElement("a");s.href=URL.createObjectURL(new Blob([o],{type:"application/octet-stream"})),s.download=i,document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)},this.id_changed=e=>{this.current_quest.val&&this.undo.push(new g.EditIdAction(this.current_quest.val,e)).redo()},this.name_changed=e=>{this.current_quest.val&&this.undo.push(new m.EditNameAction(this.current_quest.val,e)).redo()},this.short_description_changed=e=>{this.current_quest.val&&this.undo.push(new f.EditShortDescriptionAction(this.current_quest.val,e)).redo()},this.long_description_changed=e=>{this.current_quest.val&&this.undo.push(new O.EditLongDescriptionAction(this.current_quest.val,e)).redo()},this.translate_entity=(e,t,i,o,s,n)=>{this.undo.push(new v.TranslateEntityAction(e,t,i,o,s,n)).redo()},this.rotate_entity=(e,t,i,o)=>{this.undo.push(new b.RotateEntityAction(e,t,i,o)).redo()},this.push_create_entity_action=e=>{this.undo.push(new P.CreateEntityAction(e))},this.remove_entity=e=>{this.undo.push(new w.RemoveEntityAction(e)).redo()},this.set_section_on_quest_entity=(e,t)=>{const i=t.find(t=>t.id===e.section_id.val);i?e.set_section(i):R.warn(`Section ${e.section_id.val} not found.`)},this.run_current_quest=()=>{const e=this.current_quest.val;e&&this.quest_runner.run(e)},this.log_message_predicate=e=>(this._show_all_log_groups.val||e.log_group.key===this.log_group.val.key)&&e.log_level.value>=this.log_level.val.value,this.disposer.add_all(p.gui_store.tool.observe(({value:e})=>{e===p.GuiTool.QuestEditor&&this.undo.make_current()},{call_now:!0}),this.current_quest.flat_map(e=>e?e.npcs:s.property([])).observe(({value:e})=>{const t=this.selected_entity.val;t instanceof l.QuestNpcModel&&!e.includes(t)&&this.set_selected_entity(void 0)}),this.current_quest.flat_map(e=>e?e.objects:s.property([])).observe(({value:e})=>{const t=this.selected_entity.val;t instanceof d.QuestObjectModel&&!e.includes(t)&&this.set_selected_entity(void 0)}),this._log_level.observe(()=>this._log_messages.val=this._log_messages.val),this._log_group.observe(()=>this._log_messages.val=this._log_messages.val),this._show_all_log_groups.observe(()=>this._log_messages.val=this._log_messages.val)),this.log_messages=this._log_messages.filtered(this.log_message_predicate)}dispose(){this.disposer.dispose()}set_quest(e,t){return o(this,void 0,void 0,(function*(){if(this.undo.reset(),this._current_area.val=void 0,this._selected_entity.val=void 0,this._current_quest_filename.val=t,this._current_quest.val=e,e){this._current_area.val=c.area_store.get_area(e.episode,0);for(const t of e.area_variants.val){const i=yield c.area_store.get_area_sections(e.episode,t);t.set_sections(i);for(const o of e.objects.val.filter(e=>e.area_id===t.area.id))try{this.set_section_on_quest_entity(o,i)}catch(e){R.error(e)}for(const o of e.npcs.val.filter(e=>e.area_id===t.area.id))try{this.set_section_on_quest_entity(o,i)}catch(e){R.error(e)}}}else R.error("Couldn't parse quest file.")}))}set_log_level(e){const t=this.log_levels.find(t=>t.value===e.value);if(!t)throw new Error(`Invalid argument: No such log level "${e.name}"`);this._log_level.val=t}set_log_group(e){const t=this._log_groups.val.find(t=>t.key===e.key);if(!t)throw new Error(`Invalid argument: No such log group "${e.name}"`);this._show_all_log_groups.val=!1,this._log_group.val=t}show_all_log_groups(){this._show_all_log_groups.val||(this._show_all_log_groups.val=!0)}add_log_group(e){const t={name:e,key:this.log_group_key_counter++};return this._log_groups.push(t),t}add_log_message(e,t,i){this._log_messages.push({formatted_timestamp:(new Date).toISOString(),message_contents:e.join(" "),log_level:t,log_group:i})}get_logger(e){let t=this.default_log_group;if(void 0!==e){const i=this.log_groups.val.find(t=>t.name===e);t=i||this.add_log_group(e)}return{debug:(...e)=>{this.add_log_message(e,this.log_levels_map.Debug,t)},info:(...e)=>{this.add_log_message(e,this.log_levels_map.Info,t)},warning:(...e)=>{this.add_log_message(e,this.log_levels_map.Warning,t)},error:(...e)=>{this.add_log_message(e,this.log_levels_map.Error,t)}}}}t.QuestEditorStore=k,t.quest_editor_store=new k},cC1J:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=1;t.srand=function(e){o=e},t.rand=function(){const e=214013*o+2531011>>>0;return o=e,e>>>16&32767},t.GetTickCount=function(){return Math.floor(performance.now())}},cOX8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=180/Math.PI,s=1/o;t.rad_to_deg=function(e){return e*o},t.deg_to_rad=function(e){return e*s},t.floor_mod=function(e,t){return(e%t+t)%t}},dx17:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i("nsCy"),r=i("G+UN"),a=i("6WXA"),_=s(i("GGSb")),d=i("sZ1+"),l=i("lC1H"),c=_.default.get("stores/ItemDropStore");class u{constructor(e){this.enemy_drops=e}}t.ItemDropStore=u;class p{constructor(){this.table=[],this.item_type_to_drops=[];for(let e=0;e<n.Difficulties.length;e++){const e=[];this.table.push(e);for(let t=0;t<n.SectionIds.length;t++)e.push([])}}get_drop(e,t,i){return this.table[e][t][i]}set_drop(e,t,i,o){this.table[e][t][i]=o;let s=this.item_type_to_drops[o.item_type.id];s||(s=[],this.item_type_to_drops[o.item_type.id]=s),s.push(o)}get_drops_for_item_type(e){return this.item_type_to_drops[e]||[]}}t.EnemyDropTable=p,t.item_drop_stores=new a.ServerMap((function(e){return o(this,void 0,void 0,(function*(){const t=yield r.item_type_stores.get(e),i=yield fetch(`/assets/enemyDrops.${n.Server[e].toLowerCase()}.json`),o=yield i.json(),s=new p;for(const e of o){const i=d.NpcType[e.enemy];if(!i){c.warn(`Couldn't determine NpcType of episode ${e.episode} ${e.enemy}.`);continue}const o=n.Difficulty[e.difficulty],r=t.get_by_id(e.itemTypeId);if(!r){c.warn(`Couldn't find item kind ${e.itemTypeId}.`);continue}const a=n.SectionId[e.sectionId];null!=a?s.set_drop(o,a,i,new l.EnemyDrop(o,a,i,r,e.dropRate,e.rareRate)):c.warn(`Couldn't find section ID ${e.sectionId}.`)}return new u(s)}))}))},eAF0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt");t.SectionModel=class{constructor(e,t,i,s){if(!Number.isInteger(e)||e<-1)throw new Error(`Expected id to be an integer greater than or equal to -1, got ${e}.`);if(!t)throw new Error("position is required.");if(!i)throw new Error("rotation is required.");if(!s)throw new Error("area_variant is required.");this.id=e,this.position=t,this.rotation=i,this.inverse_rotation=(new o.Euler).setFromQuaternion((new o.Quaternion).setFromEuler(i).inverse()),this.area_variant=s}}},eFYZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("vM2b"),n=i("488w"),r=i("eAF0"),a=i("tRdk"),_=[new o.MeshBasicMaterial({color:8437968,transparent:!0,opacity:.25}),new o.MeshLambertMaterial({color:12632256,side:o.DoubleSide}),new o.MeshLambertMaterial({color:6340736,side:o.DoubleSide}),new o.MeshLambertMaterial({color:8405152,side:o.DoubleSide})],d=[new o.MeshBasicMaterial({color:9490656,wireframe:!0,transparent:!0,opacity:.3}),new o.MeshBasicMaterial({color:13684944,wireframe:!0}),new o.MeshBasicMaterial({color:8446112,wireframe:!0}),new o.MeshBasicMaterial({color:9466032,wireframe:!0})];t.area_collision_geometry_to_object_3d=function(e){const t=new o.Group;for(const i of e.meshes){const e=new o.Geometry;for(const{x:t,y:s,z:n}of i.vertices)e.vertices.push(new o.Vector3(t,s,n));for(const{indices:t,flags:s,normal:n}of i.triangles){const i=16&s,r=1&s,a=64&s?3:i?2:r?1:0;0!==a&&e.faces.push(new o.Face3(t[0],t[1],t[2],new o.Vector3(n.x,n.y,n.z),void 0,a))}if(e.faces.length){e.computeBoundingBox(),e.computeBoundingSphere();const i=new o.Mesh(e,_);i.renderOrder=1,t.add(i);const s=new o.Mesh(e,d);s.renderOrder=2,t.add(s)}}return t},t.area_geometry_to_sections_and_object_3d=function(e,t){const i=[],_=new o.Group;let d=0;for(const l of e.sections){const e=new s.GeometryBuilder;for(const t of l.objects)n.ninja_object_to_geometry_builder(t,e);const c=new o.Mesh(e.build(),new o.MeshBasicMaterial({color:(new o.Color).setHSL(d++%7/7,1,.5),transparent:!0,opacity:.25,side:o.DoubleSide}));if(_.add(c),c.position.set(l.position.x,l.position.y,l.position.z),c.rotation.set(l.rotation.x,l.rotation.y,l.rotation.z),c.updateMatrixWorld(),l.id>=0){const e=new r.SectionModel(l.id,a.vec3_to_threejs(l.position),new o.Euler(l.rotation.x,l.rotation.y,l.rotation.z,"ZXY"),t);i.push(e),c.userData.section=e}}return[i,_]}},hUhj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nEgy"),s=i("52VV"),n=i("+LO4");class r extends n.AbstractMinimalProperty{map(e){return new o.DependentProperty([this],()=>e(this.val))}flat_map(e){return new s.FlatMappedProperty(this,t=>e(t))}}t.AbstractProperty=r},hVaW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ASM_SYNTAX={defaultToken:"invalid",tokenizer:{root:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/r\d+/,"predefined"],[/[^\s]+:/,"tag"],[/0x[0-9a-fA-F]+/,"number.hex"],[/-?\d+(\.\d+)?(e-?\d+)?/,"number.float"],[/-?[0-9]+/,"number"],[/\.[^\s]+/,"keyword"],[/[a-z][a-z0-9_=<>!]*/,"identifier"],[/[ \t\r\n]+/,"white"],[/\/\/.*$/,"comment"],[/,/,"delimiter"]],string:[[/[^\\"]+/,"string"],[/\\(?:[n\\"])/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]]}}},iR5r:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt");function s(e){let t,i;switch(e.format[1]){case 6:t=o.RGBA_S3TC_DXT1_Format,i=e.width*e.height/2;break;case 7:t=o.RGBA_S3TC_DXT3_Format,i=e.width*e.height;break;default:throw new Error(`Format ${e.format.join(", ")} not supported.`)}const s=new o.CompressedTexture([{data:new Uint8Array(e.data,0,i),width:e.width,height:e.height}],e.width,e.height,t);return s.minFilter=o.LinearFilter,s.wrapS=o.MirroredRepeatWrapping,s.wrapT=o.MirroredRepeatWrapping,s.needsUpdate=!0,s}t.xvm_to_textures=function(e){return e.textures.map(s)},t.xvm_texture_to_texture=s},j4Ss:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("rqwK"),r=i("sZ1+");i("Czz9");const a=i("CpvQ"),_=i("yar8"),d=i("ouMO");class l extends o.ResizableWidget{constructor(e){super(),this.element=s.el.div({class:"hunt_optimizer_MethodsForEpisodeView"}),this.episode=e,this.enemy_types=r.ENEMY_NPC_TYPES.filter(e=>r.npc_data(e).episode===this.episode);const t=d.list_property(),i=this.disposable(new _.Table({class:"hunt_optimizer_MethodsForEpisodeView_table",values:t,sort:e=>{t.sort((t,i)=>{for(const{column:o,direction:s}of e){let e=0;switch(o.key){case"method":e=t.name.localeCompare(i.name);break;case"time":e=t.time.val.as("minutes")-i.time.val.as("minutes");break;default:{const s=r.NpcType[o.key];s&&(e=(t.enemy_counts.get(s)||0)-(i.enemy_counts.get(s)||0))}}if(0!==e)return s===_.SortDirection.Asc?e:-e}return 0})},columns:[{key:"method",title:"Method",fixed:!0,width:250,sortable:!0,render_cell:e=>e.name},{key:"time",title:"Time",fixed:!0,width:60,input:!0,sortable:!0,render_cell(e,t){const i=t.add(new a.DurationInput(e.time.val));return t.add(i.value.observe(({value:t})=>e.set_user_time(t))),i.element}},...this.enemy_types.map(e=>({key:r.NpcType[e],title:r.npc_data(e).simple_name,width:90,text_align:"right",sortable:!0,render_cell(t){const i=t.enemy_counts.get(e);return null==i?"":i.toString()}}))]}));this.element.append(i.element),this.disposable(n.hunt_method_stores.observe_current(e=>{this.hunt_methods_observer&&this.hunt_methods_observer.dispose(),this.hunt_methods_observer=e.methods.observe(({value:e})=>{t.val=e.filter(e=>e.episode===this.episode)},{call_now:!0})},{call_now:!0})),this.finalize_construction(l.prototype)}dispose(){super.dispose(),this.hunt_methods_observer&&this.hunt_methods_observer.dispose()}}t.MethodsForEpisodeView=l},jJhE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.is_property=function(e){return e.is_property},t.is_any_property=function(e){return e&&e.is_property}},karJ:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("Yuai");t.get_character_class_data=function(e,t,i){return o(this,void 0,void 0,(function*(){return yield s.load_array_buffer(function(e,t,i){return`/player/${e}${t}${null==i?"":i}.nj`}(e,t,i))}))},t.get_character_class_animation_data=function(e){return o(this,void 0,void 0,(function*(){return yield s.load_array_buffer(`/player/animation/animation_${e.toString().padStart(3,"0")}.njm`)}))}},kiqn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("Womt"),n=i("cOX8"),r=new s.Quaternion,a=new s.Quaternion;function _(e){return e.set(n.floor_mod(e.x,2*Math.PI),n.floor_mod(e.y,2*Math.PI),n.floor_mod(e.z,2*Math.PI))}t.QuestEntityModel=class{constructor(e,t,i,s,n){if(this._section=o.property(void 0),null==e)throw new Error("type is required.");if(!Number.isInteger(t))throw new Error("area_id should be an integer.");if(!Number.isInteger(i))throw new Error("section_id should be an integer.");if(!s)throw new Error("position is required.");if(!n)throw new Error("rotation is required.");this.type=e,this.area_id=t,this.section=this._section,this._section_id=o.property(i),this.section_id=this._section_id,this._position=o.property(s),this.position=this._position,this._world_position=o.property(s),this.world_position=this._world_position,this._rotation=o.property(n),this.rotation=this._rotation,this._world_rotation=o.property(n),this.world_rotation=this._world_rotation}set_section(e){if(e.area_variant.area.id!==this.area_id)throw new Error("Quest entities can't be moved across areas.");return this._section.val=e,this._section_id.val=e.id,this.set_position(this.position.val),this.set_rotation(this.rotation.val),this}set_position(e){this._position.val=e;const t=this.section.val;return this._world_position.val=t?e.clone().applyEuler(t.rotation).add(t.position):e,this}set_world_position(e){this._world_position.val=e;const t=this.section.val;return this._position.val=t?e.clone().sub(t.position).applyEuler(t.inverse_rotation):e,this}set_rotation(e){_(e),this._rotation.val=e;const t=this.section.val;return t?(r.setFromEuler(e),a.setFromEuler(t.rotation),this._world_rotation.val=_((new s.Euler).setFromQuaternion(r.multiply(a),"ZXY"))):this._world_rotation.val=e,this}set_world_rotation(e){_(e),this._world_rotation.val=e;const t=this.section.val;return t?(r.setFromEuler(e),a.setFromEuler(t.rotation),a.inverse(),this._rotation.val=_((new s.Euler).setFromQuaternion(r.multiply(a),"ZXY"))):this._rotation.val=e,this}}},kwt4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("9Ykw"),s=i("9Onn"),n=i("q7ag");t.ANGLE_TO_RAD=2*Math.PI/65535;const r=1296255566;t.is_njcm_model=function(e){return"njcm"===e.type},t.is_xj_model=function(e){return"xj"===e.type};class a{constructor(e,t,i,o,s,n){this.bone_cache=new Map,this._bone_count=-1,this.evaluation_flags=e,this.model=t,this.position=i,this.rotation=o,this.scale=s,this.children=n}bone_count(){if(-1===this._bone_count){const e=[0];this.get_bone_internal(this,1/0,e),this._bone_count=e[0]}return this._bone_count}get_bone(e){let t=this.bone_cache.get(e);return void 0===t&&(t=this.get_bone_internal(this,e,[0]),this.bone_cache.set(e,t||null)),t||void 0}get_bone_internal(e,t,i){if(!e.evaluation_flags.skip){const o=i[0]++;if(this.bone_cache.set(o,e),o===t)return e}if(!e.evaluation_flags.break_child_trace)for(const o of e.children){const e=this.get_bone_internal(o,t,i);if(e)return e}}}function _(e,t,i){const s=o.parse_iff(e).filter(e=>e.type===r),n=[];for(const e of s)n.push(...d(e.data,t,i));return n}function d(e,i,o){const s=e.u32(),n=0!=(1&s),r=0!=(2&s),_=0!=(4&s),l=0!=(8&s),c=0!=(16&s),u=0!=(32&s),p=0!=(64&s),h=0!=(128&s),v=e.u32(),f=e.vec3_f32(),O={x:e.i32()*t.ANGLE_TO_RAD,y:e.i32()*t.ANGLE_TO_RAD,z:e.i32()*t.ANGLE_TO_RAD},m=e.vec3_f32(),g=e.u32(),E=e.u32();let P,w,b;return v&&(e.seek_start(v),P=i(e,o)),g?(e.seek_start(g),w=d(e,i,o)):w=[],E?(e.seek_start(E),b=d(e,i,o)):b=[],[new a({no_translate:n,no_rotate:r,no_scale:_,hidden:l,break_child_trace:c,zxy_rotation_order:u,skip:p,shape_skip:h},P,f,O,m,w),...b]}t.NjObject=a,t.parse_nj=function(e){return _(e,s.parse_njcm_model,[])},t.parse_xj=function(e){return _(e,n.parse_xj_model,void 0)},t.parse_xj_object=function(e){return d(e,n.parse_xj_model,void 0)}},lC1H:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EnemyDrop=class{constructor(e,t,i,o,s,n){this.difficulty=e,this.section_id=t,this.npc_type=i,this.item_type=o,this.anything_rate=s,this.rare_rate=n,this.rate=s*n}}},lHpu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("tyuj"),n=i("iR5r"),r=i("Eqai"),a=i("488w"),_=i("7CyS"),d=i("Ftn7"),l=i("Tpfs");class c extends d.Renderer{constructor(){super(),this.disposer=new l.Disposer,this.clock=new o.Clock,this.update_animation_time=!0,this.camera=new o.PerspectiveCamera(75,1,1,200),this.nj_data_or_xvm_changed=()=>{this.mesh&&(this.scene.remove(this.mesh),this.mesh=void 0,this.scene.remove(this.skeleton_helper),this.skeleton_helper=void 0),this.animation&&(this.animation.mixer.stopAllAction(),this.mesh&&this.animation.mixer.uncacheRoot(this.mesh),this.animation=void 0);const e=s.model_store.current_nj_data.val;if(e){const{nj_object:t,has_skeleton:i}=e;let _;const d=s.model_store.current_xvm.val,l=d?n.xvm_to_textures(d):void 0,c=l&&l.map(e=>new o.MeshLambertMaterial({skinning:i,map:e,side:o.DoubleSide,alphaTest:.5})),u=(_=i?r.create_skinned_mesh(a.ninja_object_to_buffer_geometry(t),c):r.create_mesh(a.ninja_object_to_buffer_geometry(t),c)).geometry.boundingBox,p=u.max.y-u.min.y;_.translateY(-p/2-u.min.y),this.mesh=_,this.scene.add(_),this.skeleton_helper=new o.SkeletonHelper(_),this.skeleton_helper.visible=s.model_store.show_skeleton.val,this.skeleton_helper.material.linewidth=3,this.scene.add(this.skeleton_helper),this.reset_camera(new o.Vector3(0,10,20),new o.Vector3(0,0,0))}this.schedule_render()},this.nj_motion_changed=({value:e})=>{let t;this.animation&&(this.animation.mixer.stopAllAction(),t=this.animation.mixer);const i=s.model_store.current_nj_data.val;if(!(this.mesh&&this.mesh instanceof o.SkinnedMesh&&e&&i))return;this.animation||(t=new o.AnimationMixer(this.mesh));const n=_.create_animation_clip(i.nj_object,e);this.animation={mixer:t,clip:n,action:t.clipAction(n)},this.clock.start(),this.animation.action.play(),this.schedule_render()},this.show_skeleton_changed=({value:e})=>{this.skeleton_helper&&(this.skeleton_helper.visible=e,this.schedule_render())},this.animation_playing_changed=({value:e})=>{this.animation&&(this.animation.action.paused=!e,e?(this.clock.start(),this.schedule_render()):this.clock.stop())},this.animation_frame_rate_changed=({value:e})=>{this.animation&&(this.animation.mixer.timeScale=e/_.PSO_FRAME_RATE)},this.animation_frame_changed=({value:e})=>{const t=s.model_store.current_nj_motion.val;if(this.animation&&t){const i=t.frame_count;e>i&&(e=1),e<1&&(e=i),this.update_animation_time&&(this.animation.action.time=(e-1)/_.PSO_FRAME_RATE),this.schedule_render()}},this.disposer.add_all(s.model_store.current_nj_data.observe(this.nj_data_or_xvm_changed),s.model_store.current_xvm.observe(this.nj_data_or_xvm_changed),s.model_store.current_nj_motion.observe(this.nj_motion_changed),s.model_store.show_skeleton.observe(this.show_skeleton_changed),s.model_store.animation_playing.observe(this.animation_playing_changed),s.model_store.animation_frame_rate.observe(this.animation_frame_rate_changed),s.model_store.animation_frame.observe(this.animation_frame_changed)),this.init_camera_controls()}set_size(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),super.set_size(e,t)}dispose(){super.dispose(),this.disposer.dispose()}render(){this.animation&&this.animation.mixer.update(this.clock.getDelta()),this.light_holder.quaternion.copy(this.camera.quaternion),super.render(),this.animation&&!this.animation.action.paused&&(this.update_animation_frame(),this.schedule_render())}update_animation_frame(){if(this.animation&&!this.animation.action.paused){const e=this.animation.action.time;this.update_animation_time=!1,s.model_store.set_animation_frame(e*_.PSO_FRAME_RATE+1),this.update_animation_time=!0}}}t.Model3DRenderer=c},lPzw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AreaModel=class{constructor(e,t,i,o){if(!Number.isInteger(e)||e<0)throw new Error(`Expected id to be a non-negative integer, got ${e}.`);if(!t)throw new Error("name is required.");if(!o)throw new Error("area_variants is required.");this.id=e,this.name=t,this.order=i,this.area_variants=o}}},lg9k:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ZPAt"),s=i("wtpc");function n(e,t){return e.opcode.code===t.opcode.code&&s.arrays_equal(e.args,t.args,a)}function r(e){return{opcode:e.opcode,args:e.args.map(e=>Object.assign({},e)),arg_size:e.arg_size,size:e.size,param_to_args:e.param_to_args.map(e=>e.map(e=>Object.assign({},e))),asm:e.asm}}function a(e,t){return e.value===t.value&&e.size===t.size}var _;function d(e,t){if(e.type!==t.type||!s.arrays_equal(e.labels,t.labels))return!1;switch(e.type){case _.Instructions:return s.arrays_equal(e.instructions,t.instructions,n);case _.Data:return s.array_buffers_equal(e.data,t.data);case _.String:return e.value===t.value}}t.new_instruction=function(e,t,i){const s=Math.min(e.params.length,t.length),n=[];let r=0;for(let i=0;i<s;i++){const s=e.params[i].type,a=t[i];switch(n[i]=[],s.kind){case o.Kind.ILabelVar:case o.Kind.RegRefVar:r++;for(let e=i;e<t.length;e++)n[i].push(t[e]),r+=t[e].size;break;default:r+=a.size,n[i].push(a)}}return{opcode:e,args:t,arg_size:r,size:e.size+r,param_to_args:n,asm:i}},t.clone_instruction=r,t.new_arg=function(e,t){return{value:e,size:t}},function(e){e[e.Instructions=0]="Instructions",e[e.Data=1]="Data",e[e.String=2]="String"}(_=t.SegmentType||(t.SegmentType={})),t.segment_arrays_equal=function(e,t){return s.arrays_equal(e,t,d)},t.clone_segment=function(e){const t={type:e.type,labels:e.labels.slice(),asm:{labels:e.asm.labels.map(e=>Object.assign({},e))}};switch(t.type){case _.Instructions:t.instructions=e.instructions.map(e=>r(e));break;case _.Data:t.data=e.data.slice(0);break;case _.String:t.value=e.value}return t}},"mIR/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yQqj"),s=i("c5EP");t.RotateEntityAction=class{constructor(e,t,i,s){this.entity=e,this.old_rotation=t,this.new_rotation=i,this.world=s,this.description=`Rotate ${o.entity_data(e.type).name}`}undo(){s.quest_editor_store.set_selected_entity(this.entity),this.world?this.entity.set_world_rotation(this.old_rotation):this.entity.set_rotation(this.old_rotation)}redo(){s.quest_editor_store.set_selected_entity(this.entity),this.world?this.entity.set_world_rotation(this.new_rotation):this.entity.set_rotation(this.new_rotation)}}},mpco:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yQqj"),s=i("c5EP");t.TranslateEntityAction=class{constructor(e,t,i,s,n,r){this.entity=e,this.old_section=t,this.new_section=i,this.old_position=s,this.new_position=n,this.world=r,this.description=`Move ${o.entity_data(e.type).name}`}undo(){s.quest_editor_store.set_selected_entity(this.entity),this.old_section&&this.entity.set_section(this.old_section),this.world?this.entity.set_world_position(this.old_position):this.entity.set_position(this.old_position)}redo(){s.quest_editor_store.set_selected_entity(this.entity),this.new_section&&this.entity.set_section(this.new_section),this.world?this.entity.set_world_position(this.new_position):this.entity.set_position(this.new_position)}}},n5fr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO"),s=i("Ts/k");t.undo_manager=new class{constructor(){this.current=o.property(s.NOOP_UNDO),this.can_undo=this.current.flat_map(e=>e.can_undo),this.can_redo=this.current.flat_map(e=>e.can_redo),this.first_undo=this.current.flat_map(e=>e.first_undo),this.first_redo=this.current.flat_map(e=>e.first_redo)}undo(){return this.current.val.undo()}redo(){return this.current.val.redo()}}},nEgy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Tpfs"),s=i("+LO4"),n=i("52VV");class r extends s.AbstractMinimalProperty{constructor(e,t){super(),this.dependencies=e,this.f=t,this.dependency_disposables=new o.Disposer}get val(){return this.get_val()}get_val(){return this.dependency_disposables.length?this._val:this.f()}observe(e,t={}){const i=super.observe(e,t);return 0===this.dependency_disposables.length&&(this._val=this.f(),this.dependency_disposables.add_all(...this.dependencies.map(e=>e.observe(()=>{const e=this._val;this._val=this.f(),this.emit(e)})))),{dispose:()=>{i.dispose(),0===this.observers.length&&this.dependency_disposables.dispose_all()}}}map(e){return new r([this],()=>e(this.val))}flat_map(e){return new n.FlatMappedProperty(this,t=>e(t))}}t.DependentProperty=r},nN8q:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid");class s extends o.Widget{constructor(){super(...arguments),this.width=0,this.height=0}resize(e,t){return this.width=e,this.height=t,this.element.style.width=`${e}px`,this.element.style.height=`${t}px`,this}}t.ResizableWidget=s},nowp:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ExVU"),s=i("ouMO");t.WantedItemModel=class{constructor(e,t){this.item_type=e,this._amount=s.property(t),this.amount=this._amount}set_amount(e){return this._amount.val=e,this}};t.OptimalResultModel=class{constructor(e,t){this.wanted_items=e,this.optimal_methods=t}};t.OptimalMethodModel=class{constructor(e,t,i,s,n,r,a){this.difficulty=e,this.section_ids=t,this.method_name=i,this.method_episode=s,this.method_time=n,this.runs=r,this.item_counts=a,this.total_time=o.Duration.fromMillis(r*n.as("milliseconds"))}}},nsCy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("uiJh");var s,n,r;t.RARE_ENEMY_PROB=1/512,t.KONDRIEU_PROB=.1,function(e){e.Ephinea="Ephinea"}(s=t.Server||(t.Server={})),t.Servers=o.enum_values(s),function(e){e[e.Viridia=0]="Viridia",e[e.Greenill=1]="Greenill",e[e.Skyly=2]="Skyly",e[e.Bluefull=3]="Bluefull",e[e.Purplenum=4]="Purplenum",e[e.Pinkal=5]="Pinkal",e[e.Redria=6]="Redria",e[e.Oran=7]="Oran",e[e.Yellowboze=8]="Yellowboze",e[e.Whitill=9]="Whitill"}(n=t.SectionId||(t.SectionId={})),t.SectionIds=o.enum_values(n),function(e){e[e.Normal=0]="Normal",e[e.Hard=1]="Hard",e[e.VHard=2]="VHard",e[e.Ultimate=3]="Ultimate"}(r=t.Difficulty||(t.Difficulty={})),t.Difficulties=o.enum_values(r)},oSIo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("x4IQ");class s extends o.QuestEditAction{constructor(){super(...arguments),this.description="Edit short description"}undo(){this.quest.set_short_description(this.old)}redo(){this.quest.set_short_description(this.new)}}t.EditShortDescriptionAction=s},ouMO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Q+PT"),s=i("0CzU"),n=i("nEgy"),r=i("22Lq");t.emitter=function(){return new o.SimpleEmitter},t.property=function(e){return new s.SimpleProperty(e)},t.list_property=function(e,...t){return new r.SimpleListProperty(e,...t)},t.add=function(e,t){return e.map(e=>e+t)},t.sub=function(e,t){return e.map(e=>e-t)},t.map=function(e,...t){return new n.DependentProperty(t,()=>e(...t.map(e=>e.val)))}},oxtq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ListChange=0]="ListChange",e[e.ValueChange=1]="ValueChange"}(t.ListChangeType||(t.ListChangeType={})),t.is_list_property=function(e){return e.is_list_property}},oyid:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb"),s=i("sDu+"),n=i("4VsB");class r extends s.LabelledControl{constructor(e=!1,t){super(t),this.element=o.create_element("input",{class:"core_CheckBox"}),this.preferred_label_position="right",this._checked=new n.WidgetProperty(this,e,this.set_checked),this.checked=this._checked,this.set_checked(e),this.element.type="checkbox",this.element.onchange=()=>this._checked.set_val(this.element.checked,{silent:!1}),this.finalize_construction(r.prototype)}set_enabled(e){super.set_enabled(e),this.element.disabled=!e}set_checked(e){this.element.checked=e}}t.CheckBox=r},pgiS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("x4IQ");class s extends o.QuestEditAction{constructor(){super(...arguments),this.description="Edit name"}undo(){this.quest.set_name(this.old)}redo(){this.quest.set_name(this.new)}}t.EditNameAction=s},poKQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("yQqj"),s=i("c5EP");t.CreateEntityAction=class{constructor(e){this.entity=e,this.description=`Create ${o.entity_data(e.type).name}`}undo(){const e=s.quest_editor_store.current_quest.val;e&&e.remove_entity(this.entity)}redo(){const e=s.quest_editor_store.current_quest.val;e&&(e.add_entity(this.entity),s.quest_editor_store.set_selected_entity(this.entity))}}},q1Dg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("c5EP"),r=i("xs7i"),a=i("PE7g"),_=i("Tpfs"),d=i("E/0a"),l=i("ETgL");i("ObFr");const c=i("5aKR");class u extends o.ResizableWidget{constructor(){super(),this.element=s.el.div({class:"quest_editor_QuestInfoView",tab_index:-1}),this.table_element=s.el.table(),this.id_input=this.disposable(new a.NumberInput),this.name_input=this.disposable(new d.TextInput("",{max_length:32})),this.short_description_input=this.disposable(new l.TextArea("",{max_length:128,font_family:'"Courier New", monospace',cols:25,rows:5})),this.long_description_input=this.disposable(new l.TextArea("",{max_length:288,font_family:'"Courier New", monospace',cols:25,rows:10})),this.no_quest_view=new c.DisabledView("No quest loaded."),this.quest_disposer=this.disposable(new _.Disposer);const e=n.quest_editor_store.current_quest,t=e.map(e=>null==e);this.table_element.append(s.el.tr({},s.el.th({text:"Episode:"}),this.episode_element=s.el.td()),s.el.tr({},s.el.th({text:"ID:"}),s.el.td({},this.id_input.element)),s.el.tr({},s.el.th({text:"Name:"}),s.el.td({},this.name_input.element)),s.el.tr({},s.el.th({text:"Short description:",col_span:2})),s.el.tr({},s.el.td({col_span:2},this.short_description_input.element)),s.el.tr({},s.el.th({text:"Long description:",col_span:2})),s.el.tr({},s.el.td({col_span:2},this.long_description_input.element))),this.bind_hidden(this.table_element,t),this.element.append(this.table_element,this.no_quest_view.element),this.element.addEventListener("focus",()=>n.quest_editor_store.undo.make_current(),!0),this.disposables(this.no_quest_view.visible.bind_to(t),e.observe(({value:e})=>{this.quest_disposer.dispose_all(),this.episode_element.textContent=e?r.Episode[e.episode]:"",e&&this.quest_disposer.add_all(this.id_input.value.bind_to(e.id),this.id_input.value.observe(n.quest_editor_store.id_changed),this.name_input.value.bind_to(e.name),this.name_input.value.observe(n.quest_editor_store.name_changed),this.short_description_input.value.bind_to(e.short_description),this.short_description_input.value.observe(n.quest_editor_store.short_description_changed),this.long_description_input.value.bind_to(e.long_description),this.long_description_input.value.observe(n.quest_editor_store.long_description_changed))})),this.finalize_construction(u.prototype)}}t.QuestInfoView=u},q7ag:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")).default.get("core/data_formats/parsing/ninja/xj");function n(e,t,i){const o=[];for(let s=0;s<i;++s){e.seek_start(t+20*s);const i=e.u32(),n=e.u32(),a=e.u32(),_=e.u32(),d=r(e,i,n);e.seek_start(a);const l=e.u16_array(_);o.push({material_properties:d,indices:l})}return o}function r(e,t,i){const o={};for(let s=0;s<i;++s){switch(e.seek_start(t+16*s),e.u32()){case 2:o.alpha_src=e.u32(),o.alpha_dst=e.u32();break;case 3:o.texture_id=e.u32();break;case 5:o.diffuse_r=e.u8(),o.diffuse_g=e.u8(),o.diffuse_b=e.u8(),o.diffuse_a=e.u8()}}return o}t.parse_xj_model=function(e){e.seek(4);const t=e.u32(),i=e.u32(),o=e.u32(),r=e.u32(),a=e.u32(),_=e.u32(),d={type:"xj",vertices:[],meshes:[],collision_sphere_position:e.vec3_f32(),collision_sphere_radius:e.f32()};return i>=1&&(i>1&&s.warn(`Vertex info count of ${i} was larger than expected.`),d.vertices.push(...function(e,t){e.seek_start(t);const i=e.u16();e.seek(2);const o=e.u32(),n=e.u32(),r=e.u32(),a=[];for(let t=0;t<r;++t){e.seek_start(o+t*n);const r=e.vec3_f32();let _,d;switch(i){case 3:_=e.vec3_f32(),d=e.vec2_f32();break;case 4:break;case 5:e.seek(4),d=e.vec2_f32();break;case 6:_=e.vec3_f32();break;case 7:_=e.vec3_f32(),d=e.vec2_f32();break;default:s.warn(`Unknown vertex type ${i} with size ${n}.`)}a.push({position:r,normal:_,uv:d})}return a}(e,t))),d.meshes.push(...n(e,o,r)),d.meshes.push(...n(e,a,_)),d}},qRPN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("oxtq"),s=i("sHzS");class n extends s.AbstractListProperty{constructor(e,t){super(),this.dependency=e,this.transform=t}get val(){return this.get_val()}get_val(){return this.values?this.values:this.transform(this.dependency.val)}observe(e,t={}){const i=super.observe(e,t);return this.init_dependency_disposable(),{dispose:()=>{i.dispose(),this.dispose_dependency_disposable()}}}observe_list(e,t){const i=super.observe_list(e,t);return this.init_dependency_disposable(),{dispose:()=>{i.dispose(),this.dispose_dependency_disposable()}}}filtered(e){return new n(this,t=>t.filter(e))}compute_length(){return this.values?this.values.length:this.transform(this.dependency.val).length}init_dependency_disposable(){null==this.dependency_disposable&&(this.values=this.transform(this.dependency.val),this.dependency_disposable=this.dependency.observe(()=>{const e=this.values;this.values=this.transform(this.dependency.val),this.finalize_update({type:o.ListChangeType.ListChange,index:0,removed:e,inserted:this.values})}))}dispose_dependency_disposable(){0===this.observers.length&&0===this.list_observers.length&&this.dependency_disposable&&this.dependency_disposable.dispose()}}t.DependentListProperty=n},"r+6V":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb");i("CCCE");const s=i("KVVN"),n=i("LSoc"),r=i("QmPX"),a=i("ouMO");class _ extends r.Control{constructor(e,t,i,r){super(r),this.element=o.el.div({class:"core_DropDown"}),this.button=this.disposable(new s.Button(e,{icon_left:r&&r.icon_left,icon_right:o.Icon.TriangleDown})),this.menu=this.disposable(new n.Menu(t,i,this.element)),this.element.append(this.button.element,this.menu.element),this._chosen=a.emitter(),this.chosen=this._chosen,this.just_opened=!1,this.disposables(o.disposable_listener(this.button.element,"mousedown",()=>this.button_mousedown(),{capture:!0}),this.button.mouseup.observe(()=>this.button_mouseup()),this.menu.selected.observe(({value:e})=>{e&&(this._chosen.emit({value:e}),this.menu.selected.val=void 0)})),this.finalize_construction(_.prototype)}set_enabled(e){super.set_enabled(e),this.button.enabled.val=e}button_mousedown(){this.just_opened=!this.menu.visible.val,this.menu.visible.val=!0}button_mouseup(){this.just_opened?this.menu.focus():this.menu.visible.val=!1,this.just_opened=!1}}t.DropDown=_},rqwK:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i("GGSb")),r=i("nsCy"),a=i("sZ1+"),_=i("upFJ"),d=i("IV2v"),l=i("RMZt"),c=i("ExVU"),u=i("ouMO"),p=i("Tpfs"),h=i("6WXA"),v=n.default.get("hunt_optimizer/stores/HuntMethodStore"),f=c.Duration.fromObject({minutes:30}),O=c.Duration.fromObject({minutes:45}),m=c.Duration.fromObject({minutes:45});class g{constructor(e,t){this.disposer=new p.Disposer,this.methods=u.list_property(e=>[e.user_time],...t),this.disposer.add(this.methods.observe_list(()=>l.hunt_method_persister.persist_method_user_times(this.methods.val,e)))}dispose(){this.disposer.dispose()}}t.HuntMethodStore=g,t.hunt_method_stores=new h.ServerMap((function(e){return o(this,void 0,void 0,(function*(){const t=yield fetch(`/assets/quests.${r.Server[e].toLowerCase()}.json`),i=yield t.json(),o=[];for(const e of i){let t=0;const i=new Map;for(const[o,s]of Object.entries(e.enemyCounts)){const e=a.NpcType[o];e?(i.set(e,s),t+=s):v.error(`No NpcType found for code ${o}.`)}switch(e.id){case 31:case 34:case 1305:case 1306:case 1307:case 313:case 314:continue}o.push(new d.HuntMethodModel(`q${e.id}`,e.name,new _.SimpleQuestModel(e.id,e.name,e.episode,i),/^\d-\d.*/.test(e.name)?O:t>400?m:f))}return yield l.hunt_method_persister.load_method_user_times(o,e),new g(e,o)}))}))},"sDu+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("7ZX1"),s=i("QmPX");class n extends s.Control{constructor(e){super(e),this._label_text=e&&e.label}get label(){return this._label||null==this._label_text||(this._label=this.disposable(new o.Label(this._label_text,{enabled:this.enabled.val,tooltip:this.tooltip.val})),this.id||(this.id="core_LabelledControl_id_"+String(r++)),this._label.for=this.id),this._label}set_enabled(e){super.set_enabled(e),this._label&&(this._label.enabled.val=e)}set_tooltip(e){super.set_tooltip(e),this._label&&(this._label.tooltip.val=e)}}t.LabelledControl=n;let r=0},sHzS:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("oxtq"),n=i("hUhj"),r=o(i("GGSb")).default.get("core/observable/property/list/AbstractListProperty");class a extends n.AbstractProperty{constructor(e){super(),this.compute_length=e,this.length=0}get val(){return this.get_val()}get_val(){return this.length=this.compute_length()}update(){const e=this.length,t=this.compute_length();e!==t&&(this.length=t,this.emit(e))}}class _ extends n.AbstractProperty{constructor(e){super(),this.is_list_property=!0,this.value_observers=[],this.list_observers=[],this._length=new a(()=>this.compute_length()),this.length=this._length,this.extract_observables=e}get(e){return this.val[e]}observe_list(e,t){return 0===this.value_observers.length&&this.extract_observables&&this.replace_element_observers(0,1/0,this.val),this.list_observers.includes(e)||this.list_observers.push(e),t&&t.call_now&&this.call_list_observer(e,{type:s.ListChangeType.ListChange,index:0,removed:[],inserted:this.val}),{dispose:()=>{const t=this.list_observers.indexOf(e);if(-1!==t&&this.list_observers.splice(t,1),0===this.list_observers.length){for(const{disposables:e}of this.value_observers)for(const t of e)t.dispose();this.value_observers.splice(0,1/0)}}}}finalize_update(e){this.list_observers.length&&this.extract_observables&&e.type===s.ListChangeType.ListChange&&this.replace_element_observers(e.index,e.removed.length,e.inserted),this._length.update();for(const t of this.list_observers)this.call_list_observer(t,e);this.emit(this.val)}call_list_observer(e,t){try{e(t)}catch(e){r.error("Observer threw error.",e)}}replace_element_observers(e,t,i){let o=e;const n=this.value_observers.splice(e,t,...i.map(e=>{const t={index:o,disposables:this.extract_observables(e).map(i=>i.observe(()=>{this.finalize_update({type:s.ListChangeType.ValueChange,updated:[e],index:t.index})}))};return o++,t}));for(const{disposables:e}of n)for(const t of e)t.dispose();const r=i.length-t;for(;o<this.value_observers.length;)this.value_observers[o++].index+=r}}t.AbstractListProperty=_},sMN3:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i("lLyO")),r=i("nsCy"),a=i("sZ1+"),_=i("nowp"),d=i("ouMO"),l=i("rqwK"),c=i("dx17"),u=i("G+UN"),p=i("w+Lt"),h=i("6WXA"),v=i("Tpfs");class f{constructor(e,t,i,s){this.server=e,this.item_drop_store=i,this._wanted_items=d.list_property(e=>[e.amount]),this.disposer=new v.Disposer,this.optimize=(e,t)=>{if(!e.length)return;const i=new Set(e.filter(e=>e.amount.val>0).map(e=>e.item_type)),o=this.item_drop_store.enemy_drops,s={};for(const e of this.wanted_items.val)s[e.item_type.name]={min:e.amount.val};const d={},l=new Map;for(const e of t){const t=new Map;for(const[i,o]of e.enemy_counts.entries()){const e=t.get(i)||0,s=a.npc_data(i);if(null==s.rare_type)t.set(i,e+o);else{let n,_;s.rare_type===a.NpcType.Kondrieu?(n=1-r.KONDRIEU_PROB,_=r.KONDRIEU_PROB):(n=1-r.RARE_ENEMY_PROB,_=r.RARE_ENEMY_PROB),t.set(i,e+o*n),t.set(s.rare_type,(t.get(s.rare_type)||0)+o*_)}}const s=[t],n=t.get(a.NpcType.PanArms);if(n){const e=new Map(t);e.delete(a.NpcType.PanArms),e.set(a.NpcType.Migium,n),e.set(a.NpcType.Hidoom,n),s.push(e)}const _=t.get(a.NpcType.PanArms2);if(_){const e=new Map(t);e.delete(a.NpcType.PanArms2),e.set(a.NpcType.Migium2,_),e.set(a.NpcType.Hidoom2,_),s.push(e)}for(let t=0;t<s.length;t++){const n=s[t],a=1===t;for(const t of r.Difficulties)for(const s of r.SectionIds){const r={time:e.time.val.as("hours")};let _=!1;for(const[e,a]of n.entries()){const n=o.get_drop(t,s,e);if(n&&i.has(n.item_type)){const e=r[n.item_type.name]||0;r[n.item_type.name]=e+a*n.rate,_=!0}}if(_){const i=this.full_method_name(t,s,e,a);d[i]=r,l.set(i,{method:e,difficulty:t,section_id:s,split_pan_arms:a})}}}}const c=n.default.Solve({optimize:"time",opType:"min",constraints:s,variables:d});if(!c.feasible)return;const u=[];for(const[e,t]of Object.entries(c)){const o=l.get(e);if(o){const{method:s,difficulty:n,section_id:a,split_pan_arms:l}=o,c=t,p=d[e],h=new Map;for(const[e,t]of Object.entries(p))for(const o of i)if(e===o.name){h.set(o,c*t);break}const v=[];for(const e of r.SectionIds){let t=!0;if(e!==a){const i=d[this.full_method_name(n,e,s,l)];if(i){for(const e of Object.keys(p))if(p[e]!==i[e]){t=!1;break}}else t=!1}t&&v.push(e)}u.push(new _.OptimalMethodModel(n,v,s.name+(l?" (Split Pan Arms)":""),s.episode,s.time.val,c,h))}}return new _.OptimalResultModel([...i],u)},this.initialize_persistence=()=>o(this,void 0,void 0,(function*(){this._wanted_items.val=yield p.hunt_optimizer_persister.load_wanted_items(this.server),this.disposer.add(this._wanted_items.observe(({value:e})=>{p.hunt_optimizer_persister.persist_wanted_items(this.server,e)}))})),this.huntable_item_types=t.item_types.filter(e=>i.enemy_drops.get_drops_for_item_type(e.id).length),this.wanted_items=this._wanted_items,this.result=d.map(this.optimize,this.wanted_items,s.methods),this.initialize_persistence()}dispose(){this.disposer.dispose()}add_wanted_item(e){this._wanted_items.val.find(t=>t.item_type===e)||this._wanted_items.push(new _.WantedItemModel(e,1))}remove_wanted_item(e){this._wanted_items.remove(e)}full_method_name(e,t,i,o){let s=`${e}\t${t}\t${i.id}`;return o&&(s+="\tspa"),s}}t.hunt_optimizer_stores=new h.ServerMap((function(e){return o(this,void 0,void 0,(function*(){return new f(e,yield u.item_type_stores.get(e),yield c.item_drop_stores.get(e),yield l.hunt_method_stores.get(e))}))}))},"sZ1+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("xs7i");var s;!function(e){e[e.Unknown=0]="Unknown",e[e.FemaleFat=1]="FemaleFat",e[e.FemaleMacho=2]="FemaleMacho",e[e.FemaleTall=3]="FemaleTall",e[e.MaleDwarf=4]="MaleDwarf",e[e.MaleFat=5]="MaleFat",e[e.MaleMacho=6]="MaleMacho",e[e.MaleOld=7]="MaleOld",e[e.BlueSoldier=8]="BlueSoldier",e[e.RedSoldier=9]="RedSoldier",e[e.Principal=10]="Principal",e[e.Tekker=11]="Tekker",e[e.GuildLady=12]="GuildLady",e[e.Scientist=13]="Scientist",e[e.Nurse=14]="Nurse",e[e.Irene=15]="Irene",e[e.ItemShop=16]="ItemShop",e[e.Nurse2=17]="Nurse2",e[e.Hildebear=18]="Hildebear",e[e.Hildeblue=19]="Hildeblue",e[e.RagRappy=20]="RagRappy",e[e.AlRappy=21]="AlRappy",e[e.Monest=22]="Monest",e[e.Mothmant=23]="Mothmant",e[e.SavageWolf=24]="SavageWolf",e[e.BarbarousWolf=25]="BarbarousWolf",e[e.Booma=26]="Booma",e[e.Gobooma=27]="Gobooma",e[e.Gigobooma=28]="Gigobooma",e[e.Dragon=29]="Dragon",e[e.GrassAssassin=30]="GrassAssassin",e[e.PoisonLily=31]="PoisonLily",e[e.NarLily=32]="NarLily",e[e.NanoDragon=33]="NanoDragon",e[e.EvilShark=34]="EvilShark",e[e.PalShark=35]="PalShark",e[e.GuilShark=36]="GuilShark",e[e.PofuillySlime=37]="PofuillySlime",e[e.PouillySlime=38]="PouillySlime",e[e.PanArms=39]="PanArms",e[e.Migium=40]="Migium",e[e.Hidoom=41]="Hidoom",e[e.DeRolLe=42]="DeRolLe",e[e.Dubchic=43]="Dubchic",e[e.Gilchic=44]="Gilchic",e[e.Garanz=45]="Garanz",e[e.SinowBeat=46]="SinowBeat",e[e.SinowGold=47]="SinowGold",e[e.Canadine=48]="Canadine",e[e.Canane=49]="Canane",e[e.Dubswitch=50]="Dubswitch",e[e.VolOpt=51]="VolOpt",e[e.Delsaber=52]="Delsaber",e[e.ChaosSorcerer=53]="ChaosSorcerer",e[e.DarkGunner=54]="DarkGunner",e[e.DeathGunner=55]="DeathGunner",e[e.ChaosBringer=56]="ChaosBringer",e[e.DarkBelra=57]="DarkBelra",e[e.Dimenian=58]="Dimenian",e[e.LaDimenian=59]="LaDimenian",e[e.SoDimenian=60]="SoDimenian",e[e.Bulclaw=61]="Bulclaw",e[e.Bulk=62]="Bulk",e[e.Claw=63]="Claw",e[e.DarkFalz=64]="DarkFalz",e[e.Hildebear2=65]="Hildebear2",e[e.Hildeblue2=66]="Hildeblue2",e[e.RagRappy2=67]="RagRappy2",e[e.LoveRappy=68]="LoveRappy",e[e.StRappy=69]="StRappy",e[e.HalloRappy=70]="HalloRappy",e[e.EggRappy=71]="EggRappy",e[e.Monest2=72]="Monest2",e[e.Mothmant2=73]="Mothmant2",e[e.PoisonLily2=74]="PoisonLily2",e[e.NarLily2=75]="NarLily2",e[e.GrassAssassin2=76]="GrassAssassin2",e[e.Dimenian2=77]="Dimenian2",e[e.LaDimenian2=78]="LaDimenian2",e[e.SoDimenian2=79]="SoDimenian2",e[e.DarkBelra2=80]="DarkBelra2",e[e.BarbaRay=81]="BarbaRay",e[e.SavageWolf2=82]="SavageWolf2",e[e.BarbarousWolf2=83]="BarbarousWolf2",e[e.PanArms2=84]="PanArms2",e[e.Migium2=85]="Migium2",e[e.Hidoom2=86]="Hidoom2",e[e.Dubchic2=87]="Dubchic2",e[e.Gilchic2=88]="Gilchic2",e[e.Garanz2=89]="Garanz2",e[e.Dubswitch2=90]="Dubswitch2",e[e.Delsaber2=91]="Delsaber2",e[e.ChaosSorcerer2=92]="ChaosSorcerer2",e[e.GolDragon=93]="GolDragon",e[e.SinowBerill=94]="SinowBerill",e[e.SinowSpigell=95]="SinowSpigell",e[e.Merillia=96]="Merillia",e[e.Meriltas=97]="Meriltas",e[e.Mericarol=98]="Mericarol",e[e.Mericus=99]="Mericus",e[e.Merikle=100]="Merikle",e[e.UlGibbon=101]="UlGibbon",e[e.ZolGibbon=102]="ZolGibbon",e[e.Gibbles=103]="Gibbles",e[e.Gee=104]="Gee",e[e.GiGue=105]="GiGue",e[e.IllGill=106]="IllGill",e[e.DelLily=107]="DelLily",e[e.Epsilon=108]="Epsilon",e[e.GalGryphon=109]="GalGryphon",e[e.Deldepth=110]="Deldepth",e[e.Delbiter=111]="Delbiter",e[e.Dolmolm=112]="Dolmolm",e[e.Dolmdarl=113]="Dolmdarl",e[e.Morfos=114]="Morfos",e[e.Recobox=115]="Recobox",e[e.Recon=116]="Recon",e[e.SinowZoa=117]="SinowZoa",e[e.SinowZele=118]="SinowZele",e[e.OlgaFlow=119]="OlgaFlow",e[e.SandRappy=120]="SandRappy",e[e.DelRappy=121]="DelRappy",e[e.Astark=122]="Astark",e[e.SatelliteLizard=123]="SatelliteLizard",e[e.Yowie=124]="Yowie",e[e.MerissaA=125]="MerissaA",e[e.MerissaAA=126]="MerissaAA",e[e.Girtablulu=127]="Girtablulu",e[e.Zu=128]="Zu",e[e.Pazuzu=129]="Pazuzu",e[e.Boota=130]="Boota",e[e.ZeBoota=131]="ZeBoota",e[e.BaBoota=132]="BaBoota",e[e.Dorphon=133]="Dorphon",e[e.DorphonEclair=134]="DorphonEclair",e[e.Goran=135]="Goran",e[e.PyroGoran=136]="PyroGoran",e[e.GoranDetonator=137]="GoranDetonator",e[e.SaintMilion=138]="SaintMilion",e[e.Shambertin=139]="Shambertin",e[e.Kondrieu=140]="Kondrieu"}(s=t.NpcType||(t.NpcType={})),t.NPC_TYPES=[],t.ENEMY_NPC_TYPES=[],t.npc_data=function(e){return r[e]},t.name_and_episode_to_npc_type=function(e,t){return o.check_episode(t),n[t].get(e)};const n=[void 0,new Map,new Map,void 0,new Map],r=[];function a(e,i,o,s,a,_,d,l,c,u,p){if(t.NPC_TYPES.push(e),_&&t.ENEMY_NPC_TYPES.push(e),r[e]=Object.freeze({name:i,simple_name:o,ultimate_name:s,episode:a,enemy:_,rare_type:d,area_ids:l,pso_type_id:c,pso_roaming:u,pso_regular:p}),a){const t=n[a];t&&(t.set(o,e),t.set(s,e))}}a(s.Unknown,"Unknown","Unknown","Unknown",void 0,!1,void 0,[],void 0,void 0,void 0),a(s.FemaleFat,"Female Fat","Female Fat","Female Fat",void 0,!1,void 0,[0],4,0,!0),a(s.FemaleMacho,"Female Macho","Female Macho","Female Macho",void 0,!1,void 0,[0],5,0,!0),a(s.FemaleTall,"Female Tall","Female Tall","Female Tall",void 0,!1,void 0,[0],7,0,!0),a(s.MaleDwarf,"Male Dwarf","Male Dwarf","Male Dwarf",void 0,!1,void 0,[0],10,0,!0),a(s.MaleFat,"Male Fat","Male Fat","Male Fat",void 0,!1,void 0,[0],11,0,!0),a(s.MaleMacho,"Male Macho","Male Macho","Male Macho",void 0,!1,void 0,[0],12,0,!0),a(s.MaleOld,"Male Old","Male Old","Male Old",void 0,!1,void 0,[0],13,0,!0),a(s.BlueSoldier,"Blue Soldier","Blue Soldier","Blue Soldier",void 0,!1,void 0,[0],25,0,!0),a(s.RedSoldier,"Red Soldier","Red Soldier","Red Soldier",void 0,!1,void 0,[0],26,0,!0),a(s.Principal,"Principal","Principal","Principal",void 0,!1,void 0,[0],27,0,!0),a(s.Tekker,"Tekker","Tekker","Tekker",void 0,!1,void 0,[0],28,0,!0),a(s.GuildLady,"Guild Lady","Guild Lady","Guild Lady",void 0,!1,void 0,[0],29,0,!0),a(s.Scientist,"Scientist","Scientist","Scientist",void 0,!1,void 0,[0],30,0,!0),a(s.Nurse,"Nurse","Nurse","Nurse",void 0,!1,void 0,[0],31,0,!0),a(s.Irene,"Irene","Irene","Irene",void 0,!1,void 0,[0],32,0,!0),a(s.ItemShop,"Item Shop","Item Shop","Item Shop",void 0,!1,void 0,[0],241,0,!0),a(s.Nurse2,"Nurse (Ep. II)","Nurse","Nurse",2,!1,void 0,[0],254,0,!0),a(s.Hildebear,"Hildebear","Hildebear","Hildelt",1,!0,s.Hildeblue,[1,2],64,0,!0),a(s.Hildeblue,"Hildeblue","Hildeblue","Hildetorr",1,!0,void 0,[1,2],64,1,!0),a(s.RagRappy,"Rag Rappy","Rag Rappy","El Rappy",1,!0,s.AlRappy,[1,2],65,0,!0),a(s.AlRappy,"Al Rappy","Al Rappy","Pal Rappy",1,!0,void 0,[1,2],65,1,!0),a(s.Monest,"Monest","Monest","Mothvist",1,!0,void 0,[1,2],66,0,!0),a(s.Mothmant,"Mothmant","Mothmant","Mothvert",1,!0,void 0,[],void 0,void 0,void 0),a(s.SavageWolf,"Savage Wolf","Savage Wolf","Gulgus",1,!0,void 0,[1,2],67,0,!0),a(s.BarbarousWolf,"Barbarous Wolf","Barbarous Wolf","Gulgus-Gue",1,!0,void 0,[1,2],67,0,!1),a(s.Booma,"Booma","Booma","Bartle",1,!0,void 0,[1,2],68,0,!0),a(s.Gobooma,"Gobooma","Gobooma","Barble",1,!0,void 0,[1,2],68,1,!0),a(s.Gigobooma,"Gigobooma","Gigobooma","Tollaw",1,!0,void 0,[1,2],68,2,!0),a(s.Dragon,"Dragon","Dragon","Sil Dragon",1,!0,void 0,[11],192,0,!0),a(s.GrassAssassin,"Grass Assassin","Grass Assassin","Crimson Assassin",1,!0,void 0,[3,4,5],96,0,!0),a(s.PoisonLily,"Poison Lily","Poison Lily","Ob Lily",1,!0,s.NarLily,[3,4,5],97,0,!0),a(s.NarLily,"Nar Lily","Nar Lily","Mil Lily",1,!0,void 0,[3,4,5],97,1,!0),a(s.NanoDragon,"Nano Dragon","Nano Dragon","Nano Dragon",1,!0,void 0,[3,4,5],98,0,!0),a(s.EvilShark,"Evil Shark","Evil Shark","Vulmer",1,!0,void 0,[3,4,5],99,0,!0),a(s.PalShark,"Pal Shark","Pal Shark","Govulmer",1,!0,void 0,[3,4,5],99,1,!0),a(s.GuilShark,"Guil Shark","Guil Shark","Melqueek",1,!0,void 0,[3,4,5],99,2,!0),a(s.PofuillySlime,"Pofuilly Slime","Pofuilly Slime","Pofuilly Slime",1,!0,s.PouillySlime,[3,4,5],100,0,!0),a(s.PouillySlime,"Pouilly Slime","Pouilly Slime","Pouilly Slime",1,!0,void 0,[3,4,5],100,0,!1),a(s.PanArms,"Pan Arms","Pan Arms","Pan Arms",1,!0,void 0,[3,4,5],101,0,!0),a(s.Migium,"Migium","Migium","Migium",1,!0,void 0,[],void 0,void 0,void 0),a(s.Hidoom,"Hidoom","Hidoom","Hidoom",1,!0,void 0,[],void 0,void 0,void 0),a(s.DeRolLe,"De Rol Le","De Rol Le","Dal Ra Lie",1,!0,void 0,[12],193,0,!0),a(s.Dubchic,"Dubchic","Dubchic","Dubchich",1,!0,void 0,[6,7],128,0,!0),a(s.Gilchic,"Gilchic","Gilchic","Gilchich",1,!0,void 0,[6,7],128,1,!0),a(s.Garanz,"Garanz","Garanz","Baranz",1,!0,void 0,[6,7],129,0,!0),a(s.SinowBeat,"Sinow Beat","Sinow Beat","Sinow Blue",1,!0,void 0,[6,7],130,0,!0),a(s.SinowGold,"Sinow Gold","Sinow Gold","Sinow Red",1,!0,void 0,[6,7],130,0,!1),a(s.Canadine,"Canadine","Canadine","Canabin",1,!0,void 0,[6,7],131,0,!0),a(s.Canane,"Canane","Canane","Canune",1,!0,void 0,[6,7],132,0,!0),a(s.Dubswitch,"Dubswitch","Dubswitch","Dubswitch",1,!0,void 0,[6,7],133,0,!0),a(s.VolOpt,"Vol Opt","Vol Opt","Vol Opt ver.2",1,!0,void 0,[13],197,0,!0),a(s.Delsaber,"Delsaber","Delsaber","Delsaber",1,!0,void 0,[8,9,10],160,0,!0),a(s.ChaosSorcerer,"Chaos Sorcerer","Chaos Sorcerer","Gran Sorcerer",1,!0,void 0,[8,9,10],161,0,!0),a(s.DarkGunner,"Dark Gunner","Dark Gunner","Dark Gunner",1,!0,void 0,[8,9,10],162,0,!0),a(s.DeathGunner,"Death Gunner","Death Gunner","Death Gunner",1,!0,void 0,[],void 0,void 0,void 0),a(s.ChaosBringer,"Chaos Bringer","Chaos Bringer","Dark Bringer",1,!0,void 0,[8,9,10],164,0,!0),a(s.DarkBelra,"Dark Belra","Dark Belra","Indi Belra",1,!0,void 0,[8,9,10],165,0,!0),a(s.Dimenian,"Dimenian","Dimenian","Arlan",1,!0,void 0,[8,9,10],166,0,!0),a(s.LaDimenian,"La Dimenian","La Dimenian","Merlan",1,!0,void 0,[8,9,10],166,1,!0),a(s.SoDimenian,"So Dimenian","So Dimenian","Del-D",1,!0,void 0,[8,9,10],166,2,!0),a(s.Bulclaw,"Bulclaw","Bulclaw","Bulclaw",1,!0,void 0,[8,9,10],167,0,!0),a(s.Bulk,"Bulk","Bulk","Bulk",1,!0,void 0,[],void 0,void 0,void 0),a(s.Claw,"Claw","Claw","Claw",1,!0,void 0,[8,9,10],168,0,!0),a(s.DarkFalz,"Dark Falz","Dark Falz","Dark Falz",1,!0,void 0,[14],200,0,!0),a(s.Hildebear2,"Hildebear (Ep. II)","Hildebear","Hildelt",2,!0,s.Hildeblue2,[1,2],64,0,!0),a(s.Hildeblue2,"Hildeblue (Ep. II)","Hildeblue","Hildetorr",2,!0,void 0,[1,2],64,1,!0),a(s.RagRappy2,"Rag Rappy (Ep. II)","Rag Rappy","El Rappy",2,!0,s.LoveRappy,[1,2],65,0,!0),a(s.LoveRappy,"Love Rappy","Love Rappy","Love Rappy",2,!0,void 0,[1,2],65,1,!0),a(s.StRappy,"St. Rappy","St. Rappy","St. Rappy",2,!0,void 0,[],void 0,void 0,void 0),a(s.HalloRappy,"Hallo Rappy","Hallo Rappy","Hallo Rappy",2,!0,void 0,[],void 0,void 0,void 0),a(s.EggRappy,"Egg Rappy","Egg Rappy","Egg Rappy",2,!0,void 0,[],void 0,void 0,void 0),a(s.Monest2,"Monest (Ep. II)","Monest","Mothvist",2,!0,void 0,[1,2],66,0,!0),a(s.Mothmant2,"Mothmant","Mothmant","Mothvert",2,!0,void 0,[],void 0,void 0,void 0),a(s.PoisonLily2,"Poison Lily (Ep. II)","Poison Lily","Ob Lily",2,!0,s.NarLily2,[1,2],97,0,!0),a(s.NarLily2,"Nar Lily (Ep. II)","Nar Lily","Mil Lily",2,!0,void 0,[1,2],97,1,!0),a(s.GrassAssassin2,"Grass Assassin (Ep. II)","Grass Assassin","Crimson Assassin",2,!0,void 0,[1,2],96,0,!0),a(s.Dimenian2,"Dimenian (Ep. II)","Dimenian","Arlan",2,!0,void 0,[1,2],166,0,!0),a(s.LaDimenian2,"La Dimenian (Ep. II)","La Dimenian","Merlan",2,!0,void 0,[1,2],166,1,!0),a(s.SoDimenian2,"So Dimenian (Ep. II)","So Dimenian","Del-D",2,!0,void 0,[1,2],166,2,!0),a(s.DarkBelra2,"Dark Belra (Ep. II)","Dark Belra","Indi Belra",2,!0,void 0,[1,2],165,0,!0),a(s.BarbaRay,"Barba Ray","Barba Ray","Barba Ray",2,!0,void 0,[14],203,0,!0),a(s.SavageWolf2,"Savage Wolf (Ep. II)","Savage Wolf","Gulgus",2,!0,void 0,[3,4],67,0,!0),a(s.BarbarousWolf2,"Barbarous Wolf (Ep. II)","Barbarous Wolf","Gulgus-Gue",2,!0,void 0,[3,4],67,0,!1),a(s.PanArms2,"Pan Arms (Ep. II)","Pan Arms","Pan Arms",2,!0,void 0,[3,4],101,0,!0),a(s.Migium2,"Migium (Ep. II)","Migium","Migium",2,!0,void 0,[],void 0,void 0,void 0),a(s.Hidoom2,"Hidoom (Ep. II)","Hidoom","Hidoom",2,!0,void 0,[],void 0,void 0,void 0),a(s.Dubchic2,"Dubchic (Ep. II)","Dubchic","Dubchich",2,!0,void 0,[3,4],128,0,!0),a(s.Gilchic2,"Gilchic (Ep. II)","Gilchic","Gilchich",2,!0,void 0,[3,4],128,1,!0),a(s.Garanz2,"Garanz (Ep. II)","Garanz","Baranz",2,!0,void 0,[3,4],129,0,!0),a(s.Dubswitch2,"Dubswitch (Ep. II)","Dubswitch","Dubswitch",2,!0,void 0,[3,4],133,0,!0),a(s.Delsaber2,"Delsaber (Ep. II)","Delsaber","Delsaber",2,!0,void 0,[3,4],160,0,!0),a(s.ChaosSorcerer2,"Chaos Sorcerer (Ep. II)","Chaos Sorcerer","Gran Sorcerer",2,!0,void 0,[3,4],161,0,!0),a(s.GolDragon,"Gol Dragon","Gol Dragon","Gol Dragon",2,!0,void 0,[15],204,0,!0),a(s.SinowBerill,"Sinow Berill","Sinow Berill","Sinow Berill",2,!0,void 0,[5,6,7,8,9,16],212,0,!0),a(s.SinowSpigell,"Sinow Spigell","Sinow Spigell","Sinow Spigell",2,!0,void 0,[5,6,7,8,9,16],212,1,!0),a(s.Merillia,"Merillia","Merillia","Merillia",2,!0,void 0,[5,6,7,8,9,16],213,0,!0),a(s.Meriltas,"Meriltas","Meriltas","Meriltas",2,!0,void 0,[5,6,7,8,9,16],213,1,!0),a(s.Mericarol,"Mericarol","Mericarol","Mericarol",2,!0,void 0,[5,6,7,8,9,16,17],214,0,!0),a(s.Mericus,"Mericus","Mericus","Mericus",2,!0,void 0,[5,6,7,8,9,16,17],214,1,!0),a(s.Merikle,"Merikle","Merikle","Merikle",2,!0,void 0,[5,6,7,8,9,16,17],214,2,!0),a(s.UlGibbon,"Ul Gibbon","Ul Gibbon","Ul Gibbon",2,!0,void 0,[5,6,7,8,9,16],215,0,!0),a(s.ZolGibbon,"Zol Gibbon","Zol Gibbon","Zol Gibbon",2,!0,void 0,[5,6,7,8,9,16],215,1,!0),a(s.Gibbles,"Gibbles","Gibbles","Gibbles",2,!0,void 0,[5,6,7,8,9,16,17],216,0,!0),a(s.Gee,"Gee","Gee","Gee",2,!0,void 0,[5,6,7,8,9,16],217,0,!0),a(s.GiGue,"Gi Gue","Gi Gue","Gi Gue",2,!0,void 0,[5,6,7,8,9,16,17],218,0,!0),a(s.IllGill,"Ill Gill","Ill Gill","Ill Gill",2,!0,void 0,[17],225,0,!0),a(s.DelLily,"Del Lily","Del Lily","Del Lily",2,!0,void 0,[17],97,0,!0),a(s.Epsilon,"Epsilon","Epsilon","Epsilon",2,!0,void 0,[17],224,0,!0),a(s.GalGryphon,"Gal Gryphon","Gal Gryphon","Gal Gryphon",2,!0,void 0,[12],192,0,!0),a(s.Deldepth,"Deldepth","Deldepth","Deldepth",2,!0,void 0,[10,11],219,0,!0),a(s.Delbiter,"Delbiter","Delbiter","Delbiter",2,!0,void 0,[10,11,17],220,0,!0),a(s.Dolmolm,"Dolmolm","Dolmolm","Dolmolm",2,!0,void 0,[10,11],221,0,!0),a(s.Dolmdarl,"Dolmdarl","Dolmdarl","Dolmdarl",2,!0,void 0,[10,11],221,1,!0),a(s.Morfos,"Morfos","Morfos","Morfos",2,!0,void 0,[10,11],222,0,!0),a(s.Recobox,"Recobox","Recobox","Recobox",2,!0,void 0,[10,11,17],223,0,!0),a(s.Recon,"Recon","Recon","Recon",2,!0,void 0,[],void 0,void 0,void 0),a(s.SinowZoa,"Sinow Zoa","Sinow Zoa","Sinow Zoa",2,!0,void 0,[10,11],224,0,!0),a(s.SinowZele,"Sinow Zele","Sinow Zele","Sinow Zele",2,!0,void 0,[10,11],224,1,!0),a(s.OlgaFlow,"Olga Flow","Olga Flow","Olga Flow",2,!0,void 0,[13],202,0,!0),a(s.SandRappy,"Sand Rappy","Sand Rappy","Sand Rappy",4,!0,s.DelRappy,[1,2,3,4,5,6,7,8],65,0,!0),a(s.DelRappy,"Del Rappy","Del Rappy","Del Rappy",4,!0,void 0,[1,2,3,4,5,6,7,8],65,1,!0),a(s.Astark,"Astark","Astark","Astark",4,!0,void 0,[1,2,3,4,5,6,7,8],272,0,!0),a(s.SatelliteLizard,"Satellite Lizard","Satellite Lizard","Satellite Lizard",4,!0,void 0,[1,2,3,4,5,6,7,8],273,0,!0),a(s.Yowie,"Yowie","Yowie","Yowie",4,!0,void 0,[1,2,3,4,5,6,7,8],273,0,!1),a(s.MerissaA,"Merissa A","Merissa A","Merissa A",4,!0,s.MerissaAA,[6,7,8],274,0,!0),a(s.MerissaAA,"Merissa AA","Merissa AA","Merissa AA",4,!0,void 0,[6,7,8],274,1,!0),a(s.Girtablulu,"Girtablulu","Girtablulu","Girtablulu",4,!0,void 0,[6,7,8],275,0,!0),a(s.Zu,"Zu","Zu","Zu",4,!0,s.Pazuzu,[1,2,3,4,5,6,7,8],276,0,!0),a(s.Pazuzu,"Pazuzu","Pazuzu","Pazuzu",4,!0,void 0,[1,2,3,4,5,6,7,8],276,1,!0),a(s.Boota,"Boota","Boota","Boota",4,!0,void 0,[1,2,3,4,5],277,0,!0),a(s.ZeBoota,"Ze Boota","Ze Boota","Ze Boota",4,!0,void 0,[1,2,3,4,5],277,1,!0),a(s.BaBoota,"Ba Boota","Ba Boota","Ba Boota",4,!0,void 0,[1,2,3,4,5],277,2,!0),a(s.Dorphon,"Dorphon","Dorphon","Dorphon",4,!0,s.DorphonEclair,[1,2,3,4,5],278,0,!0),a(s.DorphonEclair,"Dorphon Eclair","Dorphon Eclair","Dorphon Eclair",4,!0,void 0,[1,2,3,4,5],278,1,!0),a(s.Goran,"Goran","Goran","Goran",4,!0,void 0,[6,7,8],279,0,!0),a(s.PyroGoran,"Pyro Goran","Pyro Goran","Pyro Goran",4,!0,void 0,[6,7,8],279,1,!0),a(s.GoranDetonator,"Goran Detonator","Goran Detonator","Goran Detonator",4,!0,void 0,[6,7,8],279,2,!0),a(s.SaintMilion,"Saint-Milion","Saint-Milion","Saint-Milion",4,!0,s.Kondrieu,[9],281,0,!0),a(s.Shambertin,"Shambertin","Shambertin","Shambertin",4,!0,s.Kondrieu,[9],281,1,!0),a(s.Kondrieu,"Kondrieu","Kondrieu","Kondrieu",4,!0,void 0,[9],281,0,!1),Object.freeze(t.NPC_TYPES),Object.freeze(t.ENEMY_NPC_TYPES),Object.freeze(r)},sv1z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("sDu+"),s=i("FXpb");i("6MRE");const n=i("jJhE"),r=i("KVVN"),a=i("4VsB"),_=i("LSoc");class d extends o.LabelledControl{constructor(e,t,i){super(i),this.element=s.el.div({class:"core_Select"}),this.preferred_label_position="left",this.to_label=t,this.button=this.disposable(new r.Button(" ",{icon_right:s.Icon.TriangleDown})),this.menu=this.disposable(new _.Menu(e,t,this.element)),this.element.append(this.button.element,this.menu.element),this._selected=new a.WidgetProperty(this,void 0,this.set_selected),this.selected=this._selected,this.just_opened=!1,this.disposables(s.disposable_listener(this.button.element,"mousedown",e=>this.button_mousedown(e)),this.button.mouseup.observe(()=>this.button_mouseup()),this.menu.selected.observe(({value:e})=>this._selected.set_val(e,{silent:!1}))),i&&(n.is_any_property(i.selected)?this.selected.bind_to(i.selected):i.selected&&(this.selected.val=i.selected)),this.finalize_construction(d.prototype)}set_enabled(e){super.set_enabled(e),this.button.enabled.val=e}set_selected(e){this.button.text.val=e?this.to_label(e):" ",this.menu.selected.val=e}button_mousedown(e){e.stopPropagation(),this.just_opened=!this.menu.visible.val,this.menu.visible.val=!0}button_mouseup(){this.just_opened?this.menu.focus():this.menu.visible.val=!1,this.just_opened=!1}}t.Select=d},t2oB:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CharacterClassAnimationModel=class{constructor(e,t){this.id=e,this.name=t}}},tRdk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt");t.vec3_to_threejs=function(e){return new o.Vector3(e.x,e.y,e.z)}},tjEv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ResizableBuffer=class{constructor(e=8192){this._size=0,this._buffer=new ArrayBuffer(e),this._data_view=new DataView(this._buffer)}get size(){return this._size}set size(e){if(e<0)throw new Error("Size should be non-negative.");this.ensure_capacity(e),this._size=e}get capacity(){return this._buffer.byteLength}get backing_buffer(){return this._buffer}get view(){return this._data_view}sub_view(e,t){return new DataView(this._buffer,e,t)}ensure_capacity(e){if(e>this.capacity){let t=this.capacity||e;do{t*=2}while(t<e);const i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(this._buffer,0,this.size)),this._buffer=i,this._data_view=new DataView(this._buffer)}}}},tyuj:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("NRxM"),n=i("bcBH"),r=i("VwSi"),a=i("kwt4"),_=i("9fJw"),d=i("t2oB"),l=i("Sa3/"),c=i("ouMO"),u=i("7CyS"),p=i("yub1"),h=i("karJ"),v=i("GGSb").get("viewer/stores/ModelStore"),f=new Map,O=new Map;class m{constructor(){this._current_model=c.property(void 0),this._current_nj_data=c.property(void 0),this._current_xvm=c.property(void 0),this._show_skeleton=c.property(!1),this._current_animation=c.property(void 0),this._current_nj_motion=c.property(void 0),this._animation_playing=c.property(!0),this._animation_frame_rate=c.property(u.PSO_FRAME_RATE),this._animation_frame=c.property(0),this.disposables=[],this.models=[new _.CharacterClassModel("HUmar",1,10,new Set([6])),new _.CharacterClassModel("HUnewearl",1,10,new Set),new _.CharacterClassModel("HUcast",5,0,new Set),new _.CharacterClassModel("HUcaseal",5,0,new Set),new _.CharacterClassModel("RAmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new _.CharacterClassModel("RAmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new _.CharacterClassModel("RAcast",5,0,new Set),new _.CharacterClassModel("RAcaseal",5,0,new Set),new _.CharacterClassModel("FOmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new _.CharacterClassModel("FOmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new _.CharacterClassModel("FOnewm",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new _.CharacterClassModel("FOnewearl",1,10,new Set([0,1,2,3,4,5,6,7,8,9]))],this.animations=new Array(572).fill(void 0).map((e,t)=>new d.CharacterClassAnimationModel(t,`Animation ${t+1}`)),this.current_model=this._current_model,this.current_nj_data=this._current_nj_data,this.current_xvm=this._current_xvm,this.show_skeleton=this._show_skeleton,this.current_animation=this._current_animation,this.current_nj_motion=this._current_nj_motion,this.animation_playing=this._animation_playing,this.animation_frame_rate=this._animation_frame_rate,this.animation_frame=this._animation_frame,this.animation_frame_count=this.current_nj_motion.map(e=>e?e.frame_count:0),this.set_current_model=e=>{this._current_model.val=e},this.clear_current_model=()=>{this._current_model.val=void 0},this.set_show_skeleton=e=>{this._show_skeleton.val=e},this.set_current_animation=e=>{this._current_animation.val=e},this.clear_current_animation=()=>{this._current_animation.val=void 0},this.set_animation_playing=e=>{this._animation_playing.val=e},this.set_animation_frame_rate=e=>{this._animation_frame_rate.val=e},this.set_animation_frame=e=>{this._animation_frame.val=e},this.load_file=e=>o(this,void 0,void 0,(function*(){try{const t=yield l.read_file(e),i=new s.ArrayBufferCursor(t,n.Endianness.Little);if(e.name.endsWith(".nj")){this.clear_current_model();const e=a.parse_nj(i)[0];this.set_current_nj_data({nj_object:e,bone_count:e.bone_count(),has_skeleton:!0})}else if(e.name.endsWith(".xj")){this.clear_current_model();const e=a.parse_xj(i)[0];this.set_current_nj_data({nj_object:e,bone_count:0,has_skeleton:!1})}else if(e.name.endsWith(".njm")){this.clear_current_animation(),this._current_nj_motion.val=void 0;const e=this.current_nj_data.val;e&&(this.set_animation_playing(!0),this._current_nj_motion.val=r.parse_njm(i,e.bone_count))}else e.name.endsWith(".xvm")?this.current_model&&(this._current_xvm.val=p.parse_xvm(i)):v.error(`Unknown file extension in filename "${e.name}".`)}catch(e){v.error("Couldn't read file.",e)}})),this.load_model=e=>o(this,void 0,void 0,(function*(){if(this.clear_current_animation(),e){const t=yield this.get_nj_object(e);this.set_current_nj_data({nj_object:t,bone_count:e?64:t.bone_count(),has_skeleton:!0})}else this._current_nj_data.val=void 0})),this.load_animation=e=>o(this,void 0,void 0,(function*(){const t=this.current_nj_data.val;t&&e?(this._current_nj_motion.val=yield this.get_nj_motion(e,t.bone_count),this.set_animation_playing(!0)):this._current_nj_motion.val=void 0})),this.disposables.push(this.current_model.observe(({value:e})=>this.load_model(e)),this.current_animation.observe(({value:e})=>this.load_animation(e)))}dispose(){this.disposables.forEach(e=>e.dispose())}set_current_nj_data(e){this._current_xvm.val=void 0,this._current_nj_data.val=e}get_nj_object(e){return o(this,void 0,void 0,(function*(){let t=f.get(e.name);return t||(t=this.get_all_nj_objects(e),f.set(e.name,t),t)}))}get_all_nj_objects(e){return o(this,void 0,void 0,(function*(){const t=yield h.get_character_class_data(e.name,"Body"),i=a.parse_nj(new s.ArrayBufferCursor(t,n.Endianness.Little))[0];if(!i)throw new Error(`Couldn't parse body for player class ${e.name}.`);const o=yield h.get_character_class_data(e.name,"Head",0),r=a.parse_nj(new s.ArrayBufferCursor(o,n.Endianness.Little))[0];if(r&&this.add_to_bone(i,r,59),e.hair_styles_count>0){const t=yield h.get_character_class_data(e.name,"Hair",0),o=a.parse_nj(new s.ArrayBufferCursor(t,n.Endianness.Little))[0];if(o&&this.add_to_bone(i,o,59),e.hair_styles_with_accessory.has(0)){const t=yield h.get_character_class_data(e.name,"Accessory",0),o=a.parse_nj(new s.ArrayBufferCursor(t,n.Endianness.Little))[0];o&&this.add_to_bone(i,o,59)}}return i}))}add_to_bone(e,t,i){const o=e.get_bone(i);o&&(o.evaluation_flags.hidden=!1,o.evaluation_flags.break_child_trace=!1,o.children.push(t))}get_nj_motion(e,t){return o(this,void 0,void 0,(function*(){let i=O.get(e.id);return i||(i=h.get_character_class_animation_data(e.id).then(e=>r.parse_njm(new s.ArrayBufferCursor(e,n.Endianness.Little),t)),O.set(e.id,i),i)}))}}t.Model3DStore=m,t.model_store=new m},uaZj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("kiqn");class s extends o.QuestEntityModel{constructor(e,t,i,o,s,n,r,a,_){super(e,o,s,n,r),this.id=t,this.group_id=i,this.properties=a,this.unknown=_}}t.QuestObjectModel=s},ueWm:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("wsa1"),n=i("Tpfs");var r=s.editor.ScrollType;t.EditorHistory=class{constructor(e){this.editor=e,this.history=[],this.history_index=-1,this.capture_history=!0,this.disposer=new n.Disposer,this.did_change_cursor_position=e=>{this.capture_history&&(this.history.splice(this.history_index+1,1/0),"api"===e.source||-1===this.history_index||Math.abs(e.position.lineNumber-this.history[this.history_index].lineNumber)>=10?(this.history.push(e.position),this.history_index++):this.history[this.history_index]=e.position)},this.back=()=>o(this,void 0,void 0,(function*(){this.history_index>0&&this.set_position(this.history[--this.history_index])})),this.forward=()=>o(this,void 0,void 0,(function*(){this.history_index+1<this.history.length&&this.set_position(this.history[++this.history_index])})),this.set_position=e=>{this.capture_history=!1,this.editor.setPosition(e),this.editor.revealPositionInCenterIfOutsideViewport(e,r.Immediate),this.capture_history=!0},this.mouse_up=e=>{const t=e.event.browserEvent.button,i=e.event.browserEvent.buttons;3===t?(0===i&&(e.event.preventDefault(),this.back()),this.editor.focus()):4===t&&(0===i&&(e.event.preventDefault(),this.forward()),this.editor.focus())},this.disposer.add_all(this.editor.onDidChangeCursorPosition(this.did_change_cursor_position),this.editor.addAction({id:"phantasmal.action.back",label:"Back",keybindings:[s.KeyMod.Alt|s.KeyCode.LeftArrow],run:this.back}),this.editor.addAction({id:"phantasmal.action.forward",label:"Forward",keybindings:[s.KeyMod.Alt|s.KeyCode.RightArrow],run:this.forward}),this.editor.onMouseUp(this.mouse_up))}dispose(){this.disposer.dispose()}reset(){this.history.splice(0,1/0),this.history_index=-1}}},uiJh:function(e,t,i){"use strict";function o(e){const t=Object.values(e),i=t.filter(e=>"number"==typeof e);return i.length?i:t}Object.defineProperty(t,"__esModule",{value:!0}),t.enum_values=o;t.EnumMap=class{constructor(e,t){this.values=new Map,this.keys=o(e);for(const e of this.keys)this.values.set(e,t(e))}get(e){return this.values.get(e)}}},upFJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SimpleQuestModel=class{constructor(e,t,i,o){if(this.id=e,this.name=t,this.episode=i,this.enemy_counts=o,!e)throw new Error("id is required.");if(!t)throw new Error("name is required.");if(!o)throw new Error("enemyCounts is required.")}}},v2aa:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i("ouMO"),n=i("xs7i"),r=i("uaZj"),a=i("IjTL"),_=o(i("GGSb")),d=i("4Mnx"),l=i("yQqj"),c=_.default.get("quest_editor/model/QuestModel");t.QuestModel=class{constructor(e,t,i,o,r,a,_,l,u,p,h,v,f){if(this._id=s.property(0),this._language=s.property(0),this._name=s.property(""),this._short_description=s.property(""),this._long_description=s.property(""),this._area_variants=s.list_property(),this.id=this._id,this.language=this._language,this.name=this._name,this.short_description=this._short_description,this.long_description=this._long_description,this.area_variants=this._area_variants,this.update_area_variants=()=>{const e=new Map;for(const t of this.entities_per_area.val.keys())try{e.set(t,d.area_store.get_variant(this.episode,t,0))}catch(e){c.warn(e)}for(const[t,i]of this.map_designations.val)try{e.set(t,d.area_store.get_variant(this.episode,t,i))}catch(e){c.warn(e)}this._area_variants.val=[...e.values()]},n.check_episode(a),!_)throw new Error("map_designations is required.");if(!Array.isArray(l))throw new Error("objs is required.");if(!Array.isArray(u))throw new Error("npcs is required.");if(!Array.isArray(p))throw new Error("event_dags is required.");if(!Array.isArray(h))throw new Error("dat_unknowns is required.");if(!Array.isArray(v))throw new Error("object_code is required.");if(!Array.isArray(f))throw new Error("shop_items is required.");this.set_id(e),this.set_language(t),this.set_name(i),this.set_short_description(o),this.set_long_description(r),this.episode=a,this._map_designations=s.property(_),this.map_designations=this._map_designations,this._objects=s.list_property(void 0,...l),this.objects=this._objects,this._npcs=s.list_property(void 0,...u),this.npcs=this._npcs,this._event_dags=s.list_property(void 0,...p),this.event_dags=this._event_dags,this.dat_unknowns=h,this.object_code=v,this.shop_items=f,this.entities_per_area=s.map((e,t)=>{const i=new Map;for(const t of e)i.set(t.area_id,(i.get(t.area_id)||0)+1);for(const e of t)i.set(e.area_id,(i.get(e.area_id)||0)+1);return i},this.npcs,this.objects),this.entities_per_area.observe(this.update_area_variants,{call_now:!0}),this.map_designations.observe(this.update_area_variants,{call_now:!0})}set_id(e){if(e<0)throw new Error(`id should be greater than or equal to 0, was ${e}.`);return this._id.val=e,this}set_language(e){if(e<0)throw new Error(`language should be greater than or equal to 0, was ${e}.`);return this._language.val=e,this}set_name(e){if(e.length>32)throw new Error(`name can't be longer than 32 characters, got "${e}".`);return this._name.val=e,this}set_short_description(e){if(e.length>128)throw new Error(`short_description can't be longer than 128 characters, got "${e}".`);return this._short_description.val=e,this}set_long_description(e){if(e.length>288)throw new Error(`long_description can't be longer than 288 characters, got "${e}".`);return this._long_description.val=e,this}set_map_designations(e){return this._map_designations.val=e,this}add_entity(e){if(e instanceof r.QuestObjectModel)this.add_object(e);else{if(!(e instanceof a.QuestNpcModel))throw new Error(`${l.entity_type_to_string(e.type)} not supported.`);this.add_npc(e)}}add_object(e){this._objects.push(e)}add_npc(e){this._npcs.push(e)}remove_entity(e){if(e instanceof r.QuestObjectModel)this._objects.remove(e);else{if(!(e instanceof a.QuestNpcModel))throw new Error(`${l.entity_type_to_string(e.type)} not supported.`);this._npcs.remove(e)}}}},vM2b:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt");t.GeometryBuilder=class{constructor(){this.positions=[],this.normals=[],this.uvs=[],this.indices=[],this.bones=[],this.bone_indices=[],this.bone_weights=[],this.groups=[],this.material_indices=new Set([-1])}get vertex_count(){return this.positions.length/3}get index_count(){return this.indices.length}get_position(e){return new o.Vector3(this.positions[3*e],this.positions[3*e+1],this.positions[3*e+2])}get_normal(e){return new o.Vector3(this.normals[3*e],this.normals[3*e+1],this.normals[3*e+2])}add_vertex(e,t,i){this.positions.push(e.x,e.y,e.z),this.normals.push(t.x,t.y,t.z),this.uvs.push(i.x,i.y)}add_index(e){this.indices.push(e)}add_bone(e){this.bones.push(e)}add_bone_weight(e,t){this.bone_indices.push(e),this.bone_weights.push(t)}add_group(e,t,i){const o=this.groups[this.groups.length-1],s=null==i?-1:i;o&&o.material_index===s?o.size+=t:(this.groups.push({offset:e,size:t,material_index:s}),this.material_indices.add(s))}build(){const e=new o.BufferGeometry,t=e.userData;t.created_by_geometry_builder=!0,e.addAttribute("position",new o.Float32BufferAttribute(this.positions,3)),e.addAttribute("normal",new o.Float32BufferAttribute(this.normals,3)),e.addAttribute("uv",new o.Float32BufferAttribute(this.uvs,2)),e.setIndex(new o.Uint16BufferAttribute(this.indices,1)),this.bone_indices.length&&this.bones.length?(e.addAttribute("skinIndex",new o.Uint16BufferAttribute(this.bone_indices,4)),e.addAttribute("skinWeight",new o.Float32BufferAttribute(this.bone_weights,4)),t.bones=this.bones):t.bones=[];const i=new Map;let s=0;for(const e of[...this.material_indices].sort((e,t)=>e-t))i.set(e,s++);for(const t of this.groups)e.addGroup(t.offset,t.size,i.get(t.material_index));return t.normalized_material_indices=i,e.computeBoundingSphere(),e.computeBoundingBox(),e}}},vsj6:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i("HjM1");class r extends n.TabContainer{constructor(){super({class:"viewer_ViewerView",tabs:[{title:"Models",key:"model",create_view:function(){return o(this,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("Hdaq")))).Model3DView)}))}},{title:"Textures",key:"texture",create_view:function(){return o(this,void 0,void 0,(function*(){return new((yield Promise.resolve().then(()=>s(i("Za3H")))).TextureView)}))}}]}),this.finalize_construction(r.prototype)}}t.ViewerView=r},"w+Lt":function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("G+UN"),n=i("yfUv"),r=i("nowp"),a="HuntOptimizerStore.wantedItems";class _ extends n.Persister{persist_wanted_items(e,t){this.persist_for_server(e,a,t.map(({item_type:e,amount:t})=>({itemTypeId:e.id,amount:t.val})))}load_wanted_items(e){return o(this,void 0,void 0,(function*(){const t=yield s.item_type_stores.get(e),i=yield this.load_for_server(e,a),o=[];if(i)for(const{itemTypeId:e,itemKindId:s,amount:n}of i){const i=null!=e?t.get_by_id(e):t.get_by_id(s);i&&o.push(new r.WantedItemModel(i,n))}return o}))}}t.hunt_optimizer_persister=new _},w6HN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb");i("IQIM");const n=i("sDu+");class r extends o.Widget{constructor(e){if(super(e),this.element=s.create_element("div",{class:"core_ToolBar"}),this.height=33,this.element.style.height=`${this.height}px`,e&&e.children)for(const t of e.children)if(t instanceof n.LabelledControl&&t.label){const e=s.create_element("div",{class:"core_ToolBar_group"});"left"===t.preferred_label_position||"top"===t.preferred_label_position?e.append(t.label.element,t.element):e.append(t.element,t.label.element),this.element.append(e)}else this.element.append(t.element),this.disposable(t);this.finalize_construction(r.prototype)}}t.ToolBar=r},weRg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb");i("ZZ0G");const n=i("yQqj"),r=i("3ONQ"),a=i("xcxG"),_=i("ouMO");class d extends o.ResizableWidget{constructor(e){super(),this.entities=_.list_property(),this.create_entity_element=(e,t)=>{const i=s.el.div({class:"quest_editor_EntityListView_entity",data:{index:t.toString()}});i.draggable=!0;const o=s.el.img({width:100,height:100});o.style.visibility="hidden",o.style.pointerEvents="none",i.append(o),a.render_entity_to_image(e).then(e=>{o.src=e,o.style.visibility="visible"});const r=s.el.span({text:n.entity_data(e).name});return i.append(r),i};const t=s.el.div({class:"quest_editor_EntityListView_entity_list"});this.element=s.el.div({class:`${e} quest_editor_EntityListView`},t),this.disposables(s.bind_children_to(t,this.entities,this.create_entity_element),r.entity_dnd_source(t,e=>{let i=e;do{const t=e.dataset.index;if(null!=t)return[i.querySelector("img").cloneNode(!0),this.entities.get(parseInt(t,10))];i=i.parentElement}while(i&&i!==t)}))}}t.EntityListView=d},wtpc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrays_equal=function(e,t,i=((e,t)=>e===t)){const o=e.length;if(o!==t.length)return!1;for(let s=0;s<o;s++)if(!i(e[s],t[s]))return!1;return!0},t.array_buffers_equal=function(e,t){if(e.byteLength!==t.byteLength)return!1;const i=new Uint8Array(e),o=new Uint8Array(t);for(let e=0;e<i.length;e++)if(i[e]!==o[e])return!1;return!0},t.basename=function(e){const t=e.lastIndexOf(".");return t>1?e.slice(0,t):e},t.defined=function(e){if(void 0===e)throw new Error("Assertion Error: value is undefined.")},t.assert=function(e,t){if(!e){let e="Assertion Error";throw t&&(e+=": "+t),new Error(e)}},t.number_to_hex_string=function(e,t=8,i="0x"){let o=e.toString(16);return o.length<t&&(o="0".repeat(t-o.length)+o),i+o}},x4IQ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.QuestEditAction=class{constructor(e,t){this.quest=e,this.new=t.value,this.old=t.old_value}}},x4QM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("ouMO");t.WeaponItemType=class{constructor(e,t,i,o,s,n,r){this.id=e,this.name=t,this.min_atp=i,this.max_atp=o,this.ata=s,this.max_grind=n,this.required_atp=r}};t.ArmorItemType=class{constructor(e,t,i,o,s,n,r,a,_,d,l){this.id=e,this.name=t,this.atp=i,this.ata=o,this.min_evp=s,this.max_evp=n,this.min_dfp=r,this.max_dfp=a,this.mst=_,this.hp=d,this.lck=l}};t.ShieldItemType=class{constructor(e,t,i,o,s,n,r,a,_,d,l){this.id=e,this.name=t,this.atp=i,this.ata=o,this.min_evp=s,this.max_evp=n,this.min_dfp=r,this.max_dfp=a,this.mst=_,this.hp=d,this.lck=l}};t.UnitItemType=class{constructor(e,t){this.id=e,this.name=t}};t.ToolItemType=class{constructor(e,t){this.id=e,this.name=t}};t.WeaponItem=class{constructor(e){this.type=e,this._attribute=o.property(0),this.attribute=this._attribute,this._hit=o.property(0),this.hit=this._hit,this._grind=o.property(0),this.grind=this._grind,this.grind_atp=this.grind.map(e=>2*e)}};t.ArmorItem=class{constructor(e){this.type=e}};t.ShieldItem=class{constructor(e){this.type=e}};t.UnitItem=class{constructor(e){this.type=e}};t.ToolItem=class{constructor(e){this.type=e}}},xcxG:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("Womt"),n=i("4vnR"),r=i("xpi7"),a=i("M/y3"),_=new s.WebGLRenderer({alpha:!0,antialias:!0});_.setSize(100,100);const d=new s.HemisphereLight(16777215,5263440,1.2),l=new s.Scene,c=new s.PerspectiveCamera(30,1,10,1e3),u=new s.Vector3(1,1,2).normalize(),p=1.3/Math.tan(c.fov/180*Math.PI/2),h=new Map;t.render_entity_to_image=function(e){return o(this,void 0,void 0,(function*(){let t=h.get(e);return t||(t=v(e),h.set(e,t)),t}))};const v=a.sequential(e=>o(void 0,void 0,void 0,(function*(){const t=yield n.load_entity_geometry(e),i=yield n.load_entity_textures(e);l.remove(...l.children),l.add(d);const o=r.create_entity_type_mesh(e,t,i);l.add(o);const s=o.geometry.boundingSphere;return c.position.copy(u),c.position.multiplyScalar(s.radius*p),c.lookAt(s.center),_.render(l,c),_.domElement.toDataURL()})))},xpi7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("Womt"),s=i("Eqai"),n=i("yQqj"),r=i("sZ1+");var a;function _(e,i,_){const d=new o.MeshLambertMaterial({color:n.is_npc_type(e)?t.NPC_COLORS[a.Normal]:t.OBJECT_COLORS[a.Normal],side:o.DoubleSide}),l=s.create_mesh(i,_.length?_.map(t=>new o.MeshBasicMaterial({map:t,side:o.DoubleSide,transparent:e!==r.NpcType.PofuillySlime&&e!==r.NpcType.PouillySlime,alphaTest:.01})):d,d);return l.name=n.entity_type_to_string(e),l}!function(e){e[e.Normal=0]="Normal",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected"}(a=t.ColorType||(t.ColorType={})),t.OBJECT_COLORS=[],t.OBJECT_COLORS[a.Normal]=16776960,t.OBJECT_COLORS[a.Hovered]=16768831,t.OBJECT_COLORS[a.Selected]=16755200,t.NPC_COLORS=[],t.NPC_COLORS[a.Normal]=16711680,t.NPC_COLORS[a.Hovered]=16727903,t.NPC_COLORS[a.Selected]=16711764,t.create_entity_type_mesh=_,t.create_entity_mesh=function(e,t,i){const o=_(e.type,t,i);return o.userData.entity=e,o.position.copy(e.world_position.val),o.rotation.copy(e.world_rotation.val),o}},xs7i:function(e,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.IV=4]="IV"}(o=t.Episode||(t.Episode={})),t.EPISODES=[o.I,o.II,o.IV],t.check_episode=function(e){if(null==o[e])throw new Error(`Invalid episode ${e}.`)}},xyE7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("nN8q"),s=i("FXpb"),n=i("c5EP"),r=i("sZ1+");i("5sDa");const a=i("5aKR"),_=i("ouMO");class d extends o.ResizableWidget{constructor(){super(),this.element=s.el.div({class:"quest_editor_NpcCountsView"}),this.table_element=s.el.table(),this.no_quest_view=new a.DisabledView("No quest loaded."),this.element.append(this.table_element,this.no_quest_view.element);const e=n.quest_editor_store.current_quest,t=e.map(e=>null==e);this.bind_hidden(this.table_element,t),this.disposables(this.no_quest_view.visible.bind_to(t),e.flat_map(e=>e?e.npcs:_.property([])).observe(({value:e})=>this.update_view(e),{call_now:!0})),this.finalize_construction(d.prototype)}update_view(e){const t=document.createDocumentFragment(),i=new Map;for(const t of e){const e=i.get(t.type)||0;i.set(t.type,e+1)}const o=8*(i.get(r.NpcType.Canane)||0),n=[...i].sort((e,t)=>e[0]-t[0]);for(const[e,i]of n){const n=e===r.NpcType.Canadine?o:0;t.append(s.el.tr({},s.el.th({text:r.npc_data(e).name+":"}),s.el.td({text:String(i+n)})))}this.table_element.innerHTML="",this.table_element.append(t)}}t.NpcCountsView=d},y42t:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("kwt4"),s=i("4mUz");function n(e,t,i){const s=[];for(let n=0;n<i;n++){e.seek_start(t+16*n);let i=e.u32();e.seek(8),4&e.u32()&&(i=e.seek_start(i).u32()),e.seek_start(i),s.push(...o.parse_xj_object(e))}return s}t.parse_area_geometry=function(e){const t=[];e.seek_end(16);const{data_offset:i}=s.parse_rel(e,!1);e.seek_start(i),e.seek(8);const r=e.u32();e.seek(4);const a=e.u32();for(let i=0;i<r;i++){e.seek_start(a+52*i);const s=e.i32(),r=e.vec3_f32(),_={x:e.u32()*o.ANGLE_TO_RAD,y:e.u32()*o.ANGLE_TO_RAD,z:e.u32()*o.ANGLE_TO_RAD};e.seek(4);const d=e.u32();e.seek(4);const l=e.u32(),c=n(e,d,l);t.push({id:s,position:r,rotation:_,objects:c})}return{sections:t}}},yAUo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NewAssembly=0]="NewAssembly",e[e.AssemblyChange=1]="AssemblyChange",e[e.SignatureHelp=2]="SignatureHelp",e[e.Definition=3]="Definition",e[e.SettingsChange=4]="SettingsChange"}(t.InputMessageType||(t.InputMessageType={})),function(e){e[e.NewObjectCode=0]="NewObjectCode",e[e.SignatureHelp=1]="SignatureHelp",e[e.Definition=2]="Definition"}(t.OutputMessageType||(t.OutputMessageType={}))},yQqj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("sZ1+"),s=i("+oIp");t.entity_type_to_string=function(e){return o.NpcType[e]||s.ObjectType[e]},t.is_npc_type=function(e){return null!=o.NpcType[e]},t.entity_data=function(e){return o.npc_data(e)||s.object_data(e)}},yWJ7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("x4IQ");class s extends o.QuestEditAction{constructor(){super(...arguments),this.description="Edit ID"}undo(){this.quest.set_id(this.old)}redo(){this.quest.set_id(this.new)}}t.EditIdAction=s},yar8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("TRid"),s=i("FXpb"),n=i("Tpfs");i("/KYB");const r=i("GGSb").get("core/gui/Table");var a;!function(e){e[e.Asc=0]="Asc",e[e.Desc=1]="Desc"}(a=t.SortDirection||(t.SortDirection={}));class _ extends o.Widget{constructor(e){super(e),this.element=s.el.table({class:"core_Table"}),this.tbody_element=s.el.tbody(),this.create_row=(e,t)=>{const i=new n.Disposer;let o=0;return[s.el.tr({},...this.columns.map((n,a)=>{const _=n.fixed?s.el.th():s.el.td();try{const t=n.render_cell(e,i);_.append(t),n.input&&_.classList.add("input"),n.fixed&&(_.classList.add("fixed"),_.style.left=`${o}px`,o+=n.width||0),_.style.width=`${n.width}px`,n.text_align&&(_.style.textAlign=n.text_align),n.tooltip&&(_.title=n.tooltip(e))}catch(e){r.warn(`Error while rendering cell for index ${t}, column ${a}.`,e)}return _})),i]},this.update_footer=()=>{if(!this.footer_row_element)return;const e=this.columns.length;for(let t=0;t<e;t++){const e=this.columns[t];if(e.footer){const i=this.footer_row_element.children[t];i.textContent=e.footer.render_cell(),i.title=e.footer.tooltip?e.footer.tooltip():""}}},this.values=e.values,this.columns=e.columns;const t=[],i=s.el.thead(),o=s.el.tr();let d=0,l=!1;o.append(...this.columns.map((e,t)=>{const i=s.el.th({data:{index:t.toString()}},s.el.span({text:e.title}));return e.fixed&&(i.style.position="sticky",i.style.left=`${d}px`,d+=e.width),i.style.width=`${e.width}px`,e.footer&&(l=!0),i}));const c=e.sort;c&&(o.onmousedown=e=>{if(e.target instanceof HTMLElement){let i=e.target;for(let e=0;e<5&&!i.dataset.index;e++){if(!i.parentElement)return;i=i.parentElement}if(!i.dataset.index)return;const o=parseInt(i.dataset.index,10),s=this.columns[o];if(!s.sortable)return;const n=t.findIndex(e=>e.column===s);if(0===n){const e=t[0];e.direction=e.direction===a.Asc?a.Desc:a.Asc}else-1!==n&&t.splice(n,1),t.unshift({column:s,direction:a.Asc});c(t)}}),i.append(o),this.tbody_element=s.el.tbody(),this.element.append(i,this.tbody_element),l&&(this.footer_row_element=s.el.tr(),this.element.append(s.el.tfoot({},this.footer_row_element)),this.create_footer()),this.disposables(s.bind_children_to(this.tbody_element,this.values,this.create_row),this.values.observe(this.update_footer)),this.finalize_construction(_.prototype)}create_footer(){const e=[];let t=0;for(let i=0;i<this.columns.length;i++){const o=this.columns[i],n=s.el.th();n.style.width=`${o.width}px`,o.fixed&&(n.classList.add("fixed"),n.style.left=`${t}px`,t+=o.width||0),o.footer&&(n.textContent=o.footer.render_cell(),n.title=o.footer.tooltip?o.footer.tooltip():""),o.text_align&&(n.style.textAlign=o.text_align),e.push(n)}this.footer_row_element.append(...e)}}t.Table=_},yfUv:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i("GGSb")),r=i("nsCy"),a=n.default.get("core/persistence/Persister");t.Persister=class{persist_for_server(e,t,i){this.persist(this.server_key(e,t),i)}persist(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(t){a.error(`Couldn't persist ${e}.`,t)}}load_for_server(e,t){return o(this,void 0,void 0,(function*(){return this.load(this.server_key(e,t))}))}load(e){return o(this,void 0,void 0,(function*(){try{const t=localStorage.getItem(e);return t&&JSON.parse(t)}catch(t){return void a.error(`Couldn't load ${e}.`,t)}}))}server_key(e,t){let i=t+".";switch(e){case r.Server.Ephinea:i+="Ephinea";break;default:throw new Error(`Server ${r.Server[e]} not supported.`)}return i}}},yub1:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i("GGSb")),n=i("9Ykw"),r=s.default.get("core/data_formats/parsing/ninja/texture"),a=1213027928,_=1414682200;t.parse_xvm=function(e){const t=n.parse_iff(e),i=t.find(e=>e.type===a),o=i&&function(e){return{texture_count:e.u16()}}(i.data),s=t.filter(e=>e.type===_).map(e=>(function(e){const t=e.u32(),i=e.u32(),o=e.u32(),s=e.u16(),n=e.u16(),r=e.u32();e.seek(36);const a=e.array_buffer(r);return{id:o,format:[t,i],width:s,height:n,size:r,data:a}})(e.data));return o?o.texture_count!==s.length&&r.warn(`Found ${s.length} textures instead of ${o.texture_count} as defined in the header.`):r.warn("No header found."),{textures:s}}},yxQK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i("FXpb");i("pNch");const s=i("4SjJ"),n=i("TRid"),r=i("1z6m"),a=i("sv1z"),_=i("ouMO"),d=[[s.GuiTool.Viewer,"Viewer"],[s.GuiTool.QuestEditor,"Quest Editor"],[s.GuiTool.HuntOptimizer,"Hunt Optimizer"]];class l extends n.Widget{constructor(){super(),this.buttons=new Map(d.map(([e,t])=>[e,this.disposable(new r.NavigationButton(e,t))])),this.server_select=this.disposable(new a.Select(_.property(["Ephinea"]),e=>e,{label:"Server:",enabled:!1,selected:"Ephinea",tooltip:"Only Ephinea is supported at the moment"})),this.element=o.el.div({class:"application_NavigationView"},...[...this.buttons.values()].map(e=>e.element),o.el.div({class:"application_NavigationView_spacer"}),o.el.span({class:"application_NavigationView_server"},this.server_select.label.element,this.server_select.element),o.el.a({class:"application_NavigationView_github",href:"https://github.com/DaanVandenBosch/phantasmal-world",title:"GitHub"},o.icon(o.Icon.GitHub))),this.height=30,this.mark_tool_button=e=>{const t=this.buttons.get(e);t&&(t.checked=!0)},this.element.style.height=`${this.height}px`,this.element.onmousedown=this.mousedown,this.mark_tool_button(s.gui_store.tool.val),this.disposable(s.gui_store.tool.observe(({value:e})=>this.mark_tool_button(e))),this.finalize_construction(l.prototype)}mousedown(e){e.target instanceof HTMLLabelElement&&e.target.control instanceof HTMLInputElement&&(s.gui_store.tool.val=s.GuiTool[e.target.control.value])}}t.NavigationView=l},zBQr:function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{_(o.next(e))}catch(e){n(e)}}function a(e){try{_(o.throw(e))}catch(e){n(e)}}function _(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}_((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i("yfUv"),n=i("LvDl"),r="QuestEditorUiPersister.layout_config";class a extends s.Persister{constructor(){super(...arguments),this.persist_layout_config=n.throttle(e=>{this.persist(r,e)},500,{leading:!1,trailing:!0})}load_layout_config(e,t){return o(this,void 0,void 0,(function*(){const i=yield this.load(r);return i&&this.verify_layout_config(i,e)?i:t}))}verify_layout_config(e,t){const i=new Set(t);for(const t of e)if(!this.verify_layout_child(t,i,new Set,!0))return!1;return!0}verify_layout_child(e,t,i,o){if(!e)return!1;if("componentName"in e){if(!t.has(e.componentName))return!1;i.add(e.componentName)}if(e.content)for(const o of e.content)if(!this.verify_layout_child(o,t,i,!1))return!1;return!o||t.size===i.size}}t.QuestEditorUiPersister=a,t.quest_editor_ui_persister=new a}},[["/7QA",2,0,3]]]);