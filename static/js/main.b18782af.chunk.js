(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e,t,n){e.exports=n(511)},245:function(e,t,n){},251:function(e,t,n){},324:function(e,t,n){},330:function(e,t,n){},332:function(e,t,n){},359:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},368:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t,n){},499:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},511:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),o=n.n(i),s=n(27),l=n.n(s),u=(n(245),n(130),n(53)),c=(n(248),n(107)),d=n(8),p=n(10),h=n(20),_=n(19),m=n(21),f=n(30),w=n(102),v=n(17),b=n(11),y=(n(46),n(4)),k=function(){function e(t,n,r){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=n,this.z=r}return Object(p.a)(e,[{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();function g(e){var t=Object.values(e),n=t.filter(function(e){return"number"===typeof e});return n.length?n:t}var R,j,O,S,x=function(){function e(t,n){Object(d.a)(this,e),this.keys=void 0,this.values=new Map,this.keys=g(t);var r=!0,a=!1,i=void 0;try{for(var o,s=this.keys[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.values.set(l,n(l))}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}return Object(p.a)(e,[{key:"get",value:function(e){return this.values.get(e)}}]),e}(),D=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.id=t,this.name=n,this.min_atp=r,this.max_atp=a,this.ata=i,this.max_grind=o,this.required_atp=s},E=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},L=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},C=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},B=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},M=(R=function(){function e(t){Object(d.a)(this,e),this.type=t,Object(v.a)(this,"attribute",j,this),Object(v.a)(this,"hit",O,this),Object(v.a)(this,"grind",S,this)}return Object(p.a)(e,[{key:"grind_atp",get:function(){return 2*this.grind}}]),e}(),j=Object(b.a)(R.prototype,"attribute",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=Object(b.a)(R.prototype,"hit",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=Object(b.a)(R.prototype,"grind",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(R.prototype,"grind_atp",[y.d],Object.getOwnPropertyDescriptor(R.prototype,"grind_atp"),R.prototype),R),F=function(){function e(t,n,r,a,i,o,s){if(Object(d.a)(this,e),this.id=void 0,this.code=void 0,this.name=void 0,this.simple_name=void 0,this.ultimate_name=void 0,this.episode=void 0,this.enemy=void 0,this.rare_type=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be an integer greater than or equal to 0, got ".concat(t,"."));if(!n)throw new Error("code is required.");if(!r)throw new Error("name is required.");if(!a)throw new Error("simple_name is required.");if(!i)throw new Error("ultimate_name is required.");if(null!=o&&1!==o&&2!==o&&4!==o)throw new Error("episode should be undefined, 1, 2 or 4, got ".concat(o,"."));if("boolean"!==typeof s)throw new Error("enemy is required.");if(this.id=t,this.code=n,this.simple_name=a,this.ultimate_name=i,this.name=r,this.episode=o,this.enemy=s,e.by_code_map.set(n,this),o){var l=e.by_ep_and_name[o];l&&(l.set(a,this),l.set(i,this))}}return Object(p.a)(e,null,[{key:"by_code",value:function(e){return this.by_code_map.get(e)}},{key:"by_name_and_episode",value:function(e,t){return pe(t),this.by_ep_and_name[t].get(e)}}]),e}();F.by_code_map=new Map,F.by_ep_and_name=[void 0,new Map,new Map,void 0,new Map],F.Unknown=void 0,F.FemaleFat=void 0,F.FemaleMacho=void 0,F.FemaleTall=void 0,F.MaleDwarf=void 0,F.MaleFat=void 0,F.MaleMacho=void 0,F.MaleOld=void 0,F.BlueSoldier=void 0,F.RedSoldier=void 0,F.Principal=void 0,F.Tekker=void 0,F.GuildLady=void 0,F.Scientist=void 0,F.Nurse=void 0,F.Irene=void 0,F.ItemShop=void 0,F.Nurse2=void 0,F.Hildebear=void 0,F.Hildeblue=void 0,F.RagRappy=void 0,F.AlRappy=void 0,F.Monest=void 0,F.Mothmant=void 0,F.SavageWolf=void 0,F.BarbarousWolf=void 0,F.Booma=void 0,F.Gobooma=void 0,F.Gigobooma=void 0,F.Dragon=void 0,F.GrassAssassin=void 0,F.PoisonLily=void 0,F.NarLily=void 0,F.NanoDragon=void 0,F.EvilShark=void 0,F.PalShark=void 0,F.GuilShark=void 0,F.PofuillySlime=void 0,F.PouillySlime=void 0,F.PanArms=void 0,F.Migium=void 0,F.Hidoom=void 0,F.DeRolLe=void 0,F.Dubchic=void 0,F.Gilchic=void 0,F.Garanz=void 0,F.SinowBeat=void 0,F.SinowGold=void 0,F.Canadine=void 0,F.Canane=void 0,F.Dubswitch=void 0,F.VolOpt=void 0,F.Delsaber=void 0,F.ChaosSorcerer=void 0,F.DarkGunner=void 0,F.DeathGunner=void 0,F.ChaosBringer=void 0,F.DarkBelra=void 0,F.Dimenian=void 0,F.LaDimenian=void 0,F.SoDimenian=void 0,F.Bulclaw=void 0,F.Bulk=void 0,F.Claw=void 0,F.DarkFalz=void 0,F.Hildebear2=void 0,F.Hildeblue2=void 0,F.RagRappy2=void 0,F.LoveRappy=void 0,F.StRappy=void 0,F.HalloRappy=void 0,F.EggRappy=void 0,F.Monest2=void 0,F.Mothmant2=void 0,F.PoisonLily2=void 0,F.NarLily2=void 0,F.GrassAssassin2=void 0,F.Dimenian2=void 0,F.LaDimenian2=void 0,F.SoDimenian2=void 0,F.DarkBelra2=void 0,F.BarbaRay=void 0,F.SavageWolf2=void 0,F.BarbarousWolf2=void 0,F.PanArms2=void 0,F.Migium2=void 0,F.Hidoom2=void 0,F.Dubchic2=void 0,F.Gilchic2=void 0,F.Garanz2=void 0,F.Dubswitch2=void 0,F.Delsaber2=void 0,F.ChaosSorcerer2=void 0,F.GolDragon=void 0,F.SinowBerill=void 0,F.SinowSpigell=void 0,F.Merillia=void 0,F.Meriltas=void 0,F.Mericarol=void 0,F.Mericus=void 0,F.Merikle=void 0,F.UlGibbon=void 0,F.ZolGibbon=void 0,F.Gibbles=void 0,F.Gee=void 0,F.GiGue=void 0,F.IllGill=void 0,F.DelLily=void 0,F.Epsilon=void 0,F.GalGryphon=void 0,F.Deldepth=void 0,F.Delbiter=void 0,F.Dolmolm=void 0,F.Dolmdarl=void 0,F.Morfos=void 0,F.Recobox=void 0,F.Recon=void 0,F.SinowZoa=void 0,F.SinowZele=void 0,F.OlgaFlow=void 0,F.SandRappy=void 0,F.DelRappy=void 0,F.Astark=void 0,F.SatelliteLizard=void 0,F.Yowie=void 0,F.MerissaA=void 0,F.MerissaAA=void 0,F.Girtablulu=void 0,F.Zu=void 0,F.Pazuzu=void 0,F.Boota=void 0,F.ZeBoota=void 0,F.BaBoota=void 0,F.Dorphon=void 0,F.DorphonEclair=void 0,F.Goran=void 0,F.PyroGoran=void 0,F.GoranDetonator=void 0,F.SaintMilion=void 0,F.Shambertin=void 0,F.Kondrieu=void 0,function(){var e=0;F.Unknown=new F(e++,"Unknown","Unknown","Unknown","Unknown",void 0,!1),F.FemaleFat=new F(e++,"FemaleFat","Female Fat","Female Fat","Female Fat",void 0,!1),F.FemaleMacho=new F(e++,"FemaleMacho","Female Macho","Female Macho","Female Macho",void 0,!1),F.FemaleTall=new F(e++,"FemaleTall","Female Tall","Female Tall","Female Tall",void 0,!1),F.MaleDwarf=new F(e++,"MaleDwarf","Male Dwarf","Male Dwarf","Male Dwarf",void 0,!1),F.MaleFat=new F(e++,"MaleFat","Male Fat","Male Fat","Male Fat",void 0,!1),F.MaleMacho=new F(e++,"MaleMacho","Male Macho","Male Macho","Male Macho",void 0,!1),F.MaleOld=new F(e++,"MaleOld","Male Old","Male Old","Male Old",void 0,!1),F.BlueSoldier=new F(e++,"BlueSoldier","Blue Soldier","Blue Soldier","Blue Soldier",void 0,!1),F.RedSoldier=new F(e++,"RedSoldier","Red Soldier","Red Soldier","Red Soldier",void 0,!1),F.Principal=new F(e++,"Principal","Principal","Principal","Principal",void 0,!1),F.Tekker=new F(e++,"Tekker","Tekker","Tekker","Tekker",void 0,!1),F.GuildLady=new F(e++,"GuildLady","Guild Lady","Guild Lady","Guild Lady",void 0,!1),F.Scientist=new F(e++,"Scientist","Scientist","Scientist","Scientist",void 0,!1),F.Nurse=new F(e++,"Nurse","Nurse","Nurse","Nurse",void 0,!1),F.Irene=new F(e++,"Irene","Irene","Irene","Irene",void 0,!1),F.ItemShop=new F(e++,"ItemShop","Item Shop","Item Shop","Item Shop",void 0,!1),F.Nurse2=new F(e++,"Nurse2","Nurse (Ep. II)","Nurse","Nurse",2,!1),F.Hildebear=new F(e++,"Hildebear","Hildebear","Hildebear","Hildelt",1,!0),F.Hildeblue=new F(e++,"Hildeblue","Hildeblue","Hildeblue","Hildetorr",1,!0),F.Hildebear.rare_type=F.Hildeblue,F.RagRappy=new F(e++,"RagRappy","Rag Rappy","Rag Rappy","El Rappy",1,!0),F.AlRappy=new F(e++,"AlRappy","Al Rappy","Al Rappy","Pal Rappy",1,!0),F.RagRappy.rare_type=F.AlRappy,F.Monest=new F(e++,"Monest","Monest","Monest","Mothvist",1,!0),F.Mothmant=new F(e++,"Mothmant","Mothmant","Mothmant","Mothvert",1,!0),F.SavageWolf=new F(e++,"SavageWolf","Savage Wolf","Savage Wolf","Gulgus",1,!0),F.BarbarousWolf=new F(e++,"BarbarousWolf","Barbarous Wolf","Barbarous Wolf","Gulgus-Gue",1,!0),F.Booma=new F(e++,"Booma","Booma","Booma","Bartle",1,!0),F.Gobooma=new F(e++,"Gobooma","Gobooma","Gobooma","Barble",1,!0),F.Gigobooma=new F(e++,"Gigobooma","Gigobooma","Gigobooma","Tollaw",1,!0),F.Dragon=new F(e++,"Dragon","Dragon","Dragon","Sil Dragon",1,!0),F.GrassAssassin=new F(e++,"GrassAssassin","Grass Assassin","Grass Assassin","Crimson Assassin",1,!0),F.PoisonLily=new F(e++,"PoisonLily","Poison Lily","Poison Lily","Ob Lily",1,!0),F.NarLily=new F(e++,"NarLily","Nar Lily","Nar Lily","Mil Lily",1,!0),F.PoisonLily.rare_type=F.NarLily,F.NanoDragon=new F(e++,"NanoDragon","Nano Dragon","Nano Dragon","Nano Dragon",1,!0),F.EvilShark=new F(e++,"EvilShark","Evil Shark","Evil Shark","Vulmer",1,!0),F.PalShark=new F(e++,"PalShark","Pal Shark","Pal Shark","Govulmer",1,!0),F.GuilShark=new F(e++,"GuilShark","Guil Shark","Guil Shark","Melqueek",1,!0),F.PofuillySlime=new F(e++,"PofuillySlime","Pofuilly Slime","Pofuilly Slime","Pofuilly Slime",1,!0),F.PouillySlime=new F(e++,"PouillySlime","Pouilly Slime","Pouilly Slime","Pouilly Slime",1,!0),F.PofuillySlime.rare_type=F.PouillySlime,F.PanArms=new F(e++,"PanArms","Pan Arms","Pan Arms","Pan Arms",1,!0),F.Migium=new F(e++,"Migium","Migium","Migium","Migium",1,!0),F.Hidoom=new F(e++,"Hidoom","Hidoom","Hidoom","Hidoom",1,!0),F.DeRolLe=new F(e++,"DeRolLe","De Rol Le","De Rol Le","Dal Ra Lie",1,!0),F.Dubchic=new F(e++,"Dubchic","Dubchic","Dubchic","Dubchich",1,!0),F.Gilchic=new F(e++,"Gilchic","Gilchic","Gilchic","Gilchich",1,!0),F.Garanz=new F(e++,"Garanz","Garanz","Garanz","Baranz",1,!0),F.SinowBeat=new F(e++,"SinowBeat","Sinow Beat","Sinow Beat","Sinow Blue",1,!0),F.SinowGold=new F(e++,"SinowGold","Sinow Gold","Sinow Gold","Sinow Red",1,!0),F.Canadine=new F(e++,"Canadine","Canadine","Canadine","Canabin",1,!0),F.Canane=new F(e++,"Canane","Canane","Canane","Canune",1,!0),F.Dubswitch=new F(e++,"Dubswitch","Dubswitch","Dubswitch","Dubswitch",1,!0),F.VolOpt=new F(e++,"VolOpt","Vol Opt","Vol Opt","Vol Opt ver.2",1,!0),F.Delsaber=new F(e++,"Delsaber","Delsaber","Delsaber","Delsaber",1,!0),F.ChaosSorcerer=new F(e++,"ChaosSorcerer","Chaos Sorcerer","Chaos Sorcerer","Gran Sorcerer",1,!0),F.DarkGunner=new F(e++,"DarkGunner","Dark Gunner","Dark Gunner","Dark Gunner",1,!0),F.DeathGunner=new F(e++,"DeathGunner","Death Gunner","Death Gunner","Death Gunner",1,!0),F.ChaosBringer=new F(e++,"ChaosBringer","Chaos Bringer","Chaos Bringer","Dark Bringer",1,!0),F.DarkBelra=new F(e++,"DarkBelra","Dark Belra","Dark Belra","Indi Belra",1,!0),F.Dimenian=new F(e++,"Dimenian","Dimenian","Dimenian","Arlan",1,!0),F.LaDimenian=new F(e++,"LaDimenian","La Dimenian","La Dimenian","Merlan",1,!0),F.SoDimenian=new F(e++,"SoDimenian","So Dimenian","So Dimenian","Del-D",1,!0),F.Bulclaw=new F(e++,"Bulclaw","Bulclaw","Bulclaw","Bulclaw",1,!0),F.Bulk=new F(e++,"Bulk","Bulk","Bulk","Bulk",1,!0),F.Claw=new F(e++,"Claw","Claw","Claw","Claw",1,!0),F.DarkFalz=new F(e++,"DarkFalz","Dark Falz","Dark Falz","Dark Falz",1,!0),F.Hildebear2=new F(e++,"Hildebear2","Hildebear (Ep. II)","Hildebear","Hildelt",2,!0),F.Hildeblue2=new F(e++,"Hildeblue2","Hildeblue (Ep. II)","Hildeblue","Hildetorr",2,!0),F.Hildebear2.rare_type=F.Hildeblue2,F.RagRappy2=new F(e++,"RagRappy2","Rag Rappy (Ep. II)","Rag Rappy","El Rappy",2,!0),F.LoveRappy=new F(e++,"LoveRappy","Love Rappy","Love Rappy","Love Rappy",2,!0),F.RagRappy2.rare_type=F.LoveRappy,F.StRappy=new F(e++,"StRappy","St. Rappy","St. Rappy","St. Rappy",2,!0),F.HalloRappy=new F(e++,"HalloRappy","Hallo Rappy","Hallo Rappy","Hallo Rappy",2,!0),F.EggRappy=new F(e++,"EggRappy","Egg Rappy","Egg Rappy","Egg Rappy",2,!0),F.Monest2=new F(e++,"Monest2","Monest (Ep. II)","Monest","Mothvist",2,!0),F.Mothmant2=new F(e++,"Mothmant2","Mothmant","Mothmant","Mothvert",2,!0),F.PoisonLily2=new F(e++,"PoisonLily2","Poison Lily (Ep. II)","Poison Lily","Ob Lily",2,!0),F.NarLily2=new F(e++,"NarLily2","Nar Lily (Ep. II)","Nar Lily","Mil Lily",2,!0),F.PoisonLily2.rare_type=F.NarLily2,F.GrassAssassin2=new F(e++,"GrassAssassin2","Grass Assassin (Ep. II)","Grass Assassin","Crimson Assassin",2,!0),F.Dimenian2=new F(e++,"Dimenian2","Dimenian (Ep. II)","Dimenian","Arlan",2,!0),F.LaDimenian2=new F(e++,"LaDimenian2","La Dimenian (Ep. II)","La Dimenian","Merlan",2,!0),F.SoDimenian2=new F(e++,"SoDimenian2","So Dimenian (Ep. II)","So Dimenian","Del-D",2,!0),F.DarkBelra2=new F(e++,"DarkBelra2","Dark Belra (Ep. II)","Dark Belra","Indi Belra",2,!0),F.BarbaRay=new F(e++,"BarbaRay","Barba Ray","Barba Ray","Barba Ray",2,!0),F.SavageWolf2=new F(e++,"SavageWolf2","Savage Wolf (Ep. II)","Savage Wolf","Gulgus",2,!0),F.BarbarousWolf2=new F(e++,"BarbarousWolf2","Barbarous Wolf (Ep. II)","Barbarous Wolf","Gulgus-Gue",2,!0),F.PanArms2=new F(e++,"PanArms2","Pan Arms (Ep. II)","Pan Arms","Pan Arms",2,!0),F.Migium2=new F(e++,"Migium2","Migium (Ep. II)","Migium","Migium",2,!0),F.Hidoom2=new F(e++,"Hidoom2","Hidoom (Ep. II)","Hidoom","Hidoom",2,!0),F.Dubchic2=new F(e++,"Dubchic2","Dubchic (Ep. II)","Dubchic","Dubchich",2,!0),F.Gilchic2=new F(e++,"Gilchic2","Gilchic (Ep. II)","Gilchic","Gilchich",2,!0),F.Garanz2=new F(e++,"Garanz2","Garanz (Ep. II)","Garanz","Baranz",2,!0),F.Dubswitch2=new F(e++,"Dubswitch2","Dubswitch (Ep. II)","Dubswitch","Dubswitch",2,!0),F.Delsaber2=new F(e++,"Delsaber2","Delsaber (Ep. II)","Delsaber","Delsaber",2,!0),F.ChaosSorcerer2=new F(e++,"ChaosSorcerer2","Chaos Sorcerer (Ep. II)","Chaos Sorcerer","Gran Sorcerer",2,!0),F.GolDragon=new F(e++,"GolDragon","Gol Dragon","Gol Dragon","Gol Dragon",2,!0),F.SinowBerill=new F(e++,"SinowBerill","Sinow Berill","Sinow Berill","Sinow Berill",2,!0),F.SinowSpigell=new F(e++,"SinowSpigell","Sinow Spigell","Sinow Spigell","Sinow Spigell",2,!0),F.Merillia=new F(e++,"Merillia","Merillia","Merillia","Merillia",2,!0),F.Meriltas=new F(e++,"Meriltas","Meriltas","Meriltas","Meriltas",2,!0),F.Mericarol=new F(e++,"Mericarol","Mericarol","Mericarol","Mericarol",2,!0),F.Mericus=new F(e++,"Mericus","Mericus","Mericus","Mericus",2,!0),F.Merikle=new F(e++,"Merikle","Merikle","Merikle","Merikle",2,!0),F.UlGibbon=new F(e++,"UlGibbon","Ul Gibbon","Ul Gibbon","Ul Gibbon",2,!0),F.ZolGibbon=new F(e++,"ZolGibbon","Zol Gibbon","Zol Gibbon","Zol Gibbon",2,!0),F.Gibbles=new F(e++,"Gibbles","Gibbles","Gibbles","Gibbles",2,!0),F.Gee=new F(e++,"Gee","Gee","Gee","Gee",2,!0),F.GiGue=new F(e++,"GiGue","Gi Gue","Gi Gue","Gi Gue",2,!0),F.IllGill=new F(e++,"IllGill","Ill Gill","Ill Gill","Ill Gill",2,!0),F.DelLily=new F(e++,"DelLily","Del Lily","Del Lily","Del Lily",2,!0),F.Epsilon=new F(e++,"Epsilon","Epsilon","Epsilon","Epsilon",2,!0),F.GalGryphon=new F(e++,"GalGryphon","Gal Gryphon","Gal Gryphon","Gal Gryphon",2,!0),F.Deldepth=new F(e++,"Deldepth","Deldepth","Deldepth","Deldepth",2,!0),F.Delbiter=new F(e++,"Delbiter","Delbiter","Delbiter","Delbiter",2,!0),F.Dolmolm=new F(e++,"Dolmolm","Dolmolm","Dolmolm","Dolmolm",2,!0),F.Dolmdarl=new F(e++,"Dolmdarl","Dolmdarl","Dolmdarl","Dolmdarl",2,!0),F.Morfos=new F(e++,"Morfos","Morfos","Morfos","Morfos",2,!0),F.Recobox=new F(e++,"Recobox","Recobox","Recobox","Recobox",2,!0),F.Recon=new F(e++,"Recon","Recon","Recon","Recon",2,!0),F.SinowZoa=new F(e++,"SinowZoa","Sinow Zoa","Sinow Zoa","Sinow Zoa",2,!0),F.SinowZele=new F(e++,"SinowZele","Sinow Zele","Sinow Zele","Sinow Zele",2,!0),F.OlgaFlow=new F(e++,"OlgaFlow","Olga Flow","Olga Flow","Olga Flow",2,!0),F.SandRappy=new F(e++,"SandRappy","Sand Rappy","Sand Rappy","Sand Rappy",4,!0),F.DelRappy=new F(e++,"DelRappy","Del Rappy","Del Rappy","Del Rappy",4,!0),F.SandRappy.rare_type=F.DelRappy,F.Astark=new F(e++,"Astark","Astark","Astark","Astark",4,!0),F.SatelliteLizard=new F(e++,"SatelliteLizard","Satellite Lizard","Satellite Lizard","Satellite Lizard",4,!0),F.Yowie=new F(e++,"Yowie","Yowie","Yowie","Yowie",4,!0),F.MerissaA=new F(e++,"MerissaA","Merissa A","Merissa A","Merissa A",4,!0),F.MerissaAA=new F(e++,"MerissaAA","Merissa AA","Merissa AA","Merissa AA",4,!0),F.MerissaA.rare_type=F.MerissaAA,F.Girtablulu=new F(e++,"Girtablulu","Girtablulu","Girtablulu","Girtablulu",4,!0),F.Zu=new F(e++,"Zu","Zu","Zu","Zu",4,!0),F.Pazuzu=new F(e++,"Pazuzu","Pazuzu","Pazuzu","Pazuzu",4,!0),F.Zu.rare_type=F.Pazuzu,F.Boota=new F(e++,"Boota","Boota","Boota","Boota",4,!0),F.ZeBoota=new F(e++,"ZeBoota","Ze Boota","Ze Boota","Ze Boota",4,!0),F.BaBoota=new F(e++,"BaBoota","Ba Boota","Ba Boota","Ba Boota",4,!0),F.Dorphon=new F(e++,"Dorphon","Dorphon","Dorphon","Dorphon",4,!0),F.DorphonEclair=new F(e++,"DorphonEclair","Dorphon Eclair","Dorphon Eclair","Dorphon Eclair",4,!0),F.Dorphon.rare_type=F.DorphonEclair,F.Goran=new F(e++,"Goran","Goran","Goran","Goran",4,!0),F.PyroGoran=new F(e++,"PyroGoran","Pyro Goran","Pyro Goran","Pyro Goran",4,!0),F.GoranDetonator=new F(e++,"GoranDetonator","Goran Detonator","Goran Detonator","Goran Detonator",4,!0),F.SaintMilion=new F(e++,"SaintMilion","Saint-Milion","Saint-Milion","Saint-Milion",4,!0),F.Shambertin=new F(e++,"Shambertin","Shambertin","Shambertin","Shambertin",4,!0),F.Kondrieu=new F(e++,"Kondrieu","Kondrieu","Kondrieu","Kondrieu",4,!0),F.SaintMilion.rare_type=F.Kondrieu,F.Shambertin.rare_type=F.Kondrieu}();var I,z,P,G,T,A,W,U,N,H,q,V,Z,Y,K,Q,X,J,$,ee,te,ne,re,ae=[F.Unknown,F.FemaleFat,F.FemaleMacho,F.FemaleTall,F.MaleDwarf,F.MaleFat,F.MaleMacho,F.MaleOld,F.BlueSoldier,F.RedSoldier,F.Principal,F.Tekker,F.GuildLady,F.Scientist,F.Nurse,F.Irene,F.ItemShop,F.Nurse2,F.Hildebear,F.Hildeblue,F.RagRappy,F.AlRappy,F.Monest,F.Mothmant,F.SavageWolf,F.BarbarousWolf,F.Booma,F.Gobooma,F.Gigobooma,F.Dragon,F.GrassAssassin,F.PoisonLily,F.NarLily,F.NanoDragon,F.EvilShark,F.PalShark,F.GuilShark,F.PofuillySlime,F.PouillySlime,F.PanArms,F.Migium,F.Hidoom,F.DeRolLe,F.Dubchic,F.Gilchic,F.Garanz,F.SinowBeat,F.SinowGold,F.Canadine,F.Canane,F.Dubswitch,F.VolOpt,F.Delsaber,F.ChaosSorcerer,F.DarkGunner,F.DeathGunner,F.ChaosBringer,F.DarkBelra,F.Dimenian,F.LaDimenian,F.SoDimenian,F.Bulclaw,F.Bulk,F.Claw,F.DarkFalz,F.Hildebear2,F.Hildeblue2,F.RagRappy2,F.LoveRappy,F.StRappy,F.HalloRappy,F.EggRappy,F.Monest2,F.Mothmant2,F.PoisonLily2,F.NarLily2,F.GrassAssassin2,F.Dimenian2,F.LaDimenian2,F.SoDimenian2,F.DarkBelra2,F.BarbaRay,F.SavageWolf2,F.BarbarousWolf2,F.PanArms2,F.Migium2,F.Hidoom2,F.Dubchic2,F.Gilchic2,F.Garanz2,F.Dubswitch2,F.Delsaber2,F.ChaosSorcerer2,F.GolDragon,F.SinowBerill,F.SinowSpigell,F.Merillia,F.Meriltas,F.Mericarol,F.Mericus,F.Merikle,F.UlGibbon,F.ZolGibbon,F.Gibbles,F.Gee,F.GiGue,F.IllGill,F.DelLily,F.Epsilon,F.GalGryphon,F.Deldepth,F.Delbiter,F.Dolmolm,F.Dolmdarl,F.Morfos,F.Recobox,F.Recon,F.SinowZoa,F.SinowZele,F.OlgaFlow,F.SandRappy,F.DelRappy,F.Astark,F.SatelliteLizard,F.Yowie,F.MerissaA,F.MerissaAA,F.Girtablulu,F.Zu,F.Pazuzu,F.Boota,F.ZeBoota,F.BaBoota,F.Dorphon,F.DorphonEclair,F.Goran,F.PyroGoran,F.GoranDetonator,F.SaintMilion,F.Shambertin,F.Kondrieu],ie=ae.filter(function(e){return e.enemy}),oe=function(){function e(t,n,r){if(Object(d.a)(this,e),this.id=void 0,this.pso_id=void 0,this.name=void 0,!Number.isInteger(t)||t<1)throw new Error("Expected id to be an integer greater than or equal to 1, got ".concat(t,"."));if(null!=n&&(!Number.isInteger(n)||n<0))throw new Error("Expected pso_id to be null or an integer greater than or equal to 0, got ".concat(n,"."));if(!r)throw new Error("name is required.");this.id=t,this.pso_id=n,this.name=r}return Object(p.a)(e,null,[{key:"from_pso_id",value:function(t){switch(t){default:return e.Unknown;case 0:return e.PlayerSet;case 1:return e.Particle;case 2:return e.Teleporter;case 3:return e.Warp;case 4:return e.LightCollision;case 5:return e.Item;case 6:return e.EnvSound;case 7:return e.FogCollision;case 8:return e.EventCollision;case 9:return e.CharaCollision;case 10:return e.ElementalTrap;case 11:return e.StatusTrap;case 12:return e.HealTrap;case 13:return e.LargeElementalTrap;case 14:return e.ObjRoomID;case 15:return e.Sensor;case 16:return e.UnknownItem16;case 17:return e.Lensflare;case 18:return e.ScriptCollision;case 19:return e.HealRing;case 20:return e.MapCollision;case 21:return e.ScriptCollisionA;case 22:return e.ItemLight;case 23:return e.RadarCollision;case 24:return e.FogCollisionSW;case 25:return e.BossTeleporter;case 26:return e.ImageBoard;case 27:return e.QuestWarp;case 28:return e.Epilogue;case 29:return e.UnknownItem29;case 30:return e.UnknownItem30;case 31:return e.UnknownItem31;case 32:return e.BoxDetectObject;case 33:return e.SymbolChatObject;case 34:return e.TouchPlateObject;case 35:return e.TargetableObject;case 36:return e.EffectObject;case 37:return e.CountDownObject;case 38:return e.UnknownItem38;case 39:return e.UnknownItem39;case 40:return e.UnknownItem40;case 41:return e.UnknownItem41;case 64:return e.MenuActivation;case 65:return e.TelepipeLocation;case 66:return e.BGMCollision;case 67:return e.MainRagolTeleporter;case 68:return e.LobbyTeleporter;case 69:return e.PrincipalWarp;case 70:return e.ShopDoor;case 71:return e.HuntersGuildDoor;case 72:return e.TeleporterDoor;case 73:return e.MedicalCenterDoor;case 74:return e.Elevator;case 75:return e.EasterEgg;case 76:return e.ValentinesHeart;case 77:return e.ChristmasTree;case 78:return e.ChristmasWreath;case 79:return e.HalloweenPumpkin;case 80:return e.TwentyFirstCentury;case 81:return e.Sonic;case 82:return e.WelcomeBoard;case 83:return e.Firework;case 84:return e.LobbyScreenDoor;case 85:return e.MainRagolTeleporterBattleInNextArea;case 86:return e.LabTeleporterDoor;case 87:return e.Pioneer2InvisibleTouchplate;case 128:return e.ForestDoor;case 129:return e.ForestSwitch;case 130:return e.LaserFence;case 131:return e.LaserSquareFence;case 132:return e.ForestLaserFenceSwitch;case 133:return e.LightRays;case 134:return e.BlueButterfly;case 135:return e.Probe;case 136:return e.RandomTypeBox1;case 137:return e.ForestWeatherStation;case 138:return e.Battery;case 139:return e.ForestConsole;case 140:return e.BlackSlidingDoor;case 141:return e.RicoMessagePod;case 142:return e.EnergyBarrier;case 143:return e.ForestRisingBridge;case 144:return e.SwitchNoneDoor;case 145:return e.EnemyBoxGrey;case 146:return e.FixedTypeBox;case 147:return e.EnemyBoxBrown;case 149:return e.EmptyTypeBox;case 150:return e.LaserFenseEx;case 151:return e.LaserSquareFenceEx;case 192:return e.FloorPanel1;case 193:return e.Caves4ButtonDoor;case 194:return e.CavesNormalDoor;case 195:return e.CavesSmashingPillar;case 196:return e.CavesSign1;case 197:return e.CavesSign2;case 198:return e.CavesSign3;case 199:return e.HexagalTank;case 200:return e.BrownPlatform;case 201:return e.WarningLightObject;case 203:return e.Rainbow;case 204:return e.FloatingJelifish;case 205:return e.FloatingDragonfly;case 206:return e.CavesSwitchDoor;case 207:return e.RobotRechargeStation;case 208:return e.CavesCakeShop;case 209:return e.Caves1SmallRedRock;case 210:return e.Caves1MediumRedRock;case 211:return e.Caves1LargeRedRock;case 212:return e.Caves2SmallRock1;case 213:return e.Caves2MediumRock1;case 214:return e.Caves2LargeRock1;case 215:return e.Caves2SmallRock2;case 216:return e.Caves2MediumRock2;case 217:return e.Caves2LargeRock2;case 218:return e.Caves3SmallRock;case 219:return e.Caves3MediumRock;case 220:return e.Caves3LargeRock;case 222:return e.FloorPanel2;case 223:return e.DestructableRockCaves1;case 224:return e.DestructableRockCaves2;case 225:return e.DestructableRockCaves3;case 256:return e.MinesDoor;case 257:return e.FloorPanel3;case 258:return e.MinesSwitchDoor;case 259:return e.LargeCryoTube;case 260:return e.ComputerLikeCalus;case 261:return e.GreenScreenOpeningAndClosing;case 262:return e.FloatingRobot;case 263:return e.FloatingBlueLight;case 264:return e.SelfDestructingObject1;case 265:return e.SelfDestructingObject2;case 266:return e.SelfDestructingObject3;case 267:return e.SparkMachine;case 268:return e.MinesLargeFlashingCrate;case 304:return e.RuinsSeal;case 320:return e.RuinsTeleporter;case 321:return e.RuinsWarpSiteToSite;case 322:return e.RuinsSwitch;case 323:return e.FloorPanel4;case 324:return e.Ruins1Door;case 325:return e.Ruins3Door;case 326:return e.Ruins2Door;case 327:return e.Ruins11ButtonDoor;case 328:return e.Ruins21ButtonDoor;case 329:return e.Ruins31ButtonDoor;case 330:return e.Ruins4ButtonDoor;case 331:return e.Ruins2ButtonDoor;case 332:return e.RuinsSensor;case 333:return e.RuinsFenceSwitch;case 334:return e.RuinsLaserFence4x2;case 335:return e.RuinsLaserFence6x2;case 336:return e.RuinsLaserFence4x4;case 337:return e.RuinsLaserFence6x4;case 338:return e.RuinsPoisonBlob;case 339:return e.RuinsPilarTrap;case 340:return e.PopupTrapNoTech;case 341:return e.RuinsCrystal;case 342:return e.Monument;case 345:return e.RuinsRock1;case 346:return e.RuinsRock2;case 347:return e.RuinsRock3;case 348:return e.RuinsRock4;case 349:return e.RuinsRock5;case 350:return e.RuinsRock6;case 351:return e.RuinsRock7;case 352:return e.Poison;case 353:return e.FixedBoxTypeRuins;case 354:return e.RandomBoxTypeRuins;case 355:return e.EnemyTypeBoxYellow;case 356:return e.EnemyTypeBoxBlue;case 357:return e.EmptyTypeBoxBlue;case 358:return e.DestructableRock;case 359:return e.PopupTrapsTechs;case 368:return e.FlyingWhiteBird;case 369:return e.Tower;case 370:return e.FloatingRocks;case 371:return e.FloatingSoul;case 372:return e.Butterfly;case 384:return e.LobbyGameMenu;case 385:return e.LobbyWarpObject;case 386:return e.Lobby1EventObjectDefaultTree;case 387:return e.UnknownItem387;case 388:return e.UnknownItem388;case 389:return e.UnknownItem389;case 390:return e.LobbyEventObjectStaticPumpkin;case 391:return e.LobbyEventObject3ChristmasWindows;case 392:return e.LobbyEventObjectRedAndWhiteCurtain;case 393:return e.UnknownItem393;case 394:return e.UnknownItem394;case 395:return e.LobbyFishTank;case 396:return e.LobbyEventObjectButterflies;case 400:return e.UnknownItem400;case 401:return e.GreyWallLow;case 402:return e.SpaceshipDoor;case 403:return e.GreyWallHigh;case 416:return e.TempleNormalDoor;case 417:return e.BreakableWallWallButUnbreakable;case 418:return e.BrokenCilinderAndRubble;case 419:return e.ThreeBrokenWallPiecesOnFloor;case 420:return e.HighBrickCilinder;case 421:return e.LyingCilinder;case 422:return e.BrickConeWithFlatTop;case 423:return e.BreakableTempleWall;case 424:return e.TempleMapDetect;case 425:return e.SmallBrownBrickRisingBridge;case 426:return e.LongRisingBridgeWithPinkHighEdges;case 427:return e.FourSwitchTempleDoor;case 448:return e.FourButtonSpaceshipDoor;case 512:return e.ItemBoxCca;case 513:return e.TeleporterEp2;case 514:return e.CCADoor;case 515:return e.SpecialBoxCCA;case 516:return e.BigCCADoor;case 517:return e.BigCCADoorSwitch;case 518:return e.LittleRock;case 519:return e.Little3StoneWall;case 520:return e.Medium3StoneWall;case 521:return e.SpiderPlant;case 522:return e.CCAAreaTeleporter;case 523:return e.UnknownItem523;case 524:return e.WhiteBird;case 525:return e.OrangeBird;case 527:return e.Saw;case 528:return e.LaserDetect;case 529:return e.UnknownItem529;case 530:return e.UnknownItem530;case 531:return e.Seagull;case 544:return e.Fish;case 545:return e.SeabedDoorWithBlueEdges;case 546:return e.SeabedDoorAlwaysOpenNonTriggerable;case 547:return e.LittleCryotube;case 548:return e.WideGlassWallBreakable;case 549:return e.BlueFloatingRobot;case 550:return e.RedFloatingRobot;case 551:return e.Dolphin;case 552:return e.CaptureTrap;case 553:return e.VRLink;case 576:return e.UnknownItem576;case 640:return e.WarpInBarbaRayRoom;case 672:return e.UnknownItem672;case 688:return e.GeeNest;case 689:return e.LabComputerConsole;case 690:return e.LabComputerConsoleGreenScreen;case 691:return e.ChairYelllowPillow;case 692:return e.OrangeWallWithHoleInMiddle;case 693:return e.GreyWallWithHoleInMiddle;case 694:return e.LongTable;case 695:return e.GBAStation;case 696:return e.TalkLinkToSupport;case 697:return e.InstaWarp;case 698:return e.LabInvisibleObject;case 699:return e.LabGlassWindowDoor;case 700:return e.UnknownItem700;case 701:return e.LabCelingWarp;case 768:return e.Ep4LightSource;case 769:return e.Cacti;case 770:return e.BigBrownRock;case 771:return e.BreakableBrownRock;case 832:return e.UnknownItem832;case 833:return e.UnknownItem833;case 896:return e.PoisonPlant;case 897:return e.UnknownItem897;case 898:return e.UnknownItem898;case 899:return e.OozingDesertPlant;case 901:return e.UnknownItem901;case 902:return e.BigBlackRocks;case 903:return e.UnknownItem903;case 904:return e.UnknownItem904;case 905:return e.UnknownItem905;case 906:return e.UnknownItem906;case 907:return e.FallingRock;case 908:return e.DesertPlantHasCollision;case 909:return e.DesertFixedTypeBoxBreakableCrystals;case 910:return e.UnknownItem910;case 911:return e.BeeHive;case 912:return e.UnknownItem912;case 913:return e.Heat;case 960:return e.TopOfSaintMillionEgg;case 961:return e.UnknownItem961}}}]),e}();oe.Unknown=void 0,oe.PlayerSet=void 0,oe.Particle=void 0,oe.Teleporter=void 0,oe.Warp=void 0,oe.LightCollision=void 0,oe.Item=void 0,oe.EnvSound=void 0,oe.FogCollision=void 0,oe.EventCollision=void 0,oe.CharaCollision=void 0,oe.ElementalTrap=void 0,oe.StatusTrap=void 0,oe.HealTrap=void 0,oe.LargeElementalTrap=void 0,oe.ObjRoomID=void 0,oe.Sensor=void 0,oe.UnknownItem16=void 0,oe.Lensflare=void 0,oe.ScriptCollision=void 0,oe.HealRing=void 0,oe.MapCollision=void 0,oe.ScriptCollisionA=void 0,oe.ItemLight=void 0,oe.RadarCollision=void 0,oe.FogCollisionSW=void 0,oe.BossTeleporter=void 0,oe.ImageBoard=void 0,oe.QuestWarp=void 0,oe.Epilogue=void 0,oe.UnknownItem29=void 0,oe.UnknownItem30=void 0,oe.UnknownItem31=void 0,oe.BoxDetectObject=void 0,oe.SymbolChatObject=void 0,oe.TouchPlateObject=void 0,oe.TargetableObject=void 0,oe.EffectObject=void 0,oe.CountDownObject=void 0,oe.UnknownItem38=void 0,oe.UnknownItem39=void 0,oe.UnknownItem40=void 0,oe.UnknownItem41=void 0,oe.MenuActivation=void 0,oe.TelepipeLocation=void 0,oe.BGMCollision=void 0,oe.MainRagolTeleporter=void 0,oe.LobbyTeleporter=void 0,oe.PrincipalWarp=void 0,oe.ShopDoor=void 0,oe.HuntersGuildDoor=void 0,oe.TeleporterDoor=void 0,oe.MedicalCenterDoor=void 0,oe.Elevator=void 0,oe.EasterEgg=void 0,oe.ValentinesHeart=void 0,oe.ChristmasTree=void 0,oe.ChristmasWreath=void 0,oe.HalloweenPumpkin=void 0,oe.TwentyFirstCentury=void 0,oe.Sonic=void 0,oe.WelcomeBoard=void 0,oe.Firework=void 0,oe.LobbyScreenDoor=void 0,oe.MainRagolTeleporterBattleInNextArea=void 0,oe.LabTeleporterDoor=void 0,oe.Pioneer2InvisibleTouchplate=void 0,oe.ForestDoor=void 0,oe.ForestSwitch=void 0,oe.LaserFence=void 0,oe.LaserSquareFence=void 0,oe.ForestLaserFenceSwitch=void 0,oe.LightRays=void 0,oe.BlueButterfly=void 0,oe.Probe=void 0,oe.RandomTypeBox1=void 0,oe.ForestWeatherStation=void 0,oe.Battery=void 0,oe.ForestConsole=void 0,oe.BlackSlidingDoor=void 0,oe.RicoMessagePod=void 0,oe.EnergyBarrier=void 0,oe.ForestRisingBridge=void 0,oe.SwitchNoneDoor=void 0,oe.EnemyBoxGrey=void 0,oe.FixedTypeBox=void 0,oe.EnemyBoxBrown=void 0,oe.EmptyTypeBox=void 0,oe.LaserFenseEx=void 0,oe.LaserSquareFenceEx=void 0,oe.FloorPanel1=void 0,oe.Caves4ButtonDoor=void 0,oe.CavesNormalDoor=void 0,oe.CavesSmashingPillar=void 0,oe.CavesSign1=void 0,oe.CavesSign2=void 0,oe.CavesSign3=void 0,oe.HexagalTank=void 0,oe.BrownPlatform=void 0,oe.WarningLightObject=void 0,oe.Rainbow=void 0,oe.FloatingJelifish=void 0,oe.FloatingDragonfly=void 0,oe.CavesSwitchDoor=void 0,oe.RobotRechargeStation=void 0,oe.CavesCakeShop=void 0,oe.Caves1SmallRedRock=void 0,oe.Caves1MediumRedRock=void 0,oe.Caves1LargeRedRock=void 0,oe.Caves2SmallRock1=void 0,oe.Caves2MediumRock1=void 0,oe.Caves2LargeRock1=void 0,oe.Caves2SmallRock2=void 0,oe.Caves2MediumRock2=void 0,oe.Caves2LargeRock2=void 0,oe.Caves3SmallRock=void 0,oe.Caves3MediumRock=void 0,oe.Caves3LargeRock=void 0,oe.FloorPanel2=void 0,oe.DestructableRockCaves1=void 0,oe.DestructableRockCaves2=void 0,oe.DestructableRockCaves3=void 0,oe.MinesDoor=void 0,oe.FloorPanel3=void 0,oe.MinesSwitchDoor=void 0,oe.LargeCryoTube=void 0,oe.ComputerLikeCalus=void 0,oe.GreenScreenOpeningAndClosing=void 0,oe.FloatingRobot=void 0,oe.FloatingBlueLight=void 0,oe.SelfDestructingObject1=void 0,oe.SelfDestructingObject2=void 0,oe.SelfDestructingObject3=void 0,oe.SparkMachine=void 0,oe.MinesLargeFlashingCrate=void 0,oe.RuinsSeal=void 0,oe.RuinsTeleporter=void 0,oe.RuinsWarpSiteToSite=void 0,oe.RuinsSwitch=void 0,oe.FloorPanel4=void 0,oe.Ruins1Door=void 0,oe.Ruins3Door=void 0,oe.Ruins2Door=void 0,oe.Ruins11ButtonDoor=void 0,oe.Ruins21ButtonDoor=void 0,oe.Ruins31ButtonDoor=void 0,oe.Ruins4ButtonDoor=void 0,oe.Ruins2ButtonDoor=void 0,oe.RuinsSensor=void 0,oe.RuinsFenceSwitch=void 0,oe.RuinsLaserFence4x2=void 0,oe.RuinsLaserFence6x2=void 0,oe.RuinsLaserFence4x4=void 0,oe.RuinsLaserFence6x4=void 0,oe.RuinsPoisonBlob=void 0,oe.RuinsPilarTrap=void 0,oe.PopupTrapNoTech=void 0,oe.RuinsCrystal=void 0,oe.Monument=void 0,oe.RuinsRock1=void 0,oe.RuinsRock2=void 0,oe.RuinsRock3=void 0,oe.RuinsRock4=void 0,oe.RuinsRock5=void 0,oe.RuinsRock6=void 0,oe.RuinsRock7=void 0,oe.Poison=void 0,oe.FixedBoxTypeRuins=void 0,oe.RandomBoxTypeRuins=void 0,oe.EnemyTypeBoxYellow=void 0,oe.EnemyTypeBoxBlue=void 0,oe.EmptyTypeBoxBlue=void 0,oe.DestructableRock=void 0,oe.PopupTrapsTechs=void 0,oe.FlyingWhiteBird=void 0,oe.Tower=void 0,oe.FloatingRocks=void 0,oe.FloatingSoul=void 0,oe.Butterfly=void 0,oe.LobbyGameMenu=void 0,oe.LobbyWarpObject=void 0,oe.Lobby1EventObjectDefaultTree=void 0,oe.UnknownItem387=void 0,oe.UnknownItem388=void 0,oe.UnknownItem389=void 0,oe.LobbyEventObjectStaticPumpkin=void 0,oe.LobbyEventObject3ChristmasWindows=void 0,oe.LobbyEventObjectRedAndWhiteCurtain=void 0,oe.UnknownItem393=void 0,oe.UnknownItem394=void 0,oe.LobbyFishTank=void 0,oe.LobbyEventObjectButterflies=void 0,oe.UnknownItem400=void 0,oe.GreyWallLow=void 0,oe.SpaceshipDoor=void 0,oe.GreyWallHigh=void 0,oe.TempleNormalDoor=void 0,oe.BreakableWallWallButUnbreakable=void 0,oe.BrokenCilinderAndRubble=void 0,oe.ThreeBrokenWallPiecesOnFloor=void 0,oe.HighBrickCilinder=void 0,oe.LyingCilinder=void 0,oe.BrickConeWithFlatTop=void 0,oe.BreakableTempleWall=void 0,oe.TempleMapDetect=void 0,oe.SmallBrownBrickRisingBridge=void 0,oe.LongRisingBridgeWithPinkHighEdges=void 0,oe.FourSwitchTempleDoor=void 0,oe.FourButtonSpaceshipDoor=void 0,oe.ItemBoxCca=void 0,oe.TeleporterEp2=void 0,oe.CCADoor=void 0,oe.SpecialBoxCCA=void 0,oe.BigCCADoor=void 0,oe.BigCCADoorSwitch=void 0,oe.LittleRock=void 0,oe.Little3StoneWall=void 0,oe.Medium3StoneWall=void 0,oe.SpiderPlant=void 0,oe.CCAAreaTeleporter=void 0,oe.UnknownItem523=void 0,oe.WhiteBird=void 0,oe.OrangeBird=void 0,oe.Saw=void 0,oe.LaserDetect=void 0,oe.UnknownItem529=void 0,oe.UnknownItem530=void 0,oe.Seagull=void 0,oe.Fish=void 0,oe.SeabedDoorWithBlueEdges=void 0,oe.SeabedDoorAlwaysOpenNonTriggerable=void 0,oe.LittleCryotube=void 0,oe.WideGlassWallBreakable=void 0,oe.BlueFloatingRobot=void 0,oe.RedFloatingRobot=void 0,oe.Dolphin=void 0,oe.CaptureTrap=void 0,oe.VRLink=void 0,oe.UnknownItem576=void 0,oe.WarpInBarbaRayRoom=void 0,oe.UnknownItem672=void 0,oe.GeeNest=void 0,oe.LabComputerConsole=void 0,oe.LabComputerConsoleGreenScreen=void 0,oe.ChairYelllowPillow=void 0,oe.OrangeWallWithHoleInMiddle=void 0,oe.GreyWallWithHoleInMiddle=void 0,oe.LongTable=void 0,oe.GBAStation=void 0,oe.TalkLinkToSupport=void 0,oe.InstaWarp=void 0,oe.LabInvisibleObject=void 0,oe.LabGlassWindowDoor=void 0,oe.UnknownItem700=void 0,oe.LabCelingWarp=void 0,oe.Ep4LightSource=void 0,oe.Cacti=void 0,oe.BigBrownRock=void 0,oe.BreakableBrownRock=void 0,oe.UnknownItem832=void 0,oe.UnknownItem833=void 0,oe.PoisonPlant=void 0,oe.UnknownItem897=void 0,oe.UnknownItem898=void 0,oe.OozingDesertPlant=void 0,oe.UnknownItem901=void 0,oe.BigBlackRocks=void 0,oe.UnknownItem903=void 0,oe.UnknownItem904=void 0,oe.UnknownItem905=void 0,oe.UnknownItem906=void 0,oe.FallingRock=void 0,oe.DesertPlantHasCollision=void 0,oe.DesertFixedTypeBoxBreakableCrystals=void 0,oe.UnknownItem910=void 0,oe.BeeHive=void 0,oe.UnknownItem912=void 0,oe.Heat=void 0,oe.TopOfSaintMillionEgg=void 0,oe.UnknownItem961=void 0,function(){var e=1;oe.Unknown=new oe(e++,void 0,"Unknown"),oe.PlayerSet=new oe(e++,0,"Player Set"),oe.Particle=new oe(e++,1,"Particle"),oe.Teleporter=new oe(e++,2,"Teleporter"),oe.Warp=new oe(e++,3,"Warp"),oe.LightCollision=new oe(e++,4,"Light Collision"),oe.Item=new oe(e++,5,"Item"),oe.EnvSound=new oe(e++,6,"Env Sound"),oe.FogCollision=new oe(e++,7,"Fog Collision"),oe.EventCollision=new oe(e++,8,"Event Collision"),oe.CharaCollision=new oe(e++,9,"Chara Collision"),oe.ElementalTrap=new oe(e++,10,"Elemental Trap"),oe.StatusTrap=new oe(e++,11,"Status Trap"),oe.HealTrap=new oe(e++,12,"Heal Trap"),oe.LargeElementalTrap=new oe(e++,13,"Large Elemental Trap"),oe.ObjRoomID=new oe(e++,14,"Obj Room ID"),oe.Sensor=new oe(e++,15,"Sensor"),oe.UnknownItem16=new oe(e++,16,"Unknown Item (16)"),oe.Lensflare=new oe(e++,17,"Lensflare"),oe.ScriptCollision=new oe(e++,18,"Script Collision"),oe.HealRing=new oe(e++,19,"Heal Ring"),oe.MapCollision=new oe(e++,20,"Map Collision"),oe.ScriptCollisionA=new oe(e++,21,"Script Collision A"),oe.ItemLight=new oe(e++,22,"Item Light"),oe.RadarCollision=new oe(e++,23,"Radar Collision"),oe.FogCollisionSW=new oe(e++,24,"Fog Collision SW"),oe.BossTeleporter=new oe(e++,25,"Boss Teleporter"),oe.ImageBoard=new oe(e++,26,"Image Board"),oe.QuestWarp=new oe(e++,27,"Quest Warp"),oe.Epilogue=new oe(e++,28,"Epilogue"),oe.UnknownItem29=new oe(e++,29,"Unknown Item (29)"),oe.UnknownItem30=new oe(e++,30,"Unknown Item (30)"),oe.UnknownItem31=new oe(e++,31,"Unknown Item (31)"),oe.BoxDetectObject=new oe(e++,32,"Box Detect Object"),oe.SymbolChatObject=new oe(e++,33,"Symbol Chat Object"),oe.TouchPlateObject=new oe(e++,34,"Touch plate Object"),oe.TargetableObject=new oe(e++,35,"Targetable Object"),oe.EffectObject=new oe(e++,36,"Effect object"),oe.CountDownObject=new oe(e++,37,"Count Down Object"),oe.UnknownItem38=new oe(e++,38,"Unknown Item (38)"),oe.UnknownItem39=new oe(e++,39,"Unknown Item (39)"),oe.UnknownItem40=new oe(e++,40,"Unknown Item (40)"),oe.UnknownItem41=new oe(e++,41,"Unknown Item (41)"),oe.MenuActivation=new oe(e++,64,"Menu activation"),oe.TelepipeLocation=new oe(e++,65,"Telepipe Location"),oe.BGMCollision=new oe(e++,66,"BGM Collision"),oe.MainRagolTeleporter=new oe(e++,67,"Main Ragol Teleporter"),oe.LobbyTeleporter=new oe(e++,68,"Lobby Teleporter"),oe.PrincipalWarp=new oe(e++,69,"Principal warp"),oe.ShopDoor=new oe(e++,70,"Shop Door"),oe.HuntersGuildDoor=new oe(e++,71,"Hunter's Guild Door"),oe.TeleporterDoor=new oe(e++,72,"Teleporter Door"),oe.MedicalCenterDoor=new oe(e++,73,"Medical Center Door"),oe.Elevator=new oe(e++,74,"Elevator"),oe.EasterEgg=new oe(e++,75,"Easter Egg"),oe.ValentinesHeart=new oe(e++,76,"Valentines Heart"),oe.ChristmasTree=new oe(e++,77,"Christmas Tree"),oe.ChristmasWreath=new oe(e++,78,"Christmas Wreath"),oe.HalloweenPumpkin=new oe(e++,79,"Halloween Pumpkin"),oe.TwentyFirstCentury=new oe(e++,80,"21st Century"),oe.Sonic=new oe(e++,81,"Sonic"),oe.WelcomeBoard=new oe(e++,82,"Welcome Board"),oe.Firework=new oe(e++,83,"Firework"),oe.LobbyScreenDoor=new oe(e++,84,"Lobby Screen Door"),oe.MainRagolTeleporterBattleInNextArea=new oe(e++,85,"Main Ragol Teleporter (Battle in next area?)"),oe.LabTeleporterDoor=new oe(e++,86,"Lab Teleporter Door"),oe.Pioneer2InvisibleTouchplate=new oe(e++,87,"Pioneer 2 Invisible Touchplate"),oe.ForestDoor=new oe(e++,128,"Forest Door"),oe.ForestSwitch=new oe(e++,129,"Forest Switch"),oe.LaserFence=new oe(e++,130,"Laser Fence"),oe.LaserSquareFence=new oe(e++,131,"Laser Square Fence"),oe.ForestLaserFenceSwitch=new oe(e++,132,"Forest Laser Fence Switch"),oe.LightRays=new oe(e++,133,"Light rays"),oe.BlueButterfly=new oe(e++,134,"Blue Butterfly"),oe.Probe=new oe(e++,135,"Probe"),oe.RandomTypeBox1=new oe(e++,136,"Random Type Box 1"),oe.ForestWeatherStation=new oe(e++,137,"Forest Weather Station"),oe.Battery=new oe(e++,138,"Battery"),oe.ForestConsole=new oe(e++,139,"Forest Console"),oe.BlackSlidingDoor=new oe(e++,140,"Black Sliding Door"),oe.RicoMessagePod=new oe(e++,141,"Rico Message Pod"),oe.EnergyBarrier=new oe(e++,142,"Energy Barrier"),oe.ForestRisingBridge=new oe(e++,143,"Forest Rising Bridge"),oe.SwitchNoneDoor=new oe(e++,144,"Switch (none door)"),oe.EnemyBoxGrey=new oe(e++,145,"Enemy Box (Grey)"),oe.FixedTypeBox=new oe(e++,146,"Fixed Type Box"),oe.EnemyBoxBrown=new oe(e++,147,"Enemy Box (Brown)"),oe.EmptyTypeBox=new oe(e++,149,"Empty Type Box"),oe.LaserFenseEx=new oe(e++,150,"Laser Fense Ex"),oe.LaserSquareFenceEx=new oe(e++,151,"Laser Square Fence Ex"),oe.FloorPanel1=new oe(e++,192,"Floor Panel 1"),oe.Caves4ButtonDoor=new oe(e++,193,"Caves 4 Button door"),oe.CavesNormalDoor=new oe(e++,194,"Caves Normal door"),oe.CavesSmashingPillar=new oe(e++,195,"Caves Smashing Pillar"),oe.CavesSign1=new oe(e++,196,"Caves Sign 1"),oe.CavesSign2=new oe(e++,197,"Caves Sign 2"),oe.CavesSign3=new oe(e++,198,"Caves Sign 3"),oe.HexagalTank=new oe(e++,199,"Hexagal Tank"),oe.BrownPlatform=new oe(e++,200,"Brown Platform"),oe.WarningLightObject=new oe(e++,201,"Warning Light Object"),oe.Rainbow=new oe(e++,203,"Rainbow"),oe.FloatingJelifish=new oe(e++,204,"Floating Jelifish"),oe.FloatingDragonfly=new oe(e++,205,"Floating Dragonfly"),oe.CavesSwitchDoor=new oe(e++,206,"Caves Switch Door"),oe.RobotRechargeStation=new oe(e++,207,"Robot Recharge Station"),oe.CavesCakeShop=new oe(e++,208,"Caves Cake Shop"),oe.Caves1SmallRedRock=new oe(e++,209,"Caves 1 Small Red Rock"),oe.Caves1MediumRedRock=new oe(e++,210,"Caves 1 Medium Red Rock"),oe.Caves1LargeRedRock=new oe(e++,211,"Caves 1 Large Red Rock"),oe.Caves2SmallRock1=new oe(e++,212,"Caves 2 Small Rock 1"),oe.Caves2MediumRock1=new oe(e++,213,"Caves 2 Medium Rock 1"),oe.Caves2LargeRock1=new oe(e++,214,"Caves 2 Large Rock 1"),oe.Caves2SmallRock2=new oe(e++,215,"Caves 2 Small Rock 2"),oe.Caves2MediumRock2=new oe(e++,216,"Caves 2 Medium Rock 2"),oe.Caves2LargeRock2=new oe(e++,217,"Caves 2 Large Rock 2"),oe.Caves3SmallRock=new oe(e++,218,"Caves 3 Small Rock"),oe.Caves3MediumRock=new oe(e++,219,"Caves 3 Medium Rock"),oe.Caves3LargeRock=new oe(e++,220,"Caves 3 Large Rock"),oe.FloorPanel2=new oe(e++,222,"Floor Panel 2"),oe.DestructableRockCaves1=new oe(e++,223,"Destructable Rock (Caves 1)"),oe.DestructableRockCaves2=new oe(e++,224,"Destructable Rock (Caves 2)"),oe.DestructableRockCaves3=new oe(e++,225,"Destructable Rock (Caves 3)"),oe.MinesDoor=new oe(e++,256,"Mines Door"),oe.FloorPanel3=new oe(e++,257,"Floor Panel 3"),oe.MinesSwitchDoor=new oe(e++,258,"Mines Switch Door"),oe.LargeCryoTube=new oe(e++,259,"Large Cryo-Tube"),oe.ComputerLikeCalus=new oe(e++,260,"Computer (like calus)"),oe.GreenScreenOpeningAndClosing=new oe(e++,261,"Green Screen opening and closing"),oe.FloatingRobot=new oe(e++,262,"Floating Robot"),oe.FloatingBlueLight=new oe(e++,263,"Floating Blue Light"),oe.SelfDestructingObject1=new oe(e++,264,"Self Destructing Object 1"),oe.SelfDestructingObject2=new oe(e++,265,"Self Destructing Object 2"),oe.SelfDestructingObject3=new oe(e++,266,"Self Destructing Object 3"),oe.SparkMachine=new oe(e++,267,"Spark Machine"),oe.MinesLargeFlashingCrate=new oe(e++,268,"Mines Large Flashing Crate"),oe.RuinsSeal=new oe(e++,304,"Ruins Seal"),oe.RuinsTeleporter=new oe(e++,320,"Ruins Teleporter"),oe.RuinsWarpSiteToSite=new oe(e++,321,"Ruins Warp (Site to site)"),oe.RuinsSwitch=new oe(e++,322,"Ruins Switch"),oe.FloorPanel4=new oe(e++,323,"Floor Panel 4"),oe.Ruins1Door=new oe(e++,324,"Ruins 1 Door"),oe.Ruins3Door=new oe(e++,325,"Ruins 3 Door"),oe.Ruins2Door=new oe(e++,326,"Ruins 2 Door"),oe.Ruins11ButtonDoor=new oe(e++,327,"Ruins 1-1 Button Door"),oe.Ruins21ButtonDoor=new oe(e++,328,"Ruins 2-1 Button Door"),oe.Ruins31ButtonDoor=new oe(e++,329,"Ruins 3-1 Button Door"),oe.Ruins4ButtonDoor=new oe(e++,330,"Ruins 4-Button Door"),oe.Ruins2ButtonDoor=new oe(e++,331,"Ruins 2-Button Door"),oe.RuinsSensor=new oe(e++,332,"Ruins Sensor"),oe.RuinsFenceSwitch=new oe(e++,333,"Ruins Fence Switch"),oe.RuinsLaserFence4x2=new oe(e++,334,"Ruins Laser Fence 4x2"),oe.RuinsLaserFence6x2=new oe(e++,335,"Ruins Laser Fence 6x2"),oe.RuinsLaserFence4x4=new oe(e++,336,"Ruins Laser Fence 4x4"),oe.RuinsLaserFence6x4=new oe(e++,337,"Ruins Laser Fence 6x4"),oe.RuinsPoisonBlob=new oe(e++,338,"Ruins poison Blob"),oe.RuinsPilarTrap=new oe(e++,339,"Ruins Pilar Trap"),oe.PopupTrapNoTech=new oe(e++,340,"Popup Trap (No Tech)"),oe.RuinsCrystal=new oe(e++,341,"Ruins Crystal"),oe.Monument=new oe(e++,342,"Monument"),oe.RuinsRock1=new oe(e++,345,"Ruins Rock 1"),oe.RuinsRock2=new oe(e++,346,"Ruins Rock 2"),oe.RuinsRock3=new oe(e++,347,"Ruins Rock 3"),oe.RuinsRock4=new oe(e++,348,"Ruins Rock 4"),oe.RuinsRock5=new oe(e++,349,"Ruins Rock 5"),oe.RuinsRock6=new oe(e++,350,"Ruins Rock 6"),oe.RuinsRock7=new oe(e++,351,"Ruins Rock 7"),oe.Poison=new oe(e++,352,"Poison"),oe.FixedBoxTypeRuins=new oe(e++,353,"Fixed Box Type (Ruins)"),oe.RandomBoxTypeRuins=new oe(e++,354,"Random Box Type (Ruins)"),oe.EnemyTypeBoxYellow=new oe(e++,355,"Enemy Type Box (Yellow)"),oe.EnemyTypeBoxBlue=new oe(e++,356,"Enemy Type Box (Blue)"),oe.EmptyTypeBoxBlue=new oe(e++,357,"Empty Type Box (Blue)"),oe.DestructableRock=new oe(e++,358,"Destructable Rock"),oe.PopupTrapsTechs=new oe(e++,359,"Popup Traps (techs)"),oe.FlyingWhiteBird=new oe(e++,368,"Flying White Bird"),oe.Tower=new oe(e++,369,"Tower"),oe.FloatingRocks=new oe(e++,370,"Floating Rocks"),oe.FloatingSoul=new oe(e++,371,"Floating Soul"),oe.Butterfly=new oe(e++,372,"Butterfly"),oe.LobbyGameMenu=new oe(e++,384,"Lobby Game menu"),oe.LobbyWarpObject=new oe(e++,385,"Lobby Warp Object"),oe.Lobby1EventObjectDefaultTree=new oe(e++,386,"Lobby 1 Event Object (Default Tree)"),oe.UnknownItem387=new oe(e++,387,"Unknown Item (387)"),oe.UnknownItem388=new oe(e++,388,"Unknown Item (388)"),oe.UnknownItem389=new oe(e++,389,"Unknown Item (389)"),oe.LobbyEventObjectStaticPumpkin=new oe(e++,390,"Lobby Event Object (Static Pumpkin)"),oe.LobbyEventObject3ChristmasWindows=new oe(e++,391,"Lobby Event Object (3 Christmas Windows)"),oe.LobbyEventObjectRedAndWhiteCurtain=new oe(e++,392,"Lobby Event Object (Red and White Curtain)"),oe.UnknownItem393=new oe(e++,393,"Unknown Item (393)"),oe.UnknownItem394=new oe(e++,394,"Unknown Item (394)"),oe.LobbyFishTank=new oe(e++,395,"Lobby Fish Tank"),oe.LobbyEventObjectButterflies=new oe(e++,396,"Lobby Event Object (Butterflies)"),oe.UnknownItem400=new oe(e++,400,"Unknown Item (400)"),oe.GreyWallLow=new oe(e++,401,"grey wall low"),oe.SpaceshipDoor=new oe(e++,402,"Spaceship Door"),oe.GreyWallHigh=new oe(e++,403,"grey wall high"),oe.TempleNormalDoor=new oe(e++,416,"Temple Normal Door"),oe.BreakableWallWallButUnbreakable=new oe(e++,417,'"breakable wall wall, but unbreakable"'),oe.BrokenCilinderAndRubble=new oe(e++,418,"Broken cilinder and rubble"),oe.ThreeBrokenWallPiecesOnFloor=new oe(e++,419,"3 broken wall pieces on floor"),oe.HighBrickCilinder=new oe(e++,420,"high brick cilinder"),oe.LyingCilinder=new oe(e++,421,"lying cilinder"),oe.BrickConeWithFlatTop=new oe(e++,422,"brick cone with flat top"),oe.BreakableTempleWall=new oe(e++,423,"breakable temple wall"),oe.TempleMapDetect=new oe(e++,424,"Temple Map Detect"),oe.SmallBrownBrickRisingBridge=new oe(e++,425,"small brown brick rising bridge"),oe.LongRisingBridgeWithPinkHighEdges=new oe(e++,426,"long rising bridge (with pink high edges)"),oe.FourSwitchTempleDoor=new oe(e++,427,"4 switch temple door"),oe.FourButtonSpaceshipDoor=new oe(e++,448,"4 button spaceship door"),oe.ItemBoxCca=new oe(e++,512,"item box cca"),oe.TeleporterEp2=new oe(e++,513,"Teleporter (Ep 2)"),oe.CCADoor=new oe(e++,514,"CCA Door"),oe.SpecialBoxCCA=new oe(e++,515,"Special Box CCA"),oe.BigCCADoor=new oe(e++,516,"Big CCA Door"),oe.BigCCADoorSwitch=new oe(e++,517,"Big CCA Door Switch"),oe.LittleRock=new oe(e++,518,"Little Rock"),oe.Little3StoneWall=new oe(e++,519,"Little 3 Stone Wall"),oe.Medium3StoneWall=new oe(e++,520,"Medium 3 stone wall"),oe.SpiderPlant=new oe(e++,521,"Spider Plant"),oe.CCAAreaTeleporter=new oe(e++,522,"CCA Area Teleporter"),oe.UnknownItem523=new oe(e++,523,"Unknown Item (523)"),oe.WhiteBird=new oe(e++,524,"White Bird"),oe.OrangeBird=new oe(e++,525,"Orange Bird"),oe.Saw=new oe(e++,527,"Saw"),oe.LaserDetect=new oe(e++,528,"Laser Detect"),oe.UnknownItem529=new oe(e++,529,"Unknown Item (529)"),oe.UnknownItem530=new oe(e++,530,"Unknown Item (530)"),oe.Seagull=new oe(e++,531,"Seagull"),oe.Fish=new oe(e++,544,"Fish"),oe.SeabedDoorWithBlueEdges=new oe(e++,545,"Seabed Door (with blue edges)"),oe.SeabedDoorAlwaysOpenNonTriggerable=new oe(e++,546,"Seabed door (always open, non-triggerable)"),oe.LittleCryotube=new oe(e++,547,"Little Cryotube"),oe.WideGlassWallBreakable=new oe(e++,548,"Wide Glass Wall (breakable)"),oe.BlueFloatingRobot=new oe(e++,549,"Blue floating robot"),oe.RedFloatingRobot=new oe(e++,550,"Red floating robot"),oe.Dolphin=new oe(e++,551,"Dolphin"),oe.CaptureTrap=new oe(e++,552,"Capture Trap"),oe.VRLink=new oe(e++,553,"VR link"),oe.UnknownItem576=new oe(e++,576,"Unknown Item (576)"),oe.WarpInBarbaRayRoom=new oe(e++,640,"Warp in Barba Ray Room"),oe.UnknownItem672=new oe(e++,672,"Unknown Item (672)"),oe.GeeNest=new oe(e++,688,"Gee Nest"),oe.LabComputerConsole=new oe(e++,689,"Lab Computer Console"),oe.LabComputerConsoleGreenScreen=new oe(e++,690,"Lab Computer Console (Green Screen)"),oe.ChairYelllowPillow=new oe(e++,691,"Chair, Yelllow Pillow"),oe.OrangeWallWithHoleInMiddle=new oe(e++,692,"orange wall with hole in middle"),oe.GreyWallWithHoleInMiddle=new oe(e++,693,"grey wall with hole in middle"),oe.LongTable=new oe(e++,694,"long table"),oe.GBAStation=new oe(e++,695,"GBA Station"),oe.TalkLinkToSupport=new oe(e++,696,"Talk (link to support)"),oe.InstaWarp=new oe(e++,697,"insta-warp"),oe.LabInvisibleObject=new oe(e++,698,"Lab Invisible Object"),oe.LabGlassWindowDoor=new oe(e++,699,"Lab Glass window Door"),oe.UnknownItem700=new oe(e++,700,"Unknown Item (700)"),oe.LabCelingWarp=new oe(e++,701,"Lab Celing Warp"),oe.Ep4LightSource=new oe(e++,768,"Ep4 Light Source"),oe.Cacti=new oe(e++,769,"cacti"),oe.BigBrownRock=new oe(e++,770,"Big Brown Rock"),oe.BreakableBrownRock=new oe(e++,771,"Breakable Brown Rock"),oe.UnknownItem832=new oe(e++,832,"Unknown Item (832)"),oe.UnknownItem833=new oe(e++,833,"Unknown Item (833)"),oe.PoisonPlant=new oe(e++,896,"Poison Plant"),oe.UnknownItem897=new oe(e++,897,"Unknown Item (897)"),oe.UnknownItem898=new oe(e++,898,"Unknown Item (898)"),oe.OozingDesertPlant=new oe(e++,899,"Oozing Desert Plant"),oe.UnknownItem901=new oe(e++,901,"Unknown Item (901)"),oe.BigBlackRocks=new oe(e++,902,"big black rocks"),oe.UnknownItem903=new oe(e++,903,"Unknown Item (903)"),oe.UnknownItem904=new oe(e++,904,"Unknown Item (904)"),oe.UnknownItem905=new oe(e++,905,"Unknown Item (905)"),oe.UnknownItem906=new oe(e++,906,"Unknown Item (906)"),oe.FallingRock=new oe(e++,907,"Falling Rock"),oe.DesertPlantHasCollision=new oe(e++,908,"Desert Plant (has collision)"),oe.DesertFixedTypeBoxBreakableCrystals=new oe(e++,909,"Desert Fixed Type Box (Breakable Crystals)"),oe.UnknownItem910=new oe(e++,910,"Unknown Item (910)"),oe.BeeHive=new oe(e++,911,"Bee Hive"),oe.UnknownItem912=new oe(e++,912,"Unknown Item (912)"),oe.Heat=new oe(e++,913,"Heat"),oe.TopOfSaintMillionEgg=new oe(e++,960,"Top of saint million egg"),oe.UnknownItem961=new oe(e++,961,"Unknown Item (961)")}();var se,le=1/512,ue=.1;!function(e){e.Ephinea="Ephinea"}(se||(se={}));var ce;g(se);!function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.IV=4]="IV"}(ce||(ce={}));var de;g(ce);function pe(e){if(!ce[e])throw new Error("Invalid episode ".concat(e,"."))}!function(e){e[e.Viridia=0]="Viridia",e[e.Greenill=1]="Greenill",e[e.Skyly=2]="Skyly",e[e.Bluefull=3]="Bluefull",e[e.Purplenum=4]="Purplenum",e[e.Pinkal=5]="Pinkal",e[e.Redria=6]="Redria",e[e.Oran=7]="Oran",e[e.Yellowboze=8]="Yellowboze",e[e.Whitill=9]="Whitill"}(de||(de={}));var he,_e=g(de);!function(e){e[e.Normal=0]="Normal",e[e.Hard=1]="Hard",e[e.VHard=2]="VHard",e[e.Ultimate=3]="Ultimate"}(he||(he={}));var me,fe,we,ve,be,ye,ke=g(he),ge=function e(t,n,r){if(Object(d.a)(this,e),this.id=void 0,this.position=void 0,this.y_axis_rotation=void 0,this.sin_y_axis_rotation=void 0,this.cos_y_axis_rotation=void 0,!Number.isInteger(t)||t<-1)throw new Error("Expected id to be an integer greater than or equal to -1, got ".concat(t,"."));if(!n)throw new Error("position is required.");if("number"!==typeof r)throw new Error("y_axis_rotation is required.");this.id=t,this.position=n,this.y_axis_rotation=r,this.sin_y_axis_rotation=Math.sin(this.y_axis_rotation),this.cos_y_axis_rotation=Math.cos(this.y_axis_rotation)},Re=(I=function e(t,n,r,a,i,o,s,l,u,c){if(Object(d.a)(this,e),Object(v.a)(this,"id",z,this),Object(v.a)(this,"name",P,this),Object(v.a)(this,"short_description",G,this),Object(v.a)(this,"long_description",T,this),Object(v.a)(this,"episode",A,this),Object(v.a)(this,"area_variants",W,this),Object(v.a)(this,"objects",U,this),Object(v.a)(this,"npcs",N,this),this.dat_unknowns=void 0,this.bin_data=void 0,null!=t&&(!Number.isInteger(t)||t<0))throw new Error("id should be undefined or a non-negative integer.");if(pe(i),!s||!(s instanceof Array))throw new Error("objs is required.");if(!l||!(l instanceof Array))throw new Error("npcs is required.");this.id=t,this.name=n,this.short_description=r,this.long_description=a,this.episode=i,this.area_variants=o,this.objects=s,this.npcs=l,this.dat_unknowns=u,this.bin_data=c},z=Object(b.a)(I.prototype,"id",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(b.a)(I.prototype,"name",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=Object(b.a)(I.prototype,"short_description",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(b.a)(I.prototype,"long_description",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(b.a)(I.prototype,"episode",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(b.a)(I.prototype,"area_variants",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=Object(b.a)(I.prototype,"objects",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(b.a)(I.prototype,"npcs",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I),je=(H=function(){function e(t,n,r,a){if(Object(d.a)(this,e),Object(v.a)(this,"area_id",q,this),this._section_id=void 0,Object(v.a)(this,"section",V,this),Object(v.a)(this,"position",Z,this),Object(v.a)(this,"rotation",Y,this),Object(v.a)(this,"object_3d",K,this),Object.getPrototypeOf(this)===Object.getPrototypeOf(e))throw new Error("Abstract class should not be instantiated directly.");if(!Number.isInteger(t)||t<0)throw new Error("Expected area_id to be a non-negative integer, got ".concat(t,"."));if(!Number.isInteger(n)||n<0)throw new Error("Expected section_id to be a non-negative integer, got ".concat(n,"."));if(!r)throw new Error("position is required.");if(!a)throw new Error("rotation is required.");this.area_id=t,this._section_id=n,this.position=r,this.rotation=a}return Object(p.a)(e,[{key:"section_id",get:function(){return this.section?this.section.id:this._section_id}},{key:"section_position",get:function(){var e=this.position,t=e.x,n=e.y,r=e.z;if(this.section){var a=t-this.section.position.x,i=n-this.section.position.y,o=r-this.section.position.z,s=-this.section.sin_y_axis_rotation,l=this.section.cos_y_axis_rotation;t=l*a+s*o,n=i,r=-s*a+l*o}return new k(t,n,r)},set:function(e){var t=e.x,n=e.y,r=e.z;if(this.section){var a=-this.section.sin_y_axis_rotation,i=this.section.cos_y_axis_rotation,o=a*t+i*r,s=i*t-a*r+this.section.position.x,l=n+this.section.position.y,u=o+this.section.position.z;this.position=new k(s,l,u)}}}]),e}(),q=Object(b.a)(H.prototype,"area_id",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(H.prototype,"section_id",[y.d],Object.getOwnPropertyDescriptor(H.prototype,"section_id"),H.prototype),V=Object(b.a)(H.prototype,"section",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=Object(b.a)(H.prototype,"position",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=Object(b.a)(H.prototype,"rotation",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(H.prototype,"section_position",[y.d],Object.getOwnPropertyDescriptor(H.prototype,"section_position"),H.prototype),K=Object(b.a)(H.prototype,"object_3d",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H),Oe=(Q=function(e){function t(e,n,r,a,i,o){var s;if(Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,e,n,r,a)),Object(v.a)(s,"type",X,Object(w.a)(s)),s.dat=void 0,!i)throw new Error("type is required.");return s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(je),X=Object(b.a)(Q.prototype,"type",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q),Se=(J=function(e){function t(e,n,r,a,i,o){var s;if(Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,e,n,r,a)),Object(v.a)(s,"type",$,Object(w.a)(s)),s.dat=void 0,!i)throw new Error("type is required.");return s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(je),$=Object(b.a)(J.prototype,"type",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J),xe=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.order=void 0,this.area_variants=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."));if(!n)throw new Error("name is required.");if(!a)throw new Error("area_variants is required.");this.id=t,this.name=n,this.order=r,this.area_variants=a},De=(ee=function e(t,n){if(Object(d.a)(this,e),this.id=t,this.area=n,Object(v.a)(this,"sections",te,this),!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."))},te=Object(b.a)(ee.prototype,"sections",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee),Ee=function e(t,n,r,a,i,o){Object(d.a)(this,e),this.difficulty=t,this.section_id=n,this.npc_type=r,this.item_type=a,this.anything_rate=i,this.rare_rate=o,this.rate=void 0,this.rate=i*o},Le=(ne=function(){function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.episode=void 0,this.quest=void 0,this.enemy_counts=void 0,this.default_time=void 0,Object(v.a)(this,"user_time",re,this),!t)throw new Error("id is required.");if(a<=0)throw new Error("default_time must be greater than zero.");if(!n)throw new Error("name is required.");if(!r)throw new Error("quest is required.");this.id=t,this.name=n,this.episode=r.episode,this.quest=r,this.enemy_counts=r.enemy_counts,this.default_time=a}return Object(p.a)(e,[{key:"time",get:function(){return null!=this.user_time?this.user_time:this.default_time}}]),e}(),re=Object(b.a)(ne.prototype,"user_time",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(ne.prototype,"time",[y.d],Object.getOwnPropertyDescriptor(ne.prototype,"time"),ne.prototype),ne),Ce=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=t,this.name=n,this.episode=r,this.enemy_counts=a,!t)throw new Error("id is required.");if(!n)throw new Error("name is required.");if(!a)throw new Error("enemyCounts is required.")},Be=function e(t,n,r,a){Object(d.a)(this,e),this.name=t,this.head_style_count=n,this.hair_styles_count=r,this.hair_styles_with_accessory=a},Me=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},Fe=(n(251),n(109),n(49)),Ie=n(14),ze=n.n(Ie),Pe=n(23),Ge=n(103);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Nominal=2]="Nominal",e[e.Error=3]="Error",e[e.Reloading=4]="Reloading"}(ye||(ye={}));var Te,Ae,We,Ue,Ne,He,qe,Ve,Ze,Ye,Ke,Qe,Xe,Je,$e,et=(me=function(){function e(t,n){Object(d.a)(this,e),Object(v.a)(this,"_value",fe,this),Object(v.a)(this,"_promise",we,this),Object(v.a)(this,"_state",ve,this),this._load=void 0,Object(v.a)(this,"_error",be,this),this._value=t,this._load=n}return Object(p.a)(e,[{key:"load",value:function(){return this.load_value()}},{key:"load_value",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_loading){e.next=2;break}return e.abrupt("return",this._promise);case 2:if(this._state=ye.Initializing,e.prev=3,!this._load){e.next=9;break}return this._promise=this._load(),e.next=8,this._promise;case 8:this._value=e.sent;case 9:return this._state=ye.Nominal,this._error=void 0,e.abrupt("return",this._value);case 14:throw e.prev=14,e.t0=e.catch(3),this._state=ye.Error,this._error=e.t0,e.t0;case 19:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"value",get:function(){var e=this;return this._state===ye.Uninitialized&&Object(Ge.defer)(function(){return e.load_value()}),this._value},set:function(e){this._value=e}},{key:"promise",get:function(){return this._state===ye.Uninitialized?this.load_value():this._promise}},{key:"state",get:function(){return this._state}},{key:"is_initialized",get:function(){return this._state!==ye.Uninitialized}},{key:"is_loading",get:function(){switch(this._state){case ye.Initializing:case ye.Reloading:return!0;default:return!1}}},{key:"error",get:function(){return this._error}}]),e}(),fe=Object(b.a)(me.prototype,"_value",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=Object(b.a)(me.prototype,"_promise",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new Promise(function(t){return t(e._value)})}}),ve=Object(b.a)(me.prototype,"_state",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ye.Uninitialized}}),be=Object(b.a)(me.prototype,"_error",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(b.a)(me.prototype,"value",[y.d],Object.getOwnPropertyDescriptor(me.prototype,"value"),me.prototype),Object(b.a)(me.prototype,"state",[y.d],Object.getOwnPropertyDescriptor(me.prototype,"state"),me.prototype),Object(b.a)(me.prototype,"is_initialized",[y.d],Object.getOwnPropertyDescriptor(me.prototype,"is_initialized"),me.prototype),Object(b.a)(me.prototype,"is_loading",[y.d],Object.getOwnPropertyDescriptor(me.prototype,"is_loading"),me.prototype),Object(b.a)(me.prototype,"error",[y.d],Object.getOwnPropertyDescriptor(me.prototype,"error"),me.prototype),me),tt=new(Te=function e(){Object(d.a)(this,e),Object(v.a)(this,"current_server",Ae,this)},Ae=Object(b.a)(Te.prototype,"current_server",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.Ephinea}}),Te),nt=(We=function(e){function t(e){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).call(this,se,e))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"current",get:function(){return this.get(tt.current_server)}}]),t}(x),Object(b.a)(We.prototype,"current",[y.d],Object.getOwnPropertyDescriptor(We.prototype,"current"),We.prototype),We),rt=(Ue=function(){function e(){var t=this;Object(d.a)(this,e),this.id_to_item_type=[],Object(v.a)(this,"item_types",Ne,this),this.load=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r,a,i,o,s,l,u,c,d,p;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/itemTypes.").concat(se[n].toLowerCase(),".json"));case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,i=new Array,o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();case 12:if(o=(c=u.next()).done){e.next=34;break}d=c.value,p=void 0,e.t0=d.class,e.next="weapon"===e.t0?18:"armor"===e.t0?20:"shield"===e.t0?22:"unit"===e.t0?24:"tool"===e.t0?26:28;break;case 18:return p=new D(d.id,d.name,d.minAtp,d.maxAtp,d.ata,d.maxGrind,d.requiredAtp),e.abrupt("break",29);case 20:return p=new E(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 22:return p=new L(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 24:return p=new C(d.id,d.name),e.abrupt("break",29);case 26:return p=new B(d.id,d.name),e.abrupt("break",29);case 28:return e.abrupt("continue",31);case 29:t.id_to_item_type[p.id]=p,i.push(p);case 31:o=!0,e.next=12;break;case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(10),s=!0,l=e.t1;case 40:e.prev=40,e.prev=41,o||null==u.return||u.return();case 43:if(e.prev=43,!s){e.next=46;break}throw l;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.item_types=i,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[10,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"get_by_id",value:function(e){return this.id_to_item_type[e]}}]),e}(),Ne=Object(b.a)(Ue.prototype,"item_types",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ue),at=new nt(function(e){var t=new rt;return new et(t,function(){return t.load(e)})}),it=(He=function(){function e(t,n){Object(d.a)(this,e),this.store=void 0,this.item=void 0,this.store=t,this.item=n}return Object(p.a)(e,[{key:"shifta_atp",get:function(){return this.item.type.min_atp===this.item.type.max_atp?0:this.item.type.max_atp*this.store.shifta_factor}},{key:"min_atp",get:function(){return this.item.type.min_atp+this.item.grind_atp}},{key:"max_atp",get:function(){return this.item.type.max_atp+this.item.grind_atp+this.shifta_atp}},{key:"final_min_atp",get:function(){return this.min_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"final_max_atp",get:function(){return this.max_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"min_normal_damage",get:function(){return(this.final_min_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"max_normal_damage",get:function(){return(this.final_max_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"avg_normal_damage",get:function(){return(this.min_normal_damage+this.max_normal_damage)/2}},{key:"min_heavy_damage",get:function(){return.3402*(this.final_min_atp-this.store.enemy_dfp)}},{key:"max_heavy_damage",get:function(){return.3402*(this.final_max_atp-this.store.enemy_dfp)}},{key:"avg_heavy_damage",get:function(){return(this.min_heavy_damage+this.max_heavy_damage)/2}}]),e}(),Object(b.a)(He.prototype,"shifta_atp",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"shifta_atp"),He.prototype),Object(b.a)(He.prototype,"min_atp",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"min_atp"),He.prototype),Object(b.a)(He.prototype,"max_atp",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"max_atp"),He.prototype),Object(b.a)(He.prototype,"final_min_atp",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"final_min_atp"),He.prototype),Object(b.a)(He.prototype,"final_max_atp",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"final_max_atp"),He.prototype),Object(b.a)(He.prototype,"min_normal_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"min_normal_damage"),He.prototype),Object(b.a)(He.prototype,"max_normal_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"max_normal_damage"),He.prototype),Object(b.a)(He.prototype,"avg_normal_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"avg_normal_damage"),He.prototype),Object(b.a)(He.prototype,"min_heavy_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"min_heavy_damage"),He.prototype),Object(b.a)(He.prototype,"max_heavy_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"max_heavy_damage"),He.prototype),Object(b.a)(He.prototype,"avg_heavy_damage",[y.d],Object.getOwnPropertyDescriptor(He.prototype,"avg_heavy_damage"),He.prototype),He),ot=new(qe=function(){function e(){var t=this;Object(d.a)(this,e),Object(v.a)(this,"char_atp",Ve,this),Object(v.a)(this,"mag_pow",Ze,this),Object(v.a)(this,"shifta_lvl",Ye,this),Object(v.a)(this,"weapons",Ke,this),this.add_weapon=function(e){t.weapons.push(new it(t,new M(e)))},Object(v.a)(this,"armor_type",Qe,this),Object(v.a)(this,"shield_type",Xe,this),Object(v.a)(this,"enemy_dfp",Je,this)}return Object(p.a)(e,[{key:"weapon_types",get:function(){return at.current.value.item_types.filter(function(e){return e instanceof D})}},{key:"armor_types",get:function(){return at.current.value.item_types.filter(function(e){return e instanceof E})}},{key:"shield_types",get:function(){return at.current.value.item_types.filter(function(e){return e instanceof L})}},{key:"armor_atp",get:function(){return this.armor_type?this.armor_type.atp:0}},{key:"shield_atp",get:function(){return this.shield_type?this.shield_type.atp:0}},{key:"base_atp",get:function(){return this.char_atp+2*this.mag_pow}},{key:"shifta_factor",get:function(){return this.shifta_lvl?.013*(this.shifta_lvl-1)+.1:0}},{key:"base_shifta_atp",get:function(){return this.base_atp*this.shifta_factor}}]),e}(),Object(b.a)(qe.prototype,"weapon_types",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"weapon_types"),qe.prototype),Object(b.a)(qe.prototype,"armor_types",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"armor_types"),qe.prototype),Object(b.a)(qe.prototype,"shield_types",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"shield_types"),qe.prototype),Ve=Object(b.a)(qe.prototype,"char_atp",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ze=Object(b.a)(qe.prototype,"mag_pow",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(qe.prototype,"armor_atp",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"armor_atp"),qe.prototype),Object(b.a)(qe.prototype,"shield_atp",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"shield_atp"),qe.prototype),Ye=Object(b.a)(qe.prototype,"shifta_lvl",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(b.a)(qe.prototype,"base_atp",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"base_atp"),qe.prototype),Object(b.a)(qe.prototype,"shifta_factor",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"shifta_factor"),qe.prototype),Object(b.a)(qe.prototype,"base_shifta_atp",[y.d],Object.getOwnPropertyDescriptor(qe.prototype,"base_shifta_atp"),qe.prototype),Ke=Object(b.a)(qe.prototype,"weapons",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.k.array()}}),Qe=Object(b.a)(qe.prototype,"armor_type",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=Object(b.a)(qe.prototype,"shield_type",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=Object(b.a)(qe.prototype,"enemy_dfp",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qe),st=n(215),lt=n.n(st),ut=(n(324),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(lt.a,Object.assign({className:"BigSelect"},this.props))}}]),t}(r.PureComponent)),ct=Object(f.a)($e=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).add_weapon=function(e){if(e){var t=at.current.value.get_by_id(e.value);ot.add_weapon(t)}},n.armor_changed=function(e){if(e){var t=at.current.value.get_by_id(e.value);ot.armor_type=t}else ot.armor_type=void 0},n.shield_changed=function(e){if(e){var t=at.current.value.get_by_id(e.value);ot.shield_type=t}else ot.shield_type=void 0},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("section",null,a.a.createElement("div",null,"Weapons:"),a.a.createElement(ut,{placeholder:"Add a weapon",value:void 0,options:ot.weapon_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_weapon}),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Weapon"),a.a.createElement("td",null,"Min. ATP"),a.a.createElement("td",null,"Max. ATP"),a.a.createElement("td",null,"Grind"),a.a.createElement("td",null,"Grind ATP"),a.a.createElement("td",null,"Shifta ATP"),a.a.createElement("td",null,"Final Min. ATP"),a.a.createElement("td",null,"Final Max. ATP"),a.a.createElement("td",null,"Min. Normal Damage"),a.a.createElement("td",null,"Max. Normal Damage"),a.a.createElement("td",null,"Avg. Normal Damage"),a.a.createElement("td",null,"Min. Heavy Damage"),a.a.createElement("td",null,"Max. Heavy Damage"),a.a.createElement("td",null,"Avg. Heavy Damage"))),a.a.createElement("tbody",null,ot.weapons.map(function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.item.type.name),a.a.createElement("td",null,e.item.type.min_atp),a.a.createElement("td",null,e.item.type.max_atp),a.a.createElement("td",null,a.a.createElement(Fe.a,{size:"small",value:e.item.grind,min:0,max:e.item.type.max_grind,step:1,onChange:function(t){return e.item.grind=t||0}})),a.a.createElement("td",null,e.item.grind_atp),a.a.createElement("td",null,e.shifta_atp.toFixed(1)),a.a.createElement("td",null,e.final_min_atp.toFixed(1)),a.a.createElement("td",null,e.final_max_atp.toFixed(1)),a.a.createElement("td",null,e.min_normal_damage.toFixed(1)),a.a.createElement("td",null,e.max_normal_damage.toFixed(1)),a.a.createElement("td",null,e.avg_normal_damage.toFixed(1)),a.a.createElement("td",null,e.min_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.max_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.avg_heavy_damage.toFixed(1)))}))),a.a.createElement("div",null,"Character ATP:"),a.a.createElement(Fe.a,{value:ot.char_atp,min:0,step:1,onChange:function(e){return ot.char_atp=e||0}}),a.a.createElement("div",null,"MAG POW:"),a.a.createElement(Fe.a,{value:ot.mag_pow,min:0,max:200,step:1,onChange:function(e){return ot.mag_pow=e||0}}),a.a.createElement("div",null,"Armor:"),a.a.createElement(ut,{placeholder:"Choose an armor",value:ot.armor_type&&ot.armor_type.id,options:ot.armor_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.armor_changed}),a.a.createElement("span",null,"Armor ATP: ",ot.armor_atp),a.a.createElement("div",null,"Shield:"),a.a.createElement(ut,{placeholder:"Choose a shield",value:ot.shield_type&&ot.shield_type.id,options:ot.shield_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.shield_changed}),a.a.createElement("span",null,"Shield ATP: ",ot.shield_atp),a.a.createElement("div",null,"Shifta level:"),a.a.createElement(Fe.a,{value:ot.shifta_lvl,min:0,max:30,step:1,onChange:function(e){return ot.shifta_lvl=e||0}}),a.a.createElement("div",null,"Shifta factor:"),a.a.createElement("div",null,ot.shifta_factor.toFixed(3)),a.a.createElement("div",null,"Base shifta ATP:"),a.a.createElement("div",null,ot.base_shifta_atp.toFixed(2))))}}]),t}(r.Component))||$e,dt=(n(328),n(235)),pt=(n(330),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={has_error:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.has_error?a.a.createElement("div",{className:"ErrorBoundary-error"},a.a.createElement("div",null,a.a.createElement(dt.a,{type:"error",message:"Something went wrong."}))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{has_error:!0}}}]),t}(r.Component));function ht(e){var t=function(){return a.a.createElement(pt,null,a.a.createElement(e,null))};return t.displayName="".concat(e.displayName,"ErrorBoundary"),t}n(189);var _t,mt,ft,wt,vt,bt,yt,kt,gt,Rt,jt,Ot=n(77),St=(n(332),n(333),n(220)),xt=(n(83),n(33)),Dt=n(40),Et=n(42),Lt=n(29),Ct=n(219),Bt=n.n(Ct),Mt=l.a.get("stores/HuntMethodStore"),Ft=new(_t=function(){function e(){var t=this;Object(d.a)(this,e),Object(v.a)(this,"methods",mt,this),this.storage_disposer=void 0,this.load_from_local_storage=function(e,n){try{var r=localStorage.getItem("HuntMethodStore.methodUserTimes.".concat(se[n]));if(r){var a=JSON.parse(r),i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;c.user_time=a[c.id]}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}t.storage_disposer&&t.storage_disposer(),t.storage_disposer=Object(y.c)(function(){return t.store_in_local_storage(e,n)})}catch(p){Mt.error(p)}},this.store_in_local_storage=function(e,t){try{var n={},r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;void 0!=l.user_time&&(n[l.id]=l.user_time)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}localStorage.setItem("HuntMethodStore.methodUserTimes.".concat(se[t]),JSON.stringify(n))}catch(c){Mt.error(c)}}}return Object(p.a)(e,[{key:"load_hunt_methods",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,f,w,v,b;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/quests.").concat(se[t].toLowerCase(),".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a=new Array,i=!0,o=!1,s=void 0,e.prev=10,l=r[Symbol.iterator]();case 12:if(i=(u=l.next()).done){e.next=25;break}for(c=u.value,d=0,p=new Map,h=0,_=Object.entries(c.enemyCounts);h<_.length;h++)m=_[h],f=Object(Lt.a)(m,2),w=f[0],v=f[1],(b=F.by_code(w))?(p.set(b,v),d+=v):Mt.error("No NpcType found for code ".concat(w,"."));e.t0=c.id,e.next=31===e.t0?20:34===e.t0?20:1305===e.t0?20:1306===e.t0?20:1307===e.t0?20:313===e.t0?20:314===e.t0?20:21;break;case 20:return e.abrupt("continue",22);case 21:a.push(new Le("q".concat(c.id),c.name,new Ce(c.id,c.name,c.episode,p),/^\d-\d.*/.test(c.name)?.75:d>400?.75:.5));case 22:i=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(10),o=!0,s=e.t1;case 31:e.prev=31,e.prev=32,i||null==l.return||l.return();case 34:if(e.prev=34,!o){e.next=37;break}throw s;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return this.load_from_local_storage(a,t),e.abrupt("return",a);case 41:case"end":return e.stop()}},e,this,[[10,27,31,39],[32,,34,38]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),mt=Object(b.a)(_t.prototype,"methods",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new nt(function(t){return new et([],function(){return e.load_hunt_methods(t)})})}}),_t),It=l.a.get("stores/ItemDropStore"),zt=function(){function e(){Object(d.a)(this,e),this.table=new Array(ke.length*_e.length*ae.length),this.item_type_to_drops=[]}return Object(p.a)(e,[{key:"get_drop",value:function(e,t,n){return this.table[e*_e.length*ae.length+t*ae.length+n.id]}},{key:"set_drop",value:function(e,t,n,r){this.table[e*_e.length*ae.length+t*ae.length+n.id]=r;var a=this.item_type_to_drops[r.item_type.id];a||(a=[],this.item_type_to_drops[r.item_type.id]=a),a.push(r)}},{key:"get_drops_for_item_type",value:function(e){return this.item_type_to_drops[e]||[]}}]),e}(),Pt=(ft=y.k.ref,wt=function e(){Object(d.a)(this,e),Object(v.a)(this,"enemy_drops",vt,this)},vt=Object(b.a)(wt.prototype,"enemy_drops",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new zt}}),wt),Gt=new nt(function(e){var t=new Pt;return new et(t,function(){return function(e,t){return Tt.apply(this,arguments)}(t,e)})});function Tt(){return(Tt=Object(Pe.a)(ze.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h,_,m,f;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.current.promise;case 2:return r=e.sent,e.next=5,fetch("".concat("","/enemyDrops.").concat(se[n].toLowerCase(),".json"));case 5:return a=e.sent,e.next=8,a.json();case 8:i=e.sent,o=new zt,s=!0,l=!1,u=void 0,e.prev=13,c=i[Symbol.iterator]();case 15:if(s=(d=c.next()).done){e.next=34;break}if(p=d.value,h=F.by_code(p.enemy)){e.next=21;break}return It.warn("Couldn't determine NpcType of episode ".concat(p.episode," ").concat(p.enemy,".")),e.abrupt("continue",31);case 21:if(_=he[p.difficulty],m=r.get_by_id(p.itemTypeId)){e.next=26;break}return It.warn("Couldn't find item kind ".concat(p.itemTypeId,".")),e.abrupt("continue",31);case 26:if(null!=(f=de[p.sectionId])){e.next=30;break}return It.warn("Couldn't find section ID ".concat(p.sectionId,".")),e.abrupt("continue",31);case 30:o.set_drop(_,f,h,new Ee(_,f,h,m,p.dropRate,p.rareRate));case 31:s=!0,e.next=15;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(13),l=!0,u=e.t0;case 40:e.prev=40,e.prev=41,s||null==c.return||c.return();case 43:if(e.prev=43,!l){e.next=46;break}throw u;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.enemy_drops=o,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[13,36,40,48],[41,,43,47]])}))).apply(this,arguments)}var At,Wt,Ut=l.a.get("stores/HuntOptimizerStore"),Nt=(bt=function e(t,n){Object(d.a)(this,e),Object(v.a)(this,"item_type",yt,this),Object(v.a)(this,"amount",kt,this),this.item_type=t,this.amount=n},yt=Object(b.a)(bt.prototype,"item_type",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Object(b.a)(bt.prototype,"amount",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt),Ht=function e(t,n){Object(d.a)(this,e),this.wanted_items=void 0,this.optimal_methods=void 0,this.wanted_items=t,this.optimal_methods=n},qt=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.difficulty=void 0,this.section_ids=void 0,this.method_name=void 0,this.method_episode=void 0,this.method_time=void 0,this.runs=void 0,this.total_time=void 0,this.item_counts=void 0,this.difficulty=t,this.section_ids=n,this.method_name=r,this.method_episode=a,this.method_time=i,this.runs=o,this.total_time=o*i,this.item_counts=s},Vt=new(gt=function(){function e(){var t=this;Object(d.a)(this,e),Object(v.a)(this,"wanted_items",Rt,this),Object(v.a)(this,"result",jt,this),this.optimize=Object(Pe.a)(ze.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,f,w,v,b,y,k,g,R,j,O,S,x,D,E,L,C,B,M,I,z,P,G,T,A,W,U,N,H,q,V,Z,Y,K,Q,X,J,$,ee,te,ne,re,ae,ie,oe,se,ce,de,pe,he,me,fe,we,ve,be,ye,ge,Re,je,Oe,Se,xe,De,Ee,Le,Ce,Be,Me,Fe,Ie,Pe,Ge,Te,Ae,We,Ue,Ne,He,qe,Ve,Ze,Ye,Ke,Qe,Xe,Je,$e,et,tt,nt,rt,at;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wanted_items.length){e.next=3;break}return t.result=void 0,e.abrupt("return");case 3:return n=new Set(t.wanted_items.filter(function(e){return e.amount>0}).map(function(e){return e.item_type})),e.next=6,Ft.methods.current.promise;case 6:return r=e.sent,e.next=9,Gt.current.promise;case 9:for(a=e.sent.enemy_drops,i={},o=!0,s=!1,l=void 0,e.prev=14,u=t.wanted_items[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,i[d.item_type.name]={min:d.amount};e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,o||null==u.return||u.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p={},h=new Map,_=!0,m=!1,f=void 0,e.prev=35,w=r[Symbol.iterator]();case 37:if(_=(v=w.next()).done){e.next=144;break}for(b=v.value,y=new Map,k=!0,g=!1,R=void 0,e.prev=43,j=b.enemy_counts.entries()[Symbol.iterator]();!(k=(O=j.next()).done);k=!0)S=O.value,x=Object(Lt.a)(S,2),D=x[0],E=x[1],L=y.get(D)||0,null==D.rare_type?y.set(D,L+E):(C=void 0,B=void 0,D.rare_type===F.Kondrieu?(C=1-ue,B=ue):(C=1-le,B=le),y.set(D,L+E*C),y.set(D.rare_type,(y.get(D.rare_type)||0)+E*B));e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),g=!0,R=e.t1;case 51:e.prev=51,e.prev=52,k||null==j.return||j.return();case 54:if(e.prev=54,!g){e.next=57;break}throw R;case 57:return e.finish(54);case 58:return e.finish(51);case 59:M=[y],(I=y.get(F.PanArms))&&((z=new Map(y)).delete(F.PanArms),z.set(F.Migium,I),z.set(F.Hidoom,I),M.push(z)),(P=y.get(F.PanArms2))&&((G=new Map(y)).delete(F.PanArms2),G.set(F.Migium2,P),G.set(F.Hidoom2,P),M.push(G)),T=0;case 65:if(!(T<M.length)){e.next=141;break}A=M[T],W=1===T,U=!0,N=!1,H=void 0,e.prev=71,q=ke[Symbol.iterator]();case 73:if(U=(V=q.next()).done){e.next=124;break}Z=V.value,Y=!0,K=!1,Q=void 0,e.prev=78,X=_e[Symbol.iterator]();case 80:if(Y=(J=X.next()).done){e.next=107;break}for($=J.value,ee={time:b.time},te=!1,ne=!0,re=!1,ae=void 0,e.prev=87,ie=A.entries()[Symbol.iterator]();!(ne=(oe=ie.next()).done);ne=!0)se=oe.value,ce=Object(Lt.a)(se,2),de=ce[0],pe=ce[1],(he=a.get_drop(Z,$,de))&&n.has(he.item_type)&&(me=ee[he.item_type.name]||0,ee[he.item_type.name]=me+pe*he.rate,te=!0);e.next=95;break;case 91:e.prev=91,e.t2=e.catch(87),re=!0,ae=e.t2;case 95:e.prev=95,e.prev=96,ne||null==ie.return||ie.return();case 98:if(e.prev=98,!re){e.next=101;break}throw ae;case 101:return e.finish(98);case 102:return e.finish(95);case 103:te&&(fe=t.full_method_name(Z,$,b,W),p[fe]=ee,h.set(fe,{method:b,difficulty:Z,section_id:$,split_pan_arms:W}));case 104:Y=!0,e.next=80;break;case 107:e.next=113;break;case 109:e.prev=109,e.t3=e.catch(78),K=!0,Q=e.t3;case 113:e.prev=113,e.prev=114,Y||null==X.return||X.return();case 116:if(e.prev=116,!K){e.next=119;break}throw Q;case 119:return e.finish(116);case 120:return e.finish(113);case 121:U=!0,e.next=73;break;case 124:e.next=130;break;case 126:e.prev=126,e.t4=e.catch(71),N=!0,H=e.t4;case 130:e.prev=130,e.prev=131,U||null==q.return||q.return();case 133:if(e.prev=133,!N){e.next=136;break}throw H;case 136:return e.finish(133);case 137:return e.finish(130);case 138:T++,e.next=65;break;case 141:_=!0,e.next=37;break;case 144:e.next=150;break;case 146:e.prev=146,e.t5=e.catch(35),m=!0,f=e.t5;case 150:e.prev=150,e.prev=151,_||null==w.return||w.return();case 153:if(e.prev=153,!m){e.next=156;break}throw f;case 156:return e.finish(153);case 157:return e.finish(150);case 158:if((we=Bt.a.Solve({optimize:"time",opType:"min",constraints:i,variables:p})).feasible){e.next=162;break}return t.result=void 0,e.abrupt("return");case 162:ve=[],be=0,ye=Object.entries(we);case 164:if(!(be<ye.length)){e.next=257;break}if(ge=ye[be],Re=Object(Lt.a)(ge,2),je=Re[0],Oe=Re[1],!(Se=h.get(je))){e.next=254;break}xe=Se.method,De=Se.difficulty,Ee=Se.section_id,Le=Se.split_pan_arms,Ce=Oe,Be=p[je],Me=new Map,Fe=0,Ie=Object.entries(Be);case 176:if(!(Fe<Ie.length)){e.next=211;break}Pe=Ie[Fe],Ge=Object(Lt.a)(Pe,2),Te=Ge[0],Ae=Ge[1],We=!0,Ue=!1,Ne=void 0,e.prev=184,He=n[Symbol.iterator]();case 186:if(We=(qe=He.next()).done){e.next=194;break}if(Ve=qe.value,Te!==Ve.name){e.next=191;break}return Me.set(Ve,Ce*Ae),e.abrupt("break",194);case 191:We=!0,e.next=186;break;case 194:e.next=200;break;case 196:e.prev=196,e.t6=e.catch(184),Ue=!0,Ne=e.t6;case 200:e.prev=200,e.prev=201,We||null==He.return||He.return();case 203:if(e.prev=203,!Ue){e.next=206;break}throw Ne;case 206:return e.finish(203);case 207:return e.finish(200);case 208:Fe++,e.next=176;break;case 211:Ze=[],Ye=!0,Ke=!1,Qe=void 0,e.prev=215,Xe=_e[Symbol.iterator]();case 217:if(Ye=(Je=Xe.next()).done){e.next=239;break}if($e=Je.value,et=!0,$e===Ee){e.next=235;break}if(tt=p[t.full_method_name(De,$e,xe,Le)]){e.next=226;break}et=!1,e.next=235;break;case 226:nt=0,rt=Object.keys(Be);case 227:if(!(nt<rt.length)){e.next=235;break}if(at=rt[nt],Be[at]===tt[at]){e.next=232;break}return et=!1,e.abrupt("break",235);case 232:nt++,e.next=227;break;case 235:et&&Ze.push($e);case 236:Ye=!0,e.next=217;break;case 239:e.next=245;break;case 241:e.prev=241,e.t7=e.catch(215),Ke=!0,Qe=e.t7;case 245:e.prev=245,e.prev=246,Ye||null==Xe.return||Xe.return();case 248:if(e.prev=248,!Ke){e.next=251;break}throw Qe;case 251:return e.finish(248);case 252:return e.finish(245);case 253:ve.push(new qt(De,Ze,xe.name+(Le?" (Split Pan Arms)":""),xe.episode,xe.time,Ce,Me));case 254:be++,e.next=164;break;case 257:t.result=new Ht(Object(Et.a)(n),ve);case 258:case"end":return e.stop()}},e,null,[[14,18,22,30],[23,,25,29],[35,146,150,158],[43,47,51,59],[52,,54,58],[71,126,130,138],[78,109,113,121],[87,91,95,103],[96,,98,102],[114,,116,120],[131,,133,137],[151,,153,157],[184,196,200,208],[201,,203,207],[215,241,245,253],[246,,248,252]])})),this.initialize=Object(Pe.a)(ze.a.mark(function e(){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.load_from_local_storage();case 3:Object(y.c)(t.store_in_local_storage),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Ut.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),this.load_from_local_storage=Object(Pe.a)(ze.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("HuntOptimizerStore.wantedItems.".concat(se[tt.current_server])))){e.next=27;break}return e.next=4,at.current.promise;case 4:for(r=e.sent,a=JSON.parse(n),i=[],o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,p=d.itemTypeId,h=d.itemKindId,_=d.amount,(m=void 0!=p?r.get_by_id(p):r.get_by_id(h))&&i.push(new Nt(m,_));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,l=e.t0;case 18:e.prev=18,e.prev=19,o||null==u.return||u.return();case 21:if(e.prev=21,!s){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:t.wanted_items.replace(i);case 27:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25]])})),this.store_in_local_storage=function(){try{localStorage.setItem("HuntOptimizerStore.wantedItems.".concat(se[tt.current_server]),JSON.stringify(t.wanted_items.map(function(e){var t=e.item_type,n=e.amount;return{itemTypeId:t.id,amount:n}})))}catch(e){Ut.error(e)}},this.initialize()}return Object(p.a)(e,[{key:"huntable_item_types",get:function(){var e=Gt.current.value;return at.current.value.item_types.filter(function(t){return e.enemy_drops.get_drops_for_item_type(t.id).length})}}]),Object(p.a)(e,[{key:"full_method_name",value:function(e,t,n,r){var a="".concat(e,"\t").concat(t,"\t").concat(n.id);return r&&(a+="\tspa"),a}}]),e}(),Object(b.a)(gt.prototype,"huntable_item_types",[y.d],Object.getOwnPropertyDescriptor(gt.prototype,"huntable_item_types"),gt.prototype),Rt=Object(b.a)(gt.prototype,"wanted_items",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.k.array()}}),jt=Object(b.a)(gt.prototype,"result",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt),Zt=(n(359),Object(f.a)(At=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).state={help_visible:!1},n.add_wanted=function(e){if(e&&!Vt.wanted_items.find(function(t){return t.item_type.id===e.value})){var t=at.current.value.get_by_id(e.value);Vt.wanted_items.push(new Nt(t,1))}},n.remove_wanted=function(e){return function(){var t=Vt.wanted_items.findIndex(function(t){return t===e});-1!==t&&Vt.wanted_items.splice(t,1)}},n.table_remove_cell_renderer=function(e){var t=e.rowData;return a.a.createElement(xt.a,{type:"link",icon:"delete",onClick:n.remove_wanted(t)})},n.no_rows_renderer=function(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-no-rows"},a.a.createElement("p",null,'Add some items with the above drop down and click "Optimize" to see the result on the right.'))},n.on_help_visible_change=function(e){n.setState({helpVisible:e})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return Vt.wanted_items.slice(0,0),a.a.createElement("section",{className:"ho-WantedItemsComponent"},a.a.createElement("h3",null,"Wanted Items",a.a.createElement(St.a,{content:a.a.createElement(Yt,null),trigger:"click",visible:this.state.help_visible,onVisibleChange:this.on_help_visible_change},a.a.createElement(xt.a,{icon:"info-circle",type:"link"}))),a.a.createElement("div",{className:"ho-WantedItemsComponent-top-bar"},a.a.createElement(ut,{placeholder:"Add an item",value:void 0,style:{width:200},options:Vt.huntable_item_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_wanted}),a.a.createElement(xt.a,{onClick:Vt.optimize,style:{marginLeft:10}},"Optimize")),a.a.createElement("div",{className:"ho-WantedItemsComponent-table"},a.a.createElement(Dt.a,null,function(t){var n=t.width,r=t.height;return a.a.createElement(Dt.e,{width:n,height:r,headerHeight:30,rowHeight:30,rowCount:Vt.wanted_items.length,rowGetter:function(e){var t=e.index;return Vt.wanted_items[t]},noRowsRenderer:e.no_rows_renderer},a.a.createElement(Dt.b,{label:"Amount",dataKey:"amount",width:70,cellRenderer:function(e){var t=e.rowData;return a.a.createElement(Kt,{wantedItem:t})}}),a.a.createElement(Dt.b,{label:"Item",dataKey:"item",width:150,flexGrow:1,cellDataGetter:function(e){return e.rowData.item_type.name}}),a.a.createElement(Dt.b,{dataKey:"remove",width:30,cellRenderer:e.table_remove_cell_renderer}))})))}}]),t}(r.Component))||At);function Yt(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-help"},a.a.createElement("p",null,'Add some items with the drop down and click "Optimize" to see the optimal combination of hunt methods on the right.'),a.a.createElement("p",null,'At the moment a method is simply a quest run-through. Partial quest run-throughs are coming. View the list of methods on the "Methods" tab. Each method takes a certain amount of time, which affects the optimization result. Make sure the times are correct for you.'),a.a.createElement("p",null,"Only enemy drops are considered. Box drops are coming."),a.a.createElement("p",null,"The optimal result is calculated using linear optimization. The optimizer takes rare enemies and the fact that pan arms can be split in two into account."))}var Kt=Object(f.a)(Wt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).wanted_amount_changed=function(e){null!=e&&e>=0&&(n.props.wantedItem.amount=e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.wantedItem;return a.a.createElement(Fe.a,{min:0,max:10,value:e.amount,onChange:this.wanted_amount_changed,size:"small",style:{width:"100%"}})}}]),t}(r.Component))||Wt,Qt=(n(363),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).sort_columns=new Array,n.column_width=function(e){var t=e.index;return n.props.columns[t].width},n.cell_renderer=function(e){var t,r,i,o=e.columnIndex,s=e.rowIndex,l=e.style,u=n.props.columns[o],c=["DataTable-cell"];if(o===n.props.columns.length-1&&c.push("last-in-row"),0===s){if(t=i=u.name,u.sortable){c.push("sortable");var d=n.sort_columns[0];d&&d.column===u&&(r=d.direction===Dt.d.ASC?a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 14l5-5 5 5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})):a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 10l5 5 5-5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))}}else if(u.class_name&&c.push(u.class_name),n.props.footer&&s===1+n.props.row_count)c.push("footer-cell"),t=null==u.footer_value?"":u.footer_value,i=null==u.footer_tooltip?"":u.footer_tooltip;else{var p=n.props.record({index:s-1});t=u.cell_renderer(p),u.tooltip&&(i=u.tooltip(p))}"string"!==typeof t&&c.push("custom");var h=0===s&&u.sortable?function(){return n.header_clicked(u)}:void 0;return a.a.createElement("div",{className:c.join(" "),key:"".concat(o,", ").concat(s),style:l,title:i,onClick:h},"string"===typeof t?a.a.createElement("span",{className:"DataTable-cell-text"},t):t,r)},n.header_clicked=function(e){var t=n.sort_columns.findIndex(function(t){return t.column===e}),r=-1===t?void 0:n.sort_columns.splice(t,1)[0],a=0===t&&r&&r.direction===Dt.d.ASC?Dt.d.DESC:Dt.d.ASC;n.sort_columns.unshift({column:e,direction:a}),n.sort_columns.splice(10),n.props.sort&&n.props.sort(n.sort_columns)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"DataTable",style:{width:this.props.width,height:this.props.height}},a.a.createElement(Dt.c,{width:this.props.width,height:this.props.height,rowHeight:26,rowCount:this.props.row_count+1+(this.props.footer?1:0),fixedRowCount:1,overscanRowCount:this.props.overscan_row_count,columnWidth:this.column_width,columnCount:this.props.columns.length,fixedColumnCount:this.props.fixed_column_count,overscanColumnCount:this.props.overscan_column_count,cellRenderer:this.cell_renderer,classNameTopLeftGrid:"DataTable-header",classNameTopRightGrid:"DataTable-header",updateTigger:this.props.update_trigger}))}}]),t}(r.Component));function Xt(e){var t=e.section_id,n=e.size,r=void 0===n?28:n,i=e.title;return a.a.createElement("div",{title:i,style:{display:"inline-block",width:r,height:r,backgroundImage:"url(".concat("","/images/sectionids/").concat(de[t],".png)"),backgroundSize:r}})}n(364);var Jt,$t,en=Object(f.a)(($t=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return Vt.result.optimal_methods[t]},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;this.update_trigger;var t=Vt.result;return a.a.createElement("section",{className:"ho-OptimizationResultComponent"},a.a.createElement("h3",null,"Optimization Result"),a.a.createElement("div",{className:"ho-OptimizationResultComponent-table"},a.a.createElement(Dt.a,null,function(n){var r=n.width,i=n.height;return a.a.createElement(Qt,{width:r,height:i,row_count:t?t.optimal_methods.length:0,columns:e.columns,fixed_column_count:4,record:e.record,footer:null!=t,update_trigger:e.update_trigger})})))}},{key:"columns",get:function(){var e=Vt.result,t=e?e.optimal_methods:[],n=0,r=0,i=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n+=c.runs,r+=c.total_time}}catch(v){o=!0,s=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=[{name:"Difficulty",width:75,cell_renderer:function(e){return he[e.difficulty]},footer_value:"Totals:"},{name:"Method",width:200,cell_renderer:function(e){return e.method_name},tooltip:function(e){return e.method_name}},{name:"Ep.",width:34,cell_renderer:function(e){return ce[e.method_episode]}},{name:"Section ID",width:80,cell_renderer:function(e){return a.a.createElement("div",{className:"ho-OptimizationResultComponent-sid-col"},e.section_ids.map(function(e){return a.a.createElement(Xt,{section_id:e,key:e,size:20})}))},tooltip:function(e){return e.section_ids.map(function(e){return de[e]}).join(", ")}},{name:"Time/Run",width:80,cell_renderer:function(e){return function(e){var t=Math.floor(e),n=Math.round(60*(e-t));return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}(e.method_time)},class_name:"number"},{name:"Runs",width:60,cell_renderer:function(e){return e.runs.toFixed(1)},tooltip:function(e){return e.runs.toString()},footer_value:n.toFixed(1),footer_tooltip:n.toString(),class_name:"number"},{name:"Total Hours",width:90,cell_renderer:function(e){return e.total_time.toFixed(1)},tooltip:function(e){return e.total_time.toString()},footer_value:r.toFixed(1),footer_tooltip:r.toString(),class_name:"number"}];if(e){var p=!0,h=!1,_=void 0;try{for(var m,f=function(){var e=m.value,n=0,r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){n+=o.value.item_counts.get(e)||0}}catch(v){a=!0,i=v}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}d.push({name:e.name,width:80,cell_renderer:function(t){var n=t.item_counts.get(e);return n?n.toFixed(2):""},tooltip:function(t){var n=t.item_counts.get(e);return n?n.toString():""},class_name:"number",footer_value:n.toFixed(2),footer_tooltip:n.toString()})},w=e.wanted_items[Symbol.iterator]();!(p=(m=w.next()).done);p=!0)f()}catch(v){h=!0,_=v}finally{try{p||null==w.return||w.return()}finally{if(h)throw _}}}return d}},{key:"update_trigger",get:function(){return Vt.result}}]),t}(r.Component),Object(b.a)($t.prototype,"columns",[y.d],Object.getOwnPropertyDescriptor($t.prototype,"columns"),$t.prototype),Object(b.a)($t.prototype,"update_trigger",[y.d],Object.getOwnPropertyDescriptor($t.prototype,"update_trigger"),$t.prototype),Jt=$t))||Jt;n(365);function tn(){return a.a.createElement("section",{className:"ho-OptimizerComponent"},a.a.createElement(Zt,null),a.a.createElement(en,null))}n(366);var nn,rn,an,on,sn=n(234),ln=n(52),un=n.n(ln),cn=(n(368),Object(f.a)((an=rn=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return Ft.methods.current.value[t]},n.sort=function(e){var t=Ft.methods.current.value.slice();t.sort(function(t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=l.column,c=l.direction,d=0;if("name"===u.key)d=t.name.localeCompare(n.name);else if("episode"===u.key)d=t.episode-n.episode;else if("time"===u.key)d=t.time-n.time;else if(u.key){var p=F.by_code(u.key);p&&(d=(t.enemy_counts.get(p)||0)-(n.enemy_counts.get(p)||0))}if(0!==d)return c===Dt.d.ASC?d:-d}}catch(h){a=!0,i=h}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return 0}),Ft.methods.current.value=t},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,n=Ft.methods.current.value;return a.a.createElement("section",{className:"ho-MethodsComponent"},a.a.createElement(Dt.a,null,function(r){var i=r.width,o=r.height;return a.a.createElement(Qt,{width:i,height:o,row_count:n.length,columns:t.columns,fixed_column_count:3,record:e.record,sort:e.sort,update_trigger:Ft.methods.current.value})}))}}]),t}(r.Component),rn.columns=function(){var e=[{key:"name",name:"Method",width:250,cell_renderer:function(e){return e.name},sortable:!0},{key:"episode",name:"Ep.",width:34,cell_renderer:function(e){return ce[e.episode]},sortable:!0},{key:"time",name:"Time",width:50,cell_renderer:function(e){return a.a.createElement(dn,{method:e})},class_name:"integrated",sortable:!0}],t=!0,n=!1,r=void 0;try{for(var i,o=function(){var t=i.value;e.push({key:t.code,name:t.name,width:75,cell_renderer:function(e){var n=e.enemy_counts.get(t);return null==n?"":n.toString()},class_name:"number",sortable:!0})},s=ie[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}(),nn=an))||nn),dn=Object(f.a)(on=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).change=function(e){n.props.method.user_time=e.hour()+e.minute()/60},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.method.time,t=Math.floor(e),n=Math.round(60*(e-t));return a.a.createElement(sn.a,{className:"ho-MethodsComponent-timepicker",value:un()({hour:t,minute:n}),format:"HH:mm",size:"small",allowClear:!1,suffixIcon:a.a.createElement("span",null),onChange:this.change})}}]),t}(a.a.Component))||on,pn=Ot.a.TabPane;n(375);var hn,_n=n(232),mn=(n(377),n(164)),fn=(n(380),n(233)),wn=(n(382),n(15)),vn=(n(158),n(89));!function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(hn||(hn={}));var bn=n(78),yn=new bn.TextDecoder("ascii"),kn=new bn.TextDecoder("utf-16be"),gn=new bn.TextDecoder("utf-16le"),Rn=new bn.TextEncoder("ascii"),jn=new bn.TextEncoder("utf-16be"),On=new bn.TextEncoder("utf-16le"),Sn=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;Object(d.a)(this,e),this._position=void 0,this.little_endian=void 0,this.buffer=void 0,this.dv=void 0,this.utf16_decoder=kn,this.utf16_encoder=jn,this.buffer=t,this.dv=new DataView(t,r,a),this.endianness=n,this._position=0}return Object(p.a)(e,[{key:"offset",get:function(){return this.dv.byteOffset}},{key:"size",get:function(){return this.dv.byteLength},set:function(e){this.dv=new DataView(this.buffer,this.offset,e)}},{key:"position",get:function(){return this._position}},{key:"endianness",get:function(){return this.little_endian?hn.Little:hn.Big},set:function(e){this.little_endian=e===hn.Little,this.utf16_decoder=this.little_endian?gn:kn,this.utf16_encoder=this.little_endian?On:jn}},{key:"bytes_left",get:function(){return this.size-this.position}}]),Object(p.a)(e,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=this.size-e,this}},{key:"u8",value:function(){return this.u8_at(this._position++)}},{key:"u8_at",value:function(e){return this.dv.getUint8(e)}},{key:"u16",value:function(){var e=this.u16_at(this.position);return this._position+=2,e}},{key:"u16_at",value:function(e){return this.dv.getUint16(e,this.little_endian)}},{key:"u32",value:function(){var e=this.u32_at(this.position);return this._position+=4,e}},{key:"u32_at",value:function(e){return this.dv.getUint32(e,this.little_endian)}},{key:"i8",value:function(){return this.i8_at(this._position++)}},{key:"i8_at",value:function(e){return this.dv.getInt8(e)}},{key:"i16",value:function(){var e=this.i16_at(this.position);return this._position+=2,e}},{key:"i16_at",value:function(e){return this.dv.getInt16(e,this.little_endian)}},{key:"i32",value:function(){var e=this.i32_at(this.position);return this._position+=4,e}},{key:"i32_at",value:function(e){return this.dv.getInt32(e,this.little_endian)}},{key:"f32",value:function(){var e=this.f32_at(this.position);return this._position+=4,e}},{key:"f32_at",value:function(e){return this.dv.getFloat32(e,this.little_endian)}},{key:"u8_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint8(this._position++));return t}},{key:"u16_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint16(this.position,this.little_endian)),this._position+=2;return t}},{key:"u32_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint32(this.position,this.little_endian)),this._position+=4;return t}},{key:"vec3",value:function(){return new k(this.f32(),this.f32(),this.f32())}},{key:"take",value:function(t){var n=this.offset+this.position,r=new e(this.buffer,this.endianness,n,t);return this._position+=t,r}},{key:"string_ascii",value:function(e,t,n){var r=t?this.index_of_u8(0,e)-this.position:e,a=new DataView(this.buffer,this.offset+this.position,r),i=yn.decode(a);return this._position+=n?e:Math.min(r+1,e),i}},{key:"string_utf16",value:function(e,t,n){var r=t?this.index_of_u16(0,e)-this.position:2*Math.floor(e/2),a=new DataView(this.buffer,this.offset+this.position,r),i=this.utf16_decoder.decode(a);return this._position+=n?e:Math.min(r+2,e),i}},{key:"array_buffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size-this.position,t=this.buffer.slice(this.offset+this.position,this.offset+this.position+e);return this._position+=e,t}},{key:"copy_to_uint8_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size-this.position;return e.set(new Uint8Array(this.buffer,this.offset+this.position,t)),this._position+=t,this}},{key:"index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this.dv.getUint8(r)===e)return r;return this.position+t}},{key:"index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this.dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}}]),e}();function xn(e,t){e.seek_end(32);var n=e.u32(),r=e.u32();e.seek(8);var a=e.u32();return e.seek_start(n),{data_offset:a,index:t?function(e,t){var n=e.u16_array(t),r=[],a=0,i=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;a+=4*c,e.seek_start(a-4);var d=e.u32(),p=e.u32();r.push({offset:p,size:d})}}catch(h){o=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r}(e,r):[]}}function Dn(e){var t=xn(e,!1).data_offset;e.seek_start(t);var n=e.u32();e.seek_start(n);for(var r={meshes:[]};e.bytes_left;){var a=e.position,i=e.u32();if(0===i)break;var o={vertices:[],triangles:[]};r.meshes.push(o),e.seek_start(i);var s=e.u32(),l=e.u32(),u=e.u32(),c=e.u32();e.seek_start(l);for(var d=0;d<s;d++){var p=e.f32(),h=e.f32(),_=e.f32();o.vertices.push(new k(p,h,_))}e.seek_start(c);for(var m=0;m<u;m++){var f=e.u16(),w=e.u16(),v=e.u16(),b=e.u16(),y=e.f32(),g=e.f32(),R=e.f32();e.seek(16),o.triangles.push({indices:[f,w,v],flags:b,normal:new k(y,g,R)})}e.seek_start(a+24)}return r}var En,Ln=n(237),Cn=l.a.get("data_formats/parsing/ninja/njcm");function Bn(e,t){var n=e.u32(),r=e.u32(),a=new k(e.f32(),e.f32(),e.f32()),i=e.f32(),o=[],s=[];if(n){e.seek_start(n);var l=!0,u=!1,c=void 0;try{for(var d,p=Mn(e,t,!0)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value;if(h.type===En.Vertex){var _=!0,m=!1,f=void 0;try{for(var w,v=h.vertices[Symbol.iterator]();!(_=(w=v.next()).done);_=!0){var b=w.value;o[b.index]={position:b.position,normal:b.normal,bone_weight:b.bone_weight,bone_weight_status:b.bone_weight_status,calc_continue:b.calc_continue}}}catch(x){m=!0,f=x}finally{try{_||null==v.return||v.return()}finally{if(m)throw f}}}}}catch(x){u=!0,c=x}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}if(r){e.seek_start(r);var y=!0,g=!1,R=void 0;try{for(var j,O=Mn(e,t,!1)[Symbol.iterator]();!(y=(j=O.next()).done);y=!0){var S=j.value;S.type===En.Strip&&s.push.apply(s,Object(Et.a)(S.triangle_strips))}}catch(x){g=!0,R=x}finally{try{y||null==O.return||O.return()}finally{if(g)throw R}}}return{type:"njcm",vertices:o,meshes:s,collision_sphere_center:a,collision_sphere_radius:i}}function Mn(e,t,n){for(var r=[],a=!0;a;){var i=e.u8(),o=e.u8(),s=e.position,l=0;if(0===i)r.push({type:En.Null,type_id:i});else if(1<=i&&i<=3)r.push({type:En.Bits,type_id:i});else if(4===i){var u=o,c=e.position;r.push({type:En.CachePolygonList,type_id:i,cache_index:u,offset:c}),t[u]=c,a=!1}else if(5===i){var d=o,p=t[d];null!=p&&(e.seek_start(p),r.push.apply(r,Object(Et.a)(Mn(e,t,n)))),r.push({type:En.DrawPolygonList,type_id:i,cache_index:d})}else 8<=i&&i<=9?(l=2,r.push({type:En.Tiny,type_id:i})):17<=i&&i<=31?(l=2+2*e.u16(),r.push({type:En.Material,type_id:i})):32<=i&&i<=50?(l=2+4*e.u16(),r.push({type:En.Vertex,type_id:i,vertices:Fn(e,i,o)})):56<=i&&i<=58?(l=2+2*e.u16(),r.push({type:En.Volume,type_id:i})):64<=i&&i<=75?(l=2+2*e.u16(),r.push({type:En.Strip,type_id:i,triangle_strips:In(e,i,o)})):255===i?(l=n?2:0,r.push({type:En.End,type_id:i}),a=!1):(l=2+2*e.u16(),r.push({type:En.Unknown,type_id:i}),Cn.warn("Unknown chunk type ".concat(i," at offset ").concat(s,".")));e.seek_start(s+l)}return r}function Fn(e,t,n){if(t<32||t>50)return Cn.warn("Unknown vertex chunk type ".concat(t,".")),[];for(var r=3&n,a=0!==(128&n),i=e.u16(),o=e.u16(),s=[],l=0;l<o;++l){var u={index:i+l,position:new k(e.f32(),e.f32(),e.f32()),bone_weight:1,bone_weight_status:r,calc_continue:a};if(32===t)e.seek(4);else if(33===t)e.seek(4),u.normal=new k(e.f32(),e.f32(),e.f32()),e.seek(4);else if(35<=t&&t<=40)37===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4);else if(41<=t&&t<=47)u.normal=new k(e.f32(),e.f32(),e.f32()),t>=42&&(44===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4));else if(48<=t&&t<=50){var c=e.u32();u.normal=new k((c>>20&1023)/1023,(c>>10&1023)/1023,(1023&c)/1023),t>=49&&e.seek(4)}s.push(u)}return s}function In(e,t,n){var r,a={ignore_light:0!==(1&n),ignore_specular:0!==(2&n),ignore_ambient:0!==(4&n),use_alpha:0!==(8&n),double_side:0!==(16&n),flat_shading:0!==(32&n),environment_mapping:0!==(64&n)},i=e.u16(),o=i>>>14,s=16383&i;switch(t){case 64:r=[!1,!1,!1,!1];break;case 65:case 66:r=[!0,!1,!1,!1];break;case 67:r=[!1,!1,!0,!1];break;case 68:case 69:r=[!0,!1,!0,!1];break;case 70:r=[!1,!0,!1,!1];break;case 71:case 72:r=[!0,!0,!1,!1];break;case 73:r=[!1,!1,!1,!1];break;case 74:case 75:r=[!0,!1,!1,!0];break;default:throw new Error("Unexpected chunk type ID: ".concat(t,"."))}for(var l=r,u=Object(Lt.a)(l,4),c=u[0],d=u[1],p=u[2],h=u[3],_=[],m=0;m<s;++m){for(var f=e.i16(),w=f<1,v=Math.abs(f),b=[],y=0;y<v;++y){var g={index:e.u16()};b.push(g),c&&e.seek(4),d&&e.seek(4),p&&(g.normal=new k(e.u16(),e.u16(),e.u16())),h&&e.seek(8),y>=2&&e.seek(2*o)}_.push(Object(Ln.a)({},a,{clockwise_winding:w,vertices:b}))}return _}!function(e){e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Bits=2]="Bits",e[e.CachePolygonList=3]="CachePolygonList",e[e.DrawPolygonList=4]="DrawPolygonList",e[e.Tiny=5]="Tiny",e[e.Material=6]="Material",e[e.Vertex=7]="Vertex",e[e.Volume=8]="Volume",e[e.Strip=9]="Strip",e[e.End=10]="End"}(En||(En={}));var zn=l.a.get("data_formats/parsing/ninja/xj");function Pn(e){e.seek(4);var t,n,r=e.u32(),a=e.u32(),i=e.u32(),o=e.u32(),s=e.u32(),l=e.u32(),u={type:"xj",vertices:[],meshes:[],collision_sphere_position:e.vec3(),collision_sphere_radius:e.f32()};if(a>=1){a>1&&zn.warn("Vertex info count of ".concat(a," was larger than expected.")),e.seek_start(r),e.seek(4);for(var c=e.u32(),d=e.u32(),p=e.u32(),h=0;h<p;++h){e.seek_start(c+h*d);var _=e.vec3(),m=void 0;28!==d&&32!==d&&36!==d||(m=e.vec3()),u.vertices.push({position:_,normal:m,bone_weight:1,bone_weight_status:0,calc_continue:!0})}}i&&(t=u.meshes).push.apply(t,Object(Et.a)(Gn(e,i,o)));s&&(n=u.meshes).push.apply(n,Object(Et.a)(Gn(e,s,l)));return u}function Gn(e,t,n){for(var r=[],a=0;a<n;++a){e.seek_start(t+20*a),e.seek(8);var i=e.u32(),o=e.u32();e.seek_start(i);var s=e.u16_array(o);r.push({indices:s})}return r}function Tn(e){for(var t=[];e.bytes_left;){var n=e.u32(),r=e.u32();if(r>e.bytes_left)break;t.push({type:n,data:e.take(r)})}return t}var An=2*Math.PI/65535,Wn=1296255566;var Un=function(){function e(t,n,r,a,i,o){Object(d.a)(this,e),this.evaluation_flags=void 0,this.model=void 0,this.position=void 0,this.rotation=void 0,this.scale=void 0,this.children=void 0,this.bone_cache=new Map,this._bone_count=-1,this.evaluation_flags=t,this.model=n,this.position=r,this.rotation=a,this.scale=i,this.children=o}return Object(p.a)(e,[{key:"bone_count",value:function(){if(-1===this._bone_count){var e=[0];this.get_bone_internal(this,1/0,e),this._bone_count=e[0]}return this._bone_count}},{key:"get_bone",value:function(e){var t=this.bone_cache.get(e);return void 0===t&&(t=this.get_bone_internal(this,e,[0]),this.bone_cache.set(e,t||null)),t||void 0}},{key:"get_bone_internal",value:function(e,t,n){if(!e.evaluation_flags.skip){var r=n[0]++;if(this.bone_cache.set(r,e),r===t)return e}if(!e.evaluation_flags.break_child_trace){var a=!0,i=!1,o=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=this.get_bone_internal(u,t,n);if(c)return c}}catch(d){i=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}}}}]),e}();function Nn(e){return qn(e,Bn,[])}function Hn(e){return qn(e,Pn,void 0)}function qn(e,t,n){return Tn(e).filter(function(e){return e.type===Wn}).flatMap(function(e){return function e(t,n,r){var a=t.u32();var i=0!==(1&a);var o=0!==(2&a);var s=0!==(4&a);var l=0!==(8&a);var u=0!==(16&a);var c=0!==(32&a);var d=0!==(64&a);var p=0!==(128&a);var h=t.u32();var _=t.f32();var m=t.f32();var f=t.f32();var w=t.i32()*An;var v=t.i32()*An;var b=t.i32()*An;var y=t.f32();var g=t.f32();var R=t.f32();var j=t.u32();var O=t.u32();var S;var x;var D;h&&(t.seek_start(h),S=n(t,r));j?(t.seek_start(j),x=e(t,n,r)):x=[];O?(t.seek_start(O),D=e(t,n,r)):D=[];var E=new Un({no_translate:i,no_rotate:o,no_scale:s,hidden:l,break_child_trace:u,zxy_rotation_order:c,skip:d,shape_skip:p},S,new k(_,m,f),new k(w,v,b),new k(y,g,R),x);return[E].concat(Object(Et.a)(D))}(e.data,t,n)})}function Vn(e,t,n){for(var r=[],a=0;a<n;a++){e.seek_start(t+16*a);var i=e.u32();e.seek(8),4&e.u32()&&(i=e.seek_start(i).u32()),e.seek_start(i+4);var o=e.u32();o>0&&(e.seek_start(o),r.push(Pn(e)))}return r}var Zn=n(7);function Yn(e){return new Zn.Vector3(e.x,e.y,e.z)}var Kn=new Zn.Vector3(0,1,0);function Qn(e,t,n,r,a){var i=n.length/3,o=(new Zn.Matrix3).getNormalMatrix(t),s=!0,l=!1,u=void 0;try{for(var c,d=e.vertices[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value,h=p.position,_=p.normal,m=Yn(h).applyMatrix4(t);n.push(m.x,m.y,m.z);var f=(_?Yn(_):Kn).applyMatrix3(o);r.push(f.x,f.y,f.z)}}catch(I){l=!0,u=I}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var w=!0,v=!1,b=void 0;try{for(var y,k=e.meshes[Symbol.iterator]();!(w=(y=k.next()).done);w=!0)for(var g=y.value,R=!0,j=2;j<g.indices.length;++j){var O=i+g.indices[j-2],S=i+g.indices[j-1],x=i+g.indices[j],D=new Zn.Vector3(n[3*O],n[3*O+1],n[3*O+2]),E=new Zn.Vector3(n[3*S],n[3*S+1],n[3*S+2]),L=new Zn.Vector3(n[3*x],n[3*x+1],n[3*x+2]),C=new Zn.Vector3(r[3*O],r[3*O+1],r[3*O+2]),B=new Zn.Vector3(r[3*O],r[3*O+1],r[3*O+2]),M=new Zn.Vector3(r[3*O],r[3*O+1],r[3*O+2]),F=E.clone().sub(D).cross(L.clone().sub(D));R&&F.negate(),(F.dot(C)<0?1:0)+(F.dot(B)<0?1:0)+(F.dot(M)<0?1:0)>=2&&(R=!R),R?(a.push(S),a.push(O),a.push(x)):(a.push(O),a.push(S),a.push(x)),R=!R}}catch(I){v=!0,b=I}finally{try{w||null==k.return||k.return()}finally{if(v)throw b}}}var Xn=[new Zn.MeshBasicMaterial({color:8437968,transparent:!0,opacity:.25}),new Zn.MeshLambertMaterial({color:5296336,side:Zn.DoubleSide}),new Zn.MeshLambertMaterial({color:5288048,side:Zn.DoubleSide}),new Zn.MeshLambertMaterial({color:6307968,side:Zn.DoubleSide})],Jn=[new Zn.MeshBasicMaterial({color:9490656,wireframe:!0,transparent:!0,opacity:.3}),new Zn.MeshBasicMaterial({color:6353136,wireframe:!0}),new Zn.MeshBasicMaterial({color:6340736,wireframe:!0}),new Zn.MeshBasicMaterial({color:7360656,wireframe:!0})];function $n(e){var t=new Zn.Group,n=!0,r=!1,a=void 0;try{for(var i,o=e.meshes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=new Zn.Geometry,u=!0,c=!1,d=void 0;try{for(var p,h=s.vertices[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value,m=_.x,f=_.y,w=_.z;l.vertices.push(new Zn.Vector3(m,f,w))}}catch(L){c=!0,d=L}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}var v=!0,b=!1,y=void 0;try{for(var k,g=s.triangles[Symbol.iterator]();!(v=(k=g.next()).done);v=!0){var R=k.value,j=R.indices,O=R.flags,S=R.normal,x=64&O?3:16&O?2:1&O?1:0;l.faces.push(new Zn.Face3(j[0],j[1],j[2],new Zn.Vector3(S.x,S.y,S.z),void 0,x))}}catch(L){b=!0,y=L}finally{try{v||null==g.return||g.return()}finally{if(b)throw y}}var D=new Zn.Mesh(l,Xn);D.renderOrder=1,t.add(D);var E=new Zn.Mesh(l,Jn);E.renderOrder=2,t.add(E)}}catch(L){r=!0,a=L}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t}function er(e,t,n){return cr(e,t,n,"collision")}function tr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(Pe.a)(ze.a.mark(function e(t){var n,r;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=dr(t),e.next=3,_r(n);case 3:return r=e.sent,e.abrupt("return",{url:n,data:r});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rr(e){return ar.apply(this,arguments)}function ar(){return(ar=Object(Pe.a)(ze.a.mark(function e(t){var n,r;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=pr(t),e.next=3,_r(n);case 3:return r=e.sent,e.abrupt("return",{url:n,data:r});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ir(e,t,n){return or.apply(this,arguments)}function or(){return(or=Object(Pe.a)(ze.a.mark(function e(t,n,r){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(hr(t,n,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sr(e){return lr.apply(this,arguments)}function lr(){return(lr=Object(Pe.a)(ze.a.mark(function e(t){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r("/player/animation/animation_".concat(t.toString().padStart(3,"0"),".njm"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ur=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]];function cr(e,t,n,r){try{return _r(function(e,t,n){var r=ur[e-1];if(0<=t&&t<r.length){var a=Object(Lt.a)(r[t],2),i=a[0],o=a[1];if(0<=n&&n<o){var s;if(1===o)s="";else for(s=String(n);s.length<2;)s="0"+s;return"/maps/map_".concat(i).concat(s)}throw new Error("Unknown variant ".concat(n," of area ").concat(t," in episode ").concat(e,"."))}throw new Error("Unknown episode ".concat(e," area ").concat(t,"."))}(e,t,n)+("render"===r?"n.rel":"c.rel"))}catch(a){return Promise.reject(a)}}function dr(e){switch(e){case F.Dubswitch:return"/npcs/".concat(e.code,".xj");case F.Hildebear2:return dr(F.Hildebear);case F.Hildeblue2:return dr(F.Hildeblue);case F.RagRappy2:return dr(F.RagRappy);case F.Monest2:return dr(F.Monest);case F.PoisonLily2:return dr(F.PoisonLily);case F.NarLily2:return dr(F.NarLily);case F.GrassAssassin2:return dr(F.GrassAssassin);case F.Dimenian2:return dr(F.Dimenian);case F.LaDimenian2:return dr(F.LaDimenian);case F.SoDimenian2:return dr(F.SoDimenian);case F.DarkBelra2:return dr(F.DarkBelra);case F.SavageWolf2:return dr(F.SavageWolf);case F.BarbarousWolf2:return dr(F.BarbarousWolf);case F.PanArms2:return dr(F.PanArms);case F.Dubchic2:return dr(F.Dubchic);case F.Gilchic2:return dr(F.Gilchic);case F.Garanz2:return dr(F.Garanz);case F.Dubswitch2:return dr(F.Dubswitch);case F.Delsaber2:return dr(F.Delsaber);case F.ChaosSorcerer2:return dr(F.ChaosSorcerer);default:return"/npcs/".concat(e.code,".nj")}}function pr(e){switch(e){case oe.EasterEgg:case oe.ChristmasTree:case oe.ChristmasWreath:case oe.TwentyFirstCentury:case oe.Sonic:case oe.WelcomeBoard:case oe.FloatingJelifish:case oe.RuinsSeal:case oe.Dolphin:case oe.Cacti:case oe.BigBrownRock:case oe.PoisonPlant:case oe.BigBlackRocks:case oe.FallingRock:case oe.DesertFixedTypeBoxBreakableCrystals:case oe.BeeHive:return"/objects/".concat(e.pso_id,".nj");default:return"/objects/".concat(e.pso_id,".xj")}}function hr(e,t,n){return"/player/".concat(e).concat(t).concat(null==n?"":n,".nj")}function _r(e){return fetch(""+e).then(function(e){return e.arrayBuffer()})}function mr(e,t,n,r){var a,i=new xe(e,t,n,[]),o=Array(r).fill(null).map(function(e,t){return new De(t,i)});return(a=i.area_variants).splice.apply(a,[0,0].concat(Object(Et.a)(o))),i}var fr=new Map,wr=new Map,vr=new Map,br=new(function(){function e(){Object(d.a)(this,e),this.areas=void 0,this.areas=[];var t=0;this.areas[1]=[mr(0,"Pioneer II",t++,1),mr(1,"Forest 1",t++,1),mr(2,"Forest 2",t++,1),mr(11,"Under the Dome",t++,1),mr(3,"Cave 1",t++,6),mr(4,"Cave 2",t++,5),mr(5,"Cave 3",t++,6),mr(12,"Underground Channel",t++,1),mr(6,"Mine 1",t++,6),mr(7,"Mine 2",t++,6),mr(13,"Monitor Room",t++,1),mr(8,"Ruins 1",t++,5),mr(9,"Ruins 2",t++,5),mr(10,"Ruins 3",t++,5),mr(14,"Dark Falz",t++,1),mr(15,"BA Ruins",t++,3),mr(16,"BA Spaceship",t++,3),mr(17,"Lobby",t++,15)],t=0,this.areas[2]=[mr(0,"Lab",t++,1),mr(1,"VR Temple Alpha",t++,3),mr(2,"VR Temple Beta",t++,3),mr(14,"VR Temple Final",t++,1),mr(3,"VR Spaceship Alpha",t++,3),mr(4,"VR Spaceship Beta",t++,3),mr(15,"VR Spaceship Final",t++,1),mr(5,"Central Control Area",t++,1),mr(6,"Jungle Area East",t++,1),mr(7,"Jungle Area North",t++,1),mr(8,"Mountain Area",t++,3),mr(9,"Seaside Area",t++,1),mr(12,"Cliffs of Gal Da Val",t++,1),mr(10,"Seabed Upper Levels",t++,3),mr(11,"Seabed Lower Levels",t++,3),mr(13,"Test Subject Disposal Area",t++,1),mr(16,"Seaside Area at Night",t++,1),mr(17,"Control Tower",t++,5)],t=0,this.areas[4]=[mr(0,"Pioneer II (Ep. IV)",t++,1),mr(1,"Crater Route 1",t++,1),mr(2,"Crater Route 2",t++,1),mr(3,"Crater Route 3",t++,1),mr(4,"Crater Route 4",t++,1),mr(5,"Crater Interior",t++,1),mr(6,"Subterranean Desert 1",t++,3),mr(7,"Subterranean Desert 2",t++,3),mr(8,"Subterranean Desert 3",t++,3),mr(9,"Meteor Impact Site",t++,1)]}return Object(p.a)(e,[{key:"get_variant",value:function(e,t,n){if(1!==e&&2!==e&&4!==e)throw new Error("Expected episode to be 1, 2 or 4, got ".concat(e,"."));var r=this.areas[e].find(function(e){return e.id===t});if(!r)throw new Error("Area id ".concat(t," for episode ").concat(e," is invalid."));var a=r.area_variants[n];if(!a)throw new Error("Area variant id ".concat(n," for area ").concat(t," of episode ").concat(e," is invalid."));return a}},{key:"get_area_sections",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t,n,r){var a,i;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"-").concat(n,"-").concat(r),(i=fr.get(a))||(this.load_area_sections_and_render_geometry(t,n,r),i=fr.get(a)),e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get_area_render_geometry",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t,n,r){var a,i;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"-").concat(n,"-").concat(r),(i=wr.get(a))||(this.load_area_sections_and_render_geometry(t,n,r),i=wr.get(a)),e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get_area_collision_geometry",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t,n,r){var a,i;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=vr.get("".concat(t,"-").concat(n,"-").concat(r)))){e.next=5;break}return e.abrupt("return",a);case 5:return i=er(t,n,r).then(function(e){return $n(Dn(new Sn(e,hn.Little)))}),vr.set("".concat(n,"-").concat(r),i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"load_area_sections_and_render_geometry",value:function(e,t,n){var r=function(e,t,n){return cr(e,t,n,"render")}(e,t,n).then(function(e){return function(e){var t=[],n=new Zn.Group,r=!0,a=!1,i=void 0;try{for(var o,s=e.sections[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=[],c=[],d=[],p=!0,h=!1,_=void 0;try{for(var m,f=l.models[Symbol.iterator]();!(p=(m=f.next()).done);p=!0)Qn(m.value,new Zn.Matrix4,u,c,d)}catch(y){h=!0,_=y}finally{try{p||null==f.return||f.return()}finally{if(h)throw _}}var w=new Zn.BufferGeometry;w.addAttribute("position",new Zn.Float32BufferAttribute(u,3)),w.addAttribute("normal",new Zn.Float32BufferAttribute(c,3)),w.setIndex(new Zn.Uint16BufferAttribute(d,1));var v=new Zn.Mesh(w,new Zn.MeshLambertMaterial({color:4500223,transparent:!0,opacity:.75,side:Zn.DoubleSide}));v.position.set(l.position.x,l.position.y,l.position.z),v.rotation.set(l.rotation.x,l.rotation.y,l.rotation.z),n.add(v);var b=new ge(l.id,l.position,l.rotation.y);v.userData.section=b,t.push(b)}}catch(y){a=!0,i=y}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return[t,n]}(function(e){var t=[];e.seek_end(16);var n=xn(e,!1).data_offset;e.seek_start(n),e.seek(8);var r=e.u32();e.seek(4);for(var a=e.u32(),i=0;i<r;i++){e.seek_start(a+52*i);var o=e.i32(),s=e.vec3(),l=new k(e.u32()*An,e.u32()*An,e.u32()*An);e.seek(4);var u=e.u32();e.seek(4);var c=e.u32(),d=Vn(e,u,c);t.push({id:o,position:s,rotation:l,models:d})}return{sections:t}}(new Sn(e,hn.Little)))});fr.set("".concat(e,"-").concat(t,"-").concat(n),r.then(function(e){return Object(Lt.a)(e,1)[0]})),wr.set("".concat(e,"-").concat(t,"-").concat(n),r.then(function(e){return Object(Lt.a)(e,2)[1]}))}}]),e}()),yr=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.size;if(Object(d.a)(this,e),this._offset=void 0,this._size=void 0,this._position=void 0,this.little_endian=void 0,this.buffer=void 0,this.utf16_decoder=kn,this.utf16_encoder=jn,r<0||r>t.size)throw new Error("Offset ".concat(r," is out of bounds."));if(a<0||r+a>t.size)throw new Error("Size ".concat(a," is out of bounds."));this.buffer=t,this.endianness=n,this._offset=r,this._size=a,this._position=0}return Object(p.a)(e,[{key:"offset",get:function(){return this._offset}},{key:"size",get:function(){return this._size}},{key:"position",get:function(){return this._position}},{key:"endianness",get:function(){return this.little_endian?hn.Little:hn.Big},set:function(e){this.little_endian=e===hn.Little,this.utf16_decoder=this.little_endian?gn:kn,this.utf16_encoder=this.little_endian?On:jn}},{key:"bytes_left",get:function(){return this.size-this.position}},{key:"dv",get:function(){return this.buffer.view}}]),Object(p.a)(e,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this._position=this.size-e,this}},{key:"u8",value:function(){return this.u8_at(this._position++)}},{key:"u8_at",value:function(e){return this.check_offset(e,1),this.dv.getUint8(this.offset+e)}},{key:"u16",value:function(){var e=this.u16_at(this.position);return this._position+=2,e}},{key:"u16_at",value:function(e){return this.check_offset(e,2),this.dv.getUint16(this.offset+e,this.little_endian)}},{key:"u32",value:function(){var e=this.u32_at(this.position);return this._position+=4,e}},{key:"u32_at",value:function(e){return this.check_offset(e,4),this.dv.getUint32(this.offset+e,this.little_endian)}},{key:"i8",value:function(){return this.i8_at(this._position++)}},{key:"i8_at",value:function(e){return this.check_offset(e,1),this.dv.getInt8(this.offset+e)}},{key:"i16",value:function(){var e=this.i16_at(this.position);return this._position+=2,e}},{key:"i16_at",value:function(e){return this.check_offset(e,2),this.dv.getInt16(this.offset+e,this.little_endian)}},{key:"i32",value:function(){var e=this.i32_at(this.position);return this._position+=4,e}},{key:"i32_at",value:function(e){return this.check_offset(e,4),this.dv.getInt32(this.offset+e,this.little_endian)}},{key:"f32",value:function(){var e=this.f32_at(this.position);return this._position+=4,e}},{key:"f32_at",value:function(e){return this.check_offset(e,4),this.dv.getFloat32(this.offset+e,this.little_endian)}},{key:"u8_array",value:function(e){this.check_size("n",e,e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint8(this.offset+this._position++));return t}},{key:"u16_array",value:function(e){this.check_size("n",e,2*e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint16(this.offset+this.position,this.little_endian)),this._position+=2;return t}},{key:"u32_array",value:function(e){this.check_size("n",e,4*e);for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint32(this.offset+this.position,this.little_endian)),this._position+=4;return t}},{key:"vec3",value:function(){return new k(this.f32(),this.f32(),this.f32())}},{key:"take",value:function(t){this.check_size("size",t,t);var n=this.offset+this.position,r=new e(this.buffer,this.endianness,n,t);return this._position+=t,r}},{key:"string_ascii",value:function(e,t,n){this.check_size("max_byte_length",e,e);var r=t?this.index_of_u8(0,e)-this.position:e,a=this.buffer.sub_view(this.offset+this.position,r),i=yn.decode(a);return this._position+=n?e:Math.min(r+1,e),i}},{key:"string_utf16",value:function(e,t,n){this.check_size("max_byte_length",e,e);var r=t?this.index_of_u16(0,e)-this.position:2*Math.floor(e/2),a=this.buffer.sub_view(this.offset+this.position,r),i=this.utf16_decoder.decode(a);return this._position+=n?e:Math.min(r+2,e),i}},{key:"array_buffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size-this.position;this.check_size("size",e,e);var t=this.buffer.backing_buffer.slice(this.offset+this.position,this.offset+this.position+e);return this._position+=e,t}},{key:"copy_to_uint8_array",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size-this.position;return this.check_size("size",t,t),e.set(new Uint8Array(this.buffer.backing_buffer,this.offset+this.position,t)),this._position+=t,this}},{key:"check_size",value:function(e,t,n){if(n<0||n>this.size-this.position)throw new Error("".concat(e," ").concat(t," is out of bounds."))}},{key:"check_offset",value:function(e,t){if(e<0||e+t>this.size)throw new Error("Offset ".concat(e," is out of bounds."))}},{key:"index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this.dv.getUint8(r)===e)return r;return this.position+t}},{key:"index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this.dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}}]),e}(),kr=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"write_u8",value:function(e){return this.ensure_size(1),this.dv.setUint8(this._position++,e),this}},{key:"write_u16",value:function(e){return this.ensure_size(2),this.dv.setUint16(this.position,e,this.little_endian),this._position+=2,this}},{key:"write_u32",value:function(e){return this.ensure_size(4),this.dv.setUint32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_i32",value:function(e){return this.ensure_size(4),this.dv.setInt32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_f32",value:function(e){return this.ensure_size(4),this.dv.setFloat32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_u8_array",value:function(e){return this.ensure_size(e.length),new Uint8Array(this.buffer.backing_buffer,this.offset+this.position).set(new Uint8Array(e)),this._position+=e.length,this}},{key:"write_cursor",value:function(e){var t=e.size-e.position;return this.ensure_size(t),e.copy_to_uint8_array(new Uint8Array(this.buffer.backing_buffer,this.offset+this.position,t),t),this._position+=t,this}},{key:"write_string_ascii",value:function(e,t){this.ensure_size(t);var n=0,r=!0,a=!1,i=void 0;try{for(var o,s=Rn.encode(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n<t&&(this.write_u8(l),++n)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(;n<t;)this.write_u8(0),++n;return this}},{key:"ensure_size",value:function(e){var t=this.position+e-this._size;t>0&&(this._size+=t,this.buffer.size<this.offset+this._size&&(this.buffer.size=this.offset+this._size))}},{key:"size",get:function(){return this._size},set:function(e){e>this._size?this.ensure_size(e-this._size):this._size=e}}]),t}(yr),gr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192;Object(d.a)(this,e),this._size=0,this._buffer=void 0,this._data_view=void 0,this._buffer=new ArrayBuffer(t),this._data_view=new DataView(this._buffer)}return Object(p.a)(e,[{key:"size",get:function(){return this._size},set:function(e){if(e<0)throw new Error("Size should be non-negative.");this.ensure_capacity(e),this._size=e}},{key:"capacity",get:function(){return this._buffer.byteLength}},{key:"backing_buffer",get:function(){return this._buffer}},{key:"view",get:function(){return this._data_view}}]),Object(p.a)(e,[{key:"sub_view",value:function(e,t){return new DataView(this._buffer,e,t)}},{key:"ensure_capacity",value:function(e){if(e>this.capacity){var t=this.capacity||e;do{t*=2}while(t<e);var n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(this._buffer,0,this.size)),this._buffer=n,this._data_view=new DataView(this._buffer)}}}]),e}();function Rr(e){var t=new xr(e),n=new Dr;if(t.src.size<=3)for(;t.src.bytes_left;)t.set_bit(1),t.copy_literal();else{for(n.put(n.hash(t.src),0),t.src.seek(1),n.put(n.hash(t.src),1),t.src.seek(-1),t.set_bit(1),t.copy_literal(),t.set_bit(1),t.copy_literal();t.src.bytes_left>1;){var r=t.find_longest_match(n,!1),a=Object(Lt.a)(r,2),i=a[0],o=a[1];if(o>0){t.src.seek(1);var s=t.find_longest_match(n,!0),l=Object(Lt.a)(s,2),u=l[0],c=l[1];if(t.src.seek(-1),c>o){var d=!0;if(o>=2&&o<=5&&u<i&&i>=-256&&u<-256&&c-o<3&&(d=!1),d){t.set_bit(1),t.copy_literal();continue}}if(o>=2&&o<=5&&i>=-256){t.set_bit(0),t.set_bit(0),t.set_bit(o-2&2),t.set_bit(o-2&1),t.write_literal(255&i),t.add_intermediates(n,o);continue}if(o>=3&&o<=9){t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3|o-2&7),t.write_literal(i>>5),t.add_intermediates(n,o);continue}if(o>9){o>256&&(o=256),t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3),t.write_literal(i>>5),t.write_literal(o-1),t.add_intermediates(n,o);continue}}t.set_bit(1),t.copy_literal()}t.src.bytes_left&&(t.set_bit(1),t.copy_literal())}return t.write_eof(),t.dst.seek_start(0)}var jr=8192,Or=jr-1,Sr=256,xr=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.flag_offset=void 0,this.src=t,this.dst=new kr(new gr(t.size),t.endianness),this.flags=0,this.flag_bits_left=0,this.flag_offset=0}return Object(p.a)(e,[{key:"set_bit",value:function(e){if(!this.flag_bits_left--){var t=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(t).write_u8(0),this.flag_offset=t,this.flag_bits_left=7}this.flags>>>=1,e&&(this.flags|=128)}},{key:"copy_literal",value:function(){this.dst.write_u8(this.src.u8())}},{key:"write_literal",value:function(e){this.dst.write_u8(e)}},{key:"write_final_flags",value:function(){this.flags>>>=this.flag_bits_left;var e=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e)}},{key:"write_eof",value:function(){this.set_bit(0),this.set_bit(1),this.write_final_flags(),this.write_literal(0),this.write_literal(0)}},{key:"match_length",value:function(e){for(var t=0,n=this.src.position,r=this.src.size;n<r&&this.src.u8_at(n)===this.src.u8_at(e);)++t,++n,++e;return t}},{key:"find_longest_match",value:function(e,t){if(!this.src.bytes_left)return[0,0];var n=e.hash(this.src),r=e.get(n);if(null===r)return t||e.put(n,this.src.position),[0,0];if(this.src.position-r>jr)return e.hash_to_offset[n]=null,t||e.put(n,this.src.position),[0,0];for(var a=0,i=0;null!=r;){var o=this.match_length(r);(o>a||o>=256)&&(a=o,i=r);var s=e.prev(r);null!==s&&this.src.position-s>jr&&(e.set_prev(r,null),s=null),r=s}return t||e.put(n,this.src.position),[a>0?i-this.src.position:0,a]}},{key:"add_intermediates",value:function(e,t){this.src.seek(1);for(var n=1;n<t;++n){var r=e.hash(this.src);e.put(r,this.src.position),this.src.seek(1)}}}]),e}(),Dr=function(){function e(){Object(d.a)(this,e),this.hash_to_offset=new Array(Sr).fill(null),this.masked_offset_to_prev=new Array(jr).fill(null)}return Object(p.a)(e,[{key:"hash",value:function(e){var t=e.u8();return e.bytes_left&&(t^=e.u8(),e.seek(-1)),e.seek(-1),t}},{key:"get",value:function(e){return this.hash_to_offset[e]}},{key:"put",value:function(e,t){this.set_prev(t,this.hash_to_offset[e]),this.hash_to_offset[e]=t}},{key:"prev",value:function(e){return this.masked_offset_to_prev[e&Or]}},{key:"set_prev",value:function(e,t){this.masked_offset_to_prev[e&Or]=t}}]),e}(),Er=l.a.get("data_formats/compression/prs/decompress");function Lr(e){for(var t=new Cr(e);;)if(1===t.read_flag_bit())t.copy_u8();else{var n=void 0,r=void 0;if(0===t.read_flag_bit())n=t.read_flag_bit()<<1,n|=t.read_flag_bit(),n+=2,r=t.read_u8()-256;else{if(0===(r=t.read_u16()))break;n=7&r,r>>>=3,0===n?(n=t.read_u8(),n+=1):n+=2,r-=8192}t.offset_copy(r,n)}return t.dst.seek_start(0)}var Cr=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.src=t,this.dst=new kr(new gr(Math.floor(1.5*t.size)),t.endianness),this.flags=0,this.flag_bits_left=0}return Object(p.a)(e,[{key:"read_flag_bit",value:function(){0===this.flag_bits_left&&(this.flags=this.read_u8(),this.flag_bits_left=8);var e=1&this.flags;return this.flags>>>=1,this.flag_bits_left-=1,e}},{key:"copy_u8",value:function(){this.dst.write_u8(this.read_u8())}},{key:"read_u8",value:function(){return this.src.u8()}},{key:"read_u16",value:function(){return this.src.u16()}},{key:"offset_copy",value:function(e,t){(e<-8192||e>0)&&Er.error("offset was ".concat(e,", should be between -8192 and 0.")),(t<1||t>256)&&Er.error("length was ".concat(t,", should be between 1 and 256."));var n=Math.min(-e,t);this.dst.seek(e);var r=this.dst.take(n);this.dst.seek(-e-n);for(var a=0;a<Math.floor(t/n);++a)this.dst.write_cursor(r),r.seek_start(0);this.dst.write_cursor(r.take(t%n))}}]),e}(),Br=l.a.get("data_formats/parsing/quest/bin");function Mr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.u32(),r=e.u32(),a=e.u32();e.seek(4);var i=e.u32(),o=e.u32(),s=e.string_utf16(64,!0,!0),l=e.string_utf16(256,!0,!0),u=e.string_utf16(576,!0,!0);a!==e.size&&Br.warn("Value ".concat(a," in bin size field does not match actual size ").concat(e.size,"."));var c=Math.floor((e.size-r)/4);e.seek_start(r);for(var d=[],p=0;p<c;++p)d.push(e.i32());return{quest_id:i,language:o,quest_name:s,short_description:l,long_description:u,function_offsets:d,instructions:function(e,t){var n=[];try{for(;e.bytes_left;){var r=e.u8(),a=void 0,i=void 0,o=void 0;switch(r){case 248:a=e.u8(),i=2,o=zr;break;case 249:a=e.u8(),i=2,o=Pr;break;default:a=r,i=1,o=Ir}var s=Object(Lt.a)(o[a],3),l=s[1],u=s[2];if(null==u){var c=r;248!==r&&249!==r||(c=c<<8|a),Br.warn("Parameters unknown for opcode 0x".concat(c.toString(16).toUpperCase(),", assuming 0.")),n.push({opcode:a,mnemonic:l,args:[],size:i})}else try{var d=Fr(e,u);n.push({opcode:a,mnemonic:l,args:d.args,size:i+d.size})}catch(p){n.push({opcode:a,mnemonic:l,args:[],size:i})}}}catch(p){if(!t)throw p;Br.error("Couldn't fully parse object code.",p)}return n}(e.seek_start(n).take(r-n),t),data:e.seek_start(0).array_buffer()}}function Fr(e,t){var n,r=e.position,a=[];e:for(var i=0;i<t.length;++i)switch(t.charAt(i)){case"p":break;case"a":break e;case"B":a.push(e.u8());break;case"W":a.push(e.u16());break;case"L":a.push(e.u32());break;case"I":a.push(e.i32());break;case"f":case"F":a.push(e.f32());break;case"R":case"r":e.seek(1);break;case"b":a.push(e.u8());break;case"w":a.push(e.u16());break;case"l":a.push(e.u32());break;case"i":a.push(e.i32());break;case"j":case"J":n=2*e.u8(),e.seek(n);break;case"t":case"T":n=e.u8(),e.seek(n);break;case"s":case"S":for(;e.u16(););break;default:throw new Error("Unknown mask part ".concat(t.charAt(i),"."))}return{args:a,size:e.position-r}}var Ir=[[0,"nop",""],[1,"ret",""],[2,"sync",""],[3,"exit","aL"],[4,"thread","W"],[5,"va_start",""],[6,"va_end",""],[7,"va_call","W"],[8,"let","RR"],[9,"leti","RI"],[10,"unknown",null],[11,"unknown",null],[12,"unknown",null],[13,"unknown",null],[14,"unknown",null],[15,"unknown",null],[16,"set","R"],[17,"clear","R"],[18,"rev","R"],[19,"gset","w"],[20,"gclear","w"],[21,"grev","w"],[22,"glet","w"],[23,"gget","wR"],[24,"add","RR"],[25,"addi","RI"],[26,"sub","RR"],[27,"subi","RI"],[28,"mul","RR"],[29,"muli","RI"],[30,"div","RR"],[31,"divi","RI"],[32,"and","RR"],[33,"andi","RI"],[34,"or","RR"],[35,"ori","RI"],[36,"xor","RR"],[37,"xori","RI"],[38,"mod","RR"],[39,"modi","RI"],[40,"jmp","W"],[41,"call","W"],[42,"jmp_on","Wt"],[43,"jmp_off","Wt"],[44,"jmp_=","RRW"],[45,"jmpi_=","RIW"],[46,"jmp_!=","RRW"],[47,"jmpi_!=","RIW"],[48,"ujmp_>","RRW"],[49,"ujmpi_>","RLW"],[50,"jmp_>","RRW"],[51,"jmpi_>","RIW"],[52,"ujmp_<","RRW"],[53,"ujmpi_<","RLW"],[54,"jmp_<","RRW"],[55,"jmpi_<","RIW"],[56,"ujmp_>=","RRW"],[57,"ujmpi_>=","RLW"],[58,"jmp_>=","RRW"],[59,"jmpi_>=","RIW"],[60,"ujmp_<=","RRW"],[61,"ujmpi_<=","RLW"],[62,"jmp_<=","RRW"],[63,"jmpi_<=","RIW"],[64,"switch_jmp","Rj"],[65,"switch_call","Rj"],[66,"stack_push","R"],[67,"stack_pop","R"],[68,"stack_pushm","RL"],[69,"stack_popm","RL"],[70,"unknown",null],[71,"unknown",null],[72,"arg_pushr","pR"],[73,"arg_pushl","pI"],[74,"arg_pushb","pB"],[75,"arg_pushw","pW"],[76,"unknown",null],[77,"unknown",null],[78,"arg_pushs","ps"],[79,"unknown4F","RR"],[80,"message","aLs"],[81,"list","aRs"],[82,"fadein",""],[83,"fadeout",""],[84,"se","aL"],[85,"bgm","aL"],[86,"unknown",null],[87,"unknown",null],[88,"enable","aL"],[89,"disable","aL"],[90,"window_msg","as"],[91,"add_msg","as"],[92,"mesend",""],[93,"gettime","R"],[94,"winend",""],[95,"unknown",null],[96,"npc_crt_V3","R"],[97,"npc_stop","aR"],[98,"npc_play","aL"],[99,"npc_kill","aR"],[100,"npc_nont",""],[101,"npc_talk",""],[102,"npc_crp_V3","R"],[103,"unknown",null],[104,"create_pipe","aL"],[105,"p_hpstat_V3","aRL"],[106,"p_dead_V3","aRL"],[107,"p_disablewarp",""],[108,"p_enablewarp",""],[109,"p_move_V3","R"],[110,"p_look","aL"],[111,"unknown",null],[112,"p_action_disable",""],[113,"p_action_enable",""],[114,"disable_movement1","aR"],[115,"enable_movement1","aR"],[116,"p_noncol",""],[117,"p_col",""],[118,"p_setpos","aRR"],[119,"p_return_guild",""],[120,"p_talk_guild","aL"],[121,"npc_talk_pl_V3","R"],[122,"npc_talk_kill","aL"],[123,"npc_crtpk_V3","R"],[124,"npc_crppk_V3","R"],[125,"npc_crptalk_v3","R"],[126,"p_look_at_V1","aLL"],[127,"npc_crp_id_V3","R"],[128,"cam_quake",""],[129,"cam_adj",""],[130,"cam_zmin",""],[131,"cam_zmout",""],[132,"cam_pan_V3","R"],[133,"game_lev_super",""],[134,"game_lev_reset",""],[135,"pos_pipe_V3","R"],[136,"if_zone_clear","RR"],[137,"chk_ene_num","R"],[138,"unhide_obj","R"],[139,"unhide_ene","R"],[140,"at_coords_call","R"],[141,"at_coords_talk","R"],[142,"col_npcin","R"],[143,"col_npcinr","R"],[144,"switch_on","aL"],[145,"switch_off","aL"],[146,"playbgm_epi","aL"],[147,"set_mainwarp","aL"],[148,"set_obj_param","RR"],[149,"set_floor_handler","aLW"],[150,"clr_floor_handler","aL"],[151,"col_plinaw","R"],[152,"hud_hide",""],[153,"hud_show",""],[154,"cine_enable",""],[155,"cine_disable",""],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"set_qt_failure","W"],[162,"set_qt_success","W"],[163,"clr_qt_failure",""],[164,"clr_qt_success",""],[165,"set_qt_cancel","W"],[166,"clr_qt_cancel",""],[167,"unknown",null],[168,"pl_walk_V3","R"],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"pl_add_meseta","aLL"],[177,"thread_stg","W"],[178,"del_obj_param","R"],[179,"item_create","RR"],[180,"item_create2","RR"],[181,"item_delete","RR"],[182,"item_delete2","RR"],[183,"item_check","RR"],[184,"setevt","aL"],[185,"get_difflvl","R"],[186,"set_qt_exit","W"],[187,"clr_qt_exit",""],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"particle_V3","R"],[193,"npc_text","aLs"],[194,"npc_chkwarp",""],[195,"pl_pkoff",""],[196,"map_designate","R"],[197,"masterkey_on",""],[198,"masterkey_off",""],[199,"window_time",""],[200,"winend_time",""],[201,"winset_time","R"],[202,"getmtime","R"],[203,"set_quest_board_handler","aLWs"],[204,"clear_quest_board_handler","aL"],[205,"particle_id_V3","R"],[206,"npc_crptalk_id_V3","R"],[207,"npc_lang_clean",""],[208,"pl_pkon",""],[209,"pl_chk_item2","RR"],[210,"enable_mainmenu",""],[211,"disable_mainmenu",""],[212,"start_battlebgm",""],[213,"end_battlebgm",""],[214,"disp_msg_qb","as"],[215,"close_msg_qb",""],[216,"set_eventflag_v3","aLL"],[217,"sync_leti",null],[218,"set_returnhunter",""],[219,"set_returncity",""],[220,"load_pvr",""],[221,"load_midi",""],[222,"unknown",null],[223,"npc_param_V3","aRL"],[224,"pad_dragon",""],[225,"clear_mainwarp","aL"],[226,"pcam_param_V3","R"],[227,"start_setevt_v3","aRL"],[228,"warp_on",""],[229,"warp_off",""],[230,"get_slotnumber","R"],[231,"get_servernumber","R"],[232,"set_eventflag2","aLR"],[233,"res","RR"],[234,"unknownEA","RL"],[235,"enable_bgmctrl","aL"],[236,"sw_send","R"],[237,"create_bgmctrl",""],[238,"pl_add_meseta2","aL"],[239,"sync_register","aRL"],[240,"send_regwork",null],[241,"leti_fixed_camera_V3","R"],[242,"default_camera_pos1",""],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknownF8","R"],[249,"unknown",null],[250,"get_gc_number","R"],[251,"unknownFB","W"],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknownFF",""]],zr=[[0,"unknown",null],[1,"set_chat_callback?","aRs"],[2,"unknown",null],[3,"unknown",null],[4,"unknown",null],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"get_difficulty_level2","R"],[9,"get_number_of_player1","R"],[10,"get_coord_of_player","RR"],[11,"unknownF80B",""],[12,"unknownF80C",""],[13,"map_designate_ex","R"],[14,"unknownF80E","aL"],[15,"unknownF80F","aL"],[16,"ba_initial_floor","aL"],[17,"set_ba_rules",""],[18,"unknownF812","aL"],[19,"unknownF813","aL"],[20,"unknownF814","aL"],[21,"unknownF815","aL"],[22,"unknownF816","aL"],[23,"unknownF817","aL"],[24,"unknownF818","aL"],[25,"unknownF819","aL"],[26,"unknownF81A","aL"],[27,"unknownF81B","aL"],[28,"ba_disp_msg","as"],[29,"death_lvl_up","aL"],[30,"death_tech_lvl_up","aL"],[31,"unknown",null],[32,"cmode_stage","aL"],[33,"unknown",null],[34,"unknown",null],[35,"unknownF823","aL"],[36,"unknownF824","aL"],[37,"exp_multiplication","R"],[38,"exp_division?","R"],[39,"get_user_is_dead?","R"],[40,"go_floor","RR"],[41,"unknown",null],[42,"unknown",null],[43,"unlock_door2","aLL"],[44,"lock_door2","aLL"],[45,"if_switch_not_pressed","R"],[46,"if_switch_pressed","R"],[47,"unknownF82F","aLL"],[48,"control_dragon","R"],[49,"release_dragon",""],[50,"unknown",null],[51,"unknown",null],[52,"unknown",null],[53,"unknown",null],[54,"unknown",null],[55,"unknown",null],[56,"shrink","R"],[57,"unshrink","R"],[58,"unknown",null],[59,"unknown",null],[60,"display_clock2?","R"],[61,"unknownF83D","aL"],[62,"delete_area_title?","aL"],[63,"unknown",null],[64,"load_npc_data",""],[65,"get_npc_data","W"],[66,"unknown",null],[67,"unknown",null],[68,"unknown",null],[69,"unknown",null],[70,"unknown",null],[71,"unknown",null],[72,"give_damage_score","R"],[73,"take_damage_score","R"],[74,"unk_score_F84A","R"],[75,"unk_score_F84B","R"],[76,"kill_score","R"],[77,"death_score","R"],[78,"unk_score_F84E","R"],[79,"enemy_death_score","R"],[80,"meseta_score","R"],[81,"unknownF851","R"],[82,"unknownF852","aL"],[83,"reverse_warps",""],[84,"unreverse_warps",""],[85,"set_ult_map",""],[86,"unset_ult_map",""],[87,"set_area_title","as"],[88,"unknownF858",""],[89,"unknown",null],[90,"equip_item","R"],[91,"unequip_item","aLL"],[92,"unknown",null],[93,"unknown",null],[94,"unknownF85E","aL"],[95,"unknownF85F","aL"],[96,"unknownF860",""],[97,"unknownF861","aL"],[98,"unknown",null],[99,"unknown",null],[100,"cmode_rank","aLs"],[101,"award_item_name?",""],[102,"award_item_select?",""],[103,"award_item_give_to?","R"],[104,"unknownF868","RR"],[105,"unknownF869","RR"],[106,"item_create_cmode","RR"],[107,"unknownF86B","R"],[108,"award_item_ok?","R"],[109,"unknownF86D",""],[110,"unknownF86E",""],[111,"ba_set_lives","aL"],[112,"ba_set_tech_lvl","aL"],[113,"ba_set_lvl","aL"],[114,"ba_set_time_limit","aL"],[115,"boss_is_dead?","R"],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"enable_techs","R"],[120,"disable_techs","R"],[121,"get_gender","RR"],[122,"get_chara_class","RR"],[123,"take_slot_meseta","RR"],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"read_guildcard_flag","RR"],[128,"unknownF880","R"],[129,"get_pl_name?","R"],[130,"unknown",null],[131,"unknownF883","RR"],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"ba_close_msg",""],[137,"unknown",null],[138,"get_player_status","RR"],[139,"send_mail","aRs"],[140,"online_check","R"],[141,"chl_set_timerecord?","R"],[142,"chl_get_timerecord?","R"],[143,"unknownF88F","R"],[144,"unknownF890",""],[145,"load_enemy_data","aL"],[146,"get_physical_data","W"],[147,"get_attack_data","W"],[148,"get_resist_data","W"],[149,"get_movement_data","W"],[150,"unknown",null],[151,"unknown",null],[152,"shift_left","RR"],[153,"shift_right","RR"],[154,"get_random","RR"],[155,"reset_map",""],[156,"disp_chl_retry_menu","R"],[157,"chl_reverser?",""],[158,"unknownF89E","aL"],[159,"unknownF89F","R"],[160,"unknownF8A0",""],[161,"unknownF8A1",""],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknownF8A8","aL"],[169,"unknownF8A9","R"],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"get_number_of_player2","R"],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknownF8B8",""],[185,"chl_recovery?",""],[186,"unknown",null],[187,"unknown",null],[188,"set_episode","L"],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"file_dl_req","aLs"],[193,"get_dl_status","R"],[194,"gba_unknown4?",""],[195,"get_gba_state?","R"],[196,"unknownF8C4","R"],[197,"unknownF8C5","R"],[198,"QEXIT",""],[199,"use_animation","RR"],[200,"stop_animation","R"],[201,"run_to_coord","RR"],[202,"set_slot_invincible","RR"],[203,"unknownF8CB","R"],[204,"set_slot_poison","R"],[205,"set_slot_paralyze","R"],[206,"set_slot_shock","R"],[207,"set_slot_freeze","R"],[208,"set_slot_slow","R"],[209,"set_slot_confuse","R"],[210,"set_slot_shifta","R"],[211,"set_slot_deband","R"],[212,"set_slot_jellen","R"],[213,"set_slot_zalure","R"],[214,"fleti_fixed_camera","aR"],[215,"fleti_locked_camera","aLR"],[216,"default_camera_pos2",""],[217,"set_motion_blur",""],[218,"set_screen_b&w",""],[219,"unknownF8DB","aLLLLRW"],[220,"NPC_action_string","RRW"],[221,"get_pad_cond","RR"],[222,"get_button_cond","RR"],[223,"freeze_enemies",""],[224,"unfreeze_enemies",""],[225,"freeze_everything",""],[226,"unfreeze_everything",""],[227,"restore_hp","R"],[228,"restore_tp","R"],[229,"close_chat_bubble","R"],[230,"unknownF8E6","RR"],[231,"unknownF8E7","RR"],[232,"unknownF8E8","RR"],[233,"unknownF8E9","RR"],[234,"unknownF8EA","RR"],[235,"unknownF8EB","RR"],[236,"unknownF8EC","RR"],[237,"animation_check","RR"],[238,"call_image_data","aLW"],[239,"unknownF8EF",""],[240,"turn_off_bgm_p2",""],[241,"turn_on_bgm_p2",""],[242,"load_unk_data","aLLLLRW"],[243,"particle2","aRLf"],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Pr=[[0,"unknown",null],[1,"dec2float","RR"],[2,"float2dec","RR"],[3,"flet","RR"],[4,"fleti","RF"],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"fadd","RR"],[9,"faddi","RF"],[10,"fsub","RR"],[11,"fsubi","RF"],[12,"fmul","RR"],[13,"fmuli","RF"],[14,"fdiv","RR"],[15,"fdivi","RF"],[16,"get_unknown_count?","aLR"],[17,"get_stackable_item_count","RR"],[18,"freeze_and_hide_equip",""],[19,"thaw_and_show_equip",""],[20,"set_paletteX_callback","aRW"],[21,"activate_paletteX","aR"],[22,"enable_paletteX","aR"],[23,"restore_paletteX","aL"],[24,"disable_paletteX","aL"],[25,"get_paletteX_activated","aLR"],[26,"get_unknown_paletteX_status?","aLR"],[27,"disable_movement2","aR"],[28,"enable_movement2","aR"],[29,"get_time_played","R"],[30,"get_guildcard_total","R"],[31,"get_slot_meseta","R"],[32,"get_player_level","aLR"],[33,"get_Section_ID","aLR"],[34,"get_player_hp","aRR"],[35,"get_floor_number","aRR"],[36,"get_coord_player_detect","RR"],[37,"read_global_flag","abR"],[38,"write_global_flag","abR"],[39,"unknownF927","RR"],[40,"floor_player_detect","R"],[41,"read_disk_file?","as"],[42,"open_pack_select",""],[43,"item_select","R"],[44,"get_item_id","R"],[45,"color_change","aRRRRR"],[46,"send_statistic?","aLLLLLLLL"],[47,"unknownF92F","aLL"],[48,"chat_box","aLLLLLs"],[49,"chat_bubble","aLs"],[50,"unknown",null],[51,"unknownF933","R"],[52,"scroll_text","aLLLLLfRs"],[53,"gba_unknown1",""],[54,"gba_unknown2",""],[55,"gba_unknown3",""],[56,"add_damage_to?","aLL"],[57,"item_delete2","aL"],[58,"get_item_info","aLR"],[59,"item_packing1","aL"],[60,"item_packing2","aLL"],[61,"get_lang_setting?","aR"],[62,"prepare_statistic?","aLWW"],[63,"keyword_detect",""],[64,"Keyword","aRLs"],[65,"get_guildcard_num","aLR"],[66,"unknown",null],[67,"unknown",null],[68,"get_wrap_status","aLR"],[69,"initial_floor","aL"],[70,"sin","aRL"],[71,"cos","aRL"],[72,"unknown",null],[73,"unknown",null],[74,"boss_is_dead2?","R"],[75,"unknownF94B","R"],[76,"unknownF94C","R"],[77,"is_there_cardbattle","R"],[78,"unknown",null],[79,"unknown",null],[80,"BB_p2_menu","aL"],[81,"BB_Map_Designate","BWBB"],[82,"BB_get_number_in_pack","R"],[83,"BB_swap_item","aLLLLLLWW"],[84,"BB_check_wrap","aRR"],[85,"BB_exchange_PD_item","aRRRWW"],[86,"BB_exchange_PD_srank","aRRRRRWW"],[87,"BB_exchange_PD_special","aRRRRRLWW"],[88,"BB_exchange_PD_percent","aRRRRRLWW"],[89,"unknownF959","aL"],[90,"unknown",null],[91,"unknown",null],[92,"BB_exchange_SLT","aLRWW"],[93,"BB_exchange_PC",""],[94,"BB_box_create_BP","aLff"],[95,"BB_exchange_PT","aRRLWW"],[96,"unknownF960","aL"],[97,"unknownF961",""],[98,"unknown",null],[99,"unknown",null],[100,"unknown",null],[101,"unknown",null],[102,"unknown",null],[103,"unknown",null],[104,"unknown",null],[105,"unknown",null],[106,"unknown",null],[107,"unknown",null],[108,"unknown",null],[109,"unknown",null],[110,"unknown",null],[111,"unknown",null],[112,"unknown",null],[113,"unknown",null],[114,"unknown",null],[115,"unknown",null],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"unknown",null],[120,"unknown",null],[121,"unknown",null],[122,"unknown",null],[123,"unknown",null],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"unknown",null],[128,"unknown",null],[129,"unknown",null],[130,"unknown",null],[131,"unknown",null],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"unknown",null],[137,"unknown",null],[138,"unknown",null],[139,"unknown",null],[140,"unknown",null],[141,"unknown",null],[142,"unknown",null],[143,"unknown",null],[144,"unknown",null],[145,"unknown",null],[146,"unknown",null],[147,"unknown",null],[148,"unknown",null],[149,"unknown",null],[150,"unknown",null],[151,"unknown",null],[152,"unknown",null],[153,"unknown",null],[154,"unknown",null],[155,"unknown",null],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"unknown",null],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknown",null],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknown",null],[185,"unknown",null],[186,"unknown",null],[187,"unknown",null],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"unknown",null],[193,"unknown",null],[194,"unknown",null],[195,"unknown",null],[196,"unknown",null],[197,"unknown",null],[198,"unknown",null],[199,"unknown",null],[200,"unknown",null],[201,"unknown",null],[202,"unknown",null],[203,"unknown",null],[204,"unknown",null],[205,"unknown",null],[206,"unknown",null],[207,"unknown",null],[208,"unknown",null],[209,"unknown",null],[210,"unknown",null],[211,"unknown",null],[212,"unknown",null],[213,"unknown",null],[214,"unknown",null],[215,"unknown",null],[216,"unknown",null],[217,"unknown",null],[218,"unknown",null],[219,"unknown",null],[220,"unknown",null],[221,"unknown",null],[222,"unknown",null],[223,"unknown",null],[224,"unknown",null],[225,"unknown",null],[226,"unknown",null],[227,"unknown",null],[228,"unknown",null],[229,"unknown",null],[230,"unknown",null],[231,"unknown",null],[232,"unknown",null],[233,"unknown",null],[234,"unknown",null],[235,"unknown",null],[236,"unknown",null],[237,"unknown",null],[238,"unknown",null],[239,"unknown",null],[240,"unknown",null],[241,"unknown",null],[242,"unknown",null],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Gr=l.a.get("data_formats/parsing/quest/dat"),Tr=68,Ar=72;var Wr=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"write_u8",value:function(e){return this.dv.setUint8(this._position++,e),this}},{key:"write_u16",value:function(e){return this.dv.setUint16(this.position,e,this.little_endian),this._position+=2,this}},{key:"write_u32",value:function(e){return this.dv.setUint32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_i32",value:function(e){return this.dv.setInt32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_f32",value:function(e){return this.dv.setFloat32(this.position,e,this.little_endian),this._position+=4,this}},{key:"write_u8_array",value:function(e){return new Uint8Array(this.buffer,this.offset+this.position).set(new Uint8Array(e)),this._position+=e.length,this}},{key:"write_cursor",value:function(e){var t=e.size-e.position;return e.copy_to_uint8_array(new Uint8Array(this.buffer,this.offset+this.position,t),t),this._position+=t,this}},{key:"write_string_ascii",value:function(e,t){var n=0,r=!0,a=!1,i=void 0;try{for(var o,s=Rn.encode(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n<t&&(this.write_u8(l),++n)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(;n<t;)this.write_u8(0),++n;return this}}]),t}(Sn),Ur=l.a.get("data_formats/parsing/quest/qst");function Nr(e){var t="PC",n=e.u8();e.seek(1);var r=e.u8();if(68===n?t="Dreamcast/GameCube":88===n?68===r&&(t="Blue Burst"):166===n&&(t="Dreamcast download"),"Blue Burst"===t){e.seek_start(0);var a=function(e){for(var t=[],n=0;n<2;++n){e.seek(4);var r=e.u16();e.seek(38);var a=e.string_ascii(16,!0,!0),i=e.u32(),o=e.string_ascii(24,!0,!0);t.push({quest_id:r,file_name:a,file_name_2:o,size:i})}return t}(e),i=function(e,t){var n=new Map;for(;e.bytes_left>=1056;){var r=e.position,a=e.seek(4).u8(),i=e.seek(3).string_ascii(16,!0,!0),o=n.get(i);if(!o){var s=t.get(i);n.set(i,o={name:i,expected_size:s,cursor:new kr(new gr(s||10240),hn.Little),chunk_nos:new Set})}o.chunk_nos.has(a)?Ur.warn("File chunk number ".concat(a," of file ").concat(i," was already encountered, overwriting previous chunk.")):o.chunk_nos.add(a);var l=e.seek(1024).u32();e.seek(-1028),l>1024&&(Ur.warn("Data segment size of ".concat(l," is larger than expected maximum size, reading just 1024 bytes.")),l=1024);var u=e.take(l),c=1024*a;if(o.cursor.size=Math.max(c+l,o.cursor.size),o.cursor.seek_start(c).write_cursor(u),e.seek(1032-u.size),e.position!==r+1056)throw new Error("Read ".concat(e.position-r," file chunk message bytes instead of expected 1056."))}e.bytes_left&&Ur.warn("".concat(e.bytes_left," Bytes left in file."));var d=!0,p=!1,h=void 0;try{for(var _,m=n.values()[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var f=_.value;f.cursor.seek_start(0),f.chunk_nos=new Set(Array.from(f.chunk_nos.values()).sort(function(e,t){return e-t})),null!=f.expected_size&&f.cursor.size!==f.expected_size&&Ur.warn("File ".concat(f.name," has an actual size of ").concat(f.cursor.size," instead of the expected size ").concat(f.expected_size,"."));for(var w=Math.max(f.cursor.size,f.expected_size||0),v=0;v<Math.ceil(w/1024);++v)f.chunk_nos.has(v)||Ur.warn("File ".concat(f.name," is missing chunk ").concat(v,"."))}}catch(S){p=!0,h=S}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var b=[],y=!0,k=!1,g=void 0;try{for(var R,j=n.values()[Symbol.iterator]();!(y=(R=j.next()).done);y=!0){var O=R.value;b.push({name:O.name,data:O.cursor.seek_start(0).array_buffer()})}}catch(S){k=!0,g=S}finally{try{y||null==j.return||j.return()}finally{if(k)throw g}}return b}(e,new Map(a.map(function(e){return[e.file_name,e.size]}))),o=!0,s=!1,l=void 0;try{for(var u,c=function(){var e=u.value,t=a.find(function(t){return t.file_name===e.name});t&&(e.id=t.quest_id,e.name_2=t.file_name_2)},d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c()}catch(p){s=!0,l=p}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return{version:t,files:i}}Ur.error("Can't parse ".concat(t," QST files."))}function Hr(e){var t=e.files,n=t.map(function(e){return 88+1056*Math.ceil(e.data.byteLength/1024)}).reduce(function(e,t){return e+t}),r=new ArrayBuffer(n),a=new Wr(r,hn.Little);if(function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(s.name.length>16)throw Error("File ".concat(s.name," has a name longer than 16 characters."));e.write_u16(88),e.write_u16(68),e.write_u16(s.id||0);for(var l=0;l<38;++l)e.write_u8(0);e.write_string_ascii(s.name,16),e.write_u32(s.data.byteLength);var u=void 0;if(null==s.name_2){var c=s.name.lastIndexOf(".");u=-1===c?s.name+"_j":s.name.slice(0,c)+"_j"+s.name.slice(c)}else u=s.name_2;if(u.length>24)throw Error("File ".concat(s.name," has a file_name_2 length (").concat(u,") longer than 24 characters."));e.write_string_ascii(u,24)}}catch(d){r=!0,a=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}(a,t),function(e,t){var n=t.map(function(e){return{no:0,data:new Sn(e.data,hn.Little),name:e.name}});for(;n.length;)for(var r=0;r<n.length;)qr(e,n[r].data,n[r].no++,n[r].name)?++r:n.splice(r,1)}(a,t),a.size!==n)throw new Error("Expected a final file size of ".concat(n,", but got ").concat(a.size,"."));return r}function qr(e,t,n,r){e.write_u8_array([28,4,19,0]),e.write_u8(n),e.write_u8_array([0,0,0]),e.write_string_ascii(r,16);var a=Math.min(1024,t.bytes_left);e.write_cursor(t.take(a));for(var i=a;i<1024;++i)e.write_u8(0);return e.write_u32(a),e.write_u32(0),t.bytes_left>0}var Vr=l.a.get("data_formats/parsing/quest");function Zr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Nr(e);if(n){var r,a,i=!0,o=!1,s=void 0;try{for(var l,u=n.files[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=c.name.trim().toLowerCase();d.endsWith(".dat")?r=c:d.endsWith(".bin")&&(a=c)}}catch(w){o=!0,s=w}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}if(r){if(a){var p=function(e){for(var t=[],n=[],r=[];e.bytes_left;){var a=e.u32(),i=e.u32(),o=e.u32(),s=e.u32();if(0===a)break;if(s!==i-16)throw Error("Malformed DAT file. Expected an entities size of ".concat(i-16,", got ").concat(s,"."));if(1===a){for(var l=Math.floor(s/Tr),u=e.position,c=0;c<l;++c){var d=e.u16(),p=e.u8_array(10),h=e.u16(),_=e.u8_array(2),m=e.f32(),f=e.f32(),w=e.f32(),v=e.i32()/65535*2*Math.PI,b=e.i32()/65535*2*Math.PI,y=e.i32()/65535*2*Math.PI,g=e.u8_array(28);t.push({type_id:d,section_id:h,position:new k(m,f,w),rotation:new k(v,b,y),area_id:o,unknown:[p,_,g]})}var R=e.position-u;R!==s&&(Gr.warn("Read ".concat(R," bytes instead of expected ").concat(s," for entity type ").concat(a," (Object).")),e.seek(s-R))}else if(2===a){for(var j=Math.floor(s/Ar),O=e.position,S=0;S<j;++S){var x=e.u16(),D=e.u8_array(10),E=e.u16(),L=e.u8_array(6),C=e.f32(),B=e.f32(),M=e.f32(),F=e.i32()/65535*2*Math.PI,I=e.i32()/65535*2*Math.PI,z=e.i32()/65535*2*Math.PI,P=e.u8_array(4),G=e.f32(),T=e.u8_array(12),A=e.u32(),W=e.u8_array(4);n.push({type_id:x,section_id:E,position:new k(C,B,M),rotation:new k(F,I,z),skin:A,area_id:o,flags:G,unknown:[D,L,P,T,W]})}var U=e.position-O;U!==s&&(Gr.warn("Read ".concat(U," bytes instead of expected ").concat(s," for entity type ").concat(a," (NPC).")),e.seek(s-U))}else r.push({entity_type:a,total_size:i,area_id:o,entities_size:s,data:e.u8_array(s)})}return{objs:t,npcs:n,unknowns:r}}(Lr(new Sn(r.data,hn.Little))),h=Mr(Lr(new Sn(a.data,hn.Little)),t),_=1,m=[];if(h.function_offsets.length){var f=function(e,t){var n=0,r=!1,a=[],i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(n===t&&(r=!0),r&&(a.push(c),1===c.opcode))break;n+=c.size}}catch(w){o=!0,s=w}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r?a:void 0}(h.instructions,h.function_offsets[0]);f?m=function(e,t,n,r){var a=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=e.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;a.set(c.area_id,0)}}catch(w){o=!0,s=w}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,h=void 0;try{for(var _,m=e.objs[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var f=_.value;a.set(f.area_id,0)}}catch(w){p=!0,h=w}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var v=n.filter(function(e){return"BB_Map_Designate"===e.mnemonic}),b=!0,y=!1,k=void 0;try{for(var g,R=v[Symbol.iterator]();!(b=(g=R.next()).done);b=!0){var j=g.value,O=j.args[0],S=j.args[2];a.set(O,S)}}catch(w){y=!0,k=w}finally{try{b||null==R.return||R.return()}finally{if(y)throw k}}var x=new Array,D=!0,E=!1,L=void 0;try{for(var C,B=a.entries()[Symbol.iterator]();!(D=(C=B.next()).done);D=!0){var M=C.value,F=Object(Lt.a)(M,2),I=F[0],z=F[1];try{x.push(br.get_variant(t,I,z))}catch(P){if(!r)throw P;Vr.error("Unknown area variant.",P)}}}catch(w){E=!0,L=w}finally{try{D||null==B.return||B.return()}finally{if(E)throw L}}return x.sort(function(e,t){return e.area.order-t.area.order||e.id-t.id})}(p,_=function(e){var t=e.find(function(e){return"set_episode"===e.mnemonic});if(!t)return Vr.debug("Function 0 has no set_episode instruction."),1;switch(t.args[0]){default:case 0:return 1;case 1:return 2;case 2:return 4}}(f),f,t):Vr.warn("Function 0 offset ".concat(h.function_offsets[0]," is invalid."))}else Vr.warn("File contains no functions.");return new Re(r.id,h.quest_name,h.short_description,h.long_description,_,m,p.objs.map(function(e){var t=e.position,n=t.x,r=t.y,a=t.z,i=e.rotation;return new Oe(e.area_id,e.section_id,new k(n,r,a),new k(i.x,i.y,i.z),oe.from_pso_id(e.type_id),e)}),function(e,t){return t.map(function(t){var n=t.position,r=n.x,a=n.y,i=n.z,o=t.rotation;return new Se(t.area_id,t.section_id,new k(r,a,i),new k(o.x,o.y,o.z),function(e,t){var n=t.type_id,r=t.flags,a=t.skin,i=t.area_id,o=Math.abs(r-1)>1e-5;switch("".concat(n,", ").concat(a%3,", ").concat(e)){case"".concat(68,", 0, 1"):return F.Booma;case"".concat(68,", 1, 1"):return F.Gobooma;case"".concat(68,", 2, 1"):return F.Gigobooma;case"".concat(99,", 0, 1"):return F.EvilShark;case"".concat(99,", 1, 1"):return F.PalShark;case"".concat(99,", 2, 1"):return F.GuilShark;case"".concat(166,", 0, 1"):return F.Dimenian;case"".concat(166,", 0, 2"):return F.Dimenian2;case"".concat(166,", 1, 1"):return F.LaDimenian;case"".concat(166,", 1, 2"):return F.LaDimenian2;case"".concat(166,", 2, 1"):return F.SoDimenian;case"".concat(166,", 2, 2"):return F.SoDimenian2;case"".concat(214,", 0, 2"):return F.Mericarol;case"".concat(214,", 1, 2"):return F.Mericus;case"".concat(214,", 2, 2"):return F.Merikle;case"".concat(277,", 0, 4"):return F.Boota;case"".concat(277,", 1, 4"):return F.ZeBoota;case"".concat(277,", 2, 4"):return F.BaBoota;case"".concat(279,", 0, 4"):return F.Goran;case"".concat(279,", 1, 4"):return F.PyroGoran;case"".concat(279,", 2, 4"):return F.GoranDetonator}switch("".concat(n,", ").concat(a%2,", ").concat(e)){case"".concat(64,", 0, 1"):return F.Hildebear;case"".concat(64,", 0, 2"):return F.Hildebear2;case"".concat(64,", 1, 1"):return F.Hildeblue;case"".concat(64,", 1, 2"):return F.Hildeblue2;case"".concat(65,", 0, 1"):return F.RagRappy;case"".concat(65,", 0, 2"):return F.RagRappy2;case"".concat(65,", 0, 4"):return F.SandRappy;case"".concat(65,", 1, 1"):return F.AlRappy;case"".concat(65,", 1, 2"):return F.LoveRappy;case"".concat(65,", 1, 4"):return F.DelRappy;case"".concat(128,", 0, 1"):return F.Dubchic;case"".concat(128,", 0, 2"):return F.Dubchic2;case"".concat(128,", 1, 1"):return F.Gilchic;case"".concat(128,", 1, 2"):return F.Gilchic2;case"".concat(212,", 0, 2"):return F.SinowBerill;case"".concat(212,", 1, 2"):return F.SinowSpigell;case"".concat(213,", 0, 2"):return F.Merillia;case"".concat(213,", 1, 2"):return F.Meriltas;case"".concat(215,", 0, 2"):return F.UlGibbon;case"".concat(215,", 1, 2"):return F.ZolGibbon;case"".concat(221,", 0, 2"):return F.Dolmolm;case"".concat(221,", 1, 2"):return F.Dolmdarl;case"".concat(224,", 0, 2"):return i>15?F.Epsilon:F.SinowZoa;case"".concat(224,", 1, 2"):return i>15?F.Epsilon:F.SinowZele;case"".concat(274,", 0, 4"):return F.MerissaA;case"".concat(274,", 1, 4"):return F.MerissaAA;case"".concat(276,", 0, 4"):return F.Zu;case"".concat(276,", 1, 4"):return F.Pazuzu;case"".concat(278,", 0, 4"):return F.Dorphon;case"".concat(278,", 1, 4"):return F.DorphonEclair;case"".concat(281,", 0, 4"):return o?F.SaintMilion:F.Kondrieu;case"".concat(281,", 1, 4"):return o?F.Shambertin:F.Kondrieu}switch("".concat(n,", ").concat(e)){case"".concat(66,", 1"):return F.Monest;case"".concat(66,", 2"):return F.Monest2;case"".concat(67,", 1"):return o?F.SavageWolf:F.BarbarousWolf;case"".concat(67,", 2"):return o?F.SavageWolf2:F.BarbarousWolf2;case"".concat(96,", 1"):return F.GrassAssassin;case"".concat(96,", 2"):return F.GrassAssassin2;case"".concat(97,", 1"):return i>15?F.DelLily:o?F.PoisonLily:F.NarLily;case"".concat(97,", 2"):return i>15?F.DelLily:o?F.PoisonLily2:F.NarLily2;case"".concat(98,", 1"):return F.NanoDragon;case"".concat(100,", 1"):return o?F.PofuillySlime:F.PouillySlime;case"".concat(101,", 1"):return F.PanArms;case"".concat(101,", 2"):return F.PanArms2;case"".concat(129,", 1"):return F.Garanz;case"".concat(129,", 2"):return F.Garanz2;case"".concat(130,", 1"):return o?F.SinowBeat:F.SinowGold;case"".concat(131,", 1"):return F.Canadine;case"".concat(132,", 1"):return F.Canane;case"".concat(133,", 1"):return F.Dubswitch;case"".concat(133,", 2"):return F.Dubswitch2;case"".concat(160,", 1"):return F.Delsaber;case"".concat(160,", 2"):return F.Delsaber2;case"".concat(161,", 1"):return F.ChaosSorcerer;case"".concat(161,", 2"):return F.ChaosSorcerer2;case"".concat(162,", 1"):return F.DarkGunner;case"".concat(164,", 1"):return F.ChaosBringer;case"".concat(165,", 1"):return F.DarkBelra;case"".concat(165,", 2"):return F.DarkBelra2;case"".concat(167,", 1"):return F.Bulclaw;case"".concat(168,", 1"):return F.Claw;case"".concat(192,", 1"):return F.Dragon;case"".concat(192,", 2"):return F.GalGryphon;case"".concat(193,", 1"):return F.DeRolLe;case"".concat(197,", 1"):return F.VolOpt;case"".concat(200,", 1"):return F.DarkFalz;case"".concat(202,", 2"):return F.OlgaFlow;case"".concat(203,", 2"):return F.BarbaRay;case"".concat(204,", 2"):return F.GolDragon;case"".concat(216,", 2"):return F.Gibbles;case"".concat(217,", 2"):return F.Gee;case"".concat(218,", 2"):return F.GiGue;case"".concat(219,", 2"):return F.Deldepth;case"".concat(220,", 2"):return F.Delbiter;case"".concat(222,", 2"):return F.Morfos;case"".concat(223,", 2"):return F.Recobox;case"".concat(225,", 2"):return F.IllGill;case"".concat(272,", 4"):return F.Astark;case"".concat(273,", 4"):return o?F.SatelliteLizard:F.Yowie;case"".concat(275,", 4"):return F.Girtablulu}switch(n){case 4:return F.FemaleFat;case 5:return F.FemaleMacho;case 7:return F.FemaleTall;case 10:return F.MaleDwarf;case 11:return F.MaleFat;case 12:return F.MaleMacho;case 13:return F.MaleOld;case 25:return F.BlueSoldier;case 26:return F.RedSoldier;case 27:return F.Principal;case 28:return F.Tekker;case 29:return F.GuildLady;case 30:return F.Scientist;case 31:return F.Nurse;case 32:return F.Irene;case 241:return F.ItemShop;case 254:return F.Nurse2}return F.Unknown}(e,t),t)})}(_,p.npcs),p.unknowns,h.data)}Vr.error("File contains no BIN file.")}else Vr.error("File contains no DAT file.")}}function Yr(e,t){var n,r,a=function(e){var t=e.objs,n=e.npcs,r=e.unknowns,a=new gr(t.length*(16+Tr)+n.length*(16+Ar)+r.reduce(function(e,t){return e+t.total_size},0)),i=new kr(a,hn.Little),o=Object(Ge.groupBy)(t,function(e){return e.area_id}),s=Object.keys(o).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),l=!0,u=!1,c=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,_=o[h],m=_.length*Tr;i.write_u32(1),i.write_u32(m+16),i.write_u32(h),i.write_u32(m);var f=!0,w=!1,v=void 0;try{for(var b,y=_[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var k=b.value;i.write_u16(k.type_id),i.write_u8_array(k.unknown[0]),i.write_u16(k.section_id),i.write_u8_array(k.unknown[1]),i.write_f32(k.position.x),i.write_f32(k.position.y),i.write_f32(k.position.z),i.write_i32(Math.round(k.rotation.x/(2*Math.PI)*65535)),i.write_i32(Math.round(k.rotation.y/(2*Math.PI)*65535)),i.write_i32(Math.round(k.rotation.z/(2*Math.PI)*65535)),i.write_u8_array(k.unknown[2])}}catch(H){w=!0,v=H}finally{try{f||null==y.return||y.return()}finally{if(w)throw v}}}}catch(H){u=!0,c=H}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}var g=Object(Ge.groupBy)(n,function(e){return e.area_id}),R=Object.keys(g).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),j=!0,O=!1,S=void 0;try{for(var x,D=R[Symbol.iterator]();!(j=(x=D.next()).done);j=!0){var E=x.value,L=g[E],C=L.length*Ar;i.write_u32(2),i.write_u32(C+16),i.write_u32(E),i.write_u32(C);var B=!0,M=!1,F=void 0;try{for(var I,z=L[Symbol.iterator]();!(B=(I=z.next()).done);B=!0){var P=I.value;i.write_u16(P.type_id),i.write_u8_array(P.unknown[0]),i.write_u16(P.section_id),i.write_u8_array(P.unknown[1]),i.write_f32(P.position.x),i.write_f32(P.position.y),i.write_f32(P.position.z),i.write_i32(Math.round(P.rotation.x/(2*Math.PI)*65535)),i.write_i32(Math.round(P.rotation.y/(2*Math.PI)*65535)),i.write_i32(Math.round(P.rotation.z/(2*Math.PI)*65535)),i.write_u8_array(P.unknown[2]),i.write_f32(P.flags),i.write_u8_array(P.unknown[3]),i.write_u32(P.skin),i.write_u8_array(P.unknown[4])}}catch(H){M=!0,F=H}finally{try{B||null==z.return||z.return()}finally{if(M)throw F}}}}catch(H){O=!0,S=H}finally{try{j||null==D.return||D.return()}finally{if(O)throw S}}var G=!0,T=!1,A=void 0;try{for(var W,U=r[Symbol.iterator]();!(G=(W=U.next()).done);G=!0){var N=W.value;i.write_u32(N.entity_type),i.write_u32(N.total_size),i.write_u32(N.area_id),i.write_u32(N.entities_size),i.write_u8_array(N.data)}}catch(H){T=!0,A=H}finally{try{G||null==U.return||U.return()}finally{if(T)throw A}}return i.write_u32(0),i.write_u32(0),i.write_u32(0),i.write_u32(0),a}({objs:(r=e.objects,r.map(function(e){return{type_id:e.type.pso_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,area_id:e.area_id,unknown:e.dat.unknown}})),npcs:(n=e.npcs,n.map(function(e){var t=function(e){switch(e){default:throw new Error("Unexpected type ".concat(e.code,"."));case F.Unknown:return;case F.FemaleFat:return{type_id:4,skin:0,regular:!0};case F.FemaleMacho:return{type_id:5,skin:0,regular:!0};case F.FemaleTall:return{type_id:7,skin:0,regular:!0};case F.MaleDwarf:return{type_id:10,skin:0,regular:!0};case F.MaleFat:return{type_id:11,skin:0,regular:!0};case F.MaleMacho:return{type_id:12,skin:0,regular:!0};case F.MaleOld:return{type_id:13,skin:0,regular:!0};case F.BlueSoldier:return{type_id:25,skin:0,regular:!0};case F.RedSoldier:return{type_id:26,skin:0,regular:!0};case F.Principal:return{type_id:27,skin:0,regular:!0};case F.Tekker:return{type_id:28,skin:0,regular:!0};case F.GuildLady:return{type_id:29,skin:0,regular:!0};case F.Scientist:return{type_id:30,skin:0,regular:!0};case F.Nurse:return{type_id:31,skin:0,regular:!0};case F.Irene:return{type_id:32,skin:0,regular:!0};case F.ItemShop:return{type_id:241,skin:0,regular:!0};case F.Nurse2:return{type_id:254,skin:0,regular:!0};case F.Hildebear:return{type_id:64,skin:0,regular:!0};case F.Hildeblue:return{type_id:64,skin:1,regular:!0};case F.RagRappy:return{type_id:65,skin:0,regular:!0};case F.AlRappy:return{type_id:65,skin:1,regular:!0};case F.Monest:return{type_id:66,skin:0,regular:!0};case F.SavageWolf:return{type_id:67,skin:0,regular:!0};case F.BarbarousWolf:return{type_id:67,skin:0,regular:!1};case F.Booma:return{type_id:68,skin:0,regular:!0};case F.Gobooma:return{type_id:68,skin:1,regular:!0};case F.Gigobooma:return{type_id:68,skin:2,regular:!0};case F.Dragon:return{type_id:192,skin:0,regular:!0};case F.GrassAssassin:return{type_id:96,skin:0,regular:!0};case F.PoisonLily:return{type_id:97,skin:0,regular:!0};case F.NarLily:return{type_id:97,skin:1,regular:!0};case F.NanoDragon:return{type_id:98,skin:0,regular:!0};case F.EvilShark:return{type_id:99,skin:0,regular:!0};case F.PalShark:return{type_id:99,skin:1,regular:!0};case F.GuilShark:return{type_id:99,skin:2,regular:!0};case F.PofuillySlime:return{type_id:100,skin:0,regular:!0};case F.PouillySlime:return{type_id:100,skin:0,regular:!1};case F.PanArms:return{type_id:101,skin:0,regular:!0};case F.DeRolLe:return{type_id:193,skin:0,regular:!0};case F.Dubchic:return{type_id:128,skin:0,regular:!0};case F.Gilchic:return{type_id:128,skin:1,regular:!0};case F.Garanz:return{type_id:129,skin:0,regular:!0};case F.SinowBeat:return{type_id:130,skin:0,regular:!0};case F.SinowGold:return{type_id:130,skin:0,regular:!1};case F.Canadine:return{type_id:131,skin:0,regular:!0};case F.Canane:return{type_id:132,skin:0,regular:!0};case F.Dubswitch:return{type_id:133,skin:0,regular:!0};case F.VolOpt:return{type_id:197,skin:0,regular:!0};case F.Delsaber:return{type_id:160,skin:0,regular:!0};case F.ChaosSorcerer:return{type_id:161,skin:0,regular:!0};case F.DarkGunner:return{type_id:162,skin:0,regular:!0};case F.ChaosBringer:return{type_id:164,skin:0,regular:!0};case F.DarkBelra:return{type_id:165,skin:0,regular:!0};case F.Dimenian:return{type_id:166,skin:0,regular:!0};case F.LaDimenian:return{type_id:166,skin:1,regular:!0};case F.SoDimenian:return{type_id:166,skin:2,regular:!0};case F.Bulclaw:return{type_id:167,skin:0,regular:!0};case F.Claw:return{type_id:168,skin:0,regular:!0};case F.DarkFalz:return{type_id:200,skin:0,regular:!0};case F.Hildebear2:return{type_id:64,skin:0,regular:!0};case F.Hildeblue2:return{type_id:64,skin:1,regular:!0};case F.RagRappy2:return{type_id:65,skin:0,regular:!0};case F.LoveRappy:return{type_id:65,skin:1,regular:!0};case F.Monest2:return{type_id:66,skin:0,regular:!0};case F.PoisonLily2:return{type_id:97,skin:0,regular:!0};case F.NarLily2:return{type_id:97,skin:1,regular:!0};case F.GrassAssassin2:return{type_id:96,skin:0,regular:!0};case F.Dimenian2:return{type_id:166,skin:0,regular:!0};case F.LaDimenian2:return{type_id:166,skin:1,regular:!0};case F.SoDimenian2:return{type_id:166,skin:2,regular:!0};case F.DarkBelra2:return{type_id:165,skin:0,regular:!0};case F.BarbaRay:return{type_id:203,skin:0,regular:!0};case F.SavageWolf2:return{type_id:67,skin:0,regular:!0};case F.BarbarousWolf2:return{type_id:67,skin:0,regular:!1};case F.PanArms2:return{type_id:101,skin:0,regular:!0};case F.Dubchic2:return{type_id:128,skin:0,regular:!0};case F.Gilchic2:return{type_id:128,skin:1,regular:!0};case F.Garanz2:return{type_id:129,skin:0,regular:!0};case F.Dubswitch2:return{type_id:133,skin:0,regular:!0};case F.Delsaber2:return{type_id:160,skin:0,regular:!0};case F.ChaosSorcerer2:return{type_id:161,skin:0,regular:!0};case F.GolDragon:return{type_id:204,skin:0,regular:!0};case F.SinowBerill:return{type_id:212,skin:0,regular:!0};case F.SinowSpigell:return{type_id:212,skin:1,regular:!0};case F.Merillia:return{type_id:213,skin:0,regular:!0};case F.Meriltas:return{type_id:213,skin:1,regular:!0};case F.Mericarol:return{type_id:214,skin:0,regular:!0};case F.Mericus:return{type_id:214,skin:1,regular:!0};case F.Merikle:return{type_id:214,skin:2,regular:!0};case F.UlGibbon:return{type_id:215,skin:0,regular:!0};case F.ZolGibbon:return{type_id:215,skin:1,regular:!0};case F.Gibbles:return{type_id:216,skin:0,regular:!0};case F.Gee:return{type_id:217,skin:0,regular:!0};case F.GiGue:return{type_id:218,skin:0,regular:!0};case F.GalGryphon:return{type_id:192,skin:0,regular:!0};case F.Deldepth:return{type_id:219,skin:0,regular:!0};case F.Delbiter:return{type_id:220,skin:0,regular:!0};case F.Dolmolm:return{type_id:221,skin:0,regular:!0};case F.Dolmdarl:return{type_id:221,skin:1,regular:!0};case F.Morfos:return{type_id:222,skin:0,regular:!0};case F.Recobox:return{type_id:223,skin:0,regular:!0};case F.Epsilon:case F.SinowZoa:return{type_id:224,skin:0,regular:!0};case F.SinowZele:return{type_id:224,skin:1,regular:!0};case F.IllGill:return{type_id:225,skin:0,regular:!0};case F.DelLily:return{type_id:97,skin:0,regular:!0};case F.OlgaFlow:return{type_id:202,skin:0,regular:!0};case F.SandRappy:return{type_id:65,skin:0,regular:!0};case F.DelRappy:return{type_id:65,skin:1,regular:!0};case F.Astark:return{type_id:272,skin:0,regular:!0};case F.SatelliteLizard:return{type_id:273,skin:0,regular:!0};case F.Yowie:return{type_id:273,skin:0,regular:!1};case F.MerissaA:return{type_id:274,skin:0,regular:!0};case F.MerissaAA:return{type_id:274,skin:1,regular:!0};case F.Girtablulu:return{type_id:275,skin:0,regular:!0};case F.Zu:return{type_id:276,skin:0,regular:!0};case F.Pazuzu:return{type_id:276,skin:1,regular:!0};case F.Boota:return{type_id:277,skin:0,regular:!0};case F.ZeBoota:return{type_id:277,skin:1,regular:!0};case F.BaBoota:return{type_id:277,skin:2,regular:!0};case F.Dorphon:return{type_id:278,skin:0,regular:!0};case F.DorphonEclair:return{type_id:278,skin:1,regular:!0};case F.Goran:return{type_id:279,skin:0,regular:!0};case F.PyroGoran:return{type_id:279,skin:1,regular:!0};case F.GoranDetonator:return{type_id:279,skin:2,regular:!0};case F.SaintMilion:return{type_id:281,skin:0,regular:!0};case F.Shambertin:return{type_id:281,skin:1,regular:!0};case F.Kondrieu:return{type_id:281,skin:0,regular:!1}}}(e.type),n=e.dat.flags;return t&&(n=-8388609&e.dat.flags|(t.regular?0:8388608)),{type_id:t?t.type_id:e.dat.type_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,flags:n,skin:t?t.skin:e.dat.skin,area_id:e.area_id,unknown:e.dat.unknown}})),unknowns:e.dat_unknowns}),i={data:e.bin_data}.data,o=t.lastIndexOf("."),s=-1===o?t:t.slice(0,o);return Hr({files:[{name:s+".dat",id:e.id,data:Rr(new yr(a,hn.Little)).array_buffer()},{name:s+".bin",id:e.id,data:Rr(new Sn(i,hn.Little)).array_buffer()}]})}var Kr=16776960,Qr=16711680;function Xr(e,t){return $r(e,t,Kr,"Object")}function Jr(e,t){return $r(e,t,Qr,"NPC")}function $r(e,t,n,r){var a=new Zn.Mesh(t,new Zn.MeshLambertMaterial({color:n,side:Zn.DoubleSide}));a.name=r,a.userData.entity=e;var i=e.position,o=i.x,s=i.y,l=i.z;a.position.set(o,s,l);var u=e.rotation;return a.rotation.set(u.x,u.y,u.z),a}var ea=new Zn.MeshLambertMaterial({color:16711935,side:Zn.DoubleSide}),ta=new Zn.MeshLambertMaterial({skinning:!0,color:16711935,side:Zn.DoubleSide}),na=new Zn.Vector3(0,1,0),ra=new Zn.Vector3(0,0,0),aa=new Zn.Quaternion(0,0,0,1),ia=new Zn.Vector3(1,1,1);function oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea;return new la(t).create_buffer_geometry(e)}var sa=function(){function e(){Object(d.a)(this,e),this.vertices_stack=[]}return Object(p.a)(e,[{key:"put",value:function(e){this.vertices_stack.push(e)}},{key:"get",value:function(e){for(var t=[],n=this.vertices_stack.length-1;n>=0;n--){var r=this.vertices_stack[n][e];r&&t.push(r)}return t}}]),e}(),la=function(){function e(t){Object(d.a)(this,e),this.material=void 0,this.bone_id=0,this.vertices=new sa,this.positions=[],this.normals=[],this.indices=[],this.bone_indices=[],this.bone_weights=[],this.bones=[],this.material=t}return Object(p.a)(e,[{key:"create_buffer_geometry",value:function(e){this.object_to_geometry(e,void 0,new Zn.Matrix4);var t=new Zn.BufferGeometry;return t.addAttribute("position",new Zn.Float32BufferAttribute(this.positions,3)),t.addAttribute("normal",new Zn.Float32BufferAttribute(this.normals,3)),t.setIndex(new Zn.Uint16BufferAttribute(this.indices,1)),t.computeBoundingSphere(),t}},{key:"create_skinned_mesh",value:function(e){var t=this.create_buffer_geometry(e);t.addAttribute("skinIndex",new Zn.Uint16BufferAttribute(this.bone_indices,4)),t.addAttribute("skinWeight",new Zn.Float32BufferAttribute(this.bone_weights,4));var n=new Zn.SkinnedMesh(t,this.material),r=new Zn.Skeleton(this.bones);return n.add(this.bones[0]),n.bind(r),n}},{key:"object_to_geometry",value:function(e,t,n){var r,a=e.evaluation_flags,i=a.no_translate,o=a.no_rotate,s=a.no_scale,l=a.hidden,u=a.break_child_trace,c=a.zxy_rotation_order,d=a.skip,p=e.position,h=e.rotation,_=e.scale,m=new Zn.Euler(h.x,h.y,h.z,c?"ZXY":"ZYX"),f=(new Zn.Matrix4).compose(i?ra:Yn(p),o?aa:(new Zn.Quaternion).setFromEuler(m),s?ia:Yn(_)).premultiply(n);if(d?r=t:((r=new Zn.Bone).name=this.bone_id.toString(),r.position.set(p.x,p.y,p.z),r.setRotationFromEuler(m),r.scale.set(_.x,_.y,_.z),this.bones.push(r),t&&t.add(r)),e.model&&!l&&this.model_to_geometry(e.model,f),this.bone_id++,!u){var w=!0,v=!1,b=void 0;try{for(var y,k=e.children[Symbol.iterator]();!(w=(y=k.next()).done);w=!0){var g=y.value;this.object_to_geometry(g,r,f)}}catch(R){v=!0,b=R}finally{try{w||null==k.return||k.return()}finally{if(v)throw b}}}}},{key:"model_to_geometry",value:function(e,t){!function(e){return"njcm"===e.type}(e)?Qn(e,t,this.positions,this.normals,this.indices):this.njcm_model_to_geometry(e,t)}},{key:"njcm_model_to_geometry",value:function(e,t){var n=this,r=(new Zn.Matrix3).getNormalMatrix(t),a=e.vertices.map(function(e){var a=Yn(e.position),i=e.normal?Yn(e.normal):na;return a.applyMatrix4(t),i.applyMatrix3(r),{bone_id:n.bone_id,position:a,normal:i,bone_weight:e.bone_weight,bone_weight_status:e.bone_weight_status,calc_continue:e.calc_continue}});this.vertices.put(a);var i=!0,o=!1,s=void 0;try{for(var l,u=e.meshes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)for(var c=l.value,d=0;d<c.vertices.length;++d){var p=c.vertices[d],h=this.vertices.get(p.index);if(h.length){var _,m,f=h[0],w=f.normal||p.normal||na,v=this.positions.length/3;this.positions.push(f.position.x,f.position.y,f.position.z),this.normals.push(w.x,w.y,w.z),d>=2&&(d%2===(c.clockwise_winding?1:0)?(this.indices.push(v-2),this.indices.push(v-1),this.indices.push(v)):(this.indices.push(v-2),this.indices.push(v),this.indices.push(v-1)));for(var b=[0,0,0,0],y=[0,0,0,0],k=h.length-1;k>=0;k--){var g=h[k];b[g.bone_weight_status]=g.bone_id,y[g.bone_weight_status]=g.bone_weight}(_=this.bone_indices).push.apply(_,b),(m=this.bone_weights).push.apply(m,y)}}}catch(R){o=!0,s=R}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}}]),e}(),ua=new Zn.CylinderBufferGeometry(3,3,20);ua.translate(0,10,0);var ca=new Promise(function(e){return e(ua)}),da=new Map;da.set(F.Unknown,ca);var pa=new Map;pa.set(oe.Unknown,ca);var ha,_a,ma,fa,wa=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"get_npc_geometry",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=da.get(t))){e.next=5;break}return e.abrupt("return",n);case 5:return n=tr(t).then(function(e){var t=e.url,n=e.data,r=new Sn(n,hn.Little),a=t.endsWith(".nj")?Nn(r):Hn(r);if(a.length)return oa(a[0]);throw new Error("Could not parse ".concat(t,"."))}),da.set(t,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_object_geometry",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=pa.get(t))){e.next=5;break}return e.abrupt("return",n);case 5:return n=rr(t).then(function(e){var t=e.url,n=e.data,r=new Sn(n,hn.Little),a=t.endsWith(".nj")?Nn(r):Hn(r);if(a.length)return oa(a[0]);throw new Error("File could not be parsed into a BufferGeometry.")}),pa.set(t,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}());function va(e){return ba.apply(this,arguments)}function ba(){return(ba=Object(Pe.a)(ze.a.mark(function e(t){return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.addEventListener("loadend",function(){r.result instanceof ArrayBuffer?e(r.result):n(new Error("Couldn't read file."))}),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ya,ka,ga=l.a.get("stores/QuestEditorStore"),Ra=new(ha=function(){function e(){var t=this;Object(d.a)(this,e),Object(v.a)(this,"current_quest",_a,this),Object(v.a)(this,"current_area",ma,this),Object(v.a)(this,"selected_entity",fa,this),this.set_quest=Object(y.b)("set_quest",function(e){t.reset_quest_state(),t.current_quest=e,e&&e.area_variants.length&&(t.current_area=e.area_variants[0].area)}),this.set_selected_entity=function(e){t.selected_entity=e},this.set_current_area_id=Object(y.b)("set_current_area_id",function(e){if(t.selected_entity=void 0,null==e)t.current_area=void 0;else if(t.current_quest){var n=t.current_quest.area_variants.find(function(t){return t.area.id===e});t.current_area=n&&n.area}}),this.load_file=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r,a,i,o,s,l,u,c;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,va(n);case 3:if(r=e.sent,a=Zr(new Sn(r,hn.Little)),t.set_quest(a),!a){e.next=34;break}i=!0,o=!1,s=void 0,e.prev=10,l=ze.a.mark(function e(){var n,r,i,o,s,l,u,d,p,h,_,m,f,w,v,b;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.value,e.next=3,br.get_area_sections(a.episode,n.area.id,n.id);case 3:r=e.sent,n.sections=r,i=!0,o=!1,s=void 0,e.prev=8,l=a.objects.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();case 10:if(i=(u=l.next()).done){e.next=26;break}return d=u.value,e.prev=12,e.next=15,wa.get_object_geometry(d.type);case 15:p=e.sent,t.set_section_on_visible_quest_entity(d,r),d.object_3d=Xr(d,p),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(12),ga.error(e.t0);case 23:i=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(8),o=!0,s=e.t1;case 32:e.prev=32,e.prev=33,i||null==l.return||l.return();case 35:if(e.prev=35,!o){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(32);case 40:h=!0,_=!1,m=void 0,e.prev=43,f=a.npcs.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();case 45:if(h=(w=f.next()).done){e.next=61;break}return v=w.value,e.prev=47,e.next=50,wa.get_npc_geometry(v.type);case 50:b=e.sent,t.set_section_on_visible_quest_entity(v,r),v.object_3d=Jr(v,b),e.next=58;break;case 55:e.prev=55,e.t2=e.catch(47),ga.error(e.t2);case 58:h=!0,e.next=45;break;case 61:e.next=67;break;case 63:e.prev=63,e.t3=e.catch(43),_=!0,m=e.t3;case 67:e.prev=67,e.prev=68,h||null==f.return||f.return();case 70:if(e.prev=70,!_){e.next=73;break}throw m;case 73:return e.finish(70);case 74:return e.finish(67);case 75:case"end":return e.stop()}},e,null,[[8,28,32,40],[12,20],[33,,35,39],[43,63,67,75],[47,55],[68,,70,74]])}),u=a.area_variants[Symbol.iterator]();case 13:if(i=(c=u.next()).done){e.next=18;break}return e.delegateYield(l(),"t0",15);case 15:i=!0,e.next=13;break;case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(10),o=!0,s=e.t1;case 24:e.prev=24,e.prev=25,i||null==u.return||u.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:e.next=35;break;case 34:ga.error("Couldn't parse quest file.");case 35:e.next=40;break;case 37:e.prev=37,e.t2=e.catch(0),ga.error("Couldn't read file.",e.t2);case 40:case"end":return e.stop()}},e,null,[[0,37],[10,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}(),this.set_section_on_visible_quest_entity=function(){var e=Object(Pe.a)(ze.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.position,a=r.x,i=r.y,o=r.z,(s=n.find(function(e){return e.id===t.section_id}))?(l=s.position,u=l.x,c=l.y,d=l.z,p=s.cos_y_axis_rotation*a+s.sin_y_axis_rotation*o,h=-s.sin_y_axis_rotation*a+s.cos_y_axis_rotation*o,a=p+u,i+=c,o=h+d):ga.warn("Section ".concat(t.section_id," not found.")),Object(y.l)(function(){t.section=s,t.position=new k(a,i,o)});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.save_current_quest_to_file=function(e){if(t.current_quest){var n=Yr(t.current_quest,e);e.endsWith(".qst")||(e+=".qst");var r=document.createElement("a");r.href=URL.createObjectURL(new Blob([n],{type:"application/octet-stream"})),r.download=e,document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}}return Object(p.a)(e,[{key:"reset_quest_state",value:function(){this.current_quest=void 0,this.current_area=void 0,this.selected_entity=void 0}}]),e}(),_a=Object(b.a)(ha.prototype,"current_quest",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma=Object(b.a)(ha.prototype,"current_area",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa=Object(b.a)(ha.prototype,"selected_entity",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha),ja=(n(388),Object(f.a)(ya=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.entity;if(e){var t=e.section?e.section.id:e.section_id,n=null;return e instanceof Oe?n=a.a.createElement("tr",null,a.a.createElement("td",null,"Object: "),a.a.createElement("td",{colSpan:2},e.type.name)):e instanceof Se&&(n=a.a.createElement("tr",null,a.a.createElement("td",null,"NPC: "),a.a.createElement("td",null,e.type.name))),a.a.createElement("div",{className:"EntityInfoComponent-container"},a.a.createElement("table",{className:"EntityInfoComponent-table"},a.a.createElement("tbody",null,n,a.a.createElement("tr",null,a.a.createElement("td",null,"Section: "),a.a.createElement("td",null,t)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"World position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(Oa,{entity:e,position_type:"position",coord:"x"}),a.a.createElement(Oa,{entity:e,position_type:"position",coord:"y"}),a.a.createElement(Oa,{entity:e,position_type:"position",coord:"z"}))))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"Section position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(Oa,{entity:e,position_type:"section_position",coord:"x"}),a.a.createElement(Oa,{entity:e,position_type:"section_position",coord:"y"}),a.a.createElement(Oa,{entity:e,position_type:"section_position",coord:"z"}))))))))}return a.a.createElement("div",{className:"EntityInfoComponent-container"})}}]),t}(r.Component))||ya),Oa=Object(f.a)(ka=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).changed=function(e){if(null!=e){var t=n.props.entity,r=n.props.position_type,a=t[r].clone();a[n.props.coord]=e,t[r]=a}},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.entity[this.props.position_type][this.props.coord];return a.a.createElement("tr",null,a.a.createElement("td",null,this.props.coord.toUpperCase(),": "),a.a.createElement("td",null,a.a.createElement(Fe.a,{value:e,size:"small",precision:3,className:"EntityInfoComponent-coord",onChange:this.changed})))}}]),t}(r.Component))||ka;n(389),n(390);function Sa(e){var t=e.quest;if(t){var n=4===t.episode?"IV":2===t.episode?"II":"I",r=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=t.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=r.get(c.type)||0;r.set(c.type,d+1)}}catch(_){o=!0,s=_}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var p=8*(r.get(F.Canane)||0),h=Object(Et.a)(r).sort(function(e,t){return e[0].id-t[0].id}).map(function(e){var t=Object(Lt.a)(e,2),n=t[0],r=t[1],i=n===F.Canadine?p:0;return a.a.createElement("tr",{key:n.id},a.a.createElement("td",null,n.name,":"),a.a.createElement("td",null,r+i))});return a.a.createElement("div",{className:"qe-QuestInfoComponent"},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name:"),a.a.createElement("td",null,t.name)),a.a.createElement("tr",null,a.a.createElement("th",null,"Episode:"),a.a.createElement("td",null,n)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.short_description))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.long_description))))),a.a.createElement("div",{className:"qe-QuestInfoComponent-npc-counts-container"},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:2},"NPC Counts"))),a.a.createElement("tbody",null,h))))}return a.a.createElement("div",{className:"qe-QuestInfoComponent"})}n(391);var xa,Da=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).modifyDom=function(e){e&&(n.props.renderer.set_size(e.clientWidth,e.clientHeight),e.appendChild(n.props.renderer.dom_element))},n.onResize=function(){var e=n.props.renderer.dom_element.parentNode;n.props.renderer.set_size(e.clientWidth,e.clientHeight)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e="RendererComponent";return this.props.className&&(e+=" "+this.props.className),a.a.createElement("div",{className:e,ref:this.modifyDom})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(r.Component),Ea=n(75),La=n(224),Ca=n.n(La)()(Zn),Ba=function(){function e(t){var n=this;Object(d.a)(this,e),this.camera=void 0,this.controls=void 0,this.scene=new Zn.Scene,this.light_holder=new Zn.Group,this.renderer=new Zn.WebGLRenderer({antialias:!0}),this.render_scheduled=!1,this.light=new Zn.HemisphereLight(16777215,5263440,1),this.schedule_render=function(){n.render_scheduled||(n.render_scheduled=!0,requestAnimationFrame(n.call_render))},this.call_render=function(){n.render_scheduled=!1,n.render()},this.renderer.setPixelRatio(window.devicePixelRatio),this.camera=t,this.controls=new Ca(this.camera,this.renderer.domElement),this.controls.mouseButtons.ORBIT=Zn.MOUSE.RIGHT,this.controls.mouseButtons.PAN=Zn.MOUSE.LEFT,this.controls.addEventListener("change",this.schedule_render),this.scene.background=new Zn.Color(1383457),this.light_holder.add(this.light),this.scene.add(this.light_holder)}return Object(p.a)(e,[{key:"set_size",value:function(e,t){this.renderer.setSize(e,t),this.schedule_render()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"reset_camera",value:function(e,t){this.controls.reset(),this.camera.position.copy(e),this.camera.lookAt(t)}},{key:"pointer_pos_to_device_coords",value:function(e){var t=new Zn.Vector2;return this.renderer.getSize(t),t.width=e.offsetX/t.width*2-1,t.height=e.offsetY/t.height*-2+1,t}},{key:"dom_element",get:function(){return this.renderer.domElement}}]),e}();var Ma,Fa,Ia,za,Pa=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new Zn.PerspectiveCamera(75,1,.1,5e3)))).raycaster=new Zn.Raycaster,e.quest=void 0,e.area=void 0,e.entity_reaction_disposers=[],e.collision_geometry=new Zn.Object3D,e.render_geometry=new Zn.Object3D,e.obj_geometry=new Zn.Object3D,e.npc_geometry=new Zn.Object3D,e.hovered_data=void 0,e.selected_data=void 0,e.on_mouse_down=function(t){var n=e.selected_data,r=e.pick_entity(e.pointer_pos_to_device_coords(t));!e.hovered_data||r&&r.object===e.hovered_data.object||e.hovered_data.object.material.color.set(e.get_color(e.hovered_data.entity,"normal")),!e.selected_data||r&&r.object===e.selected_data.object||(e.selected_data.object.material.color.set(e.get_color(e.selected_data.entity,"normal")),e.selected_data.manipulating=!1),r?(r.object.material.color.set(e.get_color(r.entity,"selected")),r.manipulating=!0,e.hovered_data=r,e.selected_data=r,e.controls.enabled=!1):(e.hovered_data=void 0,e.selected_data=void 0,e.controls.enabled=!0),(n&&r?n.object!==r.object:n!==r)&&(Ra.set_selected_entity(r&&r.entity),e.schedule_render())},e.on_mouse_up=function(){e.selected_data&&(e.selected_data.manipulating=!1,e.controls.enabled=!0,e.schedule_render())},e.on_mouse_move=function(t){var n=e.pointer_pos_to_device_coords(t);if(e.selected_data&&e.selected_data.manipulating){if(1===t.buttons){var r=e.selected_data;if(t.shiftKey){e.raycaster.setFromCamera(n,e.camera);var a=e.raycaster.ray,i=e.camera.getWorldDirection(new Zn.Vector3).negate(),o=(new Zn.Plane).setFromNormalAndCoplanarPoint(new Zn.Vector3(i.x,0,i.z).normalize(),r.object.position.sub(r.grab_offset)),s=new Zn.Vector3;if(a.intersectPlane(o,s)){var l=s.y+r.grab_offset.y,u=l-r.entity.position.y;r.drag_y+=u,r.drag_adjust.y-=u,r.entity.position=new k(r.entity.position.x,l,r.entity.position.z)}}else{var c=e.pick_terrain(n,r),d=c.intersection,p=c.section;if(d)Object(y.l)(function(){r.entity.position=new k(d.point.x,d.point.y+r.drag_y,d.point.z),r.entity.section=p});else{e.raycaster.setFromCamera(n,e.camera);var h=e.raycaster.ray,_=new Zn.Plane(new Zn.Vector3(0,1,0),-r.entity.position.y+r.grab_offset.y),m=new Zn.Vector3;h.intersectPlane(_,m)&&(r.entity.position=new k(m.x+r.grab_offset.x,r.entity.position.y,m.z+r.grab_offset.z))}}}e.schedule_render()}else{var f=e.hovered_data,w=e.pick_entity(n);!f||w&&w.object===f.object||(e.selected_data&&f.object===e.selected_data.object||f.object.material.color.set(e.get_color(f.entity,"normal")),e.hovered_data=void 0,e.schedule_render()),!w||f&&w.object===f.object||(e.selected_data&&w.object===e.selected_data.object||w.object.material.color.set(e.get_color(w.entity,"hover")),e.hovered_data=w,e.schedule_render())}},e.dom_element.addEventListener("mousedown",e.on_mouse_down),e.dom_element.addEventListener("mouseup",e.on_mouse_up),e.dom_element.addEventListener("mousemove",e.on_mouse_move),e.scene.add(e.obj_geometry),e.scene.add(e.npc_geometry),Object(y.c)(function(){e.set_quest_and_area(Ra.current_quest,Ra.current_area)}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_quest_and_area",value:function(e,t){this.area=t,this.quest=e,this.update_geometry()}},{key:"set_size",value:function(e,n){this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),Object(Ea.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"update_geometry",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(){var t,n,r,a,i,o,s,l,u,c,d,p,h,_,m,f,w,v;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dispose_entity_reactions(),this.scene.remove(this.obj_geometry),this.scene.remove(this.npc_geometry),this.obj_geometry=new Zn.Object3D,this.npc_geometry=new Zn.Object3D,this.scene.add(this.obj_geometry),this.scene.add(this.npc_geometry),this.scene.remove(this.collision_geometry),!this.quest||!this.area){e.next=62;break}for(t=!0,n=!1,r=void 0,e.prev=12,a=this.quest.objects[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o=i.value,this.update_entity_geometry(o,this.obj_geometry);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),n=!0,r=e.t0;case 20:e.prev=20,e.prev=21,t||null==a.return||a.return();case 23:if(e.prev=23,!n){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(s=!0,l=!1,u=void 0,e.prev=31,c=this.quest.npcs[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)p=d.value,this.update_entity_geometry(p,this.npc_geometry);e.next=39;break;case 35:e.prev=35,e.t1=e.catch(31),l=!0,u=e.t1;case 39:e.prev=39,e.prev=40,s||null==c.return||c.return();case 42:if(e.prev=42,!l){e.next=45;break}throw u;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return h=this.quest.episode,_=this.area.id,m=this.quest.area_variants.find(function(e){return e.area.id===_}),f=m&&m.id||0,e.next=53,br.get_area_collision_geometry(h,_,f);case 53:return w=e.sent,this.scene.remove(this.collision_geometry),this.reset_camera(new Zn.Vector3(0,800,700),new Zn.Vector3(0,0,0)),this.collision_geometry=w,this.scene.add(w),e.next=60,br.get_area_render_geometry(h,_,f);case 60:v=e.sent,this.render_geometry=v;case 62:case"end":return e.stop()}},e,this,[[12,16,20,28],[21,,23,27],[31,35,39,47],[40,,42,46]])}));return function(){return e.apply(this,arguments)}}()},{key:"update_entity_geometry",value:function(e,t){var n=this;this.area&&e.area_id===this.area.id&&this.entity_reaction_disposers.push(Object(y.p)(function(){return void 0!=e.object_3d},function(){var r=e.object_3d;t.add(r),n.entity_reaction_disposers.push(Object(y.c)(function(){var t=e.position,a=t.x,i=t.y,o=t.z;r.position.set(a,i,o);var s=e.rotation;r.rotation.set(s.x,s.y,s.z),n.schedule_render()})),n.schedule_render()}))}},{key:"dispose_entity_reactions",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.entity_reaction_disposers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"pick_entity",value:function(e){this.raycaster.setFromCamera(e,this.camera);var t=this.raycaster.intersectObjects(this.obj_geometry.children),n=Object(Lt.a)(t,1)[0],r=this.raycaster.intersectObjects(this.npc_geometry.children),a=Object(Lt.a)(r,1)[0];if(n||a){var i=(n?n.distance:1/0)<(a?a.distance:1/0)?n:a,o=i.object.userData.entity,s=i.object.position.clone().sub(i.point),l=s.clone(),u=0;this.raycaster.set(i.object.position,new Zn.Vector3(0,-1,0));var c=this.raycaster.intersectObjects(this.collision_geometry.children,!0),d=Object(Lt.a)(c,1)[0];return d&&(l.sub(new Zn.Vector3(0,d.distance,0)),u+=d.distance),{object:i.object,entity:o,grab_offset:s,drag_adjust:l,drag_y:u,manipulating:!1}}}},{key:"pick_terrain",value:function(e,t){this.raycaster.setFromCamera(e,this.camera),this.raycaster.ray.origin.add(t.drag_adjust);var n=this.raycaster.intersectObjects(this.collision_geometry.children,!0),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(l.face.normal.y>.75){this.raycaster.set(l.point.clone().setY(1e3),new Zn.Vector3(0,-1,0));var u=this.raycaster.intersectObjects(this.render_geometry.children,!0).filter(function(e){return e.object.userData.section.id>=0});return{intersection:l,section:u[0]&&u[0].object.userData.section}}}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return{}}},{key:"get_color",value:function(e,t){var n=e instanceof Se;switch(t){default:case"normal":return n?Qr:Kr;case"hover":return n?16727903:16768831;case"selected":return n?16711764:16755200}}}]),t}(Ba),Ga=Object(f.a)(Ma=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={save_dialog_open:!1,save_dialog_filename:"Untitled"},n.save_as_clicked=function(e){var t=e?e.endsWith(".qst")?e.slice(0,-4):e:n.state.save_dialog_filename;n.setState({save_dialog_open:!0,save_dialog_filename:t})},n.save_dialog_filename_changed=function(e){n.setState({save_dialog_filename:e})},n.save_dialog_affirmed=function(){Ra.save_current_quest_to_file(n.state.save_dialog_filename),n.setState({save_dialog_open:!1})},n.save_dialog_cancelled=function(){n.setState({save_dialog_open:!1})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=Ra.current_quest;return a.a.createElement("div",{className:"qe-QuestEditorComponent"},a.a.createElement(Ta,{onSaveAsClicked:this.save_as_clicked}),a.a.createElement("div",{className:"qe-QuestEditorComponent-main"},a.a.createElement(Sa,{quest:e}),a.a.createElement(Da,{renderer:(xa||(xa=new Pa),xa)}),a.a.createElement(ja,{entity:Ra.selected_entity})),a.a.createElement(Aa,{is_open:this.state.save_dialog_open,filename:this.state.save_dialog_filename,on_filename_change:this.save_dialog_filename_changed,on_ok:this.save_dialog_affirmed,on_cancel:this.save_dialog_cancelled}))}}]),t}(r.Component))||Ma,Ta=Object(f.a)(Fa=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.set_filename=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),Ra.load_file(e.file.originFileObj))},n.save_as_clicked=function(){n.props.onSaveAsClicked(n.state.filename)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=Ra.current_quest,t=e&&Array.from(e.area_variants).map(function(e){return e.area}),n=Ra.current_area,r=n&&n.id;return a.a.createElement("div",{className:"qe-QuestEditorComponent-toolbar"},a.a.createElement(vn.a,{accept:".qst",showUploadList:!1,onChange:this.set_filename,customRequest:function(){return!1}},a.a.createElement(xt.a,{icon:"file"},this.state.filename||"Open file...")),t&&a.a.createElement(u.a,{onChange:Ra.set_current_area_id,value:r,style:{width:200}},t.map(function(e){return a.a.createElement(u.a.Option,{key:e.id,value:e.id},e.name)})),e&&a.a.createElement(xt.a,{icon:"save",onClick:this.save_as_clicked},"Save as..."))}}]),t}(r.Component))||Fa,Aa=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).name_changed=function(e){n.props.on_filename_change(e.currentTarget.value)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(_n.a,{title:a.a.createElement(a.a.Fragment,null,a.a.createElement(wn.a,{type:"save"})," Save as..."),visible:this.props.is_open,onOk:this.props.on_ok,onCancel:this.props.on_cancel},a.a.createElement(mn.a,{layout:"vertical"},a.a.createElement(mn.a.Item,{label:"Name"},a.a.createElement(fn.a,{autoFocus:!0,maxLength:12,value:this.props.filename,onChange:this.name_changed}))))}}]),t}(a.a.Component),Wa=(n(497),n(230)),Ua=1296321870;function Na(e,t){return e.u32()===Ua?function(e,t){var n=e.u32();return Ha(e.take(n),t)}(e,t):(e.seek_start(0),function(e,t){e.seek_end(16);var n=e.u32();e.seek_start(n);var r=e.u32();return e.seek_start(r),function(e,t){e.seek(4);var n=e.u32();return e.seek_start(n),Ha(e,t)}(e,t)}(e,t))}function Ha(e,t){for(var n=e.u32(),r=e.u32(),a=e.u16(),i=e.u16(),o=(192&i)>>6,s=15&i,l=[],u=0;u<t;u++){e.seek_start(n),n=n+=8*s;var c={tracks:[]};l.push(c);for(var d=[],p=[],h=0;h<s;h++)d.push(e.u32());for(var _=0;_<s;_++){var m=e.u32();p.push(m)}if(1&a){e.seek_start(d.shift());var f=p.shift();f&&c.tracks.push({type:za.Position,keyframes:qa(e,f)})}if(2&a){e.seek_start(d.shift());var w=p.shift();w&&c.tracks.push({type:za.Rotation,keyframes:Va(e,w,r)})}if(4&a){e.seek_start(d.shift());var v=p.shift();v&&c.tracks.push({type:za.Scale,keyframes:qa(e,v)})}}return{motion_data:l,frame_count:r,type:a,interpolation:o,element_count:s}}function qa(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new k(e.f32(),e.f32(),e.f32())});return n}function Va(e,t,n){for(var r=[],a=e.position,i=0;i<t;++i)r.push({frame:e.u16(),value:new k(e.u16()*An,e.u16()*An,e.u16()*An)});for(var o=-1,s=0,l=r;s<l.length;s++){var u=l[s].frame;if(u<o||u>=n)return e.seek_start(a),Za(e,t);o=u}return r}function Za(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new k(e.i32()*An,e.i32()*An,e.i32()*An)});return n}!function(e){e[e.Linear=0]="Linear",e[e.Spline=1]="Spline",e[e.UserFunction=2]="UserFunction"}(Ia||(Ia={})),function(e){e[e.Position=0]="Position",e[e.Rotation=1]="Rotation",e[e.Scale=2]="Scale"}(za||(za={}));var Ya,Ka,Qa,Xa,Ja,$a,ei,ti,ni,ri,ai,ii,oi,si,li,ui,ci=30;function di(e,t){var n=t.interpolation===Ia.Spline?Zn.InterpolateSmooth:Zn.InterpolateLinear,r=[];return t.motion_data.forEach(function(t,a){var i=e.get_bone(a);i&&t.tracks.forEach(function(e){var t=e.type,o=e.keyframes,s=[],l=[],u=!0,c=!1,d=void 0;try{for(var p,h=o[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value;if(s.push(_.frame/ci),t===za.Rotation){var m=i.evaluation_flags.zxy_rotation_order?"ZXY":"ZYX",f=(new Zn.Quaternion).setFromEuler(new Zn.Euler(_.value.x,_.value.y,_.value.z,m));l.push(f.x,f.y,f.z,f.w)}else l.push(_.value.x,_.value.y,_.value.z)}}catch(v){c=!0,d=v}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}if(t===za.Rotation)r.push(new Zn.QuaternionKeyframeTrack(".bones[".concat(a,"].quaternion"),s,l,n));else{var w=t===za.Position?".bones[".concat(a,"].position"):".bones[".concat(a,"].scale");r.push(new Zn.VectorKeyframeTrack(w,s,l,n))}})}),new Zn.AnimationClip("Animation",(t.frame_count-1)/ci,r).optimize()}var pi,hi,_i=l.a.get("stores/ModelViewerStore"),mi=new Map,fi=new Map,wi=new(Ya=y.k.ref,Ka=y.k.ref,Qa=y.k.ref,Xa=y.k.ref,Ja=y.k.ref,$a=function(){function e(){var t=this;Object(d.a)(this,e),this.models=[new Be("HUmar",1,10,new Set([6])),new Be("HUnewearl",1,10,new Set),new Be("HUcast",5,0,new Set),new Be("HUcaseal",5,0,new Set),new Be("RAmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Be("RAmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Be("RAcast",5,0,new Set),new Be("RAcaseal",5,0,new Set),new Be("FOmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Be("FOmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Be("FOnewm",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Be("FOnewearl",1,10,new Set([0,1,2,3,4,5,6,7,8,9]))],this.animations=new Array(572).fill(void 0).map(function(e,t){return new Me(t,"Animation ".concat(t+1))}),Object(v.a)(this,"current_player_model",ei,this),Object(v.a)(this,"current_model",ti,this),Object(v.a)(this,"current_bone_count",ni,this),Object(v.a)(this,"current_obj3d",ri,this),Object(v.a)(this,"animation",ai,this),Object(v.a)(this,"animation_playing",ii,this),Object(v.a)(this,"animation_frame_rate",oi,this),Object(v.a)(this,"animation_frame",si,this),Object(v.a)(this,"animation_frame_count",li,this),Object(v.a)(this,"show_skeleton",ui,this),this.set_animation_frame_rate=Object(y.b)("set_animation_frame_rate",function(e){t.animation&&(t.animation.mixer.timeScale=e/ci,t.animation_frame_rate=e)}),this.set_animation_frame=Object(y.b)("set_animation_frame",function(e){if(t.animation){var n=t.animation_frame_count;e>n&&(e=1),e<1&&(e=n),t.animation.action.time=(e-1)/ci,t.animation_frame=e}}),this.load_model=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_player_ninja_object(n);case 2:r=e.sent,t.set_model(r,!0,n),t.current_bone_count=64;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_animation=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_nj_motion(n);case 2:r=e.sent,t.current_model&&t.set_animation(di(t.current_model,r),n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_file=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r,a,i,o,s;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,va(n);case 3:r=e.sent,a=new Sn(r,hn.Little),n.name.endsWith(".nj")?(i=Nn(a)[0],t.set_model(i,!0)):n.name.endsWith(".xj")?(o=Hn(a)[0],t.set_model(o,!1)):n.name.endsWith(".njm")?t.current_model&&(s=Na(a,t.current_bone_count),t.set_animation(di(t.current_model,s))):_i.error('Unknown file extension in filename "'.concat(n.name,'".')),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),_i.error("Couldn't read file.",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),this.toggle_animation_playing=Object(y.b)("toggle_animation_playing",function(){t.animation&&(t.animation.action.paused=!t.animation.action.paused,t.animation_playing=!t.animation.action.paused)}),this.update_animation_frame=Object(y.b)("update_animation_frame",function(){if(t.animation&&t.animation_playing){var e=t.animation.action.time;t.animation_frame=Math.round(e*ci)+1}}),this.set_animation=Object(y.b)("set_animation",function(e,n){var r;t.current_obj3d&&t.current_obj3d instanceof Zn.SkinnedMesh&&(t.animation?(t.animation.mixer.stopAllAction(),r=t.animation.mixer):r=new Zn.AnimationMixer(t.current_obj3d),t.animation={player_animation:n,mixer:r,clip:e,action:r.clipAction(e)},t.animation.action.play(),t.animation_playing=!0,t.animation_frame_count=Math.round(ci*e.duration)+1)}),this.set_model=Object(y.b)("set_model",function(e,n,r){var a;t.current_obj3d&&t.animation&&(t.animation.mixer.stopAllAction(),t.animation.mixer.uncacheRoot(t.current_obj3d),t.animation=void 0),t.current_player_model=r,t.current_model=e,t.current_bone_count=e.bone_count(),(a=n?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ta;return new la(t).create_skinned_mesh(e)}(t.current_model):new Zn.Mesh(oa(t.current_model),new Zn.MeshLambertMaterial({color:16711935,side:Zn.DoubleSide}))).translateY(-a.geometry.boundingSphere.radius),t.current_obj3d=a})}return Object(p.a)(e,[{key:"add_to_bone",value:function(e,t,n){var r=e.get_bone(n);r&&(r.evaluation_flags.hidden=!1,r.evaluation_flags.break_child_trace=!1,r.children.push(t))}},{key:"get_player_ninja_object",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=mi.get(t.name))){e.next=5;break}return e.abrupt("return",n);case 5:return n=this.get_all_assets(t),mi.set(t.name,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_all_assets",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n,r,a,i,o,s,l,u;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir(t.name,"Body");case 2:if(n=e.sent,r=Nn(new Sn(n,hn.Little))[0]){e.next=6;break}throw new Error("Couldn't parse body for player class ".concat(t.name,"."));case 6:return e.next=8,ir(t.name,"Head",0);case 8:if(a=e.sent,(i=Nn(new Sn(a,hn.Little))[0])&&this.add_to_bone(r,i,59),!(t.hair_styles_count>0)){e.next=23;break}return e.next=14,ir(t.name,"Hair",0);case 14:if(o=e.sent,(s=Nn(new Sn(o,hn.Little))[0])&&this.add_to_bone(r,s,59),!t.hair_styles_with_accessory.has(0)){e.next=23;break}return e.next=20,ir(t.name,"Accessory",0);case 20:l=e.sent,(u=Nn(new Sn(l,hn.Little))[0])&&this.add_to_bone(r,u,59);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_nj_motion",value:function(){var e=Object(Pe.a)(ze.a.mark(function e(t){var n,r=this;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=fi.get(t.id))){e.next=5;break}return e.abrupt("return",n);case 5:return n=sr(t.id).then(function(e){return Na(new Sn(e,hn.Little),r.current_bone_count)}),fi.set(t.id,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ei=Object(b.a)($a.prototype,"current_player_model",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ti=Object(b.a)($a.prototype,"current_model",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ni=Object(b.a)($a.prototype,"current_bone_count",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ri=Object(b.a)($a.prototype,"current_obj3d",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=Object(b.a)($a.prototype,"animation",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ii=Object(b.a)($a.prototype,"animation_playing",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oi=Object(b.a)($a.prototype,"animation_frame_rate",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ci}}),si=Object(b.a)($a.prototype,"animation_frame",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),li=Object(b.a)($a.prototype,"animation_frame_count",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ui=Object(b.a)($a.prototype,"show_skeleton",[y.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$a),vi=(n(499),Object(f.a)(pi=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-m-AnimationSelectionComponent"},a.a.createElement("ul",null,wi.animations.map(function(e){var t=wi.animation&&wi.animation.player_animation&&wi.animation.player_animation.id===e.id;return a.a.createElement("li",{key:e.id,className:t?"selected":void 0,onClick:function(){return wi.load_animation(e)}},e.name)})))}}]),t}(r.Component))||pi),bi=(n(512),n(129)),yi=(n(503),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-m-ModelSelectionComponent"},a.a.createElement(bi.a,{itemLayout:"horizontal",dataSource:wi.models,size:"small",renderItem:function(e){var t=wi.current_player_model===e;return a.a.createElement(bi.a.Item,{onClick:function(){return wi.load_model(e)}},a.a.createElement(bi.a.Item.Meta,{title:a.a.createElement("span",{className:"v-m-ModelSelectionComponent-model"+(t?" selected":"")},e.name)}))}}))}}]),t}(r.Component));n(504);var ki,gi,Ri,ji,Oi,Si=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new Zn.PerspectiveCamera(75,1,1,200)))).clock=new Zn.Clock,e.model=void 0,e.skeleton_helper=void 0,Object(y.c)(function(){e.set_model(wi.current_obj3d)}),Object(y.c)(function(){var t=wi.show_skeleton;e.skeleton_helper&&(e.skeleton_helper.visible=t,e.schedule_render()),wi.animation_playing||(wi.animation_frame,e.schedule_render())}),Object(y.c)(function(){wi.animation&&e.schedule_render()}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_size",value:function(e,n){this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),Object(Ea.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"render",value:function(){wi.animation&&(wi.animation.mixer.update(this.clock.getDelta()),wi.update_animation_frame()),this.light_holder.quaternion.copy(this.camera.quaternion),Object(Ea.a)(Object(_.a)(t.prototype),"render",this).call(this),wi.animation&&!wi.animation.action.paused&&this.schedule_render()}},{key:"set_model",value:function(e){this.model&&(this.scene.remove(this.model),this.scene.remove(this.skeleton_helper),this.skeleton_helper=void 0),e&&(this.scene.add(e),this.skeleton_helper=new Zn.SkeletonHelper(e),this.skeleton_helper.visible=wi.show_skeleton,this.skeleton_helper.material.linewidth=3,this.scene.add(this.skeleton_helper),this.reset_camera(new Zn.Vector3(0,10,20),new Zn.Vector3(0,0,0))),this.model=e,this.schedule_render()}}]),t}(Ba),xi=Object(f.a)(ki=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){wi.current_model||wi.load_model(wi.models[5])}},{key:"render",value:function(){return a.a.createElement("div",{className:"v-m-ModelViewerComponent"},a.a.createElement(Di,null),a.a.createElement("div",{className:"v-m-ModelViewerComponent-main"},a.a.createElement(yi,null),a.a.createElement(vi,null),a.a.createElement(Da,{renderer:(hi||(hi=new Si),hi)})))}}]),t}(r.Component))||ki,Di=Object(f.a)(gi=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.load_file=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),wi.load_file(e.file.originFileObj))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"v-m-ModelViewerComponent-toolbar"},a.a.createElement(vn.a,{accept:".nj, .njm, .xj, .xvm",showUploadList:!1,onChange:this.load_file,customRequest:function(){return!1}},a.a.createElement(xt.a,{icon:"file"},this.state.filename||"Open file...")),wi.animation&&a.a.createElement(a.a.Fragment,null,a.a.createElement(xt.a,{icon:wi.animation_playing?"pause":"caret-right",onClick:wi.toggle_animation_playing},wi.animation_playing?"Pause animation":"Play animation"),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame rate:"),a.a.createElement(Fe.a,{value:wi.animation_frame_rate,onChange:function(e){return wi.set_animation_frame_rate(e||0)},min:1,step:1})),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame:"),a.a.createElement(Fe.a,{value:wi.animation_frame,onChange:function(e){return wi.set_animation_frame(e||0)},step:1}),a.a.createElement("span",null,"/ ",wi.animation_frame_count))),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Show skeleton:"),a.a.createElement(Wa.a,{checked:wi.show_skeleton,onChange:function(e){return wi.show_skeleton=e}})))}}]),t}(r.Component))||gi,Ei=(n(506),l.a.get("data_formats/parsing/ninja/texture")),Li=1213027928,Ci=1414682200;function Bi(e){var t=Tn(e),n=t.find(function(e){return e.type===Li}),r=n&&function(e){return{texture_count:e.u16()}}(n.data),a=t.filter(function(e){return e.type===Ci}).map(function(e){return function(e){var t=e.u32(),n=e.u32(),r=e.u32(),a=e.u16(),i=e.u16(),o=e.u32();e.seek(36);var s=e.array_buffer(o);return{id:r,format:[t,n],width:a,height:i,size:o,data:s}}(e.data)});return r?r.texture_count!==a.length&&Ei.warn("Found ".concat(a.length," textures instead of ").concat(r.texture_count," as defined in the header.")):Ei.warn("No header found."),{textures:a}}var Mi,Fi=l.a.get("stores/TextureViewerStore"),Ii=new(Ri=y.k.ref,ji=function e(){var t=this;Object(d.a)(this,e),Object(v.a)(this,"current_xvm",Oi,this),this.load_file=function(){var e=Object(Pe.a)(ze.a.mark(function e(n){var r;return ze.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,va(n);case 3:r=e.sent,t.current_xvm=Bi(new Sn(r,hn.Little)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Fi.error("Couldn't read file.",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Oi=Object(b.a)(ji.prototype,"current_xvm",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ji);var zi,Pi,Gi=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this,new Zn.OrthographicCamera(-400,400,300,-300,1,10)))).quad_meshes=[],e.render_textures=function(t){var n=10*(t.textures.length-1),r=0,a=!0,i=!1,o=void 0;try{for(var s,l=t.textures[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n+=u.width,r=Math.max(r,u.height)}}catch(y){i=!0,o=y}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}var c=-Math.floor(n/2),d=-Math.floor(r/2),p=!0,h=!1,_=void 0;try{for(var m,f=t.textures[Symbol.iterator]();!(p=(m=f.next()).done);p=!0){var w=m.value,v=e.create_texture(w),b=new Zn.Mesh(e.create_quad(c,d+Math.floor((r-w.height)/2),w.width,w.height),new Zn.MeshBasicMaterial({map:v,color:v?void 0:16711935,transparent:!0}));e.quad_meshes.push(b),e.scene.add(b),c+=10+w.width}}catch(y){h=!0,_=y}finally{try{p||null==f.return||f.return()}finally{if(h)throw _}}},e.controls.enableRotate=!1,Object(y.c)(function(){var t;(t=e.scene).remove.apply(t,Object(Et.a)(e.quad_meshes));var n=Ii.current_xvm;n&&e.render_textures(n),e.reset_camera(new Zn.Vector3(0,0,5),new Zn.Vector3),e.schedule_render()}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_size",value:function(e,n){this.camera.left=-Math.floor(e/2),this.camera.right=Math.ceil(e/2),this.camera.top=Math.floor(n/2),this.camera.bottom=-Math.ceil(n/2),this.camera.updateProjectionMatrix(),Object(Ea.a)(Object(_.a)(t.prototype),"set_size",this).call(this,e,n)}},{key:"create_texture",value:function(e){var t=new Zn.CompressedTexture([{data:new Uint8Array(e.data),width:e.width,height:e.height}],e.width,e.height);switch(e.format[1]){case 6:t.format=Zn.RGBA_S3TC_DXT1_Format;break;case 7:if(2!==e.format[0])return;t.format=Zn.RGBA_S3TC_DXT3_Format;break;default:return}return t.minFilter=Zn.LinearFilter,t.needsUpdate=!0,t}},{key:"create_quad",value:function(e,t,n,r){var a=new Zn.PlaneGeometry(n,r,1,1);return a.faceVertexUvs=[[[new Zn.Vector2(0,0),new Zn.Vector2(0,1),new Zn.Vector2(1,0)],[new Zn.Vector2(0,1),new Zn.Vector2(1,1),new Zn.Vector2(1,0)]]],a.translate(e+n/2,t+r/2,-5),a}}]),t}(Ba),Ti=(n(507),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-t-TextureViewerComponent"},a.a.createElement(Ai,null),a.a.createElement(Da,{renderer:(Mi||(Mi=new Gi),Mi),className:"v-t-TextureViewerComponent-renderer"}))}}]),t}(r.Component)),Ai=Object(f.a)(zi=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.load_file=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),Ii.load_file(e.file.originFileObj))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"v-t-TextureViewerComponent-toolbar"},a.a.createElement(vn.a,{accept:".xvm",showUploadList:!1,onChange:this.load_file,customRequest:function(){return!1}},a.a.createElement(xt.a,{icon:"file"},this.state.filename||"Open file...")))}}]),t}(r.Component))||zi,Wi=ht(function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"v-ViewerComponent"},a.a.createElement(Ot.a,{type:"card"},a.a.createElement(Ot.a.TabPane,{tab:"Models",key:"models"},a.a.createElement(xi,null)),a.a.createElement(Ot.a.TabPane,{tab:"Textures",key:"textures"},a.a.createElement(Ti,null))))}}]),t}(r.Component)),Ui=ht(Ga),Ni=ht(function(){return a.a.createElement("section",{className:"ho-HuntOptimizerComponent"},a.a.createElement(Ot.a,{type:"card"},a.a.createElement(pn,{tab:"Optimize",key:"optimize"},a.a.createElement(tn,null)),a.a.createElement(pn,{tab:"Methods",key:"methods"},a.a.createElement(cn,null))))}),Hi=ht(ct),qi=Object(f.a)(Pi=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={tool:n.init_tool()},n.menu_clicked=function(e){n.setState({tool:e.key})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;switch(this.state.tool){case"viewer":e=a.a.createElement(Wi,null);break;case"quest_editor":e=a.a.createElement(Ui,null);break;case"hunt_optimizer":e=a.a.createElement(Ni,null);break;case"dps_calc":e=a.a.createElement(Hi,null)}return a.a.createElement("div",{className:"ApplicationComponent"},a.a.createElement("div",{className:"ApplicationComponent-navbar"},a.a.createElement("h1",{className:"ApplicationComponent-heading"},"Phantasmal World"),a.a.createElement(c.b,{className:"ApplicationComponent-heading-menu",onClick:this.menu_clicked,selectedKeys:[this.state.tool],mode:"horizontal"},a.a.createElement(c.b.Item,{key:"viewer"},"Viewer",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"quest_editor"},"Quest Editor",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"hunt_optimizer"},"Hunt Optimizer")),a.a.createElement("div",{className:"ApplicationComponent-server-select"},a.a.createElement("span",null,"Server:"),a.a.createElement(u.a,{defaultValue:se.Ephinea,style:{width:120}},a.a.createElement(u.a.Option,{value:se.Ephinea},se.Ephinea)))),a.a.createElement("div",{className:"ApplicationComponent-main"},e))}},{key:"init_tool",value:function(){var e=window.location.search.slice(1).split("&").find(function(e){return e.startsWith("tool=")});return e?e.slice(5):"viewer"}}]),t}(a.a.Component))||Pi;n(508),n(509),n(510);l.a.useDefaults({defaultLevel:l.a[Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_LOG_LEVEL||"OFF"]}),o.a.render(a.a.createElement(qi,null),document.getElementById("phantasmal-world-root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.b18782af.chunk.js.map