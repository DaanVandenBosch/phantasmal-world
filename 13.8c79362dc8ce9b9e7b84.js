(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{QRTb:function(e,t,n){"use strict";n.r(t),n.d(t,"TextureController",(function(){return h}));var s=n("mKaR"),r=n("wtpc"),o=n("iPoI"),c=n("yub1"),u=n("NRxM"),a=n("bcBH"),i=n("/UnV"),l=n("rwco"),b=n("ouMO"),d=n("IMNf"),f=n("BAAx"),v=n("EVkk"),p=n("5cb6"),x=function(e,t,n,s){return new(n||(n=Promise))((function(r,o){function c(e){try{a(s.next(e))}catch(e){o(e)}}function u(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}a((s=s.apply(e,t||[])).next())}))};const w=l.a.get("viewer/controllers/TextureController");class h extends s.a{constructor(){super(...arguments),this._textures=Object(b.c)(),this.textures=this._textures,this.load_file=e=>x(this,void 0,void 0,(function*(){let t;try{const n=Object(r.g)(e.name).toLowerCase(),s=yield Object(o.b)(e),l=new u.a(s,a.a.Little);if("xvm"===n){const e=t=Object(c.b)(l);e.success&&(this._textures.val=e.value.textures)}else if("afs"===n){const e=Object(f.b)(w),n=Object(i.a)(l);if(e.add_result(n),n.success){const s=n.value.flatMap(t=>{var n,s,r,o;const i=new u.a(t,a.a.Little);if(Object(c.a)(i)){const t=Object(c.b)(i);return e.add_result(t),null!=(s=null===(n=t.value)||void 0===n?void 0:n.textures)?s:[]}{const t=Object(c.b)(Object(d.a)(i.seek_start(0)));return e.add_result(t),null!=(o=null===(r=t.value)||void 0===r?void 0:r.textures)?o:[]}});t=s.length?e.success(s):e.failure(),this._textures.val=s}else t=e.failure()}else w.debug(`Unsupported file extension in filename "${e.name}".`),t=Object(f.a)([{severity:p.b.Error,ui_message:"Unsupported file type."}])}catch(e){w.error("Couldn't read file.",e),t=Object(f.a)()}Object(v.a)(t,`Encountered some problems while opening "${e.name}".`,`Couldn't open "${e.name}".`)}))}}}}]);