(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{HjM1:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("39ZU"),n=i("nN8q"),o=(i("4AvX"),i("FXpb"));const r=28;class a extends n.a{constructor(t){super(t),this.element=Object(o.i)({className:"core_TabContainer"}),this.tabs=[],this.bar_element=Object(o.i)({className:"core_TabContainer_Bar"}),this.panes_element=Object(o.i)({className:"core_TabContainer_Panes"}),this.bar_mousedown=t=>{if(t.target instanceof HTMLElement){const e=t.target.dataset.key;e&&this.activate(e)}},this.bar_element.onmousedown=this.bar_mousedown;for(const e of t.tabs){const t=Object(o.r)({className:"core_TabContainer_Tab",data:{key:e.key}},e.title);this.bar_element.append(t);const i=this.disposable(new s.a(e.create_view));this.tabs.push(Object.assign(Object.assign({},e),{tab_element:t,lazy_view:i})),this.panes_element.append(i.element)}this.tabs.length&&this.activate(this.tabs[0].key),this.element.append(this.bar_element,this.panes_element),this.finalize_construction()}resize(t,e){super.resize(t,e),this.bar_element.style.width=`${t}px`,this.bar_element.style.height=`${r}px`;const i=e-r;this.panes_element.style.width=`${t}px`,this.panes_element.style.height=`${i}px`;for(const e of this.tabs)e.lazy_view.resize(t,i);return this}activate(t){for(const e of this.tabs){const i=e.key===t;i?e.tab_element.classList.add("active"):e.tab_element.classList.remove("active"),e.lazy_view.visible.val=i}}}},I7a6:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("nsCy"),n=i("rwco"),o=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};const r=n.c.get("core/persistence/Persister");class a{persist_for_server(t,e,i){this.persist(this.server_key(t,e),i)}persist(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){r.error(`Couldn't persist ${t}.`,e)}}load_for_server(t,e){return o(this,void 0,void 0,(function*(){return this.load(this.server_key(t,e))}))}load(t){return o(this,void 0,void 0,(function*(){try{const e=localStorage.getItem(t);return e&&JSON.parse(e)}catch(e){return void r.error(`Couldn't load ${t}.`,e)}}))}server_key(t,e){let i=e+".";switch(t){case s.g.Ephinea:i+="Ephinea";break;default:throw new Error(`Server ${s.g[t]} not supported.`)}return i}}},"Ix/i":function(t,e,i){"use strict";i.r(e);var s=i("HjM1"),n=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};class o extends s.a{constructor(t,e){super({class:"hunt_optimizer_HuntOptimizerView",tabs:[{title:"Optimize",key:"optimize",create_view:function(){return n(this,void 0,void 0,(function*(){return new((yield Promise.all([i.e(1),i.e(9)]).then(i.bind(null,"FNQV"))).OptimizerView)(t)}))}},{title:"Methods",key:"methods",create_view:function(){return n(this,void 0,void 0,(function*(){return new((yield Promise.all([i.e(1),i.e(11)]).then(i.bind(null,"GN66"))).MethodsView)(e)}))}},{title:"Help",key:"help",create_view:function(){return n(this,void 0,void 0,(function*(){return new((yield Promise.all([i.e(1),i.e(15)]).then(i.bind(null,"F0Xh"))).HelpView)}))}}]}),this.finalize_construction()}}var r=i("nsCy"),a=i("sZ1+");class c{constructor(t,e,i,s){if(this.id=t,this.name=e,this.episode=i,this.enemy_counts=s,!t)throw new Error("id is required.");if(!e)throw new Error("name is required.");if(!s)throw new Error("enemyCounts is required.")}}var u=i("ouMO"),h=i("ExVU");class d{constructor(t,e,i,s){if(!t)throw new Error("id is required.");if(!h.Duration.isDuration(s))throw new Error("default_time must a valid duration.");if(!e)throw new Error("name is required.");if(!i)throw new Error("quest is required.");this.id=t,this.name=e,this.episode=i.episode,this.quest=i,this.enemy_counts=i.enemy_counts,this.default_time=s,this._user_time=Object(u.e)(void 0),this.user_time=this._user_time,this.time=this.user_time.map(t=>null!=t?t:this.default_time)}set_user_time(t){return this._user_time.val=t,this}}var m=i("kcKQ"),l=i("Ya0R"),_=i("rwco"),f=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};const p=_.c.get("hunt_optimizer/stores/HuntMethodStore"),w=h.Duration.fromObject({minutes:30}),v=h.Duration.fromObject({minutes:45}),y=h.Duration.fromObject({minutes:45});function b(t,e,i){return new l.a(e,function(t,e){return i=>f(this,void 0,void 0,(function*(){const s=yield t.get(`/quests.${r.g[i].toLowerCase()}.json`).json(),n=[];for(const t of s){let e=0;const i=new Map;for(const[s,n]of Object.entries(t.enemy_counts)){const t=a.c[s];t?(i.set(t,n),e+=n):p.error(`No NpcType found for code ${s}.`)}switch(t.id){case 31:case 34:case 1305:case 1306:case 1307:case 313:case 314:continue}n.push(new d(`q${t.id}`,t.name,new c(t.id,t.name,t.episode,i),/^\d-\d.*/.test(t.name)?v:e>400?y:w))}return yield e.load_method_user_times(n,i),new g(e,i,n)}))}(t,i))}class g extends m.a{constructor(t,e,i){super(),this.methods=Object(u.c)(t=>[t.user_time],...i),this.disposables(this.methods.observe_list(()=>t.persist_method_user_times(this.methods.val,e)))}}var O=i("lLyO"),z=i.n(O);class j{constructor(t,e){this.item_type=t,this._amount=Object(u.e)(e),this.amount=this._amount}set_amount(t){return this._amount.val=t,this}}class x{constructor(t,e){this.wanted_items=t,this.optimal_methods=e}}class k{constructor(t,e,i,s,n,o,r){this.difficulty=t,this.section_ids=e,this.method_name=i,this.method_episode=s,this.method_time=n,this.runs=o,this.item_counts=r,this.total_time=h.Duration.fromMillis(o*n.as("milliseconds"))}}var M=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};function P(t,e,i,s,n){return new l.a(t,function(t,e,i,s){return n=>M(this,void 0,void 0,(function*(){return new $(t,n,yield e.get(n),yield i.get(n),yield s.get(n))}))}(e,i,s,n))}class $ extends m.a{constructor(t,e,i,s,n){super(),this.hunt_optimizer_persister=t,this.server=e,this.item_drop_store=s,this._wanted_items=Object(u.c)(t=>[t.amount]),this.wanted_items=this._wanted_items,this.optimize=(t,e)=>{if(!t.length)return;const i=new Set(t.filter(t=>t.amount.val>0).map(t=>t.item_type)),s=this.item_drop_store.enemy_drops,n={};for(const t of this.wanted_items.val)n[t.item_type.name]={min:t.amount.val};const o={},c=new Map;for(const t of e){const e=new Map;for(const[i,s]of t.enemy_counts.entries()){const t=e.get(i)||0,n=Object(a.d)(i);if(null==n.rare_type)e.set(i,t+s);else{let o,c;n.rare_type===a.c.Kondrieu?(o=1-r.c,c=r.c):(o=1-r.d,c=r.d),e.set(i,t+s*o),e.set(n.rare_type,(e.get(n.rare_type)||0)+s*c)}}const n=[e],u=e.get(a.c.PanArms);if(u){const t=new Map(e);t.delete(a.c.PanArms),t.set(a.c.Migium,u),t.set(a.c.Hidoom,u),n.push(t)}const h=e.get(a.c.PanArms2);if(h){const t=new Map(e);t.delete(a.c.PanArms2),t.set(a.c.Migium2,h),t.set(a.c.Hidoom2,h),n.push(t)}for(let e=0;e<n.length;e++){const a=n[e],u=1===e;for(const e of r.a)for(const n of r.f){const r={time:t.time.val.as("hours")};let h=!1;for(const[t,o]of a.entries()){const a=s.get_drop(e,n,t);if(a&&i.has(a.item_type)){const t=r[a.item_type.name]||0;r[a.item_type.name]=t+o*a.rate,h=!0}}if(h){const i=this.full_method_name(e,n,t,u);o[i]=r,c.set(i,{method:t,difficulty:e,section_id:n,split_pan_arms:u})}}}}const u=z.a.Solve({optimize:"time",opType:"min",constraints:n,variables:o});if(!u.feasible)return;const h=[];for(const[t,e]of Object.entries(u)){const s=c.get(t);if(s){const{method:n,difficulty:a,section_id:c,split_pan_arms:u}=s,d=e,m=o[t],l=new Map;for(const[t,e]of Object.entries(m))for(const s of i)if(t===s.name){l.set(s,d*e);break}const _=[];for(const t of r.f){let e=!0;if(t!==c){const i=o[this.full_method_name(a,t,n,u)];if(i){for(const t of Object.keys(m))if(m[t]!==i[t]){e=!1;break}}else e=!1}e&&_.push(t)}h.push(new k(a,_,n.name+(u?" (Split Pan Arms)":""),n.episode,n.time.val,d,l))}}return new x([...i],h)},this.initialize_persistence=()=>M(this,void 0,void 0,(function*(){this._wanted_items.val=yield this.hunt_optimizer_persister.load_wanted_items(this.server),this.disposable(this._wanted_items.observe(({value:t})=>{this.hunt_optimizer_persister.persist_wanted_items(this.server,t)}))})),this.huntable_item_types=i.item_types.filter(t=>s.enemy_drops.get_drops_for_item_type(t.id).length),this.result=Object(u.d)(this.optimize,this.wanted_items,n.methods),this.initialize_persistence()}add_wanted_item(t){this._wanted_items.val.find(e=>e.item_type===t)||this._wanted_items.push(new j(t,1))}remove_wanted_item(t){this._wanted_items.remove(t)}full_method_name(t,e,i,s){let n=`${t}\t${e}\t${i.id}`;return s&&(n+="\tspa"),n}}var E=i("I7a6"),T=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};const q="HuntMethodStore.methodUserTimes";class H extends E.a{persist_method_user_times(t,e){const i={};for(const e of t)null!=e.user_time.val&&(i[e.id]=e.user_time.val.as("hours"));this.persist_for_server(e,q,i)}load_method_user_times(t,e){return T(this,void 0,void 0,(function*(){const i=yield this.load_for_server(e,q);if(i)for(const e of t){const t=i[e.id];e.set_user_time(null==t?void 0:h.Duration.fromObject({hours:t}))}}))}}var N=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}c((s=s.apply(t,e||[])).next())}))};const S="HuntOptimizerStore.wantedItems";class C extends E.a{constructor(t){super(),this.item_type_stores=t}persist_wanted_items(t,e){this.persist_for_server(t,S,e.map(({item_type:t,amount:e})=>({itemTypeId:t.id,amount:e.val})))}load_wanted_items(t){return N(this,void 0,void 0,(function*(){const e=yield this.item_type_stores.get(t),i=yield this.load_for_server(t,S),s=[];if(i)for(const{itemTypeId:t,itemKindId:n,amount:o}of i){const i=null!=t?e.get_by_id(t):e.get_by_id(n);i&&s.push(new j(i,o))}return s}))}}var I=i("Tpfs");function D(t,e,i,s){const n=new I.a,r=n.add(b(t,e,new H)),a=n.add(P(e,new C(i),i,s,r));return{view:n.add(new o(a,r)),dispose(){n.dispose()}}}i.d(e,"initialize_hunt_optimizer",(function(){return D}))}}]);