(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{240:function(e,t,n){e.exports=n(513)},245:function(e,t,n){},251:function(e,t,n){},254:function(e,t,n){},293:function(e,t,n){},31:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(8),a=n(12),i=n(77),o=new i.TextDecoder("ascii"),s=new i.TextDecoder("utf-16be"),l=new i.TextDecoder("utf-16le"),u=new i.TextEncoder("ascii"),c=new i.TextEncoder("utf-16be"),d=new i.TextEncoder("utf-16le"),p=function(){function t(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(r.a)(this,t),this._size=0,this.position=void 0,this._little_endian=!1,this.buffer=void 0,this.dv=void 0,this.utf16_decoder=s,this.utf16_encoder=c,"number"===typeof n)this.buffer=new ArrayBuffer(n),this.size=0;else if(n instanceof ArrayBuffer)this.buffer=n,this.size=n.byteLength;else{if(!(n instanceof e))throw new Error("buffer_or_capacity should be an ArrayBuffer, a Buffer or a number.");this.buffer=n.buffer,this.size=n.byteLength}this.little_endian=a,this.position=0,this.dv=new DataView(this.buffer)}return Object(a.a)(t,[{key:"size",get:function(){return this._size},set:function(e){if(e<0)throw new Error("Size should be non-negative.");this.ensure_capacity(e),this._size=e}},{key:"little_endian",get:function(){return this._little_endian},set:function(e){this._little_endian=e,this.utf16_decoder=e?l:s,this.utf16_encoder=e?d:c}},{key:"bytes_left",get:function(){return this.size-this.position}},{key:"capacity",get:function(){return this.buffer.byteLength}}]),Object(a.a)(t,[{key:"seek",value:function(e){return this.seek_start(this.position+e)}},{key:"seek_start",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this.position=e,this}},{key:"seek_end",value:function(e){if(e<0||e>this.size)throw new Error("Offset ".concat(e," is out of bounds."));return this.position=this.size-e,this}},{key:"u8",value:function(){return this.dv.getUint8(this.position++)}},{key:"u16",value:function(){var e=this.dv.getUint16(this.position,this.little_endian);return this.position+=2,e}},{key:"u32",value:function(){var e=this.dv.getUint32(this.position,this.little_endian);return this.position+=4,e}},{key:"i8",value:function(){return this.dv.getInt8(this.position++)}},{key:"i16",value:function(){var e=this.dv.getInt16(this.position,this.little_endian);return this.position+=2,e}},{key:"i32",value:function(){var e=this.dv.getInt32(this.position,this.little_endian);return this.position+=4,e}},{key:"f32",value:function(){var e=this.dv.getFloat32(this.position,this.little_endian);return this.position+=4,e}},{key:"u8_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint8(this.position++));return t}},{key:"u16_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint16(this.position,this.little_endian)),this.position+=2;return t}},{key:"u32_array",value:function(e){for(var t=[],n=0;n<e;++n)t.push(this.dv.getUint32(this.position,this.little_endian)),this.position+=4;return t}},{key:"take",value:function(e){if(e<0||e>this.size-this.position)throw new Error("Size ".concat(e," out of bounds."));return this.position+=e,new t(this.buffer.slice(this.position-e,this.position),this.little_endian)}},{key:"string_ascii",value:function(e,t,n){var r=t?this.index_of_u8(0,e)-this.position:e,a=o.decode(new DataView(this.buffer,this.position,r));return this.position+=n?e:Math.min(r+1,e),a}},{key:"string_utf16",value:function(e,t,n){var r=t?this.index_of_u16(0,e)-this.position:2*Math.floor(e/2),a=this.utf16_decoder.decode(new DataView(this.buffer,this.position,r));return this.position+=n?e:Math.min(r+2,e),a}},{key:"write_u8",value:function(e){return this.ensure_capacity(this.position+1),this.dv.setUint8(this.position++,e),this.position>this.size&&(this.size=this.position),this}},{key:"write_u16",value:function(e){return this.ensure_capacity(this.position+2),this.dv.setUint16(this.position,e,this.little_endian),this.position+=2,this.position>this.size&&(this.size=this.position),this}},{key:"write_u32",value:function(e){return this.ensure_capacity(this.position+4),this.dv.setUint32(this.position,e,this.little_endian),this.position+=4,this.position>this.size&&(this.size=this.position),this}},{key:"write_i32",value:function(e){return this.ensure_capacity(this.position+4),this.dv.setInt32(this.position,e,this.little_endian),this.position+=4,this.position>this.size&&(this.size=this.position),this}},{key:"write_f32",value:function(e){return this.ensure_capacity(this.position+4),this.dv.setFloat32(this.position,e,this.little_endian),this.position+=4,this.position>this.size&&(this.size=this.position),this}},{key:"write_u8_array",value:function(e){return this.ensure_capacity(this.position+e.length),new Uint8Array(this.buffer,this.position).set(new Uint8Array(e)),this.position+=e.length,this.position>this.size&&(this.size=this.position),this}},{key:"write_cursor",value:function(e){return this.ensure_capacity(this.position+e.size),new Uint8Array(this.buffer,this.position).set(new Uint8Array(e.buffer)),this.position+=e.size,this.position>this.size&&(this.size=this.position),this}},{key:"write_string_ascii",value:function(e,t){var n=0,r=!0,a=!1,i=void 0;try{for(var o,s=u.encode(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n<t&&(this.write_u8(l),++n)}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}for(;n<t;)this.write_u8(0),++n;return this}},{key:"uint8_array_view",value:function(){return new Uint8Array(this.buffer,0,this.size)}},{key:"index_of_u8",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;++r)if(this.dv.getUint8(r)===e)return r;return this.position+t}},{key:"index_of_u16",value:function(e,t){for(var n=Math.min(this.position+t,this.size),r=this.position;r<n;r+=2)if(this.dv.getUint16(r,this.little_endian)===e)return r;return this.position+t}},{key:"ensure_capacity",value:function(e){if(e>this.capacity){var t=this.capacity||e;do{t*=2}while(t<e);var n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(this.buffer,0,this.size)),this.buffer=n,this.dv=new DataView(this.buffer)}}}]),t}()}).call(this,n(387).Buffer)},359:function(e,t,n){},360:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){},369:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},503:function(e,t,n){},507:function(e,t,n){},508:function(e,t,n){},513:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),o=n.n(i),s=n(28),l=n.n(s),u=(n(245),n(129),n(54)),c=(n(248),n(105)),d=n(8),p=n(12),h=n(20),_=n(19),m=n(21),w=n(30),f=(n(251),n(252),n(234)),v=(n(254),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={has_error:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.has_error?a.a.createElement("div",{className:"ErrorBoundary-error"},a.a.createElement("div",null,a.a.createElement(f.a,{type:"error",message:"Something went wrong."}))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{has_error:!0}}}]),t}(r.Component));function b(e){var t=function(){return a.a.createElement(v,null,a.a.createElement(e,null))};return t.displayName="".concat(e.displayName,"ErrorBoundary"),t}n(291);var y=n(163),k=(n(293),n(112),n(49)),g=(n(295),n(219)),R=(n(94),n(37)),j=n(41),O=n(17),S=n.n(O),D=n(43),x=n(29),E=n(23),C=n(16),B=n(10),L=(n(51),n(216)),M=n.n(L),F=n(5),I=n(100);function P(e){var t=Object.values(e),n=t.filter(function(e){return"number"===typeof e});return n.length?n:t}var z,G,A,T,W=function(){function e(t,n){Object(d.a)(this,e),this.keys=void 0,this.values=new Map,this.keys=P(t);var r=!0,a=!1,i=void 0;try{for(var o,s=this.keys[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this.values.set(l,n(l))}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}return Object(p.a)(e,[{key:"get",value:function(e){return this.values.get(e)}}]),e}(),U=function(){function e(t,n,r){Object(d.a)(this,e),this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=n,this.z=r}return Object(p.a)(e,[{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}(),N=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.id=t,this.name=n,this.min_atp=r,this.max_atp=a,this.ata=i,this.max_grind=o,this.required_atp=s},H=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},q=function e(t,n,r,a,i,o,s,l,u,c,p){Object(d.a)(this,e),this.id=t,this.name=n,this.atp=r,this.ata=a,this.min_evp=i,this.max_evp=o,this.min_dfp=s,this.max_dfp=l,this.mst=u,this.hp=c,this.lck=p},V=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},Z=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},Y=(z=function(){function e(t){Object(d.a)(this,e),this.type=t,Object(C.a)(this,"attribute",G,this),Object(C.a)(this,"hit",A,this),Object(C.a)(this,"grind",T,this)}return Object(p.a)(e,[{key:"grind_atp",get:function(){return 2*this.grind}}]),e}(),G=Object(B.a)(z.prototype,"attribute",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=Object(B.a)(z.prototype,"hit",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=Object(B.a)(z.prototype,"grind",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(z.prototype,"grind_atp",[F.d],Object.getOwnPropertyDescriptor(z.prototype,"grind_atp"),z.prototype),z),K=function(){function e(t,n,r,a,i,o,s){if(Object(d.a)(this,e),this.id=void 0,this.code=void 0,this.name=void 0,this.simple_name=void 0,this.ultimate_name=void 0,this.episode=void 0,this.enemy=void 0,this.rare_type=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be an integer greater than or equal to 0, got ".concat(t,"."));if(!n)throw new Error("code is required.");if(!r)throw new Error("name is required.");if(!a)throw new Error("simple_name is required.");if(!i)throw new Error("ultimate_name is required.");if(null!=o&&1!==o&&2!==o&&4!==o)throw new Error("episode should be undefined, 1, 2 or 4, got ".concat(o,"."));if("boolean"!==typeof s)throw new Error("enemy is required.");if(this.id=t,this.code=n,this.simple_name=a,this.ultimate_name=i,this.name=r,this.episode=o,this.enemy=s,e.by_code_map.set(n,this),o){var l=e.by_ep_and_name[o];l&&(l.set(a,this),l.set(i,this))}}return Object(p.a)(e,null,[{key:"by_code",value:function(e){return this.by_code_map.get(e)}},{key:"by_name_and_episode",value:function(e,t){return Ce(t),this.by_ep_and_name[t].get(e)}}]),e}();K.by_code_map=new Map,K.by_ep_and_name=[void 0,new Map,new Map,void 0,new Map],K.Unknown=void 0,K.FemaleFat=void 0,K.FemaleMacho=void 0,K.FemaleTall=void 0,K.MaleDwarf=void 0,K.MaleFat=void 0,K.MaleMacho=void 0,K.MaleOld=void 0,K.BlueSoldier=void 0,K.RedSoldier=void 0,K.Principal=void 0,K.Tekker=void 0,K.GuildLady=void 0,K.Scientist=void 0,K.Nurse=void 0,K.Irene=void 0,K.ItemShop=void 0,K.Nurse2=void 0,K.Hildebear=void 0,K.Hildeblue=void 0,K.RagRappy=void 0,K.AlRappy=void 0,K.Monest=void 0,K.Mothmant=void 0,K.SavageWolf=void 0,K.BarbarousWolf=void 0,K.Booma=void 0,K.Gobooma=void 0,K.Gigobooma=void 0,K.Dragon=void 0,K.GrassAssassin=void 0,K.PoisonLily=void 0,K.NarLily=void 0,K.NanoDragon=void 0,K.EvilShark=void 0,K.PalShark=void 0,K.GuilShark=void 0,K.PofuillySlime=void 0,K.PouillySlime=void 0,K.PanArms=void 0,K.Migium=void 0,K.Hidoom=void 0,K.DeRolLe=void 0,K.Dubchic=void 0,K.Gilchic=void 0,K.Garanz=void 0,K.SinowBeat=void 0,K.SinowGold=void 0,K.Canadine=void 0,K.Canane=void 0,K.Dubswitch=void 0,K.VolOpt=void 0,K.Delsaber=void 0,K.ChaosSorcerer=void 0,K.DarkGunner=void 0,K.DeathGunner=void 0,K.ChaosBringer=void 0,K.DarkBelra=void 0,K.Dimenian=void 0,K.LaDimenian=void 0,K.SoDimenian=void 0,K.Bulclaw=void 0,K.Bulk=void 0,K.Claw=void 0,K.DarkFalz=void 0,K.Hildebear2=void 0,K.Hildeblue2=void 0,K.RagRappy2=void 0,K.LoveRappy=void 0,K.StRappy=void 0,K.HalloRappy=void 0,K.EggRappy=void 0,K.Monest2=void 0,K.Mothmant2=void 0,K.PoisonLily2=void 0,K.NarLily2=void 0,K.GrassAssassin2=void 0,K.Dimenian2=void 0,K.LaDimenian2=void 0,K.SoDimenian2=void 0,K.DarkBelra2=void 0,K.BarbaRay=void 0,K.SavageWolf2=void 0,K.BarbarousWolf2=void 0,K.PanArms2=void 0,K.Migium2=void 0,K.Hidoom2=void 0,K.Dubchic2=void 0,K.Gilchic2=void 0,K.Garanz2=void 0,K.Dubswitch2=void 0,K.Delsaber2=void 0,K.ChaosSorcerer2=void 0,K.GolDragon=void 0,K.SinowBerill=void 0,K.SinowSpigell=void 0,K.Merillia=void 0,K.Meriltas=void 0,K.Mericarol=void 0,K.Mericus=void 0,K.Merikle=void 0,K.UlGibbon=void 0,K.ZolGibbon=void 0,K.Gibbles=void 0,K.Gee=void 0,K.GiGue=void 0,K.IllGill=void 0,K.DelLily=void 0,K.Epsilon=void 0,K.GalGryphon=void 0,K.Deldepth=void 0,K.Delbiter=void 0,K.Dolmolm=void 0,K.Dolmdarl=void 0,K.Morfos=void 0,K.Recobox=void 0,K.Recon=void 0,K.SinowZoa=void 0,K.SinowZele=void 0,K.OlgaFlow=void 0,K.SandRappy=void 0,K.DelRappy=void 0,K.Astark=void 0,K.SatelliteLizard=void 0,K.Yowie=void 0,K.MerissaA=void 0,K.MerissaAA=void 0,K.Girtablulu=void 0,K.Zu=void 0,K.Pazuzu=void 0,K.Boota=void 0,K.ZeBoota=void 0,K.BaBoota=void 0,K.Dorphon=void 0,K.DorphonEclair=void 0,K.Goran=void 0,K.PyroGoran=void 0,K.GoranDetonator=void 0,K.SaintMilion=void 0,K.Shambertin=void 0,K.Kondrieu=void 0,function(){var e=0;K.Unknown=new K(e++,"Unknown","Unknown","Unknown","Unknown",void 0,!1),K.FemaleFat=new K(e++,"FemaleFat","Female Fat","Female Fat","Female Fat",void 0,!1),K.FemaleMacho=new K(e++,"FemaleMacho","Female Macho","Female Macho","Female Macho",void 0,!1),K.FemaleTall=new K(e++,"FemaleTall","Female Tall","Female Tall","Female Tall",void 0,!1),K.MaleDwarf=new K(e++,"MaleDwarf","Male Dwarf","Male Dwarf","Male Dwarf",void 0,!1),K.MaleFat=new K(e++,"MaleFat","Male Fat","Male Fat","Male Fat",void 0,!1),K.MaleMacho=new K(e++,"MaleMacho","Male Macho","Male Macho","Male Macho",void 0,!1),K.MaleOld=new K(e++,"MaleOld","Male Old","Male Old","Male Old",void 0,!1),K.BlueSoldier=new K(e++,"BlueSoldier","Blue Soldier","Blue Soldier","Blue Soldier",void 0,!1),K.RedSoldier=new K(e++,"RedSoldier","Red Soldier","Red Soldier","Red Soldier",void 0,!1),K.Principal=new K(e++,"Principal","Principal","Principal","Principal",void 0,!1),K.Tekker=new K(e++,"Tekker","Tekker","Tekker","Tekker",void 0,!1),K.GuildLady=new K(e++,"GuildLady","Guild Lady","Guild Lady","Guild Lady",void 0,!1),K.Scientist=new K(e++,"Scientist","Scientist","Scientist","Scientist",void 0,!1),K.Nurse=new K(e++,"Nurse","Nurse","Nurse","Nurse",void 0,!1),K.Irene=new K(e++,"Irene","Irene","Irene","Irene",void 0,!1),K.ItemShop=new K(e++,"ItemShop","Item Shop","Item Shop","Item Shop",void 0,!1),K.Nurse2=new K(e++,"Nurse2","Nurse (Ep. II)","Nurse","Nurse",2,!1),K.Hildebear=new K(e++,"Hildebear","Hildebear","Hildebear","Hildelt",1,!0),K.Hildeblue=new K(e++,"Hildeblue","Hildeblue","Hildeblue","Hildetorr",1,!0),K.Hildebear.rare_type=K.Hildeblue,K.RagRappy=new K(e++,"RagRappy","Rag Rappy","Rag Rappy","El Rappy",1,!0),K.AlRappy=new K(e++,"AlRappy","Al Rappy","Al Rappy","Pal Rappy",1,!0),K.RagRappy.rare_type=K.AlRappy,K.Monest=new K(e++,"Monest","Monest","Monest","Mothvist",1,!0),K.Mothmant=new K(e++,"Mothmant","Mothmant","Mothmant","Mothvert",1,!0),K.SavageWolf=new K(e++,"SavageWolf","Savage Wolf","Savage Wolf","Gulgus",1,!0),K.BarbarousWolf=new K(e++,"BarbarousWolf","Barbarous Wolf","Barbarous Wolf","Gulgus-Gue",1,!0),K.Booma=new K(e++,"Booma","Booma","Booma","Bartle",1,!0),K.Gobooma=new K(e++,"Gobooma","Gobooma","Gobooma","Barble",1,!0),K.Gigobooma=new K(e++,"Gigobooma","Gigobooma","Gigobooma","Tollaw",1,!0),K.Dragon=new K(e++,"Dragon","Dragon","Dragon","Sil Dragon",1,!0),K.GrassAssassin=new K(e++,"GrassAssassin","Grass Assassin","Grass Assassin","Crimson Assassin",1,!0),K.PoisonLily=new K(e++,"PoisonLily","Poison Lily","Poison Lily","Ob Lily",1,!0),K.NarLily=new K(e++,"NarLily","Nar Lily","Nar Lily","Mil Lily",1,!0),K.PoisonLily.rare_type=K.NarLily,K.NanoDragon=new K(e++,"NanoDragon","Nano Dragon","Nano Dragon","Nano Dragon",1,!0),K.EvilShark=new K(e++,"EvilShark","Evil Shark","Evil Shark","Vulmer",1,!0),K.PalShark=new K(e++,"PalShark","Pal Shark","Pal Shark","Govulmer",1,!0),K.GuilShark=new K(e++,"GuilShark","Guil Shark","Guil Shark","Melqueek",1,!0),K.PofuillySlime=new K(e++,"PofuillySlime","Pofuilly Slime","Pofuilly Slime","Pofuilly Slime",1,!0),K.PouillySlime=new K(e++,"PouillySlime","Pouilly Slime","Pouilly Slime","Pouilly Slime",1,!0),K.PofuillySlime.rare_type=K.PouillySlime,K.PanArms=new K(e++,"PanArms","Pan Arms","Pan Arms","Pan Arms",1,!0),K.Migium=new K(e++,"Migium","Migium","Migium","Migium",1,!0),K.Hidoom=new K(e++,"Hidoom","Hidoom","Hidoom","Hidoom",1,!0),K.DeRolLe=new K(e++,"DeRolLe","De Rol Le","De Rol Le","Dal Ra Lie",1,!0),K.Dubchic=new K(e++,"Dubchic","Dubchic","Dubchic","Dubchich",1,!0),K.Gilchic=new K(e++,"Gilchic","Gilchic","Gilchic","Gilchich",1,!0),K.Garanz=new K(e++,"Garanz","Garanz","Garanz","Baranz",1,!0),K.SinowBeat=new K(e++,"SinowBeat","Sinow Beat","Sinow Beat","Sinow Blue",1,!0),K.SinowGold=new K(e++,"SinowGold","Sinow Gold","Sinow Gold","Sinow Red",1,!0),K.Canadine=new K(e++,"Canadine","Canadine","Canadine","Canabin",1,!0),K.Canane=new K(e++,"Canane","Canane","Canane","Canune",1,!0),K.Dubswitch=new K(e++,"Dubswitch","Dubswitch","Dubswitch","Dubswitch",1,!0),K.VolOpt=new K(e++,"VolOpt","Vol Opt","Vol Opt","Vol Opt ver.2",1,!0),K.Delsaber=new K(e++,"Delsaber","Delsaber","Delsaber","Delsaber",1,!0),K.ChaosSorcerer=new K(e++,"ChaosSorcerer","Chaos Sorcerer","Chaos Sorcerer","Gran Sorcerer",1,!0),K.DarkGunner=new K(e++,"DarkGunner","Dark Gunner","Dark Gunner","Dark Gunner",1,!0),K.DeathGunner=new K(e++,"DeathGunner","Death Gunner","Death Gunner","Death Gunner",1,!0),K.ChaosBringer=new K(e++,"ChaosBringer","Chaos Bringer","Chaos Bringer","Dark Bringer",1,!0),K.DarkBelra=new K(e++,"DarkBelra","Dark Belra","Dark Belra","Indi Belra",1,!0),K.Dimenian=new K(e++,"Dimenian","Dimenian","Dimenian","Arlan",1,!0),K.LaDimenian=new K(e++,"LaDimenian","La Dimenian","La Dimenian","Merlan",1,!0),K.SoDimenian=new K(e++,"SoDimenian","So Dimenian","So Dimenian","Del-D",1,!0),K.Bulclaw=new K(e++,"Bulclaw","Bulclaw","Bulclaw","Bulclaw",1,!0),K.Bulk=new K(e++,"Bulk","Bulk","Bulk","Bulk",1,!0),K.Claw=new K(e++,"Claw","Claw","Claw","Claw",1,!0),K.DarkFalz=new K(e++,"DarkFalz","Dark Falz","Dark Falz","Dark Falz",1,!0),K.Hildebear2=new K(e++,"Hildebear2","Hildebear (Ep. II)","Hildebear","Hildelt",2,!0),K.Hildeblue2=new K(e++,"Hildeblue2","Hildeblue (Ep. II)","Hildeblue","Hildetorr",2,!0),K.Hildebear2.rare_type=K.Hildeblue2,K.RagRappy2=new K(e++,"RagRappy2","Rag Rappy (Ep. II)","Rag Rappy","El Rappy",2,!0),K.LoveRappy=new K(e++,"LoveRappy","Love Rappy","Love Rappy","Love Rappy",2,!0),K.RagRappy2.rare_type=K.LoveRappy,K.StRappy=new K(e++,"StRappy","St. Rappy","St. Rappy","St. Rappy",2,!0),K.HalloRappy=new K(e++,"HalloRappy","Hallo Rappy","Hallo Rappy","Hallo Rappy",2,!0),K.EggRappy=new K(e++,"EggRappy","Egg Rappy","Egg Rappy","Egg Rappy",2,!0),K.Monest2=new K(e++,"Monest2","Monest (Ep. II)","Monest","Mothvist",2,!0),K.Mothmant2=new K(e++,"Mothmant2","Mothmant","Mothmant","Mothvert",2,!0),K.PoisonLily2=new K(e++,"PoisonLily2","Poison Lily (Ep. II)","Poison Lily","Ob Lily",2,!0),K.NarLily2=new K(e++,"NarLily2","Nar Lily (Ep. II)","Nar Lily","Mil Lily",2,!0),K.PoisonLily2.rare_type=K.NarLily2,K.GrassAssassin2=new K(e++,"GrassAssassin2","Grass Assassin (Ep. II)","Grass Assassin","Crimson Assassin",2,!0),K.Dimenian2=new K(e++,"Dimenian2","Dimenian (Ep. II)","Dimenian","Arlan",2,!0),K.LaDimenian2=new K(e++,"LaDimenian2","La Dimenian (Ep. II)","La Dimenian","Merlan",2,!0),K.SoDimenian2=new K(e++,"SoDimenian2","So Dimenian (Ep. II)","So Dimenian","Del-D",2,!0),K.DarkBelra2=new K(e++,"DarkBelra2","Dark Belra (Ep. II)","Dark Belra","Indi Belra",2,!0),K.BarbaRay=new K(e++,"BarbaRay","Barba Ray","Barba Ray","Barba Ray",2,!0),K.SavageWolf2=new K(e++,"SavageWolf2","Savage Wolf (Ep. II)","Savage Wolf","Gulgus",2,!0),K.BarbarousWolf2=new K(e++,"BarbarousWolf2","Barbarous Wolf (Ep. II)","Barbarous Wolf","Gulgus-Gue",2,!0),K.PanArms2=new K(e++,"PanArms2","Pan Arms (Ep. II)","Pan Arms","Pan Arms",2,!0),K.Migium2=new K(e++,"Migium2","Migium (Ep. II)","Migium","Migium",2,!0),K.Hidoom2=new K(e++,"Hidoom2","Hidoom (Ep. II)","Hidoom","Hidoom",2,!0),K.Dubchic2=new K(e++,"Dubchic2","Dubchic (Ep. II)","Dubchic","Dubchich",2,!0),K.Gilchic2=new K(e++,"Gilchic2","Gilchic (Ep. II)","Gilchic","Gilchich",2,!0),K.Garanz2=new K(e++,"Garanz2","Garanz (Ep. II)","Garanz","Baranz",2,!0),K.Dubswitch2=new K(e++,"Dubswitch2","Dubswitch (Ep. II)","Dubswitch","Dubswitch",2,!0),K.Delsaber2=new K(e++,"Delsaber2","Delsaber (Ep. II)","Delsaber","Delsaber",2,!0),K.ChaosSorcerer2=new K(e++,"ChaosSorcerer2","Chaos Sorcerer (Ep. II)","Chaos Sorcerer","Gran Sorcerer",2,!0),K.GolDragon=new K(e++,"GolDragon","Gol Dragon","Gol Dragon","Gol Dragon",2,!0),K.SinowBerill=new K(e++,"SinowBerill","Sinow Berill","Sinow Berill","Sinow Berill",2,!0),K.SinowSpigell=new K(e++,"SinowSpigell","Sinow Spigell","Sinow Spigell","Sinow Spigell",2,!0),K.Merillia=new K(e++,"Merillia","Merillia","Merillia","Merillia",2,!0),K.Meriltas=new K(e++,"Meriltas","Meriltas","Meriltas","Meriltas",2,!0),K.Mericarol=new K(e++,"Mericarol","Mericarol","Mericarol","Mericarol",2,!0),K.Mericus=new K(e++,"Mericus","Mericus","Mericus","Mericus",2,!0),K.Merikle=new K(e++,"Merikle","Merikle","Merikle","Merikle",2,!0),K.UlGibbon=new K(e++,"UlGibbon","Ul Gibbon","Ul Gibbon","Ul Gibbon",2,!0),K.ZolGibbon=new K(e++,"ZolGibbon","Zol Gibbon","Zol Gibbon","Zol Gibbon",2,!0),K.Gibbles=new K(e++,"Gibbles","Gibbles","Gibbles","Gibbles",2,!0),K.Gee=new K(e++,"Gee","Gee","Gee","Gee",2,!0),K.GiGue=new K(e++,"GiGue","Gi Gue","Gi Gue","Gi Gue",2,!0),K.IllGill=new K(e++,"IllGill","Ill Gill","Ill Gill","Ill Gill",2,!0),K.DelLily=new K(e++,"DelLily","Del Lily","Del Lily","Del Lily",2,!0),K.Epsilon=new K(e++,"Epsilon","Epsilon","Epsilon","Epsilon",2,!0),K.GalGryphon=new K(e++,"GalGryphon","Gal Gryphon","Gal Gryphon","Gal Gryphon",2,!0),K.Deldepth=new K(e++,"Deldepth","Deldepth","Deldepth","Deldepth",2,!0),K.Delbiter=new K(e++,"Delbiter","Delbiter","Delbiter","Delbiter",2,!0),K.Dolmolm=new K(e++,"Dolmolm","Dolmolm","Dolmolm","Dolmolm",2,!0),K.Dolmdarl=new K(e++,"Dolmdarl","Dolmdarl","Dolmdarl","Dolmdarl",2,!0),K.Morfos=new K(e++,"Morfos","Morfos","Morfos","Morfos",2,!0),K.Recobox=new K(e++,"Recobox","Recobox","Recobox","Recobox",2,!0),K.Recon=new K(e++,"Recon","Recon","Recon","Recon",2,!0),K.SinowZoa=new K(e++,"SinowZoa","Sinow Zoa","Sinow Zoa","Sinow Zoa",2,!0),K.SinowZele=new K(e++,"SinowZele","Sinow Zele","Sinow Zele","Sinow Zele",2,!0),K.OlgaFlow=new K(e++,"OlgaFlow","Olga Flow","Olga Flow","Olga Flow",2,!0),K.SandRappy=new K(e++,"SandRappy","Sand Rappy","Sand Rappy","Sand Rappy",4,!0),K.DelRappy=new K(e++,"DelRappy","Del Rappy","Del Rappy","Del Rappy",4,!0),K.SandRappy.rare_type=K.DelRappy,K.Astark=new K(e++,"Astark","Astark","Astark","Astark",4,!0),K.SatelliteLizard=new K(e++,"SatelliteLizard","Satellite Lizard","Satellite Lizard","Satellite Lizard",4,!0),K.Yowie=new K(e++,"Yowie","Yowie","Yowie","Yowie",4,!0),K.MerissaA=new K(e++,"MerissaA","Merissa A","Merissa A","Merissa A",4,!0),K.MerissaAA=new K(e++,"MerissaAA","Merissa AA","Merissa AA","Merissa AA",4,!0),K.MerissaA.rare_type=K.MerissaAA,K.Girtablulu=new K(e++,"Girtablulu","Girtablulu","Girtablulu","Girtablulu",4,!0),K.Zu=new K(e++,"Zu","Zu","Zu","Zu",4,!0),K.Pazuzu=new K(e++,"Pazuzu","Pazuzu","Pazuzu","Pazuzu",4,!0),K.Zu.rare_type=K.Pazuzu,K.Boota=new K(e++,"Boota","Boota","Boota","Boota",4,!0),K.ZeBoota=new K(e++,"ZeBoota","Ze Boota","Ze Boota","Ze Boota",4,!0),K.BaBoota=new K(e++,"BaBoota","Ba Boota","Ba Boota","Ba Boota",4,!0),K.Dorphon=new K(e++,"Dorphon","Dorphon","Dorphon","Dorphon",4,!0),K.DorphonEclair=new K(e++,"DorphonEclair","Dorphon Eclair","Dorphon Eclair","Dorphon Eclair",4,!0),K.Dorphon.rare_type=K.DorphonEclair,K.Goran=new K(e++,"Goran","Goran","Goran","Goran",4,!0),K.PyroGoran=new K(e++,"PyroGoran","Pyro Goran","Pyro Goran","Pyro Goran",4,!0),K.GoranDetonator=new K(e++,"GoranDetonator","Goran Detonator","Goran Detonator","Goran Detonator",4,!0),K.SaintMilion=new K(e++,"SaintMilion","Saint-Milion","Saint-Milion","Saint-Milion",4,!0),K.Shambertin=new K(e++,"Shambertin","Shambertin","Shambertin","Shambertin",4,!0),K.Kondrieu=new K(e++,"Kondrieu","Kondrieu","Kondrieu","Kondrieu",4,!0),K.SaintMilion.rare_type=K.Kondrieu,K.Shambertin.rare_type=K.Kondrieu}();var Q,J,X,$,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de,pe,he,_e,me,we,fe,ve,be,ye,ke,ge=[K.Unknown,K.FemaleFat,K.FemaleMacho,K.FemaleTall,K.MaleDwarf,K.MaleFat,K.MaleMacho,K.MaleOld,K.BlueSoldier,K.RedSoldier,K.Principal,K.Tekker,K.GuildLady,K.Scientist,K.Nurse,K.Irene,K.ItemShop,K.Nurse2,K.Hildebear,K.Hildeblue,K.RagRappy,K.AlRappy,K.Monest,K.Mothmant,K.SavageWolf,K.BarbarousWolf,K.Booma,K.Gobooma,K.Gigobooma,K.Dragon,K.GrassAssassin,K.PoisonLily,K.NarLily,K.NanoDragon,K.EvilShark,K.PalShark,K.GuilShark,K.PofuillySlime,K.PouillySlime,K.PanArms,K.Migium,K.Hidoom,K.DeRolLe,K.Dubchic,K.Gilchic,K.Garanz,K.SinowBeat,K.SinowGold,K.Canadine,K.Canane,K.Dubswitch,K.VolOpt,K.Delsaber,K.ChaosSorcerer,K.DarkGunner,K.DeathGunner,K.ChaosBringer,K.DarkBelra,K.Dimenian,K.LaDimenian,K.SoDimenian,K.Bulclaw,K.Bulk,K.Claw,K.DarkFalz,K.Hildebear2,K.Hildeblue2,K.RagRappy2,K.LoveRappy,K.StRappy,K.HalloRappy,K.EggRappy,K.Monest2,K.Mothmant2,K.PoisonLily2,K.NarLily2,K.GrassAssassin2,K.Dimenian2,K.LaDimenian2,K.SoDimenian2,K.DarkBelra2,K.BarbaRay,K.SavageWolf2,K.BarbarousWolf2,K.PanArms2,K.Migium2,K.Hidoom2,K.Dubchic2,K.Gilchic2,K.Garanz2,K.Dubswitch2,K.Delsaber2,K.ChaosSorcerer2,K.GolDragon,K.SinowBerill,K.SinowSpigell,K.Merillia,K.Meriltas,K.Mericarol,K.Mericus,K.Merikle,K.UlGibbon,K.ZolGibbon,K.Gibbles,K.Gee,K.GiGue,K.IllGill,K.DelLily,K.Epsilon,K.GalGryphon,K.Deldepth,K.Delbiter,K.Dolmolm,K.Dolmdarl,K.Morfos,K.Recobox,K.Recon,K.SinowZoa,K.SinowZele,K.OlgaFlow,K.SandRappy,K.DelRappy,K.Astark,K.SatelliteLizard,K.Yowie,K.MerissaA,K.MerissaAA,K.Girtablulu,K.Zu,K.Pazuzu,K.Boota,K.ZeBoota,K.BaBoota,K.Dorphon,K.DorphonEclair,K.Goran,K.PyroGoran,K.GoranDetonator,K.SaintMilion,K.Shambertin,K.Kondrieu],Re=ge.filter(function(e){return e.enemy}),je=function(){function e(t,n,r){if(Object(d.a)(this,e),this.id=void 0,this.pso_id=void 0,this.name=void 0,!Number.isInteger(t)||t<1)throw new Error("Expected id to be an integer greater than or equal to 1, got ".concat(t,"."));if(null!=n&&(!Number.isInteger(n)||n<0))throw new Error("Expected pso_id to be null or an integer greater than or equal to 0, got ".concat(n,"."));if(!r)throw new Error("name is required.");this.id=t,this.pso_id=n,this.name=r}return Object(p.a)(e,null,[{key:"from_pso_id",value:function(t){switch(t){default:return e.Unknown;case 0:return e.PlayerSet;case 1:return e.Particle;case 2:return e.Teleporter;case 3:return e.Warp;case 4:return e.LightCollision;case 5:return e.Item;case 6:return e.EnvSound;case 7:return e.FogCollision;case 8:return e.EventCollision;case 9:return e.CharaCollision;case 10:return e.ElementalTrap;case 11:return e.StatusTrap;case 12:return e.HealTrap;case 13:return e.LargeElementalTrap;case 14:return e.ObjRoomID;case 15:return e.Sensor;case 16:return e.UnknownItem16;case 17:return e.Lensflare;case 18:return e.ScriptCollision;case 19:return e.HealRing;case 20:return e.MapCollision;case 21:return e.ScriptCollisionA;case 22:return e.ItemLight;case 23:return e.RadarCollision;case 24:return e.FogCollisionSW;case 25:return e.BossTeleporter;case 26:return e.ImageBoard;case 27:return e.QuestWarp;case 28:return e.Epilogue;case 29:return e.UnknownItem29;case 30:return e.UnknownItem30;case 31:return e.UnknownItem31;case 32:return e.BoxDetectObject;case 33:return e.SymbolChatObject;case 34:return e.TouchPlateObject;case 35:return e.TargetableObject;case 36:return e.EffectObject;case 37:return e.CountDownObject;case 38:return e.UnknownItem38;case 39:return e.UnknownItem39;case 40:return e.UnknownItem40;case 41:return e.UnknownItem41;case 64:return e.MenuActivation;case 65:return e.TelepipeLocation;case 66:return e.BGMCollision;case 67:return e.MainRagolTeleporter;case 68:return e.LobbyTeleporter;case 69:return e.PrincipalWarp;case 70:return e.ShopDoor;case 71:return e.HuntersGuildDoor;case 72:return e.TeleporterDoor;case 73:return e.MedicalCenterDoor;case 74:return e.Elevator;case 75:return e.EasterEgg;case 76:return e.ValentinesHeart;case 77:return e.ChristmasTree;case 78:return e.ChristmasWreath;case 79:return e.HalloweenPumpkin;case 80:return e.TwentyFirstCentury;case 81:return e.Sonic;case 82:return e.WelcomeBoard;case 83:return e.Firework;case 84:return e.LobbyScreenDoor;case 85:return e.MainRagolTeleporterBattleInNextArea;case 86:return e.LabTeleporterDoor;case 87:return e.Pioneer2InvisibleTouchplate;case 128:return e.ForestDoor;case 129:return e.ForestSwitch;case 130:return e.LaserFence;case 131:return e.LaserSquareFence;case 132:return e.ForestLaserFenceSwitch;case 133:return e.LightRays;case 134:return e.BlueButterfly;case 135:return e.Probe;case 136:return e.RandomTypeBox1;case 137:return e.ForestWeatherStation;case 138:return e.Battery;case 139:return e.ForestConsole;case 140:return e.BlackSlidingDoor;case 141:return e.RicoMessagePod;case 142:return e.EnergyBarrier;case 143:return e.ForestRisingBridge;case 144:return e.SwitchNoneDoor;case 145:return e.EnemyBoxGrey;case 146:return e.FixedTypeBox;case 147:return e.EnemyBoxBrown;case 149:return e.EmptyTypeBox;case 150:return e.LaserFenseEx;case 151:return e.LaserSquareFenceEx;case 192:return e.FloorPanel1;case 193:return e.Caves4ButtonDoor;case 194:return e.CavesNormalDoor;case 195:return e.CavesSmashingPillar;case 196:return e.CavesSign1;case 197:return e.CavesSign2;case 198:return e.CavesSign3;case 199:return e.HexagalTank;case 200:return e.BrownPlatform;case 201:return e.WarningLightObject;case 203:return e.Rainbow;case 204:return e.FloatingJelifish;case 205:return e.FloatingDragonfly;case 206:return e.CavesSwitchDoor;case 207:return e.RobotRechargeStation;case 208:return e.CavesCakeShop;case 209:return e.Caves1SmallRedRock;case 210:return e.Caves1MediumRedRock;case 211:return e.Caves1LargeRedRock;case 212:return e.Caves2SmallRock1;case 213:return e.Caves2MediumRock1;case 214:return e.Caves2LargeRock1;case 215:return e.Caves2SmallRock2;case 216:return e.Caves2MediumRock2;case 217:return e.Caves2LargeRock2;case 218:return e.Caves3SmallRock;case 219:return e.Caves3MediumRock;case 220:return e.Caves3LargeRock;case 222:return e.FloorPanel2;case 223:return e.DestructableRockCaves1;case 224:return e.DestructableRockCaves2;case 225:return e.DestructableRockCaves3;case 256:return e.MinesDoor;case 257:return e.FloorPanel3;case 258:return e.MinesSwitchDoor;case 259:return e.LargeCryoTube;case 260:return e.ComputerLikeCalus;case 261:return e.GreenScreenOpeningAndClosing;case 262:return e.FloatingRobot;case 263:return e.FloatingBlueLight;case 264:return e.SelfDestructingObject1;case 265:return e.SelfDestructingObject2;case 266:return e.SelfDestructingObject3;case 267:return e.SparkMachine;case 268:return e.MinesLargeFlashingCrate;case 304:return e.RuinsSeal;case 320:return e.RuinsTeleporter;case 321:return e.RuinsWarpSiteToSite;case 322:return e.RuinsSwitch;case 323:return e.FloorPanel4;case 324:return e.Ruins1Door;case 325:return e.Ruins3Door;case 326:return e.Ruins2Door;case 327:return e.Ruins11ButtonDoor;case 328:return e.Ruins21ButtonDoor;case 329:return e.Ruins31ButtonDoor;case 330:return e.Ruins4ButtonDoor;case 331:return e.Ruins2ButtonDoor;case 332:return e.RuinsSensor;case 333:return e.RuinsFenceSwitch;case 334:return e.RuinsLaserFence4x2;case 335:return e.RuinsLaserFence6x2;case 336:return e.RuinsLaserFence4x4;case 337:return e.RuinsLaserFence6x4;case 338:return e.RuinsPoisonBlob;case 339:return e.RuinsPilarTrap;case 340:return e.PopupTrapNoTech;case 341:return e.RuinsCrystal;case 342:return e.Monument;case 345:return e.RuinsRock1;case 346:return e.RuinsRock2;case 347:return e.RuinsRock3;case 348:return e.RuinsRock4;case 349:return e.RuinsRock5;case 350:return e.RuinsRock6;case 351:return e.RuinsRock7;case 352:return e.Poison;case 353:return e.FixedBoxTypeRuins;case 354:return e.RandomBoxTypeRuins;case 355:return e.EnemyTypeBoxYellow;case 356:return e.EnemyTypeBoxBlue;case 357:return e.EmptyTypeBoxBlue;case 358:return e.DestructableRock;case 359:return e.PopupTrapsTechs;case 368:return e.FlyingWhiteBird;case 369:return e.Tower;case 370:return e.FloatingRocks;case 371:return e.FloatingSoul;case 372:return e.Butterfly;case 384:return e.LobbyGameMenu;case 385:return e.LobbyWarpObject;case 386:return e.Lobby1EventObjectDefaultTree;case 387:return e.UnknownItem387;case 388:return e.UnknownItem388;case 389:return e.UnknownItem389;case 390:return e.LobbyEventObjectStaticPumpkin;case 391:return e.LobbyEventObject3ChristmasWindows;case 392:return e.LobbyEventObjectRedAndWhiteCurtain;case 393:return e.UnknownItem393;case 394:return e.UnknownItem394;case 395:return e.LobbyFishTank;case 396:return e.LobbyEventObjectButterflies;case 400:return e.UnknownItem400;case 401:return e.GreyWallLow;case 402:return e.SpaceshipDoor;case 403:return e.GreyWallHigh;case 416:return e.TempleNormalDoor;case 417:return e.BreakableWallWallButUnbreakable;case 418:return e.BrokenCilinderAndRubble;case 419:return e.ThreeBrokenWallPiecesOnFloor;case 420:return e.HighBrickCilinder;case 421:return e.LyingCilinder;case 422:return e.BrickConeWithFlatTop;case 423:return e.BreakableTempleWall;case 424:return e.TempleMapDetect;case 425:return e.SmallBrownBrickRisingBridge;case 426:return e.LongRisingBridgeWithPinkHighEdges;case 427:return e.FourSwitchTempleDoor;case 448:return e.FourButtonSpaceshipDoor;case 512:return e.ItemBoxCca;case 513:return e.TeleporterEp2;case 514:return e.CCADoor;case 515:return e.SpecialBoxCCA;case 516:return e.BigCCADoor;case 517:return e.BigCCADoorSwitch;case 518:return e.LittleRock;case 519:return e.Little3StoneWall;case 520:return e.Medium3StoneWall;case 521:return e.SpiderPlant;case 522:return e.CCAAreaTeleporter;case 523:return e.UnknownItem523;case 524:return e.WhiteBird;case 525:return e.OrangeBird;case 527:return e.Saw;case 528:return e.LaserDetect;case 529:return e.UnknownItem529;case 530:return e.UnknownItem530;case 531:return e.Seagull;case 544:return e.Fish;case 545:return e.SeabedDoorWithBlueEdges;case 546:return e.SeabedDoorAlwaysOpenNonTriggerable;case 547:return e.LittleCryotube;case 548:return e.WideGlassWallBreakable;case 549:return e.BlueFloatingRobot;case 550:return e.RedFloatingRobot;case 551:return e.Dolphin;case 552:return e.CaptureTrap;case 553:return e.VRLink;case 576:return e.UnknownItem576;case 640:return e.WarpInBarbaRayRoom;case 672:return e.UnknownItem672;case 688:return e.GeeNest;case 689:return e.LabComputerConsole;case 690:return e.LabComputerConsoleGreenScreen;case 691:return e.ChairYelllowPillow;case 692:return e.OrangeWallWithHoleInMiddle;case 693:return e.GreyWallWithHoleInMiddle;case 694:return e.LongTable;case 695:return e.GBAStation;case 696:return e.TalkLinkToSupport;case 697:return e.InstaWarp;case 698:return e.LabInvisibleObject;case 699:return e.LabGlassWindowDoor;case 700:return e.UnknownItem700;case 701:return e.LabCelingWarp;case 768:return e.Ep4LightSource;case 769:return e.Cacti;case 770:return e.BigBrownRock;case 771:return e.BreakableBrownRock;case 832:return e.UnknownItem832;case 833:return e.UnknownItem833;case 896:return e.PoisonPlant;case 897:return e.UnknownItem897;case 898:return e.UnknownItem898;case 899:return e.OozingDesertPlant;case 901:return e.UnknownItem901;case 902:return e.BigBlackRocks;case 903:return e.UnknownItem903;case 904:return e.UnknownItem904;case 905:return e.UnknownItem905;case 906:return e.UnknownItem906;case 907:return e.FallingRock;case 908:return e.DesertPlantHasCollision;case 909:return e.DesertFixedTypeBoxBreakableCrystals;case 910:return e.UnknownItem910;case 911:return e.BeeHive;case 912:return e.UnknownItem912;case 913:return e.Heat;case 960:return e.TopOfSaintMillionEgg;case 961:return e.UnknownItem961}}}]),e}();je.Unknown=void 0,je.PlayerSet=void 0,je.Particle=void 0,je.Teleporter=void 0,je.Warp=void 0,je.LightCollision=void 0,je.Item=void 0,je.EnvSound=void 0,je.FogCollision=void 0,je.EventCollision=void 0,je.CharaCollision=void 0,je.ElementalTrap=void 0,je.StatusTrap=void 0,je.HealTrap=void 0,je.LargeElementalTrap=void 0,je.ObjRoomID=void 0,je.Sensor=void 0,je.UnknownItem16=void 0,je.Lensflare=void 0,je.ScriptCollision=void 0,je.HealRing=void 0,je.MapCollision=void 0,je.ScriptCollisionA=void 0,je.ItemLight=void 0,je.RadarCollision=void 0,je.FogCollisionSW=void 0,je.BossTeleporter=void 0,je.ImageBoard=void 0,je.QuestWarp=void 0,je.Epilogue=void 0,je.UnknownItem29=void 0,je.UnknownItem30=void 0,je.UnknownItem31=void 0,je.BoxDetectObject=void 0,je.SymbolChatObject=void 0,je.TouchPlateObject=void 0,je.TargetableObject=void 0,je.EffectObject=void 0,je.CountDownObject=void 0,je.UnknownItem38=void 0,je.UnknownItem39=void 0,je.UnknownItem40=void 0,je.UnknownItem41=void 0,je.MenuActivation=void 0,je.TelepipeLocation=void 0,je.BGMCollision=void 0,je.MainRagolTeleporter=void 0,je.LobbyTeleporter=void 0,je.PrincipalWarp=void 0,je.ShopDoor=void 0,je.HuntersGuildDoor=void 0,je.TeleporterDoor=void 0,je.MedicalCenterDoor=void 0,je.Elevator=void 0,je.EasterEgg=void 0,je.ValentinesHeart=void 0,je.ChristmasTree=void 0,je.ChristmasWreath=void 0,je.HalloweenPumpkin=void 0,je.TwentyFirstCentury=void 0,je.Sonic=void 0,je.WelcomeBoard=void 0,je.Firework=void 0,je.LobbyScreenDoor=void 0,je.MainRagolTeleporterBattleInNextArea=void 0,je.LabTeleporterDoor=void 0,je.Pioneer2InvisibleTouchplate=void 0,je.ForestDoor=void 0,je.ForestSwitch=void 0,je.LaserFence=void 0,je.LaserSquareFence=void 0,je.ForestLaserFenceSwitch=void 0,je.LightRays=void 0,je.BlueButterfly=void 0,je.Probe=void 0,je.RandomTypeBox1=void 0,je.ForestWeatherStation=void 0,je.Battery=void 0,je.ForestConsole=void 0,je.BlackSlidingDoor=void 0,je.RicoMessagePod=void 0,je.EnergyBarrier=void 0,je.ForestRisingBridge=void 0,je.SwitchNoneDoor=void 0,je.EnemyBoxGrey=void 0,je.FixedTypeBox=void 0,je.EnemyBoxBrown=void 0,je.EmptyTypeBox=void 0,je.LaserFenseEx=void 0,je.LaserSquareFenceEx=void 0,je.FloorPanel1=void 0,je.Caves4ButtonDoor=void 0,je.CavesNormalDoor=void 0,je.CavesSmashingPillar=void 0,je.CavesSign1=void 0,je.CavesSign2=void 0,je.CavesSign3=void 0,je.HexagalTank=void 0,je.BrownPlatform=void 0,je.WarningLightObject=void 0,je.Rainbow=void 0,je.FloatingJelifish=void 0,je.FloatingDragonfly=void 0,je.CavesSwitchDoor=void 0,je.RobotRechargeStation=void 0,je.CavesCakeShop=void 0,je.Caves1SmallRedRock=void 0,je.Caves1MediumRedRock=void 0,je.Caves1LargeRedRock=void 0,je.Caves2SmallRock1=void 0,je.Caves2MediumRock1=void 0,je.Caves2LargeRock1=void 0,je.Caves2SmallRock2=void 0,je.Caves2MediumRock2=void 0,je.Caves2LargeRock2=void 0,je.Caves3SmallRock=void 0,je.Caves3MediumRock=void 0,je.Caves3LargeRock=void 0,je.FloorPanel2=void 0,je.DestructableRockCaves1=void 0,je.DestructableRockCaves2=void 0,je.DestructableRockCaves3=void 0,je.MinesDoor=void 0,je.FloorPanel3=void 0,je.MinesSwitchDoor=void 0,je.LargeCryoTube=void 0,je.ComputerLikeCalus=void 0,je.GreenScreenOpeningAndClosing=void 0,je.FloatingRobot=void 0,je.FloatingBlueLight=void 0,je.SelfDestructingObject1=void 0,je.SelfDestructingObject2=void 0,je.SelfDestructingObject3=void 0,je.SparkMachine=void 0,je.MinesLargeFlashingCrate=void 0,je.RuinsSeal=void 0,je.RuinsTeleporter=void 0,je.RuinsWarpSiteToSite=void 0,je.RuinsSwitch=void 0,je.FloorPanel4=void 0,je.Ruins1Door=void 0,je.Ruins3Door=void 0,je.Ruins2Door=void 0,je.Ruins11ButtonDoor=void 0,je.Ruins21ButtonDoor=void 0,je.Ruins31ButtonDoor=void 0,je.Ruins4ButtonDoor=void 0,je.Ruins2ButtonDoor=void 0,je.RuinsSensor=void 0,je.RuinsFenceSwitch=void 0,je.RuinsLaserFence4x2=void 0,je.RuinsLaserFence6x2=void 0,je.RuinsLaserFence4x4=void 0,je.RuinsLaserFence6x4=void 0,je.RuinsPoisonBlob=void 0,je.RuinsPilarTrap=void 0,je.PopupTrapNoTech=void 0,je.RuinsCrystal=void 0,je.Monument=void 0,je.RuinsRock1=void 0,je.RuinsRock2=void 0,je.RuinsRock3=void 0,je.RuinsRock4=void 0,je.RuinsRock5=void 0,je.RuinsRock6=void 0,je.RuinsRock7=void 0,je.Poison=void 0,je.FixedBoxTypeRuins=void 0,je.RandomBoxTypeRuins=void 0,je.EnemyTypeBoxYellow=void 0,je.EnemyTypeBoxBlue=void 0,je.EmptyTypeBoxBlue=void 0,je.DestructableRock=void 0,je.PopupTrapsTechs=void 0,je.FlyingWhiteBird=void 0,je.Tower=void 0,je.FloatingRocks=void 0,je.FloatingSoul=void 0,je.Butterfly=void 0,je.LobbyGameMenu=void 0,je.LobbyWarpObject=void 0,je.Lobby1EventObjectDefaultTree=void 0,je.UnknownItem387=void 0,je.UnknownItem388=void 0,je.UnknownItem389=void 0,je.LobbyEventObjectStaticPumpkin=void 0,je.LobbyEventObject3ChristmasWindows=void 0,je.LobbyEventObjectRedAndWhiteCurtain=void 0,je.UnknownItem393=void 0,je.UnknownItem394=void 0,je.LobbyFishTank=void 0,je.LobbyEventObjectButterflies=void 0,je.UnknownItem400=void 0,je.GreyWallLow=void 0,je.SpaceshipDoor=void 0,je.GreyWallHigh=void 0,je.TempleNormalDoor=void 0,je.BreakableWallWallButUnbreakable=void 0,je.BrokenCilinderAndRubble=void 0,je.ThreeBrokenWallPiecesOnFloor=void 0,je.HighBrickCilinder=void 0,je.LyingCilinder=void 0,je.BrickConeWithFlatTop=void 0,je.BreakableTempleWall=void 0,je.TempleMapDetect=void 0,je.SmallBrownBrickRisingBridge=void 0,je.LongRisingBridgeWithPinkHighEdges=void 0,je.FourSwitchTempleDoor=void 0,je.FourButtonSpaceshipDoor=void 0,je.ItemBoxCca=void 0,je.TeleporterEp2=void 0,je.CCADoor=void 0,je.SpecialBoxCCA=void 0,je.BigCCADoor=void 0,je.BigCCADoorSwitch=void 0,je.LittleRock=void 0,je.Little3StoneWall=void 0,je.Medium3StoneWall=void 0,je.SpiderPlant=void 0,je.CCAAreaTeleporter=void 0,je.UnknownItem523=void 0,je.WhiteBird=void 0,je.OrangeBird=void 0,je.Saw=void 0,je.LaserDetect=void 0,je.UnknownItem529=void 0,je.UnknownItem530=void 0,je.Seagull=void 0,je.Fish=void 0,je.SeabedDoorWithBlueEdges=void 0,je.SeabedDoorAlwaysOpenNonTriggerable=void 0,je.LittleCryotube=void 0,je.WideGlassWallBreakable=void 0,je.BlueFloatingRobot=void 0,je.RedFloatingRobot=void 0,je.Dolphin=void 0,je.CaptureTrap=void 0,je.VRLink=void 0,je.UnknownItem576=void 0,je.WarpInBarbaRayRoom=void 0,je.UnknownItem672=void 0,je.GeeNest=void 0,je.LabComputerConsole=void 0,je.LabComputerConsoleGreenScreen=void 0,je.ChairYelllowPillow=void 0,je.OrangeWallWithHoleInMiddle=void 0,je.GreyWallWithHoleInMiddle=void 0,je.LongTable=void 0,je.GBAStation=void 0,je.TalkLinkToSupport=void 0,je.InstaWarp=void 0,je.LabInvisibleObject=void 0,je.LabGlassWindowDoor=void 0,je.UnknownItem700=void 0,je.LabCelingWarp=void 0,je.Ep4LightSource=void 0,je.Cacti=void 0,je.BigBrownRock=void 0,je.BreakableBrownRock=void 0,je.UnknownItem832=void 0,je.UnknownItem833=void 0,je.PoisonPlant=void 0,je.UnknownItem897=void 0,je.UnknownItem898=void 0,je.OozingDesertPlant=void 0,je.UnknownItem901=void 0,je.BigBlackRocks=void 0,je.UnknownItem903=void 0,je.UnknownItem904=void 0,je.UnknownItem905=void 0,je.UnknownItem906=void 0,je.FallingRock=void 0,je.DesertPlantHasCollision=void 0,je.DesertFixedTypeBoxBreakableCrystals=void 0,je.UnknownItem910=void 0,je.BeeHive=void 0,je.UnknownItem912=void 0,je.Heat=void 0,je.TopOfSaintMillionEgg=void 0,je.UnknownItem961=void 0,function(){var e=1;je.Unknown=new je(e++,void 0,"Unknown"),je.PlayerSet=new je(e++,0,"Player Set"),je.Particle=new je(e++,1,"Particle"),je.Teleporter=new je(e++,2,"Teleporter"),je.Warp=new je(e++,3,"Warp"),je.LightCollision=new je(e++,4,"Light Collision"),je.Item=new je(e++,5,"Item"),je.EnvSound=new je(e++,6,"Env Sound"),je.FogCollision=new je(e++,7,"Fog Collision"),je.EventCollision=new je(e++,8,"Event Collision"),je.CharaCollision=new je(e++,9,"Chara Collision"),je.ElementalTrap=new je(e++,10,"Elemental Trap"),je.StatusTrap=new je(e++,11,"Status Trap"),je.HealTrap=new je(e++,12,"Heal Trap"),je.LargeElementalTrap=new je(e++,13,"Large Elemental Trap"),je.ObjRoomID=new je(e++,14,"Obj Room ID"),je.Sensor=new je(e++,15,"Sensor"),je.UnknownItem16=new je(e++,16,"Unknown Item (16)"),je.Lensflare=new je(e++,17,"Lensflare"),je.ScriptCollision=new je(e++,18,"Script Collision"),je.HealRing=new je(e++,19,"Heal Ring"),je.MapCollision=new je(e++,20,"Map Collision"),je.ScriptCollisionA=new je(e++,21,"Script Collision A"),je.ItemLight=new je(e++,22,"Item Light"),je.RadarCollision=new je(e++,23,"Radar Collision"),je.FogCollisionSW=new je(e++,24,"Fog Collision SW"),je.BossTeleporter=new je(e++,25,"Boss Teleporter"),je.ImageBoard=new je(e++,26,"Image Board"),je.QuestWarp=new je(e++,27,"Quest Warp"),je.Epilogue=new je(e++,28,"Epilogue"),je.UnknownItem29=new je(e++,29,"Unknown Item (29)"),je.UnknownItem30=new je(e++,30,"Unknown Item (30)"),je.UnknownItem31=new je(e++,31,"Unknown Item (31)"),je.BoxDetectObject=new je(e++,32,"Box Detect Object"),je.SymbolChatObject=new je(e++,33,"Symbol Chat Object"),je.TouchPlateObject=new je(e++,34,"Touch plate Object"),je.TargetableObject=new je(e++,35,"Targetable Object"),je.EffectObject=new je(e++,36,"Effect object"),je.CountDownObject=new je(e++,37,"Count Down Object"),je.UnknownItem38=new je(e++,38,"Unknown Item (38)"),je.UnknownItem39=new je(e++,39,"Unknown Item (39)"),je.UnknownItem40=new je(e++,40,"Unknown Item (40)"),je.UnknownItem41=new je(e++,41,"Unknown Item (41)"),je.MenuActivation=new je(e++,64,"Menu activation"),je.TelepipeLocation=new je(e++,65,"Telepipe Location"),je.BGMCollision=new je(e++,66,"BGM Collision"),je.MainRagolTeleporter=new je(e++,67,"Main Ragol Teleporter"),je.LobbyTeleporter=new je(e++,68,"Lobby Teleporter"),je.PrincipalWarp=new je(e++,69,"Principal warp"),je.ShopDoor=new je(e++,70,"Shop Door"),je.HuntersGuildDoor=new je(e++,71,"Hunter's Guild Door"),je.TeleporterDoor=new je(e++,72,"Teleporter Door"),je.MedicalCenterDoor=new je(e++,73,"Medical Center Door"),je.Elevator=new je(e++,74,"Elevator"),je.EasterEgg=new je(e++,75,"Easter Egg"),je.ValentinesHeart=new je(e++,76,"Valentines Heart"),je.ChristmasTree=new je(e++,77,"Christmas Tree"),je.ChristmasWreath=new je(e++,78,"Christmas Wreath"),je.HalloweenPumpkin=new je(e++,79,"Halloween Pumpkin"),je.TwentyFirstCentury=new je(e++,80,"21st Century"),je.Sonic=new je(e++,81,"Sonic"),je.WelcomeBoard=new je(e++,82,"Welcome Board"),je.Firework=new je(e++,83,"Firework"),je.LobbyScreenDoor=new je(e++,84,"Lobby Screen Door"),je.MainRagolTeleporterBattleInNextArea=new je(e++,85,"Main Ragol Teleporter (Battle in next area?)"),je.LabTeleporterDoor=new je(e++,86,"Lab Teleporter Door"),je.Pioneer2InvisibleTouchplate=new je(e++,87,"Pioneer 2 Invisible Touchplate"),je.ForestDoor=new je(e++,128,"Forest Door"),je.ForestSwitch=new je(e++,129,"Forest Switch"),je.LaserFence=new je(e++,130,"Laser Fence"),je.LaserSquareFence=new je(e++,131,"Laser Square Fence"),je.ForestLaserFenceSwitch=new je(e++,132,"Forest Laser Fence Switch"),je.LightRays=new je(e++,133,"Light rays"),je.BlueButterfly=new je(e++,134,"Blue Butterfly"),je.Probe=new je(e++,135,"Probe"),je.RandomTypeBox1=new je(e++,136,"Random Type Box 1"),je.ForestWeatherStation=new je(e++,137,"Forest Weather Station"),je.Battery=new je(e++,138,"Battery"),je.ForestConsole=new je(e++,139,"Forest Console"),je.BlackSlidingDoor=new je(e++,140,"Black Sliding Door"),je.RicoMessagePod=new je(e++,141,"Rico Message Pod"),je.EnergyBarrier=new je(e++,142,"Energy Barrier"),je.ForestRisingBridge=new je(e++,143,"Forest Rising Bridge"),je.SwitchNoneDoor=new je(e++,144,"Switch (none door)"),je.EnemyBoxGrey=new je(e++,145,"Enemy Box (Grey)"),je.FixedTypeBox=new je(e++,146,"Fixed Type Box"),je.EnemyBoxBrown=new je(e++,147,"Enemy Box (Brown)"),je.EmptyTypeBox=new je(e++,149,"Empty Type Box"),je.LaserFenseEx=new je(e++,150,"Laser Fense Ex"),je.LaserSquareFenceEx=new je(e++,151,"Laser Square Fence Ex"),je.FloorPanel1=new je(e++,192,"Floor Panel 1"),je.Caves4ButtonDoor=new je(e++,193,"Caves 4 Button door"),je.CavesNormalDoor=new je(e++,194,"Caves Normal door"),je.CavesSmashingPillar=new je(e++,195,"Caves Smashing Pillar"),je.CavesSign1=new je(e++,196,"Caves Sign 1"),je.CavesSign2=new je(e++,197,"Caves Sign 2"),je.CavesSign3=new je(e++,198,"Caves Sign 3"),je.HexagalTank=new je(e++,199,"Hexagal Tank"),je.BrownPlatform=new je(e++,200,"Brown Platform"),je.WarningLightObject=new je(e++,201,"Warning Light Object"),je.Rainbow=new je(e++,203,"Rainbow"),je.FloatingJelifish=new je(e++,204,"Floating Jelifish"),je.FloatingDragonfly=new je(e++,205,"Floating Dragonfly"),je.CavesSwitchDoor=new je(e++,206,"Caves Switch Door"),je.RobotRechargeStation=new je(e++,207,"Robot Recharge Station"),je.CavesCakeShop=new je(e++,208,"Caves Cake Shop"),je.Caves1SmallRedRock=new je(e++,209,"Caves 1 Small Red Rock"),je.Caves1MediumRedRock=new je(e++,210,"Caves 1 Medium Red Rock"),je.Caves1LargeRedRock=new je(e++,211,"Caves 1 Large Red Rock"),je.Caves2SmallRock1=new je(e++,212,"Caves 2 Small Rock 1"),je.Caves2MediumRock1=new je(e++,213,"Caves 2 Medium Rock 1"),je.Caves2LargeRock1=new je(e++,214,"Caves 2 Large Rock 1"),je.Caves2SmallRock2=new je(e++,215,"Caves 2 Small Rock 2"),je.Caves2MediumRock2=new je(e++,216,"Caves 2 Medium Rock 2"),je.Caves2LargeRock2=new je(e++,217,"Caves 2 Large Rock 2"),je.Caves3SmallRock=new je(e++,218,"Caves 3 Small Rock"),je.Caves3MediumRock=new je(e++,219,"Caves 3 Medium Rock"),je.Caves3LargeRock=new je(e++,220,"Caves 3 Large Rock"),je.FloorPanel2=new je(e++,222,"Floor Panel 2"),je.DestructableRockCaves1=new je(e++,223,"Destructable Rock (Caves 1)"),je.DestructableRockCaves2=new je(e++,224,"Destructable Rock (Caves 2)"),je.DestructableRockCaves3=new je(e++,225,"Destructable Rock (Caves 3)"),je.MinesDoor=new je(e++,256,"Mines Door"),je.FloorPanel3=new je(e++,257,"Floor Panel 3"),je.MinesSwitchDoor=new je(e++,258,"Mines Switch Door"),je.LargeCryoTube=new je(e++,259,"Large Cryo-Tube"),je.ComputerLikeCalus=new je(e++,260,"Computer (like calus)"),je.GreenScreenOpeningAndClosing=new je(e++,261,"Green Screen opening and closing"),je.FloatingRobot=new je(e++,262,"Floating Robot"),je.FloatingBlueLight=new je(e++,263,"Floating Blue Light"),je.SelfDestructingObject1=new je(e++,264,"Self Destructing Object 1"),je.SelfDestructingObject2=new je(e++,265,"Self Destructing Object 2"),je.SelfDestructingObject3=new je(e++,266,"Self Destructing Object 3"),je.SparkMachine=new je(e++,267,"Spark Machine"),je.MinesLargeFlashingCrate=new je(e++,268,"Mines Large Flashing Crate"),je.RuinsSeal=new je(e++,304,"Ruins Seal"),je.RuinsTeleporter=new je(e++,320,"Ruins Teleporter"),je.RuinsWarpSiteToSite=new je(e++,321,"Ruins Warp (Site to site)"),je.RuinsSwitch=new je(e++,322,"Ruins Switch"),je.FloorPanel4=new je(e++,323,"Floor Panel 4"),je.Ruins1Door=new je(e++,324,"Ruins 1 Door"),je.Ruins3Door=new je(e++,325,"Ruins 3 Door"),je.Ruins2Door=new je(e++,326,"Ruins 2 Door"),je.Ruins11ButtonDoor=new je(e++,327,"Ruins 1-1 Button Door"),je.Ruins21ButtonDoor=new je(e++,328,"Ruins 2-1 Button Door"),je.Ruins31ButtonDoor=new je(e++,329,"Ruins 3-1 Button Door"),je.Ruins4ButtonDoor=new je(e++,330,"Ruins 4-Button Door"),je.Ruins2ButtonDoor=new je(e++,331,"Ruins 2-Button Door"),je.RuinsSensor=new je(e++,332,"Ruins Sensor"),je.RuinsFenceSwitch=new je(e++,333,"Ruins Fence Switch"),je.RuinsLaserFence4x2=new je(e++,334,"Ruins Laser Fence 4x2"),je.RuinsLaserFence6x2=new je(e++,335,"Ruins Laser Fence 6x2"),je.RuinsLaserFence4x4=new je(e++,336,"Ruins Laser Fence 4x4"),je.RuinsLaserFence6x4=new je(e++,337,"Ruins Laser Fence 6x4"),je.RuinsPoisonBlob=new je(e++,338,"Ruins poison Blob"),je.RuinsPilarTrap=new je(e++,339,"Ruins Pilar Trap"),je.PopupTrapNoTech=new je(e++,340,"Popup Trap (No Tech)"),je.RuinsCrystal=new je(e++,341,"Ruins Crystal"),je.Monument=new je(e++,342,"Monument"),je.RuinsRock1=new je(e++,345,"Ruins Rock 1"),je.RuinsRock2=new je(e++,346,"Ruins Rock 2"),je.RuinsRock3=new je(e++,347,"Ruins Rock 3"),je.RuinsRock4=new je(e++,348,"Ruins Rock 4"),je.RuinsRock5=new je(e++,349,"Ruins Rock 5"),je.RuinsRock6=new je(e++,350,"Ruins Rock 6"),je.RuinsRock7=new je(e++,351,"Ruins Rock 7"),je.Poison=new je(e++,352,"Poison"),je.FixedBoxTypeRuins=new je(e++,353,"Fixed Box Type (Ruins)"),je.RandomBoxTypeRuins=new je(e++,354,"Random Box Type (Ruins)"),je.EnemyTypeBoxYellow=new je(e++,355,"Enemy Type Box (Yellow)"),je.EnemyTypeBoxBlue=new je(e++,356,"Enemy Type Box (Blue)"),je.EmptyTypeBoxBlue=new je(e++,357,"Empty Type Box (Blue)"),je.DestructableRock=new je(e++,358,"Destructable Rock"),je.PopupTrapsTechs=new je(e++,359,"Popup Traps (techs)"),je.FlyingWhiteBird=new je(e++,368,"Flying White Bird"),je.Tower=new je(e++,369,"Tower"),je.FloatingRocks=new je(e++,370,"Floating Rocks"),je.FloatingSoul=new je(e++,371,"Floating Soul"),je.Butterfly=new je(e++,372,"Butterfly"),je.LobbyGameMenu=new je(e++,384,"Lobby Game menu"),je.LobbyWarpObject=new je(e++,385,"Lobby Warp Object"),je.Lobby1EventObjectDefaultTree=new je(e++,386,"Lobby 1 Event Object (Default Tree)"),je.UnknownItem387=new je(e++,387,"Unknown Item (387)"),je.UnknownItem388=new je(e++,388,"Unknown Item (388)"),je.UnknownItem389=new je(e++,389,"Unknown Item (389)"),je.LobbyEventObjectStaticPumpkin=new je(e++,390,"Lobby Event Object (Static Pumpkin)"),je.LobbyEventObject3ChristmasWindows=new je(e++,391,"Lobby Event Object (3 Christmas Windows)"),je.LobbyEventObjectRedAndWhiteCurtain=new je(e++,392,"Lobby Event Object (Red and White Curtain)"),je.UnknownItem393=new je(e++,393,"Unknown Item (393)"),je.UnknownItem394=new je(e++,394,"Unknown Item (394)"),je.LobbyFishTank=new je(e++,395,"Lobby Fish Tank"),je.LobbyEventObjectButterflies=new je(e++,396,"Lobby Event Object (Butterflies)"),je.UnknownItem400=new je(e++,400,"Unknown Item (400)"),je.GreyWallLow=new je(e++,401,"grey wall low"),je.SpaceshipDoor=new je(e++,402,"Spaceship Door"),je.GreyWallHigh=new je(e++,403,"grey wall high"),je.TempleNormalDoor=new je(e++,416,"Temple Normal Door"),je.BreakableWallWallButUnbreakable=new je(e++,417,'"breakable wall wall, but unbreakable"'),je.BrokenCilinderAndRubble=new je(e++,418,"Broken cilinder and rubble"),je.ThreeBrokenWallPiecesOnFloor=new je(e++,419,"3 broken wall pieces on floor"),je.HighBrickCilinder=new je(e++,420,"high brick cilinder"),je.LyingCilinder=new je(e++,421,"lying cilinder"),je.BrickConeWithFlatTop=new je(e++,422,"brick cone with flat top"),je.BreakableTempleWall=new je(e++,423,"breakable temple wall"),je.TempleMapDetect=new je(e++,424,"Temple Map Detect"),je.SmallBrownBrickRisingBridge=new je(e++,425,"small brown brick rising bridge"),je.LongRisingBridgeWithPinkHighEdges=new je(e++,426,"long rising bridge (with pink high edges)"),je.FourSwitchTempleDoor=new je(e++,427,"4 switch temple door"),je.FourButtonSpaceshipDoor=new je(e++,448,"4 button spaceship door"),je.ItemBoxCca=new je(e++,512,"item box cca"),je.TeleporterEp2=new je(e++,513,"Teleporter (Ep 2)"),je.CCADoor=new je(e++,514,"CCA Door"),je.SpecialBoxCCA=new je(e++,515,"Special Box CCA"),je.BigCCADoor=new je(e++,516,"Big CCA Door"),je.BigCCADoorSwitch=new je(e++,517,"Big CCA Door Switch"),je.LittleRock=new je(e++,518,"Little Rock"),je.Little3StoneWall=new je(e++,519,"Little 3 Stone Wall"),je.Medium3StoneWall=new je(e++,520,"Medium 3 stone wall"),je.SpiderPlant=new je(e++,521,"Spider Plant"),je.CCAAreaTeleporter=new je(e++,522,"CCA Area Teleporter"),je.UnknownItem523=new je(e++,523,"Unknown Item (523)"),je.WhiteBird=new je(e++,524,"White Bird"),je.OrangeBird=new je(e++,525,"Orange Bird"),je.Saw=new je(e++,527,"Saw"),je.LaserDetect=new je(e++,528,"Laser Detect"),je.UnknownItem529=new je(e++,529,"Unknown Item (529)"),je.UnknownItem530=new je(e++,530,"Unknown Item (530)"),je.Seagull=new je(e++,531,"Seagull"),je.Fish=new je(e++,544,"Fish"),je.SeabedDoorWithBlueEdges=new je(e++,545,"Seabed Door (with blue edges)"),je.SeabedDoorAlwaysOpenNonTriggerable=new je(e++,546,"Seabed door (always open, non-triggerable)"),je.LittleCryotube=new je(e++,547,"Little Cryotube"),je.WideGlassWallBreakable=new je(e++,548,"Wide Glass Wall (breakable)"),je.BlueFloatingRobot=new je(e++,549,"Blue floating robot"),je.RedFloatingRobot=new je(e++,550,"Red floating robot"),je.Dolphin=new je(e++,551,"Dolphin"),je.CaptureTrap=new je(e++,552,"Capture Trap"),je.VRLink=new je(e++,553,"VR link"),je.UnknownItem576=new je(e++,576,"Unknown Item (576)"),je.WarpInBarbaRayRoom=new je(e++,640,"Warp in Barba Ray Room"),je.UnknownItem672=new je(e++,672,"Unknown Item (672)"),je.GeeNest=new je(e++,688,"Gee Nest"),je.LabComputerConsole=new je(e++,689,"Lab Computer Console"),je.LabComputerConsoleGreenScreen=new je(e++,690,"Lab Computer Console (Green Screen)"),je.ChairYelllowPillow=new je(e++,691,"Chair, Yelllow Pillow"),je.OrangeWallWithHoleInMiddle=new je(e++,692,"orange wall with hole in middle"),je.GreyWallWithHoleInMiddle=new je(e++,693,"grey wall with hole in middle"),je.LongTable=new je(e++,694,"long table"),je.GBAStation=new je(e++,695,"GBA Station"),je.TalkLinkToSupport=new je(e++,696,"Talk (link to support)"),je.InstaWarp=new je(e++,697,"insta-warp"),je.LabInvisibleObject=new je(e++,698,"Lab Invisible Object"),je.LabGlassWindowDoor=new je(e++,699,"Lab Glass window Door"),je.UnknownItem700=new je(e++,700,"Unknown Item (700)"),je.LabCelingWarp=new je(e++,701,"Lab Celing Warp"),je.Ep4LightSource=new je(e++,768,"Ep4 Light Source"),je.Cacti=new je(e++,769,"cacti"),je.BigBrownRock=new je(e++,770,"Big Brown Rock"),je.BreakableBrownRock=new je(e++,771,"Breakable Brown Rock"),je.UnknownItem832=new je(e++,832,"Unknown Item (832)"),je.UnknownItem833=new je(e++,833,"Unknown Item (833)"),je.PoisonPlant=new je(e++,896,"Poison Plant"),je.UnknownItem897=new je(e++,897,"Unknown Item (897)"),je.UnknownItem898=new je(e++,898,"Unknown Item (898)"),je.OozingDesertPlant=new je(e++,899,"Oozing Desert Plant"),je.UnknownItem901=new je(e++,901,"Unknown Item (901)"),je.BigBlackRocks=new je(e++,902,"big black rocks"),je.UnknownItem903=new je(e++,903,"Unknown Item (903)"),je.UnknownItem904=new je(e++,904,"Unknown Item (904)"),je.UnknownItem905=new je(e++,905,"Unknown Item (905)"),je.UnknownItem906=new je(e++,906,"Unknown Item (906)"),je.FallingRock=new je(e++,907,"Falling Rock"),je.DesertPlantHasCollision=new je(e++,908,"Desert Plant (has collision)"),je.DesertFixedTypeBoxBreakableCrystals=new je(e++,909,"Desert Fixed Type Box (Breakable Crystals)"),je.UnknownItem910=new je(e++,910,"Unknown Item (910)"),je.BeeHive=new je(e++,911,"Bee Hive"),je.UnknownItem912=new je(e++,912,"Unknown Item (912)"),je.Heat=new je(e++,913,"Heat"),je.TopOfSaintMillionEgg=new je(e++,960,"Top of saint million egg"),je.UnknownItem961=new je(e++,961,"Unknown Item (961)")}();var Oe,Se=1/512,De=.1;!function(e){e.Ephinea="Ephinea"}(Oe||(Oe={}));var xe;P(Oe);!function(e){e[e.I=1]="I",e[e.II=2]="II",e[e.IV=4]="IV"}(xe||(xe={}));var Ee;P(xe);function Ce(e){if(!xe[e])throw new Error("Invalid episode ".concat(e,"."))}!function(e){e[e.Viridia=0]="Viridia",e[e.Greenill=1]="Greenill",e[e.Skyly=2]="Skyly",e[e.Bluefull=3]="Bluefull",e[e.Purplenum=4]="Purplenum",e[e.Pinkal=5]="Pinkal",e[e.Redria=6]="Redria",e[e.Oran=7]="Oran",e[e.Yellowboze=8]="Yellowboze",e[e.Whitill=9]="Whitill"}(Ee||(Ee={}));var Be,Le=P(Ee);!function(e){e[e.Normal=0]="Normal",e[e.Hard=1]="Hard",e[e.VHard=2]="VHard",e[e.Ultimate=3]="Ultimate"}(Be||(Be={}));var Me,Fe,Ie,Pe,ze,Ge,Ae,Te,We=P(Be),Ue=(Q=function(){function e(t,n,r){if(Object(d.a)(this,e),this.id=void 0,Object(C.a)(this,"position",J,this),Object(C.a)(this,"y_axis_rotation",X,this),!Number.isInteger(t)||t<-1)throw new Error("Expected id to be an integer greater than or equal to -1, got ".concat(t,"."));if(!n)throw new Error("position is required.");if("number"!==typeof r)throw new Error("y_axis_rotation is required.");this.id=t,this.position=n,this.y_axis_rotation=r}return Object(p.a)(e,[{key:"sin_y_axis_rotation",get:function(){return Math.sin(this.y_axis_rotation)}},{key:"cos_y_axis_rotation",get:function(){return Math.cos(this.y_axis_rotation)}}]),e}(),J=Object(B.a)(Q.prototype,"position",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=Object(B.a)(Q.prototype,"y_axis_rotation",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(Q.prototype,"sin_y_axis_rotation",[F.d],Object.getOwnPropertyDescriptor(Q.prototype,"sin_y_axis_rotation"),Q.prototype),Object(B.a)(Q.prototype,"cos_y_axis_rotation",[F.d],Object.getOwnPropertyDescriptor(Q.prototype,"cos_y_axis_rotation"),Q.prototype),Q),Ne=($=function e(t,n,r,a,i,o,s,l,u,c){if(Object(d.a)(this,e),Object(C.a)(this,"id",ee,this),Object(C.a)(this,"name",te,this),Object(C.a)(this,"short_description",ne,this),Object(C.a)(this,"long_description",re,this),Object(C.a)(this,"episode",ae,this),Object(C.a)(this,"area_variants",ie,this),Object(C.a)(this,"objects",oe,this),Object(C.a)(this,"npcs",se,this),this.dat_unknowns=void 0,this.bin_data=void 0,null!=t&&(!Number.isInteger(t)||t<0))throw new Error("id should be undefined or a non-negative integer.");if(Ce(i),!s||!(s instanceof Array))throw new Error("objs is required.");if(!l||!(l instanceof Array))throw new Error("npcs is required.");this.id=t,this.name=n,this.short_description=r,this.long_description=a,this.episode=i,this.area_variants=o,this.objects=s,this.npcs=l,this.dat_unknowns=u,this.bin_data=c},ee=Object(B.a)($.prototype,"id",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=Object(B.a)($.prototype,"name",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=Object(B.a)($.prototype,"short_description",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=Object(B.a)($.prototype,"long_description",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=Object(B.a)($.prototype,"episode",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=Object(B.a)($.prototype,"area_variants",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=Object(B.a)($.prototype,"objects",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=Object(B.a)($.prototype,"npcs",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$),He=(le=function(){function e(t,n,r,a){if(Object(d.a)(this,e),Object(C.a)(this,"area_id",ue,this),this._section_id=void 0,Object(C.a)(this,"section",ce,this),Object(C.a)(this,"position",de,this),Object(C.a)(this,"rotation",pe,this),Object(C.a)(this,"object_3d",he,this),Object.getPrototypeOf(this)===Object.getPrototypeOf(e))throw new Error("Abstract class should not be instantiated directly.");if(!Number.isInteger(t)||t<0)throw new Error("Expected area_id to be a non-negative integer, got ".concat(t,"."));if(!Number.isInteger(n)||n<0)throw new Error("Expected section_id to be a non-negative integer, got ".concat(n,"."));if(!r)throw new Error("position is required.");if(!a)throw new Error("rotation is required.");this.area_id=t,this._section_id=n,this.position=r,this.rotation=a}return Object(p.a)(e,[{key:"section_id",get:function(){return this.section?this.section.id:this._section_id}},{key:"section_position",get:function(){var e=this.position,t=e.x,n=e.y,r=e.z;if(this.section){var a=t-this.section.position.x,i=n-this.section.position.y,o=r-this.section.position.z,s=-this.section.sin_y_axis_rotation,l=this.section.cos_y_axis_rotation;t=l*a+s*o,n=i,r=-s*a+l*o}return new U(t,n,r)},set:function(e){var t=e.x,n=e.y,r=e.z;if(this.section){var a=-this.section.sin_y_axis_rotation,i=this.section.cos_y_axis_rotation,o=a*t+i*r,s=i*t-a*r+this.section.position.x,l=n+this.section.position.y,u=o+this.section.position.z;this.position=new U(s,l,u)}}}]),e}(),ue=Object(B.a)(le.prototype,"area_id",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(le.prototype,"section_id",[F.d],Object.getOwnPropertyDescriptor(le.prototype,"section_id"),le.prototype),ce=Object(B.a)(le.prototype,"section",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=Object(B.a)(le.prototype,"position",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=Object(B.a)(le.prototype,"rotation",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(le.prototype,"section_position",[F.d],Object.getOwnPropertyDescriptor(le.prototype,"section_position"),le.prototype),he=Object(B.a)(le.prototype,"object_3d",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le),qe=(_e=function(e){function t(e,n,r,a,i,o){var s;if(Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,e,n,r,a)),Object(C.a)(s,"type",me,Object(I.a)(s)),s.dat=void 0,!i)throw new Error("type is required.");return s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(He),me=Object(B.a)(_e.prototype,"type",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e),Ve=(we=function(e){function t(e,n,r,a,i,o){var s;if(Object(d.a)(this,t),s=Object(h.a)(this,Object(_.a)(t).call(this,e,n,r,a)),Object(C.a)(s,"type",fe,Object(I.a)(s)),s.dat=void 0,!i)throw new Error("type is required.");return s.type=i,s.dat=o,s}return Object(m.a)(t,e),t}(He),fe=Object(B.a)(we.prototype,"type",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we),Ze=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.order=void 0,this.area_variants=void 0,!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."));if(!n)throw new Error("name is required.");if(!a)throw new Error("area_variants is required.");this.id=t,this.name=n,this.order=r,this.area_variants=a},Ye=(ve=function e(t,n){if(Object(d.a)(this,e),this.id=t,this.area=n,Object(C.a)(this,"sections",be,this),!Number.isInteger(t)||t<0)throw new Error("Expected id to be a non-negative integer, got ".concat(t,"."))},be=Object(B.a)(ve.prototype,"sections",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve),Ke=function e(t,n,r,a,i,o){Object(d.a)(this,e),this.difficulty=t,this.section_id=n,this.npc_type=r,this.item_type=a,this.anything_rate=i,this.rare_rate=o,this.rate=void 0,this.rate=i*o},Qe=(ye=function(){function e(t,n,r,a){if(Object(d.a)(this,e),this.id=void 0,this.name=void 0,this.episode=void 0,this.quest=void 0,this.enemy_counts=void 0,this.default_time=void 0,Object(C.a)(this,"user_time",ke,this),!t)throw new Error("id is required.");if(a<=0)throw new Error("default_time must be greater than zero.");if(!n)throw new Error("name is required.");if(!r)throw new Error("quest is required.");this.id=t,this.name=n,this.episode=r.episode,this.quest=r,this.enemy_counts=r.enemy_counts,this.default_time=a}return Object(p.a)(e,[{key:"time",get:function(){return null!=this.user_time?this.user_time:this.default_time}}]),e}(),ke=Object(B.a)(ye.prototype,"user_time",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(ye.prototype,"time",[F.d],Object.getOwnPropertyDescriptor(ye.prototype,"time"),ye.prototype),ye),Je=function e(t,n,r,a){if(Object(d.a)(this,e),this.id=t,this.name=n,this.episode=r,this.enemy_counts=a,!t)throw new Error("id is required.");if(!n)throw new Error("name is required.");if(!a)throw new Error("enemyCounts is required.")},Xe=function e(t,n,r,a){Object(d.a)(this,e),this.name=t,this.head_style_count=n,this.hair_styles_count=r,this.hair_styles_with_accessory=a},$e=function e(t,n){Object(d.a)(this,e),this.id=t,this.name=n},et=new(Me=function e(){Object(d.a)(this,e),Object(C.a)(this,"current_server",Fe,this)},Fe=Object(B.a)(Me.prototype,"current_server",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Oe.Ephinea}}),Me),tt=n(103);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Nominal=2]="Nominal",e[e.Error=3]="Error",e[e.Reloading=4]="Reloading"}(Te||(Te={}));var nt,rt,at,it,ot,st,lt,ut,ct,dt,pt,ht,_t,mt,wt=(Ie=function(){function e(t,n){Object(d.a)(this,e),Object(C.a)(this,"_value",Pe,this),Object(C.a)(this,"_promise",ze,this),Object(C.a)(this,"_state",Ge,this),this._load=void 0,Object(C.a)(this,"_error",Ae,this),this._value=t,this._load=n}return Object(p.a)(e,[{key:"load",value:function(){return this.load_value()}},{key:"load_value",value:function(){var e=Object(E.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_loading){e.next=2;break}return e.abrupt("return",this._promise);case 2:if(this._state=Te.Initializing,e.prev=3,!this._load){e.next=9;break}return this._promise=this._load(),e.next=8,this._promise;case 8:this._value=e.sent;case 9:return this._state=Te.Nominal,this._error=void 0,e.abrupt("return",this._value);case 14:throw e.prev=14,e.t0=e.catch(3),this._state=Te.Error,this._error=e.t0,e.t0;case 19:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"value",get:function(){var e=this;return this._state===Te.Uninitialized&&Object(tt.defer)(function(){return e.load_value()}),this._value},set:function(e){this._value=e}},{key:"promise",get:function(){return this._state===Te.Uninitialized?this.load_value():this._promise}},{key:"state",get:function(){return this._state}},{key:"is_initialized",get:function(){return this._state!==Te.Uninitialized}},{key:"is_loading",get:function(){switch(this._state){case Te.Initializing:case Te.Reloading:return!0;default:return!1}}},{key:"error",get:function(){return this._error}}]),e}(),Pe=Object(B.a)(Ie.prototype,"_value",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=Object(B.a)(Ie.prototype,"_promise",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new Promise(function(t){return t(e._value)})}}),Ge=Object(B.a)(Ie.prototype,"_state",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Te.Uninitialized}}),Ae=Object(B.a)(Ie.prototype,"_error",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(Ie.prototype,"value",[F.d],Object.getOwnPropertyDescriptor(Ie.prototype,"value"),Ie.prototype),Object(B.a)(Ie.prototype,"state",[F.d],Object.getOwnPropertyDescriptor(Ie.prototype,"state"),Ie.prototype),Object(B.a)(Ie.prototype,"is_initialized",[F.d],Object.getOwnPropertyDescriptor(Ie.prototype,"is_initialized"),Ie.prototype),Object(B.a)(Ie.prototype,"is_loading",[F.d],Object.getOwnPropertyDescriptor(Ie.prototype,"is_loading"),Ie.prototype),Object(B.a)(Ie.prototype,"error",[F.d],Object.getOwnPropertyDescriptor(Ie.prototype,"error"),Ie.prototype),Ie),ft=(nt=function(e){function t(e){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).call(this,Oe,e))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"current",get:function(){return this.get(et.current_server)}}]),t}(W),Object(B.a)(nt.prototype,"current",[F.d],Object.getOwnPropertyDescriptor(nt.prototype,"current"),nt.prototype),nt),vt=l.a.get("stores/HuntMethodStore"),bt=new(rt=function(){function e(){var t=this;Object(d.a)(this,e),Object(C.a)(this,"methods",at,this),this.storage_disposer=void 0,this.load_from_local_storage=function(e,n){try{var r=localStorage.getItem("HuntMethodStore.methodUserTimes.".concat(Oe[n]));if(r){var a=JSON.parse(r),i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;c.user_time=a[c.id]}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}t.storage_disposer&&t.storage_disposer(),t.storage_disposer=Object(F.c)(function(){return t.store_in_local_storage(e,n)})}catch(p){vt.error(p)}},this.store_in_local_storage=function(e,t){try{var n={},r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;void 0!=l.user_time&&(n[l.id]=l.user_time)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}localStorage.setItem("HuntMethodStore.methodUserTimes.".concat(Oe[t]),JSON.stringify(n))}catch(c){vt.error(c)}}}return Object(p.a)(e,[{key:"load_hunt_methods",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,w,f,v,b;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/quests.").concat(Oe[t].toLowerCase(),".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a=new Array,i=!0,o=!1,s=void 0,e.prev=10,l=r[Symbol.iterator]();case 12:if(i=(u=l.next()).done){e.next=25;break}for(c=u.value,d=0,p=new Map,h=0,_=Object.entries(c.enemyCounts);h<_.length;h++)m=_[h],w=Object(x.a)(m,2),f=w[0],v=w[1],(b=K.by_code(f))?(p.set(b,v),d+=v):vt.error("No NpcType found for code ".concat(f,"."));e.t0=c.id,e.next=31===e.t0?20:34===e.t0?20:1305===e.t0?20:1306===e.t0?20:1307===e.t0?20:313===e.t0?20:314===e.t0?20:21;break;case 20:return e.abrupt("continue",22);case 21:a.push(new Qe("q".concat(c.id),c.name,new Je(c.id,c.name,c.episode,p),/^\d-\d.*/.test(c.name)?.75:d>400?.75:.5));case 22:i=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(10),o=!0,s=e.t1;case 31:e.prev=31,e.prev=32,i||null==l.return||l.return();case 34:if(e.prev=34,!o){e.next=37;break}throw s;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return this.load_from_local_storage(a,t),e.abrupt("return",a);case 41:case"end":return e.stop()}},e,this,[[10,27,31,39],[32,,34,38]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),at=Object(B.a)(rt.prototype,"methods",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return new ft(function(t){return new wt([],function(){return e.load_hunt_methods(t)})})}}),rt),yt=(it=function(){function e(){var t=this;Object(d.a)(this,e),this.id_to_item_type=[],Object(C.a)(this,"item_types",ot,this),this.load=function(){var e=Object(E.a)(S.a.mark(function e(n){var r,a,i,o,s,l,u,c,d,p;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("","/itemTypes.").concat(Oe[n].toLowerCase(),".json"));case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,i=new Array,o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();case 12:if(o=(c=u.next()).done){e.next=34;break}d=c.value,p=void 0,e.t0=d.class,e.next="weapon"===e.t0?18:"armor"===e.t0?20:"shield"===e.t0?22:"unit"===e.t0?24:"tool"===e.t0?26:28;break;case 18:return p=new N(d.id,d.name,d.minAtp,d.maxAtp,d.ata,d.maxGrind,d.requiredAtp),e.abrupt("break",29);case 20:return p=new H(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 22:return p=new q(d.id,d.name,d.atp,d.ata,d.minEvp,d.maxEvp,d.minDfp,d.maxDfp,d.mst,d.hp,d.lck),e.abrupt("break",29);case 24:return p=new V(d.id,d.name),e.abrupt("break",29);case 26:return p=new Z(d.id,d.name),e.abrupt("break",29);case 28:return e.abrupt("continue",31);case 29:t.id_to_item_type[p.id]=p,i.push(p);case 31:o=!0,e.next=12;break;case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(10),s=!0,l=e.t1;case 40:e.prev=40,e.prev=41,o||null==u.return||u.return();case 43:if(e.prev=43,!s){e.next=46;break}throw l;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.item_types=i,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[10,36,40,48],[41,,43,47]])}));return function(t){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"get_by_id",value:function(e){return this.id_to_item_type[e]}}]),e}(),ot=Object(B.a)(it.prototype,"item_types",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it),kt=new ft(function(e){var t=new yt;return new wt(t,function(){return t.load(e)})}),gt=l.a.get("stores/ItemDropStore"),Rt=function(){function e(){Object(d.a)(this,e),this.table=new Array(We.length*Le.length*ge.length),this.item_type_to_drops=[]}return Object(p.a)(e,[{key:"get_drop",value:function(e,t,n){return this.table[e*Le.length*ge.length+t*ge.length+n.id]}},{key:"set_drop",value:function(e,t,n,r){this.table[e*Le.length*ge.length+t*ge.length+n.id]=r;var a=this.item_type_to_drops[r.item_type.id];a||(a=[],this.item_type_to_drops[r.item_type.id]=a),a.push(r)}},{key:"get_drops_for_item_type",value:function(e){return this.item_type_to_drops[e]||[]}}]),e}(),jt=(st=F.k.ref,lt=function e(){Object(d.a)(this,e),Object(C.a)(this,"enemy_drops",ut,this)},ut=Object(B.a)(lt.prototype,"enemy_drops",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Rt}}),lt),Ot=new ft(function(e){var t=new jt;return new wt(t,function(){return function(e,t){return St.apply(this,arguments)}(t,e)})});function St(){return(St=Object(E.a)(S.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h,_,m,w;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt.current.promise;case 2:return r=e.sent,e.next=5,fetch("".concat("","/enemyDrops.").concat(Oe[n].toLowerCase(),".json"));case 5:return a=e.sent,e.next=8,a.json();case 8:i=e.sent,o=new Rt,s=!0,l=!1,u=void 0,e.prev=13,c=i[Symbol.iterator]();case 15:if(s=(d=c.next()).done){e.next=34;break}if(p=d.value,h=K.by_code(p.enemy)){e.next=21;break}return gt.warn("Couldn't determine NpcType of episode ".concat(p.episode," ").concat(p.enemy,".")),e.abrupt("continue",31);case 21:if(_=Be[p.difficulty],m=r.get_by_id(p.itemTypeId)){e.next=26;break}return gt.warn("Couldn't find item kind ".concat(p.itemTypeId,".")),e.abrupt("continue",31);case 26:if(null!=(w=Ee[p.sectionId])){e.next=30;break}return gt.warn("Couldn't find section ID ".concat(p.sectionId,".")),e.abrupt("continue",31);case 30:o.set_drop(_,w,h,new Ke(_,w,h,m,p.dropRate,p.rareRate));case 31:s=!0,e.next=15;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(13),l=!0,u=e.t0;case 40:e.prev=40,e.prev=41,s||null==c.return||c.return();case 43:if(e.prev=43,!l){e.next=46;break}throw u;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return t.enemy_drops=o,e.abrupt("return",t);case 50:case"end":return e.stop()}},e,null,[[13,36,40,48],[41,,43,47]])}))).apply(this,arguments)}var Dt,xt,Et=l.a.get("stores/HuntOptimizerStore"),Ct=(ct=function e(t,n){Object(d.a)(this,e),Object(C.a)(this,"item_type",dt,this),Object(C.a)(this,"amount",pt,this),this.item_type=t,this.amount=n},dt=Object(B.a)(ct.prototype,"item_type",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=Object(B.a)(ct.prototype,"amount",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct),Bt=function e(t,n){Object(d.a)(this,e),this.wanted_items=void 0,this.optimal_methods=void 0,this.wanted_items=t,this.optimal_methods=n},Lt=function e(t,n,r,a,i,o,s){Object(d.a)(this,e),this.difficulty=void 0,this.section_ids=void 0,this.method_name=void 0,this.method_episode=void 0,this.method_time=void 0,this.runs=void 0,this.total_time=void 0,this.item_counts=void 0,this.difficulty=t,this.section_ids=n,this.method_name=r,this.method_episode=a,this.method_time=i,this.runs=o,this.total_time=o*i,this.item_counts=s},Mt=new(ht=function(){function e(){var t=this;Object(d.a)(this,e),Object(C.a)(this,"wanted_items",_t,this),Object(C.a)(this,"result",mt,this),this.optimize=Object(E.a)(S.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m,w,f,v,b,y,k,g,R,j,O,E,C,B,L,F,I,P,z,G,A,T,W,U,N,H,q,V,Z,Y,Q,J,X,$,ee,te,ne,re,ae,ie,oe,se,le,ue,ce,de,pe,he,_e,me,we,fe,ve,be,ye,ke,ge,Re,je,Oe,xe,Ee,Ce,Be,Me,Fe,Ie,Pe,ze,Ge,Ae,Te,Ue,Ne,He,qe,Ve,Ze,Ye,Ke,Qe,Je,Xe,$e,et,tt,nt,rt,at,it,ot,st;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wanted_items.length){e.next=3;break}return t.result=void 0,e.abrupt("return");case 3:return n=new Set(t.wanted_items.filter(function(e){return e.amount>0}).map(function(e){return e.item_type})),e.next=6,bt.methods.current.promise;case 6:return r=e.sent,e.next=9,Ot.current.promise;case 9:for(a=e.sent.enemy_drops,i={},o=!0,s=!1,l=void 0,e.prev=14,u=t.wanted_items[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,i[d.item_type.name]={min:d.amount};e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,o||null==u.return||u.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p={},h=new Map,_=!0,m=!1,w=void 0,e.prev=35,f=r[Symbol.iterator]();case 37:if(_=(v=f.next()).done){e.next=144;break}for(b=v.value,y=new Map,k=!0,g=!1,R=void 0,e.prev=43,j=b.enemy_counts.entries()[Symbol.iterator]();!(k=(O=j.next()).done);k=!0)E=O.value,C=Object(x.a)(E,2),B=C[0],L=C[1],F=y.get(B)||0,null==B.rare_type?y.set(B,F+L):(I=void 0,P=void 0,B.rare_type===K.Kondrieu?(I=1-De,P=De):(I=1-Se,P=Se),y.set(B,F+L*I),y.set(B.rare_type,(y.get(B.rare_type)||0)+L*P));e.next=51;break;case 47:e.prev=47,e.t1=e.catch(43),g=!0,R=e.t1;case 51:e.prev=51,e.prev=52,k||null==j.return||j.return();case 54:if(e.prev=54,!g){e.next=57;break}throw R;case 57:return e.finish(54);case 58:return e.finish(51);case 59:z=[y],(G=y.get(K.PanArms))&&((A=new Map(y)).delete(K.PanArms),A.set(K.Migium,G),A.set(K.Hidoom,G),z.push(A)),(T=y.get(K.PanArms2))&&((W=new Map(y)).delete(K.PanArms2),W.set(K.Migium2,T),W.set(K.Hidoom2,T),z.push(W)),U=0;case 65:if(!(U<z.length)){e.next=141;break}N=z[U],H=1===U,q=!0,V=!1,Z=void 0,e.prev=71,Y=We[Symbol.iterator]();case 73:if(q=(Q=Y.next()).done){e.next=124;break}J=Q.value,X=!0,$=!1,ee=void 0,e.prev=78,te=Le[Symbol.iterator]();case 80:if(X=(ne=te.next()).done){e.next=107;break}for(re=ne.value,ae={time:b.time},ie=!1,oe=!0,se=!1,le=void 0,e.prev=87,ue=N.entries()[Symbol.iterator]();!(oe=(ce=ue.next()).done);oe=!0)de=ce.value,pe=Object(x.a)(de,2),he=pe[0],_e=pe[1],(me=a.get_drop(J,re,he))&&n.has(me.item_type)&&(we=ae[me.item_type.name]||0,ae[me.item_type.name]=we+_e*me.rate,ie=!0);e.next=95;break;case 91:e.prev=91,e.t2=e.catch(87),se=!0,le=e.t2;case 95:e.prev=95,e.prev=96,oe||null==ue.return||ue.return();case 98:if(e.prev=98,!se){e.next=101;break}throw le;case 101:return e.finish(98);case 102:return e.finish(95);case 103:ie&&(fe=t.full_method_name(J,re,b,H),p[fe]=ae,h.set(fe,{method:b,difficulty:J,section_id:re,split_pan_arms:H}));case 104:X=!0,e.next=80;break;case 107:e.next=113;break;case 109:e.prev=109,e.t3=e.catch(78),$=!0,ee=e.t3;case 113:e.prev=113,e.prev=114,X||null==te.return||te.return();case 116:if(e.prev=116,!$){e.next=119;break}throw ee;case 119:return e.finish(116);case 120:return e.finish(113);case 121:q=!0,e.next=73;break;case 124:e.next=130;break;case 126:e.prev=126,e.t4=e.catch(71),V=!0,Z=e.t4;case 130:e.prev=130,e.prev=131,q||null==Y.return||Y.return();case 133:if(e.prev=133,!V){e.next=136;break}throw Z;case 136:return e.finish(133);case 137:return e.finish(130);case 138:U++,e.next=65;break;case 141:_=!0,e.next=37;break;case 144:e.next=150;break;case 146:e.prev=146,e.t5=e.catch(35),m=!0,w=e.t5;case 150:e.prev=150,e.prev=151,_||null==f.return||f.return();case 153:if(e.prev=153,!m){e.next=156;break}throw w;case 156:return e.finish(153);case 157:return e.finish(150);case 158:if((ve=M.a.Solve({optimize:"time",opType:"min",constraints:i,variables:p})).feasible){e.next=162;break}return t.result=void 0,e.abrupt("return");case 162:be=[],ye=0,ke=Object.entries(ve);case 164:if(!(ye<ke.length)){e.next=257;break}if(ge=ke[ye],Re=Object(x.a)(ge,2),je=Re[0],Oe=Re[1],!(xe=h.get(je))){e.next=254;break}Ee=xe.method,Ce=xe.difficulty,Be=xe.section_id,Me=xe.split_pan_arms,Fe=Oe,Ie=p[je],Pe=new Map,ze=0,Ge=Object.entries(Ie);case 176:if(!(ze<Ge.length)){e.next=211;break}Ae=Ge[ze],Te=Object(x.a)(Ae,2),Ue=Te[0],Ne=Te[1],He=!0,qe=!1,Ve=void 0,e.prev=184,Ze=n[Symbol.iterator]();case 186:if(He=(Ye=Ze.next()).done){e.next=194;break}if(Ke=Ye.value,Ue!==Ke.name){e.next=191;break}return Pe.set(Ke,Fe*Ne),e.abrupt("break",194);case 191:He=!0,e.next=186;break;case 194:e.next=200;break;case 196:e.prev=196,e.t6=e.catch(184),qe=!0,Ve=e.t6;case 200:e.prev=200,e.prev=201,He||null==Ze.return||Ze.return();case 203:if(e.prev=203,!qe){e.next=206;break}throw Ve;case 206:return e.finish(203);case 207:return e.finish(200);case 208:ze++,e.next=176;break;case 211:Qe=[],Je=!0,Xe=!1,$e=void 0,e.prev=215,et=Le[Symbol.iterator]();case 217:if(Je=(tt=et.next()).done){e.next=239;break}if(nt=tt.value,rt=!0,nt===Be){e.next=235;break}if(at=p[t.full_method_name(Ce,nt,Ee,Me)]){e.next=226;break}rt=!1,e.next=235;break;case 226:it=0,ot=Object.keys(Ie);case 227:if(!(it<ot.length)){e.next=235;break}if(st=ot[it],Ie[st]===at[st]){e.next=232;break}return rt=!1,e.abrupt("break",235);case 232:it++,e.next=227;break;case 235:rt&&Qe.push(nt);case 236:Je=!0,e.next=217;break;case 239:e.next=245;break;case 241:e.prev=241,e.t7=e.catch(215),Xe=!0,$e=e.t7;case 245:e.prev=245,e.prev=246,Je||null==et.return||et.return();case 248:if(e.prev=248,!Xe){e.next=251;break}throw $e;case 251:return e.finish(248);case 252:return e.finish(245);case 253:be.push(new Lt(Ce,Qe,Ee.name+(Me?" (Split Pan Arms)":""),Ee.episode,Ee.time,Fe,Pe));case 254:ye++,e.next=164;break;case 257:t.result=new Bt(Object(D.a)(n),be);case 258:case"end":return e.stop()}},e,null,[[14,18,22,30],[23,,25,29],[35,146,150,158],[43,47,51,59],[52,,54,58],[71,126,130,138],[78,109,113,121],[87,91,95,103],[96,,98,102],[114,,116,120],[131,,133,137],[151,,153,157],[184,196,200,208],[201,,203,207],[215,241,245,253],[246,,248,252]])})),this.initialize=Object(E.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.load_from_local_storage();case 3:Object(F.c)(t.store_in_local_storage),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Et.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),this.load_from_local_storage=Object(E.a)(S.a.mark(function e(){var n,r,a,i,o,s,l,u,c,d,p,h,_,m;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=localStorage.getItem("HuntOptimizerStore.wantedItems.".concat(Oe[et.current_server])))){e.next=27;break}return e.next=4,kt.current.promise;case 4:for(r=e.sent,a=JSON.parse(n),i=[],o=!0,s=!1,l=void 0,e.prev=10,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)d=c.value,p=d.itemTypeId,h=d.itemKindId,_=d.amount,(m=void 0!=p?r.get_by_id(p):r.get_by_id(h))&&i.push(new Ct(m,_));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,l=e.t0;case 18:e.prev=18,e.prev=19,o||null==u.return||u.return();case 21:if(e.prev=21,!s){e.next=24;break}throw l;case 24:return e.finish(21);case 25:return e.finish(18);case 26:t.wanted_items.replace(i);case 27:case"end":return e.stop()}},e,null,[[10,14,18,26],[19,,21,25]])})),this.store_in_local_storage=function(){try{localStorage.setItem("HuntOptimizerStore.wantedItems.".concat(Oe[et.current_server]),JSON.stringify(t.wanted_items.map(function(e){var t=e.item_type,n=e.amount;return{itemTypeId:t.id,amount:n}})))}catch(e){Et.error(e)}},this.initialize()}return Object(p.a)(e,[{key:"huntable_item_types",get:function(){var e=Ot.current.value;return kt.current.value.item_types.filter(function(t){return e.enemy_drops.get_drops_for_item_type(t.id).length})}}]),Object(p.a)(e,[{key:"full_method_name",value:function(e,t,n,r){var a="".concat(e,"\t").concat(t,"\t").concat(n.id);return r&&(a+="\tspa"),a}}]),e}(),Object(B.a)(ht.prototype,"huntable_item_types",[F.d],Object.getOwnPropertyDescriptor(ht.prototype,"huntable_item_types"),ht.prototype),_t=Object(B.a)(ht.prototype,"wanted_items",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.k.array()}}),mt=Object(B.a)(ht.prototype,"result",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht),Ft=n(217),It=n.n(Ft),Pt=(n(359),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(It.a,Object.assign({className:"BigSelect"},this.props))}}]),t}(r.PureComponent)),zt=(n(360),Object(w.a)(Dt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).state={help_visible:!1},n.add_wanted=function(e){if(e&&!Mt.wanted_items.find(function(t){return t.item_type.id===e.value})){var t=kt.current.value.get_by_id(e.value);Mt.wanted_items.push(new Ct(t,1))}},n.remove_wanted=function(e){return function(){var t=Mt.wanted_items.findIndex(function(t){return t===e});-1!==t&&Mt.wanted_items.splice(t,1)}},n.table_remove_cell_renderer=function(e){var t=e.rowData;return a.a.createElement(R.a,{type:"link",icon:"delete",onClick:n.remove_wanted(t)})},n.no_rows_renderer=function(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-no-rows"},a.a.createElement("p",null,'Add some items with the above drop down and click "Optimize" to see the result on the right.'))},n.on_help_visible_change=function(e){n.setState({helpVisible:e})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return Mt.wanted_items.slice(0,0),a.a.createElement("section",{className:"ho-WantedItemsComponent"},a.a.createElement("h3",null,"Wanted Items",a.a.createElement(g.a,{content:a.a.createElement(Gt,null),trigger:"click",visible:this.state.help_visible,onVisibleChange:this.on_help_visible_change},a.a.createElement(R.a,{icon:"info-circle",type:"link"}))),a.a.createElement("div",{className:"ho-WantedItemsComponent-top-bar"},a.a.createElement(Pt,{placeholder:"Add an item",value:void 0,style:{width:200},options:Mt.huntable_item_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_wanted}),a.a.createElement(R.a,{onClick:Mt.optimize,style:{marginLeft:10}},"Optimize")),a.a.createElement("div",{className:"ho-WantedItemsComponent-table"},a.a.createElement(j.a,null,function(t){var n=t.width,r=t.height;return a.a.createElement(j.e,{width:n,height:r,headerHeight:30,rowHeight:30,rowCount:Mt.wanted_items.length,rowGetter:function(e){var t=e.index;return Mt.wanted_items[t]},noRowsRenderer:e.no_rows_renderer},a.a.createElement(j.b,{label:"Amount",dataKey:"amount",width:70,cellRenderer:function(e){var t=e.rowData;return a.a.createElement(At,{wantedItem:t})}}),a.a.createElement(j.b,{label:"Item",dataKey:"item",width:150,flexGrow:1,cellDataGetter:function(e){return e.rowData.item_type.name}}),a.a.createElement(j.b,{dataKey:"remove",width:30,cellRenderer:e.table_remove_cell_renderer}))})))}}]),t}(r.Component))||Dt);function Gt(){return a.a.createElement("div",{className:"ho-WantedItemsComponent-help"},a.a.createElement("p",null,'Add some items with the drop down and click "Optimize" to see the optimal combination of hunt methods on the right.'),a.a.createElement("p",null,'At the moment a method is simply a quest run-through. Partial quest run-throughs are coming. View the list of methods on the "Methods" tab. Each method takes a certain amount of time, which affects the optimization result. Make sure the times are correct for you.'),a.a.createElement("p",null,"Only enemy drops are considered. Box drops are coming."),a.a.createElement("p",null,"The optimal result is calculated using linear optimization. The optimizer takes rare enemies and the fact that pan arms can be split in two into account."))}var At=Object(w.a)(xt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).wanted_amount_changed=function(e){null!=e&&e>=0&&(n.props.wantedItem.amount=e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.wantedItem;return a.a.createElement(k.a,{min:0,max:10,value:e.amount,onChange:this.wanted_amount_changed,size:"small",style:{width:"100%"}})}}]),t}(r.Component))||xt,Tt=(n(364),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).sort_columns=new Array,n.column_width=function(e){var t=e.index;return n.props.columns[t].width},n.cell_renderer=function(e){var t,r,i,o=e.columnIndex,s=e.rowIndex,l=e.style,u=n.props.columns[o],c=["DataTable-cell"];if(o===n.props.columns.length-1&&c.push("last-in-row"),0===s){if(t=i=u.name,u.sortable){c.push("sortable");var d=n.sort_columns[0];d&&d.column===u&&(r=d.direction===j.d.ASC?a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 14l5-5 5 5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})):a.a.createElement("svg",{className:"DataTable-sort-indictator",width:"18",height:"18",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M7 10l5 5 5-5z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})))}}else if(u.class_name&&c.push(u.class_name),n.props.footer&&s===1+n.props.row_count)c.push("footer-cell"),t=null==u.footer_value?"":u.footer_value,i=null==u.footer_tooltip?"":u.footer_tooltip;else{var p=n.props.record({index:s-1});t=u.cell_renderer(p),u.tooltip&&(i=u.tooltip(p))}"string"!==typeof t&&c.push("custom");var h=0===s&&u.sortable?function(){return n.header_clicked(u)}:void 0;return a.a.createElement("div",{className:c.join(" "),key:"".concat(o,", ").concat(s),style:l,title:i,onClick:h},"string"===typeof t?a.a.createElement("span",{className:"DataTable-cell-text"},t):t,r)},n.header_clicked=function(e){var t=n.sort_columns.findIndex(function(t){return t.column===e}),r=-1===t?void 0:n.sort_columns.splice(t,1)[0],a=0===t&&r&&r.direction===j.d.ASC?j.d.DESC:j.d.ASC;n.sort_columns.unshift({column:e,direction:a}),n.sort_columns.splice(10),n.props.sort&&n.props.sort(n.sort_columns)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"DataTable",style:{width:this.props.width,height:this.props.height}},a.a.createElement(j.c,{width:this.props.width,height:this.props.height,rowHeight:26,rowCount:this.props.row_count+1+(this.props.footer?1:0),fixedRowCount:1,overscanRowCount:this.props.overscan_row_count,columnWidth:this.column_width,columnCount:this.props.columns.length,fixedColumnCount:this.props.fixed_column_count,overscanColumnCount:this.props.overscan_column_count,cellRenderer:this.cell_renderer,classNameTopLeftGrid:"DataTable-header",classNameTopRightGrid:"DataTable-header",updateTigger:this.props.update_trigger}))}}]),t}(r.Component));function Wt(e){var t=e.section_id,n=e.size,r=void 0===n?28:n,i=e.title;return a.a.createElement("div",{title:i,style:{display:"inline-block",width:r,height:r,backgroundImage:"url(".concat("","/images/sectionids/").concat(Ee[t],".png)"),backgroundSize:r}})}n(365);var Ut,Nt,Ht=Object(w.a)((Nt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return Mt.result.optimal_methods[t]},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;this.update_trigger;var t=Mt.result;return a.a.createElement("section",{className:"ho-OptimizationResultComponent"},a.a.createElement("h3",null,"Optimization Result"),a.a.createElement("div",{className:"ho-OptimizationResultComponent-table"},a.a.createElement(j.a,null,function(n){var r=n.width,i=n.height;return a.a.createElement(Tt,{width:r,height:i,row_count:t?t.optimal_methods.length:0,columns:e.columns,fixed_column_count:4,record:e.record,footer:null!=t,update_trigger:e.update_trigger})})))}},{key:"columns",get:function(){var e=Mt.result,t=e?e.optimal_methods:[],n=0,r=0,i=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n+=c.runs,r+=c.total_time}}catch(v){o=!0,s=v}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=[{name:"Difficulty",width:75,cell_renderer:function(e){return Be[e.difficulty]},footer_value:"Totals:"},{name:"Method",width:200,cell_renderer:function(e){return e.method_name},tooltip:function(e){return e.method_name}},{name:"Ep.",width:34,cell_renderer:function(e){return xe[e.method_episode]}},{name:"Section ID",width:80,cell_renderer:function(e){return a.a.createElement("div",{className:"ho-OptimizationResultComponent-sid-col"},e.section_ids.map(function(e){return a.a.createElement(Wt,{section_id:e,key:e,size:20})}))},tooltip:function(e){return e.section_ids.map(function(e){return Ee[e]}).join(", ")}},{name:"Time/Run",width:80,cell_renderer:function(e){return function(e){var t=Math.floor(e),n=Math.round(60*(e-t));return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}(e.method_time)},class_name:"number"},{name:"Runs",width:60,cell_renderer:function(e){return e.runs.toFixed(1)},tooltip:function(e){return e.runs.toString()},footer_value:n.toFixed(1),footer_tooltip:n.toString(),class_name:"number"},{name:"Total Hours",width:90,cell_renderer:function(e){return e.total_time.toFixed(1)},tooltip:function(e){return e.total_time.toString()},footer_value:r.toFixed(1),footer_tooltip:r.toString(),class_name:"number"}];if(e){var p=!0,h=!1,_=void 0;try{for(var m,w=function(){var e=m.value,n=0,r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){n+=o.value.item_counts.get(e)||0}}catch(v){a=!0,i=v}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}d.push({name:e.name,width:80,cell_renderer:function(t){var n=t.item_counts.get(e);return n?n.toFixed(2):""},tooltip:function(t){var n=t.item_counts.get(e);return n?n.toString():""},class_name:"number",footer_value:n.toFixed(2),footer_tooltip:n.toString()})},f=e.wanted_items[Symbol.iterator]();!(p=(m=f.next()).done);p=!0)w()}catch(v){h=!0,_=v}finally{try{p||null==f.return||f.return()}finally{if(h)throw _}}}return d}},{key:"update_trigger",get:function(){return Mt.result}}]),t}(r.Component),Object(B.a)(Nt.prototype,"columns",[F.d],Object.getOwnPropertyDescriptor(Nt.prototype,"columns"),Nt.prototype),Object(B.a)(Nt.prototype,"update_trigger",[F.d],Object.getOwnPropertyDescriptor(Nt.prototype,"update_trigger"),Nt.prototype),Ut=Nt))||Ut;n(366);function qt(){return a.a.createElement("section",{className:"ho-OptimizerComponent"},a.a.createElement(zt,null),a.a.createElement(Ht,null))}n(367);var Vt,Zt,Yt,Kt,Qt=n(233),Jt=n(53),Xt=n.n(Jt),$t=(n(369),Object(w.a)((Yt=Zt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).record=function(e){var t=e.index;return bt.methods.current.value[t]},n.sort=function(e){var t=bt.methods.current.value.slice();t.sort(function(t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=l.column,c=l.direction,d=0;if("name"===u.key)d=t.name.localeCompare(n.name);else if("episode"===u.key)d=t.episode-n.episode;else if("time"===u.key)d=t.time-n.time;else if(u.key){var p=K.by_code(u.key);p&&(d=(t.enemy_counts.get(p)||0)-(n.enemy_counts.get(p)||0))}if(0!==d)return c===j.d.ASC?d:-d}}catch(h){a=!0,i=h}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return 0}),bt.methods.current.value=t},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,n=bt.methods.current.value;return a.a.createElement("section",{className:"ho-MethodsComponent"},a.a.createElement(j.a,null,function(r){var i=r.width,o=r.height;return a.a.createElement(Tt,{width:i,height:o,row_count:n.length,columns:t.columns,fixed_column_count:3,record:e.record,sort:e.sort,update_trigger:bt.methods.current.value})}))}}]),t}(r.Component),Zt.columns=function(){var e=[{key:"name",name:"Method",width:250,cell_renderer:function(e){return e.name},sortable:!0},{key:"episode",name:"Ep.",width:34,cell_renderer:function(e){return xe[e.episode]},sortable:!0},{key:"time",name:"Time",width:50,cell_renderer:function(e){return a.a.createElement(en,{method:e})},class_name:"integrated",sortable:!0}],t=!0,n=!1,r=void 0;try{for(var i,o=function(){var t=i.value;e.push({key:t.code,name:t.name,width:75,cell_renderer:function(e){var n=e.enemy_counts.get(t);return null==n?"":n.toString()},class_name:"number",sortable:!0})},s=Re[Symbol.iterator]();!(t=(i=s.next()).done);t=!0)o()}catch(l){n=!0,r=l}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}(),Vt=Yt))||Vt),en=Object(w.a)(Kt=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).change=function(e){n.props.method.user_time=e.hour()+e.minute()/60},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.method.time,t=Math.floor(e),n=Math.round(60*(e-t));return a.a.createElement(Qt.a,{className:"ho-MethodsComponent-timepicker",value:Xt()({hour:t,minute:n}),format:"HH:mm",size:"small",allowClear:!1,suffixIcon:a.a.createElement("span",null),onChange:this.change})}}]),t}(a.a.Component))||Kt,tn=y.a.TabPane;n(376);var nn=n(231),rn=(n(378),n(162)),an=(n(381),n(232)),on=(n(383),n(14)),sn=(n(213),n(127)),ln=n(31),un=n(9),cn=l.a.get("data_formats/parsing/geometry");function dn(e){for(var t=new DataView(e),n=new un.Object3D,r=[new un.MeshBasicMaterial({color:8437968,transparent:!0,opacity:.25}),new un.MeshLambertMaterial({color:5296336,side:un.DoubleSide}),new un.MeshLambertMaterial({color:5288048,side:un.DoubleSide}),new un.MeshLambertMaterial({color:6307968,side:un.DoubleSide})],a=[new un.MeshBasicMaterial({color:9490656,wireframe:!0,transparent:!0,opacity:.3}),new un.MeshBasicMaterial({color:6353136,wireframe:!0}),new un.MeshBasicMaterial({color:6340736,wireframe:!0}),new un.MeshBasicMaterial({color:7360656,wireframe:!0})],i=t.getUint32(t.byteLength-16,!0),o=t.getUint32(i,!0),s=o;s===o||0!==t.getUint32(s);s+=24){for(var l=new un.Geometry,u=t.getUint32(s,!0),c=t.getUint32(u,!0),d=t.getUint32(u+4,!0),p=d+12*c,h=t.getUint32(u+8,!0),_=t.getUint32(u+12,!0),m=_+36*h,w=d;w<p;w+=12){var f=t.getFloat32(w,!0),v=t.getFloat32(w+4,!0),b=t.getFloat32(w+8,!0);l.vertices.push(new un.Vector3(f,v,b))}for(var y=_;y<m;y+=36){var k=t.getUint16(y,!0),g=t.getUint16(y+2,!0),R=t.getUint16(y+4,!0),j=t.getUint16(y+6,!0),O=new un.Vector3(t.getFloat32(y+8,!0),t.getFloat32(y+12,!0),t.getFloat32(y+16,!0)),S=64&j?3:16&j?2:1&j?1:0;l.faces.push(new un.Face3(k,g,R,O,void 0,S))}var D=new un.Mesh(l,r);D.renderOrder=1,n.add(D);var x=new un.Mesh(l,a);x.renderOrder=2,n.add(x)}return n}function pn(e){for(var t=new DataView(e),n=new Map,r=new un.Object3D,a=t.getUint32(t.byteLength-16,!0),i=t.getUint32(a+8,!0),o=t.getUint32(a+16,!0),s=function(e){var a=t.getInt32(e,!0),i=t.getFloat32(e+4,!0),o=t.getFloat32(e+8,!0),s=t.getFloat32(e+12,!0),l=t.getInt32(e+20,!0)/65535*2*Math.PI,u=new Ue(a,new U(i,o,s),l);n.set(a,u);for(var c=[],d=[],p=[],h=t.getUint32(e+32,!0),_=t.getUint32(e+40,!0),m=h;m<h+16*_;m+=16){var w=t.getUint32(m,!0);4&t.getUint32(m+12,!0)&&(w=t.getUint32(w,!0));var f=t.getUint32(w+4,!0);if(f>0){for(var v=t.getUint32(f+4,!0),b=t.getUint32(f+8,!0),y=t.getUint32(f+12,!0),k=t.getUint32(f+16,!0),g=[],R=y;R<y+20*k;R+=20){for(var j=t.getUint32(R+8,!0),O=t.getUint32(R+12,!0),S=[],D=j;D<j+2*O;D+=2)S.push(t.getUint16(D,!0));g.push(S)}b>1&&cn.warn("Vertex info count of ".concat(b," was larger than expected."));for(var x=t.getUint32(v+4,!0),E=t.getUint32(v+8,!0),C=t.getUint32(v+12,!0),B=[],L=[],M=x;M<x+C*E;M+=E){var F=void 0,I=void 0,P=void 0;switch(E){case 16:case 24:F=0,I=1,P=0;break;case 28:case 36:F=t.getFloat32(M+12,!0),I=t.getFloat32(M+16,!0),P=t.getFloat32(M+20,!0);break;default:cn.error("Unexpected vertex size of ".concat(E,"."));continue}var z=t.getFloat32(M,!0),G=t.getFloat32(M+4,!0),A=t.getFloat32(M+8,!0),T=u.cos_y_axis_rotation*z+u.sin_y_axis_rotation*A,W=-u.sin_y_axis_rotation*z+u.cos_y_axis_rotation*A;B.push(i+T),B.push(o+G),B.push(s+W),L.push(F),L.push(I),L.push(P)}c.push(g),d.push(B),p.push(L)}}for(var N=function(e){var t=d[e],n=p[e];c[e].forEach(function(e){var a=new un.BufferGeometry;a.addAttribute("position",new un.Float32BufferAttribute(t,3)),a.addAttribute("normal",new un.Float32BufferAttribute(n,3)),a.setIndex(new un.Uint16BufferAttribute(e,1));var i=new un.Mesh(a,new un.MeshLambertMaterial({color:4500223,opacity:.25,side:un.DoubleSide}));i.setDrawMode(un.TriangleStripDrawMode),i.userData.section=u,r.add(i)})},H=0;H<d.length;++H)N(H)},l=o;l<o+52*i;l+=52)s(l);return{sections:Object(D.a)(n.values()).sort(function(e,t){return e.id-t.id}),object_3d:r}}function hn(e,t,n){return Rn(e,t,n,"collision")}function _n(e){return mn.apply(this,arguments)}function mn(){return(mn=Object(E.a)(S.a.mark(function e(t){var n,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=jn(t),e.next=3,Dn(n);case 3:return r=e.sent,e.abrupt("return",{url:n,data:r});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(e){return fn.apply(this,arguments)}function fn(){return(fn=Object(E.a)(S.a.mark(function e(t){var n,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=On(t),e.next=3,Dn(n);case 3:return r=e.sent,e.abrupt("return",{url:n,data:r});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(e,t,n){return bn.apply(this,arguments)}function bn(){return(bn=Object(E.a)(S.a.mark(function e(t,n,r){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(Sn(t,n,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yn(e){return kn.apply(this,arguments)}function kn(){return(kn=Object(E.a)(S.a.mark(function e(t){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn("/player/animation/animation_".concat(t.toString().padStart(3,"0"),".njm"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var gn=[[["city00_00",1],["forest01",1],["forest02",1],["cave01_",6],["cave02_",5],["cave03_",6],["machine01_",6],["machine02_",6],["ancient01_",5],["ancient02_",5],["ancient03_",5],["boss01",1],["boss02",1],["boss03",1],["darkfalz00",1]],[["labo00_00",1],["ruins01_",3],["ruins02_",3],["space01_",3],["space02_",3],["jungle01_00",1],["jungle02_00",1],["jungle03_00",1],["jungle04_",3],["jungle05_00",1],["seabed01_",3],["seabed02_",3],["boss05",1],["boss06",1],["boss07",1],["boss08",1],["jungle06_00",1],["jungle07_",5]],[],[["city02_00",1],["wilds01_00",1],["wilds01_01",1],["wilds01_02",1],["wilds01_03",1],["crater01_00",1],["desert01_",3],["desert02_",3],["desert03_",3],["boss09_00",1]]];function Rn(e,t,n,r){try{return Dn(function(e,t,n){var r=gn[e-1];if(0<=t&&t<r.length){var a=Object(x.a)(r[t],2),i=a[0],o=a[1];if(0<=n&&n<o){var s;if(1===o)s="";else for(s=String(n);s.length<2;)s="0"+s;return"/maps/map_".concat(i).concat(s)}throw new Error("Unknown variant ".concat(n," of area ").concat(t," in episode ").concat(e,"."))}throw new Error("Unknown episode ".concat(e," area ").concat(t,"."))}(e,t,n)+("render"===r?"n.rel":"c.rel"))}catch(a){return Promise.reject(a)}}function jn(e){switch(e){case K.Dubswitch:return"/npcs/".concat(e.code,".xj");case K.Hildebear2:return jn(K.Hildebear);case K.Hildeblue2:return jn(K.Hildeblue);case K.RagRappy2:return jn(K.RagRappy);case K.Monest2:return jn(K.Monest);case K.PoisonLily2:return jn(K.PoisonLily);case K.NarLily2:return jn(K.NarLily);case K.GrassAssassin2:return jn(K.GrassAssassin);case K.Dimenian2:return jn(K.Dimenian);case K.LaDimenian2:return jn(K.LaDimenian);case K.SoDimenian2:return jn(K.SoDimenian);case K.DarkBelra2:return jn(K.DarkBelra);case K.SavageWolf2:return jn(K.SavageWolf);case K.BarbarousWolf2:return jn(K.BarbarousWolf);case K.PanArms2:return jn(K.PanArms);case K.Dubchic2:return jn(K.Dubchic);case K.Gilchic2:return jn(K.Gilchic);case K.Garanz2:return jn(K.Garanz);case K.Dubswitch2:return jn(K.Dubswitch);case K.Delsaber2:return jn(K.Delsaber);case K.ChaosSorcerer2:return jn(K.ChaosSorcerer);default:return"/npcs/".concat(e.code,".nj")}}function On(e){switch(e){case je.EasterEgg:case je.ChristmasTree:case je.ChristmasWreath:case je.TwentyFirstCentury:case je.Sonic:case je.WelcomeBoard:case je.FloatingJelifish:case je.RuinsSeal:case je.Dolphin:case je.Cacti:case je.BigBrownRock:case je.PoisonPlant:case je.BigBlackRocks:case je.FallingRock:case je.DesertFixedTypeBoxBreakableCrystals:case je.BeeHive:return"/objects/".concat(e.pso_id,".nj");default:return"/objects/".concat(e.pso_id,".xj")}}function Sn(e,t,n){return"/player/".concat(e).concat(t).concat(null==n?"":n,".nj")}function Dn(e){return fetch(""+e).then(function(e){return e.arrayBuffer()})}function xn(e,t,n,r){var a,i=new Ze(e,t,n,[]),o=Array(r).fill(null).map(function(e,t){return new Ye(t,i)});return(a=i.area_variants).splice.apply(a,[0,0].concat(Object(D.a)(o))),i}var En=new Map,Cn=new Map,Bn=new Map,Ln=new(function(){function e(){Object(d.a)(this,e),this.areas=void 0,this.areas=[];var t=0;this.areas[1]=[xn(0,"Pioneer II",t++,1),xn(1,"Forest 1",t++,1),xn(2,"Forest 2",t++,1),xn(11,"Under the Dome",t++,1),xn(3,"Cave 1",t++,6),xn(4,"Cave 2",t++,5),xn(5,"Cave 3",t++,6),xn(12,"Underground Channel",t++,1),xn(6,"Mine 1",t++,6),xn(7,"Mine 2",t++,6),xn(13,"Monitor Room",t++,1),xn(8,"Ruins 1",t++,5),xn(9,"Ruins 2",t++,5),xn(10,"Ruins 3",t++,5),xn(14,"Dark Falz",t++,1),xn(15,"BA Ruins",t++,3),xn(16,"BA Spaceship",t++,3),xn(17,"Lobby",t++,15)],t=0,this.areas[2]=[xn(0,"Lab",t++,1),xn(1,"VR Temple Alpha",t++,3),xn(2,"VR Temple Beta",t++,3),xn(14,"VR Temple Final",t++,1),xn(3,"VR Spaceship Alpha",t++,3),xn(4,"VR Spaceship Beta",t++,3),xn(15,"VR Spaceship Final",t++,1),xn(5,"Central Control Area",t++,1),xn(6,"Jungle Area East",t++,1),xn(7,"Jungle Area North",t++,1),xn(8,"Mountain Area",t++,3),xn(9,"Seaside Area",t++,1),xn(12,"Cliffs of Gal Da Val",t++,1),xn(10,"Seabed Upper Levels",t++,3),xn(11,"Seabed Lower Levels",t++,3),xn(13,"Test Subject Disposal Area",t++,1),xn(16,"Seaside Area at Night",t++,1),xn(17,"Control Tower",t++,5)],t=0,this.areas[4]=[xn(0,"Pioneer II (Ep. IV)",t++,1),xn(1,"Crater Route 1",t++,1),xn(2,"Crater Route 2",t++,1),xn(3,"Crater Route 3",t++,1),xn(4,"Crater Route 4",t++,1),xn(5,"Crater Interior",t++,1),xn(6,"Subterranean Desert 1",t++,3),xn(7,"Subterranean Desert 2",t++,3),xn(8,"Subterranean Desert 3",t++,3),xn(9,"Meteor Impact Site",t++,1)]}return Object(p.a)(e,[{key:"get_variant",value:function(e,t,n){if(1!==e&&2!==e&&4!==e)throw new Error("Expected episode to be 1, 2 or 4, got ".concat(e,"."));var r=this.areas[e].find(function(e){return e.id===t});if(!r)throw new Error("Area id ".concat(t," for episode ").concat(e," is invalid."));var a=r.area_variants[n];if(!a)throw new Error("Area variant id ".concat(n," for area ").concat(t," of episode ").concat(e," is invalid."));return a}},{key:"get_area_sections",value:function(){var e=Object(E.a)(S.a.mark(function e(t,n,r){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=En.get("".concat(t,"-").concat(n,"-").concat(r)))){e.next=5;break}return e.abrupt("return",a);case 5:return e.abrupt("return",this.get_area_sections_and_render_geometry(t,n,r).then(function(e){return e.sections}));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get_area_render_geometry",value:function(){var e=Object(E.a)(S.a.mark(function e(t,n,r){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Cn.get("".concat(t,"-").concat(n,"-").concat(r)))){e.next=5;break}return e.abrupt("return",a);case 5:return e.abrupt("return",this.get_area_sections_and_render_geometry(t,n,r).then(function(e){return e.object_3d}));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get_area_collision_geometry",value:function(){var e=Object(E.a)(S.a.mark(function e(t,n,r){var a,i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Bn.get("".concat(t,"-").concat(n,"-").concat(r)))){e.next=5;break}return e.abrupt("return",a);case 5:return i=hn(t,n,r).then(dn),Bn.set("".concat(n,"-").concat(r),i),e.abrupt("return",i);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get_area_sections_and_render_geometry",value:function(e,t,n){var r=function(e,t,n){return Rn(e,t,n,"render")}(e,t,n).then(pn),a=new Promise(function(e,t){r.then(function(t){var n=t.sections;return e(n)}).catch(t)}),i=new Promise(function(e,t){r.then(function(t){var n=t.object_3d;return e(n)}).catch(t)});return En.set("".concat(e,"-").concat(t,"-").concat(n),a),Cn.set("".concat(e,"-").concat(t,"-").concat(n),i),r}}]),e}());function Mn(e){var t=new zn(e),n=new Gn;if(t.src.size<=3)for(;t.src.bytes_left;)t.set_bit(1),t.copy_literal();else{for(n.put(n.hash(t.src),0),t.src.seek(1),n.put(n.hash(t.src),1),t.src.seek(-1),t.set_bit(1),t.copy_literal(),t.set_bit(1),t.copy_literal();t.src.bytes_left>1;){var r=t.find_longest_match(n,!1),a=Object(x.a)(r,2),i=a[0],o=a[1];if(o>0){t.src.seek(1);var s=t.find_longest_match(n,!0),l=Object(x.a)(s,2),u=l[0],c=l[1];if(t.src.seek(-1),c>o){var d=!0;if(o>=2&&o<=5&&u<i&&i>=-256&&u<-256&&c-o<3&&(d=!1),d){t.set_bit(1),t.copy_literal();continue}}if(o>=2&&o<=5&&i>=-256){t.set_bit(0),t.set_bit(0),t.set_bit(o-2&2),t.set_bit(o-2&1),t.write_literal(255&i),t.add_intermediates(n,o);continue}if(o>=3&&o<=9){t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3|o-2&7),t.write_literal(i>>5),t.add_intermediates(n,o);continue}if(o>9){o>256&&(o=256),t.set_bit(0),t.set_bit(1),t.write_literal((31&i)<<3),t.write_literal(i>>5),t.write_literal(o-1),t.add_intermediates(n,o);continue}}t.set_bit(1),t.copy_literal()}t.src.bytes_left&&(t.set_bit(1),t.copy_literal())}return t.write_eof(),t.dst.seek_start(0)}var Fn=8192,In=Fn-1,Pn=256,zn=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.flag_offset=void 0,this.src=t,this.dst=new ln.a(t.size,t.little_endian),this.flags=0,this.flag_bits_left=0,this.flag_offset=0}return Object(p.a)(e,[{key:"set_bit",value:function(e){if(!this.flag_bits_left--){var t=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(t).write_u8(0),this.flag_offset=t,this.flag_bits_left=7}this.flags>>>=1,e&&(this.flags|=128)}},{key:"copy_literal",value:function(){this.dst.write_u8(this.src.u8())}},{key:"write_literal",value:function(e){this.dst.write_u8(e)}},{key:"writeFinalFlags",value:function(){this.flags>>>=this.flag_bits_left;var e=this.dst.position;this.dst.seek_start(this.flag_offset).write_u8(this.flags).seek_start(e)}},{key:"write_eof",value:function(){this.set_bit(0),this.set_bit(1),this.writeFinalFlags(),this.write_literal(0),this.write_literal(0)}},{key:"match_length",value:function(e){for(var t=this.src.uint8_array_view(),n=0,r=this.src.position;r<t.byteLength&&t[r]===t[e];)++n,++r,++e;return n}},{key:"find_longest_match",value:function(e,t){if(!this.src.bytes_left)return[0,0];var n=e.hash(this.src),r=e.get(n);if(null===r)return t||e.put(n,this.src.position),[0,0];if(this.src.position-r>Fn)return e.hash_to_offset[n]=null,t||e.put(n,this.src.position),[0,0];for(var a=0,i=0;null!=r;){var o=this.match_length(r);(o>a||o>=256)&&(a=o,i=r);var s=e.prev(r);null!==s&&this.src.position-s>Fn&&(e.set_prev(r,null),s=null),r=s}return t||e.put(n,this.src.position),[a>0?i-this.src.position:0,a]}},{key:"add_intermediates",value:function(e,t){this.src.seek(1);for(var n=1;n<t;++n){var r=e.hash(this.src);e.put(r,this.src.position),this.src.seek(1)}}}]),e}(),Gn=function(){function e(){Object(d.a)(this,e),this.hash_to_offset=new Array(Pn).fill(null),this.masked_offset_to_prev=new Array(Fn).fill(null)}return Object(p.a)(e,[{key:"hash",value:function(e){var t=e.u8();return e.bytes_left&&(t^=e.u8(),e.seek(-1)),e.seek(-1),t}},{key:"get",value:function(e){return this.hash_to_offset[e]}},{key:"put",value:function(e,t){this.set_prev(t,this.hash_to_offset[e]),this.hash_to_offset[e]=t}},{key:"prev",value:function(e){return this.masked_offset_to_prev[e&In]}},{key:"set_prev",value:function(e,t){this.masked_offset_to_prev[e&In]=t}}]),e}(),An=l.a.get("data_formats/compression/prs/decompress");function Tn(e){for(var t=new Wn(e);;)if(1===t.read_flag_bit())t.copy_u8();else{var n=void 0,r=void 0;if(0===t.read_flag_bit())n=t.read_flag_bit()<<1,n|=t.read_flag_bit(),n+=2,r=t.read_u8()-256;else{if(0===(r=t.read_u16()))break;n=7&r,r>>>=3,0===n?(n=t.read_u8(),n+=1):n+=2,r-=8192}t.offset_copy(r,n)}return t.dst.seek_start(0)}var Wn=function(){function e(t){Object(d.a)(this,e),this.src=void 0,this.dst=void 0,this.flags=void 0,this.flag_bits_left=void 0,this.src=t,this.dst=new ln.a(4*t.size,t.little_endian),this.flags=0,this.flag_bits_left=0}return Object(p.a)(e,[{key:"read_flag_bit",value:function(){0===this.flag_bits_left&&(this.flags=this.read_u8(),this.flag_bits_left=8);var e=1&this.flags;return this.flags>>>=1,this.flag_bits_left-=1,e}},{key:"copy_u8",value:function(){this.dst.write_u8(this.read_u8())}},{key:"read_u8",value:function(){return this.src.u8()}},{key:"read_u16",value:function(){return this.src.u16()}},{key:"offset_copy",value:function(e,t){(e<-8192||e>0)&&An.error("offset was ".concat(e,", should be between -8192 and 0.")),(t<1||t>256)&&An.error("length was ".concat(t,", should be between 1 and 256."));var n=Math.min(-e,t);this.dst.seek(e);var r=this.dst.take(n);this.dst.seek(-e-n);for(var a=0;a<Math.floor(t/n);++a)this.dst.write_cursor(r);this.dst.write_cursor(r.take(t%n))}}]),e}(),Un=l.a.get("data_formats/parsing/quest/bin");function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.u32(),r=e.u32(),a=e.u32();e.seek(4);var i=e.u32(),o=e.u32(),s=e.string_utf16(64,!0,!0),l=e.string_utf16(256,!0,!0),u=e.string_utf16(576,!0,!0);a!==e.size&&Un.warn("Value ".concat(a," in bin size field does not match actual size ").concat(e.size,"."));var c=Math.floor((e.size-r)/4);e.seek_start(r);for(var d=[],p=0;p<c;++p)d.push(e.i32());return{quest_id:i,language:o,quest_name:s,short_description:l,long_description:u,function_offsets:d,instructions:function(e,t){var n=[];try{for(;e.bytes_left;){var r=e.u8(),a=void 0,i=void 0,o=void 0;switch(r){case 248:a=e.u8(),i=2,o=Vn;break;case 249:a=e.u8(),i=2,o=Zn;break;default:a=r,i=1,o=qn}var s=Object(x.a)(o[a],3),l=s[1],u=s[2];if(null==u){var c=r;248!==r&&249!==r||(c=c<<8|a),Un.warn("Parameters unknown for opcode 0x".concat(c.toString(16).toUpperCase(),", assuming 0.")),n.push({opcode:a,mnemonic:l,args:[],size:i})}else try{var d=Hn(e,u);n.push({opcode:a,mnemonic:l,args:d.args,size:i+d.size})}catch(p){n.push({opcode:a,mnemonic:l,args:[],size:i})}}}catch(p){if(!t)throw p;Un.error("Couldn't fully parse object code.",p)}return n}(e.seek_start(n).take(r-n),t),data:e.seek_start(0).take(e.size)}}function Hn(e,t){var n,r=e.position,a=[];e:for(var i=0;i<t.length;++i)switch(t.charAt(i)){case"p":break;case"a":break e;case"B":a.push(e.u8());break;case"W":a.push(e.u16());break;case"L":a.push(e.u32());break;case"I":a.push(e.i32());break;case"f":case"F":a.push(e.f32());break;case"R":case"r":e.seek(1);break;case"b":a.push(e.u8());break;case"w":a.push(e.u16());break;case"l":a.push(e.u32());break;case"i":a.push(e.i32());break;case"j":case"J":n=2*e.u8(),e.seek(n);break;case"t":case"T":n=e.u8(),e.seek(n);break;case"s":case"S":for(;e.u16(););break;default:throw new Error("Unknown mask part ".concat(t.charAt(i),"."))}return{args:a,size:e.position-r}}var qn=[[0,"nop",""],[1,"ret",""],[2,"sync",""],[3,"exit","aL"],[4,"thread","W"],[5,"va_start",""],[6,"va_end",""],[7,"va_call","W"],[8,"let","RR"],[9,"leti","RI"],[10,"unknown",null],[11,"unknown",null],[12,"unknown",null],[13,"unknown",null],[14,"unknown",null],[15,"unknown",null],[16,"set","R"],[17,"clear","R"],[18,"rev","R"],[19,"gset","w"],[20,"gclear","w"],[21,"grev","w"],[22,"glet","w"],[23,"gget","wR"],[24,"add","RR"],[25,"addi","RI"],[26,"sub","RR"],[27,"subi","RI"],[28,"mul","RR"],[29,"muli","RI"],[30,"div","RR"],[31,"divi","RI"],[32,"and","RR"],[33,"andi","RI"],[34,"or","RR"],[35,"ori","RI"],[36,"xor","RR"],[37,"xori","RI"],[38,"mod","RR"],[39,"modi","RI"],[40,"jmp","W"],[41,"call","W"],[42,"jmp_on","Wt"],[43,"jmp_off","Wt"],[44,"jmp_=","RRW"],[45,"jmpi_=","RIW"],[46,"jmp_!=","RRW"],[47,"jmpi_!=","RIW"],[48,"ujmp_>","RRW"],[49,"ujmpi_>","RLW"],[50,"jmp_>","RRW"],[51,"jmpi_>","RIW"],[52,"ujmp_<","RRW"],[53,"ujmpi_<","RLW"],[54,"jmp_<","RRW"],[55,"jmpi_<","RIW"],[56,"ujmp_>=","RRW"],[57,"ujmpi_>=","RLW"],[58,"jmp_>=","RRW"],[59,"jmpi_>=","RIW"],[60,"ujmp_<=","RRW"],[61,"ujmpi_<=","RLW"],[62,"jmp_<=","RRW"],[63,"jmpi_<=","RIW"],[64,"switch_jmp","Rj"],[65,"switch_call","Rj"],[66,"stack_push","R"],[67,"stack_pop","R"],[68,"stack_pushm","RL"],[69,"stack_popm","RL"],[70,"unknown",null],[71,"unknown",null],[72,"arg_pushr","pR"],[73,"arg_pushl","pI"],[74,"arg_pushb","pB"],[75,"arg_pushw","pW"],[76,"unknown",null],[77,"unknown",null],[78,"arg_pushs","ps"],[79,"unknown4F","RR"],[80,"message","aLs"],[81,"list","aRs"],[82,"fadein",""],[83,"fadeout",""],[84,"se","aL"],[85,"bgm","aL"],[86,"unknown",null],[87,"unknown",null],[88,"enable","aL"],[89,"disable","aL"],[90,"window_msg","as"],[91,"add_msg","as"],[92,"mesend",""],[93,"gettime","R"],[94,"winend",""],[95,"unknown",null],[96,"npc_crt_V3","R"],[97,"npc_stop","aR"],[98,"npc_play","aL"],[99,"npc_kill","aR"],[100,"npc_nont",""],[101,"npc_talk",""],[102,"npc_crp_V3","R"],[103,"unknown",null],[104,"create_pipe","aL"],[105,"p_hpstat_V3","aRL"],[106,"p_dead_V3","aRL"],[107,"p_disablewarp",""],[108,"p_enablewarp",""],[109,"p_move_V3","R"],[110,"p_look","aL"],[111,"unknown",null],[112,"p_action_disable",""],[113,"p_action_enable",""],[114,"disable_movement1","aR"],[115,"enable_movement1","aR"],[116,"p_noncol",""],[117,"p_col",""],[118,"p_setpos","aRR"],[119,"p_return_guild",""],[120,"p_talk_guild","aL"],[121,"npc_talk_pl_V3","R"],[122,"npc_talk_kill","aL"],[123,"npc_crtpk_V3","R"],[124,"npc_crppk_V3","R"],[125,"npc_crptalk_v3","R"],[126,"p_look_at_V1","aLL"],[127,"npc_crp_id_V3","R"],[128,"cam_quake",""],[129,"cam_adj",""],[130,"cam_zmin",""],[131,"cam_zmout",""],[132,"cam_pan_V3","R"],[133,"game_lev_super",""],[134,"game_lev_reset",""],[135,"pos_pipe_V3","R"],[136,"if_zone_clear","RR"],[137,"chk_ene_num","R"],[138,"unhide_obj","R"],[139,"unhide_ene","R"],[140,"at_coords_call","R"],[141,"at_coords_talk","R"],[142,"col_npcin","R"],[143,"col_npcinr","R"],[144,"switch_on","aL"],[145,"switch_off","aL"],[146,"playbgm_epi","aL"],[147,"set_mainwarp","aL"],[148,"set_obj_param","RR"],[149,"set_floor_handler","aLW"],[150,"clr_floor_handler","aL"],[151,"col_plinaw","R"],[152,"hud_hide",""],[153,"hud_show",""],[154,"cine_enable",""],[155,"cine_disable",""],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"set_qt_failure","W"],[162,"set_qt_success","W"],[163,"clr_qt_failure",""],[164,"clr_qt_success",""],[165,"set_qt_cancel","W"],[166,"clr_qt_cancel",""],[167,"unknown",null],[168,"pl_walk_V3","R"],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"pl_add_meseta","aLL"],[177,"thread_stg","W"],[178,"del_obj_param","R"],[179,"item_create","RR"],[180,"item_create2","RR"],[181,"item_delete","RR"],[182,"item_delete2","RR"],[183,"item_check","RR"],[184,"setevt","aL"],[185,"get_difflvl","R"],[186,"set_qt_exit","W"],[187,"clr_qt_exit",""],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"particle_V3","R"],[193,"npc_text","aLs"],[194,"npc_chkwarp",""],[195,"pl_pkoff",""],[196,"map_designate","R"],[197,"masterkey_on",""],[198,"masterkey_off",""],[199,"window_time",""],[200,"winend_time",""],[201,"winset_time","R"],[202,"getmtime","R"],[203,"set_quest_board_handler","aLWs"],[204,"clear_quest_board_handler","aL"],[205,"particle_id_V3","R"],[206,"npc_crptalk_id_V3","R"],[207,"npc_lang_clean",""],[208,"pl_pkon",""],[209,"pl_chk_item2","RR"],[210,"enable_mainmenu",""],[211,"disable_mainmenu",""],[212,"start_battlebgm",""],[213,"end_battlebgm",""],[214,"disp_msg_qb","as"],[215,"close_msg_qb",""],[216,"set_eventflag_v3","aLL"],[217,"sync_leti",null],[218,"set_returnhunter",""],[219,"set_returncity",""],[220,"load_pvr",""],[221,"load_midi",""],[222,"unknown",null],[223,"npc_param_V3","aRL"],[224,"pad_dragon",""],[225,"clear_mainwarp","aL"],[226,"pcam_param_V3","R"],[227,"start_setevt_v3","aRL"],[228,"warp_on",""],[229,"warp_off",""],[230,"get_slotnumber","R"],[231,"get_servernumber","R"],[232,"set_eventflag2","aLR"],[233,"res","RR"],[234,"unknownEA","RL"],[235,"enable_bgmctrl","aL"],[236,"sw_send","R"],[237,"create_bgmctrl",""],[238,"pl_add_meseta2","aL"],[239,"sync_register","aRL"],[240,"send_regwork",null],[241,"leti_fixed_camera_V3","R"],[242,"default_camera_pos1",""],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknownF8","R"],[249,"unknown",null],[250,"get_gc_number","R"],[251,"unknownFB","W"],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknownFF",""]],Vn=[[0,"unknown",null],[1,"set_chat_callback?","aRs"],[2,"unknown",null],[3,"unknown",null],[4,"unknown",null],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"get_difficulty_level2","R"],[9,"get_number_of_player1","R"],[10,"get_coord_of_player","RR"],[11,"unknownF80B",""],[12,"unknownF80C",""],[13,"map_designate_ex","R"],[14,"unknownF80E","aL"],[15,"unknownF80F","aL"],[16,"ba_initial_floor","aL"],[17,"set_ba_rules",""],[18,"unknownF812","aL"],[19,"unknownF813","aL"],[20,"unknownF814","aL"],[21,"unknownF815","aL"],[22,"unknownF816","aL"],[23,"unknownF817","aL"],[24,"unknownF818","aL"],[25,"unknownF819","aL"],[26,"unknownF81A","aL"],[27,"unknownF81B","aL"],[28,"ba_disp_msg","as"],[29,"death_lvl_up","aL"],[30,"death_tech_lvl_up","aL"],[31,"unknown",null],[32,"cmode_stage","aL"],[33,"unknown",null],[34,"unknown",null],[35,"unknownF823","aL"],[36,"unknownF824","aL"],[37,"exp_multiplication","R"],[38,"exp_division?","R"],[39,"get_user_is_dead?","R"],[40,"go_floor","RR"],[41,"unknown",null],[42,"unknown",null],[43,"unlock_door2","aLL"],[44,"lock_door2","aLL"],[45,"if_switch_not_pressed","R"],[46,"if_switch_pressed","R"],[47,"unknownF82F","aLL"],[48,"control_dragon","R"],[49,"release_dragon",""],[50,"unknown",null],[51,"unknown",null],[52,"unknown",null],[53,"unknown",null],[54,"unknown",null],[55,"unknown",null],[56,"shrink","R"],[57,"unshrink","R"],[58,"unknown",null],[59,"unknown",null],[60,"display_clock2?","R"],[61,"unknownF83D","aL"],[62,"delete_area_title?","aL"],[63,"unknown",null],[64,"load_npc_data",""],[65,"get_npc_data","W"],[66,"unknown",null],[67,"unknown",null],[68,"unknown",null],[69,"unknown",null],[70,"unknown",null],[71,"unknown",null],[72,"give_damage_score","R"],[73,"take_damage_score","R"],[74,"unk_score_F84A","R"],[75,"unk_score_F84B","R"],[76,"kill_score","R"],[77,"death_score","R"],[78,"unk_score_F84E","R"],[79,"enemy_death_score","R"],[80,"meseta_score","R"],[81,"unknownF851","R"],[82,"unknownF852","aL"],[83,"reverse_warps",""],[84,"unreverse_warps",""],[85,"set_ult_map",""],[86,"unset_ult_map",""],[87,"set_area_title","as"],[88,"unknownF858",""],[89,"unknown",null],[90,"equip_item","R"],[91,"unequip_item","aLL"],[92,"unknown",null],[93,"unknown",null],[94,"unknownF85E","aL"],[95,"unknownF85F","aL"],[96,"unknownF860",""],[97,"unknownF861","aL"],[98,"unknown",null],[99,"unknown",null],[100,"cmode_rank","aLs"],[101,"award_item_name?",""],[102,"award_item_select?",""],[103,"award_item_give_to?","R"],[104,"unknownF868","RR"],[105,"unknownF869","RR"],[106,"item_create_cmode","RR"],[107,"unknownF86B","R"],[108,"award_item_ok?","R"],[109,"unknownF86D",""],[110,"unknownF86E",""],[111,"ba_set_lives","aL"],[112,"ba_set_tech_lvl","aL"],[113,"ba_set_lvl","aL"],[114,"ba_set_time_limit","aL"],[115,"boss_is_dead?","R"],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"enable_techs","R"],[120,"disable_techs","R"],[121,"get_gender","RR"],[122,"get_chara_class","RR"],[123,"take_slot_meseta","RR"],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"read_guildcard_flag","RR"],[128,"unknownF880","R"],[129,"get_pl_name?","R"],[130,"unknown",null],[131,"unknownF883","RR"],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"ba_close_msg",""],[137,"unknown",null],[138,"get_player_status","RR"],[139,"send_mail","aRs"],[140,"online_check","R"],[141,"chl_set_timerecord?","R"],[142,"chl_get_timerecord?","R"],[143,"unknownF88F","R"],[144,"unknownF890",""],[145,"load_enemy_data","aL"],[146,"get_physical_data","W"],[147,"get_attack_data","W"],[148,"get_resist_data","W"],[149,"get_movement_data","W"],[150,"unknown",null],[151,"unknown",null],[152,"shift_left","RR"],[153,"shift_right","RR"],[154,"get_random","RR"],[155,"reset_map",""],[156,"disp_chl_retry_menu","R"],[157,"chl_reverser?",""],[158,"unknownF89E","aL"],[159,"unknownF89F","R"],[160,"unknownF8A0",""],[161,"unknownF8A1",""],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknownF8A8","aL"],[169,"unknownF8A9","R"],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"get_number_of_player2","R"],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknownF8B8",""],[185,"chl_recovery?",""],[186,"unknown",null],[187,"unknown",null],[188,"set_episode","L"],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"file_dl_req","aLs"],[193,"get_dl_status","R"],[194,"gba_unknown4?",""],[195,"get_gba_state?","R"],[196,"unknownF8C4","R"],[197,"unknownF8C5","R"],[198,"QEXIT",""],[199,"use_animation","RR"],[200,"stop_animation","R"],[201,"run_to_coord","RR"],[202,"set_slot_invincible","RR"],[203,"unknownF8CB","R"],[204,"set_slot_poison","R"],[205,"set_slot_paralyze","R"],[206,"set_slot_shock","R"],[207,"set_slot_freeze","R"],[208,"set_slot_slow","R"],[209,"set_slot_confuse","R"],[210,"set_slot_shifta","R"],[211,"set_slot_deband","R"],[212,"set_slot_jellen","R"],[213,"set_slot_zalure","R"],[214,"fleti_fixed_camera","aR"],[215,"fleti_locked_camera","aLR"],[216,"default_camera_pos2",""],[217,"set_motion_blur",""],[218,"set_screen_b&w",""],[219,"unknownF8DB","aLLLLRW"],[220,"NPC_action_string","RRW"],[221,"get_pad_cond","RR"],[222,"get_button_cond","RR"],[223,"freeze_enemies",""],[224,"unfreeze_enemies",""],[225,"freeze_everything",""],[226,"unfreeze_everything",""],[227,"restore_hp","R"],[228,"restore_tp","R"],[229,"close_chat_bubble","R"],[230,"unknownF8E6","RR"],[231,"unknownF8E7","RR"],[232,"unknownF8E8","RR"],[233,"unknownF8E9","RR"],[234,"unknownF8EA","RR"],[235,"unknownF8EB","RR"],[236,"unknownF8EC","RR"],[237,"animation_check","RR"],[238,"call_image_data","aLW"],[239,"unknownF8EF",""],[240,"turn_off_bgm_p2",""],[241,"turn_on_bgm_p2",""],[242,"load_unk_data","aLLLLRW"],[243,"particle2","aRLf"],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Zn=[[0,"unknown",null],[1,"dec2float","RR"],[2,"float2dec","RR"],[3,"flet","RR"],[4,"fleti","RF"],[5,"unknown",null],[6,"unknown",null],[7,"unknown",null],[8,"fadd","RR"],[9,"faddi","RF"],[10,"fsub","RR"],[11,"fsubi","RF"],[12,"fmul","RR"],[13,"fmuli","RF"],[14,"fdiv","RR"],[15,"fdivi","RF"],[16,"get_unknown_count?","aLR"],[17,"get_stackable_item_count","RR"],[18,"freeze_and_hide_equip",""],[19,"thaw_and_show_equip",""],[20,"set_paletteX_callback","aRW"],[21,"activate_paletteX","aR"],[22,"enable_paletteX","aR"],[23,"restore_paletteX","aL"],[24,"disable_paletteX","aL"],[25,"get_paletteX_activated","aLR"],[26,"get_unknown_paletteX_status?","aLR"],[27,"disable_movement2","aR"],[28,"enable_movement2","aR"],[29,"get_time_played","R"],[30,"get_guildcard_total","R"],[31,"get_slot_meseta","R"],[32,"get_player_level","aLR"],[33,"get_Section_ID","aLR"],[34,"get_player_hp","aRR"],[35,"get_floor_number","aRR"],[36,"get_coord_player_detect","RR"],[37,"read_global_flag","abR"],[38,"write_global_flag","abR"],[39,"unknownF927","RR"],[40,"floor_player_detect","R"],[41,"read_disk_file?","as"],[42,"open_pack_select",""],[43,"item_select","R"],[44,"get_item_id","R"],[45,"color_change","aRRRRR"],[46,"send_statistic?","aLLLLLLLL"],[47,"unknownF92F","aLL"],[48,"chat_box","aLLLLLs"],[49,"chat_bubble","aLs"],[50,"unknown",null],[51,"unknownF933","R"],[52,"scroll_text","aLLLLLfRs"],[53,"gba_unknown1",""],[54,"gba_unknown2",""],[55,"gba_unknown3",""],[56,"add_damage_to?","aLL"],[57,"item_delete2","aL"],[58,"get_item_info","aLR"],[59,"item_packing1","aL"],[60,"item_packing2","aLL"],[61,"get_lang_setting?","aR"],[62,"prepare_statistic?","aLWW"],[63,"keyword_detect",""],[64,"Keyword","aRLs"],[65,"get_guildcard_num","aLR"],[66,"unknown",null],[67,"unknown",null],[68,"get_wrap_status","aLR"],[69,"initial_floor","aL"],[70,"sin","aRL"],[71,"cos","aRL"],[72,"unknown",null],[73,"unknown",null],[74,"boss_is_dead2?","R"],[75,"unknownF94B","R"],[76,"unknownF94C","R"],[77,"is_there_cardbattle","R"],[78,"unknown",null],[79,"unknown",null],[80,"BB_p2_menu","aL"],[81,"BB_Map_Designate","BWBB"],[82,"BB_get_number_in_pack","R"],[83,"BB_swap_item","aLLLLLLWW"],[84,"BB_check_wrap","aRR"],[85,"BB_exchange_PD_item","aRRRWW"],[86,"BB_exchange_PD_srank","aRRRRRWW"],[87,"BB_exchange_PD_special","aRRRRRLWW"],[88,"BB_exchange_PD_percent","aRRRRRLWW"],[89,"unknownF959","aL"],[90,"unknown",null],[91,"unknown",null],[92,"BB_exchange_SLT","aLRWW"],[93,"BB_exchange_PC",""],[94,"BB_box_create_BP","aLff"],[95,"BB_exchange_PT","aRRLWW"],[96,"unknownF960","aL"],[97,"unknownF961",""],[98,"unknown",null],[99,"unknown",null],[100,"unknown",null],[101,"unknown",null],[102,"unknown",null],[103,"unknown",null],[104,"unknown",null],[105,"unknown",null],[106,"unknown",null],[107,"unknown",null],[108,"unknown",null],[109,"unknown",null],[110,"unknown",null],[111,"unknown",null],[112,"unknown",null],[113,"unknown",null],[114,"unknown",null],[115,"unknown",null],[116,"unknown",null],[117,"unknown",null],[118,"unknown",null],[119,"unknown",null],[120,"unknown",null],[121,"unknown",null],[122,"unknown",null],[123,"unknown",null],[124,"unknown",null],[125,"unknown",null],[126,"unknown",null],[127,"unknown",null],[128,"unknown",null],[129,"unknown",null],[130,"unknown",null],[131,"unknown",null],[132,"unknown",null],[133,"unknown",null],[134,"unknown",null],[135,"unknown",null],[136,"unknown",null],[137,"unknown",null],[138,"unknown",null],[139,"unknown",null],[140,"unknown",null],[141,"unknown",null],[142,"unknown",null],[143,"unknown",null],[144,"unknown",null],[145,"unknown",null],[146,"unknown",null],[147,"unknown",null],[148,"unknown",null],[149,"unknown",null],[150,"unknown",null],[151,"unknown",null],[152,"unknown",null],[153,"unknown",null],[154,"unknown",null],[155,"unknown",null],[156,"unknown",null],[157,"unknown",null],[158,"unknown",null],[159,"unknown",null],[160,"unknown",null],[161,"unknown",null],[162,"unknown",null],[163,"unknown",null],[164,"unknown",null],[165,"unknown",null],[166,"unknown",null],[167,"unknown",null],[168,"unknown",null],[169,"unknown",null],[170,"unknown",null],[171,"unknown",null],[172,"unknown",null],[173,"unknown",null],[174,"unknown",null],[175,"unknown",null],[176,"unknown",null],[177,"unknown",null],[178,"unknown",null],[179,"unknown",null],[180,"unknown",null],[181,"unknown",null],[182,"unknown",null],[183,"unknown",null],[184,"unknown",null],[185,"unknown",null],[186,"unknown",null],[187,"unknown",null],[188,"unknown",null],[189,"unknown",null],[190,"unknown",null],[191,"unknown",null],[192,"unknown",null],[193,"unknown",null],[194,"unknown",null],[195,"unknown",null],[196,"unknown",null],[197,"unknown",null],[198,"unknown",null],[199,"unknown",null],[200,"unknown",null],[201,"unknown",null],[202,"unknown",null],[203,"unknown",null],[204,"unknown",null],[205,"unknown",null],[206,"unknown",null],[207,"unknown",null],[208,"unknown",null],[209,"unknown",null],[210,"unknown",null],[211,"unknown",null],[212,"unknown",null],[213,"unknown",null],[214,"unknown",null],[215,"unknown",null],[216,"unknown",null],[217,"unknown",null],[218,"unknown",null],[219,"unknown",null],[220,"unknown",null],[221,"unknown",null],[222,"unknown",null],[223,"unknown",null],[224,"unknown",null],[225,"unknown",null],[226,"unknown",null],[227,"unknown",null],[228,"unknown",null],[229,"unknown",null],[230,"unknown",null],[231,"unknown",null],[232,"unknown",null],[233,"unknown",null],[234,"unknown",null],[235,"unknown",null],[236,"unknown",null],[237,"unknown",null],[238,"unknown",null],[239,"unknown",null],[240,"unknown",null],[241,"unknown",null],[242,"unknown",null],[243,"unknown",null],[244,"unknown",null],[245,"unknown",null],[246,"unknown",null],[247,"unknown",null],[248,"unknown",null],[249,"unknown",null],[250,"unknown",null],[251,"unknown",null],[252,"unknown",null],[253,"unknown",null],[254,"unknown",null],[255,"unknown",null]],Yn=l.a.get("data_formats/parsing/quest/dat"),Kn=68,Qn=72;var Jn=l.a.get("data_formats/parsing/quest/qst");function Xn(e){var t="PC",n=e.u8();e.seek(1);var r=e.u8();if(68===n?t="Dreamcast/GameCube":88===n?68===r&&(t="Blue Burst"):166===n&&(t="Dreamcast download"),"Blue Burst"===t){e.seek_start(0);var a=function(e){for(var t=[],n=0;n<2;++n){e.seek(4);var r=e.u16();e.seek(38);var a=e.string_ascii(16,!0,!0),i=e.u32(),o=e.string_ascii(24,!0,!0);t.push({quest_id:r,file_name:a,file_name_2:o,size:i})}return t}(e),i=function(e,t){var n=new Map;for(;e.bytes_left>=1056;){var r=e.position,a=e.seek(4).u8(),i=e.seek(3).string_ascii(16,!0,!0),o=n.get(i);if(!o){var s=t.get(i);n.set(i,o={name:i,expected_size:s,data:new ln.a(s||10240,!0),chunk_nos:new Set})}o.chunk_nos.has(a)?Jn.warn("File chunk number ".concat(a," of file ").concat(i," was already encountered, overwriting previous chunk.")):o.chunk_nos.add(a);var l=e.seek(1024).u32();e.seek(-1028),l>1024&&(Jn.warn("Data segment size of ".concat(l," is larger than expected maximum size, reading just 1024 bytes.")),l=1024);var u=e.take(l),c=1024*a;if(o.data.size=Math.max(c+l,o.data.size),o.data.seek_start(c).write_cursor(u),e.seek(1032-u.size),e.position!==r+1056)throw new Error("Read ".concat(e.position-r," file chunk message bytes instead of expected 1056."))}e.bytes_left&&Jn.warn("".concat(e.bytes_left," Bytes left in file."));var d=!0,p=!1,h=void 0;try{for(var _,m=n.values()[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var w=_.value;w.data.seek_start(0),w.chunk_nos=new Set(Array.from(w.chunk_nos.values()).sort(function(e,t){return e-t})),null!=w.expected_size&&w.data.size!==w.expected_size&&Jn.warn("File ".concat(w.name," has an actual size of ").concat(w.data.size," instead of the expected size ").concat(w.expected_size,"."));for(var f=Math.max(w.data.size,w.expected_size||0),v=0;v<Math.ceil(f/1024);++v)w.chunk_nos.has(v)||Jn.warn("File ".concat(w.name," is missing chunk ").concat(v,"."))}}catch(b){p=!0,h=b}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}return Array.from(n.values())}(e,new Map(a.map(function(e){return[e.file_name,e.size]}))),o=!0,s=!1,l=void 0;try{for(var u,c=function(){var e=u.value,t=a.find(function(t){return t.file_name===e.name});t&&(e.id=t.quest_id,e.name_2=t.file_name_2)},d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c()}catch(p){s=!0,l=p}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return{version:t,files:i}}Jn.error("Can't parse ".concat(t," QST files."))}function $n(e){var t=e.files,n=t.map(function(e){return 88+1056*Math.ceil(e.data.size/1024)}).reduce(function(e,t){return e+t}),r=new ln.a(n,!0);if(function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(s.name.length>16)throw Error("File ".concat(s.name," has a name longer than 16 characters."));e.write_u16(88),e.write_u16(68),e.write_u16(s.id||0);for(var l=0;l<38;++l)e.write_u8(0);e.write_string_ascii(s.name,16),e.write_u32(s.data.size);var u=void 0;if(null==s.name_2){var c=s.name.lastIndexOf(".");u=-1===c?s.name+"_j":s.name.slice(0,c)+"_j"+s.name.slice(c)}else u=s.name_2;if(u.length>24)throw Error("File ".concat(s.name," has a file_name_2 length (").concat(u,") longer than 24 characters."));e.write_string_ascii(u,24)}}catch(d){r=!0,a=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}(r,t),function(e,t){t=t.slice();var n=new Array(t.length).fill(0);for(;t.length;)for(var r=0;r<t.length;)er(e,t[r].data,n[r]++,t[r].name)?++r:(t.splice(r,1),n.splice(r,1))}(r,t),r.size!==n)throw new Error("Expected a final file size of ".concat(n,", but got ").concat(r.size,"."));return r.seek_start(0)}function er(e,t,n,r){e.write_u8_array([28,4,19,0]),e.write_u8(n),e.write_u8_array([0,0,0]),e.write_string_ascii(r,16);var a=Math.min(1024,t.bytes_left);e.write_cursor(t.take(a));for(var i=a;i<1024;++i)e.write_u8(0);return e.write_u32(a),e.write_u32(0),t.bytes_left>0}var tr=l.a.get("data_formats/parsing/quest");function nr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Xn(e);if(n){var r,a,i=!0,o=!1,s=void 0;try{for(var l,u=n.files[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=c.name.trim().toLowerCase();d.endsWith(".dat")?r=c:d.endsWith(".bin")&&(a=c)}}catch(f){o=!0,s=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}if(r){if(a){var p=function(e){for(var t=[],n=[],r=[];e.bytes_left;){var a=e.u32(),i=e.u32(),o=e.u32(),s=e.u32();if(0===a)break;if(s!==i-16)throw Error("Malformed DAT file. Expected an entities size of ".concat(i-16,", got ").concat(s,"."));if(1===a){for(var l=Math.floor(s/Kn),u=e.position,c=0;c<l;++c){var d=e.u16(),p=e.u8_array(10),h=e.u16(),_=e.u8_array(2),m=e.f32(),w=e.f32(),f=e.f32(),v=e.i32()/65535*2*Math.PI,b=e.i32()/65535*2*Math.PI,y=e.i32()/65535*2*Math.PI,k=e.u8_array(28);t.push({type_id:d,section_id:h,position:new U(m,w,f),rotation:new U(v,b,y),area_id:o,unknown:[p,_,k]})}var g=e.position-u;g!==s&&(Yn.warn("Read ".concat(g," bytes instead of expected ").concat(s," for entity type ").concat(a," (Object).")),e.seek(s-g))}else if(2===a){for(var R=Math.floor(s/Qn),j=e.position,O=0;O<R;++O){var S=e.u16(),D=e.u8_array(10),x=e.u16(),E=e.u8_array(6),C=e.f32(),B=e.f32(),L=e.f32(),M=e.i32()/65535*2*Math.PI,F=e.i32()/65535*2*Math.PI,I=e.i32()/65535*2*Math.PI,P=e.u8_array(4),z=e.f32(),G=e.u8_array(12),A=e.u32(),T=e.u8_array(4);n.push({type_id:S,section_id:x,position:new U(C,B,L),rotation:new U(M,F,I),skin:A,area_id:o,flags:z,unknown:[D,E,P,G,T]})}var W=e.position-j;W!==s&&(Yn.warn("Read ".concat(W," bytes instead of expected ").concat(s," for entity type ").concat(a," (NPC).")),e.seek(s-W))}else r.push({entity_type:a,total_size:i,area_id:o,entities_size:s,data:e.u8_array(s)})}return{objs:t,npcs:n,unknowns:r}}(Tn(r.data)),h=Nn(Tn(a.data),t),_=1,m=[];if(h.function_offsets.length){var w=function(e,t){var n=0,r=!1,a=[],i=!0,o=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(n===t&&(r=!0),r&&(a.push(c),1===c.opcode))break;n+=c.size}}catch(f){o=!0,s=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r?a:void 0}(h.instructions,h.function_offsets[0]);w?m=function(e,t,n,r){var a=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=e.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;a.set(c.area_id,0)}}catch(f){o=!0,s=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,h=void 0;try{for(var _,m=e.objs[Symbol.iterator]();!(d=(_=m.next()).done);d=!0){var w=_.value;a.set(w.area_id,0)}}catch(f){p=!0,h=f}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}var v=n.filter(function(e){return"BB_Map_Designate"===e.mnemonic}),b=!0,y=!1,k=void 0;try{for(var g,R=v[Symbol.iterator]();!(b=(g=R.next()).done);b=!0){var j=g.value,O=j.args[0],S=j.args[2];a.set(O,S)}}catch(f){y=!0,k=f}finally{try{b||null==R.return||R.return()}finally{if(y)throw k}}var D=new Array,E=!0,C=!1,B=void 0;try{for(var L,M=a.entries()[Symbol.iterator]();!(E=(L=M.next()).done);E=!0){var F=L.value,I=Object(x.a)(F,2),P=I[0],z=I[1];try{D.push(Ln.get_variant(t,P,z))}catch(G){if(!r)throw G;tr.error("Unknown area variant.",G)}}}catch(f){C=!0,B=f}finally{try{E||null==M.return||M.return()}finally{if(C)throw B}}return D.sort(function(e,t){return e.area.order-t.area.order||e.id-t.id})}(p,_=function(e){var t=e.find(function(e){return"set_episode"===e.mnemonic});if(!t)return tr.debug("Function 0 has no set_episode instruction."),1;switch(t.args[0]){default:case 0:return 1;case 1:return 2;case 2:return 4}}(w),w,t):tr.warn("Function 0 offset ".concat(h.function_offsets[0]," is invalid."))}else tr.warn("File contains no functions.");return new Ne(r.id,h.quest_name,h.short_description,h.long_description,_,m,p.objs.map(function(e){var t=e.position,n=t.x,r=t.y,a=t.z,i=e.rotation;return new qe(e.area_id,e.section_id,new U(n,r,a),new U(i.x,i.y,i.z),je.from_pso_id(e.type_id),e)}),function(e,t){return t.map(function(t){var n=t.position,r=n.x,a=n.y,i=n.z,o=t.rotation;return new Ve(t.area_id,t.section_id,new U(r,a,i),new U(o.x,o.y,o.z),function(e,t){var n=t.type_id,r=t.flags,a=t.skin,i=t.area_id,o=Math.abs(r-1)>1e-5;switch("".concat(n,", ").concat(a%3,", ").concat(e)){case"".concat(68,", 0, 1"):return K.Booma;case"".concat(68,", 1, 1"):return K.Gobooma;case"".concat(68,", 2, 1"):return K.Gigobooma;case"".concat(99,", 0, 1"):return K.EvilShark;case"".concat(99,", 1, 1"):return K.PalShark;case"".concat(99,", 2, 1"):return K.GuilShark;case"".concat(166,", 0, 1"):return K.Dimenian;case"".concat(166,", 0, 2"):return K.Dimenian2;case"".concat(166,", 1, 1"):return K.LaDimenian;case"".concat(166,", 1, 2"):return K.LaDimenian2;case"".concat(166,", 2, 1"):return K.SoDimenian;case"".concat(166,", 2, 2"):return K.SoDimenian2;case"".concat(214,", 0, 2"):return K.Mericarol;case"".concat(214,", 1, 2"):return K.Mericus;case"".concat(214,", 2, 2"):return K.Merikle;case"".concat(277,", 0, 4"):return K.Boota;case"".concat(277,", 1, 4"):return K.ZeBoota;case"".concat(277,", 2, 4"):return K.BaBoota;case"".concat(279,", 0, 4"):return K.Goran;case"".concat(279,", 1, 4"):return K.PyroGoran;case"".concat(279,", 2, 4"):return K.GoranDetonator}switch("".concat(n,", ").concat(a%2,", ").concat(e)){case"".concat(64,", 0, 1"):return K.Hildebear;case"".concat(64,", 0, 2"):return K.Hildebear2;case"".concat(64,", 1, 1"):return K.Hildeblue;case"".concat(64,", 1, 2"):return K.Hildeblue2;case"".concat(65,", 0, 1"):return K.RagRappy;case"".concat(65,", 0, 2"):return K.RagRappy2;case"".concat(65,", 0, 4"):return K.SandRappy;case"".concat(65,", 1, 1"):return K.AlRappy;case"".concat(65,", 1, 2"):return K.LoveRappy;case"".concat(65,", 1, 4"):return K.DelRappy;case"".concat(128,", 0, 1"):return K.Dubchic;case"".concat(128,", 0, 2"):return K.Dubchic2;case"".concat(128,", 1, 1"):return K.Gilchic;case"".concat(128,", 1, 2"):return K.Gilchic2;case"".concat(212,", 0, 2"):return K.SinowBerill;case"".concat(212,", 1, 2"):return K.SinowSpigell;case"".concat(213,", 0, 2"):return K.Merillia;case"".concat(213,", 1, 2"):return K.Meriltas;case"".concat(215,", 0, 2"):return K.UlGibbon;case"".concat(215,", 1, 2"):return K.ZolGibbon;case"".concat(221,", 0, 2"):return K.Dolmolm;case"".concat(221,", 1, 2"):return K.Dolmdarl;case"".concat(224,", 0, 2"):return i>15?K.Epsilon:K.SinowZoa;case"".concat(224,", 1, 2"):return i>15?K.Epsilon:K.SinowZele;case"".concat(274,", 0, 4"):return K.MerissaA;case"".concat(274,", 1, 4"):return K.MerissaAA;case"".concat(276,", 0, 4"):return K.Zu;case"".concat(276,", 1, 4"):return K.Pazuzu;case"".concat(278,", 0, 4"):return K.Dorphon;case"".concat(278,", 1, 4"):return K.DorphonEclair;case"".concat(281,", 0, 4"):return o?K.SaintMilion:K.Kondrieu;case"".concat(281,", 1, 4"):return o?K.Shambertin:K.Kondrieu}switch("".concat(n,", ").concat(e)){case"".concat(66,", 1"):return K.Monest;case"".concat(66,", 2"):return K.Monest2;case"".concat(67,", 1"):return o?K.SavageWolf:K.BarbarousWolf;case"".concat(67,", 2"):return o?K.SavageWolf2:K.BarbarousWolf2;case"".concat(96,", 1"):return K.GrassAssassin;case"".concat(96,", 2"):return K.GrassAssassin2;case"".concat(97,", 1"):return i>15?K.DelLily:o?K.PoisonLily:K.NarLily;case"".concat(97,", 2"):return i>15?K.DelLily:o?K.PoisonLily2:K.NarLily2;case"".concat(98,", 1"):return K.NanoDragon;case"".concat(100,", 1"):return o?K.PofuillySlime:K.PouillySlime;case"".concat(101,", 1"):return K.PanArms;case"".concat(101,", 2"):return K.PanArms2;case"".concat(129,", 1"):return K.Garanz;case"".concat(129,", 2"):return K.Garanz2;case"".concat(130,", 1"):return o?K.SinowBeat:K.SinowGold;case"".concat(131,", 1"):return K.Canadine;case"".concat(132,", 1"):return K.Canane;case"".concat(133,", 1"):return K.Dubswitch;case"".concat(133,", 2"):return K.Dubswitch2;case"".concat(160,", 1"):return K.Delsaber;case"".concat(160,", 2"):return K.Delsaber2;case"".concat(161,", 1"):return K.ChaosSorcerer;case"".concat(161,", 2"):return K.ChaosSorcerer2;case"".concat(162,", 1"):return K.DarkGunner;case"".concat(164,", 1"):return K.ChaosBringer;case"".concat(165,", 1"):return K.DarkBelra;case"".concat(165,", 2"):return K.DarkBelra2;case"".concat(167,", 1"):return K.Bulclaw;case"".concat(168,", 1"):return K.Claw;case"".concat(192,", 1"):return K.Dragon;case"".concat(192,", 2"):return K.GalGryphon;case"".concat(193,", 1"):return K.DeRolLe;case"".concat(197,", 1"):return K.VolOpt;case"".concat(200,", 1"):return K.DarkFalz;case"".concat(202,", 2"):return K.OlgaFlow;case"".concat(203,", 2"):return K.BarbaRay;case"".concat(204,", 2"):return K.GolDragon;case"".concat(216,", 2"):return K.Gibbles;case"".concat(217,", 2"):return K.Gee;case"".concat(218,", 2"):return K.GiGue;case"".concat(219,", 2"):return K.Deldepth;case"".concat(220,", 2"):return K.Delbiter;case"".concat(222,", 2"):return K.Morfos;case"".concat(223,", 2"):return K.Recobox;case"".concat(225,", 2"):return K.IllGill;case"".concat(272,", 4"):return K.Astark;case"".concat(273,", 4"):return o?K.SatelliteLizard:K.Yowie;case"".concat(275,", 4"):return K.Girtablulu}switch(n){case 4:return K.FemaleFat;case 5:return K.FemaleMacho;case 7:return K.FemaleTall;case 10:return K.MaleDwarf;case 11:return K.MaleFat;case 12:return K.MaleMacho;case 13:return K.MaleOld;case 25:return K.BlueSoldier;case 26:return K.RedSoldier;case 27:return K.Principal;case 28:return K.Tekker;case 29:return K.GuildLady;case 30:return K.Scientist;case 31:return K.Nurse;case 32:return K.Irene;case 241:return K.ItemShop;case 254:return K.Nurse2}return K.Unknown}(e,t),t)})}(_,p.npcs),p.unknowns,h.data)}tr.error("File contains no BIN file.")}else tr.error("File contains no DAT file.")}}function rr(e,t){var n,r,a=function(e){var t=e.objs,n=e.npcs,r=e.unknowns,a=new ln.a(t.length*Kn+n.length*Qn+1e3*r.length,!0),i=Object(tt.groupBy)(t,function(e){return e.area_id}),o=Object.keys(i).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),s=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value,h=i[p],_=h.length*Kn;a.write_u32(1),a.write_u32(_+16),a.write_u32(p),a.write_u32(_);var m=!0,w=!1,f=void 0;try{for(var v,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var y=v.value;a.write_u16(y.type_id),a.write_u8_array(y.unknown[0]),a.write_u16(y.section_id),a.write_u8_array(y.unknown[1]),a.write_f32(y.position.x),a.write_f32(y.position.y),a.write_f32(y.position.z),a.write_i32(Math.round(y.rotation.x/(2*Math.PI)*65535)),a.write_i32(Math.round(y.rotation.y/(2*Math.PI)*65535)),a.write_i32(Math.round(y.rotation.z/(2*Math.PI)*65535)),a.write_u8_array(y.unknown[2])}}catch(N){w=!0,f=N}finally{try{m||null==b.return||b.return()}finally{if(w)throw f}}}}catch(N){l=!0,u=N}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var k=Object(tt.groupBy)(n,function(e){return e.area_id}),g=Object.keys(k).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),R=!0,j=!1,O=void 0;try{for(var S,D=g[Symbol.iterator]();!(R=(S=D.next()).done);R=!0){var x=S.value,E=k[x],C=E.length*Qn;a.write_u32(2),a.write_u32(C+16),a.write_u32(x),a.write_u32(C);var B=!0,L=!1,M=void 0;try{for(var F,I=E[Symbol.iterator]();!(B=(F=I.next()).done);B=!0){var P=F.value;a.write_u16(P.type_id),a.write_u8_array(P.unknown[0]),a.write_u16(P.section_id),a.write_u8_array(P.unknown[1]),a.write_f32(P.position.x),a.write_f32(P.position.y),a.write_f32(P.position.z),a.write_i32(Math.round(P.rotation.x/(2*Math.PI)*65535)),a.write_i32(Math.round(P.rotation.y/(2*Math.PI)*65535)),a.write_i32(Math.round(P.rotation.z/(2*Math.PI)*65535)),a.write_u8_array(P.unknown[2]),a.write_f32(P.flags),a.write_u8_array(P.unknown[3]),a.write_u32(P.skin),a.write_u8_array(P.unknown[4])}}catch(N){L=!0,M=N}finally{try{B||null==I.return||I.return()}finally{if(L)throw M}}}}catch(N){j=!0,O=N}finally{try{R||null==D.return||D.return()}finally{if(j)throw O}}var z=!0,G=!1,A=void 0;try{for(var T,W=r[Symbol.iterator]();!(z=(T=W.next()).done);z=!0){var U=T.value;a.write_u32(U.entity_type),a.write_u32(U.total_size),a.write_u32(U.area_id),a.write_u32(U.entities_size),a.write_u8_array(U.data)}}catch(N){G=!0,A=N}finally{try{z||null==W.return||W.return()}finally{if(G)throw A}}return a.write_u32(0),a.write_u32(0),a.write_u32(0),a.write_u32(0),a.seek_start(0),a}({objs:(r=e.objects,r.map(function(e){return{type_id:e.type.pso_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,area_id:e.area_id,unknown:e.dat.unknown}})),npcs:(n=e.npcs,n.map(function(e){var t=function(e){switch(e){default:throw new Error("Unexpected type ".concat(e.code,"."));case K.Unknown:return;case K.FemaleFat:return{type_id:4,skin:0,regular:!0};case K.FemaleMacho:return{type_id:5,skin:0,regular:!0};case K.FemaleTall:return{type_id:7,skin:0,regular:!0};case K.MaleDwarf:return{type_id:10,skin:0,regular:!0};case K.MaleFat:return{type_id:11,skin:0,regular:!0};case K.MaleMacho:return{type_id:12,skin:0,regular:!0};case K.MaleOld:return{type_id:13,skin:0,regular:!0};case K.BlueSoldier:return{type_id:25,skin:0,regular:!0};case K.RedSoldier:return{type_id:26,skin:0,regular:!0};case K.Principal:return{type_id:27,skin:0,regular:!0};case K.Tekker:return{type_id:28,skin:0,regular:!0};case K.GuildLady:return{type_id:29,skin:0,regular:!0};case K.Scientist:return{type_id:30,skin:0,regular:!0};case K.Nurse:return{type_id:31,skin:0,regular:!0};case K.Irene:return{type_id:32,skin:0,regular:!0};case K.ItemShop:return{type_id:241,skin:0,regular:!0};case K.Nurse2:return{type_id:254,skin:0,regular:!0};case K.Hildebear:return{type_id:64,skin:0,regular:!0};case K.Hildeblue:return{type_id:64,skin:1,regular:!0};case K.RagRappy:return{type_id:65,skin:0,regular:!0};case K.AlRappy:return{type_id:65,skin:1,regular:!0};case K.Monest:return{type_id:66,skin:0,regular:!0};case K.SavageWolf:return{type_id:67,skin:0,regular:!0};case K.BarbarousWolf:return{type_id:67,skin:0,regular:!1};case K.Booma:return{type_id:68,skin:0,regular:!0};case K.Gobooma:return{type_id:68,skin:1,regular:!0};case K.Gigobooma:return{type_id:68,skin:2,regular:!0};case K.Dragon:return{type_id:192,skin:0,regular:!0};case K.GrassAssassin:return{type_id:96,skin:0,regular:!0};case K.PoisonLily:return{type_id:97,skin:0,regular:!0};case K.NarLily:return{type_id:97,skin:1,regular:!0};case K.NanoDragon:return{type_id:98,skin:0,regular:!0};case K.EvilShark:return{type_id:99,skin:0,regular:!0};case K.PalShark:return{type_id:99,skin:1,regular:!0};case K.GuilShark:return{type_id:99,skin:2,regular:!0};case K.PofuillySlime:return{type_id:100,skin:0,regular:!0};case K.PouillySlime:return{type_id:100,skin:0,regular:!1};case K.PanArms:return{type_id:101,skin:0,regular:!0};case K.DeRolLe:return{type_id:193,skin:0,regular:!0};case K.Dubchic:return{type_id:128,skin:0,regular:!0};case K.Gilchic:return{type_id:128,skin:1,regular:!0};case K.Garanz:return{type_id:129,skin:0,regular:!0};case K.SinowBeat:return{type_id:130,skin:0,regular:!0};case K.SinowGold:return{type_id:130,skin:0,regular:!1};case K.Canadine:return{type_id:131,skin:0,regular:!0};case K.Canane:return{type_id:132,skin:0,regular:!0};case K.Dubswitch:return{type_id:133,skin:0,regular:!0};case K.VolOpt:return{type_id:197,skin:0,regular:!0};case K.Delsaber:return{type_id:160,skin:0,regular:!0};case K.ChaosSorcerer:return{type_id:161,skin:0,regular:!0};case K.DarkGunner:return{type_id:162,skin:0,regular:!0};case K.ChaosBringer:return{type_id:164,skin:0,regular:!0};case K.DarkBelra:return{type_id:165,skin:0,regular:!0};case K.Dimenian:return{type_id:166,skin:0,regular:!0};case K.LaDimenian:return{type_id:166,skin:1,regular:!0};case K.SoDimenian:return{type_id:166,skin:2,regular:!0};case K.Bulclaw:return{type_id:167,skin:0,regular:!0};case K.Claw:return{type_id:168,skin:0,regular:!0};case K.DarkFalz:return{type_id:200,skin:0,regular:!0};case K.Hildebear2:return{type_id:64,skin:0,regular:!0};case K.Hildeblue2:return{type_id:64,skin:1,regular:!0};case K.RagRappy2:return{type_id:65,skin:0,regular:!0};case K.LoveRappy:return{type_id:65,skin:1,regular:!0};case K.Monest2:return{type_id:66,skin:0,regular:!0};case K.PoisonLily2:return{type_id:97,skin:0,regular:!0};case K.NarLily2:return{type_id:97,skin:1,regular:!0};case K.GrassAssassin2:return{type_id:96,skin:0,regular:!0};case K.Dimenian2:return{type_id:166,skin:0,regular:!0};case K.LaDimenian2:return{type_id:166,skin:1,regular:!0};case K.SoDimenian2:return{type_id:166,skin:2,regular:!0};case K.DarkBelra2:return{type_id:165,skin:0,regular:!0};case K.BarbaRay:return{type_id:203,skin:0,regular:!0};case K.SavageWolf2:return{type_id:67,skin:0,regular:!0};case K.BarbarousWolf2:return{type_id:67,skin:0,regular:!1};case K.PanArms2:return{type_id:101,skin:0,regular:!0};case K.Dubchic2:return{type_id:128,skin:0,regular:!0};case K.Gilchic2:return{type_id:128,skin:1,regular:!0};case K.Garanz2:return{type_id:129,skin:0,regular:!0};case K.Dubswitch2:return{type_id:133,skin:0,regular:!0};case K.Delsaber2:return{type_id:160,skin:0,regular:!0};case K.ChaosSorcerer2:return{type_id:161,skin:0,regular:!0};case K.GolDragon:return{type_id:204,skin:0,regular:!0};case K.SinowBerill:return{type_id:212,skin:0,regular:!0};case K.SinowSpigell:return{type_id:212,skin:1,regular:!0};case K.Merillia:return{type_id:213,skin:0,regular:!0};case K.Meriltas:return{type_id:213,skin:1,regular:!0};case K.Mericarol:return{type_id:214,skin:0,regular:!0};case K.Mericus:return{type_id:214,skin:1,regular:!0};case K.Merikle:return{type_id:214,skin:2,regular:!0};case K.UlGibbon:return{type_id:215,skin:0,regular:!0};case K.ZolGibbon:return{type_id:215,skin:1,regular:!0};case K.Gibbles:return{type_id:216,skin:0,regular:!0};case K.Gee:return{type_id:217,skin:0,regular:!0};case K.GiGue:return{type_id:218,skin:0,regular:!0};case K.GalGryphon:return{type_id:192,skin:0,regular:!0};case K.Deldepth:return{type_id:219,skin:0,regular:!0};case K.Delbiter:return{type_id:220,skin:0,regular:!0};case K.Dolmolm:return{type_id:221,skin:0,regular:!0};case K.Dolmdarl:return{type_id:221,skin:1,regular:!0};case K.Morfos:return{type_id:222,skin:0,regular:!0};case K.Recobox:return{type_id:223,skin:0,regular:!0};case K.Epsilon:case K.SinowZoa:return{type_id:224,skin:0,regular:!0};case K.SinowZele:return{type_id:224,skin:1,regular:!0};case K.IllGill:return{type_id:225,skin:0,regular:!0};case K.DelLily:return{type_id:97,skin:0,regular:!0};case K.OlgaFlow:return{type_id:202,skin:0,regular:!0};case K.SandRappy:return{type_id:65,skin:0,regular:!0};case K.DelRappy:return{type_id:65,skin:1,regular:!0};case K.Astark:return{type_id:272,skin:0,regular:!0};case K.SatelliteLizard:return{type_id:273,skin:0,regular:!0};case K.Yowie:return{type_id:273,skin:0,regular:!1};case K.MerissaA:return{type_id:274,skin:0,regular:!0};case K.MerissaAA:return{type_id:274,skin:1,regular:!0};case K.Girtablulu:return{type_id:275,skin:0,regular:!0};case K.Zu:return{type_id:276,skin:0,regular:!0};case K.Pazuzu:return{type_id:276,skin:1,regular:!0};case K.Boota:return{type_id:277,skin:0,regular:!0};case K.ZeBoota:return{type_id:277,skin:1,regular:!0};case K.BaBoota:return{type_id:277,skin:2,regular:!0};case K.Dorphon:return{type_id:278,skin:0,regular:!0};case K.DorphonEclair:return{type_id:278,skin:1,regular:!0};case K.Goran:return{type_id:279,skin:0,regular:!0};case K.PyroGoran:return{type_id:279,skin:1,regular:!0};case K.GoranDetonator:return{type_id:279,skin:2,regular:!0};case K.SaintMilion:return{type_id:281,skin:0,regular:!0};case K.Shambertin:return{type_id:281,skin:1,regular:!0};case K.Kondrieu:return{type_id:281,skin:0,regular:!1}}}(e.type),n=e.dat.flags;return t&&(n=-8388609&e.dat.flags|(t.regular?0:8388608)),{type_id:t?t.type_id:e.dat.type_id,section_id:e.section_id,position:e.section_position,rotation:e.rotation,flags:n,skin:t?t.skin:e.dat.skin,area_id:e.area_id,unknown:e.dat.unknown}})),unknowns:e.dat_unknowns}),i={data:e.bin_data}.data.seek_start(0),o=t.lastIndexOf("."),s=-1===o?t:t.slice(0,o);return $n({files:[{name:s+".dat",id:e.id,data:Mn(a)},{name:s+".bin",id:e.id,data:Mn(i)}]})}var ar=16776960,ir=16711680;function or(e,t){return lr(e,t,ar,"Object")}function sr(e,t){return lr(e,t,ir,"NPC")}function lr(e,t,n,r){var a=new un.Mesh(t,new un.MeshLambertMaterial({color:n,side:un.DoubleSide}));return a.name=r,a.userData.entity=e,a}function ur(e){return new un.Vector3(e.x,e.y,e.z)}var cr=new un.MeshLambertMaterial({color:16711935,side:un.DoubleSide}),dr=new un.MeshLambertMaterial({skinning:!0,color:16711935,side:un.DoubleSide}),pr=new un.Vector3(0,1,0),hr=new un.Vector3(0,0,0),_r=new un.Quaternion(0,0,0,1),mr=new un.Vector3(1,1,1);function wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr;return new br(t).create_buffer_geometry(e)}var fr,vr=function(){function e(){Object(d.a)(this,e),this.vertices_stack=[]}return Object(p.a)(e,[{key:"put",value:function(e){this.vertices_stack.push(e)}},{key:"get",value:function(e){for(var t=[],n=this.vertices_stack.length-1;n>=0;n--){var r=this.vertices_stack[n][e];r&&t.push(r)}return t}}]),e}(),br=function(){function e(t){Object(d.a)(this,e),this.material=void 0,this.bone_id=0,this.vertices=new vr,this.positions=[],this.normals=[],this.indices=[],this.bone_indices=[],this.bone_weights=[],this.bones=[],this.material=t}return Object(p.a)(e,[{key:"create_buffer_geometry",value:function(e){this.object_to_geometry(e,void 0,new un.Matrix4);var t=new un.BufferGeometry;return t.addAttribute("position",new un.Float32BufferAttribute(this.positions,3)),t.addAttribute("normal",new un.Float32BufferAttribute(this.normals,3)),t.setIndex(new un.Uint16BufferAttribute(this.indices,1)),t.computeBoundingSphere(),t}},{key:"create_skinned_mesh",value:function(e){var t=this.create_buffer_geometry(e);t.addAttribute("skinIndex",new un.Uint16BufferAttribute(this.bone_indices,4)),t.addAttribute("skinWeight",new un.Float32BufferAttribute(this.bone_weights,4));var n=new un.SkinnedMesh(t,this.material),r=new un.Skeleton(this.bones);return n.add(this.bones[0]),n.bind(r),n}},{key:"object_to_geometry",value:function(e,t,n){var r,a=e.evaluation_flags,i=a.no_translate,o=a.no_rotate,s=a.no_scale,l=a.hidden,u=a.break_child_trace,c=a.zxy_rotation_order,d=a.skip,p=e.position,h=e.rotation,_=e.scale,m=new un.Euler(h.x,h.y,h.z,c?"ZXY":"ZYX"),w=(new un.Matrix4).compose(i?hr:ur(p),o?_r:(new un.Quaternion).setFromEuler(m),s?mr:ur(_)).premultiply(n);if(d?r=t:((r=new un.Bone).name=this.bone_id.toString(),r.position.set(p.x,p.y,p.z),r.setRotationFromEuler(m),r.scale.set(_.x,_.y,_.z),this.bones.push(r),t&&t.add(r)),e.model&&!l&&this.model_to_geometry(e.model,w),this.bone_id++,!u){var f=!0,v=!1,b=void 0;try{for(var y,k=e.children[Symbol.iterator]();!(f=(y=k.next()).done);f=!0){var g=y.value;this.object_to_geometry(g,r,w)}}catch(R){v=!0,b=R}finally{try{f||null==k.return||k.return()}finally{if(v)throw b}}}}},{key:"model_to_geometry",value:function(e,t){"nj"===e.type?this.nj_model_to_geometry(e,t):this.xj_model_to_geometry(e,t)}},{key:"nj_model_to_geometry",value:function(e,t){var n=this,r=(new un.Matrix3).getNormalMatrix(t),a=e.vertices.map(function(e){var a=ur(e.position),i=e.normal?ur(e.normal):pr;return a.applyMatrix4(t),i.applyMatrix3(r),{bone_id:n.bone_id,position:a,normal:i,bone_weight:e.bone_weight,bone_weight_status:e.bone_weight_status,calc_continue:e.calc_continue}});this.vertices.put(a);var i=!0,o=!1,s=void 0;try{for(var l,u=e.meshes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)for(var c=l.value,d=0;d<c.vertices.length;++d){var p=c.vertices[d],h=this.vertices.get(p.index);if(h.length){var _,m,w=h[0],f=w.normal||p.normal||pr,v=this.positions.length/3;this.positions.push(w.position.x,w.position.y,w.position.z),this.normals.push(f.x,f.y,f.z),d>=2&&(d%2===(c.clockwise_winding?1:0)?(this.indices.push(v-2),this.indices.push(v-1),this.indices.push(v)):(this.indices.push(v-2),this.indices.push(v),this.indices.push(v-1)));for(var b=[0,0,0,0],y=[0,0,0,0],k=h.length-1;k>=0;k--){var g=h[k];b[g.bone_weight_status]=g.bone_id,y[g.bone_weight_status]=g.bone_weight}(_=this.bone_indices).push.apply(_,b),(m=this.bone_weights).push.apply(m,y)}}}catch(R){o=!0,s=R}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}}},{key:"xj_model_to_geometry",value:function(e,t){var n=this.positions,r=this.normals,a=this.indices,i=this.positions.length/3,o=!0,s=(new un.Matrix3).getNormalMatrix(t),l=!0,u=!1,c=void 0;try{for(var d,p=e.vertices[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value,_=h.position,m=h.normal,w=ur(_).applyMatrix4(t);n.push(w.x,w.y,w.z);var f=ur(m=m||pr).applyMatrix3(s);r.push(f.x,f.y,f.z)}}catch(I){u=!0,c=I}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}var v=!0,b=!1,y=void 0;try{for(var k,g=e.meshes[Symbol.iterator]();!(v=(k=g.next()).done);v=!0)for(var R=k.value.indices,j=2;j<R.length;++j){var O=i+R[j-2],S=i+R[j-1],D=i+R[j],x=new un.Vector3(n[3*O],n[3*O+1],n[3*O+2]),E=new un.Vector3(n[3*S],n[3*S+1],n[3*S+2]),C=new un.Vector3(n[3*D],n[3*D+1],n[3*D+2]),B=new un.Vector3(r[3*O],r[3*O+1],r[3*O+2]),L=new un.Vector3(r[3*O],r[3*O+1],r[3*O+2]),M=new un.Vector3(r[3*O],r[3*O+1],r[3*O+2]),F=E.clone().sub(x).cross(C.clone().sub(x));o&&F.negate(),(F.dot(B)<0?1:0)+(F.dot(L)<0?1:0)+(F.dot(M)<0?1:0)>=2&&(o=!o),o?(a.push(S),a.push(O),a.push(D)):(a.push(O),a.push(S),a.push(D)),o=!o}}catch(I){b=!0,y=I}finally{try{v||null==g.return||g.return()}finally{if(b)throw y}}}}]),e}(),yr=n(236),kr=l.a.get("data_formats/parsing/ninja/nj");function gr(e,t){var n=e.u32(),r=e.u32(),a=new U(e.f32(),e.f32(),e.f32()),i=e.f32(),o=[],s=[];if(n){e.seek_start(n);var l=!0,u=!1,c=void 0;try{for(var d,p=Rr(e,t,!0)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var h=d.value;if(h.type===fr.Vertex){var _=!0,m=!1,w=void 0;try{for(var f,v=h.vertices[Symbol.iterator]();!(_=(f=v.next()).done);_=!0){var b=f.value;o[b.index]={position:b.position,normal:b.normal,bone_weight:b.bone_weight,bone_weight_status:b.bone_weight_status,calc_continue:b.calc_continue}}}catch(S){m=!0,w=S}finally{try{_||null==v.return||v.return()}finally{if(m)throw w}}}}}catch(S){u=!0,c=S}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}if(r){e.seek_start(r);var y=!0,k=!1,g=void 0;try{for(var R,j=Rr(e,t,!1)[Symbol.iterator]();!(y=(R=j.next()).done);y=!0){var O=R.value;O.type===fr.Strip&&s.push.apply(s,Object(D.a)(O.triangle_strips))}}catch(S){k=!0,g=S}finally{try{y||null==j.return||j.return()}finally{if(k)throw g}}}return{type:"nj",vertices:o,meshes:s,bounding_sphere_center:a,bounding_sphere_radius:i}}function Rr(e,t,n){for(var r=[],a=!0;a;){var i=e.u8(),o=e.u8(),s=e.position,l=0;if(0===i)r.push({type:fr.Null,type_id:i});else if(1<=i&&i<=3)r.push({type:fr.Bits,type_id:i});else if(4===i){var u=o,c=e.position;r.push({type:fr.CachePolygonList,type_id:i,cache_index:u,offset:c}),t[u]=c,a=!1}else if(5===i){var d=o,p=t[d];null!=p&&(e.seek_start(p),r.push.apply(r,Object(D.a)(Rr(e,t,n)))),r.push({type:fr.DrawPolygonList,type_id:i,cache_index:d})}else 8<=i&&i<=9?(l=2,r.push({type:fr.Tiny,type_id:i})):17<=i&&i<=31?(l=2+2*e.u16(),r.push({type:fr.Material,type_id:i})):32<=i&&i<=50?(l=2+4*e.u16(),r.push({type:fr.Vertex,type_id:i,vertices:jr(e,i,o)})):56<=i&&i<=58?(l=2+2*e.u16(),r.push({type:fr.Volume,type_id:i})):64<=i&&i<=75?(l=2+2*e.u16(),r.push({type:fr.Strip,type_id:i,triangle_strips:Or(e,i,o)})):255===i?(l=n?2:0,r.push({type:fr.End,type_id:i}),a=!1):(l=2+2*e.u16(),r.push({type:fr.Unknown,type_id:i}),kr.warn("Unknown chunk type ".concat(i," at offset ").concat(s,".")));e.seek_start(s+l)}return r}function jr(e,t,n){if(t<32||t>50)return kr.warn("Unknown vertex chunk type ".concat(t,".")),[];for(var r=3&n,a=0!==(128&n),i=e.u16(),o=e.u16(),s=[],l=0;l<o;++l){var u={index:i+l,position:new U(e.f32(),e.f32(),e.f32()),bone_weight:1,bone_weight_status:r,calc_continue:a};if(32===t)e.seek(4);else if(33===t)e.seek(4),u.normal=new U(e.f32(),e.f32(),e.f32()),e.seek(4);else if(35<=t&&t<=40)37===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4);else if(41<=t&&t<=47)u.normal=new U(e.f32(),e.f32(),e.f32()),t>=42&&(44===t?(u.index=i+e.u16(),u.bone_weight=e.u16()/255):e.seek(4));else if(48<=t&&t<=50){var c=e.u32();u.normal=new U((c>>20&1023)/1023,(c>>10&1023)/1023,(1023&c)/1023),t>=49&&e.seek(4)}s.push(u)}return s}function Or(e,t,n){var r,a={ignore_light:0!==(1&n),ignore_specular:0!==(2&n),ignore_ambient:0!==(4&n),use_alpha:0!==(8&n),double_side:0!==(16&n),flat_shading:0!==(32&n),environment_mapping:0!==(64&n)},i=e.u16(),o=i>>>14,s=16383&i;switch(t){case 64:r=[!1,!1,!1,!1];break;case 65:case 66:r=[!0,!1,!1,!1];break;case 67:r=[!1,!1,!0,!1];break;case 68:case 69:r=[!0,!1,!0,!1];break;case 70:r=[!1,!0,!1,!1];break;case 71:case 72:r=[!0,!0,!1,!1];break;case 73:r=[!1,!1,!1,!1];break;case 74:case 75:r=[!0,!1,!1,!0];break;default:throw new Error("Unexpected chunk type ID: ".concat(t,"."))}for(var l=r,u=Object(x.a)(l,4),c=u[0],d=u[1],p=u[2],h=u[3],_=[],m=0;m<s;++m){for(var w=e.i16(),f=w<1,v=Math.abs(w),b=[],y=0;y<v;++y){var k={index:e.u16()};b.push(k),c&&e.seek(4),d&&e.seek(4),p&&(k.normal=new U(e.u16(),e.u16(),e.u16())),h&&e.seek(8),y>=2&&e.seek(2*o)}_.push(Object(yr.a)({},a,{clockwise_winding:f,vertices:b}))}return _}function Sr(e){e.seek(4);var t=e.u32();e.seek(4);var n=e.u32(),r=e.u32(),a=e.u32(),i=e.u32();e.seek(16);var o,s,l={type:"xj",vertices:[],meshes:[]};if(t){e.seek_start(t),e.seek(4);for(var u=e.u32(),c=e.u32(),d=e.u32(),p=0;p<d;++p){e.seek_start(u+p*c);var h=new U(e.f32(),e.f32(),e.f32()),_=void 0;28!==c&&32!==c&&36!==c||(_=new U(e.f32(),e.f32(),e.f32())),l.vertices.push({position:h,normal:_,bone_weight:1,bone_weight_status:0,calc_continue:!0})}}n&&(o=l.meshes).push.apply(o,Object(D.a)(Dr(e,n,r)));a&&(s=l.meshes).push.apply(s,Object(D.a)(Dr(e,a,i)));return l}function Dr(e,t,n){for(var r=[],a=0;a<n;++a){e.seek_start(t+20*a),e.seek(8);var i=e.u32(),o=e.u32();e.seek_start(i);var s=e.u16_array(o);r.push({indices:s})}return r}!function(e){e[e.Unknown=0]="Unknown",e[e.Null=1]="Null",e[e.Bits=2]="Bits",e[e.CachePolygonList=3]="CachePolygonList",e[e.DrawPolygonList=4]="DrawPolygonList",e[e.Tiny=5]="Tiny",e[e.Material=6]="Material",e[e.Vertex=7]="Vertex",e[e.Volume=8]="Volume",e[e.Strip=9]="Strip",e[e.End=10]="End"}(fr||(fr={}));var xr=2*Math.PI/65536,Er=function(){function e(t,n,r,a,i,o){Object(d.a)(this,e),this.evaluation_flags=void 0,this.model=void 0,this.position=void 0,this.rotation=void 0,this.scale=void 0,this.children=void 0,this.bone_cache=new Map,this._bone_count=-1,this.evaluation_flags=t,this.model=n,this.position=r,this.rotation=a,this.scale=i,this.children=o}return Object(p.a)(e,[{key:"bone_count",value:function(){if(-1===this._bone_count){var e=[0];this.get_bone_internal(this,1/0,e),this._bone_count=e[0]}return this._bone_count}},{key:"get_bone",value:function(e){var t=this.bone_cache.get(e);return void 0===t&&(t=this.get_bone_internal(this,e,[0]),this.bone_cache.set(e,t||null)),t||void 0}},{key:"get_bone_internal",value:function(e,t,n){if(!e.evaluation_flags.skip){var r=n[0]++;if(this.bone_cache.set(r,e),r===t)return e}if(!e.evaluation_flags.break_child_trace){var a=!0,i=!1,o=void 0;try{for(var s,l=e.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=this.get_bone_internal(u,t,n);if(c)return c}}catch(d){i=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}}}}]),e}();function Cr(e){return Lr(e,gr,[])}function Br(e){return Lr(e,Sr,void 0)}function Lr(e,t,n){for(;e.bytes_left;){var r=e.string_ascii(4,!1,!1),a=e.u32();if("NJCM"===r)return Mr(e.take(a),t,n);if(a>e.bytes_left)break;e.seek(a)}return[]}function Mr(e,t,n){var r,a,i,o=e.u32(),s=0!==(1&o),l=0!==(2&o),u=0!==(4&o),c=0!==(8&o),d=0!==(16&o),p=0!==(32&o),h=0!==(64&o),_=0!==(128&o),m=e.u32(),w=e.f32(),f=e.f32(),v=e.f32(),b=e.i32()*xr,y=e.i32()*xr,k=e.i32()*xr,g=e.f32(),R=e.f32(),j=e.f32(),O=e.u32(),S=e.u32();return m&&(e.seek_start(m),r=t(e,n)),O?(e.seek_start(O),a=Mr(e,t,n)):a=[],S?(e.seek_start(S),i=Mr(e,t,n)):i=[],[new Er({no_translate:s,no_rotate:l,no_scale:u,hidden:c,break_child_trace:d,zxy_rotation_order:p,skip:h,shape_skip:_},r,new U(w,f,v),new U(b,y,k),new U(g,R,j),a)].concat(Object(D.a)(i))}var Fr=new un.CylinderBufferGeometry(3,3,20);Fr.translate(0,10,0);var Ir=new Promise(function(e){return e(Fr)}),Pr=new Map;Pr.set(K.Unknown,Ir);var zr=new Map;zr.set(je.Unknown,Ir);var Gr,Ar,Tr,Wr,Ur,Nr,Hr=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"get_npc_geometry",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Pr.get(t))){e.next=5;break}return e.abrupt("return",n);case 5:return n=_n(t).then(function(e){var t=e.url,n=e.data,r=new ln.a(n,!0),a=t.endsWith(".nj")?Cr(r):Br(r);if(a.length)return wr(a[0]);throw new Error("Could not parse ".concat(t,"."))}),Pr.set(t,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_object_geometry",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=zr.get(t))){e.next=5;break}return e.abrupt("return",n);case 5:return n=wn(t).then(function(e){var t=e.url,n=e.data,r=new ln.a(n,!0),a=t.endsWith(".nj")?Cr(r):Br(r);if(a.length)return wr(a[0]);throw new Error("File could not be parsed into a BufferGeometry.")}),zr.set(t,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),qr=l.a.get("stores/QuestEditorStore"),Vr=new(Gr=function(){function e(){var t=this;Object(d.a)(this,e),Object(C.a)(this,"current_quest",Ar,this),Object(C.a)(this,"current_area",Tr,this),Object(C.a)(this,"selected_entity",Wr,this),this.set_quest=Object(F.b)("set_quest",function(e){t.reset_quest_state(),t.current_quest=e,e&&e.area_variants.length&&(t.current_area=e.area_variants[0].area)}),this.set_selected_entity=function(e){t.selected_entity=e},this.set_current_area_id=Object(F.b)("set_current_area_id",function(e){if(t.selected_entity=void 0,null==e)t.current_area=void 0;else if(t.current_quest){var n=t.current_quest.area_variants.find(function(t){return t.area.id===e});t.current_area=n&&n.area}}),this.load_file=function(e){var n=new FileReader;n.addEventListener("loadend",function(){t.loadend(e,n)}),n.readAsArrayBuffer(e)},this.loadend=function(){var e=Object(E.a)(S.a.mark(function e(n,r){var a,i,o,s,l,u,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.result instanceof ArrayBuffer){e.next=3;break}return qr.error("Couldn't read file."),e.abrupt("return");case 3:if(a=nr(new ln.a(r.result,!0)),t.set_quest(a),!a){e.next=33;break}i=!0,o=!1,s=void 0,e.prev=9,l=S.a.mark(function e(){var n,r,i,o,s,l,u,d,p,h,_,m,w,f,v,b;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.value,e.next=3,Ln.get_area_sections(a.episode,n.area.id,n.id);case 3:r=e.sent,n.sections=r,i=!0,o=!1,s=void 0,e.prev=8,l=a.objects.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();case 10:if(i=(u=l.next()).done){e.next=26;break}return d=u.value,e.prev=12,e.next=15,Hr.get_object_geometry(d.type);case 15:p=e.sent,t.set_section_on_visible_quest_entity(d,r),d.object_3d=or(d,p),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(12),qr.error(e.t0);case 23:i=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(8),o=!0,s=e.t1;case 32:e.prev=32,e.prev=33,i||null==l.return||l.return();case 35:if(e.prev=35,!o){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(32);case 40:h=!0,_=!1,m=void 0,e.prev=43,w=a.npcs.filter(function(e){return e.area_id===n.area.id})[Symbol.iterator]();case 45:if(h=(f=w.next()).done){e.next=61;break}return v=f.value,e.prev=47,e.next=50,Hr.get_npc_geometry(v.type);case 50:b=e.sent,t.set_section_on_visible_quest_entity(v,r),v.object_3d=sr(v,b),e.next=58;break;case 55:e.prev=55,e.t2=e.catch(47),qr.error(e.t2);case 58:h=!0,e.next=45;break;case 61:e.next=67;break;case 63:e.prev=63,e.t3=e.catch(43),_=!0,m=e.t3;case 67:e.prev=67,e.prev=68,h||null==w.return||w.return();case 70:if(e.prev=70,!_){e.next=73;break}throw m;case 73:return e.finish(70);case 74:return e.finish(67);case 75:case"end":return e.stop()}},e,null,[[8,28,32,40],[12,20],[33,,35,39],[43,63,67,75],[47,55],[68,,70,74]])}),u=a.area_variants[Symbol.iterator]();case 12:if(i=(c=u.next()).done){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:i=!0,e.next=12;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(9),o=!0,s=e.t1;case 23:e.prev=23,e.prev=24,i||null==u.return||u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:e.next=34;break;case 33:qr.error("Couldn't parse quest file.");case 34:case"end":return e.stop()}},e,null,[[9,19,23,31],[24,,26,30]])}));return function(t,n){return e.apply(this,arguments)}}(),this.set_section_on_visible_quest_entity=function(){var e=Object(E.a)(S.a.mark(function e(t,n){var r,a,i,o,s,l,u,c,d,p,h;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.position,a=r.x,i=r.y,o=r.z,s=n.find(function(e){return e.id===t.section_id}),t.section=s,s?(l=s.position,u=l.x,c=l.y,d=l.z,p=s.cos_y_axis_rotation*a+s.sin_y_axis_rotation*o,h=-s.sin_y_axis_rotation*a+s.cos_y_axis_rotation*o,a=p+u,i+=c,o=h+d):qr.warn("Section ".concat(t.section_id," not found.")),t.position=new U(a,i,o);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.save_current_quest_to_file=function(e){if(t.current_quest){var n=rr(t.current_quest,e);e.endsWith(".qst")||(e+=".qst");var r=document.createElement("a");r.href=URL.createObjectURL(new Blob([n.buffer])),r.download=e,document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}}}return Object(p.a)(e,[{key:"reset_quest_state",value:function(){this.current_quest=void 0,this.current_area=void 0,this.selected_entity=void 0}}]),e}(),Ar=Object(B.a)(Gr.prototype,"current_quest",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tr=Object(B.a)(Gr.prototype,"current_area",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=Object(B.a)(Gr.prototype,"selected_entity",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr),Zr=(n(393),Object(w.a)(Ur=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.entity;if(e){var t=e.section?e.section.id:e.section_id,n=null;return e instanceof qe?n=a.a.createElement("tr",null,a.a.createElement("td",null,"Object: "),a.a.createElement("td",{colSpan:2},e.type.name)):e instanceof Ve&&(n=a.a.createElement("tr",null,a.a.createElement("td",null,"NPC: "),a.a.createElement("td",null,e.type.name))),a.a.createElement("div",{className:"EntityInfoComponent-container"},a.a.createElement("table",{className:"EntityInfoComponent-table"},a.a.createElement("tbody",null,n,a.a.createElement("tr",null,a.a.createElement("td",null,"Section: "),a.a.createElement("td",null,t)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"World position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(Yr,{entity:e,position_type:"position",coord:"x"}),a.a.createElement(Yr,{entity:e,position_type:"position",coord:"y"}),a.a.createElement(Yr,{entity:e,position_type:"position",coord:"z"}))))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"Section position: ")),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement(Yr,{entity:e,position_type:"section_position",coord:"x"}),a.a.createElement(Yr,{entity:e,position_type:"section_position",coord:"y"}),a.a.createElement(Yr,{entity:e,position_type:"section_position",coord:"z"}))))))))}return a.a.createElement("div",{className:"EntityInfoComponent-container"})}}]),t}(r.Component))||Ur),Yr=Object(w.a)(Nr=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).changed=function(e){if(null!=e){var t=n.props.entity,r=n.props.position_type,a=t[r].clone();a[n.props.coord]=e,t[r]=a}},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.entity[this.props.position_type][this.props.coord];return a.a.createElement("tr",null,a.a.createElement("td",null,this.props.coord.toUpperCase(),": "),a.a.createElement("td",null,a.a.createElement(k.a,{value:e,size:"small",precision:3,className:"EntityInfoComponent-coord",onChange:this.changed})))}}]),t}(r.Component))||Nr;n(394),n(395);function Kr(e){var t=e.quest;if(t){var n=4===t.episode?"IV":2===t.episode?"II":"I",r=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=t.npcs[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=r.get(c.type)||0;r.set(c.type,d+1)}}catch(_){o=!0,s=_}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var p=8*(r.get(K.Canane)||0),h=Object(D.a)(r).sort(function(e,t){return e[0].id-t[0].id}).map(function(e){var t=Object(x.a)(e,2),n=t[0],r=t[1],i=n===K.Canadine?p:0;return a.a.createElement("tr",{key:n.id},a.a.createElement("td",null,n.name,":"),a.a.createElement("td",null,r+i))});return a.a.createElement("div",{className:"qe-QuestInfoComponent"},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name:"),a.a.createElement("td",null,t.name)),a.a.createElement("tr",null,a.a.createElement("th",null,"Episode:"),a.a.createElement("td",null,n)),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.short_description))),a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement("pre",null,t.long_description))))),a.a.createElement("div",{className:"qe-QuestInfoComponent-npc-counts-container"},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colSpan:2},"NPC Counts"))),a.a.createElement("tbody",null,h))))}return a.a.createElement("div",{className:"qe-QuestInfoComponent"})}var Qr,Jr=n(223),Xr=n.n(Jr)()(un),$r=function(){function e(){var t=this;Object(d.a)(this,e),this.camera=void 0,this.controls=void 0,this.scene=new un.Scene,this.light_holder=new un.Group,this.renderer=new un.WebGLRenderer({antialias:!0}),this.render_scheduled=!1,this.light=new un.HemisphereLight(16777215,5263440,1),this.schedule_render=function(){t.render_scheduled||(t.render_scheduled=!0,requestAnimationFrame(t.call_render))},this.call_render=function(){t.render_scheduled=!1,t.render()},this.renderer.setPixelRatio(window.devicePixelRatio),this.camera=new un.PerspectiveCamera(75,1,.1,5e3),this.controls=new Xr(this.camera,this.renderer.domElement),this.controls.mouseButtons.ORBIT=un.MOUSE.RIGHT,this.controls.mouseButtons.PAN=un.MOUSE.LEFT,this.controls.addEventListener("change",this.schedule_render),this.scene.background=new un.Color(1383457),this.light_holder.add(this.light),this.scene.add(this.light_holder)}return Object(p.a)(e,[{key:"set_size",value:function(e,t){this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.schedule_render()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"reset_camera",value:function(e,t){this.controls.reset(),this.camera.position.copy(e),this.camera.lookAt(t)}},{key:"pointer_pos_to_device_coords",value:function(e){var t=new un.Vector2;return this.renderer.getSize(t),t.width=e.offsetX/t.width*2-1,t.height=e.offsetY/t.height*-2+1,t}},{key:"dom_element",get:function(){return this.renderer.domElement}}]),e}();var ea,ta,na,ra,aa,ia,oa,sa,la,ua,ca,da,pa,ha,_a=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this))).raycaster=new un.Raycaster,e.quest=void 0,e.area=void 0,e.entity_reaction_disposers=[],e.collision_geometry=new un.Object3D,e.render_geometry=new un.Object3D,e.obj_geometry=new un.Object3D,e.npc_geometry=new un.Object3D,e.hovered_data=void 0,e.selected_data=void 0,e.on_mouse_down=function(t){var n=e.selected_data,r=e.pick_entity(e.pointer_pos_to_device_coords(t));!e.hovered_data||r&&r.object===e.hovered_data.object||e.hovered_data.object.material.color.set(e.get_color(e.hovered_data.entity,"normal")),!e.selected_data||r&&r.object===e.selected_data.object||(e.selected_data.object.material.color.set(e.get_color(e.selected_data.entity,"normal")),e.selected_data.manipulating=!1),r?(r.object.material.color.set(e.get_color(r.entity,"selected")),r.manipulating=!0,e.hovered_data=r,e.selected_data=r,e.controls.enabled=!1):(e.hovered_data=void 0,e.selected_data=void 0,e.controls.enabled=!0),(n&&r?n.object!==r.object:n!==r)&&(Vr.set_selected_entity(r&&r.entity),e.schedule_render())},e.on_mouse_up=function(){e.selected_data&&(e.selected_data.manipulating=!1,e.controls.enabled=!0,e.schedule_render())},e.on_mouse_move=function(t){var n=e.pointer_pos_to_device_coords(t);if(e.selected_data&&e.selected_data.manipulating){if(1===t.buttons){var r=e.selected_data;if(t.shiftKey){e.raycaster.setFromCamera(n,e.camera);var a=e.raycaster.ray,i=e.camera.getWorldDirection(new un.Vector3).negate(),o=(new un.Plane).setFromNormalAndCoplanarPoint(new un.Vector3(i.x,0,i.z).normalize(),r.object.position.sub(r.grab_offset)),s=new un.Vector3;if(a.intersectPlane(o,s)){var l=s.y+r.grab_offset.y,u=l-r.entity.position.y;r.drag_y+=u,r.drag_adjust.y-=u,r.entity.position=new U(r.entity.position.x,l,r.entity.position.z)}}else{var c=e.pick_terrain(n,r),d=c.intersection,p=c.section;if(d)r.entity.position=new U(d.point.x,d.point.y+r.drag_y,d.point.z),r.entity.section=p;else{e.raycaster.setFromCamera(n,e.camera);var h=e.raycaster.ray,_=new un.Plane(new un.Vector3(0,1,0),-r.entity.position.y+r.grab_offset.y),m=new un.Vector3;h.intersectPlane(_,m)&&(r.entity.position=new U(m.x+r.grab_offset.x,r.entity.position.y,m.z+r.grab_offset.z))}}}e.schedule_render()}else{var w=e.hovered_data,f=e.pick_entity(n);!w||f&&f.object===w.object||(e.selected_data&&w.object===e.selected_data.object||w.object.material.color.set(e.get_color(w.entity,"normal")),e.hovered_data=void 0,e.schedule_render()),!f||w&&f.object===w.object||(e.selected_data&&f.object===e.selected_data.object||f.object.material.color.set(e.get_color(f.entity,"hover")),e.hovered_data=f,e.schedule_render())}},e.dom_element.addEventListener("mousedown",e.on_mouse_down),e.dom_element.addEventListener("mouseup",e.on_mouse_up),e.dom_element.addEventListener("mousemove",e.on_mouse_move),e.scene.add(e.obj_geometry),e.scene.add(e.npc_geometry),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_quest_and_area",value:function(e,t){var n=!1;this.area!==t&&(this.area=t,n=!0),this.quest!==e&&(this.quest=e,n=!0),n&&this.update_geometry()}},{key:"update_geometry",value:function(){var e=Object(E.a)(S.a.mark(function e(){var t,n,r,a,i,o,s,l,u,c,d,p,h,_,m,w,f,v;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.dispose_entity_reactions(),this.scene.remove(this.obj_geometry),this.scene.remove(this.npc_geometry),this.obj_geometry=new un.Object3D,this.npc_geometry=new un.Object3D,this.scene.add(this.obj_geometry),this.scene.add(this.npc_geometry),this.scene.remove(this.collision_geometry),!this.quest||!this.area){e.next=62;break}for(t=!0,n=!1,r=void 0,e.prev=12,a=this.quest.objects[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)o=i.value,this.update_entity_geometry(o,this.obj_geometry);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),n=!0,r=e.t0;case 20:e.prev=20,e.prev=21,t||null==a.return||a.return();case 23:if(e.prev=23,!n){e.next=26;break}throw r;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(s=!0,l=!1,u=void 0,e.prev=31,c=this.quest.npcs[Symbol.iterator]();!(s=(d=c.next()).done);s=!0)p=d.value,this.update_entity_geometry(p,this.npc_geometry);e.next=39;break;case 35:e.prev=35,e.t1=e.catch(31),l=!0,u=e.t1;case 39:e.prev=39,e.prev=40,s||null==c.return||c.return();case 42:if(e.prev=42,!l){e.next=45;break}throw u;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return h=this.quest.episode,_=this.area.id,m=this.quest.area_variants.find(function(e){return e.area.id===_}),w=m&&m.id||0,e.next=53,Ln.get_area_collision_geometry(h,_,w);case 53:return f=e.sent,this.scene.remove(this.collision_geometry),this.reset_camera(new un.Vector3(0,800,700),new un.Vector3(0,0,0)),this.collision_geometry=f,this.scene.add(f),e.next=60,Ln.get_area_render_geometry(h,_,w);case 60:v=e.sent,this.render_geometry=v;case 62:case"end":return e.stop()}},e,this,[[12,16,20,28],[21,,23,27],[31,35,39,47],[40,,42,46]])}));return function(){return e.apply(this,arguments)}}()},{key:"update_entity_geometry",value:function(e,t){var n=this;this.area&&e.area_id===this.area.id&&this.entity_reaction_disposers.push(Object(F.o)(function(){return void 0!=e.object_3d},function(){var r=e.object_3d;t.add(r),n.entity_reaction_disposers.push(Object(F.c)(function(){var t=e.position,a=t.x,i=t.y,o=t.z;r.position.set(a,i,o);var s=e.rotation;r.rotation.set(s.x,s.y,s.z),n.schedule_render()})),n.schedule_render()}))}},{key:"dispose_entity_reactions",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.entity_reaction_disposers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"pick_entity",value:function(e){this.raycaster.setFromCamera(e,this.camera);var t=this.raycaster.intersectObjects(this.obj_geometry.children),n=Object(x.a)(t,1)[0],r=this.raycaster.intersectObjects(this.npc_geometry.children),a=Object(x.a)(r,1)[0];if(n||a){var i=(n?n.distance:1/0)<(a?a.distance:1/0)?n:a,o=i.object.userData.entity,s=i.object.position.clone().sub(i.point),l=s.clone(),u=0;this.raycaster.set(i.object.position,new un.Vector3(0,-1,0));var c=this.raycaster.intersectObjects(this.collision_geometry.children,!0),d=Object(x.a)(c,1)[0];return d&&(l.sub(new un.Vector3(0,d.distance,0)),u+=d.distance),{object:i.object,entity:o,grab_offset:s,drag_adjust:l,drag_y:u,manipulating:!1}}}},{key:"pick_terrain",value:function(e,t){this.raycaster.setFromCamera(e,this.camera),this.raycaster.ray.origin.add(t.drag_adjust);var n=this.raycaster.intersectObjects(this.collision_geometry.children,!0),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;if(l.face.normal.y>.75){this.raycaster.set(l.point.clone().setY(1e3),new un.Vector3(0,-1,0));var u=this.raycaster.intersectObjects(this.render_geometry.children,!0).filter(function(e){return e.object.userData.section.id>=0});return{intersection:l,section:u[0]&&u[0].object.userData.section}}}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return{}}},{key:"get_color",value:function(e,t){var n=e instanceof Ve;switch(t){default:case"normal":return n?ir:ar;case"hover":return n?16727903:16768831;case"selected":return n?16711764:16755200}}}]),t}($r),ma=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).renderer=(Qr||(Qr=new _a),Qr),n.modifyDom=function(e){e&&(n.renderer.set_size(e.clientWidth,e.clientHeight),e.appendChild(n.renderer.dom_element))},n.onResize=function(){var e=n.renderer.dom_element.parentNode;n.renderer.set_size(e.clientWidth,e.clientHeight)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:{overflow:"hidden"},ref:this.modifyDom})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){var t=e.quest,n=e.area;this.renderer.set_quest_and_area(t,n)}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(r.Component),wa=Object(w.a)(ea=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={save_dialog_open:!1,save_dialog_filename:"Untitled"},n.save_as_clicked=function(e){var t=e?e.endsWith(".qst")?e.slice(0,-4):e:n.state.save_dialog_filename;n.setState({save_dialog_open:!0,save_dialog_filename:t})},n.save_dialog_filename_changed=function(e){n.setState({save_dialog_filename:e})},n.save_dialog_affirmed=function(){Vr.save_current_quest_to_file(n.state.save_dialog_filename),n.setState({save_dialog_open:!1})},n.save_dialog_cancelled=function(){n.setState({save_dialog_open:!1})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=Vr.current_quest;return a.a.createElement("div",{className:"qe-QuestEditorComponent"},a.a.createElement(fa,{onSaveAsClicked:this.save_as_clicked}),a.a.createElement("div",{className:"qe-QuestEditorComponent-main"},a.a.createElement(Kr,{quest:e}),a.a.createElement(ma,{quest:e,area:Vr.current_area}),a.a.createElement(Zr,{entity:Vr.selected_entity})),a.a.createElement(va,{is_open:this.state.save_dialog_open,filename:this.state.save_dialog_filename,on_filename_change:this.save_dialog_filename_changed,on_ok:this.save_dialog_affirmed,on_cancel:this.save_dialog_cancelled}))}}]),t}(r.Component))||ea,fa=Object(w.a)(ta=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.set_filename=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),Vr.load_file(e.file.originFileObj))},n.save_as_clicked=function(){n.props.onSaveAsClicked(n.state.filename)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=Vr.current_quest,t=e&&Array.from(e.area_variants).map(function(e){return e.area}),n=Vr.current_area,r=n&&n.id;return a.a.createElement("div",{className:"qe-QuestEditorComponent-toolbar"},a.a.createElement(sn.a,{accept:".qst",showUploadList:!1,onChange:this.set_filename,customRequest:function(){return!1}},a.a.createElement(R.a,{icon:"file"},this.state.filename||"Open file...")),t&&a.a.createElement(u.a,{onChange:Vr.set_current_area_id,value:r,style:{width:200}},t.map(function(e){return a.a.createElement(u.a.Option,{key:e.id,value:e.id},e.name)})),e&&a.a.createElement(R.a,{icon:"save",onClick:this.save_as_clicked},"Save as..."))}}]),t}(r.Component))||ta,va=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).name_changed=function(e){n.props.on_filename_change(e.currentTarget.value)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement(nn.a,{title:a.a.createElement(a.a.Fragment,null,a.a.createElement(on.a,{type:"save"})," Save as..."),visible:this.props.is_open,onOk:this.props.on_ok,onCancel:this.props.on_cancel},a.a.createElement(rn.a,{layout:"vertical"},a.a.createElement(rn.a.Item,{label:"Name"},a.a.createElement(an.a,{autoFocus:!0,maxLength:12,value:this.props.filename,onChange:this.name_changed}))))}}]),t}(a.a.Component),ba=(na=function(){function e(t,n){Object(d.a)(this,e),this.store=void 0,this.item=void 0,this.store=t,this.item=n}return Object(p.a)(e,[{key:"shifta_atp",get:function(){return this.item.type.min_atp===this.item.type.max_atp?0:this.item.type.max_atp*this.store.shifta_factor}},{key:"min_atp",get:function(){return this.item.type.min_atp+this.item.grind_atp}},{key:"max_atp",get:function(){return this.item.type.max_atp+this.item.grind_atp+this.shifta_atp}},{key:"final_min_atp",get:function(){return this.min_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"final_max_atp",get:function(){return this.max_atp+this.store.armor_atp+this.store.shield_atp+this.store.base_atp+this.store.base_shifta_atp}},{key:"min_normal_damage",get:function(){return(this.final_min_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"max_normal_damage",get:function(){return(this.final_max_atp-this.store.enemy_dfp)*(.2*.9)}},{key:"avg_normal_damage",get:function(){return(this.min_normal_damage+this.max_normal_damage)/2}},{key:"min_heavy_damage",get:function(){return.3402*(this.final_min_atp-this.store.enemy_dfp)}},{key:"max_heavy_damage",get:function(){return.3402*(this.final_max_atp-this.store.enemy_dfp)}},{key:"avg_heavy_damage",get:function(){return(this.min_heavy_damage+this.max_heavy_damage)/2}}]),e}(),Object(B.a)(na.prototype,"shifta_atp",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"shifta_atp"),na.prototype),Object(B.a)(na.prototype,"min_atp",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"min_atp"),na.prototype),Object(B.a)(na.prototype,"max_atp",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"max_atp"),na.prototype),Object(B.a)(na.prototype,"final_min_atp",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"final_min_atp"),na.prototype),Object(B.a)(na.prototype,"final_max_atp",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"final_max_atp"),na.prototype),Object(B.a)(na.prototype,"min_normal_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"min_normal_damage"),na.prototype),Object(B.a)(na.prototype,"max_normal_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"max_normal_damage"),na.prototype),Object(B.a)(na.prototype,"avg_normal_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"avg_normal_damage"),na.prototype),Object(B.a)(na.prototype,"min_heavy_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"min_heavy_damage"),na.prototype),Object(B.a)(na.prototype,"max_heavy_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"max_heavy_damage"),na.prototype),Object(B.a)(na.prototype,"avg_heavy_damage",[F.d],Object.getOwnPropertyDescriptor(na.prototype,"avg_heavy_damage"),na.prototype),na),ya=new(ra=function(){function e(){var t=this;Object(d.a)(this,e),Object(C.a)(this,"char_atp",aa,this),Object(C.a)(this,"mag_pow",ia,this),Object(C.a)(this,"shifta_lvl",oa,this),Object(C.a)(this,"weapons",sa,this),this.add_weapon=function(e){t.weapons.push(new ba(t,new Y(e)))},Object(C.a)(this,"armor_type",la,this),Object(C.a)(this,"shield_type",ua,this),Object(C.a)(this,"enemy_dfp",ca,this)}return Object(p.a)(e,[{key:"weapon_types",get:function(){return kt.current.value.item_types.filter(function(e){return e instanceof N})}},{key:"armor_types",get:function(){return kt.current.value.item_types.filter(function(e){return e instanceof H})}},{key:"shield_types",get:function(){return kt.current.value.item_types.filter(function(e){return e instanceof q})}},{key:"armor_atp",get:function(){return this.armor_type?this.armor_type.atp:0}},{key:"shield_atp",get:function(){return this.shield_type?this.shield_type.atp:0}},{key:"base_atp",get:function(){return this.char_atp+2*this.mag_pow}},{key:"shifta_factor",get:function(){return this.shifta_lvl?.013*(this.shifta_lvl-1)+.1:0}},{key:"base_shifta_atp",get:function(){return this.base_atp*this.shifta_factor}}]),e}(),Object(B.a)(ra.prototype,"weapon_types",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"weapon_types"),ra.prototype),Object(B.a)(ra.prototype,"armor_types",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"armor_types"),ra.prototype),Object(B.a)(ra.prototype,"shield_types",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"shield_types"),ra.prototype),aa=Object(B.a)(ra.prototype,"char_atp",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ia=Object(B.a)(ra.prototype,"mag_pow",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(ra.prototype,"armor_atp",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"armor_atp"),ra.prototype),Object(B.a)(ra.prototype,"shield_atp",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"shield_atp"),ra.prototype),oa=Object(B.a)(ra.prototype,"shifta_lvl",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(ra.prototype,"base_atp",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"base_atp"),ra.prototype),Object(B.a)(ra.prototype,"shifta_factor",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"shifta_factor"),ra.prototype),Object(B.a)(ra.prototype,"base_shifta_atp",[F.d],Object.getOwnPropertyDescriptor(ra.prototype,"base_shifta_atp"),ra.prototype),sa=Object(B.a)(ra.prototype,"weapons",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.k.array()}}),la=Object(B.a)(ra.prototype,"armor_type",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ua=Object(B.a)(ra.prototype,"shield_type",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ca=Object(B.a)(ra.prototype,"enemy_dfp",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ra),ka=Object(w.a)(da=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).add_weapon=function(e){if(e){var t=kt.current.value.get_by_id(e.value);ya.add_weapon(t)}},n.armor_changed=function(e){if(e){var t=kt.current.value.get_by_id(e.value);ya.armor_type=t}else ya.armor_type=void 0},n.shield_changed=function(e){if(e){var t=kt.current.value.get_by_id(e.value);ya.shield_type=t}else ya.shield_type=void 0},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",null,a.a.createElement("section",null,a.a.createElement("div",null,"Weapons:"),a.a.createElement(Pt,{placeholder:"Add a weapon",value:void 0,options:ya.weapon_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.add_weapon}),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Weapon"),a.a.createElement("td",null,"Min. ATP"),a.a.createElement("td",null,"Max. ATP"),a.a.createElement("td",null,"Grind"),a.a.createElement("td",null,"Grind ATP"),a.a.createElement("td",null,"Shifta ATP"),a.a.createElement("td",null,"Final Min. ATP"),a.a.createElement("td",null,"Final Max. ATP"),a.a.createElement("td",null,"Min. Normal Damage"),a.a.createElement("td",null,"Max. Normal Damage"),a.a.createElement("td",null,"Avg. Normal Damage"),a.a.createElement("td",null,"Min. Heavy Damage"),a.a.createElement("td",null,"Max. Heavy Damage"),a.a.createElement("td",null,"Avg. Heavy Damage"))),a.a.createElement("tbody",null,ya.weapons.map(function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.item.type.name),a.a.createElement("td",null,e.item.type.min_atp),a.a.createElement("td",null,e.item.type.max_atp),a.a.createElement("td",null,a.a.createElement(k.a,{size:"small",value:e.item.grind,min:0,max:e.item.type.max_grind,step:1,onChange:function(t){return e.item.grind=t||0}})),a.a.createElement("td",null,e.item.grind_atp),a.a.createElement("td",null,e.shifta_atp.toFixed(1)),a.a.createElement("td",null,e.final_min_atp.toFixed(1)),a.a.createElement("td",null,e.final_max_atp.toFixed(1)),a.a.createElement("td",null,e.min_normal_damage.toFixed(1)),a.a.createElement("td",null,e.max_normal_damage.toFixed(1)),a.a.createElement("td",null,e.avg_normal_damage.toFixed(1)),a.a.createElement("td",null,e.min_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.max_heavy_damage.toFixed(1)),a.a.createElement("td",null,e.avg_heavy_damage.toFixed(1)))}))),a.a.createElement("div",null,"Character ATP:"),a.a.createElement(k.a,{value:ya.char_atp,min:0,step:1,onChange:function(e){return ya.char_atp=e||0}}),a.a.createElement("div",null,"MAG POW:"),a.a.createElement(k.a,{value:ya.mag_pow,min:0,max:200,step:1,onChange:function(e){return ya.mag_pow=e||0}}),a.a.createElement("div",null,"Armor:"),a.a.createElement(Pt,{placeholder:"Choose an armor",value:ya.armor_type&&ya.armor_type.id,options:ya.armor_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.armor_changed}),a.a.createElement("span",null,"Armor ATP: ",ya.armor_atp),a.a.createElement("div",null,"Shield:"),a.a.createElement(Pt,{placeholder:"Choose a shield",value:ya.shield_type&&ya.shield_type.id,options:ya.shield_types.map(function(e){return{label:e.name,value:e.id}}),onChange:this.shield_changed}),a.a.createElement("span",null,"Shield ATP: ",ya.shield_atp),a.a.createElement("div",null,"Shifta level:"),a.a.createElement(k.a,{value:ya.shifta_lvl,min:0,max:30,step:1,onChange:function(e){return ya.shifta_lvl=e||0}}),a.a.createElement("div",null,"Shifta factor:"),a.a.createElement("div",null,ya.shifta_factor.toFixed(3)),a.a.createElement("div",null,"Base shifta ATP:"),a.a.createElement("div",null,ya.base_shifta_atp.toFixed(2))))}}]),t}(r.Component))||da,ga=(n(501),n(229)),Ra=2*Math.PI/65535;function ja(e,t){return"NMDM"===e.string_ascii(4,!1,!0)?function(e,t){var n=e.u32();return Oa(e.take(n),t)}(e,t):(e.seek_start(0),function(e,t){e.seek_end(16);var n=e.u32();e.seek_start(n);var r=e.u32();return e.seek_start(r),function(e,t){e.seek(4);var n=e.u32();return e.seek_start(n),Oa(e,t)}(e,t)}(e,t))}function Oa(e,t){for(var n=e.u32(),r=e.u32(),a=e.u16(),i=e.u16(),o=(192&i)>>6,s=15&i,l=[],u=0;u<t;u++){e.seek_start(n),n=n+=8*s;var c={tracks:[]};l.push(c);for(var d=[],p=[],h=0;h<s;h++)d.push(e.u32());for(var _=0;_<s;_++){var m=e.u32();p.push(m)}if(1&a){e.seek_start(d.shift());var w=p.shift();w&&c.tracks.push({type:ha.Position,keyframes:Sa(e,w)})}if(2&a){e.seek_start(d.shift());var f=p.shift();f&&c.tracks.push({type:ha.Rotation,keyframes:Da(e,f,r)})}if(4&a){e.seek_start(d.shift());var v=p.shift();v&&c.tracks.push({type:ha.Scale,keyframes:Sa(e,v)})}}return{motion_data:l,frame_count:r,type:a,interpolation:o,element_count:s}}function Sa(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new U(e.f32(),e.f32(),e.f32())});return n}function Da(e,t,n){for(var r=[],a=e.position,i=0;i<t;++i)r.push({frame:e.u16(),value:new U(e.u16()*Ra,e.u16()*Ra,e.u16()*Ra)});for(var o=-1,s=0,l=r;s<l.length;s++){var u=l[s].frame;if(u<o||u>=n)return e.seek_start(a),xa(e,t);o=u}return r}function xa(e,t){for(var n=[],r=0;r<t;++r)n.push({frame:e.u32(),value:new U(e.i32()*Ra,e.i32()*Ra,e.i32()*Ra)});return n}!function(e){e[e.Linear=0]="Linear",e[e.Spline=1]="Spline",e[e.UserFunction=2]="UserFunction"}(pa||(pa={})),function(e){e[e.Position=0]="Position",e[e.Rotation=1]="Rotation",e[e.Scale=2]="Scale"}(ha||(ha={}));var Ea,Ca,Ba,La,Ma,Fa,Ia,Pa,za,Ga,Aa,Ta,Wa,Ua,Na,Ha,qa=30;function Va(e,t){var n=t.interpolation===pa.Spline?un.InterpolateSmooth:un.InterpolateLinear,r=[];return t.motion_data.forEach(function(t,a){var i=e.get_bone(a);i&&t.tracks.forEach(function(e){var t=e.type,o=e.keyframes,s=[],l=[],u=!0,c=!1,d=void 0;try{for(var p,h=o[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var _=p.value;if(s.push(_.frame/qa),t===ha.Rotation){var m=i.evaluation_flags.zxy_rotation_order?"ZXY":"ZYX",w=(new un.Quaternion).setFromEuler(new un.Euler(_.value.x,_.value.y,_.value.z,m));l.push(w.x,w.y,w.z,w.w)}else l.push(_.value.x,_.value.y,_.value.z)}}catch(v){c=!0,d=v}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}if(t===ha.Rotation)r.push(new un.QuaternionKeyframeTrack(".bones[".concat(a,"].quaternion"),s,l,n));else{var f=t===ha.Position?".bones[".concat(a,"].position"):".bones[".concat(a,"].scale");r.push(new un.VectorKeyframeTrack(f,s,l,n))}})}),new un.AnimationClip("Animation",(t.frame_count-1)/qa,r).optimize()}var Za,Ya,Ka=l.a.get("stores/ModelViewerStore"),Qa=new Map,Ja=new Map,Xa=new(Ea=F.k.ref,Ca=F.k.ref,Ba=F.k.ref,La=F.k.ref,Ma=F.k.ref,Fa=function(){function e(){var t=this;Object(d.a)(this,e),this.models=[new Xe("HUmar",1,10,new Set([6])),new Xe("HUnewearl",1,10,new Set),new Xe("HUcast",5,0,new Set),new Xe("HUcaseal",5,0,new Set),new Xe("RAmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Xe("RAmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Xe("RAcast",5,0,new Set),new Xe("RAcaseal",5,0,new Set),new Xe("FOmarl",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Xe("FOmar",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Xe("FOnewm",1,10,new Set([0,1,2,3,4,5,6,7,8,9])),new Xe("FOnewearl",1,10,new Set([0,1,2,3,4,5,6,7,8,9]))],this.animations=new Array(572).fill(void 0).map(function(e,t){return new $e(t,"Animation ".concat(t+1))}),Object(C.a)(this,"current_player_model",Ia,this),Object(C.a)(this,"current_model",Pa,this),Object(C.a)(this,"current_bone_count",za,this),Object(C.a)(this,"current_obj3d",Ga,this),Object(C.a)(this,"animation",Aa,this),Object(C.a)(this,"animation_playing",Ta,this),Object(C.a)(this,"animation_frame_rate",Wa,this),Object(C.a)(this,"animation_frame",Ua,this),Object(C.a)(this,"animation_frame_count",Na,this),Object(C.a)(this,"show_skeleton",Ha,this),this.set_animation_frame_rate=Object(F.b)("set_animation_frame_rate",function(e){t.animation&&(t.animation.mixer.timeScale=e/qa,t.animation_frame_rate=e)}),this.set_animation_frame=Object(F.b)("set_animation_frame",function(e){if(t.animation){var n=t.animation_frame_count;e>n&&(e=1),e<1&&(e=n),t.animation.action.time=(e-1)/qa,t.animation_frame=e}}),this.load_model=function(){var e=Object(E.a)(S.a.mark(function e(n){var r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_player_ninja_object(n);case 2:r=e.sent,t.set_model(r,n),t.current_bone_count=64;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_animation=function(){var e=Object(E.a)(S.a.mark(function e(n){var r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_nj_motion(n);case 2:r=e.sent,t.current_model&&t.set_animation(Va(t.current_model,r),n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.load_file=function(e){var n=new FileReader;n.addEventListener("loadend",function(){t.loadend(e,n)}),n.readAsArrayBuffer(e)},this.toggle_animation_playing=Object(F.b)("toggle_animation_playing",function(){t.animation&&(t.animation.action.paused=!t.animation.action.paused,t.animation_playing=!t.animation.action.paused)}),this.update_animation_frame=Object(F.b)("update_animation_frame",function(){if(t.animation&&t.animation_playing){var e=t.animation.action.time;t.animation_frame=Math.round(e*qa)+1}}),this.set_animation=Object(F.b)("set_animation",function(e,n){var r;t.current_obj3d&&(t.animation?(t.animation.mixer.stopAllAction(),r=t.animation.mixer):r=new un.AnimationMixer(t.current_obj3d),t.animation={player_animation:n,mixer:r,clip:e,action:r.clipAction(e)},t.animation.action.play(),t.animation_playing=!0,t.animation_frame_count=Math.round(qa*e.duration)+1)}),this.set_model=Object(F.b)("set_model",function(e,n){t.current_obj3d&&t.animation&&(t.animation.mixer.stopAllAction(),t.animation.mixer.uncacheRoot(t.current_obj3d),t.animation=void 0),t.current_player_model=n,t.current_model=e,t.current_bone_count=e.bone_count();var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dr;return new br(t).create_skinned_mesh(e)}(t.current_model);r.translateY(-r.geometry.boundingSphere.radius),t.current_obj3d=r}),this.loadend=function(){var e=Object(E.a)(S.a.mark(function e(n,r){var a,i,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.result instanceof ArrayBuffer){e.next=3;break}return Ka.error("Couldn't read file."),e.abrupt("return");case 3:n.name.endsWith(".nj")?(a=Cr(new ln.a(r.result,!0))[0],t.set_model(a)):n.name.endsWith(".xj")?(i=Br(new ln.a(r.result,!0))[0],t.set_model(i)):n.name.endsWith(".njm")?t.current_model&&(o=ja(new ln.a(r.result,!0),t.current_bone_count),t.set_animation(Va(t.current_model,o))):Ka.error('Unknown file extension in filename "'.concat(n.name,'".'));case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"add_to_bone",value:function(e,t,n){var r=e.get_bone(n);r&&(r.evaluation_flags.hidden=!1,r.evaluation_flags.break_child_trace=!1,r.children.push(t))}},{key:"get_player_ninja_object",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Qa.get(t.name))){e.next=5;break}return e.abrupt("return",n);case 5:return n=this.get_all_assets(t),Qa.set(t.name,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_all_assets",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n,r,a,i,o,s,l,u;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vn(t.name,"Body");case 2:if(n=e.sent,r=Cr(new ln.a(n,!0))[0]){e.next=6;break}throw new Error("Couldn't parse body for player class ".concat(t.name,"."));case 6:return e.next=8,vn(t.name,"Head",0);case 8:if(a=e.sent,(i=Cr(new ln.a(a,!0))[0])&&this.add_to_bone(r,i,59),!(t.hair_styles_count>0)){e.next=23;break}return e.next=14,vn(t.name,"Hair",0);case 14:if(o=e.sent,(s=Cr(new ln.a(o,!0))[0])&&this.add_to_bone(r,s,59),!t.hair_styles_with_accessory.has(0)){e.next=23;break}return e.next=20,vn(t.name,"Accessory",0);case 20:l=e.sent,(u=Cr(new ln.a(l,!0))[0])&&this.add_to_bone(r,u,59);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get_nj_motion",value:function(){var e=Object(E.a)(S.a.mark(function e(t){var n,r=this;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Ja.get(t.id))){e.next=5;break}return e.abrupt("return",n);case 5:return n=yn(t.id).then(function(e){return ja(new ln.a(e,!0),r.current_bone_count)}),Ja.set(t.id,n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ia=Object(B.a)(Fa.prototype,"current_player_model",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pa=Object(B.a)(Fa.prototype,"current_model",[Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),za=Object(B.a)(Fa.prototype,"current_bone_count",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ga=Object(B.a)(Fa.prototype,"current_obj3d",[La],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa=Object(B.a)(Fa.prototype,"animation",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ta=Object(B.a)(Fa.prototype,"animation_playing",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wa=Object(B.a)(Fa.prototype,"animation_frame_rate",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qa}}),Ua=Object(B.a)(Fa.prototype,"animation_frame",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Na=Object(B.a)(Fa.prototype,"animation_frame_count",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ha=Object(B.a)(Fa.prototype,"show_skeleton",[F.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fa),$a=(n(503),Object(w.a)(Za=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"mv-AnimationSelectionComponent"},a.a.createElement("ul",null,Xa.animations.map(function(e){var t=Xa.animation&&Xa.animation.player_animation&&Xa.animation.player_animation.id===e.id;return a.a.createElement("li",{key:e.id,className:t?"selected":void 0,onClick:function(){return Xa.load_animation(e)}},e.name)})))}}]),t}(r.Component))||Za),ei=(n(514),n(128)),ti=(n(507),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("section",{className:"mv-ModelSelectionComponent"},a.a.createElement(ei.a,{itemLayout:"horizontal",dataSource:Xa.models,size:"small",renderItem:function(e){var t=Xa.current_player_model===e;return a.a.createElement(ei.a.Item,{onClick:function(){return Xa.load_model(e)}},a.a.createElement(ei.a.Item.Meta,{title:a.a.createElement("span",{className:"mv-ModelSelectionComponent-model"+(t?" selected":"")},e.name)}))}}))}}]),t}(r.Component)),ni=(n(508),n(235));var ri,ai,ii,oi=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(_.a)(t).call(this))).clock=new un.Clock,e.model=void 0,e.skeleton_helper=void 0,Object(F.c)(function(){var t=Xa.show_skeleton;e.skeleton_helper&&(e.skeleton_helper.visible=t,e.schedule_render()),Xa.animation_playing||(Xa.animation_frame,e.schedule_render())}),Object(F.c)(function(){Xa.animation&&e.schedule_render()}),e}return Object(m.a)(t,e),Object(p.a)(t,[{key:"set_model",value:function(e){this.model!==e&&(this.model&&(this.scene.remove(this.model),this.scene.remove(this.skeleton_helper),this.skeleton_helper=void 0),e&&(this.scene.add(e),this.skeleton_helper=new un.SkeletonHelper(e),this.skeleton_helper.visible=Xa.show_skeleton,this.skeleton_helper.material.linewidth=3,this.scene.add(this.skeleton_helper),this.reset_camera(new un.Vector3(0,10,20),new un.Vector3(0,0,0))),this.model=e,this.schedule_render())}},{key:"render",value:function(){Xa.animation&&(Xa.animation.mixer.update(this.clock.getDelta()),Xa.update_animation_frame()),this.light_holder.quaternion.copy(this.camera.quaternion),Object(ni.a)(Object(_.a)(t.prototype),"render",this).call(this),Xa.animation&&!Xa.animation.action.paused&&this.schedule_render()}}]),t}($r),si=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).renderer=(Ya||(Ya=new oi),Ya),n.modifyDom=function(e){e&&(n.renderer.set_size(e.clientWidth,e.clientHeight),e.appendChild(n.renderer.dom_element))},n.onResize=function(){var e=n.renderer.dom_element.parentNode;n.renderer.set_size(e.clientWidth,e.clientHeight)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:{overflow:"hidden"},ref:this.modifyDom})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"componentWillReceiveProps",value:function(e){var t=e.model;this.renderer.set_model(t)}},{key:"shouldComponentUpdate",value:function(){return!1}}]),t}(r.Component),li=Object(w.a)(ri=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){Xa.current_model||Xa.load_model(Xa.models[5])}},{key:"render",value:function(){return a.a.createElement("div",{className:"mv-ModelViewerComponent"},a.a.createElement(ui,null),a.a.createElement("div",{className:"mv-ModelViewerComponent-main"},a.a.createElement(ti,null),a.a.createElement($a,null),a.a.createElement(si,{model:Xa.current_obj3d})))}}]),t}(r.Component))||ri,ui=Object(w.a)(ai=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={filename:void 0},n.set_filename=function(e){e.file.originFileObj&&(n.setState({filename:e.file.name}),Xa.load_file(e.file.originFileObj))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"mv-ModelViewerComponent-toolbar"},a.a.createElement(sn.a,{accept:".nj, .njm, .xj",showUploadList:!1,onChange:this.set_filename,customRequest:function(){return!1}},a.a.createElement(R.a,{icon:"file"},this.state.filename||"Open file...")),Xa.animation&&a.a.createElement(a.a.Fragment,null,a.a.createElement(R.a,{icon:Xa.animation_playing?"pause":"caret-right",onClick:Xa.toggle_animation_playing},Xa.animation_playing?"Pause animation":"Play animation"),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame rate:"),a.a.createElement(k.a,{value:Xa.animation_frame_rate,onChange:function(e){return Xa.set_animation_frame_rate(e||0)},min:1,step:1})),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Frame:"),a.a.createElement(k.a,{value:Xa.animation_frame,onChange:function(e){return Xa.set_animation_frame(e||0)},step:1}),a.a.createElement("span",null,"/ ",Xa.animation_frame_count))),a.a.createElement("div",{className:"group"},a.a.createElement("span",null,"Show skeleton:"),a.a.createElement(ga.a,{checked:Xa.show_skeleton,onChange:function(e){return Xa.show_skeleton=e}})))}}]),t}(r.Component))||ai,ci=b(li),di=b(wa),pi=b(function(){return a.a.createElement("section",{className:"ho-HuntOptimizerComponent"},a.a.createElement(y.a,{type:"card"},a.a.createElement(tn,{tab:"Optimize",key:"optimize"},a.a.createElement(qt,null)),a.a.createElement(tn,{tab:"Methods",key:"methods"},a.a.createElement($t,null))))}),hi=b(ka),_i=Object(w.a)(ii=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(a)))).state={tool:n.init_tool()},n.menu_clicked=function(e){n.setState({tool:e.key})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;switch(this.state.tool){case"model_viewer":e=a.a.createElement(ci,null);break;case"quest_editor":e=a.a.createElement(di,null);break;case"hunt_optimizer":e=a.a.createElement(pi,null);break;case"dps_calc":e=a.a.createElement(hi,null)}return a.a.createElement("div",{className:"ApplicationComponent"},a.a.createElement("div",{className:"ApplicationComponent-navbar"},a.a.createElement("h1",{className:"ApplicationComponent-heading"},"Phantasmal World"),a.a.createElement(c.b,{className:"ApplicationComponent-heading-menu",onClick:this.menu_clicked,selectedKeys:[this.state.tool],mode:"horizontal"},a.a.createElement(c.b.Item,{key:"model_viewer"},"Model Viewer",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"quest_editor"},"Quest Editor",a.a.createElement("sup",{className:"ApplicationComponent-beta"},"(Beta)")),a.a.createElement(c.b.Item,{key:"hunt_optimizer"},"Hunt Optimizer")),a.a.createElement("div",{className:"ApplicationComponent-server-select"},a.a.createElement("span",null,"Server:"),a.a.createElement(u.a,{defaultValue:Oe.Ephinea,style:{width:120}},a.a.createElement(u.a.Option,{value:Oe.Ephinea},Oe.Ephinea)))),a.a.createElement("div",{className:"ApplicationComponent-main"},e))}},{key:"init_tool",value:function(){var e=window.location.search.slice(1).split("&").find(function(e){return e.startsWith("tool=")});return e?e.slice(5):"model_viewer"}}]),t}(a.a.Component))||ii;n(510),n(511),n(512);l.a.useDefaults({defaultLevel:l.a[Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_LOG_LEVEL||"OFF"]}),o.a.render(a.a.createElement(_i,null),document.getElementById("phantasmal-world-root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.0f065df9.chunk.js.map