(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{550:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(143),a=n(139),s=(n(587),n(2));const l=28;class r extends a.a{constructor(e,t){super(t),this.gui_store=e,this.tabs=[],this.bar_element=Object(s.h)({className:"core_TabContainer_Bar"}),this.panes_element=Object(s.h)({className:"core_TabContainer_Panes"}),this.element=Object(s.h)({className:"core_TabContainer"}),this.bar_mousedown=e=>{if(e.target instanceof HTMLElement){const t=e.target.dataset.key;t&&this.activate_key(t)}},this.bar_element.onmousedown=this.bar_mousedown;for(const e of t.tabs){const t=Object(s.s)({className:"core_TabContainer_Tab",data:{key:e.key}},e.title);this.bar_element.append(t);const n=this.disposable(new i.a(e.create_view)),a=Object.assign(Object.assign({},e),{tab_element:t,lazy_view:n});this.tabs.push(a),this.panes_element.append(n.element)}this.element.append(this.bar_element,this.panes_element),this.finalize_construction()}get children(){return this.tabs.flatMap(e=>e.lazy_view.children)}resize(e,t){super.resize(e,t),this.bar_element.style.width=`${e}px`,this.bar_element.style.height=`${l}px`;const n=t-l;this.panes_element.style.width=`${e}px`,this.panes_element.style.height=`${n}px`;for(const t of this.tabs)t.lazy_view.resize(e,n);return this}activate(){if(this.active_tab)this.activate_tab(this.active_tab);else{let e;for(const t of this.tabs)null!=t.path&&this.gui_store.path.val.startsWith(t.path)&&(e=t);e?this.activate_tab(e):this.tabs.length&&this.activate_tab(this.tabs[0])}}activate_key(e){for(const t of this.tabs)if(t.key===e){this.activate_tab(t);break}}activate_tab(e){this.active_tab!==e&&(this.active_tab&&(this.active_tab.tab_element.classList.remove("active"),this.active_tab.lazy_view.visible.val=!1,this.active_tab.lazy_view.deactivate()),this.active_tab=e,e.tab_element.classList.add("active"),e.lazy_view.visible.val=!0),null!=e.path&&(this.gui_store.set_path_prefix(e.path),e.lazy_view.activate())}}},587:function(e,t,n){},901:function(e,t,n){"use strict";n.r(t);var i=n(550),a=n(81);class s extends a.a{constructor(e,t,n){super(),this.tab_container=this.add(new i.a(e,{class:"viewer_ViewerView",tabs:[{title:"Models",key:"model",path:"/models",create_view:t},{title:"Textures",key:"texture",path:"/textures",create_view:n}]})),this.finalize_construction()}get element(){return this.tab_container.element}resize(e,t){this.tab_container.resize(e,t)}}var l=n(15);n.d(t,"initialize_viewer",(function(){return o}));var r=function(e,t,n,i){return new(n||(n=Promise))((function(a,s){function l(e){try{o(i.next(e))}catch(e){s(e)}}function r(e){try{o(i.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}o((i=i.apply(e,t||[])).next())}))};function o(e,t,i,a){const o=new l.a;return{view:new s(i,()=>r(this,void 0,void 0,(function*(){const{ModelController:s}=yield n.e(88).then(n.bind(null,824)),{ModelView:l}=yield n.e(19).then(n.bind(null,902)),{CharacterClassAssetLoader:r}=yield Promise.all([n.e(0),n.e(17)]).then(n.bind(null,825)),{ModelToolBarView:c}=yield Promise.all([n.e(0),n.e(11)]).then(n.bind(null,826)),{ModelStore:h}=yield Promise.all([n.e(0),n.e(24)]).then(n.bind(null,903)),{ModelToolBarController:d}=yield Promise.all([n.e(0),n.e(15)]).then(n.bind(null,827)),{CharacterClassOptionsView:b}=yield n.e(23).then(n.bind(null,828)),{CharacterClassOptionsController:u}=yield n.e(87).then(n.bind(null,829)),_=o.add(new r(e)),w=o.add(new h(i,_,t)),v=new s(w),p=new d(w),y=new u(w);let f;if(i.feature_active("webgpu")){const{WebgpuRenderer:t}=yield n.e(3).then(n.bind(null,897)),{ModelGfxRenderer:i}=yield n.e(1).then(n.bind(null,898));f=new i(w,new t(!0,e))}else if(i.feature_active("webgl")){const{WebglRenderer:e}=yield n.e(2).then(n.bind(null,895)),{ModelGfxRenderer:t}=yield n.e(1).then(n.bind(null,898));f=new t(w,new e(!0))}else{const{ModelRenderer:e}=yield Promise.all([n.e(4),n.e(0),n.e(16)]).then(n.bind(null,830));f=new e(w,a())}return new l(v,new c(p),new b(y),f)})),()=>r(this,void 0,void 0,(function*(){const{TextureController:t}=yield n.e(12).then(n.bind(null,831)),{TextureView:a}=yield n.e(13).then(n.bind(null,832)),{TextureRenderer:s}=yield n.e(18).then(n.bind(null,833)),l=o.add(new t);let r;if(i.feature_active("webgpu")){const{WebgpuRenderer:t}=yield n.e(3).then(n.bind(null,897));r=new s(l,new t(!1,e))}else{const{WebglRenderer:e}=yield n.e(2).then(n.bind(null,895));r=new s(l,new e(!1))}return new a(l,r)}))),dispose(){o.dispose()}}}}}]);